var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(pa,Ia,ka){pa instanceof String&&(pa=String(pa));for(var Ma=pa.length,Sa=0;Sa<Ma;Sa++){var kb=pa[Sa];if(Ia.call(ka,kb,Sa,pa))return{i:Sa,v:kb}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(pa,Ia,ka){if(pa==Array.prototype||pa==Object.prototype)return pa;pa[Ia]=ka.value;return pa};$jscomp.getGlobal=function(pa){pa=["object"==typeof globalThis&&globalThis,pa,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var Ia=0;Ia<pa.length;++Ia){var ka=pa[Ia];if(ka&&ka.Math==Math)return ka}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(pa,Ia){var ka=$jscomp.propertyToPolyfillSymbol[Ia];if(null==ka)return pa[Ia];ka=pa[ka];return void 0!==ka?ka:pa[Ia]};
$jscomp.polyfill=function(pa,Ia,ka,Ma){Ia&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(pa,Ia,ka,Ma):$jscomp.polyfillUnisolated(pa,Ia,ka,Ma))};$jscomp.polyfillUnisolated=function(pa,Ia,ka,Ma){ka=$jscomp.global;pa=pa.split(".");for(Ma=0;Ma<pa.length-1;Ma++){var Sa=pa[Ma];if(!(Sa in ka))return;ka=ka[Sa]}pa=pa[pa.length-1];Ma=ka[pa];Ia=Ia(Ma);Ia!=Ma&&null!=Ia&&$jscomp.defineProperty(ka,pa,{configurable:!0,writable:!0,value:Ia})};
$jscomp.polyfillIsolated=function(pa,Ia,ka,Ma){var Sa=pa.split(".");pa=1===Sa.length;Ma=Sa[0];Ma=!pa&&Ma in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var kb=0;kb<Sa.length-1;kb++){var mb=Sa[kb];if(!(mb in Ma))return;Ma=Ma[mb]}Sa=Sa[Sa.length-1];ka=$jscomp.IS_SYMBOL_NATIVE&&"es6"===ka?Ma[Sa]:null;Ia=Ia(ka);null!=Ia&&(pa?$jscomp.defineProperty($jscomp.polyfills,Sa,{configurable:!0,writable:!0,value:Ia}):Ia!==ka&&(void 0===$jscomp.propertyToPolyfillSymbol[Sa]&&(ka=1E9*Math.random()>>>0,
$jscomp.propertyToPolyfillSymbol[Sa]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(Sa):$jscomp.POLYFILL_PREFIX+ka+"$"+Sa),$jscomp.defineProperty(Ma,$jscomp.propertyToPolyfillSymbol[Sa],{configurable:!0,writable:!0,value:Ia})))};$jscomp.polyfill("Array.prototype.find",function(pa){return pa?pa:function(Ia,ka){return $jscomp.findInternal(this,Ia,ka).v}},"es6","es3");
$jscomp.checkStringArgs=function(pa,Ia,ka){if(null==pa)throw new TypeError("The 'this' value for String.prototype."+ka+" must not be null or undefined");if(Ia instanceof RegExp)throw new TypeError("First argument to String.prototype."+ka+" must not be a regular expression");return pa+""};
$jscomp.polyfill("String.prototype.startsWith",function(pa){return pa?pa:function(Ia,ka){var Ma=$jscomp.checkStringArgs(this,Ia,"startsWith");Ia+="";var Sa=Ma.length,kb=Ia.length;ka=Math.max(0,Math.min(ka|0,Ma.length));for(var mb=0;mb<kb&&ka<Sa;)if(Ma[ka++]!=Ia[mb++])return!1;return mb>=kb}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(pa){return pa?pa:function(Ia,ka,Ma){var Sa=this.length||0;0>ka&&(ka=Math.max(0,Sa+ka));if(null==Ma||Ma>Sa)Ma=Sa;Ma=Number(Ma);0>Ma&&(Ma=Math.max(0,Sa+Ma));for(ka=Number(ka||0);ka<Ma;ka++)this[ka]=Ia;return this}},"es6","es3");$jscomp.typedArrayFill=function(pa){return pa?pa:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
(function(){function pa(){mb.call(this);var Ha;this.getRemoteUrl=function(){return Ha};this.setRemoteUrl=function(ua){Ha=ua}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.theme&&(com.kingdee.bos.qing.theme={});"undefined"==typeof com.kingdee.bos.qing.theme.common&&(com.kingdee.bos.qing.theme.common=
{});var Ia=com.kingdee.bos.qing.theme.common;Ia.Facade=function(Ha,ua,Z,xa){Ma.call(this,Ha,ua,Z,xa);var L=this.protectedMethod;this.getThemeGroupList=function(){L.remote("listThemeGroup",{})};this.saveThemeGroup=function(w){w={model:JSON.stringify(w.toJsonObject())};L.remote("saveOrUpdateThemeGroup",w)};this.editThemeGroup=function(w){w={model:JSON.stringify(w.toJsonObject())};L.remote("saveOrUpdateThemeGroup",w)};this.saveOrderThemeGroup=function(w){w={themeGroupList:JSON.stringify({themeGroupList:w})};
L.remote("saveOrderThemeGroup",w)};this.saveOrderTheme=function(w){w={themeList:JSON.stringify({themeList:w})};L.remote("saveOrderTheme",w)};this.getTheme=function(w,qa){L.remote("listGroupedTheme",{themeGroupID:w,themeType:qa})};this.getAllThemes=function(w){w={arrThemeGroupID:w?JSON.stringify(w):null};L.remote("listAllGroupTheme",w)};this.deleteThemeGroup=function(w){L.remote("deleteThemeGroup",{themeGroupID:w})};this.saveOrUpdateTheme=function(w){w={model:JSON.stringify(w.toJsonObject())};L.remote("saveOrUpdateTheme",
w)};this.moveTheme=function(w,qa,W){L.remote("moveTheme",{themeID:w,groupID:qa,themeName:W})};this.copyTheme=function(w,qa,W,ma,za,bb){w={themeID:w,groupID:qa,copyName:W,themeType:ma,analysisCase:za?!0:!1};bb&&(w.copyThemes=bb);L.remote("copyTheme",w)};this.deleteTheme=function(w,qa,W,ma){L.remote("deleteTheme",{themeID:w,themeGroupID:qa,themeType:W,deletePublish:ma})};this.getAllThemeForExportTheme=function(){L.remote("getAllThemeForExportTheme",{})};this.confirmForExportTheme=function(w,qa){w={subjectList:JSON.stringify(w.subjectList),
dsbList:JSON.stringify(w.dsbList),programmingCardList:JSON.stringify(w.programmingCardList),withPublish:JSON.stringify(qa)};L.remote("writeZip",w)};this.getExportedData=function(w){var qa=ka.formatDate("yyyyMMdd_HHmmss");kb.downloadFile("Qing-"+qa+".qing-pkg",w)};this.getSelectableForImportTheme=function(w){L.remote("getSelectableForImportTheme",{fileName:w})};this.importSelectedTheme=function(w,qa,W,ma,za,bb){w={fileName:qa,themeList:JSON.stringify({exportThemes:W}),sourceStrategy:ma,firstTimeImport:za,
cacheIdKey:bb,paramPathPrefix:w};L.remote("importSelectedTheme",w)};this.handleConflictForImportTheme=function(w,qa){w={fileName:w,themeList:JSON.stringify({exportThemes:qa})};L.remote("handleConflictForImportTheme",w)};this.hasResourceManager=function(){L.remote("hasResourceManager",{})};this.resourceInfoStatistics=function(){L.remote("resourceInfoStatistics",{})};this.getResourceInfoDetailList=function(w,qa,W){L.remote("getResourceInfoDetailList",{resourceType:w,sortField:qa,sortOrder:W})};this.isFontExist=
function(w){L.remote("isFontExist",{fontId:w,appID:"qing"})};this.getFileUsageInfoByPaging=function(w,qa,W,ma,za,bb){L.remote("getFileUsageInfoByPaging",{resourceType:w,targetPage:qa,pageSize:W,sortField:ma,sortOrder:za,searchText:bb})};this.getTodayScheduleInfoByPaging=function(w,qa,W,ma,za){L.remote("getTodayScheduleInfoByPaging",{resourceType:w,targetPage:qa,pageSize:W,sortField:ma,sortOrder:za})};this.getAllResourceInfoDetailListByPagination=function(w,qa,W,ma,za,bb,ob,pb,tb){w={targetPage:w,
pageSize:qa,sortField:W,sortOrder:ma,queryParams:JSON.stringify({searchText:za,currentStatus:bb,currentScheduleType:ob,startDateTimeStamp:pb,endDateTimeStamp:tb}),timeZone:(new Date).getTimezoneOffset()/60};L.remote("getAllResourceInfoDetailListByPagination",w)};this.loadExceptionLog=function(w){L.remote("loadExceptionLog",{id:w})};this.isCurrentUserInQingAdminRole=function(){L.remote("isCurrentUserInQingAdminRole",{})};this.loadUnReadHandOverOperationRecord=function(){L.remote("loadUnReadHandOverOperationRecord",
{})};this.getThemeDetail=function(w,qa){L.remote("getThemeDetail",{themeID:w,type:qa})}};Ia.RemoteImpl=pa;var ka,Ma,Sa,kb,mb;(function(){var Ha=com.kingdee.bos.qing.common;ka=Ha.Util;Ha=com.kingdee.bos.qing.framework.common;Ma=Ha.AbstractFacade;Sa=Ha.AbstractIcons;kb=Ha.RemoteFramework;mb=Ha.AbstractRemoteCall})();Ia.Icons=new function(){Sa.call(this);var Ha=this.protectedMethod;this.protectedInit=function(xa,L){xa=com.kingdee.bos.qing.theme.ComboIcon;if(!xa)throw Error("com.kingdee.bos.qing.theme.ComboIcon not found.");
xa.define(L,"tm");L.setGap(1);L.setStartPosition(1,1);L.setIconSize(16,16);ua(0,1,"btn-import");ua(0,2,"btn-export");ua(0,3,"btn-edit");ua(0,4,"btn-delete");ua(0,5,"btn-dsb");ua(0,6,"btn-analysis");ua(0,7,"btn-square");ua(0,8,"btn-data");ua(0,9,"btn-moving");ua(0,10,"btn-copy");ua(0,11,"btn-program");ua(0,14,"btn_refreshThemeGroup");Z(1,12,"info");Z(1,13,"info_hover");Z(2,0,"icon_sort-asc-esc");Z(2,1,"icon_sort-asc-desc");Z(2,2,"icon_sortable-v");Z(2,3,"icon_date");ua(2,4,"btn-ai-analysis");L.setStartPosition(1,
157);L.setIconSize(32,32);Z(0,0,"btn_analysis_larger");Z(1,0,"btn_analysis_larger_hover");Z(0,1,"btn_square_larger");Z(1,1,"btn_square_larger_hover");Z(0,2,"btn_data_larger");Z(1,2,"btn_data_larger_hover");Z(0,3,"btn_dsb_larger");Z(1,3,"btn_dsb_larger_hover");L.setStartPosition(1,120);L.setIconSize(36,36);Z(0,0,"icon-card-subject");Z(0,1,"icon-card-dsb");Z(0,2,"icon-preset-small");Z(0,3,"icon-card-programablecard");L.setStartPosition(1,69);L.setIconSize(50,50);Z(0,0,"icon-addcard");Z(0,1,"icon-preset-big");
L.setStartPosition(207,78);L.setIconSize(65,78);Z(0,0,"icon-question");xa.define(L,"theme-manage-sprite");L.setGap(1);L.setStartPosition(1,1);L.setIconSize(16,16);Z(0,0,"btn_import");Z(1,0,"btn_import_hover");Z(0,1,"btn_export");Z(1,1,"btn_export_hover");Z(0,2,"chevrons_up");Z(1,2,"chevrons_up_hover");Z(0,3,"chevrons_down");Z(1,3,"chevrons_down_hover");Z(0,4,"btn_resourcesLimit");Z(1,4,"btn_resourcesLimit_hover");Z(0,5,"btn_newCard");Z(1,5,"btn_newCard_hover");Z(0,6,"btn_manage");Z(1,6,"btn_manage_hover");
L.setStartPosition(1,51);L.setIconSize(17,17);Z(0,0,"icon_search");Z(1,0,"icon_search_hover");Z(0,2,"btn_orderup");Z(1,2,"btn_orderup_hover");L.setStartPosition(20,52);L.setIconSize(17,17);Z(0,0,"btn-add-classification");Z(1,0,"btn-add-classification_hover");L.setStartPosition(1,101);L.setIconSize(17,17);Z(0,1,"icon_dsb");Z(0,0,"icon_subject");xa.define(L,"no-data.png");L.setStartPosition(0,0);L.setGap(0);L.setIconSize(220,220);Z(0,0,"no-data");xa.define(L,"group-theme-no-data");L.setStartPosition(0,
0);L.setGap(0);L.setIconSize(264,191);Z(0,0,"group-theme-no-data");xa.define(L,"common");L.setStartPosition(4,1);L.setGap(0);L.setIconSize(16,16);Z(0,3,"calendar")};var ua=function(xa,L,w){Z(xa,L,w+"_hover");Z(xa+1,L,w)},Z=function(xa,L,w){Ha.registIcon(xa,L,w)}};Ia.Integration=new function(){var Ha,ua,Z,xa,L,w,qa,W,ma=new pa,za=new pa,bb=new pa,ob,pb,tb,xb,Ab,Fa,vb,db,qb,$a,fa;this.setFunPublishRemoteImpl=function(J){W=J};this.getFunPublishRemoteImpl=function(){return W};this.setParamPathPrefix=
function(J){ob=J};this.getParamPathPrefix=function(){return ob};this.getRemoteImpl=function(){return ma};this.setRemoteUrl=function(J){ma.setRemoteUrl(J)};this.getResourceRemoteImpl=function(){return bb};this.setResourceRemoteUrl=function(J){bb.setRemoteUrl(J)};this.getDataModelEntrance=function(){return Ha};this.setDataModelEntrance=function(J){Ha=J};this.getAnalysisEntrance=function(){return ua};this.setAnalysisEntrance=function(J){ua=J};this.getSquareEntrance=function(){return Z};this.setSquareEntrance=
function(J){Z=J};this.getDashboardEntrance=function(){return xa};this.setDashboardEntrance=function(J){xa=J};this.getAIAnalysisEntrance=function(){return L};this.setAIAnalysisEntrance=function(J){L=J};this.getProgramableCardEntrance=function(){return w};this.setProgramableCardEntrance=function(J){w=J};this.setFunDeleteLappPublishInfos=function(J){qa=J};this.getFunDeleteLappPublishInfos=function(){return qa};this.setFunPublishedEmailLoginViewUrl=function(J){Fa=J};this.getFunPublishedEmailLoginViewUrl=
function(){return Fa};this.setFunPublishedEmailAnonymousViewUrl=function(J){Ab=J};this.getFunPublishedEmailAnonymousViewUrl=function(){return Ab};this.setFunTimedPushContentEditEntrance=function(J){xb=J};this.getFunTimedPushContentEditEntrance=function(){return xb};this.setFunPublishContentEditEntrance=function(J){tb=J};this.getFunPublishContentEditEntrance=function(){return tb};this.setFunPublishContext=function(J){pb=J};this.getFunPublishContext=function(){return pb};this.getFunThemeDetailContext=
function(){return pb};this.getMessageRemoteUrl=function(){return vb};this.setMessageRemoteUrl=function(J){vb=J};this.setImportJSCodeForManager=function(J){db=J};this.getImportJSCodeForManager=function(){return db};this.setHasAIAnalysisEntrance=function(J){qb=J};this.isHasAIAnalysisEntrance=function(){return"true"==qb};this.setFunSetLappPrivateUrl=function(J){$a=J};this.getFunSetLappPrivateUrl=function(){return $a};this.setFontRemoteImpl=function(J){za.setRemoteUrl(J)};this.getFontRemoteImpl=function(){return za};
this.setAppId=function(J){fa=J};this.getAppId=function(){return fa}};var N=new function(){var Ha;this.hookCollector=function(ua){Ha=ua};this.occur=function(ua,Z){try{Ha&&Ha(ua,Z)}catch(xa){window.console&&console.warn(xa)}}};N.TM_CREATE_THEME_TYPE="tm-create-theme-type";N.TM_THEME_ENTRANCE_TYPE="tm-theme-entrance-type";Ia.UserOperationReporter=N})();(function(){function pa(){var N=this,Ha,ua,Z,xa,L,w,qa,W;this.copy=function(){var ma=new pa;ma.setThemeID(Ha);ma.setThemeGroupID(ua);ma.setThemeName(Z);ma.setThemeDescription(xa);ma.setThemeType(L);ma.setIsPreset(w);return ma};this.setOrderID=function(ma){qa=ma};this.getOrderID=function(){return qa};this.setThemeID=function(ma){Ha=ma};this.getThemeID=function(){return Ha};this.setThemeGroupID=function(ma){ua=ma};this.getThemeGroupID=function(){return ua};this.setThemeName=function(ma){Z=ma};this.getThemeName=
function(){return Z};this.setThemeDescription=function(ma){xa=ma};this.getThemeDescription=function(){return xa};this.setThemeType=function(ma){L=ma};this.getThemeType=function(){return L};this.setIsPreset=function(ma){w=ma};this.isPreset=function(){return w};this.setBeforeMovedThemeGroupId=function(ma){W=ma};this.getBeforeMovedThemeGroupId=function(){return W};this.fromJsonObject=function(ma){N.setThemeID(ma.themeID);N.setThemeGroupID(ma.themeGroupID);N.setThemeName(ma.themeName);N.setThemeDescription(ma.description);
N.setThemeType(ma.themeType);N.setIsPreset(ma.isPreset);N.setOrderID(ma.orderID)};this.toJsonObject=function(){var ma={};ma.themeID=Ha;ma.themeGroupID=ua;ma.themeName=Z;ma.description=xa;ma.themeType=L;ma.isPreset=w;ma.orderID=qa;return ma}}function Ia(){var N=this,Ha,ua,Z,xa,L,w;this.setCreateDate=function(qa){Ha=qa};this.getCreateDate=function(){return Ha};this.setModifyDate=function(qa){ua=qa};this.getModifyDate=function(){return ua};this.setDataStrategy=function(qa){Z=qa};this.getDataStrategy=
function(){return Z};this.setSubRef=function(qa){xa=qa};this.getSubRef=function(){return xa};this.setPubDetail=function(qa){L=qa};this.getPubDetail=function(){return L};this.setPushDetail=function(qa){w=qa};this.getPushDetail=function(){return w};this.fromJsonObject=function(qa){if(qa){N.setCreateDate(qa.createDate);N.setModifyDate(qa.modifyDate);N.setDataStrategy(qa.dataStrategy);N.setSubRef(qa.subRefByDsb);N.setPubDetail(qa.publishVO);for(var W=[],ma=qa.publishVO,za=0;za<ma.length;za++){var bb=
new ka;bb.fromJsonObject(ma[za]);W.push(bb)}N.setPubDetail(W);W=[];qa=qa.pushDetail;for(za=0;za<qa.length;za++)ma=new Ma,ma.fromJsonObject(qa[za]),W.push(ma);N.setPushDetail(W)}}}function ka(){var N=this,Ha,ua,Z,xa,L,w,qa;this.getId=function(){return Ha};this.setId=function(W){Ha=W};this.getPublishTargetType=function(){return ua};this.setPublishTargetType=function(W){ua=W};this.getName=function(){return Z};this.setName=function(W){Z=W};this.getPathText=function(){return xa};this.setPathText=function(W){xa=
W};this.getUsers=function(){return L};this.setUsers=function(W){L=W};this.getRoles=function(){return w};this.setRoles=function(W){w=W};this.getViewType=function(){return qa};this.setViewType=function(W){qa=W};this.fromJsonObject=function(W){if(W){N.setId(W.id);N.setPublishTargetType(W.publishTargetType);N.setName(W.name);N.setPathText(W.pathText);if(W.users){for(var ma=[],za=W.users,bb=0;bb<za.length;bb++)ma.push(za[bb].text);N.setUsers(ma)}if(W.roles){ma=[];W=W.roles;for(bb=0;bb<W.length;bb++)ma.push(W[bb].text);
N.setRoles(ma)}}}}function Ma(){var N=this,Ha,ua,Z,xa;this.getName=function(){return Ha};this.setName=function(L){Ha=L};this.getNameRule=function(){return ua};this.setNameRule=function(L){ua=L};this.getTarget=function(){return Z};this.setTarget=function(L){Z=L};this.getPushSchedule=function(){return xa};this.setPushSchedule=function(L){xa=L};this.fromJsonObject=function(L){L&&(N.setName(L.name),N.setNameRule(L.nameRule),N.setTarget(L.target),N.setPushSchedule(L.pushSchedule))}}function Sa(){var N=
this,Ha,ua,Z,xa,L,w,qa,W,ma;this.getOperationId=function(){return Ha};this.setOperationId=function(za){Ha=za};this.getToUserId=function(){return ua};this.setToUserId=function(za){ua=za};this.getFromUserId=function(){return Z};this.setFromUserId=function(za){Z=za};this.getToUserName=function(){return xa};this.setToUserName=function(za){xa=za};this.getFromUserName=function(){return L};this.setFromUserName=function(za){L=za};this.getCreatorId=function(){return w};this.setCreatorId=function(za){w=za};
this.getCreatorName=function(){return qa};this.setCreatorName=function(za){qa=za};this.getType=function(){return W};this.setType=function(za){W=za};this.getHandOverRecordData=function(){return ma};this.setHandOverRecordData=function(za){ma=za};this.fromJsonObject=function(za){if(za){N.setOperationId(za.operationId);N.setToUserId(za.toUserId);N.setFromUserId(za.fromUserId);N.setToUserName(za.toUserName);N.setFromUserName(za.fromUserName);N.setCreatorId(za.creatorId);N.setCreatorName(za.creatorName);
N.setType(za.type);var bb=[];za=za.handOverRecordDatas;for(var ob=0;ob<za.length;ob++){var pb=new kb;pb.fromJsonObject(za[ob]);bb.push(pb)}N.setHandOverRecordData(bb)}}}function kb(){var N=this,Ha,ua,Z,xa,L,w,qa;this.getType=function(){return Ha};this.setType=function(W){Ha=W};this.getName=function(){return ua};this.setName=function(W){ua=W};this.getFromUserId=function(){return Z};this.setFromUserId=function(W){Z=W};this.getFromUserName=function(){return xa};this.setFromUserName=function(W){xa=W};
this.getPathName=function(){return L};this.setPathName=function(W){L=W};this.getPubId=function(){return w};this.setPubId=function(W){w=W};this.getPublishToType=function(){return qa};this.setPublishToType=function(W){qa=W};this.fromJsonObject=function(W){W&&(N.setType(W.type),N.setName(W.name),N.setFromUserId(W.fromUserId),N.setFromUserName(W.fromUserName),N.setPathName(W.pathName),N.setPubId(W.pubId),N.setPublishToType(W.publishToType))}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&
(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.theme&&(com.kingdee.bos.qing.theme={});"undefined"==typeof com.kingdee.bos.qing.theme.model&&(com.kingdee.bos.qing.theme.model={});var mb=com.kingdee.bos.qing.theme.model;mb.ThemeGroupModel=function(){var N=this,Ha,ua,Z,xa,L=!1;this.setOrderID=function(w){xa=w};this.getOrderID=function(){return xa};this.setThemeGroupID=
function(w){Ha=w};this.getThemeGroupID=function(){return Ha};this.setThemeGroupName=function(w){ua=w};this.getThemeGroupName=function(){return ua};this.setIsPreset=function(w){Z=w};this.isPreset=function(){return Z};this.setHasData=function(w){L=w};this.hasData=function(){return L};this.fromJsonObject=function(w){N.setThemeGroupID(w.themeGroupID);N.setThemeGroupName(w.themeGroupName);N.setIsPreset(w.isPreset);N.setOrderID(w.orderID)};this.toJsonObject=function(){var w={};w.themeGroupID=Ha;w.themeGroupName=
ua;w.isPreset=Z;w.orderID=xa;return w}};mb.ThemeModel=pa;mb.HandOverRecordOperationVO=Sa;mb.HandOverRecordOperationDataVO=kb;mb.ThemeDetailModel=Ia;mb.LappInfoModelDataVO=function(){var N=this,Ha,ua,Z;this.getAnalysisName=function(){return Ha};this.setAnalysisName=function(xa){Ha=xa};this.getDirectoryName=function(){return ua};this.setDirectoryName=function(xa){ua=xa};this.getViewType=function(){return Z};this.setViewType=function(xa){Z=xa};this.fromJsonObject=function(xa){xa&&(N.setAnalysisName(xa.analysisName),
N.setDirectoryName(xa.directoryName),N.setViewType(xa.viewType))}};pa.createInstance=function(N){if(N){var Ha=new pa;Ha.fromJsonObject(N);return Ha}};pa.THEMETYPE_SUBJECT="0";pa.THEMETYPE_DASHBOARD="1";pa.THEMETYPE_PROGRAMABLECARD="2";Ia.DATASTRATEGY_TIMING="timing";Ia.DATASTRATEGY_REALTIME="realTime";Sa.TYPE_FORM="FORM";Sa.TYPE_TO="TO";kb.TYPE_SUBJECT="0";kb.TYPE_DSB="1";kb.TYPE_PUBLISH="2";kb.TYPE_PUSH="3"})();(function(){function pa(){bb.call(this);var fa=this,J=this.protectedMethod,sa,V,na,H,oa,c;this.setGlobal=function(Ea){sa=Ea};this.setRootNode=function(Ea){na=Ea};this.setMessageCurtain=function(Ea){};this.asyncShowExportDialog=function(){$a.setCallback(function(){fa.setSize(640,480);fa.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);J.setTitle(Fa.get("exportThemeOrDashboard","\u5bfc\u51fa\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f"));J.setContentPaneCreator(Ja);J.setClosingChecker(fa.isValidToAccepted,
!0);J.setClosingAction(Aa);fa.showDialog()});$a.loadJs("common/qing-table.js")};var Aa=function(Ea){if(Ea){Ea=V.getCheckedThemeNodes();for(var ya={},Va=[],va=[],d=[],gb=0;gb<Ea.length;gb++){var Ua=Ea[gb],Ba=Ua.getThemeId();switch(Ua.getThemeType()){case qb.THEMETYPE_SUBJECT:va.push(Ba);break;case qb.THEMETYPE_DASHBOARD:Va.push(Ba);break;case qb.THEMETYPE_PROGRAMABLECARD:d.push(Ba)}}ya[pa.SUBJECT_LIST]=va;ya[pa.DASHBOARD_LIST]=Va;ya[pa.PROGRAMABLECARD_LIST]=d;cb(ya)}},Ja=function(){var Ea=$("<div>"),
ya=Ea.append;H=new tb;H.addSearchListener(wa);H.setSearchListenerDelay(400);H.setPlaceholder(Fa.get("searchBoxPlaceholder","\u641c\u7d22\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f"));H.setShowSearchIcon(!0);var Va=H.getJqUi();Va.addClass("theme-imexport-search-box");ya.call(Ea,Va);ya=Ea.append;var va=new ma;va.setChecked(!1);va.addCheckedListener(Wa);Va=Fa.get("showOnlyChecked","\u4ec5\u663e\u793a\u9009\u4e2d\u9879");va.setText(Va);va=va.getJqUi();va.attr("title",Va);va.addClass("theme-export-show-only-checked-box");
qa.layoutCtrl(va,250,2,200,23);ya.call(Ea,va);V=new Ia(na);ya=V.getJqUi();Ea.append(ya);c=new pb;c.setOn(!1);ya=c.getJqUi();ya.addClass("theme-export-with-publish-switchbutton");Va=(new ob(Fa.get("carryPublish","\u643a\u5e26\u53d1\u5e03\u4fe1\u606f"))).getJqUi();Va.addClass("theme-export-with-publish-text");Ea.append(ya);Ea.append(Va);return Ea},wa=function(Ea){oa=H.getText().trim();V.searchKey(oa)},Wa=function(Ea,ya){ya&&(V.setShowOnlyChecked(Ea.isChecked()),V.searchKey(oa))};this.isValidToAccepted=
function(Ea){0===V.getCheckedThemeNodes().length?(J.getMessageCurtain().showPrompt(Fa.get("selectNone","\u672a\u9009\u4e2d\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f\u3002")),Ea(!1)):Ea(!0)};var cb=function(Ea){sa.createFacade(function(ya){sa.createFacade().getExportedData(ya)},function(ya,Va){return 1030001==ya?(ya=Ab.createFeedbackDialog(),ya.setMessage(Va),ya.setOptionType(Ab.OPTION_OK),ya.showDialog(),!0):!1}).confirmForExportTheme(Ea,c.isOn())}}function Ia(fa){function J(){KTDefaultCellRender.call(this,
Wa);var l=this;this.paintCellUI=function(h,b){var p=l.getCurrentRow().getUserObject(),B=p.getName();h=$("<div>");h.addClass("theme-export-area-list-item");var Q=new ma,S=Q.getJqUi(),ra=$("<div>");S.addClass("theme-export-area-list-item-checkbox");ra.addClass("theme-export-area-list-item-text");h.append(S);h.append(ra);Q.setChecked(p.isChecked());Q.setUserObject(p);Q.addCheckedListener(f);Ja[p.getThemeId()]=Q;if(0==p.getSubNodeLevel()){if(ra.text(B),p.isPreset()){p=ra.append;var da=$("<span>");da.addClass("theme-export-area-list-item-text-preset");
da.text(Fa.get("presetTakeBrakets","\uff08\u9884\u7f6e\uff09"));p.call(ra,da)}}else{B=p.getName();if(wa&&B){Q=wa.toUpperCase();S=B.toUpperCase();var a=S.split(Q),m=Q.length;for(da in a){var g=S.indexOf(a[da]),q=B.substr(u,a[da].length);g+=a[da].length;var r=S.length-g;S=S.substr(g,r);B=B.substr(g,r);g=$("<span>");g.text(q);g.appendTo(ra);if(da!=a.length-1&&1<a.length){var u=S.indexOf(Q);q=B.substr(u,m);g=u+m;r=S.length-g;S=S.substr(g,r);B=B.substr(g,r);g=$("<span>");g.text(q);g.css("color","red");
g.clone().appendTo(ra)}}}else ra.text(B);ra.addClass("theme-export-theme-name-label");ra=h.append;p=p.getThemeType();da=$("<span>");da.addClass("theme-export-theme-icon");u="btn-analysis";p==qb.THEMETYPE_DASHBOARD&&(u="btn-dsb");L.background(da,u);ra.call(h,da)}b?(b=$(b),b.css("overflow","visible"),h.appendTo(b)):h.appendTo(jqDiv);qa.layoutCtrlWithLRTB(h,0,0,null,0,0,null)}}var sa=this,V,na=[],H=[],oa=[],c=!1,Aa=!1,Ja,wa,Wa,cb,Ea,ya,Va;this.setShowOnlyChecked=function(l){Aa=l};this.getCheckedThemeNodes=
function(){var l,h=[];for(l=0;l<oa.length;l++){var b=oa[l];b.isChecked()&&h.push(b)}return h};this.getJqUi=function(){if(!V){va();for(var l=0;l<oa.length;l++){var h=oa[l];if(h.getThemeType()===qb.THEMETYPE_DASHBOARD){var b=h.getRelativeTheme();if(b&&0<b.length){for(var p=[],B=0;B<b.length;B++)for(var Q=b[B],S=0;S<oa.length;S++){var ra=oa[S];Q===ra.getThemeId()&&(p.push(ra),ra.getRelativeDsb().push(h))}h.setRelativeTheme(p)}}}V=$("<div>");V.addClass("theme-export-area");V.addClass("theme-export-tree-selection-area");
Ea=$("<div>");Ea.addClass("theme-export-tree-selection-area-checked-prompt");Ea.css("color","#666");qa.layoutCtrlWithLRTB(Ea,0,null,200,0,null,23);Ea.prependTo(V);cb=d();V.append(cb);Ua();Ba()}return V};var va=function(){var l=function(p){na.push(p);if(p instanceof ua||p instanceof Z)oa.push(p);else if(H.push(p),(p=p.getChildren())&&0<p.length)for(var B=0;B<p.length;B++)l(p[B])},h=fa.getChildren();if(h&&0<h.length)for(var b=0;b<h.length;b++)l(h[b])},d=function(){Wa=new KTable;var l=$(Wa.getUI());
l.children().css("overflow-x","hidden");var h=new J;Wa.setCellRender(h);Wa.setSyncUIWhenModelChanged(!1);Wa.addTreeExpandListener(gb);Wa.addColumn().setWidth(400);qa.layoutCtrlWithLRTB(l,0,0,null,23,0,null);return l},gb=function(l,h){(l=Wa.getRow(h.getRowIdx()).getUserObject())&&l.setExpanded(h.isExpanded())};this.searchKey=function(l){var h;wa=l;c=!!wa;for(h=0;h<oa.length;h++){var b=oa[h];var p=b.isChecked();if(l){var B=-1<b.getName().toUpperCase().indexOf(wa.toUpperCase());p=Aa?B&&p:B}else p=Aa?
b.isChecked():!0;b.setVisible(p)}for(l=0;l<H.length;l++){b=H[l];p=!0;B=!1;var Q=b.getChildren();for(h=0;h<Q.length;h++){var S=Q[h];S.isVisible()&&(p=p&&S.isChecked());B=B||S.isVisible()}p=p&&B;b.setVisible(B);b.setChecked(p)}sa.updateUi()};this.updateUi=function(){for(var l=!1,h=0;h<oa.length;h++)l=l||oa[h].isVisible();l?(ya&&ya.hide(),cb&&cb.remove(),cb=d(),V.append(cb),Ua()):(ya||(ya=$("<div>"),ya.css({position:"absolute",top:"26px",left:"0",right:"0",bottom:"0","z-index":"2",color:"rgb(102, 102, 102)"}),
Va=$("<div>"),Va.text(Fa.get("noDataPrompt","\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c")),qa.layoutCtrlCenterAlign(Va,500),Va.css({height:"20px","line-height":"20px","text-align":"center","font-size":"16px",color:"#BBBBBB",top:"50%","margin-top":"98.5px"}),Va.appendTo(ya),l=$("<div>"),L.background(l,"no-data"),qa.layoutCtrlCenterAlign(l,187),l.css({"background-size":"contain",top:"50%",height:"187px","margin-top":"-113.5px"}),l.appendTo(ya),V.append(ya)),ya.show(),cb.hide())};var Ua=
function(){Ja={};for(var l=0;l<na.length;l++){var h=na[l];if(h.isVisible()){var b=db.createRow(Wa,!1),p=b.getCell(0),B=h.getSubNodeLevel();B=new KTCellTreeModel(B);b.setHeight(23);b.setUserObject(h);h instanceof N?(h=c?!0:h.isExpanded(),B.setExpanded(h)):(h=h.getParentNode(),h=c?!0:h.isExpanded(),b.setHide(!h));p.setTreeModel(B)}}Wa.updateUI()},Ba=function(){for(var l=0,h=0;h<oa.length;h++)oa[h].isChecked()&&l++;l=Fa.get("checkedNumberPrompt","(\u5df2\u9009\u62e9 #1 \u9879)").replace("#1",l);Ea.text(l)},
f=function(l,h){if(h){l.getUserObject().check(l.isChecked(),z);for(l=0;l<na.length;l++)if(h=na[l],h.isVisible()){var b=Ja[h.getThemeId()];b&&b.setChecked(h.isChecked())}Ba()}},z=function(l){for(var h=!0,b=l.getChildren(),p=0;p<b.length;p++){var B=b[p];B.isVisible()&&(h=h&&B.isChecked())}l.setChecked(h)}}function ka(){function fa(na){KTDefaultCellRender.call(this,na);var H=this,oa=this.paintCellUI;this.paintCellUI=function(wa,Wa){H.getCurrentRowIdx()<db.getHeadRowCount()?oa(wa,Wa):($(wa),3==H.getCurrentColIdx()?
Ja(wa,H.getCellWidth(),H.getCellHeight(),H.getCurrentRow()):4==H.getCurrentColIdx()?c(wa,H.getCellWidth(),H.getCellHeight(),H.getCurrentRow()):oa(wa,Wa))};var c=function(wa,Wa,cb,Ea){wa=db.createCtrlInCell(wa,Wa,cb,W);Ea.getCell(4).setUserObject(wa);Wa=Ea.getUserObject().strategy==ka.ALL_CONFLICTTYPE[1]?!0:!1;wa.setEnabled(Wa);wa.setSelected(Ea.getUserObject().publishStrategy);wa.setItemModels(ka.ALL_PUBLISHCONFLICTTYPE);wa.setUserObject(Ea);wa.setCustomPainter(function(ya,Va,va){switch(va){case ka.ALL_PUBLISHCONFLICTTYPE[0]:ya=
Fa.get("noDisposal","\u4e0d\u5904\u7406");break;case ka.ALL_PUBLISHCONFLICTTYPE[1]:ya=Fa.get("overwrite","\u8986\u76d6");break;default:ya=""}va=$("<div>");va.text(ya);va.appendTo(Va)});wa.addSelectedChangedListener(Aa)},Aa=function(wa,Wa,cb){wa.getUserObject().getUserObject().publishStrategy=cb},Ja=function(wa,Wa,cb,Ea){wa=db.createCtrlInCell(wa,Wa,cb,W);wa.setSelected(Ea.getUserObject().strategy);wa.setItemModels(ka.ALL_CONFLICTTYPE);wa.setUserObject(Ea);wa.setCustomPainter(function(ya,Va,va){switch(va){case ka.ALL_CONFLICTTYPE[0]:ya=
Fa.get("ignore","\u5ffd\u7565");break;case ka.ALL_CONFLICTTYPE[1]:ya=Fa.get("overwrite","\u8986\u76d6");break;case ka.ALL_CONFLICTTYPE[2]:ya=Fa.get("rename","\u91cd\u547d\u540d");break;default:ya=""}va=$("<div>");va.text(ya);va.appendTo(Va)});wa.addSelectedChangedListener(function(ya,Va,va){Va=Ea.getCell(4);var d=va==ka.ALL_CONFLICTTYPE[1]?!0:!1;Va.getUserObject().setEnabled(d);Va.getUserObject().setSelected(ka.ALL_PUBLISHCONFLICTTYPE[0]);ya.getUserObject().getUserObject().strategy=va})}}var J=this,
sa,V;this.getConflictThemeList=function(){return V};this.getJqUi=function(na){sa=db.createTable();db.bindTableListenerForCtrl(sa);var H=new fa(sa);H.setOutsideVisible(!1);sa.setCellRender(H);sa.addColumns(5);sa.getColumn(0).setWidth(100);sa.getColumn(1).setWidth(80);sa.getColumn(2).setWidth(200);sa.getColumn(3).setWidth(80);sa.getColumn(4).setWidth(80);H=db.createHeadRow(sa);H.getCell(0).setValue(Fa.get("groupName","\u5206\u7c7b\u540d\u79f0"));H.getCell(1).setValue(Fa.get("type","\u7c7b\u578b"));
H.getCell(2).setValue(Fa.get("subjectOrDashboardName","\u540d\u79f0"));H.getCell(3).setValue(Fa.get("strategy","\u5904\u7406\u7b56\u7565"));H.getCell(4).setValue(Fa.get("publishStrategy","\u53d1\u5e03\u4fe1\u606f\u5904\u7406"));V=na;for(var oa in na)V[oa].strategy=ka.ALL_CONFLICTTYPE[0],V[oa].publishStrategy=ka.ALL_PUBLISHCONFLICTTYPE[0];J.updateUi(na);db.refresh(sa);na=$(sa.getUI());na.addClass("theme-import-selection-table");return na};this.updateUi=function(na){db.clearWithoutHead(sa);db.refresh(sa);
for(var H,oa=0;oa<na.length;oa++){var c=na[oa];H=db.createRow(sa);H.setUserObject(c);H.getCell(0).setValue(c.themeGroupName);0==c.themeType?H.getCell(1).setValue(Fa.get("subject","\u4e1a\u52a1\u4e3b\u9898")):1==c.themeType&&H.getCell(1).setValue(Fa.get("dsb","\u4eea\u8868\u677f"));H.getCell(2).setValue(c.themeName);H.getCell(3).setValue(c.strategy);H.getCell(4).setValue(c.publishStrategy)}db.refresh(sa)};this.refresh=function(){db.refresh(sa)}}function Ma(fa){bb.call(this);var J=this,sa=this.protectedMethod,
V=[],na,H,oa,c,Aa,Ja;this.setGlobal=function(d){na=d};this.setFunRefreshThemeGroupList=function(d){oa=d};this.addConfirmListener=function(d){V.push(d)};this.createUi=function(d,gb){J.setSize(640,480);J.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);sa.setTitle(Fa.get("importThemeOrDashboard","\u5bfc\u5165\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f"));sa.setContentPaneCreator(function(){var Ua=$("<div>");Ua.append(wa());Ua.append(cb());H=new Ia(gb);var Ba=H.getJqUi();Ba.addClass("theme-export-tree-selection-area");
Ua.append(Ba);Ba=$("<div>");com.kingdee.bos.qing.common.DomUtil.layoutCtrl(Ba,0,335,608,23);Ua.append(Ba);var f=Fa.get("sourceStrategy","\u8d44\u6e90\u51b2\u7a81\u5904\u7406\u7b56\u7565"),z=(new ob(f)).getJqUi();z.attr("title",f);z.addClass("theme-export-sourceStrategy-label");z.css("display","inline-block");Ba.append(z);f=$("<div>");z=$("<span>");z.text(Fa.get("resourceConflictPolicy","\u53ef\u5bf9\u5730\u56fe\u3001\u56fe\u7247\u3001\u5b8f\u5b9a\u4e49\u8bbe\u7f6e\u51b2\u7a81\u65f6\u7684\u5904\u7406\u7b56\u7565\uff0c\u5305\u62ec\u5ffd\u7565\u3001\u8986\u76d6\u3001\u91cd\u547d\u540d\u3002\n\u2460\u5ffd\u7565\uff1a\u5f53\u540d\u79f0\u51b2\u7a81\u65f6\uff0c\u4e0d\u8fdb\u884c\u8d44\u6e90\u7684\u5bfc\u5165\u3002\n\u2461\u8986\u76d6\uff1a\u5f53\u540d\u79f0\u51b2\u7a81\u65f6\uff0c\u7528\u5bfc\u5165\u7684\u8d44\u6e90\u8986\u76d6\u5f53\u524d\u7cfb\u7edf\u4e2d\u540c\u540d\u7684\u8d44\u6e90\u3002\n\u2462\u91cd\u547d\u540d\uff1a\u5f53\u540d\u79f0\u51b2\u7a81\u65f6\uff0c\u5c06\u540c\u540d\u7684\u8d44\u6e90\u81ea\u52a8\u91cd\u547d\u540d\uff0c\u5bfc\u5165\u5f53\u524d\u7cfb\u7edf\u4e2d\u3002\u5176\u4e2d\u5b8f\u5b9a\u4e49\u3001\u6765\u81ea\u4e91\u7d20\u6750\u7684\u56fe\u7247\u4e0d\u652f\u6301\u201c\u91cd\u547d\u540d\u201d\u7684\u5904\u7406\u7b56\u7565\uff0c\u5f53\u9009\u62e9\u201c\u91cd\u547d\u540d\u201d\u65f6\uff0c\u9ed8\u8ba4\u4f7f\u7528\u201c\u5ffd\u7565\u201d\u3002"));
z.appendTo(f);z=new xb;z.setIconType(xb.ICON_TYPE_QUESTION);z.setTipsSize(350,150);z.setTipsHtml(f);f=z.getJqUi();f.addClass("theme-export-help-icon");Ba.append(f);c=new W;c.setSelected(ka.ALL_CONFLICTTYPE[1]);c.setItemModels(ka.ALL_CONFLICTTYPE);c.setCustomPainter(function(l,h,b){switch(b){case ka.ALL_CONFLICTTYPE[0]:l=Fa.get("ignore","\u5ffd\u7565");break;case ka.ALL_CONFLICTTYPE[1]:l=Fa.get("overwrite","\u8986\u76d6");break;case ka.ALL_CONFLICTTYPE[2]:l=Fa.get("rename","\u91cd\u547d\u540d");break;
default:l=""}b=$("<div>");b.text(l);b.appendTo(h)});f=c.getJqUi();f.addClass("theme-export-sourceStrategy-comboBox");Ba.append(f);return Ua});sa.setClosingChecker(J.isValidToAccepted,!0);sa.setClosingAction(function(Ua){if(Ua&&(Ua=H.getCheckedThemeNodes(),0!=Ua.length)){for(var Ba=[],f=0;f<Ua.length;f++)Ba.push(Ua[f].toJsonObject());ya(d,Ba)}});J.showDialog()};var wa=function(){Aa=new tb;Aa.addSearchListener(Wa);Aa.setSearchListenerDelay(400);Aa.setPlaceholder(Fa.get("searchBoxPlaceholder","\u641c\u7d22\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f"));
Aa.setShowSearchIcon(!0);var d=Aa.getJqUi();d.addClass("theme-imexport-search-box");return d},Wa=function(){Ja=Aa.getText().trim();H.searchKey(Ja)},cb=function(){var d=new ma;d.setChecked(!1);d.addCheckedListener(Ea);d.setText(Fa.get("showOnlyChecked","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));d=d.getJqUi();qa.layoutCtrl(d,250,2,200,23);return d},Ea=function(d,gb){gb&&(H.setShowOnlyChecked(d.isChecked()),H.searchKey(Ja))};this.isValidToAccepted=function(d){0===H.getCheckedThemeNodes().length?(sa.getMessageCurtain().showPrompt(Fa.get("selectNone",
"\u672a\u9009\u4e2d\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f\u3002")),d(!1)):d(!0)};var ya=function(d,gb){na.createFacade(function(Ua){var Ba=Ua.conflictTheme,f=Ua.conflictPublish;if(0<Ba.length){$("<div>");for(var z=null,l=0;l<gb.length;l++){var h=gb[l].themeName,b=gb[l].themeGroupName;if(null==z)for(var p=0;p<Ba.length;p++)Ba[p].themeName!=h&&(z=b)}l=gb.length-Ba.length;h=new Sa;h.setSourceStrategy(c.getSelected());h.setCacheImportMapIdKey(Ua.cacheMapIdKey);h.setGlobal(na);h.setFunRefreshThemeGroupList(oa);
h.createUi(d,Ba,f,l,z);h.repaint()}else Va(gb,f)},function(Ua,Ba){return 1020101==Ua||1100021==Ua?(fa.showPrompt(vb.get("resourceFileLimit","\u5bfc\u5165\u5931\u8d25\uff0c\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3\u3002"),2E3),!0):!1}).importSelectedTheme(w.getParamPathPrefix(),d,gb,c.getSelected(),!0)},Va=function(d,gb){if(0==gb.length)va(d);else{var Ua=new kb;Ua.setClosedListener(function(){va(d)});Ua.showDialog(gb)}},va=function(d){var gb;for(gb in d)var Ua=d[gb].themeGroupName;oa&&oa(Ua)}}function Sa(){bb.call(this);
var fa=this,J=this.protectedMethod,sa=[],V,na,H,oa,c,Aa=[],Ja,wa,Wa,cb;this.setSourceStrategy=function(Ba){Wa=Ba};this.setCacheImportMapIdKey=function(Ba){cb=Ba};this.setGlobal=function(Ba){V=Ba};this.setFunRefreshThemeGroupList=function(Ba){wa=Ba};this.addConfirmListener=function(Ba){sa.push(Ba)};this.createUi=function(Ba,f,z,l,h){na=Ba;H=f;Aa=z;oa=h;Ja=l;fa.setSize(640,480);fa.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);J.setTitle(Fa.get("importThemeOrDashboard","\u5bfc\u5165\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f"));
J.setContentPaneCreator(function(){var b=$("<div>"),p=Fa.get("importSuccessPrompt","\u6210\u529f\u5bfc\u5165#1\u4e2a\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f\u3002\u4ee5\u4e0b\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f\u540d\u79f0\u51b2\u7a81\uff0c\u8bf7\u5904\u7406\u3002").replace("#1",l);p=(new ob(p)).getJqUi();var B=ya(Fa.get("allIgnore","\u5168\u90e8\u5ffd\u7565"),!0,Va),Q=ya(Fa.get("allOverwrite","\u5168\u90e8\u8986\u76d6"),!0,va),S=ya(Fa.get("allRename","\u5168\u90e8\u91cd\u547d\u540d"),!1,
d);p.addClass("theme-import-selection-prompt");B.addClass("theme-import-selection-ignore-btn");Q.addClass("theme-import-selection-overwrite-btn");S.addClass("theme-import-selection-rename-btn");b.append(p);b.append(B);b.append(Q);b.append(S);c=new ka;b.append(c.getJqUi(f));return b});J.setClosingChecker2(fa.isValidToAccepted,Ea,!0);J.setClosingAction(function(b){});fa.showDialog()};var Ea=function(Ba){Ba(!0);0<Ja&&wa(oa)};this.repaint=function(){c.refresh()};var ya=function(Ba,f,z){var l=$("<div>");
l.text(Ba);l.addClass("theme-import-conflict-all-operate");l.on("click",z);f&&(Ba=$("<div>"),Ba.addClass("theme-import-conflict-btn-split-line"),Ba.appendTo(l));return l},Va=function(){for(var Ba in H)H[Ba].strategy=ka.ALL_CONFLICTTYPE[0],H[Ba].publishStrategy=ka.ALL_PUBLISHCONFLICTTYPE[0];c.updateUi(H)},va=function(){for(var Ba in H)H[Ba].strategy=ka.ALL_CONFLICTTYPE[1];c.updateUi(H)},d=function(){for(var Ba in H)H[Ba].strategy=ka.ALL_CONFLICTTYPE[2],H[Ba].publishStrategy=ka.ALL_PUBLISHCONFLICTTYPE[0];
c.updateUi(H)};this.isValidToAccepted=function(Ba){gb(na,H,Ba)};var gb=function(Ba,f,z){var l=[],h;for(h in f)"ignore"!=f[h].strategy&&(l=l.concat(f[h]));0==l.length?(z(!0),Ua(oa)):V.createFacade(function(b){z(!0);var p=l[0].themeGroupName;Aa=Aa.concat(b.conflictPublish);Ua(p)},function(b,p){return 1020101==b||1100021==b?(J.getMessageCurtain().showPrompt(vb.get("resourceFileLimit","\u5bfc\u5165\u5931\u8d25\uff0c\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3\u3002"),2E3),!0):!1}).importSelectedTheme(w.getParamPathPrefix(),
Ba,l,Wa,!1,cb)},Ua=function(Ba){if(0==Aa.length)wa&&wa(Ba);else{var f=new kb;f.setClosedListener(function(){wa&&wa(Ba)});f.showDialog(Aa)}}}function kb(){var fa,J;this.setClosedListener=function(V){J=V};this.showDialog=function(V){var na=$(document.body),H=$("<div class='sa-ctrl-common-modallayer'>");H.appendTo(na);var oa=new za(H);oa.setTitle(Fa.get("importThemeOrDashboard","\u5bfc\u5165\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f"));var c=na.prop("clientWidth");na=na.prop("clientHeight");oa.setBounds(c-
640>>1,na-480>>1,640,480);oa.setSelectable(!0);oa.setToolbarVisible(!1);oa.setContent(sa(V));oa.showFooterPane();oa.addClosingListener(function(Aa,Ja){J&&J();H&&H.remove();Aa&&Aa.destroy()},!0);oa.addClosedListener(function(Aa){});oa.show();db.refresh(fa)};var sa=function(V){var na=$("<div>"),H=$("<div>");H.addClass("theme-publish-conflict-tips");H.text(Fa.get("publishConflictTips","\u4ee5\u4e0b\u8bb0\u5f55\u56e0\u540d\u79f0\u91cd\u590d\u672a\u53d1\u5e03\u6210\u529f\uff0c\u53ef\u5230\u5bf9\u5e94\u4e1a\u52a1\u4e3b\u9898\u6216\u4eea\u8868\u677f\u4e2d\u624b\u52a8\u53d1\u5e03"));
H.appendTo(na);fa=db.createTable();db.bindTableListenerForCtrl(fa);fa.addColumns(3);fa.getColumn(0).setWidth(100);fa.getColumn(1).setWidth(230);fa.getColumn(2).setWidth(210);H=db.createHeadRow(fa);H.getCell(0).setValue(Fa.get("publishName","\u53d1\u5e03\u540d\u79f0"));H.getCell(1).setValue(Fa.get("source","\u6765\u6e90"));H.getCell(2).setValue(Fa.get("publishPath","\u53d1\u5e03\u8def\u5f84"));H=$(fa.getUI());H.addClass("theme-publish-conflict-table");H.appendTo(na);db.clearWithoutHead(fa);for(H=0;H<
V.length;H++){var oa=V[H],c=oa.themeName,Aa=oa.themeType==qb.THEMETYPE_SUBJECT?Fa.get("subject","\u4e1a\u52a1\u4e3b\u9898"):Fa.get("dashboard","\u4eea\u8868\u677f"),Ja=oa.publishPath,wa=Ja.split("/")[1];c=Ja.substring(Ja.indexOf(":")+1,Ja.indexOf("/")+1)+Aa+":"+c;Ja=Ja.substring(0,Ja.indexOf("/"));Aa=db.createRow(fa);Aa.setUserObject(oa);Aa.getCell(0).setValue(wa);Aa.getCell(1).setValue(c);Aa.getCell(2).setValue(Ja)}db.refresh(fa);return na}}function mb(){var fa=this,J,sa,V,na,H=!1,oa=!0;this.setName=
function(c){J=c};this.getName=function(){return J};this.setThemeId=function(c){sa=c};this.getThemeId=function(){return sa};this.setIsPreset=function(c){V=c};this.isPreset=function(){return V};this.setParentNode=function(c){na=c};this.getParentNode=function(){return na};this.setChecked=function(c){H=c};this.isChecked=function(){return H};this.setVisible=function(c){oa=c};this.isVisible=function(){return oa};this.getSubNodeLevel=function(){for(var c=-1,Aa=na;Aa;)c++,Aa=Aa.getParentNode();return c};
this.check=function(c){};this.protectedMethod={fromJsonObject:function(c){fa.setName(c.name);fa.setThemeId(c.themeId);fa.setIsPreset(c.isPreset)},toJsonObject:function(){var c={};c.themeName=J;c.themeID=sa;c.isPreset=V;return c}}}function N(){mb.call(this);var fa=this,J=this.protectedMethod,sa=!0,V=[];this.setExpanded=function(na){sa=na};this.isExpanded=function(){return sa};this.setChildren=function(na){V=na};this.getChildren=function(){return V};this.fromJsonObject=function(na){J.fromJsonObject(na);
if((na=na.children)&&0<na.length)for(var H=0;H<na.length;H++){var oa=na[H],c,Aa=oa.themeType;Aa?Aa===qb.THEMETYPE_SUBJECT?c=new Z:Aa===qb.THEMETYPE_DASHBOARD&&(c=new ua):c=new N;c.fromJsonObject(oa);c.setParentNode(fa);V.push(c)}};this.toJsonObject=function(){return J.toJsonObject()};this.check=function(na,H){if(0!==V.length&&na!==fa.isChecked()){fa.setChecked(na);for(var oa=0;oa<V.length;oa++){var c=V[oa];c.isVisible()&&c.check(na,H)}}}}function Ha(){mb.call(this);var fa=this,J=this.protectedMethod,
sa;this.setThemeType=function(V){sa=V};this.getThemeType=function(){return sa};this.protectedMethod={fromJsonObject:function(V){J.fromJsonObject(V);fa.setThemeType(V.themeType)},toJsonObject:function(){var V=J.toJsonObject(),na=fa.getParentNode();V.themeType=sa;V.themeGroupId=na.getThemeId();V.themeGroupName=na.getName();return V}}}function ua(){Ha.call(this);var fa=this,J=this.protectedMethod,sa=[];this.setRelativeTheme=function(V){sa=V};this.getRelativeTheme=function(){return sa};this.fromJsonObject=
function(V){J.fromJsonObject(V);fa.setRelativeTheme(V.dsbRelativeTheme)};this.toJsonObject=function(){var V=J.toJsonObject(),na=[];if(sa&&0<sa.length)for(var H=0;H<sa.length;H++)na.push(sa[H].getThemeId());V.relativeTheme=na;return V};this.check=function(V,na){if(V!==fa.isChecked()){fa.setChecked(V);for(var H=0;H<sa.length;H++){var oa=sa[H],c=V;V||(c=oa.isUsedByCheckedDsb());oa.check(c,na)}na&&na(fa.getParentNode())}}}function Z(){Ha.call(this);var fa=this,J=this.protectedMethod,sa=[];this.setRelativeDsb=
function(V){sa=V};this.getRelativeDsb=function(){return sa};this.fromJsonObject=function(V){J.fromJsonObject(V)};this.toJsonObject=function(){return J.toJsonObject()};this.isUsedByCheckedDsb=function(){var V=!1;if(sa&&0<sa.length)for(var na=0;na<sa.length;na++)V=V||sa[na].isChecked();return V};this.check=function(V,na){V!==fa.isChecked()&&(fa.setChecked(V),na&&na(fa.getParentNode()))}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.theme&&(com.kingdee.bos.qing.theme={});"undefined"==typeof com.kingdee.bos.qing.theme.imexport&&(com.kingdee.bos.qing.theme.imexport={});var xa=com.kingdee.bos.qing.theme.imexport;xa.ExportDialog=pa;xa.UploadPane=function(){var fa,J,sa;this.createJqUi=function(c,Aa,Ja){fa=Ja;Ja=$("<div>");Ja.addClass("theme-importing-exporting-main");var wa=$(document.body),Wa=$("<div class='sa-ctrl-modallayer'>");
Wa.appendTo(wa);Wa.css("height",$(".theme-manage").height());J=$("<progress value='0' max='100'>");J.addClass("theme-importing-upload-progress");var cb=$("<div>");cb.addClass("theme-importing-exporting-text");cb.text(Fa.get("uploading","\u6b63\u5728\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u5019"));Ja.append(J);Ja.append(cb);wa.append(Ja);V(c,Aa,Ja,Wa)};var V=function(c,Aa,Ja,wa){var Wa=new FormData;Wa.append("filename",c);c=new XMLHttpRequest;c.upload.addEventListener("progress",na,!1);c.addEventListener("error",
H,!1);var cb=com.kingdee.bos.qing.framework.common.RemoteFrameworkRegister.getUploadUrl();c.open("post",cb,!0);c.onload=function(Ea){200==this.status&&(Ea=JSON.parse(this.response),"number"==typeof Ea.errorCode&&3099003==Ea.errorCode?fa.showError(Ea.errorMessage):oa(Ea.data,Aa),Ja.remove(),wa.remove())};c.send(Wa)},na=function(c){var Aa=J.get(0);c.lengthComputable&&(Aa.max=c.total,Aa.value=c.loaded)},H=function(c){_funErrorCallbackEvent&&_funErrorCallbackEvent(Fa.get("uploadFail","\u4e0a\u4f20\u5931\u8d25"))},
oa=function(c,Aa){Aa.createFacade(function(Ja){var wa=new N;wa.fromJsonObject(Ja);0!=wa.getChildren().length?(Ja=new Ma(fa),Ja.createUi(c,wa),Ja.setGlobal(Aa),Ja.setFunRefreshThemeGroupList(sa)):fa.showPrompt(Fa.get("noThemeAndGroup","\u672a\u627e\u5230\u4e1a\u52a1\u4e3b\u9898\u5206\u7c7b\u548c\u4e1a\u52a1\u4e3b\u9898\u3002"))},function(Ja,wa){return!1}).getSelectableForImportTheme(c)};this.setFunRefreshThemeGroupList=function(c){sa=c}};xa.FolderNode=N;var L,w,qa,W,ma,za,bb,ob,pb,tb,xb,Ab,Fa,vb,db,
qb,$a;(function(){var fa=com.kingdee.bos.qing.theme.common;L=fa.Icons;w=fa.Integration;fa=com.kingdee.bos.qing.common;qa=fa.DomUtil;fa=com.kingdee.bos.qing.ui.component;W=fa.ComboBox;ma=fa.CheckBox;za=fa.Dialog;bb=fa.AbstractModalDialog;ob=fa.Label;pb=fa.SwitchButton;tb=fa.SearchBox;xb=fa.HelpIcon;Ab=fa.MessageDialog;fa=com.kingdee.bos.qing.framework.common;Fa=fa.MultilanguageManager.createPackageAccessor(xa);vb=fa.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.theme.resourceinfo);
fa=com.kingdee.bos.qing.common.ui;db=fa.TableUtil;fa=com.kingdee.bos.qing.theme.model;qb=fa.ThemeModel;fa=com.kingdee.bos.qing;$a=fa.CodeLoader})();pa.SUBJECT_LIST="subjectList";pa.DASHBOARD_LIST="dsbList";pa.PROGRAMABLECARD_LIST="programmingCardList";ka.ALL_CONFLICTTYPE=["ignore","overwrite","rename"];ka.ALL_PUBLISHCONFLICTTYPE=["noDisposal","overwrite"]})();(function(){function pa(){var f=this,z,l,h,b,p,B,Q,S,ra,da,a,m,g,q,r,u,T,ca,D,I,O,y,v,E,K,P,x,R,aa,X;this.getUserFreeFileSize=function(){return z};this.setUserFreeFileSize=function(A){z=A};this.getUserUseFileSize=function(){return h};this.setUserUseFileSize=function(A){h=A};this.getTenantFreeFileSize=function(){return l};this.setTenantFreeFileSize=function(A){l=A};this.getTenantPayFileSize=function(){return b};this.setTenantPayFileSize=function(A){b=A};this.getTenantFileSize=function(){return p};
this.setTenantFileSize=function(A){p=A};this.getTenantUseFileSize=function(){return B};this.setTenantUseFileSize=function(A){B=A};this.getOtherUserTenantUseFileSize=function(){return Q};this.setOtherUserTenantUseFileSize=function(A){Q=A};this.getUserFreeScheduleCount=function(){return S};this.setUserFreeScheduleCount=function(A){S=A};this.getUserUseScheduleCount=function(){return ra};this.setUserUseScheduleCount=function(A){ra=A};this.getTenantFreeScheduleCount=function(){return da};this.setTenantFreeScheduleCount=
function(A){da=A};this.getTenantPayScheduleCount=function(){return a};this.setTenantPayScheduleCount=function(A){a=A};this.getTenantScheduleCount=function(){return m};this.setTenantScheduleCount=function(A){m=A};this.getTenantUseScheduleCount=function(){return g};this.setTenantUseScheduleCount=function(A){g=A};this.getOtherUserTenantUseScheduleCount=function(){return q};this.setOtherUserTenantUseScheduleCount=function(A){q=A};this.getTotalFileSize=function(){return r};this.setTotalFileSize=function(A){r=
A};this.getAvaFileSize=function(){return u};this.setAvaFileSize=function(A){u=A};this.getTotalScheduleCount=function(){return D};this.setTotalScheduleCount=function(A){D=A};this.getAvaScheduleCount=function(){return I};this.setAvaScheduleCount=function(A){I=A};this.getUserUseFileSizePercent=function(){return v};this.setUserUseFileSizePercent=function(A){v=A};this.getTenantOTherUserFileSizePercent=function(){return E};this.setTenantOTherUserFileSizePercent=function(A){E=A};this.getUserFreeFileSizePercent=
function(){return K};this.setUserFreeFileSizePercent=function(A){K=A};this.getUserUseScheduleCountPercent=function(){return x};this.setUserUseScheduleCountPercent=function(A){x=A};this.getTenantOTherScheduleCountPercent=function(){return R};this.setTenantOTherScheduleCountPercent=function(A){R=A};this.getUserFreeScheduleCountPercent=function(){return aa};this.setUserFreeScheduleCountPercent=function(A){aa=A};this.getUserAvaFileSize=function(){return T};this.setUserAvaFileSize=function(A){T=A};this.getTenantAvaFileSize=
function(){return ca};this.setTenantAvaFileSize=function(A){ca=A};this.getUserAvaScheduleCount=function(){return O};this.setUserAvaScheduleCount=function(A){O=A};this.getTenantAvaScheduleCount=function(){return y};this.setTenantAvaScheduleCount=function(A){y=A};this.getTenantUseFileSizePercent=function(){return P};this.setTenantUseFileSizePercent=function(A){P=A};this.getTenantUseScheduleCountPercent=function(){return X};this.setTenantUseScheduleCountPercent=function(A){X=A};this.fromJsonObject=function(A){f.setUserFreeFileSize(A.userFreeFileSize);
f.setUserUseFileSize(A.userUseFileSize);f.setTenantFreeFileSize(A.tenantFreeFileSize);f.setTenantPayFileSize(A.tenantPayFileSize);f.setTenantFileSize(A.tenantFileSize);f.setTenantUseFileSize(A.tenantUseFileSize);f.setOtherUserTenantUseFileSize(A.otherUserTenantUseFileSize);f.setUserFreeScheduleCount(A.userFreeScheduleCount);f.setUserUseScheduleCount(A.userUseScheduleCount);f.setTenantFreeScheduleCount(A.tenantFreeScheduleCount);f.setTenantPayScheduleCount(A.tenantPayScheduleCount);f.setTenantScheduleCount(A.tenantScheduleCount);
f.setTenantUseScheduleCount(A.tenantUseScheduleCount);f.setOtherUserTenantUseScheduleCount(A.otherUserTenantUseScheduleCount);f.setTotalFileSize(A.totalFileSize);f.setAvaFileSize(A.avaFileSize);f.setUserAvaFileSize(A.userAvaFileSize);f.setTenantAvaFileSize(A.tenantAvaFileSize);f.setTotalScheduleCount(A.totalScheduleCount);f.setAvaScheduleCount(A.avaScheduleCount);f.setUserAvaScheduleCount(A.userAvaScheduleCount);f.setTenantAvaScheduleCount(A.tenantAvaScheduleCount);f.setUserUseFileSizePercent(A.userUseFileSizePercent);
f.setTenantOTherUserFileSizePercent(A.tenantOTherUserFileSizePercent);f.setUserFreeFileSizePercent(A.userFreeFileSizePercent);f.setUserUseScheduleCountPercent(A.userUseScheduleCountPercent);f.setTenantOTherScheduleCountPercent(A.tenantOTherScheduleCountPercent);f.setUserFreeScheduleCountPercent(A.userFreeScheduleCountPercent);f.setTenantUseFileSizePercent(A.tenantUseFileSizePercent);f.setTenantUseScheduleCountPercent(A.tenantUseScheduleCountPercent)}}function Ia(f,z){db.call(this);var l=this.protectedMethod,
h=this,b,p,B;(function(){l.setTitle(c.get("qingResourceFilesDetail","\u8f7b\u5206\u6790\u5b58\u50a8\u8be6\u60c5"));h.setSize(880,480);l.setSelectable(!0);l.setContentPaneCreator(function(){b=new Ma(f,z);b.setGlobal(p);b.setModel(B);var Q=b.getJqUi();Q.css("top","10px");return Q});l.setFooterClosingOnly(!0);l.setClosingChecker2(null,function(Q){l.destroy();return!0});l.setClosingAction(function(Q){})})();this.refreshTable=function(){b.refreshTable()};this.setGlobal=function(Q){p=Q};this.setModel=function(Q){B=
Q}}function ka(f,z,l,h){db.call(this);var b=this.protectedMethod,p=this,B,Q,S;(function(){var ra=h?c.get("scheduleDetailHistory","\u5386\u53f2\u8c03\u5ea6\u8be6\u60c5"):c.get("scheduleDetailIntraday","\u5f53\u65e5\u8c03\u5ea6\u8be6\u60c5");b.setTitle(ra);p.setSize(880,480);b.setSelectable(!0);b.setContentPaneCreator(function(){Q=h?new kb(z,l,!1):new Sa(f,z,l,!1);Q.setGlobal(B);Q.setModel(S);var da=Q.getJqUi();da.css("top","10px");h&&da.css("border","1px solid #ccc");return da});b.setFooterClosingOnly(!0);
b.setClosingChecker2(null,function(da){b.destroy();return!0});b.setClosingAction(function(da){})})();this.refreshTable=function(){Q.refreshTable()};this.setGlobal=function(ra){B=ra};this.setModel=function(ra){S=ra}}function Ma(f,z,l){function h(C,U){KTDefaultCellRender.call(this,C);var la=this,Oa=this.paintCellUI;this.paintCellUI=function(ia,Da){var Pa=la.getCurrentRowIdx(),Qa=la.getCurrentRow(),Ya=la.getCurrentColIdx();la.setPaddingHV(8,1);if(1==Pa)Oa(ia,Da),b&&5!=Ya&&b.addSortingTips($(ia),U[Ya]),
b||3!=Ya||B||(B=new Va,B.setFunSortChangeListener(function(Ca){Q=P[Ya];S=va.ORDER_DESC;Ca&&(Q=Ca.getField(),S=Ca.getOrder());ca=!1;Ca=m.createResourceFacade(function(ea){aa(ea,D.resetPaginationAndJumpToFirstPage)},function(ea,Y){return!1});Ca.getFileUsageInfoByPaging(f,1,D.getPageSize(),Q,S,ra);Ca.setShowBlocking(!0)})),ca&&3==Ya&&B.addDefaultSortingTips($(ia),U[Ya]);else if(2<Pa&&5==Ya){if(U&&2<=U.length){Qa=a.getRow(Pa);var ab=Qa.getUserObject();if(ab){Qa=ab.fromType;var hb=ab.fromId,Na=ab.fromPath,
ub=ab.fromTargetType,eb=ab.userId;Da=ab.sourceExist;Pa=$(ia);ia=$("<div>");ia.text(c.get("wOpen","\u6253\u5f00"));ia.addClass("resourceinfo-detaillist-wopen");Da&&ia.appendTo(Pa);if("THEME"==Qa||"THEMESOURCECONVERT"==Qa||"THEMESCHEDULE"==Qa)ia.on("click",function(Ca){z&&z(ab.fromId,ab.fromName)});else if(Ua.isFromPublish(Qa,hb))ia.on("click",function(Ca){(new Z).openPublishManager({id:hb,type:ub,path:Na,userId:eb,lappPathName:ab.lappPathName,appType:ab.appType})});else if("IMAGELIBRARY"==Qa)ia.on("click",
function(Ca){(new Z).openImglib({id:hb,categoryId:Na})});else if("FONTLIBRARY"==Qa){Qa=ab.fromPathName;Da=Qa.lastIndexOf("/");var ba=Qa.substring(Da+1);ia.on("click",function(Ca){Ca=new Z;var ea={fontId:Na,title:ba,oMessageCurtain:m.getMessageCurtain()};Ca.openFontDetailPanel(ea)})}else if(Ua.isFromTimePush(Qa,hb))ia.on("click",function(Ca){(new Z).openPushManager({id:Na,type:ub})})}}}else 2<Pa&&0==Ya?(Da=$("<span>"),Da.css({"padding-left":"8px","padding-right":"8px","line-height":"28px"}),Qa=Qa.getCell(Ya).getValue(),
Ra(Da,ra,Qa),Da.appendTo(ia)):Oa(ia,Da)};var Ra=function(ia,Da,Pa){if(Da&&Pa){Da=Da.toUpperCase();var Qa=Pa.toUpperCase(),Ya=Qa.split(Da),ab=Da.length,hb;for(hb in Ya){var Na=Qa.indexOf(Ya[hb]),ub=Pa.substr(ba,Ya[hb].length);Na+=Ya[hb].length;var eb=Qa.length-Na;Qa=Qa.substr(Na,eb);Pa=Pa.substr(Na,eb);Na=$("<span>");Na.text(ub);Na.appendTo(ia);if(hb!=Ya.length-1&&1<Ya.length){var ba=Qa.indexOf(Da);ub=Pa.substr(ba,ab);Na=ba+ab;eb=Qa.length-Na;Qa=Qa.substr(Na,eb);Pa=Pa.substr(Na,eb);Na=$("<span>");
Na.text(ub);Na.css("color","red");Na.clone().appendTo(ia)}}}else ia.text(Pa)}}new Fa;var b,p,B,Q,S,ra,da,a,m,g,q,r,u,T,ca=!0,D=new Ea,I=c.get("subjectDeleted","\u4e1a\u52a1\u4e3b\u9898\u5df2\u5220\u9664"),O=c.get("publishRecordDeleted","\u53d1\u5e03\u8bb0\u5f55\u5df2\u5220\u9664"),y=c.get("pushConfigDeleted","\u5b9a\u65f6\u63a8\u9001\u914d\u7f6e\u5df2\u5220\u9664"),v=c.get("imageDeleted","\u56fe\u7247\u5df2\u5220\u9664"),E=c.get("fontDeleted","\u5b57\u4f53\u5df2\u5220\u9664"),K=[c.get("fileName",
"\u6587\u4ef6\u540d\u79f0"),c.get("path","\u8def\u5f84"),c.get("fileTypeName","\u6587\u4ef6\u7c7b\u578b"),c.get("size","\u5927\u5c0f"),c.get("createDate","\u521b\u5efa\u65f6\u95f4"),c.get("operation","\u64cd\u4f5c")],P="displayName path fromType fileSize createDate operation".split(" ");this.getJqUi=function(){null==da&&(da=$("<div>"),R(),X());return da};this.setGlobal=function(C){m=C};this.setModel=function(C){g=C};var x=function(){if(!a){a=Aa.createTable();u=$(a.getUI());a.addColumns(K.length);
a.getColumn(0).setWidth(l?142:180);a.getColumn(1).setWidth(l?190:222);a.getColumn(2).setWidth(l?130:117);a.getColumn(3).setWidth(l?95:88);a.getColumn(4).setWidth(132);a.getColumn(5).setWidth(80);for(var C=Aa.createHeadRow(a),U=0;U<K.length;U++)C.getCell(U).setValue(K[U]);C=new h(a,P);C.setOutsideVisible(!1);a.setCellRender(C);a.setCellAcrossListener(function(la,Oa,Ra){da&&da.find(".resourceinfo-detaillist-table-op").remove();var ia=la&&0<la.length?la[0]:null;p!=ia&&(p&&(b.hideSortingTips($(p)),p=
null),1==Oa&&1!=Ra&&5!=Ra&&(b||(b=new Va,b.setFunSortChangeListener(function(Da){Q=P[Ra];S=va.ORDER_DESC;Da&&(Q=Da.getField(),S=Da.getOrder());ca=!1;Da=m.createResourceFacade(function(Pa){aa(Pa,D.resetPaginationAndJumpToFirstPage)},function(Pa,Qa){return!1});Da.getFileUsageInfoByPaging(f,1,D.getPageSize(),Q,S,ra);Da.setShowBlocking(!0)})),b.showSortingTips(la,P[Ra]),p=ia))});H.layoutCtrl(u,10,32,l?780:830,308);u.appendTo(da)}r||(r=$("<div>"),C="<span style='color: "+(.9>g.getUserUseFileSizePercent()?
"#688BF7":"#F34E4E")+";'>"+g.getUserUseFileSize()+"MB</span>",C=c.get("usedSpace","\u5df2\u4f7f\u7528\u7a7a\u95f4")+"\uff1a"+C,r.html(C),r.addClass("resourceinfo-detaillist-resource-used-label"),r.css({top:"8px",left:"110px"}),r.appendTo(da));q||(q=new W);q.loadLappDirName(T,function(){ja(T,P)})};this.refreshTable=function(){Aa.refresh(a)};var R=function(){D.setJumpToPageListener(function(C,U,la){var Oa=m.createResourceFacade(function(ia){aa(ia,la)},function(ia,Da){return!1});Q="fileSize";S=va.ORDER_DESC;
if(b){var Ra=b.getShowSortingModel();Ra&&(Q=Ra.getField(),S=Ra.getOrder())}Oa.getFileUsageInfoByPaging(f,C,U,Q,S,ra);Oa.setShowBlocking(!0)});D.setComboBoxItemModelsAndSelectedItem([5,10,20,50,100,500,1E3],2);da.append(D.getJqUi())},aa=function(C,U){void 0===C.infos||null===C.infos?A():(U?U(C.totalRow):D.refreshPagination(),T=C.infos,ja(T,P));return!0},X=function(){var C=m.createResourceFacade(function(la){void 0===la.infos||null===la.infos?A():(T=la.infos,D.resetPaginationAndJumpToFirstPage(la.totalRow),
x());return!0},function(la,Oa){return!1});Q="filesize";S=va.ORDER_DESC;if(b){var U=b.getShowSortingModel();U&&(Q=U.getField(),S=U.getOrder())}C.getFileUsageInfoByPaging(f,1,D.getPageSize(),Q,S,ra);C.setShowBlocking(!0)},A=function(){var C=m.getMessageCurtain(),U=c.get("resourceDetailLoadFail","\u83b7\u53d6\u8d44\u6e90\u660e\u7ec6\u5931\u8d25\u3002");C.showError(U,2E3)},ja=function(C,U){a.setSyncUIWhenModelChanged(!1);Aa.clearWithoutHead(a);for(var la=0;la<C.length;la++)for(var Oa=Aa.createRow(a),
Ra=0;Ra<U.length;Ra++){var ia=C[la][U[Ra]];if("createDate"==U[Ra])Oa.getCell(Ra).setValue(C[la][U[Ra]+"Format"]);else if("path"==U[Ra]){var Da=C[la].fromPathName,Pa=C[la].fromType,Qa=C[la].fromId;ia=C[la].fromTargetType;var Ya=C[la].sourceExist;if(t(Pa))var ab=Ya?Da:I;else Ua.isFromPublish(Pa,Qa)?Ya?W.MOBILE==ia?(Da=q.getLappPathName(C[la],"fromId"),ab=d.getPublishTargetType(ia)+"\uff1a"+Da,C[la].lappPathName=Da,ia=q.getLappAppType(C[la],"fromId"),C[la].appType=ia):ab=d.getPublishTargetType(ia)+"\uff1a"+
Da:ab=O:"IMAGELIBRARY"==Pa?ab=Ya?c.get("imageLib","\u56fe\u7247\u5e93")+"\uff1a"+Da:v:"FONTLIBRARY"==Pa?ab=Ya?c.get("fontLib","\u5b57\u4f53\u5e93")+"\uff1a"+Da:E:Ua.isFromTimePush(Pa,Qa)&&(ab=Ya?gb.getPushTargetType(ia)+c.get("timingPush","\u5b9a\u65f6\u63a8\u9001"):y);Oa.getCell(Ra).setValue(ab)}else"fromType"==U[Ra]?((ab=C[la].fromName)&&t(C[la].fromType)&&Oa.setUserObject(C[la]),ab=Ba.getFromType(ia),Oa.getCell(Ra).setValue(ab)):"operation"==U[Ra]?(Pa=C[la].fromType,ia=C[la].fromTargetType,Ua.isFromPublish(Pa,
Qa)&&W.MOBILE==ia&&(Da=q.getLappPathName(C[la],"fromId"),C[la].lappPathName=Da,ia=q.getLappAppType(C[la],"fromId"),C[la].appType=ia),Oa.setUserObject(C[la])):Oa.getCell(Ra).setValue(ia)}1<a.getRowsCount()&&(C=new KTBorderStyle,C.setLeftBorderWidth(0),a.getRow(1).getCell(0).setBorder(C));a.updateUI(!0);a.setSyncUIWhenModelChanged(!0);u.children(":first-child").children(":first-child").css("width","100%");C=a;U=C.keepScrollStatus();U.v&&(U.v=0);C.restoreScrollStatus(U)},t=function(C){return"THEME"==
C||"THEMESOURCECONVERT"==C||"THEMESCHEDULE"==C}}function Sa(f,z,l,h){mb.call(this,z,l,h);var b=this.protectedMethod,p;this.getJqUi=function(){null==p&&(p=$("<div>"),b.createPagination(),b.initResourceInfoDetailList());return p};this.executeGetResourceInfoDetailList=function(B,Q,S){B.getTodayScheduleInfoByPaging(f,Q,S,b.getSortField(),b.getSortOrder())};this.setTipsLabelAndTable=function(){var B=$("<div>"),Q="<span style='color: "+(b.getModel().getUserUseScheduleCountPercent()<Sa.WARNING_COUNT?"#688BF7":
"#F34E4E")+";'>"+b.getModel().getUserUseScheduleCount()+c.get("times","\u6b21")+"</span>";Q=c.get("usedSchedule","\u5df2\u4f7f\u7528\u8c03\u5ea6\u6b21\u6570")+"\uff1a"+Q;B.html(Q);B.addClass("resourceinfo-detaillist-resource-used-label");B.css("top","8px");B.css("left","100px");B.appendTo(p);H.layoutCtrl(b.getJqTable(),10,32,h?782:830,308);b.getJqTable().appendTo(p)}}function kb(f,z,l){mb.call(this,f,z,l);var h=this.protectedMethod,b,p,B,Q,S,ra,da=0,a=0,m=[new ua(c.get("executeAllType","\u5168\u90e8\u72b6\u6001"),
0),new ua(c.get("executeSuccess","\u6210\u529f"),1),new ua(c.get("executeFail","\u5931\u8d25"),2),new ua(c.get("someFailure","\u90e8\u5206\u5931\u8d25"),5),new ua(c.get("unPush","\u672a\u63a8\u9001"),4),new ua(c.get("inProgress","\u8fdb\u884c\u4e2d"),3)],g=[new ua(c.get("scheduleTypeAll","\u5168\u90e8\u8c03\u5ea6\u7c7b\u578b"),0),new ua(c.get("scheduleTypeETD","\u5b9a\u65f6\u9884\u63d0\u53d6"),1),new ua(c.get("scheduleTypePE","\u5b9a\u65f6\u63a8\u9001-\u90ae\u4ef6"),6),new ua(c.get("scheduleTypePCH",
"\u5b9a\u65f6\u63a8\u9001-\u4e91\u4e4b\u5bb6"),3),new ua(c.get("scheduleTypePEWC","\u5b9a\u65f6\u63a8\u9001-\u4f01\u4e1a\u5fae\u4fe1"),4),new ua(c.get("scheduleTypePDD","\u5b9a\u65f6\u63a8\u9001-\u9489\u9489"),5),new ua(c.get("scheduleTypeLT","\u5b9a\u65f6\u66f4\u65b0-\u7f29\u7565\u56fe"),2)];this.getJqUi=function(){if(null==b){b=$("<div>");var D=$("<div>");D.addClass("resourceinfo-detail-search-area");var I=new N;I.setSearchListener(q);p=I;I=p.getJqUi();H.layoutCtrlWithLRTB(I,null,14,171,-8,null,
25);I.appendTo(D);B=r(m,u);I=B.getJqUi();H.layoutCtrl(I,240,0,77,24);I.appendTo(D);Q=r(g,T);I=Q.getJqUi();H.layoutCtrl(I,350,0,120,24);I.appendTo(D);S=new ya;I=S.getJqUi();I.css("box-shadow","0 1px 0 0 #f0f0f0");H.layoutCtrl(I,null,4,200,20);S.setFunConfirmListener(ca);I.appendTo(D);D.appendTo(b);h.createPagination();H.layoutCtrl(h.getPaginationJqUi(),null,32,null,null);h.initResourceInfoDetailList()}return b};this.executeGetResourceInfoDetailList=function(D,I,O){var y=S.getDateRange(),v=y[0];y=y[1];
D.getAllResourceInfoDetailListByPagination(I,O,h.getSortField(),h.getSortOrder(),ra,da,a,v,y)};this.protectedGetHelpTips=function(){return c.get("historyTips","\u4ec5\u4fdd\u7559\u6700\u8fd1\u4e00\u5e74\u7684\u8c03\u5ea6\u8be6\u60c5\u3002")};this.setTipsLabelAndTable=function(){H.layoutCtrl(h.getJqTable(),10,64,l?782:830,276);h.getJqTable().appendTo(b)};this.getSearchText=function(){return ra};var q=function(){ra=p.getInputContent().trim();h.initResourceInfoDetailList()},r=function(D,I){var O=new Ha;
O.setSearchType(D);O.setSelectedChangedListener(I);return O},u=function(D,I,O){da=O.getTypeId();q()},T=function(D,I,O){a=O.getTypeId();q()},ca=function(){q()}}function mb(f,z,l){function h(){return function(x,R,aa){p.getJqUi()&&p.getJqUi().find(".resourceinfo-detaillist-table-op").remove();var X=x&&0<x.length?x[0]:null;m!=X&&(m&&(a.hideSortingTips($(m)),m=null),1==R&&1!=aa&&5!=aa&&6!=aa&&(a||(a=new Va,a.setFunSortChangeListener(function(A){q=y[aa];r=va.ORDER_DESC;A&&(q=A.getField(),r=A.getOrder());
u=!1;A=Q.createResourceFacade(function(ja){E(ja,D.resetPaginationAndJumpToFirstPage)},function(ja,t){return!1});p.executeGetResourceInfoDetailList(A,1,D.getPageSize());A.setShowBlocking(!0)})),a.showSortingTips(x,y[aa]),m=X))}}function b(x,R){KTDefaultCellRender.call(this,x);var aa=this,X=this.paintCellUI;this.paintCellUI=function(ja,t){var C=aa.getCurrentRowIdx(),U=aa.getCurrentRow(),la=aa.getCurrentColIdx();aa.setPaddingHV(8,1);if(1==C)X(ja,t),a&&1!=la&&5!=la&&6!=la&&a.addSortingTips($(ja),R[la]),
a||3!=la||g||(g=new Va,g.setFunSortChangeListener(function(hb){q=y[la];r=va.ORDER_DESC;hb&&(q=hb.getField(),r=hb.getOrder());u=!1;hb=Q.createResourceFacade(function(Na){E(Na,D.resetPaginationAndJumpToFirstPage)},function(Na,ub){return!1});p.executeGetResourceInfoDetailList(hb,1,D.getPageSize());hb.setShowBlocking(!0)})),u&&3==la&&g.addDefaultSortingTips($(ja),R[la]);else if(2<C&&5<=la)if(5==la){if(R&&6<=R.length&&"executeState"==R[5]){U=B.getRow(C);var Oa=U.getUserObject();U=U.getCell(la);if(Oa){t=
U.getValue();U="en"==wa.getUrlParamValue("language");if(t==w.EXECUTESTATE_SUCCESS){C="green";var Ra=U?50:30;var ia=c.get("success","\u6210\u529f")}else t==w.EXECUTESTATE_EXECUTING?(C="blue",Ra=U?70:40,ia=c.get("inProgress","\u8fdb\u884c\u4e2d")):t==w.EXECUTESTATE_WARNINGRULE_UNMATCHED?(C="#ff831f",Ra=U?52:40,ia=c.get("unPush","\u672a\u63a8\u9001")):t==w.EXECUTESTATE_PUSH_PART_ERROR?(C="#ff831f",Ra=U?62:52,ia=c.get("someFailure","\u90e8\u5206\u5931\u8d25")):(C="red",Ra=30,ia=c.get("fail","\u5931\u8d25"));
ja=$(ja);var Da=$("<div style='border: solid 1px;text-align:center;height: 16px'>");Da.text(ia);Da.attr("title",ia);Da.css("color",C);Da.css("width",Ra+"px");Da.css("position","absolute");Da.css("left","3px");Da.css("top","0");Da.css("bottom","0");Da.css("margin","auto");Da.css("overflow","hidden");Da.css("text-overflow","ellipsis");Da.appendTo(ja);t==w.EXECUTESTATE_NOENOUGHSCHEDULECOUNT?(t=$("<div style='text-align:left;width:75px;height: 16px'>"),t.text(c.get("insufficientSchedulingTimes","\u8c03\u5ea6\u6b21\u6570\u4e0d\u8db3")),
t.attr("title",c.get("insufficientSchedulingTimes","\u8c03\u5ea6\u6b21\u6570\u4e0d\u8db3")),t.addClass("resourceinfo-detaillist-desc"),t.appendTo(ja)):t==w.EXECUTESTATE_NOFILESTORAGE||t==w.EXECUTESTATE_EXCEPTION||t==w.EXECUTESTATE_PUSH_PART_ERROR||t==w.EXECUTESTATE_NO_LICENCE||t==w.EXECUTESTATE_USER_DISABLED?(t=$("<div>"),t.text(c.get("detail","\u8be6\u60c5")),t.addClass("resourceinfo-detaillist-detail"),t.appendTo(ja),t.on("click",function(hb){z(Oa.id,Q)})):t==w.EXECUTESTATE_WARNINGRULE_UNMATCHED&&
(t=$("<div style='text-align:left;width:86px;height: 16px'>"),t.text(c.get("warningRuleUnMatched","\u4e0d\u6ee1\u8db3\u9884\u8b66\u89c4\u5219")),t.attr("title",c.get("warningRuleUnMatched","\u4e0d\u6ee1\u8db3\u9884\u8b66\u89c4\u5219")),t.addClass("resourceinfo-detaillist-desc"),t.css("left",U?"60px":"55px"),t.appendTo(ja))}}}else if(6==la){if(R&&6<=R.length&&"operation"==R[6]&&(U=B.getRow(C),Oa=U.getUserObject())){U=Oa.sourceExist;ja=$(ja);t=$("<div>");t.text(c.get("wOpen","\u6253\u5f00"));t.addClass("resourceinfo-detaillist-wopen");
U&&t.appendTo(ja);ja=Oa.methodName;var Pa=Oa.sourceId,Qa=Oa.sourcePath,Ya=Oa.sourceTargetType,ab=Oa.userId;if("extractThemeData"==ja)t.on("click",function(hb){f&&f(Oa.sourceId,Oa.sourceName)});else if("updateLappThumbnail"==ja)t.on("click",function(hb){(new Z).openPublishManager({id:Pa,type:Ya,path:Qa,userId:ab,lappPathName:Oa.lappPathName,appType:Oa.appType})});else if("pushExecute"==ja||"emailPublishExecute"==ja)t.on("click",function(hb){(new Z).openPushManager({id:Pa,type:Ya})})}}else X(ja,t);
else 2<C&&(0==la||1==la)?(t=$("<span>"),t.css({"padding-left":"8px","padding-right":"8px","line-height":"28px"}),U=U.getCell(la),U=U.getValue(),t.attr("title",U),A(t,p.getSearchText(),U),t.appendTo(ja)):X(ja,t)};var A=function(ja,t,C){if(t&&C){t=t.toUpperCase();var U=C.toUpperCase(),la=U.split(t),Oa=t.length,Ra;for(Ra in la){var ia=U.indexOf(la[Ra]),Da=C.substr(Qa,la[Ra].length);ia+=la[Ra].length;var Pa=U.length-ia;U=U.substr(ia,Pa);C=C.substr(ia,Pa);ia=$("<span>");ia.text(Da);ia.appendTo(ja);if(Ra!=
la.length-1&&1<la.length){var Qa=U.indexOf(t);Da=C.substr(Qa,Oa);ia=Qa+Oa;Pa=U.length-ia;U=U.substr(ia,Pa);C=C.substr(ia,Pa);ia=$("<span>");ia.text(Da);ia.css("color","red");ia.clone().appendTo(ja)}}}else ja.text(C)}}var p=this,B,Q,S,ra,da,a,m,g,q,r,u=!0,T,ca,D=new Ea,I,O=[c.get("scheduleName","\u8c03\u5ea6\u540d\u79f0"),c.get("scheduleSource","\u6765\u6e90"),c.get("scheduleType","\u8c03\u5ea6\u7c7b\u578b"),c.get("executeStartTime","\u6267\u884c\u5f00\u59cb\u65f6\u95f4"),c.get("executeEndTime","\u6267\u884c\u7ed3\u675f\u65f6\u95f4"),
c.get("executeState","\u72b6\u6001"),c.get("operation","\u64cd\u4f5c")],y="scheduleName sourceName methodName executeTime endTime executeState operation".split(" ");this.executeGetResourceInfoDetailList=function(x,R,aa){throw Error("Override me.");};this.getJqUi=function(){throw Error("Override me.");};this.setTipsLabelAndTable=function(){throw Error("Override me.");};this.getSearchText=function(){};var v=function(){if(!B){B=Aa.createTable();da=$(B.getUI());B.addColumns(O.length);B.getColumn(0).setWidth(l?
118:125);B.getColumn(1).setWidth(85);B.getColumn(2).setWidth(130);B.getColumn(3).setWidth(132);B.getColumn(4).setWidth(132);B.getColumn(5).setWidth(l?110:120);B.getColumn(6).setWidth(75);for(var x=Aa.createHeadRow(B),R=0;R<O.length;R++)x.getCell(R).setValue(O[R]);x=new b(B,y);x.setOutsideVisible(!1);B.setCellRender(x);B.setCellAcrossListener(h());p.setTipsLabelAndTable()}I&&I();ra||(ra=new W);ra.loadLappDirName(T,function(){P(T,y)})};this.refreshTable=function(){Aa.refresh(B)};var E=function(x,R){void 0===
x.infos||null===x.infos?K():(R?R(x.totalRow):D.refreshPagination(),ca=x.totalRow,T=x.infos,P(T,y))},K=function(){var x=Q.getMessageCurtain(),R=c.get("resourceDetailLoadFail","\u83b7\u53d6\u8d44\u6e90\u660e\u7ec6\u5931\u8d25\u3002");x.showError(R,2E3)};this.setGlobal=function(x){Q=x};this.setModel=function(x){S=x};this.protectedGetHelpTips=function(){return null};var P=function(x,R){B.setSyncUIWhenModelChanged(!1);Aa.clearWithoutHead(B);for(var aa=0;aa<x.length;aa++)for(var X=Aa.createRow(B),A=0;A<
R.length;A++){var ja=x[aa][R[A]];if("executeTime"==R[A]||"endTime"==R[A])X.getCell(A).setValue(x[aa][R[A]+"Format"]);else if("operation"==R[A]){ja=x[aa].methodName;var t=x[aa].sourceTargetType;"updateLappThumbnail"==ja&&W.MOBILE==t&&(ja=ra.getLappPathName(x[aa],"sourceId"),x[aa].lappPathName=ja,ja=ra.getLappAppType(x[aa],"sourceId"),x[aa].appType=ja);X.setUserObject(x[aa])}else"methodName"==R[A]?(ja=x[aa].methodName,t=x[aa].sourceTargetType,"extractThemeData"==ja?ja=c.get("extractThemeData","\u5b9a\u65f6\u9884\u63d0\u53d6"):
"updateLappThumbnail"==ja?ja=c.get("updateLappThumbnail","\u5b9a\u65f6\u66f4\u65b0-\u7f29\u7565\u56fe"):"pushExecute"==ja?(ja=gb.getPushTargetType(t)?"-"+gb.getPushTargetType(t):"",ja=c.get("pushExecute","\u5b9a\u65f6\u63a8\u9001")+ja):ja="emailPublishExecute"==ja?c.get("emailPublishExecute","\u5b9a\u65f6\u63a8\u9001-\u90ae\u4ef6"):c.get("otherScheduleExecute","\u5176\u4ed6"),X.getCell(A).setValue(ja)):X.getCell(A).setValue(ja)}1<B.getRowsCount()&&(x=new KTBorderStyle,x.setLeftBorderWidth(0),B.getRow(1).getCell(0).setBorder(x));
B.updateUI(!0);B.setSyncUIWhenModelChanged(!0);da.children(":first-child").children(":first-child").css("width","100%");x=B;R=x.keepScrollStatus();R.v&&(R.v=0);x.restoreScrollStatus(R)};this.protectedMethod={createPagination:function(){D.setJumpToPageListener(function(R,aa,X){var A=Q.createResourceFacade(function(t){E(t,X)},function(t,C){return!1});q="executeTime";r=va.ORDER_DESC;if(a){var ja=a.getShowSortingModel();ja&&(q=ja.getField(),r=ja.getOrder())}p.executeGetResourceInfoDetailList(A,R,aa);
A.setShowBlocking(!0)});D.setComboBoxItemModelsAndSelectedItem([5,10,20,50,100,500,1E3],2);D.setHelpTips(p.protectedGetHelpTips());var x=D.getJqUi();p.getJqUi().append(x)},getPaginationJqUi:function(){return D.getJqUi()},getSortOrder:function(){return r},getSortField:function(){return q},initResourceInfoDetailList:function(){var x=Q.createResourceFacade(function(aa){void 0===aa.infos||null===aa.infos?K():(T=aa.infos,D.resetPaginationAndJumpToFirstPage(aa.totalRow),ca=aa.totalRow,v())},function(aa,
X){return!1});q="executeTime";r=va.ORDER_DESC;if(a){var R=a.getShowSortingModel();R&&(q=R.getField(),r=R.getOrder())}p.executeGetResourceInfoDetailList(x,1,D.getPageSize());x.setShowBlocking(!0)},setFunRefreshCssListener:function(x){I=x},getJqTable:function(){return da},getModel:function(){return S},getTotalRows:function(){return ca?ca:0}}}function N(){var f,z,l;this.getInputContent=function(){return l.getText()};this.getJqUi=function(){if(!f){var h=$("<div>");l=new J;l.setPlaceholder(c.get("searchScheduleName",
"\u641c\u7d22\u8c03\u5ea6\u540d\u79f0/\u6765\u6e90"));l.setSearchListenerDelay(1E3);l.setShowSearchIcon(!0);l.addSearchListener(z);var b=l.getJqUi();b.attr("title",c.get("searchScheduleName","\u641c\u7d22\u8c03\u5ea6\u540d\u79f0/\u6765\u6e90"));b.css({width:"170px",height:"25px","float":"left",right:"0px",top:"8px",position:"relative"});b.appendTo(h);f=h}return f};this.setSearchListener=function(h){z=h}}function Ha(){var f,z,l,h;this.setSearchType=function(p){z=p};this.setSelectedChangedListener=
function(p){l=p};this.setSelected=function(p){h.setSelected(p)};this.getJqUi=function(){f||(f=b());return f};var b=function(){h=new sa;h.setItemModels(z);h.setSelected(z[0]);h.addSelectedChangedListener(l);h.setCustomPainter(function(B,Q,S){Q.text(S.getTypeName());Q.attr("title",S.getTypeName())});var p=h.getJqUi();p.children().css("top","57%");return p}}function ua(f,z){this.getTypeName=function(){return f};this.getTypeId=function(){return z}}function Z(){var f;this.openPublishManager=function(z){f||
(f=V.getFunPublishContext()());var l=com.kingdee.bos.qing.publish.common.PublishManagerDialog,h=V.getFunPublishRemoteImpl()(),b=f;var p=V.getFunPublishContentEditEntrance()();l=new l(h,b,p);l.setSelectedData(z);l.showDialog()};this.openPushManager=function(z){f||(f=V.getFunPublishContext()());var l=new com.kingdee.bos.qing.publish.common.PushManager(V.getFunTimedPushContentEditEntrance()()),h=com.kingdee.bos.qing.timedpush;l.registerEmailPushPanelConstructor(h.EmailConfigManagePanel);l.initEmailPushConfig(V.getFunPublishRemoteImpl()(),
V.getFunPublishedEmailAnonymousViewUrl()(),V.getFunPublishedEmailLoginViewUrl()());l.registerLappPushPanelConstructor(h.LappPushManagePanel);l.initLappPushConfig(function(b,p,B){return com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,V.getFunPublishRemoteImpl()(),b,p,B)},f);l.setSelectedData(z);l.showDialog()};this.openImglib=function(z,l){l=c.get("imageLib","\u56fe\u7247\u5e93");var h=cb,b=h.openNewTab,p=oa.decodeParamFromUrl(location.search,
"path");b.call(h,l,(p?p:"/ierp")+"/qing/imageLibEntrance.do","1535516017197902848");l={};l.id=z.id;l.categoryId=z.categoryId;sessionStorage.setItem("selectImage",JSON.stringify(l))};this.openFontDetailPanel=function(z){var l=z.fontId,h=z.title,b=z.oMessageCurtain;z=V.getFontRemoteImpl();z=new na(z,function(p){if(p&&!0===p){p=oa.decodeParamFromUrl(window.location.search,"path")+"/qing/fontLibDetail.do";p=oa.appendParamToUrl(p,"fontId",l);var B=c.get("editFont","\u7f16\u8f91\u5b57\u4f53 - ")+h;cb.openNewTab(B,
p,p,cb.QING_ANALYSIS)}else b.showPrompt(c.get("fontNotExist","\u5b57\u4f53\u4e0d\u5b58\u5728\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5\u3002"),2E3)},function(p){if(40277008===p)return b.showPrompt(c.get("noPermission","\u60a8\u7684\u83dc\u5355\u6743\u9650\u5df2\u53d1\u751f\u53d8\u66f4\uff0c\u65e0\u6cd5\u7ee7\u7eed\u64cd\u4f5c\u3002"),5E3),!0});z.setShowBlocking(!1);z.isFontExist(l)}}function xa(){var f,z,l,h,b,p,B;this.setGlobal=function(da){b=da};this.setModel=function(da){p=da};this.registerFileResourcePanel=
function(da){l=da};this.registerScheduleResourcePanel=function(da){h=da};this.showDialog=function(){z=$("<div class='sa-ctrl-common-modallayer'>");f=new $a(z);var da=$(document.body);z.appendTo(da);var a=da.prop("clientWidth");da=da.prop("clientHeight");a=a-830>>1;da=da-492>>1;f.setTitle(c.get("resouceUsageInfo","\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5"));f.setBounds(a,da,830,492);f.setMinSize(830,492);f.setSelectable(!0);f.setToolbarVisible(!1);f.setContent(ra());f.addClosedListener(function(m){m.destroy();
z.remove()});f.showFooterPane(S);f.show()};var Q=function(da,a){a&&a.relayoutViews()},S=function(da){var a=new qb(c.get("close","\u5173\u95ed"));a.setHighlight(!0);var m=a.getJqUi();H.layoutCtrlWithLRTB(m,"50%",0,100,null,13,28);m.addClass("dialog-footer-close");m.css("margin-left","-50px");m.appendTo(da);a.addActionListener(function(g){f.destroy();z.remove()})},ra=function(){B=new fa;B.setTabLevel(fa.SECOND_LEVEL);B.addTabChangedListener(Q);var da=!0;f.getMessageCurtain();if(l){var a=new L(w.TYPE_FILE,
b,p);B.addTab(a,da);da=!1}h&&(a=new L(w.TYPE_SCHEDULE,b,p),B.addTab(a,da));return B.getJqUi()}}function L(f,z,l){fa.AbstractTabPane.call(this);var h;this.getJqUi=function(){if(null==h){h=$("<div>");if(f==w.TYPE_FILE){var b=new Ma(f,z.getFunDataModelEntrance(),!0);b.setGlobal(z);b.setModel(l);b=b.getJqUi();b.appendTo(h)}f==w.TYPE_SCHEDULE&&(b=new kb(z.getFunDataModelEntrance(),qa,!0),b.setGlobal(z),b.setModel(l),b=b.getJqUi(),b.appendTo(h))}return h};this.getTitle=function(){switch(f){case w.TYPE_FILE:return c.get("qingResourceFilesDetail",
"\u8f7b\u5206\u6790\u5b58\u50a8\u8be6\u60c5");case w.TYPE_SCHEDULE:return c.get("scheduleDetail","\u8c03\u5ea6\u4efb\u52a1\u8be6\u60c5");default:throw Error("unknown type");}};this.relayoutViews=function(){}}function w(f){db.call(this);var z=this.protectedMethod,l=this,h,b,p,B,Q,S,ra,da,a,m,g;(function(){z.setTitle(c.get("resouceUsageInfo","\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5"));f?l.setSize(750,640):l.setSize(750,420);h=z.getDialogCtrl();z.setSelectable(!0);z.setContentPaneCreator(function(){b||
q();return b});z.setFooterClosingOnly(!0);z.setClosingChecker2(null,function(u){z.destroy();return!0});z.setClosingAction(function(u){})})();this.getJqUi=function(){b||q();return b};this.setGlobal=function(u){m=u};this.setModel=function(u){g=u};this.getModel=function(){return g};var q=function(){b=$("<div class='resourceinfo-layer-contentpane' id='resourceinfo-layer-contentpane-id'>");var u=new ma,T=0==g.getTenantPayScheduleCount(),ca=new ob;ca.constructor(c.get("personal","\u4e2a\u4eba"));!T&&u.setTitleComponent(ca);
ca="en"==wa.getUrlParamValue("language");var D=new za;D.setOverviewData(parseFloat(g.getUserUseFileSize()),parseFloat(g.getUserFreeFileSize()),parseFloat(g.getUserAvaFileSize()),g.getUserUseFileSizePercent());D.constructor(c.get("qingStorageSpace","\u8f7b\u5b58\u50a8\u7a7a\u95f4"),c.get("qingStorageSpaceTips","\u8f7b\u5b58\u50a8\u7a7a\u95f4\u8bf4\u660e\uff1a<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u9ed8\u8ba4\u4e3a\u6bcf\u7528\u6237\u63d0\u4f9b1G\u8f7b\u5b58\u50a8\u5bb9\u91cf\uff0c\u5360\u6ee1\u540e\u5c06\u65e0\u6cd5\u751f\u6210\u8c03\u5ea6\u6570\u636e\u6587\u4ef6\u6216\u65e0\u6cd5\u4e0a\u4f20\u6570\u636e\u6e90\u6587\u4ef6\uff1b\u53ef\u7533\u8bf7\u6269\u5bb9\uff0c\u6269\u5bb9\u90e8\u5206\u5728\u5f53\u524d\u79df\u6237\u5185\u7684\u6240\u6709\u7528\u6237\u95f4\u5171\u4eab\u3002"),
c.get("store","\u5b58\u50a8"),"MB","#688BF7",ca?118:65,!0);u.setQingStoreComponent(D);var I=new za;I.setOverviewData(g.getUserUseScheduleCount(),g.getUserFreeScheduleCount(),g.getUserAvaScheduleCount(),g.getUserUseScheduleCountPercent());I.constructor(c.get("scheduleResIntraday","\u5f53\u65e5\u8c03\u5ea6\u6b21\u6570"),c.get("scheduleResIntradayTips","\u5f53\u5929\u8c03\u5ea6\u6b21\u6570\u8bf4\u660e\uff1a<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u6bcf\u7528\u6237\u6bcf\u5929\u53ef\u514d\u8d39\u4f7f\u752810\u6b21\u8c03\u5ea6\uff0c\u8d85\u8fc710\u6b21\u540e\u7684\u8c03\u5ea6\u4e0d\u6267\u884c\uff1b\u8f7b\u5b58\u50a8\u6269\u5bb9\u540e\u8d60\u900110\u6b21\u8c03\u5ea6/G\uff0c\u8d60\u9001\u90e8\u5206\u5728\u5f53\u524d\u79df\u6237\u5185\u7684\u6240\u6709\u7528\u6237\u95f4\u5171\u4eab\u3002"),
c.get("schedule","\u8c03\u5ea6"),c.get("times","\u6b21"),"#4B9BF8",ca?140:77,!0,!0);u.setScheduleComponent(I);u.getJqUi().appendTo(b);p=D.getProgressBar().getJqDetailLabel();B=I.getProgressBar().getJqDetailLabel();Q=I.getProgressBar().getJqHistoryDetailLabel();p.on("click",function(E){r(w.TYPE_FILE)});B.on("click",function(E){r(w.TYPE_SCHEDULE)});Q.on("click",function(E){r(w.TYPE_SCHEDULE_HISTORY)});if(!T){var O=new ma;u=new ob;u.constructor(c.get("Public","\u516c\u5171"),!0);O.setTitleComponent(u);
D=new za;D.setOverviewData(parseFloat(g.getTenantUseFileSize()),parseFloat(g.getTenantFileSize()),parseFloat(g.getTenantAvaFileSize()),g.getTenantUseFileSizePercent());D.constructor(c.get("qingStorageSpace","\u8f7b\u5b58\u50a8\u7a7a\u95f4"),c.get("qingStorageSpaceTips","\u8f7b\u5b58\u50a8\u7a7a\u95f4\u8bf4\u660e\uff1a<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u9ed8\u8ba4\u4e3a\u6bcf\u7528\u6237\u63d0\u4f9b1G\u8f7b\u5b58\u50a8\u5bb9\u91cf\uff0c\u5360\u6ee1\u540e\u5c06\u65e0\u6cd5\u751f\u6210\u8c03\u5ea6\u6570\u636e\u6587\u4ef6\u6216\u65e0\u6cd5\u4e0a\u4f20\u6570\u636e\u6e90\u6587\u4ef6\uff1b\u53ef\u7533\u8bf7\u6269\u5bb9\uff0c\u6269\u5bb9\u90e8\u5206\u5728\u5f53\u524d\u79df\u6237\u5185\u7684\u6240\u6709\u7528\u6237\u95f4\u5171\u4eab\u3002"),
c.get("store","\u5b58\u50a8"),"MB","#688BF7",ca?120:65);O.setQingStoreComponent(D);I=new za;I.setOverviewData(g.getTenantUseScheduleCount(),g.getTenantScheduleCount(),g.getTenantAvaScheduleCount(),g.getTenantUseScheduleCountPercent());I.constructor(c.get("scheduleResIntraday","\u5f53\u65e5\u8c03\u5ea6\u6b21\u6570"),c.get("scheduleResIntradayTips","\u5f53\u5929\u8c03\u5ea6\u6b21\u6570\u8bf4\u660e\uff1a<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u6bcf\u7528\u6237\u6bcf\u5929\u53ef\u514d\u8d39\u4f7f\u752810\u6b21\u8c03\u5ea6\uff0c\u8d85\u8fc710\u6b21\u540e\u7684\u8c03\u5ea6\u4e0d\u6267\u884c\uff1b\u8f7b\u5b58\u50a8\u6269\u5bb9\u540e\u8d60\u900110\u6b21\u8c03\u5ea6/G\uff0c\u8d60\u9001\u90e8\u5206\u5728\u5f53\u524d\u79df\u6237\u5185\u7684\u6240\u6709\u7528\u6237\u95f4\u5171\u4eab\u3002"),
c.get("schedule","\u8c03\u5ea6"),c.get("times","\u6b21"),"#4B9BF8",ca?130:77);O.setScheduleComponent(I);ca=O.getJqUi();ca.css("top","260px");!T&&ca.appendTo(b);S=u.getOpenIcon().getJqUi();ra=u.getCloseIcon().getJqUi();da=D.getJqUi();a=I.getJqUi();var y=$(".sa-ctrl-common-modallayer").width(),v=$(".sa-ctrl-common-modallayer").height();.9<=g.getUserUseScheduleCountPercent()||.9<=g.getUserUseFileSizePercent()?(da.show(),a.show(),S.hide(),ra.show(),h.setBounds((y-750)/2,(v-640)/2,750,640)):(da.hide(),
a.hide(),S.show(),ra.hide(),h.setBounds((y-750)/2,(v-420)/2,750,420));S.hover(function(){Ja.background(S,"chevrons_down_hover")},function(){Ja.background(S,"chevrons_down")});ra.hover(function(){Ja.background(ra,"chevrons_up_hover")},function(){Ja.background(ra,"chevrons_up")});S.on("click",function(E){da.show();a.show();S.hide();ra.show();E=$(".sa-ctrl-common-modallayer").width();var K=$(".sa-ctrl-common-modallayer").height();h.setBounds((E-750)/2,(K-640)/2,750,640)});ra.on("click",function(E){da.hide();
a.hide();S.show();ra.hide();h.setBounds((y-750)/2,(v-640)/2,750,420)})}},r=function(u){u==w.TYPE_FILE?(u=new Ia(u,m.getFunDataModelEntrance()),u.setGlobal(m),u.setModel(g),u.showDialog()):u==w.TYPE_SCHEDULE?(u=new ka(u,m.getFunDataModelEntrance(),qa),u.setGlobal(m),u.setModel(g),u.showDialog()):u==w.TYPE_SCHEDULE_HISTORY&&(u=new ka(u,m.getFunDataModelEntrance(),qa,!0),u.setGlobal(m),u.setModel(g),u.showDialog())}}function qa(f,z){var l=z.createResourceFacade(function(h){if(h){var b=h.errorCode,p=
h.errorMessage,B="",Q=!1,S=new vb;S.setOptionType(vb.OPTION_OK);if(2101001==b)B=c.get("themeHasNotFound","\u5bf9\u5e94\u4e3b\u9898\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002");else if(2106001==b)B=c.get("dsbHasNotFound","\u5bf9\u5e94\u4eea\u8868\u677f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002");else if(2101010==b||2301010==b)B=c.get("themeFileSizeLimit","\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3\u3002");else if(2100001==b)B=c.get("qingStorageNoSpace","\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u8bf7\u8054\u7cfb\u8fd0\u7ef4\u4eba\u5458\u6dfb\u52a0\u78c1\u76d8");
else if(2314104==b)B=c.get("sendEmailsSenderException","\u53d1\u4ef6\u90ae\u7bb1\u914d\u7f6e\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u914d\u7f6e\u3002"),Q=!0;else if(2314105==b)B=c.get("sendEmailsInvalidReceiversException","\u90e8\u5206\u6536\u4ef6\u90ae\u7bb1\u63a8\u9001\u5931\u8d25\uff0c\u8bf7\u4ed4\u7ec6\u6838\u5b9e\u6536\u4ef6\u90ae\u7bb1\uff0c\u63a8\u9001\u5931\u8d25\u7684\u6536\u4ef6\u90ae\u7bb1\u6709\uff1a#1\u3002").replace("#1",p),Q=!0;else if(21000008==b)B=c.get("noQingModelerLicense","\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u5efa\u6a21\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb"),
Q=!0;else if(2101006==b)B=c.get("lackDataEntityAuthority","\u6ca1\u6709\u8be5\u5b9e\u4f53\u6570\u636e\u6e90\u7684\u67e5\u770b\u6743\u9650"),Q=!0;else if(2020106==b||2020107==b)B=c.get("noDataCenterAuthority","\u6ca1\u6709\u6570\u636e\u4e2d\u5fc3\u6743\u9650"),p&&(B=c.get("noDataCenterAuthorityWithUser","\u7528\u6237\u201c#1\u201d\u6ca1\u6709\u6570\u636e\u4e2d\u5fc3\u6743\u9650").replace("#1",p)),Q=!0;else if(3201001==b||3201003==b)B=c.get("noSuperQueryPerm","\u6ca1\u6709\u8d85\u7ea7\u67e5\u8be2\u76f8\u5173\u6a21\u5f0f\u7684\u6743\u9650"),
p&&!p.startsWith("com.kingdee.bos")&&(B=c.get("noSuperQueryPermWithUser","\u7528\u6237\u201c#1\u201d\u6ca1\u6709\u8d85\u7ea7\u67e5\u8be2\u76f8\u5173\u6a21\u5f0f\u7684\u6743\u9650").replace("#1",p)),Q=!0;else{if(2101018==b){B=c.get("entityNotSupportQingAnalysis","\u4e1a\u52a1\u5b9e\u4f53\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff0c\u8bf7\u5728\u5f00\u53d1\u5e73\u53f0\u7684\u5bf9\u5e94\u8868\u5355\u4e2d\u8fdb\u884c\u8bbe\u7f6e   ");h=h.errorStackTrace;if(b=/(?:\u3010\s)(.+)(?=\s\u3011)/.exec(h)){var ra=
b[1];ra=c.get("notSupportQingAnalysis","\u4ee5\u4e0b\u4e1a\u52a1\u5b9e\u4f53\u5c1a\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff1a")+"\r  "+ra.replace(/,/g,c.get("semicolon","\uff1b")+"\r  ")}var da=Wa.getSupportQingAnalysisUrl();S.setMessage(B);ra?S.setDetail(ra):S.setDetail(h);S.setCustomPainter(function(a,m){var g=$("<div class='sa-ctrl-msgdlg-text'>");g.css("bottom",20);var q=$("<a onclick='javascript:window.open(\""+da+"\");' href='#'>");q.css("cursor","pointer");
q.css("color","#5582f3");q.text(c.get("viewDocument","\u67e5\u770b\u5e2e\u52a9\u6587\u6863"));g.text(m);g.append(q);a.append(g)});S.showDialog();return}if(4300113==b){B=c.get("newErrorCodeMessage","\u83b7\u53d6\u8f7b\u5e94\u7528\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u540c\u6b65\u7528\u6237\u4fe1\u606f\u3002\u64cd\u4f5c\u65b9\u5f0f\u8bf7\u53c2\u8003");h=h.errorStackTrace;da=Wa.getMobileLightAppUrl();S.setMessage(B);ra?S.setDetail(ra):S.setDetail(h);S.setCustomPainter(function(a,
m){var g=$("<div class='sa-ctrl-msgdlg-text'>");g.css("bottom",30);var q=$("<a onclick='javascript:window.open(\""+da+"\");' href='#'>");q.css({cursor:"pointer",color:"#5582f3"});q.text(c.get("newViewDocument","\u5e2e\u52a9\u6587\u6863"));g.text(m);g.append(q);a.append(g)});S.showDialog();return}}B||(B=b&&p?c.get("errorCodeMessage","\u9519\u8bef\u4fe1\u606f\uff1a#1\r\n\u9519\u8bef\u7801\uff1a#2").replace("#1",p).replace("#2",b):b&&!p?c.get("errorCode","\u9519\u8bef\u7801\uff1a#1\u3002").replace("#1",
b):!b&&p?c.get("errorMessage","\u9519\u8bef\u4fe1\u606f\uff1a#1\u3002").replace("#1",p):c.get("noErrorCodeMessage","\u6682\u65e0\u9519\u8bef\u7801\u548c\u9519\u8bef\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b\u8be6\u60c5\u3002"),Q=!0);Q&&(h=h.errorStackTrace,2101006==b&&(ra=c.get("noAuthorityForTheseEntities","\u5c1a\u672a\u83b7\u5f97\u4ee5\u4e0b\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650\uff1a"),(b=h.match(/("|\u201c)([^("|\u201d)]+)("|\u201d)/))&&2<b.length&&(ra=c.get("noAuthorityForTheseEntitiesWithUser",
"\u7528\u6237\u201c#1\u201d\u5c1a\u672a\u83b7\u5f97\u4ee5\u4e0b\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650\uff1a").replace("#1",b[2])),(b=h.match(/(\(|\uff08)([^(\)|\uff09)]+)(\)|\uff09)/))&&2<b.length&&(h=b[2]),h=ra+"\r  "+h.replace(/,/g,c.get("semicolon","\uff1b")+"\r  ")),h&&S.setDetail(h));S.setMessage(B);S.showDialog()}else z.getMessageCurtain().showPrompt(c.get("notFindExceptionLog","\u672a\u627e\u5230\u5bf9\u5e94\u7684\u65e5\u5fd7\u3002"),2E3)},function(h,b){return!1});l.setShowBlocking(!1);
l.loadExceptionLog(f)}function W(){var f;this.loadLappDirName=function(z,l){for(var h=[],b,p=0;p<z.length;p++){var B=z[p].fromTargetType,Q=z[p].methodName,S=z[p].sourceTargetType;Ua.isFromPublish(z[p].fromType,z[p].fromId)?W.MOBILE==B&&(h.push(z[p].fromId),b||(b=z[p].userId)):"updateLappThumbnail"==Q&&W.MOBILE==S&&(h.push(z[p].sourceId),b||(b=z[p].userId))}b?com.kingdee.bos.qing.timedpush.LappIntegration.loadHandoverDirName(V.getFunPublishRemoteImpl()(),h,[b],function(ra){f=ra;l&&l()},function(ra,
da){l&&l()}):setTimeout(function(){l&&l()},0)};this.getLappPathName=function(z,l){return f&&f[z[l]]?f[z[l]].directoryName:""};this.getLappAppType=function(z,l){return f&&f[z[l]]?f[z[l]].appType:""}}function ma(){var f,z,l,h;this.setTitleComponent=function(b){z=b};this.setQingStoreComponent=function(b){l=b};this.setScheduleComponent=function(b){h=b};this.getTitleComponent=function(){return z};this.getQingStoreComponent=function(){return l};this.getScheduleComponent=function(){return h};this.getJqUi=
function(){f||(f=$("<div>"),f.addClass("resourceinfo-resource-attribution"),this.layout(f));return f};this.layout=function(b){if(z){var p=z.getJqUi();H.layoutCtrl(p,0,0);p.appendTo(b)}p=l.getJqUi();var B=h.getJqUi();H.layoutCtrl(p,20,40);H.layoutCtrl(B,20,160);p.appendTo(b);B.appendTo(b)};this.setPosition=function(b,p){f&&(f.css("top",b+"px"),f.css("bottom",p+"px"))}}function za(){var f,z,l,h,b,p,B,Q,S,ra,da,a;this.getJqUi=function(){f||(f=$("<div>"),f.addClass("resourceinfo-overview-component"),
this.layout(f));return f};this.layout=function(m){var g=z.getJqUi(),q=l.getJqUi(),r=h.getJqUi();da.css("color","#666");H.layoutCtrl(g,2,-4);H.layoutCtrl(q,a+1,-1);H.layoutCtrl(r,18,25);H.layoutCtrl(da,19,60);g.appendTo(m);q.appendTo(m);r.appendTo(m);da.appendTo(m)};this.constructor=function(m,g,q,r,u,T,ca,D){S=r;ra=.9>Q?u:"#F34E4E";a=T;z=new Fa;z.setText(m);l=new xb;l.setIconType(xb.ICON_TYPE_QUESTION);l.setTipsHtml(g);l.setTipsSize(200,125);h=new bb;h.setData(b,p,B,Q);h.constructor(S,ra,ca,D);h.drawBar();
m="<span style='color: "+ra+";'>"+b+S+"</span>";da=$("<div>");da.html(c.get("haveBeenUsed","\u5df2\u4f7f\u7528")+"/"+q+c.get("quota","\u989d\u5ea6")+": "+m+"/"+p+S);da.css("text-align","left");da.css("font-color","#666")};this.setOverviewData=function(m,g,q,r){b=m>g?g:m;p=g;B=0>q?0:q;Q=1<r?1:r};this.getProgressBar=function(){return h}}function bb(){var f,z=$("<div>"),l,h,b,p,B,Q,S,ra,da,a,m;this.setData=function(g,q,r,u){S=g;ra=r;da=u};this.getJqDetailLabel=function(){return B};this.getJqHistoryDetailLabel=
function(){return Q};this.getJqUi=function(){if(!f){f=$("<div>");f.addClass("resourceinfo-progressbar-chart");var g=h.getJqUi();H.layoutCtrl(g,485,5);l.mounting(z);f.append(z);f.append(g);b&&(B=b.getJqUi(),H.layoutCtrl(B,535,5),B.addClass("resourceinfo-detaillist-op"),B.children(".sa-ctrl-label-text").css("color","#49A5F7"),f.append(B));p&&(Q=p.getJqUi(),H.layoutCtrl(Q,535,25),Q.addClass("resourceinfo-history-detaillist-op"),Q.children(".sa-ctrl-label-text").css("color","#49A5F7"),f.append(Q))}return f};
this.constructor=function(g,q,r,u){a=g;m=.9>da?q:"#F34E4E";z.css("position","absolute");z.css("left","0");z.css("top","6px");z.css("width","470px");z.css("height","18px");h=new Fa;h.setText(parseInt(100*da)+"%");r&&(b=new Fa,b.setText(c.get("detailList","\u4f7f\u7528\u8be6\u60c5")+">>"));u&&(p=new Fa,p.setText(c.get("historyDetailList","\u5386\u53f2\u8be6\u60c5")+">>"));l=new Ab;g="<span style='color: "+m+";'>"+S+a+"</span>";g=c.get("haveBeenUsed","\u5df2\u4f7f\u7528")+": "+g+"<br/>"+c.get("avaUse",
"\u53ef\u4f7f\u7528")+": "+ra+a;l.setHtml(g);l.setSuggestedSize(155,60)};this.drawBar=function(){z.css("border","1px solid #DDD");z.css("border-radius","10px");z.css("background","#DDD");if(0<da){var g=$("<div>");g.css("width",100*da+"%");g.css("height","100%");g.css("border-radius","10px");g.css("background",m);g.appendTo(z)}}}function ob(){var f,z,l,h;this.getOpenIcon=function(){return l};this.getCloseIcon=function(){return h};this.getJqUi=function(){f||(f=$("<div>"),f.addClass("resourceinfo-title-component"),
this.layout(f));return f};this.layout=function(b){var p=z.getJqUi(),B=$("<hr>");H.layoutCtrl(p,10,0);p.css("font-weight","bold");B.addClass("resourceinfo-title-component-hr");var Q="en"==wa.getUrlParamValue("language");if(l){var S=l.getJqUi();H.layoutCtrl(S,Q?53:40,2,16,16);S.css("display","none");S.appendTo(b)}h&&(S=h.getJqUi(),H.layoutCtrl(S,Q?53:40,2,16,16),S.css("display","none"),S.appendTo(b));p.appendTo(b);B.appendTo(b)};this.constructor=function(b,p){z=new Fa;z.setText(b);p&&(l=new pb,l.setIconType("chevrons_down"),
h=new pb,h.setIconType("chevrons_up"))}}function pb(){var f,z;this.setIconType=function(l){z=l};this.getJqUi=function(){f||(f=$("<div>"))&&Ja.background(f,z);return f}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.theme&&(com.kingdee.bos.qing.theme={});"undefined"==typeof com.kingdee.bos.qing.theme.resourceinfo&&
(com.kingdee.bos.qing.theme.resourceinfo={});var tb=com.kingdee.bos.qing.theme.resourceinfo;tb.ResourceInfoManager=function(){var f;this.setGlobal=function(l){f=l};this.showResourceInfoDialog=function(){var l=f.createResourceFacade(function(h){null!=h&&z(h);return!0},function(h,b){return!1});l.setShowBlocking(!1);l.hasResourceManager()};var z=function(l){f.createResourceFacade(function(h){if(null==h){h=f.getMessageCurtain();var b=c.get("resourceLoadFail","\u83b7\u53d6\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\u4fe1\u606f\u5931\u8d25\u3002");
h.showError(b,2E3)}else if(l)b=new pa,b.fromJsonObject(h),h=(.9<=b.getUserUseScheduleCountPercent()||.9<=b.getUserUseFileSizePercent())&&(0<b.getTenantPayFileSize()||0<b.getTenantPayScheduleCount())?!0:!1,h=new w(h),h.setGlobal(f),h.setModel(b),h.showDialog();else{b=new xa;b.registerFileResourcePanel(L);b.registerScheduleResourcePanel(L);var p=new pa;p.fromJsonObject(h);b.setGlobal(f);b.setModel(p);b.showDialog()}return!0},function(h,b){return!1}).resourceInfoStatistics()}};tb.ResourceInfoModel=pa;
var xb,Ab,Fa,vb,db,qb,$a,fa,J,sa,V,na,H,oa,c,Aa,Ja,wa,Wa,cb,Ea,ya,Va,va;(function(){var f=com.kingdee.bos.qing.ui.component;xb=f.HelpIcon;Ab=f.Tips;Fa=f.Label;vb=f.MessageDialog;db=f.AbstractModalDialog;qb=f.Button;$a=f.Dialog;fa=f.TabContainer;J=f.SearchBox;sa=f.ComboBox;f=com.kingdee.bos.qing.common;H=f.DomUtil;oa=f.Util;f=com.kingdee.bos.qing.framework.common;c=f.MultilanguageManager.createPackageAccessor(tb);Wa=f.OfficialArticleUtil;cb=f.TabbedUiUtil;f=com.kingdee.bos.qing.common.ui;Aa=f.TableUtil;
f=com.kingdee.bos.qing;wa=f.Seer;f=com.kingdee.bos.qing.theme.common;Ja=f.Icons;V=f.Integration;na=f.Facade;f=com.kingdee.bos.qing.biz.common;Ea=f.SimplePaginationBar;ya=f.DateRangeSelector;Va=f.SortingHelper;va=f.SortingModel})();w.TYPE_FILE="FILE";w.TYPE_SCHEDULE="SCHEDULE";w.TYPE_SCHEDULE_HISTORY="SCHEDULE_HISTORY";w.EXECUTESTATE_EXECUTING=0;w.EXECUTESTATE_SUCCESS=1;w.EXECUTESTATE_NOENOUGHSCHEDULECOUNT=2;w.EXECUTESTATE_NOFILESTORAGE=3;w.EXECUTESTATE_EXCEPTION=4;w.EXECUTESTATE_WARNINGRULE_UNMATCHED=
5;w.EXECUTESTATE_PUSH_PART_ERROR=6;w.EXECUTESTATE_NO_LICENCE=7;w.EXECUTESTATE_USER_DISABLED=8;var d=new function(){var f;this.getPublishTargetType=function(z){f||(f={0:c.get("appMenu","\u5e94\u7528\u83dc\u5355"),1:c.get("qingAnalysisCenter","\u6570\u636e\u5de5\u4f5c\u53f0\u9605\u89c8\u5939"),2:c.get("lapp","\u79fb\u52a8\u8f7b\u5e94\u7528"),5:c.get("cardRepository","\u5361\u7247\u5e93")});return f[z]}},gb=new function(){var f;this.getPushTargetType=function(z){f||(f={0:c.get("cloudHub","\u4e91\u4e4b\u5bb6"),
1:c.get("enterpriseWeChat","\u4f01\u4e1a\u5fae\u4fe1"),3:c.get("dingding","\u9489\u9489"),"-1":c.get("email","\u90ae\u4ef6")});return f[z]}},Ua=new function(){this.isFromPublish=function(f,z){return"CARDTHUMBNAIL"==f&&-1!=z.indexOf("QingAnalysis-")||"PUBLISHED"==f};this.isFromTimePush=function(f,z){return"CARDTHUMBNAIL"==f&&-1==z.indexOf("QingAnalysis-")||"TIMINGPUSH"==f}};Sa.WARNING_COUNT=.9;W.APPMENU=0;W.CENTER=1;W.MOBILE=2;W.CARD_REPOSITORY=5;var Ba=new function(){var f;this.getFromType=function(z){f||
(f={THEME:c.get("flatDataFile","\u6570\u636e\u6e90\u6587\u4ef6"),THEMESOURCECONVERT:c.get("flatDataFile_Static","\u6570\u636e\u6e90\u6587\u4ef6(\u9759\u6001\u5316)"),THEMESCHEDULE:c.get("scheduleDataFile","\u8c03\u5ea6\u6570\u636e\u6587\u4ef6"),CARDTHUMBNAIL:c.get("cardthumbnailDataFile","\u5361\u7247\u7f29\u7565\u56fe\u6587\u4ef6"),IMAGELIBRARY:c.get("image","\u56fe\u7247"),FONTLIBRARY:c.get("font","\u5b57\u4f53"),PUBLISHED:c.get("publishedDataFile","\u53d1\u5e03\u6570\u636e\u6587\u4ef6"),TIMINGPUSH:c.get("timingPushDataFile",
"\u5b9a\u65f6\u63a8\u9001\u6570\u636e\u6587\u4ef6")});return f[z]}}})();(function(pa,Ia){function ka(a,m){var g=this,q,r,u,T,ca,D,I,O;this.setThemeGroupIDNameMap=function(t){q=t};this.setFunMoveUpGroupItemCallBack=function(t){O=t};this.setFunThemeGroupItemClick=function(t){ca=t};this.setFunDeleteSuccessCallBack=function(t){D=t};this.setFunAddSuccessCallBack=function(t){I=t};this.getJqUi=function(){r||y();return r};this.getThemeGroupModel=function(){return m};var y=function(){r=$("<div>");r.addClass("theme-group-list");u=new Ja;u.setEnabled(!0);u.addBlurListener(K);u.addAcceptableListener(function(C,
U){U?K():P()?(u.getJqUi().hide(),T.show()):r.remove()});var t=u.getJqUi();t.addClass("theme-group-name-edit");t.hide();t.on("click",function(C){C.stopPropagation()});T=$("<span>");T.addClass("theme-group-title-span");r.on("click",function(C){ca(r,m)});t.appendTo(r);T.appendTo(r);v()},v=function(){var t=m.getThemeGroupName();u.setText(t);T.text(t);T.attr("title",t);if(m.isPreset()){T.css("right","55px");t=$("<div>");t.addClass("theme-group-preset-text");var C=$("<span>");C.addClass("theme-group-preset-span");
C.text(d.get("preset","\u9884 \u7f6e"));C.appendTo(t);C=$("<div>");C.addClass("theme-group-preset-icon");$a.background(C,"icon-preset-small");t.appendTo(r);C.appendTo(r)}else t=$("<span>"),t.addClass("moveup-button"),t.attr("title",d.get("moveupThemeGroup","\u4e0a\u79fb\u5206\u7c7b")),t.on("click",R),$a.backgroundWithHover(t,"btn_orderup"),t.appendTo(r),t=$("<span>"),t.addClass("edit-button"),t.attr("title",d.get("editThemeCategory","\u7f16\u8f91\u5206\u7c7b")),t.on("click",g.editGroupName),$a.backgroundWithHover(t,
"btn-edit"),t.appendTo(r),t=$("<span>"),t.addClass("delete-button"),t.attr("title",d.get("deleteThemeCategory","\u5220\u9664\u5206\u7c7b")),t.on("click",aa),$a.backgroundWithHover(t,"btn-delete"),t.appendTo(r)};this.editGroupName=function(t){t&&t.stopPropagation();T.hide();u.getJqUi().show();u.setText(m?m.getThemeGroupName():"");u.requestFocus()};var E=function(t){var C="undefined"==typeof t||null==t||""==t?!0:!1;C&&!P()&&r.remove();C||(C=u.getText(),C=C.trim(),T.text(C),T.attr("title",C),u.setText(C),
m.setThemeGroupName(u.getText().trim()));u.getJqUi().hide();T.show();P()||m.setThemeGroupID(t);q&&(q[m.getThemeGroupID()]=m.getThemeGroupName())},K=function(){var t=u.getText();t=t.trim();var C=t.length;P()&&(m.getThemeGroupName()==t||!t||50<C)?(u.getJqUi().hide(),T.show(),50<C&&(t=d.get("categoryNameCanNotExceedLimit","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"),a.getMessageCurtain().showPrompt(t,2E3))):t?50<C?(t=d.get("categoryNameCanNotExceedLimit","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"),
a.getMessageCurtain().showPrompt(t,2E3),r.remove()):x():r.remove()},P=function(){return m.getThemeGroupID()?!0:!1},x=function(){var t=new Va;t.setThemeGroupID(m.getThemeGroupID());t.setThemeGroupName(u.getText().trim());var C=a.createFacade(function(U){var la=P();la||I(g);E(U);U=la?d.get("editCategorySuccess","\u4fee\u6539\u5206\u7c7b\u6210\u529f\u3002"):d.get("addCategorySuccess","\u65b0\u589e\u5206\u7c7b\u6210\u529f\u3002");a.getMessageCurtain().showSuccess(U,2E3)},function(U,la){return 1010001==
U?(U=d.get("themeGroupNameHasExist","\u5206\u7c7b\u540d\u79f0\u5df2\u5b58\u5728\u3002"),a.getMessageCurtain().showPrompt(U,2E3),E(),!0):!1});C.setShowBlocking(!0);P()?C.saveThemeGroup(t):C.editThemeGroup(t)},R=function(t){O(g)},aa=function(t){t&&t.stopPropagation();P()?X():r.remove()},X=function(){var t=m.getThemeGroupID(),C=a.createFacade(function(U){0<U.length?(U=d.get("deleteThemeBeforeThemeGroup","\u8bf7\u5148\u5220\u9664\u5206\u7c7b\u4e0b\u7684\u4eea\u8868\u677f\u3001\u4e1a\u52a1\u4e3b\u9898\u518d\u5220\u9664\u5206\u7c7b\u3002"),
a.getMessageCurtain().showPrompt(U,2E3)):1==a.getAllGroupModel().length?(U=d.get("atLeastNeedOneUserThemeGroup","\u81f3\u5c11\u9700\u8981\u4fdd\u7559\u4e00\u4e2a\u7528\u6237\u5206\u7c7b\u3002"),a.getMessageCurtain().showPrompt(U,2E3)):A()},function(U,la){return!1});C.setShowBlocking(!0);C.getTheme(t)},A=function(){var t=ya.createFeedbackDialog();t.setOptionType(ya.OPTION_OK_CANCEL);t.setMsgImageType(ya.MSG_DELETE);t.setMessage(d.get("confirmToDeleteCategory","\u786e\u5b9a\u8981\u5220\u9664\u5206\u7c7b'#1'\u5417\uff1f").replace("#1",
m.getThemeGroupName()));t.setClosingChecker(function(C){C==ya.RETURN_OK&&ja();return!0});t.showDialog()},ja=function(){var t=m.getThemeGroupID(),C=a.createFacade(function(U){r&&r.remove();D(m);U=d.get("deleteThemeGroupSuccess","\u5220\u9664\u5206\u7c7b\u6210\u529f\u3002");a.getMessageCurtain().showSuccess(U,2E3)},function(U,la){return 1010002==U?(U=d.get("deleteThemeBeforeThemeGroup","\u8bf7\u5148\u5220\u9664\u5206\u7c7b\u4e0b\u7684\u4eea\u8868\u677f\u3001\u4e1a\u52a1\u4e3b\u9898\u518d\u5220\u9664\u5206\u7c7b\u3002"),
a.getMessageCurtain().showPrompt(U,2E3),!0):!1});C.setShowBlocking(!0);C.deleteThemeGroup(t)}}function Ma(){var a,m,g;this.isSupported=function(){return!0};this.needRefreshThemes=function(){return!1};this.getType=function(){return a};this.getIconFileName=function(){return g};this.getDisplayName=function(){return m};this.createCardUi=function(q){throw Error("override me");};this.createThemeModel=function(){throw Error("override me");};this.protectedMethod={setType:function(q){a=q},setDisplayName:function(q){m=
q},setIconFileName:function(q){g=q}}}function Sa(){Ma.call(this);var a=this.protectedMethod,m=this;a.setIconFileName("icon-card-subject");a.setType(va.THEMETYPE_SUBJECT);a.setDisplayName(d.get("subject","\u4e1a\u52a1\u4e3b\u9898"));this.createCardUi=function(g){g=new Ha(g);g.setIconFileName(m.getIconFileName());g.setThemeTypeName(m.getDisplayName());return g};this.createThemeModel=function(){var g=new va;g.setThemeType(va.THEMETYPE_SUBJECT);return g}}function kb(){Ma.call(this);var a=this.protectedMethod,
m=this;a.setIconFileName("icon-card-dsb");a.setType(va.THEMETYPE_DASHBOARD);a.setDisplayName(d.get("dashboard","\u4eea\u8868\u677f"));var g;this.createCardUi=function(q){q=new ua(q);q.setIconFileName(m.getIconFileName());q.setThemeTypeName(m.getDisplayName());q.setRefreshThemesFunction(g);return q};this.createThemeModel=function(){var q=new va;q.setThemeType(va.THEMETYPE_DASHBOARD);return q};this.needRefreshThemes=function(){return!0};this.setRefreshThemesFunction=function(q){g=q}}function mb(){Ma.call(this);
var a=this.protectedMethod,m=this;a.setIconFileName("icon-card-programablecard");a.setType(va.THEMETYPE_PROGRAMABLECARD);a.setDisplayName(d.get("programableCard","\u7f16\u7a0b\u5f0f\u5361\u7247"));this.isSupported=function(){return J.getProgramableCardEntrance()?!0:!1};this.needRefreshThemes=function(){return!1};this.createCardUi=function(g){g=new Z(g);g.setIconFileName(m.getIconFileName());g.setThemeTypeName(m.getDisplayName());return g};this.createThemeModel=function(){var g=new va;g.setThemeType(va.THEMETYPE_PROGRAMABLECARD);
return g}}function N(a){var m=this,g,q,r,u,T,ca,D,I,O,y,v,E,K,P,x={};x[N.ENTRANCE_ANALYSIS]="btn_analysis_larger";x[N.ENTRANCE_SQUARE]="btn_square_larger";x[N.ENTRANCE_DATAMODELING]="btn_data_larger";x[N.ENTRANCE_DASHBOARD]="btn_dsb_larger";this.setArrNonPresetThemeModel=function(G){q=G};this.setGlobalDependence=function(G){g=G};this.setCopySuccessCallback=function(G){O=G};this.setCopyDifferentGroupSuccessCallBack=function(G){y=G};this.setDelSuccessCallback=function(G){v=G};this.setMoveSuccessCallback=
function(G){E=G};this.setRefreshThemesFunction=function(G){K=G};this.setIconFileName=function(G){D=G};this.getJqUi=function(){r||aa();return r};this.setThemeTypeName=function(G){ca=G};this.getThemeTypeName=function(){return ca};this.setThemeName=function(G){u.text(G)};this.setThemeDescription=function(G){T.text(G)};this.getThemeCopyDialogCreator=function(G){throw Error("override me");};this.getThemeDelDialogCreator=function(G){throw Error("override me");};this.setThemeDetailCallback=function(G){P=
G};var R=function(){P(a,D)},aa=function(){r=$("<div>");r.addClass("theme-card");r.on("mousedown",X);r.attr("id",a.getThemeID());r.on("mouseover",function(){r.find(".theme-name").css("width","153px")});r.on("mouseleave",function(){r.find(".theme-name").css("width","209px")});var G=$("<div>");G.addClass("theme-detail-container");var M=$("<span class='theme-icon'>");$a.background(M,D);u=$("<span>");u.addClass("theme-name");u.css("cursor","pointer");var Ga=a.getThemeName();u.text(Ga);u.attr("title",Ga);
u.on("click",ab);T=$("<div>");T.addClass("theme-description");Ga=$("<div>");Ga.addClass("manage-icon-container");Ga.on("click",function(rb){rb.stopPropagation()});var La=$("<div>");La.addClass("icon-container");La.on("click",function(rb){rb.stopPropagation()});var fb=a.isPreset();if(fb){var nb=$("<div>");nb.addClass("theme-preset-text");nb.text(d.get("preset","\u9884 \u7f6e"));var sb=$("<div>");sb.addClass("theme-preset-icon");$a.background(sb,"icon-preset-big");nb.appendTo(Ga);sb.appendTo(Ga)}nb=
a.getThemeDescription();sb=""==nb||null==nb?d.get("noDescription","\u8be5#1\u6682\u65e0\u63cf\u8ff0").replace("#1",ca):pb.cutExceedCharacters(nb,62);T.text(sb);T.attr("title",nb);M.appendTo(G);u.appendTo(G);Ga.appendTo(G);T.appendTo(G);G.appendTo(r);La.appendTo(r);ub(La);Na(La,fb);eb(Ga,fb);Ta(La)},X=function(G){var M=r.parent().children(".theme-card-selected");0<M.length&&M.removeClass("theme-card-selected");M=r.parent().children(".current-selected");0<M.length&&(M.removeClass("current-selected"),
M.addClass("pre-selected"));$(G.currentTarget).addClass("theme-card-selected");$(G.currentTarget).addClass("current-selected")};document.onmousedown=function(G){var M=document.getElementsByClassName("theme-card-selected")[0];void 0==M||ja(M,G.target)||(G=$(M).children(".theme-zoom-container"),0<G.length&&A(G))};var A=function(G){t=!1;var M=G.children(".zoom-entrance-container"),Ga=M.children(".zoom-icon-container");M=M.children(".zoom-dsb-icon-container");G.animate(C,400,"swing");if(0<Ga.length){var La=
Ga.children(".zoom-entrance-icon"),fb=Ga.children(".zoom-entrance-des");0<fb.length&&0<La.length&&(La.css(Da),fb.animate(Qa,300,"swing"),Ga.animate(la,320,"swing"),setTimeout(function(){r.children(".square-icon").show()},390))}0<M.length&&(La=M.children(".zoom-entrance-icon"),fb=M.children(".zoom-entrance-des"),0<La.length&&0<fb.length&&(La.css(Da),fb.animate(Qa,300,"swing"),M.animate(Ra,320,"swing"),setTimeout(function(){r.children(".square-icon").show()},390)));setTimeout(function(){G.remove();
t=!0},400)},ja=function(G,M){return void 0==M||null==M?!1:G==M?!0:ja(G,M.offsetParent)},t=!0,C={opacity:"0"},U={opacity:"0.9"},la={marginLeft:"13px",top:"65px",height:"45%",width:"18px"},Oa={marginLeft:"9px",top:"16px",height:"55px",width:"88px"},Ra={left:"13px",top:"65px",height:"45%",width:"18px"},ia={left:"106px",top:"16px",height:"55px",width:"88px"},Da={transform:"scale(0.5)",transition:"transform 300ms ease"},Pa={transform:"scale(0.75)",transition:"transform 320ms ease"},Qa={fontSize:"4px",
opacity:"0"},Ya={opacity:"1",fontSize:"14px"},ab=function(G){if(t&&!hb())if(I&N.ENTRANCE_ANALYSIS&&I&N.ENTRANCE_SQUARE&&I&N.ENTRANCE_DATAMODELING||I&N.ENTRANCE_DASHBOARD){t=!1;var M=$("<div>");M.addClass("theme-zoom-container");M.css(C);var Ga=$("<div>");Ga.addClass("zoom-entrance-container");ba(Ga);Ga.appendTo(M);M.appendTo(r);setTimeout(function(){r.children(".square-icon").hide();M.animate(U,360,"swing",function(){t=!0});var La=Ga.children(".zoom-icon-container");if(0<La.length){var fb=La.children(".zoom-entrance-icon"),
nb=La.children(".zoom-entrance-des");0<fb.length&&0<nb.length&&(fb.css(Pa),nb.animate(Ya,320,"swing"));La.animate(Oa,300,"swing")}La=Ga.children(".zoom-dsb-icon-container");0<La.length&&(fb=La.children(".zoom-entrance-icon"),nb=La.children(".zoom-entrance-des"),0<fb.length&&(fb.css(Pa),nb.animate(Ya,320,"swing")),La.animate(ia,300,"swing"))},40)}else I&N.ENTRANCE_PROGRAMABLECARD&&Y(N.ENTRANCE_PROGRAMABLECARD,d.get("programableCard","\u7f16\u7a0b\u5f0f\u5361\u7247"))},hb=function(){var G=r.parent().children(".pre-selected");
G.removeClass("pre-selected");if(0<G.length){var M=G.children(".theme-zoom-container");if(0<M.length&&t&&(A(M),G.attr("id")===r.attr("id")))return!0}},Na=function(G,M){var Ga=$("<span>");Ga.addClass("copy-icon icon");$a.backgroundWithHover(Ga,"btn-copy");Ga.attr("title",d.get("copy","\u590d\u5236"));Ga.on("click",yb);Ga.appendTo(G);M||(M=$("<span>"),M.addClass("move-icon icon"),M.attr("title",d.get("move","\u79fb\u52a8")),$a.backgroundWithHover(M,"btn-moving"),M.on("click",Bb),M.appendTo(G))},ub=
function(G){var M=$("<span>");M.addClass("tm-themeDetail-icon");M.css("cursor","pointer");$a.backgroundWithHover(M,"info");I==N.ENTRANCE_DASHBOARD?M.attr("title",d.get("seeDashboardDetails","\u67e5\u770b\u4eea\u8868\u677f\u8be6\u60c5")):M.attr("title",d.get("seeSubjectDetails","\u67e5\u770b\u4e3b\u9898\u8be6\u60c5"));M.on("click",R);M.appendTo(G)},eb=function(G,M){M||(M=$("<span>"),M.addClass("edit-icon icon"),M.attr("title",d.get("edit","\u7f16\u8f91")),$a.backgroundWithHover(M,"btn-edit"),M.on("click",
Cb),M.appendTo(G),M=$("<span>"),M.addClass("delete-icon icon"),M.attr("title",d.get("deleteTheme","\u5220\u9664")),$a.backgroundWithHover(M,"btn-delete"),M.on("click",Db),M.appendTo(G))},ba=function(G){if(I&N.ENTRANCE_ANALYSIS){var M=d.get("moduleLonger","\u6570\u636e\u5206\u6790");Ca(M,N.ENTRANCE_ANALYSIS,"-1px -190px","-1px -157px",G)}I&N.ENTRANCE_SQUARE&&(M=d.get("moduleSquare","\u6570\u636e\u6597\u65b9"),Ca(M,N.ENTRANCE_SQUARE,"-34px -190px","-34px -157px",G));I&N.ENTRANCE_DATAMODELING&&(M=d.get("dataModeling",
"\u6570\u636e\u51c6\u5907"),Ca(M,N.ENTRANCE_DATAMODELING,"-67px -190px","-67px -157px",G));I&N.ENTRANCE_DASHBOARD&&(M=d.get("dashboard","\u4eea\u8868\u677f"),Ca(M,N.ENTRANCE_DASHBOARD,"-100px -190px","-100px -157px",G))},Ca=function(G,M,Ga,La,fb){var nb=$("<div>");M==N.ENTRANCE_DASHBOARD?(nb.addClass("zoom-dsb-icon-container"),nb.css(Ra)):(nb.addClass("zoom-icon-container"),nb.css(la));var sb=$("<div>");sb.addClass("zoom-entrance-icon");sb.css(Da);$a.backgroundWithHover(sb,x[M]);sb.attr("title",G);
sb.appendTo(nb);var rb=$("<div>");rb.text(G);rb.addClass("zoom-entrance-des");rb.css(Qa);rb.attr("title",G);rb.appendTo(nb);Ka(sb,rb);Za(sb,rb,Ga,La);ea(nb,M,G);nb.appendTo(fb)},ea=function(G,M,Ga){G.on("click",function(La){La.stopPropagation();Y(M,Ga)})},Y=function(G,M){G=ib(G);var Ga=a.getThemeID(),La=a.getThemeName(),fb=a.isPreset();G(Ga,La,fb);sa.occur(sa.TM_THEME_ENTRANCE_TYPE,M)},Ka=function(G,M){G.on("mouseenter",function(Ga){M.css("color","#2B87F3")});G.on("mouseleave",function(Ga){M.css("color",
"")})},Za=function(G,M,Ga,La){M.on("mouseenter",function(fb){M.css("color","#2B87F3");G.css("background-position",Ga)});M.on("mouseleave",function(fb){M.css("color","");G.css("background-position",La)})},Ta=function(G){I&N.ENTRANCE_ANALYSIS&&jb(d.get("moduleLonger","\u6570\u636e\u5206\u6790"),"btn-analysis",N.ENTRANCE_ANALYSIS,G);I&N.ENTRANCE_SQUARE&&jb(d.get("moduleSquare","\u6570\u636e\u6597\u65b9"),"btn-square",N.ENTRANCE_SQUARE,G);I&N.ENTRANCE_DATAMODELING&&jb(d.get("dataModeling","\u6570\u636e\u51c6\u5907"),
"btn-data",N.ENTRANCE_DATAMODELING,G);if(I&N.ENTRANCE_AIANALYSIS){var M=jb(d.get("AIAnalysis","AI\u6570\u636e\u5206\u6790\u52a9\u624b"),"btn-ai-analysis",N.ENTRANCE_AIANALYSIS,G);J.isHasAIAnalysisEntrance()||M.hide()}I&N.ENTRANCE_DASHBOARD&&jb(d.get("dashboard","\u4eea\u8868\u677f"),"btn-dsb",N.ENTRANCE_DASHBOARD,G);I&N.ENTRANCE_PROGRAMABLECARD&&jb(d.get("programableCard","\u7f16\u7a0b\u5f0f\u5361\u7247"),"btn-program",N.ENTRANCE_PROGRAMABLECARD,G)},ib=function(G){if(G&N.ENTRANCE_ANALYSIS)return J.getAnalysisEntrance();
if(G&N.ENTRANCE_SQUARE)return J.getSquareEntrance();if(G&N.ENTRANCE_DATAMODELING)return J.getDataModelEntrance();if(G&N.ENTRANCE_AIANALYSIS)return J.getAIAnalysisEntrance();if(G&N.ENTRANCE_DASHBOARD)return J.getDashboardEntrance();if(G&N.ENTRANCE_PROGRAMABLECARD)return J.getProgramableCardEntrance()},jb=function(G,M,Ga,La){var fb=$("<span>");fb.addClass("square-icon icon");$a.backgroundWithHover(fb,M);fb.attr("title",G);ea(fb,Ga,G);fb.appendTo(La);return fb},yb=function(){var G=m.getThemeCopyDialogCreator(a);
G.setGlobal(g);G.setThemeTypeName(ca);var M=function(La){La=va.createInstance(La);La.setIsPreset(!1);q.splice(0,0,La);var fb=La.getThemeGroupID();a.getThemeGroupID()==fb?O&&O(La):y&&y(La);La=d.get("copyThemeSuccess","\u590d\u5236#1\u6210\u529f\u3002").replace("#1",ca);g.getMessageCurtain().showSuccess(La,2E3)},Ga=function(La){La=va.createInstance(La).getThemeGroupID();K&&K(La);La=d.get("copyThemeSuccess","\u590d\u5236#1\u6210\u529f\u3002").replace("#1",ca);g.getMessageCurtain().showSuccess(La,2E3)};
K?G.addSuccessCallback(Ga):G.addSuccessCallback(M);G.createDialog().show()},Cb=function(){var G=new ma(a);G.setThemeTypeName(ca);G.addSuccessCallback(function(M){var Ga=M.getThemeName();M=M.getThemeDescription();a.setThemeName(Ga);a.setThemeDescription(M);u.text(Ga);u.attr("title",Ga);Ga=""==M||null==M?d.get("noDescription","\u8be5#1\u6682\u65e0\u63cf\u8ff0\u3002").replace("#1",ca):pb.cutExceedCharacters(M,62);T.text(Ga);T.attr("title",M);Ga=d.get("editSuccess","\u7f16\u8f91#1\u6210\u529f\u3002").replace("#1",
ca);g.getMessageCurtain().showSuccess(Ga,2E3)});G.setArrNonPresetThemeModel(q);G.setGlobal(g);G.createDialog().show()},Bb=function(){var G=new za(a);G.setGlobal(g);G.setThemeTypeName(ca);G.addSuccessCallback(function(M){var Ga=q.indexOf(a);-1<Ga&&q.splice(Ga,1);q.push(M);r.remove();E&&E(M);M=d.get("moveSuccess","\u79fb\u52a8#1\u6210\u529f\u3002").replace("#1",ca);g.getMessageCurtain().showSuccess(M,2E3)});G.createDialog().show()},Db=function(){var G=m.getThemeDelDialogCreator(a);G.setGlobal(g);G.setThemeTypeName(ca);
G.addSuccessCallback(function(){var M=q.indexOf(a);-1<M&&q.splice(M,1);m.getJqUi().remove();v&&v(a);M=d.get("deleteThemeSuccess","\u5220\u9664#1\u6210\u529f\u3002").replace("#1",ca);g.getMessageCurtain().showSuccess(M,2E3)});G.createDialog().show()};this.protectedMethod={setAllEntranceType:function(G){I=G},setMainEntranceType:function(G){}}}function Ha(a){N.call(this,a);a=this.protectedMethod;a.setAllEntranceType(39);a.setMainEntranceType(1);this.getThemeCopyDialogCreator=function(m){return new w(m)};
this.getThemeDelDialogCreator=function(m){return new ob(m)}}function ua(a){N.call(this,a);a=this.protectedMethod;a.setAllEntranceType(8);a.setMainEntranceType(8);this.getThemeCopyDialogCreator=function(m){return new qa(m)};this.getThemeDelDialogCreator=function(m){return new ob(m)}}function Z(a){N.call(this,a);a=this.protectedMethod;a.setAllEntranceType(16);a.setMainEntranceType(16);this.getThemeCopyDialogCreator=function(m){return new W(m)};this.getThemeDelDialogCreator=function(m){return new bb(m)}}
function xa(){this.createDialog=function(){throw Error("override");}}function L(a){xa.call(this);var m=this,g=[400,300],q,r,u,T,ca=[],D=!1;this.setThemeTypeName=function(y){q=y};this.addSuccessCallback=function(y){ca.push(y)};this.setGlobal=function(y){T=y};this.createDialog=function(){var y=$(document.body),v=$("<div class='sa-ctrl-common-modallayer'>");v.appendTo(y);var E=new V(v);E.setTitle(d.get("copySth","\u590d\u5236#1").replace("#1",q));var K=g[0],P=g[1],x=y.prop("clientWidth");y=y.prop("clientHeight");
var R=function(){E.destroy();v.remove()};E.setBounds(x-K>>1,y-P>>1,K,P);E.setToolbarVisible(!1);E.setContent(m.createCopyThemePanel());E.addClosingListener(function(aa,X){X?O(aa.getMessageCurtain(),R):R()});E.showFooterPane();return E};this.createCopyThemePanel=function(){var y=$("<div>"),v=new oa;v.setText(d.get("themeName","\u540d\u79f0"));v=v.getJqUi();r=new Ja;r.addEditedListener(function(){D=!0});var E=r.getJqUi(),K=new oa;K.setText(d.get("copyTo","\u590d\u5236\u5230"));K=K.getJqUi();for(var P=
T.getAllGroupModel(),x=P[0],R=0;R<P.length;R++){var aa=P[R];aa.getThemeGroupID()==a.getThemeGroupID()&&(x=aa)}u=new H;u.setItemModels(P);u.setSelected(x);u.setCustomPainter(function(X,A,ja){A.text(ja.getThemeGroupName())});u.addSelectedChangedListener(function(X,A,ja){D||I(ja.getThemeGroupID())});I(x.getThemeGroupID());P=u.getJqUi();y.append(v);y.append(E);y.append(P);y.append(K);m.protectedCustomLayout(y,v,E,K,P);return y};this.protectedCustomLayout=function(y,v,E,K,P){b.layoutCtrl(v,20,20,80,23);
b.layoutCtrl(E,110,20,240,23);b.layoutCtrl(K,20,85,80,23);b.layoutCtrl(P,110,85,240,23)};var I=function(y){var v=a.getThemeType(),E=T.createFacade(function(K){for(var P=a.getThemeName(),x=a.getThemeType(),R=[],aa=!1,X=0,A=K.length;X<A;X++){var ja=va.createInstance(K[X]),t=ja.getThemeName();ja=ja.getThemeType();ja==x&&t==P?aa=!0:ja==x&&0==t.indexOf(P)&&R.push(t)}if(aa){K=1;for(X=!1;!X;){x=!1;for(X=0;X<R.length;X++)if(R[X]==P+"-"+K){K++;x=!0;break}X=!x}P=P+"-"+K}r.setText(P)},function(K,P){return!1});
E.setShowBlocking(!0);E.getTheme(y,v)},O=function(y,v){var E=u.getSelected().getThemeGroupID(),K=$.trim(r.getText()),P;""!=K&&50<K.length?P=d.get("nameTooLong","\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):""==K&&(P=d.get("nameCannotBeEmpty","#1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\u3002").replace("#1",q));P?y.showPrompt(P,2E3):(P=T.createFacade(function(x){for(var R=0,aa=ca.length;R<aa;R++){var X=ca[R];X&&X(x)}v()},function(x,R){var aa=x.toString();if("10"==aa.substr(0,2)&&7==
aa.length){if(1030001==x)return y.showError(R),!0;var X;1010003==x?X=d.get("duplicateNameInCategory","\u8be5\u5206\u7c7b\u4e0b\u5b58\u5728\u540c\u540d#1\u3002").replace("#1",q):1010005==x?X=d.get("themeFileSizeLimit","\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3\u3002"):1010004==x&&(X=d.get("themeNotFound","\u5bf9\u5e94#1\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002").replace("#1",q));if(X)return y.showPrompt(X,2E3),!0}return 2010001==x?(X=d.get("themeHasNotFound","\u5bf9\u5e94\u4e3b\u9898\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),
y.showPrompt(X),!0):!1}),P.setShowBlocking(!0),m.protectedRequestCopyTheme(P,K,E))};this.protectedRequestCopyTheme=function(y,v,E){var K=a.getThemeID(),P=a.getThemeType();y.copyTheme(K,E,v,P)};this.protectedMethod={setSuggestSize:function(y){g=y}}}function w(a){L.call(this,a);var m;this.protectedRequestCopyTheme=function(g,q,r){var u=a.getThemeID(),T=a.getThemeType(),ca=m.isOn();g.copyTheme(u,r,q,T,ca)};this.protectedCustomLayout=function(g,q,r,u,T){b.layoutCtrl(q,20,10,80,23);b.layoutCtrl(r,110,
10,240,23);b.layoutCtrl(u,20,65,80,23);b.layoutCtrl(T,110,65,240,23);m=new c;m.setOn(!0);q=m.getJqUi();r=d.get("carryAnalysisScheme","\u643a\u5e26\u5206\u6790\u65b9\u6848");u=(new oa(r)).getJqUi();u.attr("title",r);u.appendTo(g);q.appendTo(g);b.layoutCtrl(u,20,120,80,23);b.layoutCtrl(q,110,123,31,19);"en"==Q.getUrlParamValue("language")&&(b.layoutCtrl(u,20,120,135,23),b.layoutCtrl(q,160,123,31,19))}}function qa(a){L.call(this,a);var m;this.protectedRequestCopyTheme=function(g,q,r){var u=a.getThemeID(),
T=a.getThemeType(),ca=m&&m.isOn();g.copyTheme(u,r,q,T,!0,ca)};this.protectedCustomLayout=function(g,q,r,u,T){b.layoutCtrl(q,20,10,80,23);b.layoutCtrl(r,110,10,240,23);b.layoutCtrl(u,20,65,80,23);b.layoutCtrl(T,110,65,240,23);m=new c;a.isPreset()?m.setOn(!0):m.setOn(!1);q=m.getJqUi();r=d.get("copyIncludedThemes","\u540c\u65f6\u590d\u5236\u4e3b\u9898");u=(new oa(r)).getJqUi();u.attr("title",r);u.appendTo(g);q.appendTo(g);b.layoutCtrl(u,20,120,80,23);b.layoutCtrl(q,110,123,31,19);"en"==Q.getUrlParamValue("language")&&
(b.layoutCtrl(u,20,120,135,23),b.layoutCtrl(q,160,123,31,19))}}function W(a){L.call(this,a)}function ma(a){xa.call(this);var m,g=[400,300],q=[],r,u,T,ca;this.setArrNonPresetThemeModel=function(O){u=O};this.setThemeTypeName=function(O){r=O};this.setGlobal=function(O){m=O};this.addSuccessCallback=function(O){q.push(O)};this.createDialog=function(){var O=$(document.body),y=$("<div class='sa-ctrl-common-modallayer'>");y.appendTo(O);var v=new V(y);v.setSelectable(!0);var E=void 0!=a.getThemeID()?d.get("editSth",
"\u7f16\u8f91#1"):d.get("createSth","\u65b0\u5efa#1");E=E.replace("#1",r);v.setTitle(E);E=g[0];var K=g[1],P=O.prop("clientWidth"),x=O.prop("clientHeight");v.setBounds(P-E>>1,x-K>>1,E,K);v.setToolbarVisible(!1);v.setContent(I());v.showFooterPane();y.appendTo(O);var R=function(){v.destroy();y.remove()};v.addClosingListener(function(aa,X){X?D(R,aa.getMessageCurtain()):R()});return v};var D=function(O,y){var v=$.trim(T.getText()),E=$.trim(ca.getText()),K;""!=v&&50<v.length?K=d.get("nameTooLong","\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):
""==v&&(K=d.get("nameCannotBeEmpty","\u8bf7\u8f93\u5165#1\u540d\u79f0\u3002").replace("#1",r));""!=E&&500<E.length&&(K=d.get("descriptionTooLong","\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"));if(K)y.showPrompt(K,2E3);else{var P=a.copy();P.setThemeName(v);P.setThemeDescription(E);v=m.createFacade(function(x){P.setThemeID(x);x!=a.getThemeID()&&u.splice(0,0,P);x=0;for(var R=q.length;x<R;x++){var aa=q[x];aa&&aa(P)}O()},function(x,R){return 1010003==x?(x=d.get("nameExist",
"\u8be5#1\u540d\u79f0\u5df2\u5b58\u5728\u3002").replace("#1",r),y.showPrompt(x,2E3),!0):!1});v.setShowBlocking(!0);v.saveOrUpdateTheme(P)}},I=function(){var O=$("<div>"),y=new oa;y.setRequired(!0);y.setText(d.get("themeName","\u540d\u79f0"));y=y.getJqUi();T=new Ja;T.setText(a.getThemeName());var v=T.getJqUi(),E=new oa;E.setText(d.get("description","\u63cf\u8ff0"));E=E.getJqUi();ca=new Aa;ca.setText(a.getThemeDescription());var K=ca.getJqUi();y.appendTo(O);v.appendTo(O);E.appendTo(O);K.appendTo(O);
b.layoutCtrl(y,8,0,70,23);b.layoutCtrl(v,76,0,280,23);b.layoutCtrl(E,8,48,70,23);b.layoutCtrl(K,76,54,280,120);return O}}function za(a){xa.call(this);var m=[],g=[400,300],q,r,u;this.setThemeTypeName=function(D){q=D};this.addSuccessCallback=function(D){m.push(D)};this.setGlobal=function(D){r=D};this.createDialog=function(){var D=$(document.body),I=$("<div class='sa-ctrl-common-modallayer'>");I.appendTo(D);var O=new V(I),y=d.get("moveTo","\u79fb\u52a8\u5230");O.setTitle(y);y=g[0];var v=g[1],E=D.prop("clientWidth");
D=D.prop("clientHeight");var K=function(){O.destroy();I.remove()};O.setBounds(E-y>>1,D-v>>1,y,v);O.setToolbarVisible(!1);O.setContent(T());O.addClosingListener(function(P,x){x?ca(P.getMessageCurtain(),K):K()});O.showFooterPane();return O};var T=function(){var D=$("<div>");D.addClass("move-subject-panel");var I=new oa;I.setText(d.get("category","\u5206\u7c7b"));I=I.getJqUi();var O=r.getAllGroupModel();u=new H;u.setItemModels(O);u.setSelected(O[0]);u.setCustomPainter(function(y,v,E){v.text(E.getThemeGroupName())});
O=u.getJqUi();I.appendTo(D);O.appendTo(D);b.layoutCtrl(I,25,50,70,23);b.layoutCtrl(O,100,50,240,23);return D},ca=function(D,I){var O=u.getSelected().getThemeGroupID(),y=a.getThemeID(),v=a.getThemeName(),E=a.getThemeGroupID(),K=a.getThemeType();if(O==E)I();else{var P=r.createFacade(function(x){x=new va;x.setThemeID(y);x.setThemeGroupID(O);x.setThemeName(v);x.setThemeDescription(a.getThemeDescription());x.setThemeType(K);x.setIsPreset(!1);x.setBeforeMovedThemeGroupId(E);for(var R=0,aa=m.length;R<aa;R++){var X=
m[R];X&&X(x)}I()},function(x,R){return 1030001==x?(D.showError(R),!0):1010003==x?(x=d.get("duplicateNameInCategory","\u8be5\u5206\u7c7b\u4e0b\u5b58\u5728\u540c\u540d#1\u3002").replace("#1",q),D.showPrompt(x,2E3),!0):1010004==x?(x=d.get("themeNotFound","\u5bf9\u5e94#1\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002").replace("#1",q),D.showPrompt(x,2E3),!0):!1});P.setShowBlocking(!0);P.moveTheme(y,O,v)}}}function bb(a){xa.call(this);var m=this,g,q=[400,300],r=[],u;this.setThemeTypeName=function(D){g=
D};this.addSuccessCallback=function(D){r.push(D)};this.setGlobal=function(D){u=D};this.createDialog=function(){var D=$(document.body),I=$("<div class='sa-ctrl-common-modallayer'>");I.appendTo(D);var O=new V(I);O.setTitle(d.get("operateConfirm","\u64cd\u4f5c\u786e\u8ba4"));var y=q[0],v=q[1],E=D.prop("clientWidth"),K=D.prop("clientHeight");O.setBounds(E-y>>1,K-v>>1,y,v);O.setToolbarVisible(!1);O.setContent(m.createJqPanel());O.addClosingListener(function(P,x){x&&ca();P.destroy();I.remove()});O.showFooterPane();
I.appendTo(D);T(I);return O};this.createJqPanel=function(){var D=$("<div>"),I=$("<span>");fa.background(I,"msg-delete");var O=$("<span>");O.addClass("theme-manage-deldialog-confirm-msg");var y=d.get("comfirmToDeleteTheme","\u786e\u5b9a\u8981\u5220\u9664#1\u201c#2\u201d\u5417\uff1f");y=y.replace("#1",g);y=y.replace("#2",a.getThemeName());y=y.replace("#3",g);O.text(y);O.attr("title",y);I.appendTo(D);O.appendTo(D);m.protectedCustomLayout(D,I,O);return D};var T=function(D){(D=D.children(".sa-ctrl-dialog"))&&
0<D.length&&(D=D.children(".sa-ctrl-dialog-title"))&&0<D.length&&D.css("border-bottom","0px")},ca=function(){var D=function(O){for(var y=0,v=r.length;y<v;y++){var E=r[y];E&&E()}m.protectedDoThingAfterDeleteCard(O)},I=u.createFacade(D,function(O,y){y=O.toString();return"10"==y.substr(0,2)&&7==y.length&&1010004==O?(D(null),!0):!1});I.setShowBlocking(!0);m.protectedRequestDel(I)};this.protectedDoThingAfterDeleteCard=function(D){};this.protectedRequestDel=function(D){var I=a.getThemeID(),O=a.getThemeGroupID(),
y=a.getThemeType();D.deleteTheme(I,O,y,!1)};this.protectedCustomLayout=function(D,I,O){b.layoutCtrl(I,140,20,98,80);b.layoutCtrl(O,0,130,368,23)};this.protectedMethod={getGlobal:function(){return u}}}function ob(a){bb.call(this,a);var m;this.protectedDoThingAfterDeleteCard=function(g){m.isOn()&&g&&0!=g.length&&J.getFunDeleteLappPublishInfos()(g)};this.protectedRequestDel=function(g){var q=a.getThemeID(),r=a.getThemeGroupID(),u=a.getThemeType();g.deleteTheme(q,r,u,m.isOn())};this.protectedCustomLayout=
function(g,q,r){b.layoutCtrl(q,140,10,98,80);b.layoutCtrl(r,0,100,368,60);q=d.get("deletePublishInfo","\u540c\u65f6\u5220\u9664\u53d1\u5e03\u4fe1\u606f");r=new oa(q);r.setTooltips(q);q=r.getJqUi();m=new c;r=m.getJqUi();b.layoutCtrl(q,105,163,125,23);b.layoutCtrlWithLRTB(r,230,null,31,165,null,19);g.append(r);g.append(q)}}function pb(){}function tb(){var a=this,m,g,q,r,u,T,ca,D,I,O,y,v,E,K,P,x,R,aa,X,A,ja,t=!1,C=com.kingdee.bos.qing.timedpush.LappIntegration,U=com.kingdee.bos.qing.publish.model.PublishTargetType,
la=com.kingdee.bos.qing.timedpush.Analysis;this.setThemeModel=function(ba){g=ba};this.setCardIconType=function(ba){q=ba};this.setGlobalDependence=function(ba){r=ba};this.isOpen=function(){return t};this.setIsOpen=function(ba){t=ba};this.setNullToJqUi=function(){m&&m.remove();m=null};this.adjustCardContainer=function(ba){u=ba};this.setCollapseListener=function(ba){T=ba};this.getJqUi=function(ba){if(!m){m=$("<div>");m.addClass("tm-themeDetail-ThemeDetail");ca=$("<div>");ca.addClass("tm-themeDetail-ThemePanel");
var Ca=$("<div>");Ca.addClass("tm-themeDetail-ThemeIconText");var ea=$("<div>");ea.addClass("tm-themeDetail-ThemeText");ea.text(g.getThemeName());ea.attr("title",g.getThemeName());var Y=$("<div>");Y.addClass("tm-themeDetail-ThemeIcon");$a.background(Y,q);Y.appendTo(Ca);ea.appendTo(Ca);v=$("<div>");v.addClass("tm-themeDetail-ThemeNumber");K=$("<div>");K.addClass("tm-themeDetail-Num");K.text(d.get("pubNumber","\u53d1\u5e03\u6b21\u6570\uff1a"));P=$("<div>");P.addClass("tm-themeDetail-Num");P.text(d.get("pushNumber",
"\u5b9a\u65f6\u63a8\u9001\u914d\u7f6e\u6570\uff1a"));E=$("<div>");E.addClass("tm-themeDetail-jqDetails");aa=$("<div>");ia(aa,null,d.get("pubDetail","\u53d1\u5e03\u8be6\u60c5"));X=$("<div>");ia(X,null,d.get("pushDetail","\u5b9a\u65f6\u63a8\u9001\u914d\u7f6e\u8be6\u60c5"));aa.appendTo(E);X.appendTo(E);K.appendTo(v);P.appendTo(v);y=$("<div>");y.addClass("tm-themeDetail-ThemeDate");g.getThemeType()==va.THEMETYPE_SUBJECT?(I=$("<div>"),I.text(d.get("createTime","\u521b\u5efa\u65f6\u95f4\uff1a")),I.addClass("tm-themeDetail-date"),
O=$("<div>"),O.addClass("tm-themeDetail-date"),O.text(d.get("dataExtractStrategy","\u6570\u636e\u63d0\u53d6\u7b56\u7565\uff1a")),D=$("<div>"),D.addClass("tm-themeDetail-date"),D.text(d.get("dataUpdateTime","\u6570\u636e\u66f4\u65b0\u65f6\u95f4\uff1a")),I.appendTo(y),O.appendTo(y),x=$("<div>"),x.addClass("tm-themeDetail-Num"),x.text(d.get("subRefCountInDsb","\u5f15\u7528\u8be5\u4e3b\u9898\u7684\u4eea\u8868\u677f\u4e2a\u6570\uff1a")),x.appendTo(v),R=$("<div>"),ea=d.get("subRefInDsb","\u5f15\u7528\u8be5\u4e3b\u9898\u7684\u4eea\u8868\u677f "),
ia(R,null,ea),R.appendTo(E)):g.getThemeType()==va.THEMETYPE_DASHBOARD&&(I=$("<div>"),I.text(d.get("createTime","\u521b\u5efa\u65f6\u95f4\uff1a")),I.addClass("tm-themeDetail-date"),D=$("<div>"),D.text(d.get("modifyTime","\u4fee\u6539\u65f6\u95f4\uff1a")),D.addClass("tm-themeDetail-date"),I.appendTo(y),D.appendTo(y));Ca.appendTo(m);y.appendTo(ca);v.appendTo(ca);E.appendTo(ca);ca.appendTo(m);eb();ub(g.getThemeID());document.body.addEventListener("mousedown",Oa,!0);document.body.addEventListener("mouseup",
Ra,!0)}m.appendTo(ba)};var Oa=function(ba){ba=ba.target;for(var Ca=$(document.body).find(".tm-themeDetail-ThemeDetail");ba!=document.body;){if(Ca[0]&&ba==Ca[0]||$(ba).hasClass("tm-themeDetail-icon")||$(ba).hasClass("tm-themeDetail-splitPaneLine")||$(ba).hasClass("theme-card"))return;ba=ba.parentNode}a.closePanel();document.body.removeEventListener("mousedown",Oa,!0);document.body.removeEventListener("mouseup",Ra,!0)},Ra=function(ba){ba=ba.target;if(!$(ba).hasClass("tm-themeDetail-icon"))for(;ba!=
document.body;){if($(ba).hasClass("theme-card")){a.closePanel();document.body.removeEventListener("mousedown",Oa,!0);document.body.removeEventListener("mouseup",Ra,!0);break}ba=ba.parentNode}},ia=function(ba,Ca,ea,Y){var Ka=$("<div>");Ka.text("\u25b2");Ka.addClass("tm-themeDetail-arrowCollapsed");var Za=$("<div>");Za.addClass("tm-themeDetail-jqDiv");var Ta=$("<div>"),ib=0;Ta.addClass("tm-themeDetail-Box");ea&&Ta.text(ea);Ca&&(ib=Ca.length);for(ea=0;ea<ib;ea++)Ca[ea].appendTo(Ta);0<ib&&(ba.on("click",
function(jb){jb.stopPropagation();Ta.children().toggle("fast");Ka.hasClass("tm-themeDetail-arrowCollapsed")?(Ka.removeClass("tm-themeDetail-arrowCollapsed"),Ka.addClass("tm-themeDetail-arrowExpanded")):(Ka.removeClass("tm-themeDetail-arrowExpanded"),Ka.addClass("tm-themeDetail-arrowCollapsed"))}),Ta.children().on("click",function(jb){jb.stopPropagation()}));Ta.children().css("display","none");Ka.appendTo(Za);Y&&Y.appendTo(Za);Ta.appendTo(Za);Za.appendTo(ba)},Da=function(ba){if(g.getThemeType()==va.THEMETYPE_SUBJECT){var Ca=
ba.getCreateDate(),ea=ba.getDataStrategy(),Y=ba.getModifyDate();Ca&&I.text(d.get("createTime","\u521b\u5efa\u65f6\u95f4\uff1a")+Ca.substring(0,19));ea==S.DATASTRATEGY_TIMING&&(Y?Y&&D.text(d.get("modifyTime","\u4fee\u6539\u65f6\u95f4\uff1a")+Y.substring(0,19)):D.text(d.get("dataUpdateTime","\u6570\u636e\u66f4\u65b0\u65f6\u95f4\uff1a")+d.get("NotDoFirstExtraction","\u672a\u8fdb\u884c\u7b2c\u4e00\u6b21\u63d0\u53d6")),D.appendTo(y));O.text(d.get("dataExtractStrategy","\u6570\u636e\u63d0\u53d6\u7b56\u7565\uff1a")+
ab[ea]);Ca=ba.getSubRef();ea=0;Ca&&(ea=Ca.length);x.text(d.get("subRefCountInDsb","\u5f15\u7528\u8be5\u4e3b\u9898\u7684\u4eea\u8868\u677f\u4e2a\u6570\uff1a")+ea);R.empty();if(0<ea){ba=[];for(Y=0;Y<ea;Y++){ba[Y]=$("<div>");ba[Y].addClass("tm-themeDetail-refChild");var Ka=Ca[Y],Za=$("<span class='tm-themeDetail-schemaIcon'>");Za.css({"margin-left":"0px"});$a.background(Za,"btn-dsb");var Ta=$("<div class ='tm-themeDetail-inlineText'>");Ta.text(Ka);Ta.attr("title",Ka);Za.appendTo(ba[Y]);Ta.appendTo(ba[Y])}Ca=
d.get("subRefInDsb","\u5f15\u7528\u8be5\u4e3b\u9898\u7684\u4eea\u8868\u677f ");ia(R,ba,Ca)}else ba=$("<div>"),ba.addClass("tm-themeDetail-notHaveContent"),ba.text(d.get("currentSubjectIsNotReferencedTemporarily","\u5f53\u524d\u4e3b\u9898\u6682\u672a\u88ab\u5f15\u7528")),ia(R,[ba],d.get("subRefInDsb","\u5f15\u7528\u8be5\u4e3b\u9898\u7684\u4eea\u8868\u677f"))}else g.getThemeType()==va.THEMETYPE_DASHBOARD&&(Ca=ba.getCreateDate(),Y=ba.getModifyDate(),Ca&&I.text(d.get("createTime","\u521b\u5efa\u65f6\u95f4\uff1a")+
Ca.substring(0,19)),Y&&D.text(d.get("modifyTime","\u4fee\u6539\u65f6\u95f4\uff1a")+Y.substring(0,19)))},Pa={0:d.get("appMenu","\u5e94\u7528\u83dc\u5355"),1:d.get("qingAnalysisCenter","\u6570\u636e\u5de5\u4f5c\u53f0\u9605\u89c8\u5939"),2:d.get("lapp","\u79fb\u52a8\u8f7b\u5e94\u7528"),5:d.get("cardRepository","\u5361\u7247\u5e93")},Qa={0:d.get("cloudHub","\u4e91\u4e4b\u5bb6"),1:d.get("enterpriseWeChat","\u4f01\u4e1a\u5fae\u4fe1"),3:d.get("dingDing","\u9489\u9489"),"-1":d.get("email","\u90ae\u4ef6")},
Ya={Daily:d.get("Daily","\u6bcf\u5929"),Weekly:d.get("Weekly","\u6bcf\u5468"),Monthly:d.get("Monthly","\u6bcf\u6708"),Custom:d.get("Custom","\u81ea\u5b9a\u4e49")},ab={realTime:d.get("realTime","\u5b9e\u65f6\u63d0\u53d6"),timing:d.get("timing","\u5b9a\u65f6\u9884\u63d0\u53d6")},hb=function(ba,Ca,ea){if(ba&&0!=ba.length){var Y=ba[0],Ka=ba.length,Za=d.get("authorized","\u6388\u6743")+ea+Y;1==Ka?Ca.text(Za):Ca.text(Za+d.get("etc","\u7b49")+Ka+d.get("one","\u4e2a")+ea.substring(0,ea.length-1));for(ea=
1;ea<Ka;ea++)Y=Y+"\u3001"+ba[ea];Ca.attr("title",Y)}else ba=d.get("notSelect","\u672a\u9009\u62e9")+ea.substring(0,ea.length-1),Ca.text(d.get("authorized","\u6388\u6743")+ea+ba),Ca.attr("title",ba)},Na=function(ba,Ca){var ea=Ca.length;aa.empty();if(0<ea){var Y=[],Ka=[];A=[];for(var Za=0;Za<ea;Za++){var Ta=Ca[Za];if(ba&&ba.hasOwnProperty(Ta.getId())){var ib=new ra;ib.fromJsonObject(ba[Ta.getId()]);Ta.setName(ib.getAnalysisName());Ta.setPathText(ib.getDirectoryName());Ta.setViewType(ib.getViewType())}Ka[Za]=
$("<div>");Ka[Za].addClass("tm-themeDetail-pBox");ib=$("<span class='tm-themeDetail-schemaIcon'>");Y[Za]=$("<div>");var jb=Ta.getPublishTargetType();g.getThemeType()==va.THEMETYPE_SUBJECT?(jb=jb==U.CARD_REPOSITORY||Ta.getViewType()==la.VIEW_TYPE_SQUARE?"btn-square":"btn-analysis",$a.background(ib,jb)):g.getThemeType()==va.THEMETYPE_DASHBOARD&&$a.background(ib,"btn-dsb");Y[Za].addClass("tm-themeDetail-child");jb=$("<li>");jb.addClass("tm-themeDetail-grandSon");var yb=$("<li>");yb.addClass("tm-themeDetail-grandSon");
var Cb=$("<li>");Cb.addClass("tm-themeDetail-grandSon");var Bb=$("<li>");Bb.addClass("tm-themeDetail-grandSon");var Db=Pa[Ta.getPublishTargetType()];jb.text(d.get("publishTo","\u53d1\u5e03\u5230\uff1a")+Db);jb.attr("title",Db);Db=Ta.getPathText();Ta.setPathText(Db);yb.text(d.get("publishPath","\u53d1\u5e03\u8def\u5f84\uff1a")+Ta.getPathText().trim());yb.attr("title",Ta.getPathText());Db=Ta.getRoles();var G=Ta.getUsers();hb(Db,Cb,d.get("role","\u89d2\u8272\uff1a"));hb(G,Bb,d.get("user","\u7528\u6237\uff1a"));
Y[Za].append(jb);Y[Za].append(yb);Y[Za].append(Cb);Y[Za].append(Bb);A[Za]=$("<div>");A[Za].addClass("tm-themeDetail-refDetail");A[Za].attr("title",Ta.getName());ia(A[Za],[Y[Za]],Ta.getName(),ib)}ia(aa,A,d.get("pubDetail","\u53d1\u5e03\u8be6\u60c5"))}else ba=$("<div>"),ba.addClass("tm-themeDetail-notHaveContent"),g.getThemeType()==va.THEMETYPE_DASHBOARD?ba.text(d.get("currentDashboardIsNotPublishTemporarily","\u5f53\u524d\u4eea\u8868\u677f\u6682\u672a\u53d1\u5e03")):ba.text(d.get("currentSubjectIsNotPublishTemporarily",
"\u5f53\u524d\u4e3b\u9898\u6682\u672a\u53d1\u5e03")),ia(aa,[ba],d.get("pubDetail","\u53d1\u5e03\u8be6\u60c5"))},ub=function(ba){var Ca=r.createFacade(function(ea){var Y=new S;Y.fromJsonObject(ea);Da(Y);var Ka=Y.getPubDetail(),Za=Ka.length;K.text(d.get("pubNumber","\u53d1\u5e03\u6b21\u6570\uff1a")+Za);var Ta=[],ib=[];for(ea=0;ea<Za;ea++)if(Ka[ea]){var jb=Ka[ea];jb.getPublishTargetType()==U.MOBILE&&Ta.push(jb.getId())}0==Ta.length?Na(null,Ka):C.loadHandoverDirName(J.getFunPublishRemoteImpl()(),Ta,ib,
function(Bb){Bb&&Na(Bb,Ka)},function(){},!0);Y=Y.getPushDetail();Za=Y.length;P.text(d.get("pushNumber","\u5b9a\u65f6\u63a8\u9001\u914d\u7f6e\u6570\uff1a")+Za);X.empty();if(0<Za){Ta=[];ja=[];for(ea=0;ea<Za;ea++){Ta[ea]=$("<div>");ib=Y[ea].getName();Y[ea].getNameRule()&&(ib=ib+"-"+d.get("dateOfSystem","\u7cfb\u7edf\u65e5\u671f"));Ta[ea].addClass("tm-themeDetail-refDetail");jb=$("<li>");jb.addClass("tm-themeDetail-pushChild");var yb=$("<li>");yb.addClass("tm-themeDetail-pushChild");var Cb=Y[ea].getPushSchedule();
jb.text(d.get("pushSchedule","\u63a8\u9001\u9891\u7387\uff1a")+Ya[Cb]);Cb=Y[ea].getTarget();yb.text(d.get("pushMethod","\u63a8\u9001\u65b9\u5f0f\uff1a")+Qa[Cb]);Ta[ea].append(jb);Ta[ea].append(yb);ja[ea]=$("<div>");ja[ea].addClass("tm-themeDetail-refDetail");Ta[ea].children().attr("title","");ja[ea].attr("title",ib);ia(ja[ea],[Ta[ea]],ib)}ia(X,ja,d.get("pushDetail","\u5b9a\u65f6\u63a8\u9001\u914d\u7f6e\u8be6\u60c5"))}else ea=$("<div>"),ea.addClass("tm-themeDetail-notHaveContent"),g.getThemeType()==
va.THEMETYPE_DASHBOARD?ea.text(d.get("currentDashboardIsNotConfiguredForPublishTemporarily","\u5f53\u524d\u4eea\u8868\u677f\u6682\u672a\u914d\u7f6e\u5b9a\u65f6\u63a8\u9001")):ea.text(d.get("currentSubjectIsNotConfiguredForPublishTemporarily","\u5f53\u524d\u4e3b\u9898\u6682\u672a\u914d\u7f6e\u5b9a\u65f6\u63a8\u9001")),ia(X,[ea],d.get("pushDetail","\u5b9a\u65f6\u63a8\u9001\u914d\u7f6e\u8be6\u60c5"))},function(ea){if(1010004==ea){a.closePanel();ea=ya.createFeedbackDialog();ea.setOptionType(ya.OPTION_OK);
ea.setMsgImageType(ya.MSG_DELETE);var Y=d.get("themeNotFound","\u5bf9\u5e94#1\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002");g.getThemeType()==va.THEMETYPE_SUBJECT?ea.setMessage(Y.replace("#1",d.get("subject","\u4e1a\u52a1\u4e3b\u9898"))):ea.setMessage(Y.replace("#1",d.get("dashboard","\u4eea\u8868\u677f")));ea.setClosingChecker(function(Ka){return!0});ea.showDialog();return!0}return!1});Ca.setShowBlocking(!0);Ca.setBlockingJqUi(m);Ca.getThemeDetail(ba,g.getThemeType())};this.closePanel=
function(){t&&(m&&m.remove(),t=!1,m=null,T&&T(),u&&u())};var eb=function(){var ba=$("<div>");ba.addClass("tm-themeDetail-closeTab");var Ca=$("<div>");Ca.text(d.get("close","\u5173\u95ed"));Ca.css("margin-top","4px");Ca.appendTo(ba);ba.on("click",function(){a.closePanel()});ba.appendTo(m)}}function xb(){var a,m=[],g={},q,r,u,T,ca;this.getJqUi=function(){a||D();return a};this.setFunCloseSearchResultPanel=function(v){r=v};this.refresh=function(){var v=a.find(".sa-ctrl-list-owner");v.empty();v.css("top",
"40px");for(var E=$(document.createDocumentFragment()),K=O,P=0;P<m.length;P++){var x=$("<div>");x.addClass("sa-ctrl-list-item");x.addClass("sa-ctrl-list-item_enabled");x.addClass("sa-ctrl-list-item-defaultlayout");var R=m[P];x.data("model",R);K(x,R);E.append(x)}v.append(E);0==m.length&&(E=v.append,K=$("<div>"),K.addClass("theme-search-no-result"),P=$("<div>"),$a.background(P,"no-data"),P.css("transform","scaleX(0.85) scaleY(0.85)"),b.layoutCtrl(P,null,null,280,230),u=$("<div>"),u.text(d.get("nodata",
"\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c")),b.layoutCtrl(u,"19%","78%",null,null),P.appendTo(K),u.appendTo(K),b.layoutCtrl(K,"14%","27%",280,270),E.call(v,K),140<u[0].clientWidth&&b.layoutCtrl(u,"6.5%","78%",null,null))};var D=function(){a=$("<div>");a.addClass("theme-search-lists");a.css({"float":"right",right:"0px",height:"97%",width:"300px",position:"absolute",top:"45px",background:"white","z-index":"99999"});T||(T=new Ea,T.scrollSelectedToVisible(),T.setCustomItemPainter(O),
T.addSelectedChangedListener(I),T.setUserObject(m),T.setItemModels(m));var v=T.getJqUi();v.find(".sa-ctrl-list-owner").css({top:"40px",bottom:"60px","overflow-x":"hidden"});a.append(v);v=$("<div>");v.addClass("theme-search-close");v.css({bottom:"20px",width:"100px",height:"28px",position:"absolute",left:"50%","margin-left":"-50px","font-size":"14px",color:"white","text-align":"center","line-height":"20px","border-radius":"2px","margin-bottom":"10px",cursor:"pointer"});var E=$("<div>");E.text(d.get("close",
"\u5173\u95ed"));E.css("margin-top","3px");E.appendTo(v);v.on("click",function(){r&&r()});a.append(v)};this.setSearchText=function(v){q=v};this.setThemeGroupIDNameMap=function(v){g=v};this.setFunItemSelectedListener=function(v){ca=v};this.setArrItemModel=function(v){m=v};var I=function(v,E,K){K&&0<K.length&&(v=K[0],ca&&ca(v))},O=function(v,E){v.addClass("theme-search-item");v.css({width:"290px",height:"68px","border-bottom":"1px solid #E2E7EF",left:"6px",top:"6px"});var K=$("<div>");K.addClass("theme-search-item-theme-type");
var P="icon_subject";"icon-card-dsb"==da.getInstance(E.getThemeType()).getIconFileName()&&(P="icon_dsb");$a.background(K,P);K.css({position:"absolute",height:"17px",width:"17px",top:"3px"});P=$("<div>");P.addClass("theme-search-item-theme-name");P.css({"font-size":"14px",color:"black",width:"160px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","margin-left":"23px"});P.attr("title",E.getThemeName());var x=$("<div>");x.text(g[E.getThemeGroupID()]);x.addClass("theme-search-item-theme-group-name");
x.css({width:"100px",position:"absolute",right:"7px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",top:"0px",padding:"0px, 10px, 0px, 10px"});x.attr("title",g[E.getThemeGroupID()]);var R=$("<div>"),aa=E.getThemeDescription();aa&&45<aa.length&&(aa=aa.substring(0,45)+"...");R.addClass("theme-search-item-theme-desc");R.css({width:"280px",position:"absolute","white-space":"normal",top:"22px",height:"40px","word-wrap":"break-word"});R.attr("title",E.getThemeDescription());v.append(K);
v.append(P);v.append(x);v.append(R);q&&(y(P,E.getThemeName(),q),y(R,aa,q));v.on("click",function(X){T.setSelecteds([])})},y=function(v,E,K){if(v&&E&&K){K=K.toUpperCase();var P=E.toUpperCase(),x=P.split(K),R=K.length,aa;for(aa in x){var X=P.indexOf(x[aa]),A=E.substr(0,x[aa].length);X+=x[aa].length;var ja=P.length-X;P=P.substr(X,ja);E=E.substr(X,ja);X=$("<span>");X.text(A);X.appendTo(v);aa!=x.length-1&&1<x.length&&(X=P.indexOf(K),A=E.substr(X,R),X+=R,ja=P.length-X,P=P.substr(X,ja),E=E.substr(X,ja),
X=$("<span>"),X.text(A),X.css("color","red"),X.clone().appendTo(v))}}}}function Ab(){var a=350,m=250,g=6,q=!1,r,u;this.setDuration=function(T,ca){a=T;m=ca};this.setTimes=function(T,ca){g=2*T+(ca?1:0);q=ca};this.setAction=function(T){r=T};this.blink=function(T,ca,D){if(0>=g)throw Error("Illegal usage");clearTimeout(u);var I=function(){if(0==g)r&&r();else{if(g%2==(q?0:1)){T.addClass(ca);var O=a}else T.removeClass(ca),T.addClass(D),O=m;u=setTimeout(I,O);g--}};I()}}function Fa(){var a=[],m,g,q,r=!1,u=
!1,T;this.getDragUsing=function(){return u};this.setJqArrTarget=function(v){a=v};this.addJqTarget=function(v){ca(v);a.push(v)};this.setJqParentUi=function(v){m=v;m.on("mouseenter",function(E){r=!0});m.on("mouseleave",function(E){r=!1})};this.setFunDragDropListener=function(v){T=v};this.init=function(){if(0<a.length)for(var v in a)ca(a[v])};var ca=function(v){v.attr("onselectstart","return false");v.on("mousedown",function(E){u=!0;g=E.currentTarget;$(g).css("cursor","move");$(g).parent().children(".theme-card-selected").css("cursor",
"");$(g).parent().children(".theme-order-choose").removeClass("theme-order-choose");$(g).addClass("theme-order-choose");document.onmousemove=function(K){r||(document.onmousemove=null,document.onmouseup=null,u&&D())};document.onmouseup=function(K){document.onmousemove=null;document.onmouseup=null;u&&D()}});v.on("mouseenter",function(E){if(u){q=E.currentTarget;E=g;var K=q;if(E&&K&&E!=K){var P=E.offsetLeft<K.offsetLeft&&E.offsetTop<=K.offsetTop||E.offsetTop<K.offsetTop?!0:!1;I(E,K);I(K,E,E,K,O,P)}}});
v.on("mouseup",function(E){u&&D()})},D=function(){var v=!1;g&&q&&((v=$(g).is(":animated")||$(q).is(":animated"))?setTimeout(D,300):T&&T());v||(u=!1,q=g=null)},I=function(v,E,K,P,x,R){var aa=v.getBoundingClientRect(),X=E.getBoundingClientRect();v=aa.left-X.left;aa=aa.top-X.top;$(E).is(":animated")?x&&x(K,P,R):x&&$(E).animate({left:v+"px",top:aa+"px"},300,"swing",function(){x(K,P,R)})},O=function(v,E,K){K?$(v).insertAfter($(E)):$(v).insertBefore($(E));y(v);y(E)},y=function(v){v&&($(v).is(":animated")&&
$(v).stop(!0,!0).animate(),v.style.left="0px",v.style.top="0px")}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.theme&&(com.kingdee.bos.qing.theme={});"undefined"==typeof com.kingdee.bos.qing.theme.ui&&(com.kingdee.bos.qing.theme.ui={});var vb=com.kingdee.bos.qing.theme.ui;vb.Main=function(){var a,
m,g,q,r,u,T,ca,D,I=[],O=[],y=[],v=[],E=[],K=[],P={},x=!1,R=!1,aa=!1,X,A,ja,t,C,U,la,Oa,Ra,ia,Da,Pa,Qa=0,Ya,ab,hb,Na,ub,eb,ba,Ca=!1,ea,Y=com.kingdee.bos.qing.CodeLoader,Ka=new function(){var e;this.getAllGroupModel=function(){for(var k=[],n=0;n<y.length;n++)k.push(y[n].getThemeGroupModel());return k};this.getMessageCurtain=function(){e||(e=new na,e.getJqUi().appendTo($("body")));return e};this.createFacade=function(k,n,F){var ha=J.getRemoteImpl();return new db(ha,k,function(ta,Xa,lb){return n?n(ta,
Xa,lb):!1},F)};this.createCloudLappFacade=function(k,n,F){return new qb("lappAnalysisMgr",k,n,F)};this.createResourceFacade=function(k,n,F){var ha=J.getResourceRemoteImpl();return new db(ha,k,function(ta,Xa){return n?n(ta,Xa):!1},F)};this.getFunDataModelEntrance=function(){return J.getDataModelEntrance()}};this.createJqUi=function(){Y.loadJs("biz-common/qing-biz-common.js");Y.loadSkinCss("biz-common","biz-common");Y.loadSkinJs("biz-common","skin");Y.loadI18n("biz-common","biz-common");Y.loadSkinJs("scene",
"skin");Y.loadI18n("scene","scene");Y.loadJs("common/qing-schedule.js");Y.loadI18n("common","qing-schedule");Y.loadSkinCss("publish","qing-publish");Y.loadSkinCss("schema-manage","schema-manage");Y.loadSkinJs("publish","skin");Y.loadSkinJs("schema-manage","skin");Y.loadI18n("publish","publish");Y.loadJs("schema-manage/schema-manage-initialize.js");Y.loadJs("schema-manage/schema-manage-ui.js");Y.loadJs("publish/qing-publish.js");Y.loadSkinCss("timedpush","qing-timedpush");Y.loadSkinJs("timedpush",
"skin");Y.loadI18n("timedpush","timedpush");Y.loadJs("timedpush/qing-timedpush.js");Y.loadJs("lightapp/common/qing-lapp-env.js");Y.loadJs("timedpush/qing-timedpush-lapp.js");Y.loadJs("core/qing-charts.js");Y.loadJs("core/qing-main.js");Y.loadJs("dashboard/dsb-main.js");Y.loadI18n("core","qing-core");Y.loadSkinJs("imagelib","skin");Y.loadI18n("dashboard","dsb-integration");Y.loadSkinCss("imagelib","qing-imagelib");Y.loadJs("imagelib/imagelib.js");Y.loadI18n("imagelib","imagelib");Y.loadSkinJs("dashboard",
"skin-dsb-integration");Y.loadJs("dashboard/dsb-integration.js");Y.loadSkinCss("dashboard","dsb-integration");Y.loadSkinJs("linkage","skin");Y.loadJs("linkage/linkage.js");Y.loadSkinCss("linkage","linkage");a=$("<div>");a.addClass("theme-manage");u=$("<div>");u.addClass("theme-manage-toolbar");Ra=Eb(u,!1,Xb,"btn_newCard",d.get("create","\u65b0\u5efa"),d.get("create","\u65b0\u5efa"));Ra.getJqUi().css("margin-left","12px");var e=$("<input type='file' id='uploadBtn'>");e.addClass("import-theme-file");
e.attr("accept",[".qing-pkg",".qing-theme-pkg"]);e.on("change",function(F){if(F=a.find("#uploadBtn").get(0).files[0]){var ha=F.name,ta=F.size,Xa=ha.lastIndexOf(".");ha=ha.substring(Xa+1,ha.length).toLowerCase();a.find("#uploadBtn").val("");"qing-pkg"!=ha&&"qing-theme-pkg"!=ha?Ka.getMessageCurtain().showPrompt(d.get("fileTypeIncorrect","\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002"),2E3):0==ta?Ka.getMessageCurtain().showPrompt(d.get("uploadFileIsNull","\u4e0a\u4f20\u7684\u6587\u4ef6\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002"),
2E3):104857600<=ta?Ka.getMessageCurtain().showPrompt(d.get("fileTooLarge","\u6587\u4ef6\u592a\u5927\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002"),2E3):(ta=new f,ta.createJqUi(F,Ka,Ka.getMessageCurtain()),ta.setFunRefreshThemeGroupList(Lb))}e.val("")});e.appendTo(a);ia=new Wa;ia.setText(d.get("importTheme","\u5bfc\u5165"));ia.setIconSetter(function(F,ha){$a.background(F,ha)});ia.setIconName("btn_import");ia.setTooltips(d.get("importThemeOrDashboard","\u5bfc\u5165\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f"));
ia.getJqUi().on("click",function(){e.click()});ia.getJqUi().appendTo(u);ia.getJqUi().attr("accept",[".qing-pkg",".qing-theme-pkg"]);Da=Eb(u,!1,Yb,"btn_export",d.get("exportTheme","\u5bfc\u51fa"),d.get("exportThemeOrDashboard","\u5bfc\u51fa\u4e1a\u52a1\u4e3b\u9898/\u4eea\u8868\u677f"));Pa=Zb(u);_oResourcesToolbarButton=Eb(u,!1,$b,"btn_resourcesLimit",d.get("resources","\u8d44\u6e90\u9650\u989d"),d.get("resources","\u8d44\u6e90\u9650\u989d"));ac(u);var k=$("<div>");k.addClass("theme-search-icon");k.attr("title",
d.get("search","\u641c\u7d22"));$a.backgroundWithHover(k,"icon_search");k.on("mouseenter",function(){ib()&&0<E.length?jb(E):!ib()&&0<K.length?jb(K):Bb()});var n=bc();Qa=Za(n,k);k.appendTo(u);n.appendTo(u);u.appendTo(a);Ta();k=new gb;k.setCallbackImmediately(function(){Ta();q&&X&&q&&q.css({width:La()+"px"});ea&&ea.setMessageDialogBounds(null,5,10,null)});k.setDelay(250);k.observe();hb=$("<div>");cc();ba=$("<div>");eb.setFirstChild(wa.createChildWrapper(hb,function(){ba&&ba.css({width:document.documentElement.clientWidth-
eb.getNonemptyFirstWide()+"px"});q&&q.css({width:document.documentElement.clientWidth-X.getNonemptyFirstWide()-ba.width()-15+"px"})}));eb.setSecondChild(wa.createChildWrapper(ba));Kb();eb.getJqSplitLine().addClass("tm-themeDetail-splitPaneLine");hb.addClass("theme-manage-container");dc(hb);m=ec();q=fc();X.setFirstChild(wa.createChildWrapper(m,function(){m&&m.css({width:X.getNonemptyFirstWide()+"px"});q&&q.css({width:document.documentElement.clientWidth-X.getNonemptyFirstWide()-15+"px"})}));X.setSecondChild(wa.createChildWrapper(q));
Mb(null);la||(la=new Fa,la.setJqParentUi(q),la.setFunDragDropListener(yb));return a};var Za=function(e,k){var n=50;e=Q.getUrlParamValue("language");null!=e&&-1==e.indexOf("zh")&&(n=80);Y.setCallback(function(){var F=com.kingdee.bos.qing.message.common.Integration;F.setRemoteUrl(J.getMessageRemoteUrl());F.setImportJSCodeForManager(J.getImportJSCodeForManager());F.setAppId(J.getAppId());ea=new com.kingdee.bos.qing.message.ui.Main;ea.setFunOpenMessageDialog(function(){ea.setViewSize(null,5,10,null)});
ea.setMessageWidth(n);F=ea.getJqUi();F.css({position:"absolute","float":"right",top:"50%","margin-top":"-9px",right:"10px"});Oa.getJqUi().css("right",n+20+"px");var ha=parseInt(k.css("right").replace("px",""));ha+=n;k.css("right",ha+"px");F.appendTo(u)});Y.loadSkinCss("message","message");Y.loadSkinJs("message","skin");Y.loadJs("message/message-manage-ui.js");Y.loadI18n("message","message");return n},Ta=function(){document.body.style.height=document.documentElement.clientHeight+"px"},ib=function(){var e=
d.get("myCategory","\u6211\u7684\u5206\u7c7b"),k;U&&(k=U.getSelected());return k&&e!=k?!0:!1},jb=function(e){if(!x){x=!0;var k=Ka.createFacade(function(n){var F=v,ha=[];ib()?(F=O,E=[]):K=[];for(var ta=0;ta<n.length;ta++){var Xa=va.createInstance(n[ta]);F.push(Xa);ha.push(Xa.getThemeGroupID())}y.forEach(function(lb){-1!=ha.indexOf(lb.getThemeGroupModel().getThemeGroupID())&&lb.getThemeGroupModel().setHasData(!0)});I.forEach(function(lb){-1!=ha.indexOf(lb.getThemeGroupModel().getThemeGroupID())&&lb.getThemeGroupModel().setHasData(!0)});
Bb();x=!1},function(n,F){return x=!1});k.setShowBlocking(!1);k.getAllThemes(e)}},yb=function(){if(q){for(var e=[],k=q.children(".theme-card"),n=0,F=k.length;n<F;n++){var ha=new va;ha.setThemeID(k[n].id);ha.setOrderID(n);e.push(ha.toJsonObject());Cb(k[n].id)}0<e.length&&(k=Ka.createFacade(function(ta){return!0},function(ta,Xa){return!1}),k.setShowBlocking(!1),k.saveOrderTheme(e))}},Cb=function(e){for(var k in v)if(v[k].getThemeID()==e){e=v[k];v.splice(k,1);v.push(e);break}},Bb=function(e){D?D.css("display",
"block"):(D=$("<div>"),t=new cb,t.setSearchListenerDelay(1E3),t.addSearchListener(M),t.setAlwaysShowCleanIcon(!0),t.setShowSearchIcon(!0),t.setPlaceholder(d.get("hostSearchContent","\u641c\u7d22\u540d\u79f0/\u63cf\u8ff0")),e=t.getJqUi(),e.addClass("theme-search-box"),e.find(":input").on("keydown",function(n){13==(n.keyCode||n.which||n.charCode)&&M()}),e.appendTo(D),D.appendTo(u),0!=Qa&&(e=parseInt(t.getJqUi().css("right").replace("px","")),e+=Qa,t&&t.getJqUi().css("right",e+"px")));t.setFoucs();var k=
function(n){var F=$(document.body).children(".sa-ctrl-common-popup");for(n=n.target;n!=document.body;){if(n==D[0]||Oa&&n==Oa.getJqUi()[0]||q&&n==q[0]||F&&n==F[0]||C&&n==C.getJqUi()[0])return;n=n.parentNode}D.css("display","none");C&&Ga(!1);document.body.removeEventListener("mousedown",k,!0)};document.body.addEventListener("mousedown",k,!0)},Db=function(){C&&Ga(!1)},G=function(e,k){var n=[];if(e==rb.ALLTYPE)n=k;else for(var F in k)k[F].getThemeType()==e&&n.push(k[F]);return n},M=function(){var e=ib()?
G(Fb,O):G(Fb,v);var k=0;C||(C=new xb,C.setFunCloseSearchResultPanel(Db),C.setFunItemSelectedListener(fb),C.setThemeGroupIDNameMap(P),C.getJqUi().appendTo(a));ca||(ca=$("<div>"),ca.addClass("theme-search-total-records"),ca.text(d.get("searchTotalRecords","\u5171\u627e\u5230\u201c#1\u201d\u4e2a\u7ed3\u679c").replace("#1",k)),ca.css({"margin-top":"16px","margin-left":"10px",height:"20px",width:"300px","border-bottom":"2px solid rgb(226, 231, 239)"}),ca.appendTo(C.getJqUi()));Ga(!0);k=[];var n;t&&(n=
t.getText());if(n&&n.trim()){n=n.trim();C.setSearchText(n);n=n.toUpperCase();for(var F in e)(-1<e[F].getThemeName().toUpperCase().indexOf(n)||e[F].getThemeDescription()&&-1<e[F].getThemeDescription().toUpperCase().indexOf(n))&&k.push(e[F]);C.setArrItemModel(k);k=k.length;ca.text(d.get("searchTotalRecords","\u5171\u627e\u5230\u201c#1\u201d\u4e2a\u7ed3\u679c").replace("#1",k));C.refresh()}else Ga(!1)},Ga=function(e){e?(Na&&Na.isOpen()&&Na.closePanel(),C.getJqUi().show(),Ca=!0):(C.getJqUi().hide(),Ca=
!1);e=La(e);q.css("width",e+"px")},La=function(e){var k=document.documentElement.clientWidth-m.width()-15;C&&(e||"block"==C.getJqUi().css("display"))&&(k-=C.getJqUi().width());Na&&Na.isOpen()&&(k-=eb.getNonemptySecondWide());return k},fb=function(e){var k=e.getThemeGroupID();(k=sb(k).getJqUi())&&k.click();var n=$("#"+e.getThemeID());nb("theme-container",n);e=new Ab;e.setTimes(2,!0);e.blink(n,"theme-twinkle-high-light","theme-card-selected");e.setAction(function(){n.parent().children(".theme-card-selected").removeClass("theme-card-selected");
n.parent().children(".theme-order-choose").removeClass("theme-order-choose");n.addClass("theme-card-selected")})},nb=function(e,k){document.querySelector("."+e).scrollTop=k.prop("offsetTop")},sb=function(e){var k=y;ib()&&(k=I);if(!k||0!=k.length)for(var n in k)if(e==k[n].getThemeGroupModel().getThemeGroupID())return k[n]},rb={SUBJECT:0,DASHBOARD:1,ALLTYPE:2},Fb=rb.ALLTYPE,bc=function(){var e=[d.get("allType","\u5168\u90e8\u7c7b\u578b"),d.get("subject","\u4e1a\u52a1\u4e3b\u9898"),d.get("dashboard",
"\u4eea\u8868\u677f")];Oa=new H;Oa.setItemModels(e);Oa.setSelected(e[0]);Oa.setCustomPainter(function(k,n,F){n.text(F)});Oa.addSelectedChangedListener(function(k,n,F){Fb=F==d.get("subject","\u4e1a\u52a1\u4e3b\u9898")?rb.SUBJECT:F==d.get("dashboard","\u4eea\u8868\u677f")?rb.DASHBOARD:rb.ALLTYPE;k=g.children(".theme-group-selected");0<k.length&&(k.removeClass("theme-group-selected"),k.click());C&&"block"==C.getJqUi().css("display")&&M()});e=Oa.getJqUi();e.addClass("theme-searchtype-combobox");return e},
Zb=function(e){var k=Ka.createFacade(function(n){aa=n},function(n,F){return!1});k.setShowBlocking(!1);k.isCurrentUserInQingAdminRole();k=d.get("manager","\u7ba1\u7406");return Eb(e,!0,gc,"btn_manage",k,k)},gc=function(){var e=com.kingdee.bos.qing.ui.component.MenuItemModel,k=new com.kingdee.bos.qing.ui.component.MenuModel,n,F=new e(function(){n||(n=J.getFunPublishContext()());var ha=com.kingdee.bos.qing.publish.common.PublishManagerDialog,ta=J.getFunPublishRemoteImpl()(),Xa=n;var lb=J.getFunPublishContentEditEntrance()();
(new ha(ta,Xa,lb,!1,R)).showDialog()});F.setUserObject();F.setText(d.get("publishManager","\u53d1\u5e03\u7ba1\u7406")+"...");k.addItemModel(F);Y.setCallback(function(){J.getFunSetLappPrivateUrl()()});F=new e(function(){n||(n=J.getFunPublishContext()());var ha=new com.kingdee.bos.qing.publish.common.PushManager(J.getFunTimedPushContentEditEntrance()()),ta=com.kingdee.bos.qing.timedpush;ha.registerEmailPushPanelConstructor(ta.EmailConfigManagePanel);ha.initEmailPushConfig(J.getFunPublishRemoteImpl()(),
J.getFunPublishedEmailAnonymousViewUrl()(),J.getFunPublishedEmailLoginViewUrl()());ha.registerLappPushPanelConstructor(ta.LappPushManagePanel);ha.initLappPushConfig(function(Xa,lb,wb){return com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,J.getFunPublishRemoteImpl()(),Xa,lb,wb)},n);ha.showDialog()});F.setUserObject();F.setText(d.get("pushManager","\u5b9a\u65f6\u63a8\u9001\u7ba1\u7406")+"...");k.addItemModel(F);R||(k.addSeperator(),
F=new e(hc),F.setUserObject(),F.setText(d.get("permLabelManage","\u6743\u9650\u6807\u7b7e\u7ba1\u7406")+"..."),k.addItemModel(F));aa&&(k.addSeperator(),e=new e(function(){var ha=J.getParamPathPrefix();ha=(ha?ha:"/ierp")+"/qing/managementHandOverEntrance.do";var ta=B.getUrlParamValue();ta&&(ha=p.appendParamToUrl(ha,"skin",ta));(ta=Q.getUrlParamValue("language"))&&(ha=p.appendParamToUrl(ha,"language",ta));ta=d.get("qingManagementHandOver","\u8f7b\u5206\u6790\u7ba1\u7406-\u79fb\u4ea4");com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(ta,
ha)}),e.setText(d.get("handOver","\u79fb\u4ea4...")),k.addItemModel(e));return k},hc=function(){var e=new com.kingdee.bos.qing.publish.permission.PermLabelManageDialog(J.getFunPublishRemoteImpl()());e.setSpaceID(Q.getUrlParamValue("qingID"));e.showDialog()},ac=function(e){var k=d.get("refresh","\u5237\u65b0");Eb(e,!1,function(){var n;A&&(n=A.getThemeGroupName());Lb(n)},"btn_refreshThemeGroup",k,k)},Eb=function(e,k,n,F,ha,ta){var Xa=new Wa;Xa.setIconSetter(function(lb,wb){$a.background(lb,wb)});Xa.setIconName(F);
Xa.setText(ha);Xa.setTooltips(ta);k&&Xa.setShowDropdownArrow(!0);Xa.addActionListener(function(lb,wb){k?ic(lb.getJqUi(),wb,n,e):n(lb)});Xa.getJqUi().appendTo(e);return Xa},ic=function(e,k,n,F){var ha=e.data("menu");if(ha&&ha.isShowing())e.data("menu",null),ha.hide();else{ha=new com.kingdee.bos.qing.ui.component.Menu;ha.setModel(n());ha.setHideListener(function(){e.data("menu",null)});e.data("menu",ha);n=null==F?_jqCorePane:F;F=e.prop("offsetLeft");var ta=e.prop("offsetHeight")+e.prop("offsetTop");
ha.show(n,F,ta,k,!0)}},$b=function(){ja=new l;ja.setGlobal(Ka);ja&&ja.showResourceInfoDialog()},dc=function(e){X=new wa;X.setHorizontalSplit(!0);X.setEnabled(!0);X.setSplitLineWide(4);X.setResizeMode(wa.RESIZE_MODE_FIRST_FIXED);X.setFirstSize(230,200,640);X.setSecondSize($(document).width()-234,0,-1);X.getJqUi().addClass("sa-qing-publish-manager");e.append(X.getJqUi())},ec=function(){var e=$("<div>");e.addClass("theme-group-container");g=$("<div class='theme-group-all-list' />");g.appendTo(e);return e},
jc=function(){var e=[d.get("myCategory","\u6211\u7684\u5206\u7c7b"),d.get("presetCategory","\u9884\u7f6e\u5206\u7c7b")];U=new H;U.setItemModels(e);U.setSelected(e[0]);U.setCustomPainter(function(k,n,F){n.text(F)});U.addSelectedChangedListener(function(k,n,F){R=!1;F==d.get("presetCategory","\u9884\u7f6e\u5206\u7c7b")?(R=!0,k.getJqUi().prev().css("display","none"),Nb(!1)):(k.getJqUi().prev().css("display","block"),Nb(!0));Ob(R)});e=U.getJqUi();e.css({width:"45%",height:"47px","float":"left"});e.children(".sa-ctrl-combobox-text").css({width:"45%",
left:"20px"});e.children(".sa-ctrl-combobox-arrow").css("right","125px");return e},Nb=function(e){e?(Ra.getJqUi().css("display","block"),ia.getJqUi().css("display","block"),Da.getJqUi().css("display","block"),Pa&&Pa.getJqUi().css("margin-left","0px")):(Ra.getJqUi().css("display","none"),ia.getJqUi().css("display","none"),Da.getJqUi().css("display","none"),Pa&&Pa.getJqUi().css("margin-left","12px"))},Ob=function(e,k){g&&g.find(".theme-group-list").css("display","none");var n=y;e&&(n=I);if(n&&0<n.length){e=
k?k:n[0].getJqUi();for(var F in n)k=n[F].getJqUi(),k.appendTo(g),k.css("display","block");e&&$(e).click()}},cc=function(){var e=$("<div>");e.addClass("tm-themeDetail-jqThemeManageContainer");eb=new wa;eb.setHorizontalSplit(!0);eb.setEnabled(!0);eb.setSplitLineWide(4);eb.setResizeMode(wa.RESIZE_MODE_SECOND_FIXED);e.append(eb.getJqUi());e.appendTo(a)},fc=function(){var e=$("<div>");e.addClass("theme-container");var k=e.append;r=$("<div>");r.hide();r.addClass("theme-no-data-bg-container");var n=$("<div>");
$a.background(n,"group-theme-no-data");n.css({height:"140px",marginTop:"210px",backgroundSize:"contain",backgroundPosition:"center"});var F=$("<div>");F.css({marginTop:"21px",fontSize:"15px"});var ha=d.get("nodataTips","\u8bf7\u70b9\u51fb\u5de5\u5177\u680f\u3010\u65b0\u5efa\u3011\u6309\u94ae\uff0c\u65b0\u5efa\u4e1a\u52a1\u4e3b\u9898\u6216\u4eea\u8868\u677f");F.text(ha);r.append(n);r.append(F);k.call(e,r);return e},Mb=function(e){Ka.createFacade(function(k){Pb();clearInterval(ab);Ya&&Ya.remove();if(null==
k){var n=d.get("createCategoryFirst","\u60a8\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u5206\u7c7b\u3002");Ka.getMessageCurtain().showPrompt(n,2E3)}else{for(var F=0;F<k.length;F++){var ha=new Va;ha.fromJsonObject(k[F]);var ta=new ka(Ka,ha);ta.setFunThemeGroupItemClick(Qb);ta.setFunDeleteSuccessCallBack(Rb);ta.setFunMoveUpGroupItemCallBack(Sb);ta.setThemeGroupIDNameMap(P);P[ha.getThemeGroupID()]=ha.getThemeGroupName();ha.isPreset()?(I.push(ta),E.push(ta.getThemeGroupModel().getThemeGroupID())):(y.push(ta),
K.push(ta.getThemeGroupModel().getThemeGroupID()));e&&e==ha.getThemeGroupName()&&(n=ta.getJqUi())}T||(k=$("<div>"),k.addClass("theme-group-op"),F=$("<span>"),F.addClass("add-theme-group"),F.attr("title",d.get("addThemeGroup","\u6dfb\u52a0\u5206\u7c7b")),F.on("click",kc),$a.backgroundWithHover(F,"btn-add-classification"),F.appendTo(k),I&&0<I.length?F=jc():(F=$("<span>"),F.addClass("theme-group-title"),F.text(d.get("category","\u5206\u7c7b"))),T=F,T.appendTo(k),k.appendTo(m));k=ib();0<y.length&&Tb(y[0]);
Ob(k,n)}},function(k,n,F){Pb();clearInterval(ab);Ya&&Ya.remove();return 3001001==k?(k=d.get("databaseConnectionException","\u6570\u636e\u5e93\u8fde\u63a5\u5f02\u5e38\uff1a")+"\r\n",n&&(k+=n+"\r\n"),n=new ya,n.setOptionType(ya.OPTION_OK),n.setMessage(k),F&&n.setDetail(F),n.showDialog(),!0):!1}).getThemeGroupList();Ua.subscribeChannel("PresetSubject",Ub)},Pb=function(){Ua.unsubscribeChannel("PresetSubject",Ub)},Ub=function(e){if(1==JSON.parse(e)){$(document.body).find(".sa-common-loading-modallayer").remove();
Ya=$("<div>");Ya.addClass("sa-common-loading-modallayer");b.layoutCtrl(Ya,0,0,"100%","100%");e=$("<div class='tm-preset-container'>");var k=$("<div class='tm-presete-sub-container'>"),n=$("<div class='tm-preset-big-img'>");n.css("background-image",h.getIconUrl("common","htmlLoad/loading.gif"));var F=$("<div class='tm-preset-progress-img'>");F.css("background-image",h.getIconUrl("common","htmlLoad/sway.gif"));var ha=$("<span class='tm-preset-progress-text'>"),ta=d.get("initializing","\u8f7b\u5206\u6790\u6b63\u5728\u6267\u884c\u670d\u52a1\u521d\u59cb\u5316\uff0c\u6839\u636e\u60a8\u7684\u7f51\u7edc\u73af\u5883\uff0c\u8fc7\u7a0b\u53ef\u80fd\u6301\u7eed\u6570\u5341\u79d2\u5230\u51e0\u5206\u949f\uff0c\u8bf7\u7a0d\u4f5c\u7b49\u5f85\u3002");
ha.text(ta);var Xa=(new Date).getTime();ab=setInterval(function(){var lb=parseInt(((new Date).getTime()-Xa)/1E3),wb=parseInt(lb/60),zb=d.get("waitTime","\u5df2\u7b49\u5f85\uff1a");zb=0<wb?zb+wb+d.get("minute","\u5206")+(lb-60*wb)+d.get("second","\u79d2\u3002"):zb+lb+d.get("second","\u79d2\u3002");ha.text(ta+zb)},1E3);k.append(n);k.append(F);k.append(ha);e.append(k);e.appendTo(Ya);Ya.appendTo($(document.body))}},Lb=function(e){x=!1;y=[];K=[];v=[];I=[];E=[];O=[];g.find(".theme-group-list").remove();
Mb(e)},kc=function(){var e=new Va;e=new ka(Ka,e);e.setFunThemeGroupItemClick(Qb);e.setFunDeleteSuccessCallBack(Rb);e.setFunAddSuccessCallBack(lc);e.setFunMoveUpGroupItemCallBack(Sb);e.setThemeGroupIDNameMap(P);var k=e.getJqUi();k.appendTo(g);e.editGroupName();e=k.prop("offsetTop");k=window.innerHeight-150;e>k&&$(g).scrollTop(e-k)},Sb=function(e){var k=e.getJqUi(),n=y.indexOf(e);if(-1<n){k.insertBefore(k.prev());k=y[n-1];y.splice(n-1,2,e,k);for(var F=[],ha=0,ta=y.length;ha<ta;ha++){var Xa=y[ha].getThemeGroupModel();
Xa.setOrderID(ta-ha);F.push(Xa.toJsonObject())}0<F.length&&mc(F);1==n&&(k.getJqUi().children(".moveup-button").css("display",""),Tb(e))}},Tb=function(e){e.getJqUi().children(".moveup-button").css("display","none")},mc=function(e){var k=Ka.createFacade(function(n){},function(){});k.setShowBlocking(!1);k.saveOrderThemeGroup(e)},Qb=function(e,k){e.hasClass("theme-group-selected")||($(g).find(".theme-group-selected").removeClass("theme-group-selected"),e.addClass("theme-group-selected"),q.find(".theme-card").remove(),
Vb(k))},Rb=function(e){e=e.getThemeGroupID();for(var k=0,n=0;n<y.length;n++)if(e==y[n].getThemeGroupModel().getThemeGroupID()){y.splice(n,1);k=n;break}A&&A.getThemeGroupID()!=e||(y&&0<y.length?(k>y.length-1&&(k=y.length-1),$(y[k].getJqUi()).click()):A=null)},lc=function(e){y.push(e);$(e.getJqUi()).click()},Vb=function(e){A=e;var k=e.getThemeGroupID();if(ib()){var n=E.indexOf(k);if(-1==n){Wb(k,O,e);return}}else if(n=K.indexOf(k),-1==n){Wb(k,v,e);return}x||(x=!0,n=Ka.createFacade(function(F){var ha=
v;if(e.isPreset()){var ta=E.indexOf(k);-1<ta&&E.splice(ta,1);ha=O}else ta=K.indexOf(k),-1<ta&&K.splice(ta,1);ta=[];for(var Xa=0;Xa<F.length;Xa++){var lb=va.createInstance(F[Xa]);ha.push(lb);ta.push(lb)}0<ta.length&&e.setHasData(!0);if(e.hasData())for(Xa in r.hide(),ta=G(Fb,ta),ta)F=Hb(ta[Xa]),F.appendTo(q),ta[Xa].isPreset()||la.addJqTarget(F);else r.show();x=!1},function(F,ha){return x=!1}),n.setShowBlocking(!0),n.getTheme(k))},oc=function(e,k){Na||(Ca&&Ga(!1),Na=new tb,Na.adjustCardContainer(Kb),
Na.setCollapseListener(nc),eb.setFirstSize($(document).width()-310,-1,-1),window.addEventListener("resize",function(){Na.isOpen()?eb.collapseSecondHalf(!1):eb.hideSecondHalf(!0)}));eb.clearState();eb.setSecondSize(300,300,500);if(Na.isOpen()){if(e.getThemeID()==ub){Na.closePanel();return}Na.setNullToJqUi()}else Ca&&Ga(!1);Na.setThemeModel(e);Na.setCardIconType(k);Na.setGlobalDependence(Ka);Na.getJqUi(ba);Na.setIsOpen(!0);ub=e.getThemeID();Kb();eb.collapseSecondHalf(!1)},Kb=function(){if(Na&&Na.isOpen()){eb.getJqSplitLine().css("display",
"block");var e=document.documentElement.clientWidth-ba.width()}else eb.getJqSplitLine().css("display","none"),e=document.documentElement.clientWidth;q&&q.css("width",e-m.width()-15-4+"px")},nc=function(){eb.collapseSecondHalf(!0)},Wb=function(e,k,n){if(n.hasData()){r.hide();k=G(Fb,k);for(var F in k)e==k[F].getThemeGroupID()&&(n=Hb(k[F]),n.appendTo(q),k[F].isPreset()||la.addJqTarget(n))}else r.show()},Hb=function(e){var k=da.getInstance(e.getThemeType());k.needRefreshThemes()&&k.setRefreshThemesFunction(function(n){-1==
K.indexOf(n)&&K.push(n);for(var F=v.length-1;0<=F;F--)n==v[F].getThemeGroupID()&&v.splice(F,1);A.getThemeGroupID()==n&&(q.find(".theme-card").remove(),Vb(A))});e=k.createCardUi(e);e.setGlobalDependence(Ka);e.setCopySuccessCallback(function(n){n=Hb(n);var F=$(q);F.children()[0]?n.insertBefore(F.children()[0]):F.append(n);la.addJqTarget(n)});e.setCopyDifferentGroupSuccessCallBack(pc);e.setDelSuccessCallback(qc);e.setMoveSuccessCallback(rc);e.setArrNonPresetThemeModel(v);e.setThemeDetailCallback(oc);
return e.getJqUi()},qc=function(e){var k=e.getThemeGroupID();e=v.filter(function(ha){return ha.getThemeGroupID()==k});for(var n,F=0;F<y.length;F++)if(y[F].getThemeGroupModel().getThemeGroupID()==k){n=y[F];break}0==e.length&&(n.getThemeGroupModel().setHasData(!1),r.show())},rc=function(e){var k=e.getBeforeMovedThemeGroupId(),n=e.getThemeGroupID(),F=v.filter(function(ha){return ha.getThemeGroupID()==k});y.forEach(function(ha){var ta=ha.getThemeGroupModel().getThemeGroupID();n==ta?ha.getThemeGroupModel().setHasData(!0):
ta==k&&0==F.length&&(ha.getThemeGroupModel().setHasData(!1),r.show())})},pc=function(e){e=e.getThemeGroupID();for(var k,n=0;n<y.length;n++)if(y[n].getThemeGroupModel().getThemeGroupID()==e){k=y[n];break}k.getThemeGroupModel().setHasData(!0)},Xb=function(){var e=$("<div class='sa-ctrl-common-modallayer'>"),k=$(document.body);e.appendTo(k);for(var n=new V(e),F=function(){e.remove();n.destroy()},ha=$("<div>"),ta=da.getAllInstance(),Xa=0,lb=ta.length;Xa<lb;Xa++){var wb=ta[Xa],zb=$("<div>");b.layoutCtrl(zb,
44+120*Xa,35,100,66);zb.css("cursor","pointer");zb.data("model",wb);zb.on("click",function(Gb){Gb=$(Gb.currentTarget).data("model");A?sc(Gb):(Gb=d.get("createCategoryFirst","\u60a8\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u5206\u7c7b\u3002"),Ka.getMessageCurtain().showPrompt(Gb,2E3));F()});zb.appendTo(ha);var Ib=$("<div>");Ib.css("border-radius","4px");var Jb=$("<div>");Jb.css({"line-height":"16px","font-size":"14px",color:"rgb(78, 86, 103)","text-align":"center"});b.layoutCtrl(Ib,32,0,36,36);b.layoutCtrl(Jb,
0,50,100,16);Jb.text(wb.getDisplayName());$a.background(Ib,wb.getIconFileName());Ib.appendTo(zb);Jb.appendTo(zb)}ta=100+120*ta.length;Xa=k.prop("clientWidth");k=k.prop("clientHeight");n.setBounds(Xa-ta>>1,k-210>>1,ta,210);n.setToolbarVisible(!1);n.setContent(ha);n.setTitle(d.get("create","\u65b0\u5efa"));n.addClosingListener(F);n.show()},sc=function(e){var k=e.createThemeModel();k.setThemeGroupID(A.getThemeGroupID());k=new ma(k);k.setThemeTypeName(e.getDisplayName());k.setArrNonPresetThemeModel(v);
k.setGlobal(Ka);k.addSuccessCallback(function(n){var F=Hb(n),ha=$(q);ha.children()[0]?F.insertBefore(ha.children()[0]):ha.append(F);la.addJqTarget(F);F=d.get("createSuccess","\u65b0\u5efa#1\u6210\u529f\u3002").replace("#1",e.getDisplayName());Ka.getMessageCurtain().showSuccess(F,2E3);r.hide();n=n.getThemeGroupID();for(F=0;F<y.length;F++)if(y[F].getThemeGroupModel().getThemeGroupID()==n){var ta=y[F];break}ta.getThemeGroupModel().setHasData(!0);sa.occur(sa.TM_CREATE_THEME_TYPE,e.getDisplayName())});
k.createDialog().show()},Yb=function(){Ka.createFacade(function(e){var k=new z;k.fromJsonObject(e);0<k.getChildren().length?(e=new Ba,e.setRootNode(k),e.setGlobal(Ka),e.setMessageCurtain(Ka.getMessageCurtain()),e.asyncShowExportDialog()):Ka.getMessageCurtain().showPrompt(d.get("noThemeForExport","\u6ca1\u6709\u53ef\u4f9b\u5bfc\u51fa\u7684\u4e1a\u52a1\u4e3b\u9898\u3002"),2E3)},function(e,k){Ka.getMessageCurtain().showPrompt(k)}).getAllThemeForExportTheme()}};var db,qb,$a,fa,J,sa,V,na,H,oa,c,Aa,Ja,
wa,Wa,cb,Ea,ya,Va,va,d,gb,Ua,Ba,f,z,l,h,b,p,B,Q,S,ra;(function(){var a=com.kingdee.bos.qing.theme.common;db=a.Facade;qb=a.CloudLappFacade;$a=a.Icons;J=a.Integration;sa=a.UserOperationReporter;a=com.kingdee.bos.qing.ui.component;V=a.Dialog;na=a.MessageCurtain;H=a.ComboBox;oa=a.Label;c=a.SwitchButton;Aa=a.TextArea;Ja=a.TextField;wa=a.SplitPane;Wa=a.ToolbarButton;cb=a.SearchBox;Ea=a.List;ya=a.MessageDialog;fa=a.Icons;a=com.kingdee.bos.qing.theme.model;Va=a.ThemeGroupModel;va=a.ThemeModel;S=a.ThemeDetailModel;
ra=a.LappInfoModelDataVO;a=com.kingdee.bos.qing.framework.common;d=a.MultilanguageManager.createPackageAccessor(vb);gb=a.WindowResizeObserver;Ua=a.RemoteFramework;h=a.Resource;a=com.kingdee.bos.qing.theme.imexport;Ba=a.ExportDialog;f=a.UploadPane;z=a.FolderNode;a=com.kingdee.bos.qing.theme.resourceinfo;l=a.ResourceInfoManager;a=com.kingdee.bos.qing.common;b=a.DomUtil;p=a.Util;a=com.kingdee.bos.qing;B=a.SkinUtil;Q=a.Seer})();var da=new function(){var a,m=[],g=[Sa,kb,mb],q=function(){a={};for(var r=
0,u=g.length;r<u;r++){var T=new g[r];T.isSupported()&&(m.push(T),a[T.getType()]=T)}};this.getInstance=function(r){!a&&q();r=a[r];if(!r)throw Error("Unknown theme type");return r};this.getAllInstance=function(){!a&&q();return m}};N.ENTRANCE_ANALYSIS=1;N.ENTRANCE_SQUARE=2;N.ENTRANCE_DATAMODELING=4;N.ENTRANCE_DASHBOARD=8;N.ENTRANCE_PROGRAMABLECARD=16;N.ENTRANCE_AIANALYSIS=32;pb.cutExceedCharacters=function(a,m){var g=0,q=0;if(a.replace(/[^\x00-\xff]/g,"**").length>m)for(var r=0;r<a.length;r++)if(g<m)if(/^[\u0000-\u00ff]$/.test(a.charAt(r)))if(g+
1.2<m)g+=1.2,q++;else break;else if(g+1.8<m)g+=1.8,q++;else break;return 0==q?a:a.substring(0,q)+"..."}})();
//qingVersionTag: 20250324