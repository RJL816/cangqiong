(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.widget&&(com.kingdee.bos.qing.dsb.widget={});"undefined"==typeof com.kingdee.bos.qing.dsb.widget.mobile&&(com.kingdee.bos.qing.dsb.widget.mobile={});var B=com.kingdee.bos.qing.dsb.widget.mobile;
B.WidgetCtrlTitleBar=function(){var b=this,l=$("<div id='title'>"),h,d,f=!1,e=k.getPortrait(),p=!0,u,C,D,v,w,x,y;this.setShowFullscreen=function(a){p=a;d&&(p&&d.show(),!p&&d.hide())};this.setBeforeFullscreenListener=function(a){u=a};this.setFullscreenListener=function(a){C=a};this.setCancelFullscreenListener=function(a){D=a};this.setAboutInfoItemCreator=function(a){w=a};this.setMenuToolItemCreator=function(a){v=a};this.setBackListener=function(a){y=a};this.setRotateUIListener=function(a){x=a};this.getJqUi=
function(){l.addClass("lapp-dsb-widget-ctrl-title");d=$("<div>");d.on("click",b.doFullscreen);d.appendTo(l);z.layoutCtrlWithLRTB(d,null,0,28,1,null,28);var a=$("<span>");m.background(a,"icon_fullscreen");a.addClass("lapp-dsb-fullscreen-icon");a.appendTo(d);!p&&d.hide();return l};this.doFullscreen=function(a){f=!f;u&&u(f);e?!f&&E():k.rotateUI(e);var c=!1,g=com.kingdee.bos.qing.lapp.ui.LappIntegration;g.isCardFullscreen()||q.postMessageWhenImmediateExecution(f?q.TYPE_REQUEST_WIDGET_FULLSCREEN:q.TYPE_EXIT_WIDGET_FULLSCREEN,
function(r){var t=window.location.href,I=A.decodeParamFromUrl(t,"publishId");t=A.decodeParamFromUrl(t,"time");r.iframeId=I+t;c=!0;g.setResizeListener(function(){F();g.setResizeListener(null)})});c||F()};var F=function(){f?(l.hide(),C(function(a){J(a)})):(l.show(),D())},J=function(a){var c=$("<div>");c.addClass("lapp-dsb-widget-ctrl-fullscreen-headbar");c.appendTo(a);a=$("<div id='exit'>");m.background(a,"icon_back");a.addClass("lapp-dsb-widget-ctrl-exit");a.appendTo(c);a.on("click",function(){y&&
y()||r()});a=$("<div>");a.addClass("lapp-dsb-widget-ctrl-title-fullacreen");a.appendTo(c);var g=new G;K(g);g.isHasButtonInMenu()&&(a=$("<div id='toolbar'>"),a.css({"z-index":512,"background-color":"#FFFFFF"}),z.layoutCtrlWithLRTB(a,40,0,null,0,null,44),a.appendTo(c),a.show(),c=g.getJqUi(),c.appendTo(a),c.css({right:"20px",left:"8px",width:"unset"}));var r=function(){b.doFullscreen();com.kingdee.bos.qing.lapp.ui.LappIntegration.popPopStateListener()};com.kingdee.bos.qing.lapp.ui.LappIntegration.addPopStateListener(function(){r()})},
K=function(a){w&&w(a);k.supportSwitchScreen(!0)&&(h=e?a.addButtonInMenu("icon_turn_horizontal",n.get("horizontalScreen","\u6a2a\u5c4f"),function(){k.rotateUI(e)},85):a.addButtonInMenu("icon_turn_vertical",n.get("horizontalScreen","\u7ad6\u5c4f"),function(){k.rotateUI(e)},85),window.addEventListener("orientationchange",H));v&&v(a)},E=function(){window.removeEventListener("orientationchange",H)},H=function(){e=!e;x&&x(e);h&&(e?(m.background(h.getJqIcon(),"icon_turn_horizontal"),h.getJqText().text(n.get("horizontalScreen",
"\u6a2a\u5c4f"))):(m.background(h.getJqIcon(),"icon_turn_vertical"),h.getJqText().text(n.get("verticalScreen","\u7ad6\u5c4f"))));!f&&E()}};var n,k,q,A,z,G,m;(function(){b=com.kingdee.bos.qing.framework.common;n=b.MultilanguageManager.createPackageAccessor(B);b=com.kingdee.bos.qing.lapp.integration;k=b.EnvUtil;q=b.PostMessageUtils;var b=com.kingdee.bos.qing.common;A=b.Util;z=b.DomUtil;b=com.kingdee.bos.qing.lapp.component;G=b.SecondaryMenuBar;m=b.Icons})()})();
//qingVersionTag: 20250324