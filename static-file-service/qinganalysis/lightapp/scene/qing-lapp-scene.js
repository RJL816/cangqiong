(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.lapp&&(com.kingdee.bos.qing.lapp={});"undefined"==typeof com.kingdee.bos.qing.lapp.scene&&(com.kingdee.bos.qing.lapp.scene={});com.kingdee.bos.qing.lapp.scene.LightappScene=function(){function l(){var b;this.start=function(){b=$("<div>");
b.addClass("lapp-loading");b.css("background-image","url("+com.kingdee.bos.qing.CodeLoader.getIconUrl("lightapp/common","loading.gif")+")");b.appendTo($(document.body))};this.complete=function(){b&&b.remove()}}var q=this,f,r=com.kingdee.bos.qing.Seer;this.start=function(b){var g="true"==r.getUrlParamValue("dev");if(h.isPreviewMode())b&&b();else{var c=new l;c.start();b=function(){q.initQing(function(){c.complete()})};g?b():h.init(b)}};this.getStarter=function(){return f};this.initQing=function(b,g){var c=
com.kingdee.bos.qing.Seer,a=com.kingdee.bos.qing.CodeLoader;a.setRootPath(".");a.setCallback(function(){f=new com.kingdee.bos.qing.lapp.scene.LappStarter;g?(a.setCallback(function(){b()}),a.loadJsBatch(["jquery/jquery.js","env.js"])):("dashboard"==c.getUrlParamValue("publishSourceType")?(a.setCallback(function(){b();f.show()}),a.loadJsBatch(["jquery/jquery.js","env.js"])):(a.setCallback(function(){b();var k=com.kingdee.bos.qing.prepare.DataExtractor,n=c.getUrlParamValue("cardName");k.setTitle(n);
k.start();k.setExtractDataFinishedSuccessCallback(function(){f.show(f.getJqContent())})}),a.loadJsBatch(["jquery/jquery.js","env.js","prepare/lapp-prepare.js"]),a.loadI18n("prepare","prepare"),a.loadCss("prepare/prepare.css"),a.loadCss("lightapp/common/qing-lapp.css"),a.loadSkinJs("prepare","skin")),a.loadSkinJs("lightapp/common","skin"));t(f)});var d=!h.isMobile();"dashboard"==c.getUrlParamValue("publishSourceType")?com.kingdee.bos.qing.CommonCodeImporter.importDsbMobileCode(a,d):"10"==c.getUrlParamValue("view")?
com.kingdee.bos.qing.CommonCodeImporter.importSquareMobileCode(a,d):com.kingdee.bos.qing.CommonCodeImporter.importLongerMobileCode(a,d)};var t=function(b){e.postMessageWhenImmediateExecution(e.TYPE_ACCESS_TOKEN,function(c){var a=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.href,"access_token");c.token=a});var g=function(c){(c=$(document.body).data("LappUiObject"))&&c.getJqModalLayer()&&c.getJqModalLayer().css("top","44px");var a=b.loadAnalysisInfo;c&&c.loadHeadBar(a);(c=$(document.body).data("JqContent"))&&
c.css("top","44px");var d=com.kingdee.bos.qing.lapp.ui.LappIntegration;d.setCardFullscreen(!0);d.addPopStateListener(function(){var k=$(document.body).data("LappUiObject");k.keepPortrait(function(){k.hideHeadBar();e.postMessageWhenImmediateExecution(e.TYPE_EXIT_CARD_FULLSCREEN,function(n){var m=com.kingdee.bos.qing.common.Util,p=window.location.href,u=m.decodeParamFromUrl(p,"publishId");m=m.decodeParamFromUrl(p,"time");n.iframeId=u+m;d.setCardFullscreen(!1)})})})};e.addEventListenerWhenImmediateExecution(e.TYPE_REQUEST_CARD_FULLSCREEN,
g);h.isImmediateExecutionMode()&&h.isPageAfterRefresh()&&g()}};var h,e;(function(){var l=com.kingdee.bos.qing.lapp.integration;h=l.EnvUtil;e=l.PostMessageUtils})()})();
//qingVersionTag: 20250324