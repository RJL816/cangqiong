(function(){function B(){var b,h,k,e,p="lapp",f,m,q,x,y,z;this.getName=function(){return b};this.setName=function(d){b=d};this.getId=function(){return h};this.setId=function(d){h=d};this.isFavorite=function(){return k};this.setFavorite=function(d){k=d};this.getParentId=function(){return e};this.setParentId=function(d){e=d};this.getExhibitionScene=function(){return p};this.setExhibitionScene=function(d){p=d};this.getLayoutType=function(){return f};this.setLayoutType=function(d){f=d};this.isLandscape=
function(){return m};this.setLandscape=function(d){m=d};this.getUrl=function(){return q};this.setUrl=function(d){q=d};this.getPublishTime=function(){return x};this.setPublishTime=function(d){x=d};this.getPublisher=function(){return y};this.setPublisher=function(d){y=d};this.getPublishId=function(){return z};this.setPublishId=function(d){z=d};this.fromJsonObject=function(d){b=d.name;h=d.id;k=d.favorite;e=d.parentId;f=d.layoutType;m=d.landscape;q=d.url;y=d.creatorName;x=d.createTime;z=d.publishId}}
function u(){var b,h,k,e,p;this.getPublishId=function(){return b};this.setPublishId=function(f){b=f};this.getPublisher=function(){return h};this.setPublisher=function(f){h=f};this.getPublishTime=function(){return k};this.setPublishTime=function(f){k=f};this.getExtractDataTime=function(){return e};this.setExtractDataTime=function(f){e=f};this.getLoginOrgName=function(){return p};this.setLoginOrgName=function(f){p=f};this.fromJsonObject=function(f){b=f.publishId;h=f.publisher;k=f.publishTime;e=f.extractDataTime;
p=f.loginOrgName}}function w(b,h,k){var e=new v,p=(new l).getParamPathPrefix();e.setRemoteUrl((p?p:"/ierp")+"/qing/lapp.do");com.kingdee.bos.qing.core.Facade.call(this,e,b,h,k);var f=this.protectedMethod;this.loadSchema=function(m){f.remote("loadLappSchema",{publishId:m})};this.getLappContext=function(m){f.remote("getLappContext",{appType:m})};this.getExtractDataTime=function(m){e.setTag(m);f.remote("getExtractDataTime",{})};this.getPublishedDataSourceInfo=function(m,q){m={publishId:m,tag:q};e.setTag(q);
f.remote("getPublishedDataSourceInfo",m)}}function v(){com.kingdee.bos.qing.framework.common.AbstractRemoteCall.call(this);var b,h,k;this.getRemoteUrl=function(e){e.skin=k;e.tag=h;return b};this.setRemoteUrl=function(e){b=e};this.setTag=function(e){h=e};this.setSkinName=function(e){k=e}}function l(){var b=this;this.getParamSkin=function(){return b.getUrlParam("skin")};this.getParamLanguage=function(){return b.getUrlParam("language")};this.getParamPathPrefix=function(){return b.getUrlParam("path")};
this.getParamTag=function(){return b.getUrlParam("tag")};this.getUrlParam=function(h){return com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,h)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.lapp&&(com.kingdee.bos.qing.lapp={});"undefined"==typeof com.kingdee.bos.qing.lapp.scene&&
(com.kingdee.bos.qing.lapp.scene={});var g=com.kingdee.bos.qing.lapp.scene;g.AbstractLappStarter=function(){var b=this,h,k,e,p,f;(function(){var a=com.kingdee.bos.qing;h=a.CodeLoader;a=com.kingdee.bos.qing.lapp.integration;k=a.EnvUtil;e=a.RemoteFrameworkUtil;a=com.kingdee.bos.qing.framework.common;p=a.GlobalFont;f=a.Resource})();var m,q=new l;this.setSchemaContent=function(a){m=a};this.getRemoteUrl=function(){var a=q.getParamPathPrefix();return(a?a:"/ierp")+"/qing/core.do"};this.customInitEnv=function(a){f.bindLoader(h);
p.setFontSize(12);p.setFontName("Microsoft YaHei");a.setFunGetPublishedDataSourceInfo(y);var c=com.kingdee.bos.qing.lapp.integration.EnvUtil;c.isMobile()&&$("head").append("<style>::-webkit-scrollbar{display: none;}</style>");com.kingdee.bos.qing.integration.ImglibUrlParser.hookUrlParser();c.isPreviewMode()||(D(function(n,r,t){b.protectedLoadAnalysis(n);a.setContextGetter(function(A){A(n,r,t)});c.isPreviewMode()||c.isImmediateExecutionMode()&&!c.isPageAfterRefresh()||(c.isNavTitleShown()?a.createSecondaryMenuBar():
a.createHeadBar());c.isImmediateExecutionMode()&&$(document.body).data("LappUiObject",a)}),x())};this.initImmediateExecutionSupportEvent=function(){k.isImmediateExecutionMode()&&com.kingdee.bos.qing.lapp.integration.PostMessageUtils.initSupportEvent()};var x=function(){var a=q.getUrlParam("sharingTargetId")?!0:!1;b.protectedReportUserOperation(a)};this.getUrlParam=function(a){return q.getUrlParam(a)};this.importMoreCode=function(a){if(k.isYzjApp())if(null==navigator.userAgent.split("lang:")[1]||""==
navigator.userAgent.split("lang:")[1])var c="zh_CN";else if(c=navigator.userAgent.split("lang:")[1].split(";")[0],"zh-CN"==c)c="zh_CN";else{if("en-CN"==c||"en-US"==c)c="en"}else c=q.getParamLanguage();c&&a.setI18nLocal(c);com.kingdee.bos.qing.CommonCodeImporter.importLappSkin(a);com.kingdee.bos.qing.CommonCodeImporter.importLappI18n(a)};this.getJqContent=function(){return b.protectedGetJqContent()};var y=function(a,c,n){(new w(function(r){var t=new u;t.fromJsonObject(r);a(t)},function(r,t){return!0})).getPublishedDataSourceInfo(c,
n)};this.protectedGetJqContent=function(){throw Error("Override me.");};this.protectedLoadFilters=function(){};this.protectedSetDescription=function(){};this.protectedLoadAnalysis=function(a){};this.protectedReportUserOperation=function(a){throw Error("Override me.");};var z=function(a){(new w(function(c){k.setEnv(c.mobileServerHostUrl,c.appId);c.isPrivate&&(e.setRemoteUrlCreator(function(n,r){n=com.kingdee.bos.qing.common.Base64Util.encode("/"+n+"/"+r);return com.kingdee.bos.qing.framework.common.RemoteFramework.getLappPrivateUrl(n)}),
e.setResourceUrlCreator(function(n){return"lightapp-private/"+n}));d();a(c.lappUserId,c.lappUserType,c.userPictureField,c.userName)},function(c,n){})).getLappContext(k.getAppType())},d=function(){if(k.isNeedShowCommentUi()){var a=document.createElement("link");a.rel="stylesheet";a.href=e.createResourceUrl("share/qing-share-exhibition-foot.css");document.head.appendChild(a);a=document.createElement("link");a.rel="stylesheet";a.href=e.createResourceUrl("share/qing-share.css");document.head.appendChild(a)}},
D=function(a){var c=b.getUrlParam("analysisId");null!=c?z(function(n,r,t,A){b.loadAnalysisInfo(c,n,r,function(C){a(C,n,r,t,A)})}):a()};this.loadAnalysisInfo=function(a,c,n,r){var t=com.kingdee.bos.qing.lapp.framework.Facade;t.setUserIdAndUserType(c,n);t.setWithoutDotDo(!0);(new t("lappAnalysisMgr",function(A){var C=new B;C.fromJsonObject(A);r(C)},function(){})).getAnalysis(a)};this.protectedMethod={remoteSchemaContent:function(a){m?(a(m),b.protectedLoadFilters()):(new w(function(c){m=c.schemaContent;
a(m);b.protectedLoadFilters();b.protectedSetDescription()},function(c,n){})).loadSchema(b.getUrlParam("bizTag"))}}};g.AnalysisInfo=B;g.RemoteImpl=v;g.SceneCommonUtil=l;g.IERPLappFacade=w})();(function(){function B(){com.kingdee.bos.qing.AbstractSquareIframeScene.call(this);var u=this.protectedMethod,w=this;var v=com.kingdee.bos.qing.lapp.ui.LappUi;var l,g;this.setLappStarter=function(b){g=b};this.setDescription=function(){l.setDescription(w.getDescription())};this.getJqContent=function(){l=new v;l.setRepaintNeedListener(function(){u.redraw()});return l.getJqContent()};this.loadFilters=function(){l.createFilterCards(u.copyFilters,u.updateFilterPreparedValue,u.filtering)};this.protectedImportMoreCode=
function(b){g.importMoreCode(b)};this.protectedLoadingImpl=function(b){g.remoteSchemaContent(b)};this.protectedGetRemoteUrl=function(){return g.getRemoteUrl()};this.protectedDrawCustomLegend=function(b,h){com.kingdee.bos.qing.chart.SquareConfig.COMBO_LEGEND_MODE=!1;b!=com.kingdee.bos.qing.square.model.SquareModel.ChartType_GIS&&l.createLegendUi(b,h)};this.protectedShowErrorImpl=function(b,h,k){return l.showError(b,h,k)};this.protectedCustomInitEnv=function(){g.customInitEnv(l)}}"undefined"==typeof com&&
(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.lapp&&(com.kingdee.bos.qing.lapp={});"undefined"==typeof com.kingdee.bos.qing.lapp.scene&&(com.kingdee.bos.qing.lapp.scene={});com.kingdee.bos.qing.lapp.scene.LappStarter=function(){com.kingdee.bos.qing.lapp.scene.AbstractLappStarter.call(this);var u=this,w=this.protectedMethod,
v=new B;this.protectedGetJqContent=function(){return v.getJqContent()};this.protectedLoadFilters=function(){v.loadFilters()};this.protectedSetDescription=function(){v.setDescription()};this.protectedLoadAnalysis=function(l){u.initImmediateExecutionSupportEvent()};this.protectedReportUserOperation=function(l){var g=com.kingdee.bos.qing.behavior.BehaviorManager;g.interestInBehaviorEntrance(g.getLappEntrance(g.ENTRANCE_LIGHTAPP_SQUARE,l));l=u.getUrlParam("publishId");var b=com.kingdee.bos.qing.common.Util.createUUID();
g.initAccessRecordParams(l,b,g.SourceType.QING_PUBLISH,g.AppType.QING);g.recordResourceOperation(g.OperationType.QING_VISIT);window.addEventListener("unload",function(){g.recordResourceOperation(g.OperationType.QING_EXIT)})};this.remoteSchemaContent=function(l){w.remoteSchemaContent(l)};this.show=function(l){v.setLappStarter(u);v.show(l)}}})();
//qingVersionTag: 20250324