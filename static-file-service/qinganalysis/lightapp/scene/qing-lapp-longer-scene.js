(function(){function B(){var c,h,m,f,p="lapp",g,k,u,y,d,l;this.getName=function(){return c};this.setName=function(a){c=a};this.getId=function(){return h};this.setId=function(a){h=a};this.isFavorite=function(){return m};this.setFavorite=function(a){m=a};this.getParentId=function(){return f};this.setParentId=function(a){f=a};this.getExhibitionScene=function(){return p};this.setExhibitionScene=function(a){p=a};this.getLayoutType=function(){return g};this.setLayoutType=function(a){g=a};this.isLandscape=
function(){return k};this.setLandscape=function(a){k=a};this.getUrl=function(){return u};this.setUrl=function(a){u=a};this.getPublishTime=function(){return y};this.setPublishTime=function(a){y=a};this.getPublisher=function(){return d};this.setPublisher=function(a){d=a};this.getPublishId=function(){return l};this.setPublishId=function(a){l=a};this.fromJsonObject=function(a){c=a.name;h=a.id;m=a.favorite;f=a.parentId;g=a.layoutType;k=a.landscape;u=a.url;d=a.creatorName;y=a.createTime;l=a.publishId}}
function z(){var c,h,m,f,p;this.getPublishId=function(){return c};this.setPublishId=function(g){c=g};this.getPublisher=function(){return h};this.setPublisher=function(g){h=g};this.getPublishTime=function(){return m};this.setPublishTime=function(g){m=g};this.getExtractDataTime=function(){return f};this.setExtractDataTime=function(g){f=g};this.getLoginOrgName=function(){return p};this.setLoginOrgName=function(g){p=g};this.fromJsonObject=function(g){c=g.publishId;h=g.publisher;m=g.publishTime;f=g.extractDataTime;
p=g.loginOrgName}}function q(c,h,m){var f=new v,p=(new r).getParamPathPrefix();f.setRemoteUrl((p?p:"/ierp")+"/qing/lapp.do");com.kingdee.bos.qing.core.Facade.call(this,f,c,h,m);var g=this.protectedMethod;this.loadSchema=function(k){g.remote("loadLappSchema",{publishId:k})};this.getLappContext=function(k){g.remote("getLappContext",{appType:k})};this.getExtractDataTime=function(k){f.setTag(k);g.remote("getExtractDataTime",{})};this.getPublishedDataSourceInfo=function(k,u){k={publishId:k,tag:u};f.setTag(u);
g.remote("getPublishedDataSourceInfo",k)}}function v(){com.kingdee.bos.qing.framework.common.AbstractRemoteCall.call(this);var c,h,m;this.getRemoteUrl=function(f){f.skin=m;f.tag=h;return c};this.setRemoteUrl=function(f){c=f};this.setTag=function(f){h=f};this.setSkinName=function(f){m=f}}function r(){var c=this;this.getParamSkin=function(){return c.getUrlParam("skin")};this.getParamLanguage=function(){return c.getUrlParam("language")};this.getParamPathPrefix=function(){return c.getUrlParam("path")};
this.getParamTag=function(){return c.getUrlParam("tag")};this.getUrlParam=function(h){return com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,h)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.lapp&&(com.kingdee.bos.qing.lapp={});"undefined"==typeof com.kingdee.bos.qing.lapp.scene&&
(com.kingdee.bos.qing.lapp.scene={});var n=com.kingdee.bos.qing.lapp.scene;n.AbstractLappStarter=function(){var c=this,h,m,f,p,g;(function(){var b=com.kingdee.bos.qing;h=b.CodeLoader;b=com.kingdee.bos.qing.lapp.integration;m=b.EnvUtil;f=b.RemoteFrameworkUtil;b=com.kingdee.bos.qing.framework.common;p=b.GlobalFont;g=b.Resource})();var k,u=new r;this.setSchemaContent=function(b){k=b};this.getRemoteUrl=function(){var b=u.getParamPathPrefix();return(b?b:"/ierp")+"/qing/core.do"};this.customInitEnv=function(b){g.bindLoader(h);
p.setFontSize(12);p.setFontName("Microsoft YaHei");b.setFunGetPublishedDataSourceInfo(d);var e=com.kingdee.bos.qing.lapp.integration.EnvUtil;e.isMobile()&&$("head").append("<style>::-webkit-scrollbar{display: none;}</style>");com.kingdee.bos.qing.integration.ImglibUrlParser.hookUrlParser();e.isPreviewMode()||(D(function(t,w,x){c.protectedLoadAnalysis(t);b.setContextGetter(function(A){A(t,w,x)});e.isPreviewMode()||e.isImmediateExecutionMode()&&!e.isPageAfterRefresh()||(e.isNavTitleShown()?b.createSecondaryMenuBar():
b.createHeadBar());e.isImmediateExecutionMode()&&$(document.body).data("LappUiObject",b)}),y())};this.initImmediateExecutionSupportEvent=function(){m.isImmediateExecutionMode()&&com.kingdee.bos.qing.lapp.integration.PostMessageUtils.initSupportEvent()};var y=function(){var b=u.getUrlParam("sharingTargetId")?!0:!1;c.protectedReportUserOperation(b)};this.getUrlParam=function(b){return u.getUrlParam(b)};this.importMoreCode=function(b){if(m.isYzjApp())if(null==navigator.userAgent.split("lang:")[1]||""==
navigator.userAgent.split("lang:")[1])var e="zh_CN";else if(e=navigator.userAgent.split("lang:")[1].split(";")[0],"zh-CN"==e)e="zh_CN";else{if("en-CN"==e||"en-US"==e)e="en"}else e=u.getParamLanguage();e&&b.setI18nLocal(e);com.kingdee.bos.qing.CommonCodeImporter.importLappSkin(b);com.kingdee.bos.qing.CommonCodeImporter.importLappI18n(b)};this.getJqContent=function(){return c.protectedGetJqContent()};var d=function(b,e,t){(new q(function(w){var x=new z;x.fromJsonObject(w);b(x)},function(w,x){return!0})).getPublishedDataSourceInfo(e,
t)};this.protectedGetJqContent=function(){throw Error("Override me.");};this.protectedLoadFilters=function(){};this.protectedSetDescription=function(){};this.protectedLoadAnalysis=function(b){};this.protectedReportUserOperation=function(b){throw Error("Override me.");};var l=function(b){(new q(function(e){m.setEnv(e.mobileServerHostUrl,e.appId);e.isPrivate&&(f.setRemoteUrlCreator(function(t,w){t=com.kingdee.bos.qing.common.Base64Util.encode("/"+t+"/"+w);return com.kingdee.bos.qing.framework.common.RemoteFramework.getLappPrivateUrl(t)}),
f.setResourceUrlCreator(function(t){return"lightapp-private/"+t}));a();b(e.lappUserId,e.lappUserType,e.userPictureField,e.userName)},function(e,t){})).getLappContext(m.getAppType())},a=function(){if(m.isNeedShowCommentUi()){var b=document.createElement("link");b.rel="stylesheet";b.href=f.createResourceUrl("share/qing-share-exhibition-foot.css");document.head.appendChild(b);b=document.createElement("link");b.rel="stylesheet";b.href=f.createResourceUrl("share/qing-share.css");document.head.appendChild(b)}},
D=function(b){var e=c.getUrlParam("analysisId");null!=e?l(function(t,w,x,A){c.loadAnalysisInfo(e,t,w,function(C){b(C,t,w,x,A)})}):b()};this.loadAnalysisInfo=function(b,e,t,w){var x=com.kingdee.bos.qing.lapp.framework.Facade;x.setUserIdAndUserType(e,t);x.setWithoutDotDo(!0);(new x("lappAnalysisMgr",function(A){var C=new B;C.fromJsonObject(A);w(C)},function(){})).getAnalysis(b)};this.protectedMethod={remoteSchemaContent:function(b){k?(b(k),c.protectedLoadFilters()):(new q(function(e){k=e.schemaContent;
b(k);c.protectedLoadFilters();c.protectedSetDescription()},function(e,t){})).loadSchema(c.getUrlParam("bizTag"))}}};n.AnalysisInfo=B;n.RemoteImpl=v;n.SceneCommonUtil=r;n.IERPLappFacade=q})();(function(){function B(){var q,v,r,n,c;(function(){var d=com.kingdee.bos.qing;q=d.CodeLoader;d=com.kingdee.bos.qing.framework.common;v=d.WebPageInitializer;r=d.WindowResizeObserver;n=d.MultilanguageManager.createPackageAccessor(z);d=com.kingdee.bos.qing.lapp.ui;c=d.LappUi})();com.kingdee.bos.qing.AbstractMobileLongerScene.call(this);var h=this,m=this.protectedMethod,f,p,g,k;this.setLappStarter=function(d){p=d};this.getJqContent=function(){f=new c;f.setRepaintNeedListener(function(){h.redraw()});return f.getJqContent()};
this.loadFilters=function(){f.createFilterCards(m.copyFilters,m.updateFilterPreparedValue,m.filtering)};this.start=function(d){p.customInitEnv(f);v.init();y();var l=new r;l.setCallbackImmediately(function(){y();h.redraw()});l.observe();q.setCallback(function(){h.show(d);u()});p.importMoreCode(q);com.kingdee.bos.qing.core.UserOperationReporter.hookCollector(function(a,D){com.kingdee.bos.qing.behavior.BehaviorManager.interestInBehavior(a,D)})};var u=function(){p.remoteSchemaContent(function(d){h.setJsonModelBook(d);
z.LappLongerUtil.registFunGetJsonModelBook(h.getJsonModelBook)})};this.protectedGetRemoteUrl=function(){return p.getRemoteUrl()};this.protectedGetRemoteTag=function(){return p.getUrlParam("tag")};this.protectedPreUpdateLegend=function(d){};this.protectedUpdateLegend=function(d){d&&f.createLegendUi(d)};this.setLayoutType=function(d){var l=!1,a=!1;switch(d){case "NORMAL":a=l=!1;break;case "WIDTH":l=!0;a=!1;break;case "HEIGHT":l=!1;a=!0;break;case "ALL":a=l=!0}if(null==g||null==k)g=l,k=a,h.redraw();
else if(g!=l||k!=a)g=l,k=a,h.redraw()};this.protectedIsWidthFitting=function(){return g};this.protectedIsHeightFitting=function(){return k};this.protectedExecutedSuccess=function(){window.console&&console.log("Execute success")};this.protectedExecutedError=function(d,l){window.console&&console.error("Execute error:"+d+","+l);(d=-1==d?n.get("promptReExecute","\u8bf7\u9000\u51fa\u540e\u91cd\u65b0\u6267\u884c"):205401==d||205402==d?n.get("promptNotEnoughMemory","\u670d\u52a1\u5668\u5fd9\uff0c\u7a0d\u540e\u91cd\u8bd5..."):
com.kingdee.bos.qing.core.ErrorCodeParser.toDisplayText(d,l))||(d=n.get("promptErrorOccurred","\u51fa\u9519\u4e86"));l=f.getJqContent();l.empty();var a=$("<div>");a.addClass("lapp-longer-executed-error-prompt");a.appendTo(l);a.text(d)};var y=function(){document.body.style.height=document.documentElement.clientHeight+"px"};this.protectedLoadDesignerOperationJudger=function(d){var l=new com.kingdee.bos.qing.core.LongerDesignerOperationJudger;d(l)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&
(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.lapp&&(com.kingdee.bos.qing.lapp={});"undefined"==typeof com.kingdee.bos.qing.lapp.scene&&(com.kingdee.bos.qing.lapp.scene={});var z=com.kingdee.bos.qing.lapp.scene;z.LappStarter=function(){com.kingdee.bos.qing.lapp.scene.AbstractLappStarter.call(this);var q=this,v=this.protectedMethod,r=new B;this.protectedGetJqContent=
function(){return r.getJqContent()};this.protectedLoadFilters=function(){r.loadFilters()};this.protectedLoadAnalysis=function(n){q.setLayoutType(n.getLayoutType());q.initImmediateExecutionSupportEvent()};this.protectedReportUserOperation=function(n){var c=com.kingdee.bos.qing.behavior.BehaviorManager;c.interestInBehaviorEntrance(c.getLappEntrance(c.ENTRANCE_LIGHTAPP_ANALYSIS,n));n=q.getUrlParam("publishId");var h=com.kingdee.bos.qing.common.Util.createUUID();c.initAccessRecordParams(n,h,c.SourceType.QING_PUBLISH,
c.AppType.QING);c.recordResourceOperation(c.OperationType.QING_VISIT);window.addEventListener("unload",function(){c.recordResourceOperation(c.OperationType.QING_EXIT)})};this.remoteSchemaContent=function(n){v.remoteSchemaContent(n)};this.show=function(n){r.setLappStarter(q);r.start(n);r.setExecutedListener(function(){z.LappLongerUtil.setLoadStatus(!0)})};this.setLayoutType=function(n){r.setLayoutType(n)}};z.LappLongerUtil=new function(){var q,v;this.registFunGetJsonModelBook=function(r){q=r};this.getJsonModelBook=
function(){return q?q():null};this.setLoadStatus=function(r){v=r};this.getLoadStatus=function(){return v?v:!1}}})();
//qingVersionTag: 20250324