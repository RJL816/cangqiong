var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(H,M,J){H instanceof String&&(H=String(H));for(var P=H.length,V=0;V<P;V++){var da=H[V];if(M.call(J,da,V,H))return{i:V,v:da}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(H,M,J){if(H==Array.prototype||H==Object.prototype)return H;H[M]=J.value;return H};$jscomp.getGlobal=function(H){H=["object"==typeof globalThis&&globalThis,H,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var M=0;M<H.length;++M){var J=H[M];if(J&&J.Math==Math)return J}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(H,M){var J=$jscomp.propertyToPolyfillSymbol[M];if(null==J)return H[M];J=H[J];return void 0!==J?J:H[M]};
$jscomp.polyfill=function(H,M,J,P){M&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(H,M,J,P):$jscomp.polyfillUnisolated(H,M,J,P))};$jscomp.polyfillUnisolated=function(H,M,J,P){J=$jscomp.global;H=H.split(".");for(P=0;P<H.length-1;P++){var V=H[P];if(!(V in J))return;J=J[V]}H=H[H.length-1];P=J[H];M=M(P);M!=P&&null!=M&&$jscomp.defineProperty(J,H,{configurable:!0,writable:!0,value:M})};
$jscomp.polyfillIsolated=function(H,M,J,P){var V=H.split(".");H=1===V.length;P=V[0];P=!H&&P in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var da=0;da<V.length-1;da++){var ea=V[da];if(!(ea in P))return;P=P[ea]}V=V[V.length-1];J=$jscomp.IS_SYMBOL_NATIVE&&"es6"===J?P[V]:null;M=M(J);null!=M&&(H?$jscomp.defineProperty($jscomp.polyfills,V,{configurable:!0,writable:!0,value:M}):M!==J&&(void 0===$jscomp.propertyToPolyfillSymbol[V]&&(J=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[V]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(V):$jscomp.POLYFILL_PREFIX+J+"$"+V),$jscomp.defineProperty(P,$jscomp.propertyToPolyfillSymbol[V],{configurable:!0,writable:!0,value:M})))};$jscomp.polyfill("Array.prototype.find",function(H){return H?H:function(M,J){return $jscomp.findInternal(this,M,J).v}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var H={},M=Object.create(new $jscomp.global.Proxy(H,{get:function(J,P,V){return J==H&&"q"==P&&V==M}}));return!0===M.q}catch(J){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(H){var M=0;return function(){return M<H.length?{done:!1,value:H[M++]}:{done:!0}}};$jscomp.arrayIterator=function(H){return{next:$jscomp.arrayIteratorImpl(H)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(H){if(H)return H;var M=function(da,ea){this.$jscomp$symbol$id_=da;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:ea})};M.prototype.toString=function(){return this.$jscomp$symbol$id_};var J="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",P=0,V=function(da){if(this instanceof V)throw new TypeError("Symbol is not a constructor");return new M(J+(da||"")+"_"+P++,da)};return V},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(H){if(H)return H;H=Symbol("Symbol.iterator");for(var M="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),J=0;J<M.length;J++){var P=$jscomp.global[M[J]];"function"===typeof P&&"function"!=typeof P.prototype[H]&&$jscomp.defineProperty(P.prototype,H,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return H},"es6",
"es3");$jscomp.iteratorPrototype=function(H){H={next:H};H[Symbol.iterator]=function(){return this};return H};$jscomp.makeIterator=function(H){var M="undefined"!=typeof Symbol&&Symbol.iterator&&H[Symbol.iterator];return M?M.call(H):$jscomp.arrayIterator(H)};$jscomp.owns=function(H,M){return Object.prototype.hasOwnProperty.call(H,M)};
$jscomp.polyfill("WeakMap",function(H){function M(){if(!H||!Object.seal)return!1;try{var I=Object.seal({}),L=Object.seal({}),X=new H([[I,2],[L,3]]);if(2!=X.get(I)||3!=X.get(L))return!1;X.delete(I);X.set(L,4);return!X.has(I)&&4==X.get(L)}catch(xa){return!1}}function J(){}function P(I){var L=typeof I;return"object"===L&&null!==I||"function"===L}function V(I){if(!$jscomp.owns(I,ea)){var L=new J;$jscomp.defineProperty(I,ea,{value:L})}}function da(I){if(!$jscomp.ISOLATE_POLYFILLS){var L=Object[I];L&&(Object[I]=
function(X){if(X instanceof J)return X;Object.isExtensible(X)&&V(X);return L(X)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(H&&$jscomp.ES6_CONFORMANCE)return H}else if(M())return H;var ea="$jscomp_hidden_"+Math.random();da("freeze");da("preventExtensions");da("seal");var Y=0,K=function(I){this.id_=(Y+=Math.random()+1).toString();if(I){I=$jscomp.makeIterator(I);for(var L;!(L=I.next()).done;)L=L.value,this.set(L[0],L[1])}};K.prototype.set=function(I,L){if(!P(I))throw Error("Invalid WeakMap key");
V(I);if(!$jscomp.owns(I,ea))throw Error("WeakMap key fail: "+I);I[ea][this.id_]=L;return this};K.prototype.get=function(I){return P(I)&&$jscomp.owns(I,ea)?I[ea][this.id_]:void 0};K.prototype.has=function(I){return P(I)&&$jscomp.owns(I,ea)&&$jscomp.owns(I[ea],this.id_)};K.prototype.delete=function(I){return P(I)&&$jscomp.owns(I,ea)&&$jscomp.owns(I[ea],this.id_)?delete I[ea][this.id_]:!1};return K},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(H){function M(){if($jscomp.ASSUME_NO_NATIVE_MAP||!H||"function"!=typeof H||!H.prototype.entries||"function"!=typeof Object.seal)return!1;try{var K=Object.seal({x:4}),I=new H($jscomp.makeIterator([[K,"s"]]));if("s"!=I.get(K)||1!=I.size||I.get({x:4})||I.set({x:4},"t")!=I||2!=I.size)return!1;var L=I.entries(),X=L.next();if(X.done||X.value[0]!=K||"s"!=X.value[1])return!1;X=L.next();return X.done||4!=X.value[0].x||"t"!=X.value[1]||!L.next().done?!1:!0}catch(xa){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(H&&$jscomp.ES6_CONFORMANCE)return H}else if(M())return H;var J=new WeakMap,P=function(K){this.data_={};this.head_=ea();this.size=0;if(K){K=$jscomp.makeIterator(K);for(var I;!(I=K.next()).done;)I=I.value,this.set(I[0],I[1])}};P.prototype.set=function(K,I){K=0===K?0:K;var L=V(this,K);L.list||(L.list=this.data_[L.id]=[]);L.entry?L.entry.value=I:(L.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:K,value:I},L.list.push(L.entry),
this.head_.previous.next=L.entry,this.head_.previous=L.entry,this.size++);return this};P.prototype.delete=function(K){K=V(this,K);return K.entry&&K.list?(K.list.splice(K.index,1),K.list.length||delete this.data_[K.id],K.entry.previous.next=K.entry.next,K.entry.next.previous=K.entry.previous,K.entry.head=null,this.size--,!0):!1};P.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=ea();this.size=0};P.prototype.has=function(K){return!!V(this,K).entry};P.prototype.get=function(K){return(K=
V(this,K).entry)&&K.value};P.prototype.entries=function(){return da(this,function(K){return[K.key,K.value]})};P.prototype.keys=function(){return da(this,function(K){return K.key})};P.prototype.values=function(){return da(this,function(K){return K.value})};P.prototype.forEach=function(K,I){for(var L=this.entries(),X;!(X=L.next()).done;)X=X.value,K.call(I,X[1],X[0],this)};P.prototype[Symbol.iterator]=P.prototype.entries;var V=function(K,I){var L=I&&typeof I;"object"==L||"function"==L?J.has(I)?L=J.get(I):
(L=""+ ++Y,J.set(I,L)):L="p_"+I;var X=K.data_[L];if(X&&$jscomp.owns(K.data_,L))for(K=0;K<X.length;K++){var xa=X[K];if(I!==I&&xa.key!==xa.key||I===xa.key)return{id:L,list:X,index:K,entry:xa}}return{id:L,list:X,index:-1,entry:void 0}},da=function(K,I){var L=K.head_;return $jscomp.iteratorPrototype(function(){if(L){for(;L.head!=K.head_;)L=L.previous;for(;L.next!=L.head;)return L=L.next,{done:!1,value:I(L)};L=null}return{done:!0,value:void 0}})},ea=function(){var K={};return K.previous=K.next=K.head=
K},Y=0;return P},"es6","es3");
(function(){function H(){var c,f,a,e,b,d,g,p={IERP:"logo_ierp",EAS:"logo_eas",JDY:"logo_jdy",K3CLOUD:"logo_k3cloud",KIS_SMB:"logo_kis",KIS_QJB:"logo_kis",KIS_ZYB:"logo_kis",OTHER:"logo_normal",DEMO:"logo_normal"};this.setParentUi=function(y){c=y};this.setInitListener=function(y){b=y};this.hidden=function(){a&&a.css("display","none")};this.show=function(){a&&a.css("display","block")};this.createUi=function(){f=$("<div>");f.appendTo(c);v(function(){Ca.DISPLAY_MODE_NONE==d.getDisplayMode()?(b&&b(),b=
null):(r(),Ca.DISPLAY_MODE_SHOW_LAST_USED==d.getDisplayMode()?(b&&b(),b=null,1==d.getAllDatacenterModel().length&&a.hide()):(q(),a.hide()))})};var t=function(){f.remove();f=$("<div>");f.appendTo(c);v(function(){r();q();a.hide()})},v=function(y){(new T("lappDatacenter",function(D){d=new Ca;d.fromJsonObject(D);Q.setVisitedViewType(d.getVisitedViewType());y()})).loadDatacenterInfo()},r=function(){a=$("<div>");a.addClass("lapp-suspensionbar");a.appendTo(f);var y=new Wa,D,k,h=!1;a.on(y.start(),function(w){h=
!0;D=y.getMousePos(w)[1];k=a.position().top});a.on(y.move(),function(w){if(h){w=y.getMousePos(w)[1];w=k+(w-D);w=0>w?0:w;var u=document.body.clientHeight-34;a.css("top",w>u?u:w)}});a.on(y.end(),function(w){h=!1});a.on(y.leave(),function(w){h=!1});a.on("click",function(){t()});var m=$("<span>");m.addClass("lapp-suspensionbar-text");m.text(B.get("datacenter","\u6570\u636e\u4e2d\u5fc3"));m.appendTo(a);m=$("<div>");m.addClass("lapp-suspensionbar-toggle-icon");O.background(m,"icon_toggle");m.appendTo(a)},
q=function(){e=$("<div>");e.addClass("lapp-modallayer");e.appendTo(f);e.on("click",function(G){"lapp-modallayer"==G.target.className&&x()});var y=d.getAllDatacenterModel(),D=y.length,k=$("<div>");k.css("overflow-y","auto");k.appendTo(e);na.layoutCtrlWithLRTB(k,0,0,null,null,0,66*(6<D?6:D)+1);for(var h=new Xa,m=d.getCurrentDatacenterModel(),w=0;w<D;w++){var u=y[w],C=new Ya;C.setTextAndLogo(u.getAccountName(),function(G){var F=p[u.getProductType()];O.background(G,F)});C.addCheckedListener(l);m&&u.getUserDatacenterRelationId()==
m.getUserDatacenterRelationId()&&C.setChecked(!0);var A=C.getJqUi();A.data("userObject",u);A.addClass("lapp-datacenter-pane-item");A.css("top",66*(D-w-1));A.appendTo(k);h.addElement(C)}},l=function(y,D){D&&(g=y.getJqUi().data("userObject"),n())},n=function(){var y=function(D){d.setDisplayMode(Ca.DISPLAY_MODE_SHOW_LAST_USED);d.setCurrentDatacenterModel(g);b?(b(),b=null):Q.refreshAnalysisTabPane();x()};g?(oa.clear(),(new T("lappDatacenter",y)).updateLastUsedTime(g.getUserDatacenterRelationId(),z())):
x()},z=function(){for(var y=[],D=d.getAllDatacenterModel(),k=0;k<D.length;k++){var h=D[k],m=h.getUserDatacenterRelationId();m!=g.getUserDatacenterRelationId()&&(h.getLastUsedTime()||y.push(m))}return y},x=function(){Ca.DISPLAY_MODE_SHOW_LAST_USED!=d.getDisplayMode()?(new ca).show(B.get("needChooseDatacenter","\u8bf7\u9009\u62e9\u6570\u636e\u4e2d\u5fc3"),ca.LENGTH_SHORT):(g=null,a.show(),e.hide())}}function M(){var c=this,f,a,e,b,d,g,p,t=!1,v,r,q,l,n;this.getJqUi=function(){f||z();return f};this.getJqTabWrap=
function(){return g};this.setFunEditDir=function(k){q=k};this.setFunCustomSort=function(k){n=k};this.setFunEditCard=function(k){l=k};this.setShowHeadBar=function(k){p=k};this.setFunToggleEditStatus=function(k,h){v=k;r=h};this.showHamburgerBtn=function(){a&&a.css("display","block")};this.hideHamburgerBtn=function(){a&&a.css("display","none")};var z=function(){f=$("<div>");f.addClass("lapp-tab-bar");p&&f.addClass("lapp-tab-bar-headbarshown");g=$("<div>");g.addClass("lapp-tab-bar-wrap");g.appendTo(f);
a=$("<div>");a.addClass("lapp-list-container touch");a.attr("data-touchFeedback","true");a.appendTo(f);a.on("click",function(){x()});e=$("<span>");e.addClass("lapp-tab-bar-list");O.background(e,"btn_list");e.appendTo(a)},x=function(){t=!t;1==t?y():(O.background(e,"btn_list"),$(document.body).off("mousedown touchmove",D),b&&b.remove(),b=null)},y=function(){O.background(e,"btn_listing");var k=$(document.body);b=$("<div>");b.addClass("lapp-button-list");b.css("top",na.upwardCoordinate(a[0],[0,a.height()],
document.body)[1]);var h=$("<div>");h.addClass("lapp-edit-item-box");var m=$("<div>");m.addClass("lapp-triangle");var w=$("<div>");w.addClass("lapp-edit-tab-bar lapp-edit-text lapp-edit-text-bottom");w.text(B.get("editTab","\u7f16\u8f91\u76ee\u5f55"));w.css("height",M.ITEM_HEIGHT+"px");w.on("click",function(){t&&x();q()});var u=$("<div>");u.addClass("lapp-edit-card lapp-edit-text lapp-edit-text-bottom");u.text(B.get("editCard","\u7f16\u8f91\u53d1\u5e03\u8bb0\u5f55"));u.css("height",M.ITEM_HEIGHT+
"px");u.on("click",function(){l(!0)});if(pa.isUserAgreementAndDeactivateShown()){var C=$("<div>");C.addClass("lapp-account-info lapp-edit-text lapp-edit-text-bottom");C.text(B.get("accountInfo","\u8d26\u6237\u4fe1\u606f"));C.css("height",M.ITEM_HEIGHT+"px");C.on("click",function(){var G=function(){var F=new com.kingdee.bos.qing.lapp.agreement.AccountInfoPane;F.initEnv(function(){Q.showPage()},p);Q.hidePage();t&&x();F.show()};com.kingdee.bos.qing.lapp.agreement?G():(za.setCallback(G),za.loadJs(ya.getResourcePrefix()+
"qing-lapp/core/qing-lapp-agreement.js"))})}var A=$("<div>");A.addClass("lapp-edit-custom-sort lapp-edit-text lapp-edit-text-bottom");A.text(B.get("customSort","\u624b\u52a8\u6392\u5e8f"));A.css("height",M.ITEM_HEIGHT+"px");A.on("click",function(){t&&x();n()});w.appendTo(h);u.appendTo(h);A.appendTo(h);C&&C.appendTo(h);w=h.children().length;h.css("height",M.ITEM_HEIGHT*w+"px");h.appendTo(b);m.appendTo(b);b.appendTo(k);k.on("mousedown touchmove",D)},D=function(k){k=k.target;if(k!=a[0]&&k!=e[0]){for(;k&&
k!=document.body;){if(k==b[0])return;k=$(k).parent()[0]}x()}};this.toggleEditStatus=function(k){t&&x();if(k)if(c.hideHamburgerBtn(),v&&v(),d)d.css("display","block");else{d=$("<div>");d.addClass("lapp-tab-bar-finish touch");d.attr("data-touchFeedback","true");d.on("click",function(){l(!1)});k=$("<span>");k.addClass("lapp-tab-bar-finish-icon");O.background(k,"btn_editing");var h=$("<span>");h.text(B.get("done","\u5b8c\u6210"));h.addClass("lapp-tab-bar-finish-text");k.appendTo(d);h.appendTo(d);d.appendTo(f)}else d&&
d.css("display","none"),c.showHamburgerBtn(),r&&r()}}function J(){var c=this,f,a,e,b,d,g,p,t,v,r=!1,q=!1,l,n,z;this.getJqUi=function(){f||(f=$("<div>"),na.layoutCtrlWithLRTB(f,0,0,null,v?88:44,null,44),a=$("<div>"),a.addClass("lapp-combobox touch"),a.attr("data-touchFeedback","true"),a.on("click",x),e=$("<div>"),e.addClass("lapp-combobox-selected-text"),e.text(B.get("all","\u5168\u90e8")),b=$("<div>"),b.addClass("lapp-combobox-arrow"),O.background(b,"icon_down"),e.appendTo(a),b.appendTo(a),a.appendTo(f),
h(),m());return f};this.setEditStatus=function(u){(q=u)?p.css("width","78%"):p.css("width","70%")};this.setShowHeadBar=function(u){v=u};this.setFunShowCard=function(u){l=u};this.setFunShowHamburgerBtn=function(u){z=u};this.setFunSearchAnalysisByKeyword=function(u){n=u};this.getSearchBox=function(){return t};this.refresh=function(){t.clearText();e.text(B.get("all","\u5168\u90e8"));p.css("width","70%");z(!0)};this.clearSearchText=function(){$.trim(t.getText())&&(t.clearText(),p.css("width","70%"),n&&
n(""))};var x=function(){r=!r;1==r?y():(O.background(b,"icon_down"),$(document.body).off("mousedown touchmove",k),d&&d.remove(),d=null)},y=function(){O.background(b,"icon_up");var u=$(document.body);d=$("<div>");d.addClass("lapp-combobox-list");d.css("top",na.upwardCoordinate(a[0],[0,a.height()],document.body)[1]);var C=$("<div>");C.addClass("lapp-combobox-list-item touch");C.text(B.get("all","\u5168\u90e8"));C.attr("data-touchFeedback","true");C.on("click",function(){D(J.TYPE_ALL)});var A=$("<div>");
A.addClass("lapp-combobox-list-item touch");A.text(B.get("myOwn","\u53ea\u770b\u81ea\u5df1"));A.attr("data-touchFeedback","true");A.on("click",function(){D(J.TYPE_SELF)});var G=$("<div>");G.addClass("lapp-combobox-list-item touch");G.text(B.get("anyoneElse","\u53ea\u770b\u4ed6\u4eba"));G.attr("data-touchFeedback","true");G.on("click",function(){D(J.TYPE_OTHER)});C.appendTo(d);A.appendTo(d);G.appendTo(d);d.appendTo(u);u.on("mousedown touchmove",k)},D=function(u){c.setComboBoxSelectedText(u);x();l&&
l(u)};this.setComboBoxSelectedText=function(u){u==J.TYPE_ALL?e.text(B.get("all","\u5168\u90e8")):u==J.TYPE_SELF?e.text(B.get("myOwn","\u53ea\u770b\u81ea\u5df1")):e.text(B.get("anyoneElse","\u53ea\u770b\u4ed6\u4eba"))};var k=function(u){u=u.target;if(u!=a[0]&&u!=e[0]&&u!=b[0]){for(;u&&u!=document.body;){if(u==d[0])return;u=$(u).parent()[0]}x()}},h=function(){p=$("<div>");p.addClass("lapp-search-bar");t=new Za;t.setSearchListenerDelay(800);t.addSearchListener(function(u){(u=$.trim(u.getText()))?(p.css("width",
"78%"),z(!1)):(p.css("width","70%"),!q&&z(!0));n&&n(u)});t.getJqUi().appendTo(p);p.appendTo(f)},m=function(){var u=$("<div>");u.css("background-color","#fff");na.layoutCtrlWithLRTB(u,null,0,"14%",0,null,44);g=$("<span>");Q.isCardView()?O.background(g,"card_view"):O.background(g,"list_view");g.on("click",function(){q?Q.doTabLockedTip():(Q.refreshAnalysisTabPane(!0),w(Q.getVisitedViewType()))});na.layoutCtrlWithLRTB(g,null,"44%",18,12,null,18);g.appendTo(u);u.appendTo(f)},w=function(u){(new T("config",
function(C){})).updateConfig(u)}}function P(c){var f=this,a,e,b=!1,d,g,p,t={};this.remove=function(){a&&a.remove()};this.refresh=function(){if(a){b=!1;e.text(B.get("checkAll","\u5168\u9009"));for(var q in c)f.updateBtnText(q,q)}};this.setFunSelectAllListener=function(q){d=q};this.setFunNothingCanCheck=function(q){g=q};this.setFunGetCheckedAnalysisIds=function(q){p=q};this.setEditStatus=function(q){var l=$(".lapp-bottom-bar");if(q){l.css("display","none");if(!a){a=$("<div>");a.addClass("lapp-analysis-bottom-bar");
e=$("<span>");e.addClass("lapp-analysis-bottom-bar-button");e.text(B.get("checkAll","\u5168\u9009"));e.on("click",r);e.appendTo(a);for(var n in c)$("<div class='lapp-analysis-bottom-bar-border'>").appendTo(a),q=$("<span>"),q.addClass("lapp-analysis-bottom-bar-button"),q.text(n),v(q,n),q.appendTo(a),t[n]=q;a.appendTo(Q.getJqPage())}a.show()}else l.css("display",""),a&&a.hide()};this.updateBtnText=function(q,l){a&&t[q].text(l)};this.setCheckedAll=function(q){e&&b!=q&&((b=!b)&&g()&&(b=!1),b?e.text(B.get("cancelCheckAll",
"\u53d6\u6d88\u5168\u9009")):e.text(B.get("checkAll","\u5168\u9009")))};var v=function(q,l){q.on("click",function(){if(0==p())(new ca).show(B.get("haveNotChosenAnAnalysis","\u60a8\u8fd8\u6ca1\u6709\u9009\u62e9\u5206\u6790\u54e6"),ca.LENGTH_SHORT);else(0,c[l])()})},r=function(){b=!b;d&&d(b);b&&g()&&(b=!1,d&&d(b));b?e.text(B.get("cancelCheckAll","\u53d6\u6d88\u5168\u9009")):e.text(B.get("checkAll","\u5168\u9009"))}}function V(){var c,f;this.remove=function(){c&&c.remove()};this.refresh=function(){c.refresh()};
this.setFunSelectAllListener=function(a){c.setFunSelectAllListener(a)};this.setFunGetCheckedAnalysisIds=function(a){f=a;c.setFunGetCheckedAnalysisIds(f)};this.setFunNothingCanCheck=function(a){c.setFunNothingCanCheck(a)};this.setEditStatus=function(a){c.setEditStatus(a);!a&&c.refresh()};this.create=function(){var a={};this.protectedCreate(a);c=new P(a)};this.protectedCreate=function(a){throw Error("override me");};this.setCheckedAll=function(a){c.setCheckedAll(a)};this.protectedMethod={updateBtnText:function(a,
e){c.updateBtnText(a,e)},getCheckedAnalysisIds:function(){return f()}}}function da(){V.call(this);var c=this.protectedMethod,f;this.setCancelFollowListener=function(e){f=e};this.protectedCreate=function(e){e[B.get("unfollow","\u53d6\u6d88\u5173\u6ce8")]=a};this.updateCancelFollowText=function(e){e=e?" ("+e+")":"";c.updateBtnText(B.get("unfollow","\u53d6\u6d88\u5173\u6ce8"),B.get("unfollow","\u53d6\u6d88\u5173\u6ce8")+e)};var a=function(){var e=new sa;e.setJqOwner(Q.getJqPage());e.setMessage(B.get("wouldCancelAnalysis",
"\u5c06\u4f1a\u53d6\u6d88\u5173\u6ce8\u9009\u4e2d\u5206\u6790\uff0c\u786e\u5b9a\u53d6\u6d88\u5173\u6ce8\u5417\uff1f"));e.showDialog();e.setClosingAction(function(b){b&&(new T("lappAnalysisMgr",function(d){(new ca).show(B.get("analysisCancelFollowSuccess","\u64cd\u4f5c\u6210\u529f"),ca.LENGTH_SHORT);f&&f()})).updateFavorites(c.getCheckedAnalysisIds())})}}function ea(){V.call(this);var c=this.protectedMethod,f=this,a,e,b;this.setMoveListener=function(t){a=t};this.setDeleteListener=function(t){e=t};
this.setDirName=function(t){b=t};this.protectedCreate=function(t){t[B.get("moveTo","\u79fb\u52a8\u81f3")]=d;t[B.get("deletes","\u5220\u9664")]=p};this.updateMoveText=function(t){t=t?" ("+t+")":"";c.updateBtnText(B.get("moveTo","\u79fb\u52a8\u81f3"),B.get("moveTo","\u79fb\u52a8\u81f3")+t)};var d=function(){(new T("lappDirectoryMgr",function(t){var v=new Aa;v.fromJsonObject(t);g(v)})).getOwnDirList()},g=function(t){var v=t.getCount();if(1==v)(new ca).show(B.get("canNotMoveTab","\u60a8\u5f53\u524d\u53ea\u6709\u4e00\u4e2a\u76ee\u5f55\uff0c\u65e0\u6cd5\u79fb\u52a8\u81f3\u5176\u5b83\u76ee\u5f55\u3002"),
ca.LENGTH_SHORT);else{for(var r=[],q=0;q<v;q++){var l=t.get(q);b&&b==l.getName()||(l=new vb(l),r.push(l))}var n=c.getCheckedAnalysisIds();t=new Ra;t.setItemModels(r);t.setSelectedListener(function(z){(new T("lappAnalysisMgr",function(x){if(x&&0<x.length){f.updateMoveText(x.length);var y=n.length-x.length,D=x.length;(new ca).show("\u76ee\u6807\u76ee\u5f55\u201c"+z.getDirName()+"\u201d\u4e0b\u5b58\u5728\u540c\u540d\u53d1\u5e03\u8bb0\u5f55\uff0c\u79fb\u52a8\u6210\u529f"+y+"\u6761\uff0c\u5931\u8d25"+
D+"\u6761",ca.LENGTH_SHORT)}else(new ca).show(B.get("analysisMoveCardSuccess","\u79fb\u52a8\u6210\u529f"),ca.LENGTH_SHORT);a&&a(x)})).moveToOtherDirectory(z.getDirectoryId(),n)});t.show()}},p=function(){var t=new sa;t.setJqOwner(Q.getJqPage());t.setMessage(B.get("wouldDeleteAnalysis","\u5c06\u4f1a\u5220\u9664\u9009\u4e2d\u5206\u6790\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f"));t.showDialog();t.setClosingAction(function(v){v&&((new T("lappAnalysisMgr",function(r){(new ca).show(B.get("analysisDeleteCardSuccess",
"\u5220\u9664\u6210\u529f"),ca.LENGTH_SHORT);e&&e()})).deleteAnalyses(c.getCheckedAnalysisIds()),Ja.interestInBehavior(Ka.SCENE_DELETE_CARD))})}}function Y(){var c,f,a;this.getJqUi=function(){c||(f=Q.isCardView()?new qa:new I,f.setOpenDirName(a),c=f.getJqUi(),ja&&b());return c};this.show=function(){c&&c.css("display","block")};this.hidden=function(){c&&c.css("display","none")};this.remove=function(){f&&f.refresh();c&&c.remove()};this.setOpenDirName=function(d){a=d};this.getOpenDirName=function(){return f.getOpenDirName()};
var e=function(){(new $a).createUi()},b=function(){var d=new ta;d.setTitle(Q.getTitle());d.setQAListener(e);d.setBackListener(function(){pa.closeWebView()});d.getJqUi().appendTo(c)}}function K(){this.getJqUi=function(){throw Error("override me");};this.refresh=function(){throw Error("override me");};this.getOpenDirName=function(){throw Error("override me");};this.setOpenDirName=function(c){throw Error("override me");}}function I(){K.call(this);var c,f,a=!1,e=I.FollowTabPane,b=J.TYPE_ALL,d="",g=[],
p;this.getJqUi=function(){c||(c=$("<div>"),c.addClass("lapp-main"),v(),r(),l(),Y.CachePage.setCachePageListener(t));return c};this.refresh=function(){f.getCurrentTabPane()&&f.getCurrentTabPane().setEditStatus(!1)};this.getOpenDirName=function(){if(e==I.AllTabPane){var z=f.getCurrentTabPane().getOpenDirNames();if(0<z.length)return z[0]}return null};this.setOpenDirName=function(z){z&&(e=I.AllTabPane,g=[z])};var t=function(z){var x=f.getCurrentTabPane(),y=new Sa;y.setTabIndex(e);y.setKeyword(x.getKeyword());
y.setType(x.getType());e==I.AllTabPane&&y.setOpenDirNames(x.getOpenDirNames());z(y)},v=function(){_oHamburgerContainer=new M;_oHamburgerContainer.setShowHeadBar(ja);_oHamburgerContainer.setFunToggleEditStatus(function(){f.lock()},function(){f.unLock();f.getCurrentTabPane().loadOperationLimitTips(!1)});_oHamburgerContainer.setFunEditDir(function(){Q.hidePage();(new ab).createUi()});_oHamburgerContainer.setFunEditCard(function(z){q(z)});_oHamburgerContainer.setFunCustomSort(function(){Q.hidePage();
(new bb).createUi()});_oHamburgerContainer.getJqUi().appendTo(c)},r=function(){_oSearchContainer=new J;_oSearchContainer.setShowHeadBar(ja);_oSearchContainer.setFunShowCard(function(z){b=z;f.getCurrentTabPane().filter(b,d)});_oSearchContainer.setFunSearchAnalysisByKeyword(function(z){d=z;f.getCurrentTabPane().filter(b,d)});_oSearchContainer.setFunShowHamburgerBtn(function(z){z?_oHamburgerContainer.showHamburgerBtn():_oHamburgerContainer.hideHamburgerBtn()});_oSearchContainer.getJqUi().appendTo(c)},
q=function(z){a=z;_oSearchContainer.setEditStatus(a);f.getCurrentTabPane().setEditStatus(z);!a&&_oSearchContainer.clearSearchText();p.enable(!a)},l=function(){f=new L;var z=[new xa,new cb];z[0].loadContent(function(){z[0].hasContent()||(e=I.AllTabPane);var x=$("<div>");x.addClass("lapp-swiper-bar");ja&&x.addClass("lapp-swiper-bar-headbarshown");x.css("overflow-y","auto");x.appendTo(c);p=new Ha;p.bindTarget(x);p.setFunRefresh(f.refreshContent);n();for(var y=0;y<z.length;y++){var D=z[y];D instanceof
cb&&D.setOpenDirNames(g);D.setFunNextEditStatusListener(_oHamburgerContainer.toggleEditStatus);D.setFunEditStatusListener(q);f.addTab(D,e==D.getListViewTabPaneType())}f.show(_oHamburgerContainer.getJqTabWrap(),x);f.addTabChangedListener(function(k,h){_oSearchContainer.refresh();b=J.TYPE_ALL;d="";e=h.getListViewTabPaneType()})})},n=function(){Y.CachePage.loadListViewCachePage(function(z){e=z.getTabIndex();e==I.AllTabPane&&(g=z.getOpenDirNames())})}}function L(){var c=this,f=!1,a,e,b,d=[],g=!1;this.getCurrentTabPane=
function(){return b};this.getContainer=function(){f||(v(),f=!0);return e};this.addTabChangedListener=function(r){d.push(r)};this.lock=function(){g=!0};this.unLock=function(){g=!1};var p=function(r){for(var q=0;q<d.length;q++)(0,d[q])(c,r)};this.show=function(r,q){a.appendTo(r);e.appendTo(q)};this.addTab=function(r,q){v();var l=$("<div>");l.text(r.getTitle());l.addClass("lapp-tab touch");l.css("margin-left","20px");l.appendTo(a);l.on("click",function(n){g?Q.doTabLockedTip():t(l,r)});q&&t(l,r)};this.refreshContent=
function(r){b&&b.remove(!0);b.loadContent(function(q){r(q);b.filter(b.getType(),b.getKeyword())}).appendTo(e)};var t=function(r,q){b&&b.remove();b=q;a.children(".lapp-tab").removeClass("lapp-tab_selected");r.addClass("lapp-tab_selected");r=q.getJqUi();for(var l=e.children(),n=!1,z=0;z<l.length;z++)l[z]==r[0]&&(n=!0,p(q));n||(r.appendTo(e),p(q))},v=function(){f||(f=!0,a=$("<div>"),a.addClass("lapp-tab-container"),a.css("justify-content","center"),a.css("margin-left","30px"),e=$("<div>"))}}function X(){var c=
this,f,a,e=J.TYPE_ALL,b,d,g;this.getKeyword=function(){return b};this.getType=function(){return e};this.setFunEditStatusListener=function(p){f=p};this.setFunNextEditStatusListener=function(p){a=p};this.getJqUi=function(){throw Error("override me");};this.getTitle=function(){throw Error("override me");};this.getListViewTabPaneType=function(){throw Error("override me");};this.remove=function(p){p||(e=J.TYPE_ALL,b="");g&&g.remove();g=null;c.protectedRemove()};this.protectedRemove=function(){throw Error("override me");
};this.filter=function(p,t){e=p;b=t;g&&g.remove();g=null;c.protectedFilter(e,t)};this.protectedFilter=function(p,t){throw Error("override me");};this.setEditStatus=function(p){c.protectedSetEditStatus(p);a&&a(p)};this.protectedSetEditStatus=function(p){throw Error("override me");};this.loadOperationLimitTips=function(p){p?(d||(d=$("<div>"),d.addClass("lapp-edit-limit-tips"),d.text("\u65e0\u6cd5\u79fb\u52a8\u548c\u5220\u9664\u6765\u81ea\u4ed6\u4eba\u7684\u53d1\u5e03\u8bb0\u5f55"),d.prependTo(void 0)),
d&&d.show()):d&&d.hide()};this.protectedMethod={getVisitType:function(){return e},createNoAnalysisUi:function(p,t,v){if(g)return g;g=$("<div>");Q.createNoAnalysisUi(g,p,t,!1,v);na.layoutCtrlWithLRTB(g,0,0,null,0,0,null);return g},getFunEditStatusListener:function(){return f}}}function xa(){X.call(this);var c=this,f=this.protectedMethod,a,e,b,d=!0,g;this.getJqUi=function(){a||p(null);return a};this.loadContent=function(v){p(v);return a};this.hasContent=function(){return d};this.getTitle=function(){return B.get("follow",
"\u5173\u6ce8")};this.getListViewTabPaneType=function(){return I.FollowTabPane};this.protectedRemove=function(){a&&a.remove();a=null;g&&g.remove()};this.protectedFilter=function(v,r){g.refresh();g.updateCancelFollowText(b.getCheckedAnalysisIds().length);0==b.filter(v,r)&&f.createNoAnalysisUi(!0,!1,!1);g.setCheckedAll(b.isCheckedAll())};this.protectedSetEditStatus=function(v){b&&b.loadEditStatus(v);g.setEditStatus(v)};var p=function(v){a=$("<div>");a.addClass("lapp-list-view-analysis-pane");t(v);g=
new da;g.create();g.setFunSelectAllListener(function(r){b.checkAll(r);g.updateCancelFollowText(b.getCheckedAnalysisIds().length)});g.setFunNothingCanCheck(function(){return!b.hasVisibleAnalysis()});g.setFunGetCheckedAnalysisIds(function(){return b.getCheckedAnalysisIds()});g.setCancelFollowListener(function(){f.getFunEditStatusListener()(!1);b.refresh();t(function(){c.filter(c.getType(),c.getKeyword())})})},t=function(v){(new T("lappAnalysisMgr",function(r){e=[];for(var q=0;q<r.length;q++){var l=
new fa;l.fromJsonObject(r[q]);e.push(l)}0==e.length?(r=f.createNoAnalysisUi(!1,!0,!1),d=!1,r.appendTo(a)):(b=new db,b.setAnalysisList(e),b.setCheckListener(function(){g.setCheckedAll(b.isCheckedAll());g.updateCancelFollowText(b.getCheckedAnalysisIds().length)}),b.getJqUi().appendTo(a));v&&v(!0)})).getFollow(J.TYPE_ALL)}}function cb(){X.call(this);var c=this.protectedMethod,f=this,a,e,b,d,g,p=[];this.getDirectorySet=function(){return e};this.getJqUi=function(){a||t(null);return a};this.loadContent=
function(q){t(q);return a};this.getTitle=function(){return B.get("all_","\u6240\u6709")};this.getListViewTabPaneType=function(){return I.AllTabPane};this.protectedRemove=function(){a&&a.remove();a=null;d.remove()};this.protectedFilter=function(q,l){d.refresh();d.updateMoveText(b.getCheckedAnalysisIds().length);0==b.filter(q,l)&&(l?c.createNoAnalysisUi(!0,!1,!1):0==e.getAllDirectory().length&&c.createNoAnalysisUi(!1,!1,!0));g&&b.hasOperationLimit()?f.loadOperationLimitTips(!0):f.loadOperationLimitTips(!1);
d.setCheckedAll(b.isCheckedAll())};this.protectedSetEditStatus=function(q){g=q;b.loadEditStatus(q);d.setEditStatus(q);g&&b.hasOperationLimit()?f.loadOperationLimitTips(!0):f.loadOperationLimitTips(!1)};this.getOpenDirNames=function(){return b.getOpenDirNames()};this.setOpenDirNames=function(q){p=q};var t=function(q){a=$("<div>");a.addClass("lapp-list-view-analysis-pane");r(function(l){0==l.length&&c.createNoAnalysisUi(!1,!1,!0);b=new wb;b.setOpenDirNames(p);b.setCheckListener(function(){d.updateMoveText(b.getCheckedAnalysisIds().length);
d.setCheckedAll(b.isCheckedAll())});b.setDirList(l);b.getJqUi().appendTo(a);q&&q(!0)});d=new ea;d.create();d.setFunSelectAllListener(function(l){b.checkAll(l);d.updateMoveText(b.getCheckedAnalysisIds().length)});d.setFunNothingCanCheck(function(){return!b.hasVisibleAnalysis()});d.setFunGetCheckedAnalysisIds(function(){return b.getCheckedAnalysisIds()});d.setMoveListener(function(l){v()});d.setDeleteListener(function(){v()})},v=function(){b.refresh();r(function(q){b.setDirList(q);b.getJqUi().appendTo(a);
c.getFunEditStatusListener()(!1);f.filter(f.getType(),f.getKeyword())})},r=function(q){(new T("lappDirectoryMgr",function(l){e=new Aa;e.fromJsonObject(l);q(e.getAllDirectory())})).getAllDirContent()}}function wb(){var c,f={},a={},e=[],b=[],d,g,p,t;this.getJqUi=function(){if(!c){c=$("<div>");g=[];p=[];for(var l=0;l<d.length;l++){var n=d[l],z=new db;z.setAnalysisList(n.getAnalysisList());z.setFunOperationLimit(v);z.setCheckListener(t);f[n.getName()]=z;z.isAllOperationLimitAnalysis(!0)&&p.push(n);z.isAllOperationLimitAnalysis(!1)&&
g.push(n);var x=z.getJqUi();x.css("margin-left","20px");z.hide();n=r(n);b.push(n);n.appendTo(c);x.appendTo(c)}}return c};this.getOpenDirNames=function(){for(var l=[],n=0;n<d.length;n++){var z=d[n];a[z.getName()]&&0<z.getAnalysesCount()&&l.push(z.getName())}return l};this.setOpenDirNames=function(l){for(var n=0;n<l.length;n++)a[l[n]]=!0};this.setCheckListener=function(l){t=l};this.setDirList=function(l){d=l};this.loadEditStatus=function(l){for(var n in f)f[n].loadEditStatus(l);if(!l)for(l=0;l<b.length;l++)f[d[l].getName()].clearCheckedAnalysis()};
this.hasVisibleAnalysis=function(){for(var l=0;l<b.length;l++){var n=d[l];if(b[l].is(":visible")&&f[n.getName()].hasVisibleAnalysis())return!0}return!1};this.checkAll=function(l){for(var n=0;n<b.length;n++){var z=d[n];b[n].is(":visible")&&f[z.getName()].checkAll(l)}t&&t()};this.isCheckedAll=function(){for(var l=0;l<b.length;l++){var n=d[l];if(b[l].is(":visible")&&!f[n.getName()].isCheckedAll())return!1}return!0};this.refresh=function(){c&&c.remove();c=null;f={};b=[]};this.filter=function(l,n){var z=
0;arrNewSearchOpen=[];for(var x=0;x<d.length;x++){var y=d[x],D=f[y.getName()],k=D.filter(l,n),h=b[x],m=!0;l==J.TYPE_SELF&&-1!=p.indexOf(y)?m=!1:l==J.TYPE_OTHER&&-1!=g.indexOf(y)&&(m=!1);0==k&&n&&(m=!1);var w=h,u=a[y.getName()];m?(w.show(),u&&D.show()):(w.hide(),D.hide());w=!1;-1!=e.indexOf(y.getName())&&(w=!0);m&&n&&(a[y.getName()]?(w=!1,-1!=e.indexOf(y.getName())&&arrNewSearchOpen.push(y.getName())):(w=!0,arrNewSearchOpen.push(y.getName())));w&&h.click();z+=k}e=arrNewSearchOpen;return z};this.getCheckedAnalysisIds=
function(){for(var l=[],n=0;n<d.length;n++){var z=f[d[n].getName()];l=l.concat(z.getCheckedAnalysisIds())}return l};this.hasOperationLimit=function(){for(var l=0;l<d.length;l++){var n=d[l];if(b[l].is(":visible")&&f[n.getName()].hasOperationLimitAnalysis())return!0}return!1};var v=function(l){return l.getPermissionInfo()?!0:!1},r=function(l){var n=$("<div>");n.addClass("lapp-list-view-dir-item");var z=f[l.getName()],x=$("<span>");x.addClass("lapp-list-view-icon");x.appendTo(n);var y=$("<span>");y.addClass("lapp-list-view-dir-item-name");
y.text(l.getName());y.appendTo(n);var D=$("<span>");D.appendTo(n);y=a[l.getName()];q(D,x,y);y?z.show():z.hide();n.on("click",function(){var k=a[l.getName()]?a[l.getName()]:!1;k=!k;a[l.getName()]=k;q(D,x,k);k?z.show():z.hide()});return n},q=function(l,n,z){z?(l.removeClass("lapp-triangle-down"),l.addClass("lapp-triangle-up"),O.background(n,"list_dir_open")):(l.removeClass("lapp-triangle-up"),l.addClass("lapp-triangle-down"),O.background(n,"list_dir_close"))}}function db(){var c=this,f,a=[],e={},b=
[],d=[],g=[],p=[],t,v,r=!1;this.getJqUi=function(){if(!f){f=$("<div>");for(var h=0;h<b.length;h++){var m=l(b[h]);m.appendTo(f);a.push(m)}}return f};this.setCheckListener=function(h){v=h};this.refresh=function(){f&&f.remove();a=[];e={};d=[];p=[]};this.hide=function(){f&&f.hide()};this.show=function(){f&&f.show()};this.setAnalysisList=function(h){g=b=h};this.getAnalysisList=function(){return b};this.getCheckedAnalysisIds=function(){return d};this.hasVisibleAnalysis=function(){for(var h=0;h<g.length;h++)if(!q(g[h]))return!0;
return!1};this.isAllOperationLimitAnalysis=function(h){if(h){if(0==b.length)return!1;for(h=0;h<b.length;h++)if(!q(b[h]))return!1}else for(h=0;h<b.length;h++)if(q(b[h]))return!1;return!0};this.hasOperationLimitAnalysis=function(){for(var h=0;h<g.length;h++)if(q(g[h]))return!0;return!1};this.setFunOperationLimit=function(h){t=h};var q=function(h){return t&&t(h)?!0:!1};this.clearCheckedAnalysis=function(){for(var h=0;h<b.length;h++){var m=b[h],w=-1!=d.indexOf(m.getId());if(w){w=!w;z(w,m.getId());var u=
e[m.getId()];x(m,u,w)}}v&&v()};this.checkAll=function(h){for(var m=0;m<g.length;m++){var w=g[m];-1!=p.indexOf(w.getId())!=h&&n(w)}};this.isCheckedAll=function(){for(var h=0;h<g.length;h++){var m=g[h];if(!q(m)&&-1==p.indexOf(m.getId()))return!1}return!0};this.loadEditStatus=function(h){r=h;for(var m=0;m<b.length;m++){var w=b[m].getId();w=e[w];h?w.show():w.hide()}!h&&c.clearCheckedAnalysis()};this.filter=function(h,m){g=[];for(var w=0,u=0;u<b.length;u++){var C=b[u],A=!0;h&&(h==J.TYPE_SELF&&C.getPermissionInfo()&&
(A=!1),h!=J.TYPE_OTHER||C.getPermissionInfo()||(A=!1));m&&-1==C.getName().toLocaleLowerCase().indexOf(m.toLocaleLowerCase())&&(A=!1);var G=a[u],F=G.find(".lapp-list-view-analysis-item-name");A?(G.show(),m?(A=C.getName(),Da.highLightbyKeyword(F,A,m)):F.text(C.getName()),w++,g.push(C)):(G.hide(),F.text(C.getName()))}p=d;h=[];for(u=0;u<g.length;u++)m=g[u].getId(),-1!=p.indexOf(m)&&h.push(m);p=h;return w};var l=function(h){var m=$("<div>");m.addClass("lapp-list-view-analysis-item");m.on("click",function(){if(r)w.click();
else{var G=new Ia;G.setAnalysis(h);G.setFunVisibilityChangeCallback(A);G.createUi()}});var w=$("<div>");w.addClass("lapp-list-view-checkbox");x(h,w,!1);w.hide();w.appendTo(m);e[h.getId()]=w;w.on("click",function(G){G.stopPropagation();n(h)});var u=$("<span>");u.addClass("lapp-list-view-icon");k(h,u);u.appendTo(m);u=$("<span>");u.addClass("lapp-list-view-analysis-item-name");u.text(h.getName());u.appendTo(m);u=$("<span>");O.background(u,"icon_info");na.layoutCtrlWithLRTB(u,null,40,18,13,null,18);u.appendTo(m);
u.on("click",function(G){G.stopPropagation();r?Q.doTabLockedTip():Da.showAnalysisInfoDialog(h)});var C=$("<span>");C.addClass("lapp-analysis-icon-follow");y(C,h.isFavorite());na.layoutCtrlWithLRTB(C,null,2,null,2,null,null);C.appendTo(m);C.on("click",function(G){G.stopPropagation();r?Q.doTabLockedTip():(D(h),y(C,!h.isFavorite()),h.setFavorite(!h.isFavorite()))});var A=function(){var G=h.getId();(new T("lappAnalysisMgr",function(F){var N=new fa;N.fromJsonObject(F);y(C,N.isFavorite());h.setFavorite(N.isFavorite())})).getAnalysis(G)};
return m},n=function(h){if(!q(h)){var m=h.getId(),w=-1!=p.indexOf(m);w=!w;z(w,m);x(h,e[m],w);v&&v()}},z=function(h,m){if(h)p.push(m),d.push(m);else{h=p;var w=h.indexOf(m);-1!=w&&h.splice(w,1);h=d;m=h.indexOf(m);-1!=m&&h.splice(m,1)}},x=function(h,m,w){q(h)?O.background(m,"icon_small_checkbox_unable"):w?O.background(m,"icon_small_checkbox_checked"):O.background(m,"icon_small_checkbox_unchecked")},y=function(h,m){m?O.background(h,"icon_followed"):O.background(h,"icon_follow")},D=function(h){(new T("lappAnalysisMgr",
function(m){})).updateFavorite(h.getId())},k=function(h,m){switch(h.getViewType()){case fa.VIEW_TYPE_LONGER:h="icon_longer";break;case fa.VIEW_TYPE_SQUARE:h="icon_square";break;case fa.VIEW_TYPE_DASHBOARD:h="icon_dsb";break;default:h="icon_longer"}O.background(m,h)}}function qa(){K.call(this);var c,f,a,e=0,b,d,g;this.getJqUi=function(){c||(c=$("<div>"),c.addClass("lapp-main"),a=new Ta,Y.CachePage.loadCachePageDirectoryList(t),r(),l(),f=$("<div>"),f.addClass("lapp-swiper-bar"),ja&&f.addClass("lapp-swiper-bar-headbarshown"),
f.appendTo(c),n(),a.setFunChangeTab(v),a.setFunLockedCallback(Q.doTabLockedTip),Y.CachePage.setCachePageListener(p));return c};this.refresh=function(){a.getCurrentTabPane().setEditMode(!1)};this.getOpenDirName=function(){var x=a.getCurrentTabPane();return x instanceof eb?x.getDirectory().getName():null};this.setOpenDirName=function(x){x&&(b=x)};var p=function(x){var y=a.getCurrentTabPaneIndex(),D=a.getCurrentTabPane(),k=D.getAnalysisEditor(),h=k.getAnalysisList(),m=k.getScrollTop(),w=k.getPage(),
u=k.isHasNextPage(),C=k.isAuthorizedAnalysis();k=k.getAllId();var A=D.getLastUpdateTime(),G=$.trim(g.getSearchBox().getText()),F=new La;F.setTabIndex(y);F.setAnalysisList(h);F.setScrollTop(m);F.setAnalysisListPage(w);F.setHasNextPage(u);F.setLastUpdateTime(A);F.setAuthorizedAnalysis(C);F.setAllId(k);F.setKeyword(G);F.setType(D.getType());x(F)},t=function(x){e=x.getTabIndex()},v=function(x){g.refresh();x.setType(J.TYPE_ALL);x.setKeyWord("")},r=function(){d=new M;d.setShowHeadBar(ja);d.setFunToggleEditStatus(function(){a.lock()},
function(){a.unlock()});d.setFunEditDir(function(){Q.hidePage();(new ab).createUi()});d.setFunEditCard(function(x){q(x)});d.setFunCustomSort(function(){Q.hidePage();(new bb).createUi()});d.getJqUi().appendTo(c);Y.EditModeSetting.setFunEditMode(q)},q=function(x){g.setEditStatus(x);a.getCurrentTabPane().setEditMode(x);d.toggleEditStatus(x);!x&&g.clearSearchText()},l=function(){g=new J;g.setShowHeadBar(ja);g.setFunShowCard(function(x){a.getCurrentTabPane().changeByType(x)});g.setFunSearchAnalysisByKeyword(function(x){a.getCurrentTabPane().changeByKeyword(x)});
g.setFunShowHamburgerBtn(function(x){x?d.showHamburgerBtn():d.hideHamburgerBtn()});g.getJqUi().appendTo(c)},n=function(){(new T("lappDirectoryMgr",function(x){var y=new Aa;y.fromJsonObject(x);x=[];var D=new xb;D.setSearchBox(g.getSearchBox());D.setFunTypeSetting(z);D=new fb(B.get("follow","\u5173\u6ce8"),D);for(var k=[],h=0;h<y.getCount();h++){var m=y.get(h),w=new eb;w.setSearchBox(g.getSearchBox());w.setFunTypeSetting(z);w.setDirectory(m);k.push(new fb(m.getName(),w));m.isDefaultOpen()?e=h+1:b==
m.getName()&&(e=h+1)}x.push(D);x=x.concat(k);a.setInitialSlidePos(e);for(y=0;y<x.length;y++)D=x[y],a.addTab(D.getName(),D.getTabPane());a.show(d.getJqTabWrap(),f)})).getAllDirList()},z=function(x){g.setComboBoxSelectedText(x)}}function fb(c,f){this.getName=function(){return c};this.getTabPane=function(){return f}}function gb(){Ta.AbstractTabPane.call(this);var c=this,f,a,e,b,d,g=J.TYPE_ALL,p,t,v,r=!1;this.getAnalysisEditor=function(){return a};this.setSearchBox=function(n){e=n};this.setType=function(n){g=
n};this.getType=function(){return g};this.setKeyWord=function(n){p=n};this.getLastUpdateTime=function(){return t};this.setFunTypeSetting=function(n){v=n};this.remove=function(){a&&a.remove();a=null};this.getJqUi=function(){f||(f=$("<div>"),na.layoutCtrlWithLRTB(f,0,0,null,0,0,null),b=new Ma(f),b.setThreshold(300));return f};this.into=function(n){e.clearText();f.empty();t=null;Y.CachePage.isHasCache()?Y.CachePage.loadCachePageAnalysisList(q):c.protectedReLoading(n)};this.refresh=function(n){t=null;
Y.CachePage.isHasCache()?Y.CachePage.loadCachePageAnalysisList(q):c.protectedReLoading(n)};this.removeCache=function(){Y.CachePage.removeCache()};var q=function(n){var z=n.getAnalysisList(),x=n.getKeyword();g=n.getType();t=n.getLastUpdateTime();x&&e.setText(x);v(g);l(z,x,n.getAllId(),n.isAuthorizedAnalysis());a.setPage(n.getAnalysisListPage());a.setHasNextPage(n.isHasNextPage());setTimeout(function(){a.setScrollTop(n.getScrollTop())},100)};this.protectedReLoading=function(){throw Error("override me");
};this.setEditMode=function(n){r=n;a.setEditMode(n,c.protectedGetTabPaneName());d.enable(!r)};this.protectedGetTabPaneName=function(){throw Error("override me");};this.protectedGetLoadMoreDataListener=function(){return null};this.changeByType=function(n){g=n;f.empty();c.protectedReLoading()};this.changeByKeyword=function(n){p=n;c.protectedUpdateAnalysis(n)};this.protectedUpdateAnalysis=function(n){throw Error("override me");};var l=function(n,z,x,y){a||(a=new yb);a.remove();p=z;a.setKeyword(z);a.setCurrentPaneType(c.protectedGetTabPaneName());
a.setPullUpToLoadMore(!0);a.setCurAnalysis(n);a.setAllId(x);a.setAuthorizedAnalysis(y);a.setLoadMoreDataListener(c.protectedGetLoadMoreDataListener());a.getJqUi().appendTo(f);setTimeout(function(){b.loading()},1100);d||(d=new Ha,d.bindTarget(f),d.setFunRefresh(c.refresh));d.bindTriggerRef(a.getJqUi());return a};this.protectedMethod={updateAnalysisEditor:l,addArrAnalysis:function(n){a.addArrAnalysis(n)},setNextPage:function(n){a.setHasNextPage(n)},setDirName:function(n){a.setDirName(n)},getTimestamp:function(n){t?
n():(new T("tools",function(z){t=z;n()})).getTimestamp()},getKeyword:function(){return p}}}function xb(){gb.call(this);var c=this,f=this.protectedMethod,a=[],e=[];this.protectedGetTabPaneName=function(){return qa.FOLLOW_TAB_PANE};this.protectedReLoading=function(g){a=[];d(g)};this.protectedUpdateAnalysis=function(g){if(""!=g){var p=b(g);f.updateAnalysisEditor(p,g,e,!1)}else d()};var b=function(g){var p=a.length,t=[];e=[];g=new RegExp(g,"ig");for(var v=0;v<p;v++)a[v].getName().match(g)&&(t.push(a[v]),
e.push(a[v].getId()));return t},d=function(g){a=[];(new T("lappAnalysisMgr",function(p){for(var t=0;t<p.length;t++){var v=new fa;v.fromJsonObject(p[t]);a.push(v)}p=b(f.getKeyword());f.updateAnalysisEditor(p,f.getKeyword(),e,!1);g&&g(!0)})).getFollow(c.getType())}}function eb(){gb.call(this);var c=this,f=this.protectedMethod,a,e=[],b=!1;this.setDirectory=function(g){a=g};this.getDirectory=function(){return a};this.protectedReLoading=function(g){f.getTimestamp(function(){d(0,f.getKeyword(),g)})};this.protectedGetTabPaneName=
function(){return qa.DIRECTORY_TAB_PANE};this.protectedUpdateAnalysis=function(g){d(0,g)};this.protectedGetLoadMoreDataListener=function(){return d};var d=function(g,p,t){(new T("lappAnalysisMgr",function(v){e=v.ids;b=v.hasAuthorizedAnalysis;v=v.page;for(var r=v.content,q=[],l=0;l<r.length;l++){var n=new fa;n.fromJsonObject(r[l]);q.push(n)}0!=g?f.addArrAnalysis(q):f.updateAnalysisEditor(q,p,e,b);f.setNextPage(!v.last);f.setDirName(a.getName());t&&t(!0)})).getAllAnalysisList(a.getName(),g,p,c.getLastUpdateTime(),
c.getType())}}function bb(){var c,f,a,e,b,d,g,p=new Map,t=new Map,v,r=[];this.createUi=function(){c=$("<div>");c.addClass("lapp-sort-main-ui");C(c);ja&&u(Q.getTitle());f=$("<div>");f.addClass("lapp-sort-container");ja&&f.addClass("lapp-sort-content-headbarshown");a=$("<div>");a.addClass("lapp-sort-card");var A=$("<span>");A.addClass("lapp-sort-card-title-icon");var G=$("<span>");G.addClass("lapp-sort-card-head");G.text(B.get("customSort","\u624b\u52a8\u6392\u5e8f"));var F=$("<span>");F.addClass("lapp-sort-card-desc");
F.html(B.get("sortDesc","\u957f\u6309\u6392\u5e8f\u952e\u53ef\u62d6\u52a8\u6392\u5e8f</br>\u70b9\u51fb\u76ee\u5f55\u540d\u53ef\u4ee5\u5c55\u5f00\u76ee\u5f55\u4e0b\u7684\u53d1\u5e03\u8bb0\u5f55"));A.appendTo(a);G.appendTo(a);F.appendTo(a);e=$("<div>");e.addClass("lapp-sort-card-container");z();q();h();c.appendTo($(document.body));history.pushState(null,null,null);ka=function(){c.remove();Q.showPage()}};var q=function(){(new T("lappDirectoryMgr",function(A){g=new Aa;g.fromJsonObject(A);d=$("<div>");
d.addClass("lapp-sort-card-content");if(g&&!g.isEmpty()){A=g.getAllDirectory();var G=new Na;G.setFunLongTouch(l);G.setFunMoveEnd(n);G.setMoveItemClassName("lapp-sort-card-dir-analysis");G.setScrollClassName("lapp-sort-container");for(var F=0;F<A.length;F++){var N=A[F],W=$("<div>");W.addClass("lapp-sort-card-dir-analysis");var S=new Na;S.setFunLongTouch(l);S.setFunMoveEnd(n);S.setMoveItemClassName("lapp-sort-card-analysis-item");S.setScrollClassName("lapp-sort-container");var U=N.getAnalysisList();
S=k(U,S);p.set(N.getId(),S);x(N,G).appendTo(W);S&&S.appendTo(W);W.data("model",N);W.data("orderNumber",N.getSeq());W.appendTo(d)}}d.appendTo(e);e.appendTo(a);a.appendTo(f);f.appendTo(c)})).getAllDirContent()},l=function(A){return!0},n=function(A){},z=function(A){(new T("lappAnalysisMgr",function(G){for(var F=[],N=0;N<G.length;N++){var W=new fa;W.fromJsonObject(G[N]);F.push(W)}G=new Ua;G.setName(B.get("follow","\u5173\u6ce8"));G.setId("000");G.setAnalysesCount(F.length);N=new Na;N.setFunLongTouch(l);
N.setFunMoveEnd(n);N.setMoveItemClassName("lapp-sort-card-analysis-item");N.setScrollClassName("lapp-sort-container");b=k(F,N);p.set(G.getId(),b);v=x(G,null);F=$("<div>");F.addClass("lapp-sort-card-dir-analysis");F.append(v);F.append(b);e.prepend(F);A&&A()})).getFollow(J.TYPE_ALL)},x=function(A,G){var F=$("<div>");F.addClass("lapp-sort-card-dir-item");var N=p.get(A.getId()),W=$("<div>");W.addClass("lapp-sort-card-dir-item-touch-area");C(W);W.appendTo(F);var S=$("<span>");S.addClass("lapp-sort-card-dir-icon");
S.appendTo(W);var U=$("<span>");U.addClass("lapp-sort-card-dir-name");U.text(A.getName());U.appendTo(W);A.getAnalysesCount()&&(U=$("<span>"),U.addClass("lapp-sort-card-dir-num"),U.text("("+A.getAnalysesCount()+")"),U.appendTo(W));if(G){var aa=$("<div>");aa.addClass("lapp-sort-icon");U=$("<span>");U.addClass("lapp-sort-icon-area");O.background(U,"icon_sort");U.appendTo(aa)}aa&&aa.appendTo(F);aa&&r.push(aa);t.set(A.getId(),!1);D(S,!1);N&&N.hide();W.on("click",function(){var ba=t.get(A.getId())?t.get(A.getId()):
!1;t.forEach(function(Ba,va){D(S,!1);1==Ba&&(t.set(va,!1),p&&p.get(va)&&p.get(va).hide())});if(ba=!ba)t.set(A.getId(),ba),D(S,!0);null!==N?(ba&&N.show(),y(!ba)):y(!0)});G&&G.addJqTarget(aa);C(aa);C(F);return F},y=function(A){A=A?"unset":"none";for(var G=0;G<r.length;G++)r[G].css("display",A)},D=function(A,G){G?O.background(A,"list_dir_open"):O.background(A,"list_dir_close")},k=function(A,G){var F=null;if(0<A.length){F=$("<div>");for(var N=0;N<A.length;N++){var W=A[N],S=$("<div>");S.addClass("lapp-sort-card-analysis-item");
var U=$("<span>");U.addClass("lapp-sort-analysis-view-icon");var aa=U;switch(W.getViewType()){case fa.VIEW_TYPE_LONGER:var ba="icon_longer";break;case fa.VIEW_TYPE_SQUARE:ba="icon_square";break;case fa.VIEW_TYPE_DASHBOARD:ba="icon_dsb";break;default:ba="icon_longer"}O.background(aa,ba);U.appendTo(S);U=$("<span>");U.addClass("lapp-sort-analysis-item-name");U.text(W.getName());U.appendTo(S);U=$("<div>");U.addClass("lapp-sort-icon");ba=$("<span>");ba.addClass("lapp-sort-icon-area");O.background(ba,"icon_sort");
ba.appendTo(U);U.appendTo(S);C(U);C(S);S.appendTo(F);S.data("model",W);S.data("orderNumber",W.getSeq());G&&G.addJqTarget(U)}}return F},h=function(){var A=$("<div>");A.addClass("lapp-finish");A.text(B.get("done","\u5b8c\u6210"));A.on("click",function(){var G=!1,F=[],N=[];b&&b.find(".lapp-sort-card-analysis-item").each(function(va){var Ea=$(this).data("model");F.push(Ea.getId());N.push(va+1);va+1!=Ea.getSeq()&&(G=!0)});if(G){var W=new T("lappAnalysisMgr",m,w);W.updateFavoritesOrder(F,N)}var S=!1;if(d){W=
d.find(".lapp-sort-card-dir-analysis");for(var U=0;U<W.length;U++){var aa=$(W[U]),ba=aa.data("model");U+1!=ba.getSeq()&&(S=!0);ba.setSeq(U+1);aa=aa.find(".lapp-sort-card-analysis-item");for(ba=0;ba<aa.length;ba++){var Ba=$(aa[ba]).data("model");ba+1!=Ba.getSeq()&&(S=!0);Ba.setSeq(ba+1)}}}S&&(W=new T("lappDirectoryMgr",m,w),W.batchSaveOrder(g));G||S||(c.remove(),Q.showPage())});A.appendTo(c)},m=function(){(new ca).show(B.get("saveOrderSuccess","\u4fdd\u5b58\u6210\u529f"),ca.LENGTH_SHORT);c.remove();
Q.getJqPage().remove();(new com.kingdee.bos.qing.lapp.ui.Main).createUi()},w=function(){(new ca).show(B.get("saveOrderError","\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u4fdd\u5b58\uff01"),ca.LENGTH_SHORT)},u=function(A){var G=new ta;G.setTitle(A);G.setBackListener(function(){ka()});G.getJqUi().appendTo(c)},C=function(A){A&&A.addClass("lapp-sort-longtouch")}}function ab(){var c=this,f,a,e,b,d,g=!1;this.createUi=function(){f=$("<div>");f.addClass("lapp-pageview");ja&&t();p();r();f.appendTo($(document.body));
history.pushState(null,null,null);ka=function(){f.remove();Q.showPage()}};this.acceptEdit=function(k){g?(b.children(".lapp-directory-item").each(function(h){$(this).data("model")}),(new T("lappDirectoryMgr",function(){k()},function(){k()})).batchEditDirectory(d)):k()};var p=function(){(new T("lappDirectoryMgr",function(k){d=new Aa;d.fromJsonObject(k);a=$("<div>");a.addClass("lapp-directory-content");ja&&a.addClass("lapp-directory-content-headbarshown");e=$("<div>");e.addClass("lapp-card");e.on("click",
y);k=$("<span>");k.addClass("lapp-card-title-icon");var h=$("<span>");h.addClass("lapp-directory-editor-head");h.text(B.get("edit","\u7f16\u8f91"));var m=$("<span>");m.addClass("lapp-directory-editor-desc");m.text(B.get("clickToEditTab","\u70b9\u51fb\u76ee\u5f55\u540d\u53ef\u4ee5\u7f16\u8f91\u76ee\u5f55\u540d"));k.appendTo(e);h.appendTo(e);m.appendTo(e);D();b=$("<div>");b.addClass("lapp-directory-editor-content");if(d&&!d.isEmpty()){for(k=0;k<d.getCount();k++)q(d.get(k));l()}b.appendTo(e);e.appendTo(a);
a.appendTo(f);v()})).getOwnDirList()},t=function(){var k=new ta;k.setTitle(Q.getTitle());k.setBackListener(function(){ka()});k.getJqUi().appendTo(f)},v=function(){(new T("lappDirectoryMgr",function(k){var h=new Aa;h.fromJsonObject(k);if(h&&!h.isEmpty()){k=$("<div>");k.addClass("lapp-authorized-dir-tip");k.text(B.get("dirCanNotEdit","\u4ee5\u4e0b\u76ee\u5f55\u7531\u4ed6\u4eba\u53d1\u5e03\uff0c\u65e0\u6cd5\u7f16\u8f91"));k.appendTo(a);k=$("<div>");k.addClass("lapp-card");for(var m=0;m<h.getCount();m++){var w=
h.get(m),u=0==m,C=k,A=$("<div>");A.addClass("lapp-directory-item");u&&A.css("border-top","none");u=$("<span>");u.addClass("lapp-directory-item-name");u.text(w.getName());u.appendTo(A);w.getAnalysesCount()&&(u=$("<span>"),u.addClass("lapp-directory-item-num"),u.text("("+w.getAnalysesCount()+")"),u.appendTo(A));A.appendTo(C)}k.appendTo(a)}})).getAuthorizedDirList()},r=function(){var k=$("<div>");k.addClass("lapp-finish");k.text(B.get("done","\u5b8c\u6210"));k.on("click",function(){c.acceptEdit(function(){f.remove();
g?(Q.getJqPage().remove(),(new com.kingdee.bos.qing.lapp.ui.Main).createUi()):Q.showPage()})});k.appendTo(f)},q=function(k){var h=$("<div>");h.addClass("lapp-directory-item");h.data("model",k);var m=$("<span>");m.addClass("lapp-directory-item-name");m.text(k.getName());m.appendTo(h);k.getAnalysesCount()&&(m=$("<span>"),m.addClass("lapp-directory-item-num"),m.text("("+k.getAnalysesCount()+")"),m.appendTo(h));k=$("<div>");k.addClass("lapp-directory-item-delete-container");$("<span>");m=$("<span>");
m.addClass("lapp-directory-item-delete");O.background(m,"icon_delete");m.appendTo(k);k.appendTo(h);h.appendTo(b)},l=function(){b.find(".lapp-directory-item-order-container").show();b.find(".lapp-directory-item-order-container").first().hide()},n=function(){a.css("overflow-y","hidden");var k=new sa;k.setJqOwner(f);k.setTitle(B.get("addNewTab","\u65b0\u589e\u76ee\u5f55"));k.setMessage(B.get("enterTabName","\u8bf7\u8f93\u5165\u76ee\u5f55\u540d\u79f0"));k.setInputVisible();k.addClosingListener(function(h,
m){a.css("overflow-y","scroll");return!0});k.setClosingAction(function(h){if(h){h=k.getInputValue();var m;$.trim(h)?x(h)&&(m=B.get("tabNameRepeated","\u76ee\u5f55\u540d\u91cd\u590d")):m=B.get("tabNameEmpty","\u76ee\u5f55\u540d\u4e0d\u80fd\u4e3a\u7a7a");m?(new Va).show(m):(m=new Ua,m.setName(h),q(m),d.add(m),g=!0)}});k.showDialog()},z=function(k,h){h.remove();k.getId()?k.setDeleted(!0):d.remove(k);g=!0},x=function(k){for(var h=0;h<d.getCount();h++)if(k==d.get(h).getName())return!0;return!1},y=function(k){var h=
$(k.target),m=$(k.target);if(m=na.upwardSearchHasClass(m,e,"lapp-directory-item")){var w=m.data("model");if(h.hasClass("lapp-directory-item-delete-container")||h.hasClass("lapp-directory-item-delete"))if(0==w.getAnalysesCount())z(w,m);else{a.css("overflow-y","hidden");var u=new sa;u.setJqOwner(f);u.setMessage(B.get("confirmToDeleteAllAnalysis","\u5c06\u4f1a\u540c\u65f6\u5220\u9664\u8be5\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5206\u6790\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f"));u.addClosingListener(function(C,
A){a.css("overflow-y","scroll");return!0});u.setClosingAction(function(C){C&&z(w,m)});u.showDialog()}else h.hasClass("lapp-directory-item-order-container")||h.hasClass("lapp-directory-item-order")?(m.insertBefore(m.prev()),l(),g=!0):(a.css("overflow-y","hidden"),w=m.data("model"),u=new sa,u.setJqOwner(f),u.setTitle(B.get("editTab","\u4fee\u6539\u76ee\u5f55")),u.setMessage(B.get("enterTabName","\u8bf7\u8f93\u5165\u76ee\u5f55\u540d\u79f0")),u.setInputVisible(),u.setInputValue(w.getName()),u.addClosingListener(function(C,
A){a.css("overflow-y","scroll");return!0}),u.setClosingAction(function(C){if(C){C=w;var A=u.getInputValue(),G=m.children(".lapp-directory-item-name");if(C.getName()!=A){var F;$.trim(A)?50<A.length?F=B.get("tabNameMore50","\u76ee\u5f55\u540d\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"):x(A)&&(F=B.get("tabNameRepeated","\u76ee\u5f55\u540d\u91cd\u590d")):F=B.get("tabNameEmpty","\u76ee\u5f55\u540d\u4e0d\u80fd\u4e3a\u7a7a");F?(new Va).show(F):(G.text(A),C.setName(A),g=!0)}}}),u.showDialog())}},D=function(){var k=
$("<div>");k.addClass("lapp-directoryeditor-add");k.on("click",function(m){m.stopPropagation();n()});var h=$("<span>");h.addClass("lapp-directoryeditor-add-text");h.text(B.get("addNewTab","\u65b0\u589e\u76ee\u5f55"));h.appendTo(k);h=$("<span>");h.addClass("lapp-directoryeditor-add-icon");O.background(h,"icon_add");h.appendTo(k);k.appendTo(e)}}function zb(){var c=this,f,a=[],e;this.getJqUi=function(){if(!f){f=$("<div>");f.addClass("lapp-bottom-bar");for(var b=0;b<a.length;b++)a[b].getJqUi().appendTo(f)}return f};
this.addButton=function(b){b.setSelectedListener(c.setSelected);a.push(b)};this.setSelected=function(b){for(var d=0;d<a.length;d++)b==a[d]?(b.setSelected(!0),e(d)):a[d].cancelSelected()};this.setSelectedChangeListener=function(b){e=b}}function hb(c,f,a){var e=this,b,d,g,p=!1,t;this.getJqUi=function(){v();return b};this.setSelectedListener=function(r){t=r};var v=function(){b||(b=$("<div>"),b.addClass("lapp-bottom-button"),b.on("click",e.doSelected),d=$("<span>"),d.addClass(a),O.background(d,f),g=$("<span>"),
g.addClass("lapp-bottom-button-text"),g.text(c),d.appendTo(b),g.appendTo(b))};this.setSelected=function(){p||(v(),b.addClass("lapp-bottom-button_selected"),O.background(d,f+"_selected"),g.addClass("lapp-bottom-button-text_selected"),p=!0)};this.doSelected=function(){!p&&t(e);e.setSelected()};this.cancelSelected=function(){p&&(b.removeClass("lapp-bottom-button_selected"),O.background(d,f),g.removeClass("lapp-bottom-button-text_selected"),p=!1)}}function yb(){var c,f=[],a=[],e,b=[],d=[],g=[],p=[],t,
v=!0,r=!1,q,l,n,z,x,y=1,D,k,h,m=!1,w,u=!1,C,A;this.setCurrentPaneType=function(E){w=E};this.setPage=function(E){y=E};this.getPage=function(){return y};this.isHasNextPage=function(){return D};this.setKeyword=function(E){k=E};this.getKeyword=function(){return k};this.setCurAnalysis=function(E){f=E};this.setAllId=function(E){v&&(d=E,v=!1);g=E;E=[];for(var R=0;R<b.length;R++)-1!=g.indexOf(b[R])&&E.push(b[R]);p=E};this.getAllId=function(){return d};this.setAuthorizedAnalysis=function(E){t=E};this.isAuthorizedAnalysis=
function(){return t};this.setDirName=function(E){q=E};this.show=function(){c&&c.css("display","")};this.hidden=function(){c&&c.css("display","none")};this.remove=function(){e||(C&&C.remove(),A&&A.remove(),A=C=null);C&&C.refresh();A&&A.refresh();c&&c.remove();a=[];y=1;c=null};this.addArrAnalysis=function(E){f=f.concat(E);for(var R=[],la=$(document.createDocumentFragment()),Z=0;Z<E.length;Z++){var ha=E[Z],ia;if(!(ia=!m)){a:{ia=ha.getId();for(var Fa=0<a.length-6?a.length-6:0;Fa<a.length;Fa++)if(ia==
a[Fa].getAnalysisId()){ia=!0;break a}ia=!1}ia=!ia}ia&&(ia=new ib(ha),ia.setKeyword(k),ia.setCheckedListener(ba),ia.setCurrentPaneType(w),ia.getJqUi().appendTo(la),-1!=p.indexOf(ha.getId())||r&&(h==qa.FOLLOW_TAB_PANE||!ia.isAuthorized())?ia.setChecked(!0):ia.setChecked(!1),ia.setEditMode(e),R.push(ia))}m=!1;la.appendTo(c);a=a.concat(R);0==a.length&&W(w)};this.setHasNextPage=function(E){E?(n.setScrollToBottomListener(N),u&&n.showLoading(!0)):(n.showLoading(!1),n.removeScrollToBottomListener());D=E};
this.getJqUi=function(){c||(c=$("<div>"),l&&(n=new Oa,n.setScrollListener(F),c=n.getJqUi()),c.addClass("lapp-analysis-content"),Ba(),f&&0<f.length?G(0,0):W(w));return c};this.setEditMode=function(E,R){if(e!=E){e=E;h="undefined"==typeof R?qa.DIRECTORY_TAB_PANE:R;if(a&&0<a.length){if(!e){b=[];p=[];for(E=0;E<a.length;E++)a[E].setChecked(!1);r=!1}for(E=0;E<a.length;E++)a[E].setEditMode(e)}h==qa.DIRECTORY_TAB_PANE?(!A&&S(),A.setEditStatus(e)):(!C&&U(),C.setEditStatus(e))}};this.setPullUpToLoadMore=function(E){l=
E};this.setLoadMoreDataListener=function(E){x=E};this.getAnalysisList=function(){for(var E=[],R=0;R<a.length;R++)E.push(a[R].getAnalysis());return E};this.getScrollTop=function(){return n.getScrollTop()};this.setScrollTop=function(E){n.scrollTop(E)};var G=function(E,R){var la=f[E];if(la){var Z=0,ha=new ib(la);ha.setKeyword(k);ha.setCheckedListener(ba);ha.setCurrentPaneType(w);la.getDisplayStyle()==fa.DISPLAYSTYLE_EXECUTION&&(ha.setIndex(R),R++,Z=1E3);ha.getJqUi().appendTo(c);-1!=p.indexOf(la.getId())||
r&&(h==qa.FOLLOW_TAB_PANE||!ha.isAuthorized())?ha.setChecked(!0):ha.setChecked(!1);ha.setEditMode(e);a.push(ha);setTimeout(function(){E++;G(E,R)},Z)}else u=!0,D&&n.showLoading(!0)},F=function(E,R){E=c.find(".lapp-iframe");R=E.length;if(!(4>R)){for(var la,Z,ha=1,ia=c.outerHeight(),Fa=c.offset().top,wa=0;wa<R;wa++){var ua=$(E[wa]);la=ua.offset().top-(Fa+ia);Z=ua.offset().top+ua.height()-Fa;ua.is(":visible")&&0>la&&0<Z&&(ha=wa)}for(wa=0;wa<R;wa++)ua=$(E[wa]),Z=ua.data("iframeId"),2<Math.abs(ha-wa)?(ua.children().remove(),
oa.clearSupportEvent(Z)):0==ua.children().length&&(la=ua.data("iframeUrl"),Z=$("<iframe allowfullscreen id= "+Z+">"),Z.css({border:"0px",width:"100%",height:"100%","margin-bottom":"18px"}),Z.attr("src",oa.loadIframeUrl(la)),Z.appendTo(ua))}},N=function(){clearTimeout(z);z=setTimeout(function(){x(y,k);y++},100)},W=function(E){var R=!1;k&&(R=!0);Q.createNoAnalysisUi(c,R,E==qa.FOLLOW_TAB_PANE?!0:!1,R?!1:!0,!1)},S=function(){A=new ea;A.create();A.setDirName(q);A.setFunSelectAllListener(function(E){r=
E;for(E=0;E<g.length;E++)aa(r,g[E]);for(E=0;E<a.length;E++){var R=a[E];r&&!R.getAnalysis().getPermissionInfo()?R.setChecked(!0):R.setChecked(!1)}A.updateMoveText(b.length);r&&t&&(new ca).show(B.get("analysisCanNotEditInDir","\u8be5\u76ee\u5f55\u4e0b\u5b58\u5728\u4ed6\u4eba\u53d1\u5e03\u5206\u6790\uff0c\u65e0\u6cd5\u7f16\u8f91\uff0c\u5df2\u81ea\u52a8\u4e3a\u4f60\u53cd\u52fe\u9009"),ca.LENGTH_SHORT)});A.setFunNothingCanCheck(function(){return 0==g.length});A.setFunGetCheckedAnalysisIds(function(){return b});
A.setMoveListener(function(E){E=Ea(E);va(E)});A.setDeleteListener(function(){var E=Ea();va(E)})},U=function(){C=new da;C.create();C.setFunSelectAllListener(function(E){r=E;for(E=0;E<g.length;E++)aa(r,g[E]);for(E=0;E<a.length;E++)a[E].setChecked(r);C.updateCancelFollowText(b.length)});C.setFunNothingCanCheck(function(){return 0==g.length});C.setFunGetCheckedAnalysisIds(function(){return b});C.setCancelFollowListener(function(){Ea()})},aa=function(E,R){if(E)-1==p.indexOf(R)&&(p.push(R),b.push(R));else{E=
p;var la=E.indexOf(R);-1!=la&&E.splice(la,1);E=b;R=E.indexOf(R);-1!=R&&E.splice(R,1)}},ba=function(E,R){R&&(aa(E.isChecked(),E.getAnalysisId()),Ba())},Ba=function(){r=!1;p.length==g.length&&0!=g.length&&(r=!0);A&&(A.updateMoveText(b.length),A.setCheckedAll(r));C&&(C.updateCancelFollowText(b.length),C.setCheckedAll(r))},va=function(E){y=Math.max(0,y-Math.ceil(E/6));m=!0;x(y,k);y++},Ea=function(E){for(var R=0,la=E&&0<E.length,Z=a.length-1;0<=Z;Z--){var ha=a[Z];ha.isChecked()&&(la?-1==E.indexOf(ha.getAnalysisId())&&
(ha.getJqUi().remove(),a.splice(Z,1),R++):(ha.getJqUi().remove(),a.splice(Z,1),R++))}for(Z=0;Z<g.length;Z++)aa(!1,g[Z]);if(la)for(Z=0;Z<E.length;Z++)aa(!0,E[Z]);!la&&Y.EditModeSetting.changeEditMode(!1);return R}}function vb(c){Ra.AbstractModel.call(this);this.getName=function(){return c.getCompleteName()};this.getDirectoryId=function(){return c.getId()};this.getDirName=function(){return c.getName()}}function ib(c){var f=this,a,e,b,d,g,p,t=!1,v,r,q=!1,l;this.getJqUi=function(){a||n();return a};this.getAnalysis=
function(){return c};this.getAnalysisId=function(){return c.getId()};this.setKeyword=function(k){p=k};this.setEditMode=function(k){g!=k&&((g=k)?(e.css("display","block"),b.addClass("lapp-analysis-item-card_editing")):(e.css("display","none"),b.removeClass("lapp-analysis-item-card_editing")))};this.setCheckedListener=function(k){v=k};this.setChecked=function(k){k!==t&&(t=k,D(),v&&v(f,!1))};this.isChecked=function(){return t};this.isAuthorized=function(){return q};this.setCurrentPaneType=function(k){l=
k};this.setFavorite=function(k){d&&(c.setFavorite(k),k?O.background(d,"icon_followed"):O.background(d,"icon_follow"))};this.setIndex=function(k){r=k};var n=function(){a=$("<div>");a.on("click",x);e=$("<div>");e.addClass("lapp-analysis-item-checkbox");D();e.css("display","none");b=$("<div>");b.addClass("lapp-card");var k=$("<span>");k.addClass("lapp-card-title-icon");var h=$("<span>");h.addClass("lapp-card-title-name");if(p){var m=c.getName();Da.highLightbyKeyword(h,m,p)}else h.text(c.getName());var w=
$("<div>");w.addClass("lapp-icon-follow-container touch");w.attr("data-touchFeedback","true");d=$("<span>");d.addClass("lapp-analysis-icon-follow");Y.CachePage.getTriggerAnalysis()&&c.getId()==Y.CachePage.getTriggerAnalysis().getId()?y():f.setFavorite(c.isFavorite());var u=c.getDisplayStyle();if(u==fa.DISPLAYSTYLE_EXECUTION){m=$("<div>");m.addClass("lapp-icon-refresh-container touch");m.attr("data-touchFeedback","true");var C=$("<span>");C.addClass("lapp-analysis-icon-refresh");O.background(C,"icon_refresh");
C.appendTo(m);m.appendTo(b);m=$("<div>");m.addClass("lapp-icon-fullscreen-container touch");m.attr("data-touchFeedback","true");var A=$("<span>");A.addClass("lapp-analysis-icon-fullscreen");O.background(A,"icon_fullscreen");A.appendTo(m);m.appendTo(b);C.on("click",function(N){N.stopPropagation();if(g)Q.doTabLockedTip();else{F[0].children[0]&&F[0].children[0].remove();N=F.data("iframeUrl");var W=F.data("iframeId"),S=$("<iframe allowfullscreen id= "+W+">");S.css({border:"0px",width:"100%",height:"100%",
"margin-bottom":"18px"});S.attr("src",oa.loadIframeUrl(N));S.appendTo(F);oa.clearSupportEvent(W)}});A.on("click",function(N){N.stopPropagation();g?Q.doTabLockedTip():(N=F.data("iframeId"),oa.supportCardFullscreenShareEvent(N)?($(F.children()[0]).addClass("lapp-iframe-fullscreen"),$(".lapp-swiper-bar").addClass("lapp-swiper-bar-fullscreen"),$(".lapp-bottom-bar").hide(),$(".lapp-suspensionbar").hide(),F.parent().addClass("lapp-card-fullscreen"),F.parent().parent().addClass("lapp-card-fullscreen"),F[0].children[0].contentWindow.postMessage(JSON.stringify({from:"LAPP_MESSAGE_EXECUTION",
type:"requestCardFullscreen"}),"*"),oa.setFunUpdateFavoriteStatus(y)):(N=new Ia,N.setAnalysis(c),N.setFunVisibilityChangeCallback(y),N.createUi()))})}C=$("<span>");C.addClass("lapp-analysis-item-desc");p&&c.getDesc()?(m=c.getDesc(),Da.highLightbyKeyword(C,m,p)):C.text(c.getDesc());1==c.getDemo()&&(m=$("<div  class = 'lapp-analysis-demo-icon'>"),O.background(m,"icon_demo"),na.layoutCtrlWithLRTB(m,null,0,39,null,0,56),m.appendTo(b));if(u==fa.DISPLAYSTYLE_THUMNAIL){m=Da.getThumbnailImgPath(c);A=$(document.body).width()-
62;var G=A/2;var F=$("<span>");F.addClass("lapp-analysis-item-icon scrollLoading");F.css("height",G);F.css("width",A);F.attr("data-url",m);F.css("background-image",ma.getIconUrl("qing-lapp/core","loading.gif"));q=null!=c.getPermissionInfo();c.getBottomAnnotation()&&(m=$("<span>"),m.addClass("lapp-annotation"),m.text(c.getBottomAnnotation()),na.makeTextOmissible(m),m.appendTo(b))}else F=z(c,F,b),q=null!=c.getPermissionInfo(),c.getBottomAnnotation()&&(m=$("<span>"),m.addClass("lapp-annotation"),m.text(c.getBottomAnnotation()),
na.makeTextOmissible(m),m.appendTo(b));k.appendTo(b);h.appendTo(b);d.appendTo(w);w.appendTo(b);C.appendTo(b);F.appendTo(b);e.appendTo(a);b.appendTo(a);k=new jb;k.setCallbackImmediately(function(){var N=$(document.body).width()-62;u==fa.DISPLAYSTYLE_THUMNAIL&&F.css("height",N/2);u==fa.DISPLAYSTYLE_THUMNAIL&&F.css("width",N)});k.setDelay(250);k.observe()},z=function(k,h,m){m=(new Date).getTime();var w=k.getUrl(),u=Ga.decodeParamFromUrl(w,"publishId");h=$("<div class='lapp-iframe' id='div"+u+m+"'>");
h.css({border:"0px",width:"100%"});var C=Ga.decodeParamFromUrl(w,"height");C?h.css({height:C}):h.css({height:$(document.body).width()/2});h.css("width","100%");k.getBottomAnnotation()&&h.css("padding-bottom","24px");C=$("<iframe allowfullscreen id= "+u+m+">");C.css({border:"0px",width:"100%",height:"100%","margin-bottom":"18px"});w=Ga.appendParamToUrl(w,"time",m);w=oa.getLappAccessToken()?"K3CLOUD"==k.getScene()?Ga.appendParamToUrl(w,"QINGSESSIONID",oa.getLappAccessToken()):Ga.appendParamToUrl(w,
"access_token",oa.getLappAccessToken()):pa.createIframeUrl(w);if(!r||r&&4>r)C.attr("src",oa.loadIframeUrl(w)),C.appendTo(h);h.data("iframeUrl",w);h.data("iframeId",u+m);return h},x=function(k){g?l!=qa.FOLLOW_TAB_PANE&&q?(new ca).show(B.get("analysisCanNotEdit","\u8be5\u5206\u6790\u7531\u4ed6\u4eba\u53d1\u5e03\uff0c\u65e0\u6cd5\u7f16\u8f91"),ca.LENGTH_SHORT):(t=!t,D(),v&&v(f,!0)):$(k.target).hasClass("lapp-analysis-icon-follow")||$(k.target).hasClass("lapp-icon-follow-container")?("icon_followed"==
O.getBackground(d)?(O.background(d,"icon_follow"),Ja.interestInBehavior(Ka.SCENE_CANCEL_FAVORITE),k=!1):(O.background(d,"icon_followed"),Ja.interestInBehavior(Ka.SCENE_FAVORITE),k=!0),(new T("lappAnalysisMgr",function(h){},function(){O.background(d,"icon_follow")})).updateFavorite(c.getId()),c.setFavorite(k)):c.getDisplayStyle()==fa.DISPLAYSTYLE_THUMNAIL&&(k=new Ia,k.setAnalysis(c),k.setFunVisibilityChangeCallback(y),k.createUi())},y=function(){var k=c.getId();(new T("lappAnalysisMgr",function(h){var m=
new fa;m.fromJsonObject(h);m.isFavorite()?O.background(d,"icon_followed"):O.background(d,"icon_follow");c.setFavorite(m.isFavorite())})).getAnalysis(k)},D=function(){c.getPermissionInfo()&&l==qa.DIRECTORY_TAB_PANE?O.background(e,"icon_checkbox_unable"):t?O.background(e,"icon_checkbox_checked"):O.background(e,"icon_checkbox_unchecked")}}function Ia(){var c=this,f,a,e,b=Q,d;this.setAnalysis=function(v){a=v};this.setFunVisibilityChangeCallback=function(v){d=v};this.setDependence=function(v){b=v};this.createUi=
function(){pa.needCachePage()&&(Y.CachePage.setTriggerAnalysis(a),Y.CachePage.fireCachePageListener());t();p()};this.createAnalysisDeletedUi=function(v){b.hidePage();f=$("<div>");f.addClass("lapp-pageview");ja&&g(v);v=$("<div>");v.addClass("lapp-no-analysis-container");var r=$("<div>");r.addClass("lapp-no-analysis-img");O.background(r,"icon_no_data");var q=$("<div>");q.addClass("lapp-no-analysis-text");q.text(B.get("analysisHasBeenDeleted","\u8be5\u5206\u6790\u5df2\u88ab\u5220\u9664\u3002"));r.appendTo(v);
q.appendTo(v);v.appendTo(f);f.appendTo($(document.body));history.pushState(null,null,null);ka=function(){f.remove();b.showPage()}};var g=function(v){e=new ta;e.setTitle(v);e.setBackListener(function(){ka()});e.getJqUi().appendTo(f)},p=function(){(new T("lappAnalysisMgr",function(v){!v||v.deleted?c.createAnalysisDeletedUi(a.getName()):pa.open(v.url)})).getSchemaContent(a.getId())},t=function(){var v=function(){document.hidden||(d(),r())},r=function(){window.removeEventListener("visibilitychange",v)};
r();window.addEventListener("visibilitychange",v)}}function Ab(){var c=this,f,a,e,b,d,g,p,t=!1,v=[],r,q,l=1,n;this.getJqUi=function(){if(!f){f=$("<div>");f.addClass("lapp-main");ja&&D();a=$("<div>");r=new Oa;a=r.getJqUi();a.addClass("lapp-share-tab");ja&&a.addClass("lapp-share-tab-headbarshown");q=new Ma(a);q.setThreshold(600);x(0);a.appendTo(f);var u=new Ha;u.bindTarget(a);u.setFunRefresh(y)}return f};this.show=function(){f&&f.css("display","block")};this.hidden=function(){f&&f.css("display","none")};
this.updateReadStatus=function(){(new T("message",function(u){var C=b.find(".lapp-head-righticon");0==u?C.css("background-image",ma.getIconUrl("qing-lapp/core","btn_message.png")):(C.css("background-image",ma.getIconUrl("qing-lapp/core","btn_unread_message.png")),C.css("width","20px"),C.css("height","22px"),C.css("margin","11px 12px"))})).getUserUnReadCount()};this.setHasNextPage=function(u){u?(r.setScrollToBottomListener(z),r.showLoading(!0)):(r.showLoading(!1),r.removeScrollToBottomListener())};
var z=function(){clearTimeout(n);n=setTimeout(function(){x(l);l++},100)},x=function(u,C){(new T("sharing",function(A){for(var G=[],F=0;F<A.content.length;F++){var N=new kb;N.fromJsonObject(A.content[F]);G.push(N)}F=$(document.createDocumentFragment());N=[];for(var W=0;W<G.length;W++){var S=G[W];a:{var U=S.getId();for(var aa=0<v.length-10?v.length-10:0;aa<v.length;aa++)if(U==v[aa].getId()){U=!0;break a}U=!1}U||(S=new Bb(S),S.setDeleteListener(w),N.push(S),S.getJqUi().appendTo(F),S.setEditMode(t))}F.appendTo(a);
v=v.concat(N);0==v.length&&(G=$("<div>"),G.addClass("lapp-no-message-container"),F=$("<span>"),F.addClass("lapp-no-message-icon"),O.background(F,"icon_no_message"),N=$("<span>"),N.addClass("lapp-no-message-text"),N.text(B.get("noSharingRecord","\u6682\u65e0\u5206\u4eab\u8bb0\u5f55")),F.appendTo(G),N.appendTo(G),G.appendTo(a));q.loading();c.setHasNextPage(!A.last);C&&C(!0)})).getSharing(u)},y=function(u){a.empty();v=[];x(0,u)},D=function(){e=new ta;e.setTitle(Q.getTitle());e.setQAListener(k);e.setBackListener(function(){pa.closeWebView()});
b=e.addRightIconButton(ma.getUrl("qing-lapp/core","btn_message.png"),h);d=e.addRightIconButton(ma.getUrl("qing-lapp/core","btn_edit.png"),m);c.updateReadStatus();p=e.getJqUi();p.appendTo(f)},k=function(){(new $a).createUi()},h=function(){Q.hidePage();(new Cb).createJqUi()},m=function(){(t=!t)?(d.detach(),b.detach(),g=e.addRightIconTextButton(ma.getUrl("qing-lapp/core","btn_editing.png"),B.get("done","\u5b8c\u6210"),m)):(d.appendTo(p),b.appendTo(p),g.detach());if(v&&0<v.length)for(var u=0;u<v.length;u++)v[u].setEditMode(t)},
w=function(u){for(var C=v.length-1;0<=C;C--)v[C].getId()==u.getId()&&v.splice(C,1);l=Math.max(0,l-1);x(l);l++}}function Bb(c){var f=this,a,e,b,d,g=[],p,t;this.getJqUi=function(){if(!a){a=$("<div>");a.addClass("lapp-share-card");b=$("<div>");b.addClass("lapp-share-item");b.on("click",l);var n=$("<div>");n.addClass("lapp-share-analysis-thrumb scrollLoading");var z=c.getThrumb()?ya.createDownloadImageUrl(c.getThrumb()):c.getViewType()==fa.VIEW_TYPE_DASHBOARD?ma.getUrl("qing-lapp/core","icon_chart_dsb.png"):
ma.getUrl("qing-lapp/core","icon_chart.png");n.attr("data-url",z);n.css("background-image",ma.getIconUrl("qing-lapp/core","loading.gif"));p=$("<span>");p.addClass("lapp-share-analysis-title");p.text(c.getTitle());z=$("<div>");z.addClass("lapp-share-analysis-content");e=$("<span>");e.addClass("lapp-delete-share-button");e.text(B.get("clearRecord","\u6e05\u9664\u8bb0\u5f55"));e.on("click",r);if(c.getAccountName()){var x=$("<div>");x.addClass("lapp-share-analysis-accountname");x.text("("+c.getAccountName()+
")");x.appendTo(z);c.getContent()&&na.makeTextOmissible(x)}x=$("<div>");x.addClass("lapp-share-analysis-description");x.text(c.getContent());p.appendTo(z);e.appendTo(z);x.appendTo(z);n.appendTo(b);z.appendTo(b);b.appendTo(a);n=$(document.createDocumentFragment());z=c.getArrSharingTargets();for(x=0;x<z.length;x++){var y=new Db(z[x],c.getTitle());y.setDeleteListener(v);g.push(y);y.getJqUi().appendTo(n)}n.appendTo(a)}return a};this.setEditMode=function(n){if(d!=n&&((d=n)?(p.css("right","85px"),e.css("display",
"block")):(p.css("right","0px"),e.css("display","none")),g&&0<g.length))for(n=0;n<g.length;n++)g[n].setEditMode(d)};this.getId=function(){return c.getId()};this.setDeleteListener=function(n){t=n};var v=function(n){for(var z=0;z<g.length;z++)g[z].getSharingTargetId()==n.getSharingTargetId()&&g.splice(z,1);0==g.length&&q()},r=function(){var n=new sa;n.setJqOwner(Q.getJqPage());n.setMessage(B.get("canNotRecoverSharingRecord","\u5206\u4eab\u8bb0\u5f55\u6e05\u9664\u540e\u5c06\u4e0d\u53ef\u6062\u590d"));
n.showDialog();n.setClosingAction(function(z){z&&q()})},q=function(){var n=c.getId();(new T("sharing",function(){a.remove();t(f)})).deleteShare(n)},l=function(n){d||(n=c.getAnalysisId(),(new T("lappAnalysisMgr",function(z){var x=new Ia;if(z){var y=new fa;y.fromJsonObject(z);x.setAnalysis(y);x.createUi()}else x.createAnalysisDeletedUi(c.getTitle())})).getAnalysis(n))}}function Db(c,f){var a=this,e,b,d,g,p=!1,t,v;this.getJqUi=function(){if(!e){e=$("<div>");e.addClass("lapp-comment-item");e.data("model",
c);var y=$("<div>");y.addClass("lapp-group-thrumb scrollLoading");y.attr("data-url",c.getAvatar());y.css("background-image",ma.getIconUrl("qing-lapp/core","loading.gif"));var D=$("<span>");D.addClass("lapp-group-name font");D.text(c.getName());g=$("<span>");g.addClass("lapp-total-comment font");x(c.getReplyTotalCount());var k=$("<div>");k.addClass("lapp-show-or-delete");d=$("<span>");d.addClass("lapp-delete-comment-button");O.background(d,"btn_delete_comment");d.appendTo(k);d.on("click",q);y.appendTo(e);
D.appendTo(e);g.appendTo(e);t=c.getReplyUnreadCount();e.on("click",n);b=$("<span>");r();b.appendTo(k);k.appendTo(e)}return e};this.getSharingTargetId=function(){return c.getId()};this.setEditMode=function(y){p!=y&&((p=y)?(d.css("display","block"),d.siblings().css("display","none")):(d.css("display","none"),d.siblings().css("display","block")))};this.setDeleteListener=function(y){v=y};var r=function(){0<t?(b.removeClass("lapp-show-comment-icon"),b.addClass("lapp-unread-total-comment"),b.text(t)):(b.removeClass("lapp-unread-total-comment"),
b.addClass("lapp-show-comment-icon"),O.background(b,"icon_back"),b.text(""))},q=function(y){y.stopPropagation();y=new sa;y.setJqOwner(Q.getJqPage());y.setMessage(B.get("canNotRecoverSharingRecord","\u5206\u4eab\u8bb0\u5f55\u6e05\u9664\u540e\u5c06\u4e0d\u53ef\u6062\u590d"));y.showDialog();y.setClosingAction(function(D){D&&l()})},l=function(){var y=c.getId();(new T("sharingTarget",function(D){e.remove();v(a)})).deleteShareGroup(y)},n=function(){z(function(){if(!p){var y=c.getId();0<t&&(p||(new T("reply",
function(D){t=0;r()})).setReaded(y))}})},z=function(y){var D=new lb(c.getId(),f);D.setBackListener(function(){var k=c.getId();(new T("reply",function(h){x(h);Q.showPage()})).getCommentCount(k)});D.setShowBackListener(y);D.createUi()},x=function(y){2>y?g.text(B.get("comment","('#1'\u6761\u8bc4\u8bba)").replace("#1",y)):g.text(B.get("comments","('#1'\u6761\u8bc4\u8bba)").replace("#1",y))}}function Cb(){var c,f,a,e,b,d=0;this.createJqUi=function(){c=$("<div>");c.addClass("lapp-pageview");ja&&p();b=$("<div>");
b.addClass("lapp-message-main");b.appendTo(c);v();c.appendTo($(document.body));history.pushState(null,null,null);ka=function(){c.remove();Q.showPage()};var l=new Ha;l.bindTarget(b);l.setFunRefresh(t)};var g=new function(){this.showPage=function(){c.css("display","");ka=function(){c.remove();Q.showPage()}};this.hidePage=function(){c.css("display","none")}},p=function(){var l=new ta;l.setBackListener(function(){ka()});l.setTitle(B.get("message","\u6d88\u606f"));l.setRightText(B.get("clear","\u6e05\u7a7a")).on("click",
q);l.getJqUi().appendTo(c)},t=function(l){0==d?(f.refreshContent(l),l=f.getJqUi(),b.append(l)):(a.refreshContent(l),l=a.getJqUi(),b.append(l))},v=function(){var l=new mb(B.get("receivedMessages","\u6536\u5230\u7684\u6d88\u606f"),"","top"),n=new mb(B.get("sendedComments","\u53d1\u51fa\u7684\u8bc4\u8bba"),"","top");e=new Eb("top");e.addButton(l);e.addButton(n);e.setSelectedChangeListener(r);e.setSelected(e.getButton(0));e.getJqUi().appendTo(c)},r=function(l){0==l?(d=l,a&&a.hidden(),f?f.show():(f=new nb(ra.REPLY),
f.setDependence(g),l=f.getJqUi(),b.append(l))):(d=l,f&&f.hidden(),a?a.show():(a=new nb(ra.COMMENT),a.setDependence(g),l=a.getJqUi(),b.append(l)))},q=function(){if(0==d){var l=new sa;l.setJqOwner(c);l.setMessage(B.get("canNotRecoverMessage","\u6d88\u606f\u6e05\u7a7a\u540e\u5c06\u4e0d\u53ef\u6062\u590d"));l.setClosingAction(function(n){n&&f.clearMessage()})}else l=new sa,l.setJqOwner(c),l.setMessage(B.get("canNotRecoverComment","\u8bc4\u8bba\u6e05\u7a7a\u540e\u5c06\u4e0d\u53ef\u6062\u590d")),l.setClosingAction(function(n){n&&
a.clearMessage()});l.showDialog()}}function lb(c,f){var a,e,b,d;this.createUi=function(){g(function(){Q.hidePage();a=$("<div>");a.addClass("lapp-pageview");e=$("<div>");e.addClass("lapp-report-content");ja&&p();var r=new com.kingdee.bos.qing.share.Share;r.setUserInfo(Pa,ob,pb);r.setSharingTargetId(c);r.setImageClickListener(v);r.setJqOwner(a);r.setShowBackListener(d);r.getJqUi().appendTo(e);e.appendTo(a);a.appendTo($(document.body));history.pushState(null,null,null);ka=function(){a.remove();b()}})};
this.setBackListener=function(r){b=r};this.setShowBackListener=function(r){d=r};var g=function(r){var q=com.kingdee.bos.qing.CodeLoader;q.setCallback(r);(r=Qa.getParamLanguage())&&q.setI18nLocal(r);q.loadCss(ya.getResourcePrefix()+"share/qing-share.css");q.loadJs(ya.getResourcePrefix()+"share/qing-share-main.js");q.loadI18n(ya.getResourcePrefix()+"common","qing-lapp-framework");q.loadI18n(ya.getResourcePrefix()+"share","qing-share-ui")},p=function(){var r=new ta;r.setTitle(f);r.setBackListener(function(){ka()});
r.getJqUi().appendTo(a)},t=new function(){this.showPage=function(){a.css("display","");ka=function(){a.remove();b()}};this.hidePage=function(){a.css("display","none")}},v=function(r){(new T("lappAnalysisMgr",function(q){var l=new fa;l.fromJsonObject(q);q=new Ia;q.setDependence(t);q.setAnalysis(l);q.createUi()})).getAnalysis(r)}}function nb(c){var f=this,a,e,b,d,g,p,t,v=1,r,q=Date.parse(new Date);this.getJqUi=function(){a||(a=$("<div>"),e=null,p=new Oa,a=p.getJqUi(),a.addClass("lapp-common-full"),
f.refreshContent());return a};this.show=function(){q=Date.parse(new Date);a&&a.css("display","block")};this.hidden=function(){a&&a.css("display","none")};this.clearMessage=function(){var k=new T("message",function(h){a.empty();h=c==ra.REPLY?B.get("noMessageHasBeenReceived","\u6682\u65e0\u6536\u5230\u7684\u6d88\u606f\n\u53ef\u80fd\u5927\u5bb6\u6b63\u5728\u5348\u4f11"):B.get("noCommentHasBeenSended","\u6682\u65e0\u53d1\u51fa\u7684\u8bc4\u8bba\n\u53ef\u80fd\u662f\u4f60\u592a\u61d2\u4e86");y(h)});c==
ra.REPLY&&k.clearReceivedList();c==ra.COMMENT&&k.clearSendedList()};this.setDependence=function(k){g=k};this.setHasNextPage=function(k){k?(p.setScrollToBottomListener(l),p.showLoading(!0)):(p.showLoading(!1),p.removeScrollToBottomListener())};this.refreshContent=function(k){e&&e.remove();e=null;n(0,k);c==ra.REPLY&&x()};var l=function(){clearTimeout(r);r=setTimeout(function(){n(v);v++},100)},n=function(k,h){var m=new T("message",function(w){for(var u=w.content,C=u.length,A=[],G=0;G<C;G++){var F=new ra,
N=JSON.parse(u[G]);F.fromJsonObject(N);A.push(F)}z(A);e&&t.loading();f.setHasNextPage(!w.last);h&&h(!0)});c==ra.COMMENT?m.getQuerySendedList(k,q):c==ra.REPLY&&m.getQueryReceivedList(k,q)},z=function(k,h){if(e){for(var m=$(document.createDocumentFragment()),w=0;w<k.length;w++){var u=new qb(k[w]);u.setDependence(g);h?u.getJqUi().prependTo(m):u.getJqUi().appendTo(m)}h?m.prependTo(e):m.appendTo(e)}else if(0==k.length)k=c==ra.REPLY?B.get("noMessageHasBeenReceived","\u6682\u65e0\u6536\u5230\u7684\u6d88\u606f\n\u53ef\u80fd\u5927\u5bb6\u6b63\u5728\u5348\u4f11"):
B.get("noCommentHasBeenSended","\u6682\u65e0\u53d1\u51fa\u7684\u8bc4\u8bba\n\u53ef\u80fd\u662f\u4f60\u592a\u61d2\u4e86"),y(k);else{e=$("<div>");e.addClass("lapp-message-tab");m=$(document.createDocumentFragment());for(w=0;w<k.length;w++)u=new qb(k[w]),u.setDependence(g),h?u.getJqUi().prependTo(m):u.getJqUi().appendTo(m);h?m.prependTo(e):m.appendTo(e);t=new Ma(e);t.setThreshold(600);e.appendTo(a)}},x=function(){(new T("message",function(k){if(0<k){d=$("<div>");d.addClass("lapp-new-meassage-container");
d.on("click",D);var h=$("<span>");h.addClass("lapp-text");h.text(B.get("receive","\u6536\u5230"));var m=$("<span>");m.addClass("lapp-text");1<k?m.text(B.get("newReplies","\u6761\u65b0\u56de\u590d")):m.text(B.get("newReply","\u6761\u65b0\u56de\u590d"));var w=$("<span>");w.addClass("lapp-unread-count");w.text(k);h.appendTo(d);w.appendTo(d);m.appendTo(d);d.appendTo(a)}})).getUserUnReadCount()},y=function(k){b=$("<div>");b.addClass("lapp-no-message-container");var h=$("<span>");h.addClass("lapp-no-message-icon");
O.background(h,"icon_no_message");var m=$("<span>");m.addClass("lapp-no-message-text");m.text(k);h.appendTo(b);m.appendTo(b);b.appendTo(a)},D=function(){(new T("message",function(k){for(var h=k.length,m=[],w=0;w<h;w++){var u=new ra,C=JSON.parse(k[w]);u.fromJsonObject(C);m.push(u)}z(m,!0);d.remove();t.loading();b&&b.remove()})).getQueryReceivedUnreadedList()}}function qb(c){var f,a;this.getJqUi=function(){f||e();return f};this.setDependence=function(b){a=b};var e=function(){f=$("<div>");f.addClass("lapp-message-item");
f.on("click",function(){a.hidePage();var h=new lb(c.getSharingTargetId(),c.getTitle());h.setBackListener(a.showPage);h.createUi()});var b=$("<div>");b.addClass("lapp-replyer-ico scrollLoading");b.attr("data-url",c.getReplyerIco());b.css("background-image",ma.getIconUrl("qing-lapp/core","loading.gif"));var d=$("<div>");d.addClass("lapp-message-box");var g=$("<div>");g.addClass("lapp-message-container");var p=$("<div>");p.addClass("lapp-answer-container");var t=$("<span>");t.addClass("lapp-replyer-name");
Pa==c.getReplyerId()?t.text(B.get("i","\u6211")):t.text(c.getReplyerName());var v=$("<span>"),r=$("<span>");c.getReplyerId()!=c.getReceiverId()&&"undefined"!=typeof c.getReceiverId()&&(v.addClass("lapp-reply"),v.text(B.get("reply","\u56de\u590d")),r.addClass("lapp-receiver-name"),Pa==c.getReceiverId()?r.text(B.get("me","\u6211")):r.text(c.getReceiverName()));var q=$("<span>");q.addClass("lapp-sharing-creator-name");q.text(c.getSharingCreatorName()+"\uff1a");var l=$("<span>");l.addClass("lapp-create-time");
l.text(c.getCreateTime());var n=$("<div>");n.addClass("lapp-contents");n.text(c.isDeleted()?"\u8be5\u8bc4\u8bba\u5df2\u5220\u9664":c.getContents());var z=$("<div>");z.addClass("lapp-sharing-analysis-box");var x=$("<div>");x.addClass("lapp-sharing-analysis-container");var y=$("<div>");y.addClass("lapp-sharing-analysis-container-border");var D=$("<span>");D.addClass("lapp-title");D.text(c.getTitle()+"\uff1a");var k=$("<span>");k.addClass("lapp-sharing-contents");k.text(c.getSharingContents());b.appendTo(f);
t.appendTo(p);c.getReplyerId()!=c.getReceiverId()&&"undefined"!=typeof c.getReceiverId()&&(v.appendTo(p),r.appendTo(p));p.appendTo(g);l.appendTo(g);n.appendTo(g);q.appendTo(y);D.appendTo(y);k.appendTo(y);y.appendTo(x);x.appendTo(z);z.appendTo(g);g.appendTo(d);d.appendTo(f)}}function Eb(c){var f=this,a,e=[],b;this.getJqUi=function(){if(!a)if("top"==c){a=$("<div>");a.addClass("lapp-button-bar-top");for(var d=0;d<e.length;d++){var g=e[d];g.getJqUi().appendTo(a)}}else for(a=$("<div>"),a.addClass("lapp-button-bar-bottom"),
d=0;d<e.length;d++)g=e[d],g.getJqUi().appendTo(a);return a};this.addButton=function(d){d.setSelectedListener(f.setSelected);e.push(d)};this.getButton=function(d){return e[d]};this.setSelected=function(d){for(var g=0;g<e.length;g++)d==e[g]?(d.setSelected(!0),b(g)):e[g].cancelSelected()};this.setSelectedChangeListener=function(d){b=d}}function mb(c,f,a){var e=this,b,d,g,p=!1,t;this.getJqUi=function(){v();return b};this.setSelectedListener=function(r){t=r};var v=function(){b||(b=$("<div>"),b.addClass("lapp-button"),
b.on("click",e.doSelected),""!=f&&(d=$("<span>"),d.addClass("lapp-button-icon-top"),d.css("background-image","url(./core/resource/"+f+".png)"),d.appendTo(b)),"top"==a?(g=$("<span>"),g.addClass("lapp-button-text-top")):(g=$("<span>"),g.addClass("lapp-button-text-bottom")),g.text(c),g.appendTo(b))};this.setSelected=function(){p||(v(),b.addClass("lapp-button_selected"),""!=f&&d.css("background-image","url(./core/resource/"+f+"_selected.png)"),"top"==a?g.addClass("lapp-button-text-top_selected"):g.addClass("lapp-button-text-bottom_selected"),
p=!0)};this.doSelected=function(){!p&&t(e);e.setSelected()};this.cancelSelected=function(){p&&(b.removeClass("lapp-button_selected"),""!=f&&d.css("background-image","url(./core/resource/"+f+".png)"),"top"==a?g.removeClass("lapp-button-text-top_selected"):g.removeClass("lapp-button-text-bottom_selected"),p=!1)}}function $a(){var c,f,a;this.setDependence=function(r){e=r};this.createUi=function(){Q.hidePage();c=$("<div>");c.addClass("lapp-pageview");f=$("<div>");f.addClass("lapp-question-content");ja&&
b();d();t();c.appendTo($(document.body));history.pushState(null,null,null);ka=function(){c.remove();Q.showPage()}};var e=new function(){this.showPage=function(){c.css("display","")};this.hidePage=function(){c.css("display","none")};this.removePage=function(){c.remove()}};var b=function(){a=new ta;a.setTitle(B.get("practiceNote","\u5e94\u7528\u6307\u5f15"));a.setBackListener(function(){c.remove();Q.showPage()});a.getJqUi().appendTo(c)},d=function(){var r=$("<div>");r.addClass("lapp-question-container");
var q=$("<div>");q.addClass("lapp-question-item touch");q.attr("data-touchFeedback","true");q.on("click",g);var l=$("<div>");l.addClass("lapp-bulb-icon-container");var n=$("<div>");n.addClass("lapp-bulb-icon");O.background(n,"icon_bulb");var z=$("<div>");z.addClass("lapp-question-text");z.text(B.get("whatIsQingAnalysis","\u4ec0\u4e48\u662f\u8f7b\u5206\u6790\uff1f"));var x=$("<div>");x.addClass("lapp-question-arrow-container");var y=$("<div>");y.addClass("lapp-question-arrow");O.background(y,"icon_back");
var D=$("<div>");D.addClass("lapp-common-question-container");var k=$("<div>");k.addClass("lapp-common-question");k.text(B.get("FAQ","\u5e38\u89c1\u95ee\u9898"));var h=$("<div>");h.addClass("lapp-common-question-item touch");h.attr("data-touchFeedback","true");h.on("click",p);var m=$("<div>");m.addClass("lapp-common-question-text");m.text(B.get("supportWhatVersionOfERP","1.\u8f7b\u5206\u6790\u652f\u6301\u4ec0\u4e48\u7248\u672c\u7684ERP\uff1f"));var w=$("<div>");w.addClass("lapp-common-question-arrow-container");
var u=$("<div>");u.addClass("lapp-common-question-arrow");O.background(u,"icon_back");n.appendTo(l);l.appendTo(q);z.appendTo(q);y.appendTo(x);x.appendTo(q);q.appendTo(r);m.appendTo(h);u.appendTo(w);w.appendTo(h);k.appendTo(D);h.appendTo(D);r.appendTo(f);D.appendTo(f);f.appendTo(c)},g=function(){var r=new rb,q=.7*document.documentElement.clientWidth,l=$("<div>");l.addClass("lapp-answer-container");var n=$("<div>");n.addClass("lapp-abstract-title");n.text(B.get("whatIsQingAnalysis","\u4ec0\u4e48\u662f\u8f7b\u5206\u6790\uff1f"));
var z=$("<div>");z.addClass("lapp-abstract-text");z.text(B.get("qingAnalysisDescription","\u8f7b\u5206\u6790\u662f\u91d1\u8776\u4e91\u82cd\u7a79\u81ea\u4e3b\u7814\u53d1\u7684\u6570\u636e\u4e91\u8ba1\u7b97\u5f15\u64ce\u548c\u6570\u636e\u53ef\u89c6\u5316\u5e73\u53f0\uff0c\u5b83\u4e3a\u4e1a\u52a1\u4eba\u5458\u63d0\u4f9b\u4e86\u4e00\u79cd\u8f7b\u5efa\u6a21\u3001\u591a\u7ef4\u5ea6\u3001\u9ad8\u6027\u80fd\u7684\u6570\u636e\u5206\u6790\u548c\u63a2\u7d22\u5de5\u5177\u3002"));var x=$("<div>");x.addClass("lapp-pic-abstract");
x.css({background:ma.getIconUrl("qing-lapp/core","mobile_visualization.png")+" no-repeat","background-size":"contain",height:q+"px",width:q+"px"});var y=$("<div>");y.addClass("lapp-description-container");var D=$("<div>");D.addClass("lapp-description-title");D.text(B.get("mobileVisualization","\u667a\u80fd\u7684\u79fb\u52a8\u53ef\u89c6\u5316\u4f53\u9a8c"));var k=$("<div>");k.addClass("lapp-description-text");k.text(B.get("desktopAndMobile","\u684c\u9762\uff0c\u79fb\u52a8\u6d51\u7136\u4e00\u4f53"));
var h=$("<div>");h.addClass("lapp-description-text");h.text(B.get("multiterminalRendering","\u4e00\u6b21\u5206\u6790\uff0c\u591a\u7ec8\u7aef\u5b8c\u7f8e\u5448\u73b0"));D.appendTo(y);k.appendTo(y);h.appendTo(y);D=$("<div>");D.addClass("lapp-pic-abstract");k=$("<div>");k.addClass("lapp-description-container");h=$("<div>");h.addClass("lapp-description-title");h.text(B.get("dataConnection","\u4fbf\u6377\u7684\u6570\u636e\u8fde\u63a5\u80fd\u529b"));var m=$("<div>");m.addClass("lapp-description-text");
m.text(B.get("connectDatabasesAndEntities","\u652f\u6301\u8fde\u63a5\u591a\u79cd\u6570\u636e\u5e93\uff0c\u91d1\u8776\u5b9e\u4f53\u6a21\u578b"));var w=$("<div>");w.addClass("lapp-description-text");w.text(B.get("supportConnectionDataFiles","\u652f\u6301\u8fde\u63a5Excel,CSV\u7b49\u5e73\u9762\u6570\u636e\u6587\u4ef6"));h.appendTo(k);m.appendTo(k);w.appendTo(k);x.css({background:ma.getIconUrl("qing-lapp/core","mobile_visualization"+("zh_CN"==Qa.getParamLanguage()?"":"_en")+".png")+" no-repeat","background-size":"contain",
height:q+"px",width:q+"px"});D.css({background:ma.getIconUrl("qing-lapp/core","data_connection"+("zh_CN"==Qa.getParamLanguage()?"":"_en")+".png")+" no-repeat","background-size":"contain",height:q+"px",width:q+"px"});h=$("<div>");h.addClass("lapp-pic-abstract");h.css({background:ma.getIconUrl("qing-lapp/core","data_visualization.png")+" no-repeat","background-size":"contain",height:q+"px",width:q+"px"});m=$("<div>");m.addClass("lapp-description-container");w=$("<div>");w.addClass("lapp-description-title");
w.text(B.get("dataVisualization","\u4e30\u5bcc\u7684\u6570\u636e\u53ef\u89c6\u5316\u6548\u679c"));var u=$("<div>");u.addClass("lapp-description-text");u.text(B.get("providePresentationWay","\u63d0\u4f9b\u591a\u79cd\u6570\u636e\u53ef\u89c6\u5316\u7c7b\u578b\uff0c\u4ee5\u53ca\u591a\u79cd\u503c\u5c55\u73b0\u65b9\u5f0f"));var C=$("<div>");C.addClass("lapp-description-text");C.text(B.get("presentAnalysisRequirements","\u76f4\u89c2\u5448\u73b0\u4e0d\u540c\u6570\u636e\u7684\u5206\u6790\u9700\u6c42"));w.appendTo(m);
u.appendTo(m);C.appendTo(m);w=$("<div>");w.addClass("lapp-pic-abstract");w.css({background:ma.getIconUrl("qing-lapp/core","data_sharing.png")+" no-repeat","background-size":"contain",height:q+"px",width:q+"px"});q=$("<div>");q.addClass("lapp-description-container");u=$("<div>");u.addClass("lapp-description-title");u.text(B.get("dataSharing","\u5f00\u653e\u7684\u6570\u636e\u5206\u4eab\u4e0e\u6c9f\u901a"));C=$("<div>");C.addClass("lapp-description-text");C.text(B.get("shareVisualizationToGroup","\u652f\u6301\u5c06\u53ef\u89c6\u5316\u7ed3\u679c\u5206\u4eab\u7ed9\u7fa4\u7ec4"));
var A=$("<div>");A.addClass("lapp-description-text");A.text(B.get("userCanDo","\u7fa4\u7ec4\u7684\u7528\u6237\u53ef\u8bc4\u8bba\uff0c\u70b9\u8d5e\uff0c\u8f6c\u53d1"));u.appendTo(q);C.appendTo(q);A.appendTo(q);n.appendTo(l);z.appendTo(l);x.appendTo(l);y.appendTo(l);D.appendTo(l);k.appendTo(l);h.appendTo(l);m.appendTo(l);w.appendTo(l);q.appendTo(l);r.setContent(l);r.setDependence(e);r.createUi()},p=function(){var r=new rb,q=$("<div>");q.addClass("lapp-answer-container");var l=$("<div>");l.addClass("lapp-abstract-title");
l.text(B.get("supportWhatVersionOfERP","1.\u8f7b\u5206\u6790\u652f\u6301\u4ec0\u4e48\u7248\u672c\u7684ERP\uff1f"));var n=$("<div>");n.addClass("lapp-abstract-text");n.text(B.get("lowestVersionOfERP","\u8f7b\u5206\u6790\u652f\u6301\u7684\u6700\u4f4eERP\u7248\u672c\u5982\u4e0b\uff1a"));var z=$("<div>");z.addClass("lapp-abstract-text");z.text(B.get("lowestVersionOfERPContent","\u91d1\u8776\u4e91\u00b7\u82cd\u7a79 V1.0\uff0c\u91d1\u8776EAS V8.2\uff0c\u91d1\u8776\u4e91\u00b7\u661f\u7a7a  V7.1\uff0cKIS\u4e13\u4e1a\u7248 V15.0\u4ee5\u53ca\u6211\u5bb6\u4e91"));
l.appendTo(q);n.appendTo(q);z.appendTo(q);r.setContent(q);r.setDependence(e);r.createUi()},t=function(){var r=$("<div>");r.addClass("lapp-join-group touch");r.attr("data-touchFeedback","true");r.on("click",v);var q=$("<div>");q.addClass("lapp-join-group-container");var l=$("<div>");l.addClass("lapp-group-icon");O.background(l,"icon_group");var n=$("<div>");n.addClass("lapp-group-text");n.text(B.get("joinTheQingAnalysisCommunicationGroup","\u52a0\u5165\u8f7b\u5206\u6790\u4ea4\u6d41\u7fa4"));l.appendTo(q);
n.appendTo(q);q.appendTo(r);r.appendTo(c)},v=function(){var r=$("<div>");r.addClass("lapp-modallayer");var q=$("<div>");q.addClass("lapp-contact-container");var l=$("<div>");l.addClass("lapp-close-icon");O.background(l,"icon_close");l.on("click",function(){r.remove()});var n=$("<div>");n.addClass("lapp-group");n.text(B.get("QingAnalysisCommunicationGroup","\u8f7b\u5206\u6790\u4ea4\u6d41\u7fa4"));var z=$("<img>");z.attr("src",ma.getUrl("qing-lapp/core","group_code.png"));z.addClass("lapp-group-code");
var x=$("<div>");x.addClass("lapp-enter-group");x.text(B.get("IdentifyTheQRCodeIntoTheGroup","\u957f\u6309\u8bc6\u522b\u4e8c\u7ef4\u7801\u8fdb\u7fa4"));l.appendTo(q);n.appendTo(q);z.appendTo(q);x.appendTo(q);q.appendTo(r);r.appendTo(c)}}function rb(){var c,f,a,e;this.setDependence=function(p){e=p};this.setContent=function(p){f=$("<div>");f.addClass("lapp-question-content");f.css("background-color","#FFFFFF");p.appendTo(f)};this.createUi=function(){e.hidePage();c=$("<div>");c.addClass("lapp-pageview");
ja&&b();f.appendTo(c);d();c.appendTo($(document.body));history.pushState(null,null,null);ka=function(){c.remove();e.showPage();ka=function(){e.removePage();Q.showPage()}}};var b=function(){a=new ta;a.setTitle(B.get("practiceNote","\u5e94\u7528\u6307\u5f15"));a.setBackListener(function(){ka()});a.getJqUi().appendTo(c)},d=function(){var p=$("<div>");p.addClass("lapp-join-group");p.on("click",g);var t=$("<div>");t.addClass("lapp-join-group-container");var v=$("<div>");v.addClass("lapp-group-icon");O.background(v,
"icon_group");var r=$("<div>");r.addClass("lapp-group-text");r.text(B.get("joinTheQingAnalysisCommunicationGroup","\u52a0\u5165\u8f7b\u5206\u6790\u4ea4\u6d41\u7fa4"));v.appendTo(t);r.appendTo(t);t.appendTo(p);p.appendTo(c)},g=function(){var p=$("<div>");p.addClass("lapp-modallayer");var t=$("<div>");t.addClass("lapp-contact-container");var v=$("<div>");v.addClass("lapp-close-icon");O.background(v,"icon_close");v.on("click",function(){p.remove()});var r=$("<div>");r.addClass("lapp-group");r.text(B.get("QingAnalysisCommunicationGroup",
"\u8f7b\u5206\u6790\u4ea4\u6d41\u7fa4"));var q=$("<img>");q.attr("src",ma.getUrl("qing-lapp/core","group_code.png"));q.addClass("lapp-group-code");var l=$("<div>");l.addClass("lapp-enter-group");l.text(B.get("IdentifyTheQRCodeIntoTheGroup","\u957f\u6309\u8bc6\u522b\u4e8c\u7ef4\u7801\u8fdb\u7fa4"));v.appendTo(t);r.appendTo(t);q.appendTo(t);l.appendTo(t);t.appendTo(p);p.appendTo(c)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.lapp&&(com.kingdee.bos.qing.lapp={});"undefined"==typeof com.kingdee.bos.qing.lapp.ui&&(com.kingdee.bos.qing.lapp.ui={});var sb=com.kingdee.bos.qing.lapp.ui,T,na,Ga,ta,Za,Ta,Ra,ca,sa,Va,tb,Oa,Ma,Ya,Xa,Wa,O,Ua,Aa,fa,kb,ra,Ca,La,Sa,za,ma,Ka,jb,Qa,B,Ja,pa,ya,ub,Da,Na,Ha;(function(){var c=com.kingdee.bos.qing.lapp.framework;T=c.Facade;Ja=c.BehaviorManager;c=com.kingdee.bos.qing.common;
na=c.DomUtil;Ga=c.Util;c=com.kingdee.bos.qing.lapp.component;ta=c.HeadBar;Za=c.SearchBox;sa=c.MessageDialog;Ta=c.SwiperTabContainer;Ra=c.BottomSelector;ca=c.Toast;Va=c.MessageCurtain;tb=c.ErrorDialog;Oa=c.PullUpScroller;Ma=c.LazyLoader;Ya=c.RadioBar;Xa=c.RadioBarGroup;Wa=c.EventAction;O=c.MobileIcons;Na=c.DragDropTool;Ha=c.PullDownToRefresh;c=com.kingdee.bos.qing.lapp.model;Ua=c.Directory;Aa=c.DirectorySet;fa=c.Analysis;kb=c.SharingModel;ra=c.MessageModel;Ca=c.DatacenterInfo;La=c.CardViewCachePageModel;
Sa=c.ListViewCachePageModel;c=com.kingdee.bos.qing.lapp.framework.common;Qa=c.LanguageUtil;ma=c.Resource;Ka=c.AbstractBehaviorManager;jb=c.WindowResizeObserver;B=c.MultilanguageManager.createPackageAccessor(sb);za=com.kingdee.bos.qing.CodeLoader;c=com.kingdee.bos.qing.lapp.integration;pa=c.EnvUtil;ya=c.RemoteFrameworkUtil;c=com.kingdee.bos.qing;ub=c.Seer;c=com.kingdee.bos.qing.lapp.common.ui;Da=c.CommonUiUtil})();var Pa,ob,pb,Q,ja=!1,ka;sb.Main=function(){var c,f,a,e;Q=new function(){var g=Y.CARD_VIEW;
this.getTitle=function(){var p=ub.getUrlParamValue("title");p||(p=B.get("qingAnalysis","\u8f7b\u5206\u6790"));return p};this.getJqPage=function(){return c};this.hidePage=function(){c.css("display","none")};this.showPage=function(){c.css("display","");a&&a.updateReadStatus();ka=function(){pa.closeWebView()}};this.isCardView=function(){return g==Y.CARD_VIEW};this.getVisitedViewType=function(){return g};this.setVisitedViewType=function(p){g=p};this.refreshAnalysisTabPane=function(p){if(p){var t=f.getOpenDirName();
g=g==Y.CARD_VIEW?Y.LIST_VIEW:Y.CARD_VIEW}f&&f.remove();f=new Y;t&&f.setOpenDirName(t);f.getJqUi().appendTo(c)};this.doTabLockedTip=function(){(new ca).show(B.get("needClickFinishToExit","\u8bf7\u5148\u70b9\u51fb\u3010\u5b8c\u6210\u3011\u9000\u51fa\u7f16\u8f91\u72b6\u6001"),ca.LENGTH_SHORT)};this.createNoAnalysisUi=function(p,t,v,r,q){if(!p.hasClass("lapp-followeditor-nofollow")){p.addClass("lapp-followeditor-nofollow");var l=$("<span>");l.addClass("lapp-followeditor-nofollow-icon");O.background(l,
"icon_nofollow");l.appendTo(p);l=$("<span>");l.addClass("lapp-followeditor-nofollow-text");t?l.text(B.get("noResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c")):v?l.text(B.get("noFollowAnalysis","\u6682\u65e0\u5173\u6ce8\u7684\u5206\u6790\uff0c\u70b9\u51fb\u5361\u7247\u53f3\u4e0a\u89d2\u7684\u5173\u6ce8\u56fe\u6807\uff0c\u65b9\u4fbf\u5728\u6b64\u67e5\u9605\u5206\u6790")):r?l.text(B.get("publishAnalysis","\u6682\u65e0\u5206\u6790\uff0c\u8bf7\u5148\u53d1\u5e03\u5206\u6790\u81f3\u6b64\u76ee\u5f55")):
q&&l.text(B.get("noPublishRecord","\u6682\u65e0\u53d1\u5e03\u76ee\u5f55"));l.appendTo(p)}};history.pushState&&window.addEventListener("popstate",function(){ka();pa.hideNavTitle()});window.addEventListener("contextmenu",function(p){p.preventDefault()})};this.createUi=function(){c=$("<div>");c.addClass("lapp-pageview");e=new H;e.setInitListener(b);e.setParentUi(c);e.createUi();c.appendTo($(document.body));new TouchFeedback("body");history.pushState(null,null,null);ka=function(){pa.closeWebView()};oa.initEventListener();
pa.isUserAgreementAndDeactivateShown()&&(new T("config",function(g){"0"==g&&(za.setCallback(function(){var p=new com.kingdee.bos.qing.lapp.agreement.PrivacyTipsDialog;setTimeout(function(){p.show()},500)}),za.loadJs("qing-lapp/core/qing-lapp-agreement.js"))})).getAgreementStatus()};this.showHeadBar=function(){ja=!0};this.setUserInfo=function(){T.setCustomErrorHandler(function(g,p){"5002"!=g&&(new tb(c)).show()});pa.loadUserInfo(function(g,p,t,v){Pa=g;ob=p;pb=t;(new T("env",function(r){pa.setEnv(null,
r)})).getYZJAppId(v)})};this.setHeadTitle=function(){document.title=Q.getTitle()};var b=function(){var g=new hb(B.get("myAnalysis","\u6211\u7684\u8f7b\u5206\u6790"),"btn_analysis","lapp-bottom-button-icon-analysis"),p=new hb(B.get("myShare","\u6211\u7684\u5206\u4eab"),"btn_comm","lapp-bottom-button-icon-share"),t=new zb;t.addButton(g);t.addButton(p);t.setSelectedChangeListener(d);t.setSelected(g);t.getJqUi().appendTo(c)},d=function(g){0==g?(a&&a.hidden(),e&&e.show(),f?f.show():(f=new Y,f.getJqUi().appendTo(c))):
(f&&f.hidden(),e&&e.hidden(),a?a.show():(a=new Ab,a.getJqUi().appendTo(c)))}};M.ITEM_HEIGHT=45;J.TYPE_ALL="all";J.TYPE_SELF="self";J.TYPE_OTHER="other";Y.CARD_VIEW="1";Y.LIST_VIEW="2";I.FollowTabPane=0;I.AllTabPane=1;qa.DIRECTORY_TAB_PANE="DirectoryTabPane";qa.FOLLOW_TAB_PANE="FollowTabPane";Y.EditModeSetting=new function(){var c;this.setFunEditMode=function(f){c=f};this.changeEditMode=function(f){c&&c(f)}};Y.CachePage=new function(){var c,f;this.setTriggerAnalysis=function(e){f=e};this.getTriggerAnalysis=
function(){return f};this.setCachePageListener=function(e){c=e};this.fireCachePageListener=function(){c&&c(a)};this.isHasCache=function(){return sessionStorage.getItem("cachePage")?!0:!1};this.loadListViewCachePage=function(e){var b=sessionStorage.getItem("cachePage");if(b){b=JSON.parse(b);var d=new Sa;d.fromJsonObject(b);e(d);sessionStorage.removeItem("cachePage")}};this.loadCachePageAnalysisList=function(e){var b=sessionStorage.getItem("cachePage");if(b){b=JSON.parse(b);var d=new La;d.fromJsonObject(b);
e(d);sessionStorage.removeItem("cachePage")}};this.loadCachePageDirectoryList=function(e){var b=sessionStorage.getItem("cachePage");if(b){b=JSON.parse(b);var d=new La;d.fromJsonObject(b);f=d.getTriggerAnalysis();e(d)}};this.removeCache=function(){sessionStorage.removeItem("cachePage")};var a=function(e){e.setTriggerAnalysis(f);e=e.toJsonObject();e=JSON.stringify(e);sessionStorage.removeItem("cachePage");sessionStorage.setItem("cachePage",e)}};var Fb=new function(){var c;this.doShare=function(f,a,
e){c?c.doShare(f,a,e):(za.setCallback(function(){c=window.ShareOuter;c.setIsNewShare(!0);c.doShare(f,a,e)}),za.loadJs(ya.getResourcePrefix()+"share/qing-share-outer.js"))}},oa=new function(){var c=this,f={},a,e;this.clear=function(){f={};a=null};this.clearSupportEvent=function(b){f[b]=null};this.getLappAccessToken=function(){return a};this.supportCardFullscreenShareEvent=function(b){return(b=f[b])&&-1!=b.indexOf(oa.SUPPORT_EVENT.CARD_FULLSCREEN_SHARE)?!0:!1};this.setFunUpdateFavoriteStatus=function(b){e=
b};this.loadIframeUrl=function(b){return 0==location.href.indexOf("https")&&0!=b.indexOf("https")?(b="\u5f53\u524diframe\u4e3aHTTP\u9875\u9762\uff08#1\uff09\uff0c\u4e0d\u652f\u6301\u5728HTTPS\u4e0b\u6253\u5f00\uff0c\u8bf7\u5728\u79fb\u52a8\u8f7b\u5e94\u7528\u53d1\u5e03\u7ba1\u7406\u9009\u62e9\u201c\u7f29\u7565\u56fe\u201d\u7684\u5448\u73b0\u65b9\u5f0f".replace("#1",b.substr(0,b.indexOf("?"))),"error.html?showSmallCurtain=true&errorMessage="+encodeURI(b)):b};this.initEventListener=function(){window.addEventListener("message",
function(b){b=JSON.parse(b.data);if("LAPP_MESSAGE_EXECUTION"==b.from||"LAPP_MESSAGE_DSB"==b.from){if("HeightAnnouncer"==b.type||"heightAnnouncer"==b.type){var d="div"+b.iframeId,g=b.height;d=$("#"+d);d.find("iframe").first().css("height",g);d.css("height",g)}else if("layout"==b.type){d="#div"+b.iframeId;g=b.top+25;var p=b.bottomHeight,t=$(d).parent().parent().parent(),v=t.prop("scrollTop"),r=$(d).parent().parent().position().top;r=$(document.body).height()-(132+r+36+g+50);p<$(d).height()-g&&t.prop("scrollTop",
v+p-r)}else if("requestWidgetFullscreen"==b.type||"requestFullscreen"==b.type){if(d=b.iframeId,d=$("#"+d))d.addClass("lapp-iframe-fullscreen"),$(".lapp-swiper-bar").addClass("lapp-swiper-bar-fullscreen"),$(".lapp-main").addClass("lapp-main-fullscreen"),$(".lapp-suspensionbar").hide(),d=d.parent().parent(),d.addClass("lapp-card-fullscreen")}else if("exitWidgetFullscreen"==b.type||"exitFullscreen"==b.type){if(d=b.iframeId,d=$("#"+d))d.removeClass("lapp-iframe-fullscreen"),$(".lapp-swiper-bar").removeClass("lapp-swiper-bar-fullscreen"),
$(".lapp-bottom-bar").show(),$(".lapp-suspensionbar").show(),d=d.parent().parent(),d.removeClass("lapp-card-fullscreen"),d.addClass("lapp-card")}else"access_token"==b.type&&(a=b.token);"supportEvent"==b.type&&(f[b.iframeId]=b.supportEvent);(d=b.iframeId)&&c.supportCardFullscreenShareEvent(d)&&("cardFullscreenShare"==b.type&&Fb.doShare(b.analysisId,b.lappUserId,b.lappUserType),"exitCardFullscreen"==b.type&&(b=$("#"+b.iframeId)))&&(b.parent().removeClass("lapp-iframe-fullscreen"),b.removeClass("lapp-iframe-fullscreen"),
$(".lapp-swiper-bar").removeClass("lapp-swiper-bar-fullscreen"),$(".lapp-bottom-bar").show(),$(".lapp-suspensionbar").show(),b.parent().parent(),b.parent().removeClass("lapp-card-fullscreen"),b.parent().parent().removeClass("lapp-card-fullscreen"),e&&e())}},!1)}};oa.SUPPORT_EVENT={};oa.SUPPORT_EVENT.CARD_FULLSCREEN_SHARE="cardFullscreenShare"})();
//qingVersionTag: 20250324