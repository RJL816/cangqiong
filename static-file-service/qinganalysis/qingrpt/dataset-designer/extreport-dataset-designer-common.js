var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(R,V,X){if(R==Array.prototype||R==Object.prototype)return R;R[V]=X.value;return R};
$jscomp.getGlobal=function(R){R=["object"==typeof globalThis&&globalThis,R,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var V=0;V<R.length;++V){var X=R[V];if(X&&X.Math==Math)return X}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(R,V){var X=$jscomp.propertyToPolyfillSymbol[V];if(null==X)return R[V];X=R[X];return void 0!==X?X:R[V]};$jscomp.polyfill=function(R,V,X,l){V&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(R,V,X,l):$jscomp.polyfillUnisolated(R,V,X,l))};
$jscomp.polyfillUnisolated=function(R,V,X,l){X=$jscomp.global;R=R.split(".");for(l=0;l<R.length-1;l++){var sa=R[l];if(!(sa in X))return;X=X[sa]}R=R[R.length-1];l=X[R];V=V(l);V!=l&&null!=V&&$jscomp.defineProperty(X,R,{configurable:!0,writable:!0,value:V})};
$jscomp.polyfillIsolated=function(R,V,X,l){var sa=R.split(".");R=1===sa.length;l=sa[0];l=!R&&l in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var b=0;b<sa.length-1;b++){var Ja=sa[b];if(!(Ja in l))return;l=l[Ja]}sa=sa[sa.length-1];X=$jscomp.IS_SYMBOL_NATIVE&&"es6"===X?l[sa]:null;V=V(X);null!=V&&(R?$jscomp.defineProperty($jscomp.polyfills,sa,{configurable:!0,writable:!0,value:V}):V!==X&&(void 0===$jscomp.propertyToPolyfillSymbol[sa]&&(X=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[sa]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(sa):$jscomp.POLYFILL_PREFIX+X+"$"+sa),$jscomp.defineProperty(l,$jscomp.propertyToPolyfillSymbol[sa],{configurable:!0,writable:!0,value:V})))};
$jscomp.polyfill("String.prototype.replaceAll",function(R){return R?R:function(V,X){if(V instanceof RegExp&&!V.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return V instanceof RegExp?this.replace(V,X):this.replace(new RegExp(String(V).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),X)}},"es_2021","es3");$jscomp.arrayIteratorImpl=function(R){var V=0;return function(){return V<R.length?{done:!1,value:R[V++]}:{done:!0}}};
$jscomp.arrayIterator=function(R){return{next:$jscomp.arrayIteratorImpl(R)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(R){if(R)return R;var V=function(b,Ja){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:Ja})};V.prototype.toString=function(){return this.$jscomp$symbol$id_};var X="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",l=0,sa=function(b){if(this instanceof sa)throw new TypeError("Symbol is not a constructor");return new V(X+(b||"")+"_"+l++,b)};return sa},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(R){if(R)return R;R=Symbol("Symbol.iterator");for(var V="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),X=0;X<V.length;X++){var l=$jscomp.global[V[X]];"function"===typeof l&&"function"!=typeof l.prototype[R]&&$jscomp.defineProperty(l.prototype,R,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return R},"es6",
"es3");$jscomp.iteratorPrototype=function(R){R={next:R};R[Symbol.iterator]=function(){return this};return R};$jscomp.iteratorFromArray=function(R,V){R instanceof String&&(R+="");var X=0,l=!1,sa={next:function(){if(!l&&X<R.length){var b=X++;return{value:V(b,R[b]),done:!1}}l=!0;return{done:!0,value:void 0}}};sa[Symbol.iterator]=function(){return sa};return sa};
$jscomp.polyfill("Array.prototype.keys",function(R){return R?R:function(){return $jscomp.iteratorFromArray(this,function(V){return V})}},"es6","es3");$jscomp.checkStringArgs=function(R,V,X){if(null==R)throw new TypeError("The 'this' value for String.prototype."+X+" must not be null or undefined");if(V instanceof RegExp)throw new TypeError("First argument to String.prototype."+X+" must not be a regular expression");return R+""};
$jscomp.polyfill("String.prototype.startsWith",function(R){return R?R:function(V,X){var l=$jscomp.checkStringArgs(this,V,"startsWith");V+="";var sa=l.length,b=V.length;X=Math.max(0,Math.min(X|0,l.length));for(var Ja=0;Ja<b&&X<sa;)if(l[X++]!=V[Ja++])return!1;return Ja>=b}},"es6","es3");$jscomp.polyfill("Object.is",function(R){return R?R:function(V,X){return V===X?0!==V||1/V===1/X:V!==V&&X!==X}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(R){return R?R:function(V,X){var l=this;l instanceof String&&(l=String(l));var sa=l.length;X=X||0;for(0>X&&(X=Math.max(X+sa,0));X<sa;X++){var b=l[X];if(b===V||Object.is(b,V))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(R){return R?R:function(V,X){return-1!==$jscomp.checkStringArgs(this,V,"includes").indexOf(V,X||0)}},"es6","es3");
$jscomp.findInternal=function(R,V,X){R instanceof String&&(R=String(R));for(var l=R.length,sa=0;sa<l;sa++){var b=R[sa];if(V.call(X,b,sa,R))return{i:sa,v:b}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(R){return R?R:function(V,X){return $jscomp.findInternal(this,V,X).v}},"es6","es3");$jscomp.owns=function(R,V){return Object.prototype.hasOwnProperty.call(R,V)};
$jscomp.polyfill("Object.values",function(R){return R?R:function(V){var X=[],l;for(l in V)$jscomp.owns(V,l)&&X.push(V[l]);return X}},"es8","es3");
(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});var R=com.kingdee.bos.extreport.datasetdesigner;var V=com.kingdee.bos.qing.framework.common.AbstractIcons;var X=new function(){V.call(this);var l=this.protectedMethod;
this.protectedInit=function(sa,b){b.setFilePath("qingrpt/dataset-designer/skin/ierp/res/iconSprite0_scaled1.png");b.setGap(0,0);b.setStartPosition(0,0);b.setIconSize(16,16);l.registIcon(0,0,"add");b.setStartPosition(16,0);b.setIconSize(16,16);l.registIcon(0,0,"ArrowDown");b.setStartPosition(32,0);b.setIconSize(16,16);l.registIcon(0,0,"boolean");b.setStartPosition(48,0);b.setIconSize(16,16);l.registIcon(0,0,"boolean_selected");b.setStartPosition(64,0);b.setIconSize(16,16);l.registIcon(0,0,"btn_preview");
b.setStartPosition(80,0);b.setIconSize(16,16);l.registIcon(0,0,"btn_preview_hover");b.setStartPosition(96,0);b.setIconSize(16,16);l.registIcon(0,0,"btn_preview_selected");b.setStartPosition(112,0);b.setIconSize(16,16);l.registIcon(0,0,"btn_preview_selected_hover");b.setStartPosition(128,0);b.setIconSize(16,16);l.registIcon(0,0,"copy");b.setStartPosition(144,0);b.setIconSize(16,16);l.registIcon(0,0,"copy_hover");b.setStartPosition(160,0);b.setIconSize(16,16);l.registIcon(0,0,"date");b.setStartPosition(176,
0);b.setIconSize(16,16);l.registIcon(0,0,"dateTime");b.setStartPosition(192,0);b.setIconSize(16,16);l.registIcon(0,0,"dateTime_selected");b.setStartPosition(208,0);b.setIconSize(16,16);l.registIcon(0,0,"date_selected");b.setStartPosition(224,0);b.setIconSize(16,16);l.registIcon(0,0,"del");b.setStartPosition(240,0);b.setIconSize(16,16);l.registIcon(0,0,"delete");b.setStartPosition(256,0);b.setIconSize(16,16);l.registIcon(0,0,"del_hover");b.setStartPosition(272,0);b.setIconSize(16,16);l.registIcon(0,
0,"down");b.setStartPosition(288,0);b.setIconSize(16,16);l.registIcon(0,0,"downArrow");b.setStartPosition(304,0);b.setIconSize(16,16);l.registIcon(0,0,"downArrow_hover");b.setStartPosition(320,0);b.setIconSize(16,16);l.registIcon(0,0,"ds_datacenter");b.setStartPosition(336,0);b.setIconSize(16,16);l.registIcon(0,0,"ds_entity");b.setStartPosition(352,0);b.setIconSize(16,16);l.registIcon(0,0,"ds_outdb");b.setStartPosition(368,0);b.setIconSize(16,16);l.registIcon(0,0,"ds_superquery");b.setStartPosition(384,
0);b.setIconSize(16,16);l.registIcon(0,0,"edit");b.setStartPosition(400,0);b.setIconSize(400,230);l.registIcon(0,0,"ctrl_prop");b.setStartPosition(0,16);b.setIconSize(16,16);l.registIcon(0,0,"edit_hover");b.setStartPosition(16,16);b.setIconSize(16,16);l.registIcon(0,0,"entity_head");b.setStartPosition(32,16);b.setIconSize(16,16);l.registIcon(0,0,"entity_head_selected");b.setStartPosition(48,16);b.setIconSize(16,16);l.registIcon(0,0,"entity_sub");b.setStartPosition(64,16);b.setIconSize(16,16);l.registIcon(0,
0,"entity_sub_selected");b.setStartPosition(80,16);b.setIconSize(16,16);l.registIcon(0,0,"f7");b.setStartPosition(96,16);b.setIconSize(16,16);l.registIcon(0,0,"field");b.setStartPosition(112,16);b.setIconSize(16,16);l.registIcon(0,0,"field_selected");b.setStartPosition(128,16);b.setIconSize(16,16);l.registIcon(0,0,"file");b.setStartPosition(144,16);b.setIconSize(16,16);l.registIcon(0,0,"file_selected");b.setStartPosition(160,16);b.setIconSize(16,16);l.registIcon(0,0,"icon_search");b.setStartPosition(176,
16);b.setIconSize(16,16);l.registIcon(0,0,"icon_search_hover");b.setStartPosition(192,16);b.setIconSize(16,16);l.registIcon(0,0,"integer");b.setStartPosition(208,16);b.setIconSize(16,16);l.registIcon(0,0,"integer_selected");b.setStartPosition(224,16);b.setIconSize(16,16);l.registIcon(0,0,"leftArrow");b.setStartPosition(240,16);b.setIconSize(16,16);l.registIcon(0,0,"leftArrow_hover");b.setStartPosition(256,16);b.setIconSize(16,16);l.registIcon(0,0,"macromanage");b.setStartPosition(272,16);b.setIconSize(16,
16);l.registIcon(0,0,"macromanage_hover");b.setStartPosition(288,16);b.setIconSize(16,16);l.registIcon(0,0,"macronoperm");b.setStartPosition(304,16);b.setIconSize(16,16);l.registIcon(0,0,"micro_check");b.setStartPosition(320,16);b.setIconSize(16,16);l.registIcon(0,0,"micro_date");b.setStartPosition(336,16);b.setIconSize(16,16);l.registIcon(0,0,"micro_f7");b.setStartPosition(352,16);b.setIconSize(16,16);l.registIcon(0,0,"micro_input");b.setStartPosition(368,16);b.setIconSize(16,16);l.registIcon(0,
0,"micro_label");b.setStartPosition(384,16);b.setIconSize(16,16);l.registIcon(0,0,"micro_list");b.setStartPosition(0,32);b.setIconSize(16,16);l.registIcon(0,0,"micro_spinner");b.setStartPosition(16,32);b.setIconSize(16,16);l.registIcon(0,0,"micro_switch");b.setStartPosition(32,32);b.setIconSize(16,16);l.registIcon(0,0,"numerical");b.setStartPosition(48,32);b.setIconSize(16,16);l.registIcon(0,0,"numerical_selected");b.setStartPosition(64,32);b.setIconSize(16,16);l.registIcon(0,0,"outdb");b.setStartPosition(80,
32);b.setIconSize(16,16);l.registIcon(0,0,"outdb_hover");b.setStartPosition(96,32);b.setIconSize(16,16);l.registIcon(0,0,"refresh");b.setStartPosition(112,32);b.setIconSize(16,16);l.registIcon(0,0,"refresh_hover");b.setStartPosition(128,32);b.setIconSize(16,16);l.registIcon(0,0,"rightArrow");b.setStartPosition(144,32);b.setIconSize(16,16);l.registIcon(0,0,"rightArrow_hover");b.setStartPosition(160,32);b.setIconSize(16,16);l.registIcon(0,0,"smallparam");b.setStartPosition(176,32);b.setIconSize(16,
16);l.registIcon(0,0,"switch");b.setStartPosition(192,32);b.setIconSize(16,16);l.registIcon(0,0,"switch_hover");b.setStartPosition(208,32);b.setIconSize(16,16);l.registIcon(0,0,"table");b.setStartPosition(224,32);b.setIconSize(16,16);l.registIcon(0,0,"table_selected");b.setStartPosition(240,32);b.setIconSize(16,16);l.registIcon(0,0,"tick");b.setStartPosition(256,32);b.setIconSize(16,16);l.registIcon(0,0,"time");b.setStartPosition(272,32);b.setIconSize(16,16);l.registIcon(0,0,"time_selected");b.setStartPosition(288,
32);b.setIconSize(16,16);l.registIcon(0,0,"txt");b.setStartPosition(304,32);b.setIconSize(16,16);l.registIcon(0,0,"txt_selected");b.setStartPosition(320,32);b.setIconSize(16,16);l.registIcon(0,0,"up");b.setStartPosition(336,32);b.setIconSize(16,16);l.registIcon(0,0,"upArrow");b.setStartPosition(352,32);b.setIconSize(16,16);l.registIcon(0,0,"upArrow_hover");b.setStartPosition(368,32);b.setIconSize(16,16);l.registIcon(0,0,"arrow_down");b.setStartPosition(384,32);b.setIconSize(16,16);l.registIcon(0,
0,"arrow_down_hover");b.setStartPosition(0,48);b.setIconSize(16,16);l.registIcon(0,0,"arrow_up");b.setStartPosition(16,48);b.setIconSize(16,16);l.registIcon(0,0,"arrow_up_hover");b.setStartPosition(32,48);b.setIconSize(16,16);l.registIcon(0,0,"binary");b.setStartPosition(48,48);b.setIconSize(16,16);l.registIcon(0,0,"binary_selected");b.setStartPosition(64,48);b.setIconSize(16,16);l.registIcon(0,0,"calcField");b.setStartPosition(80,48);b.setIconSize(16,16);l.registIcon(0,0,"calcField_hover");b.setStartPosition(96,
48);b.setIconSize(16,16);l.registIcon(0,0,"ds_qingmodeler");b.setStartPosition(112,48);b.setIconSize(16,16);l.registIcon(0,0,"layout");b.setStartPosition(128,48);b.setIconSize(16,16);l.registIcon(0,0,"layout_hover");b.setStartPosition(144,48);b.setIconSize(16,16);l.registIcon(0,0,"menu");b.setStartPosition(160,48);b.setIconSize(16,16);l.registIcon(0,0,"menu_hover");b.setStartPosition(176,48);b.setIconSize(16,16);l.registIcon(0,0,"replace");b.setStartPosition(192,48);b.setIconSize(16,16);l.registIcon(0,
0,"replace_hover");b.setStartPosition(208,48);b.setIconSize(16,16);l.registIcon(0,0,"SQL");b.setStartPosition(224,48);b.setIconSize(16,16);l.registIcon(0,0,"SQL_selected");b.setStartPosition(240,48);b.setIconSize(16,16);l.registIcon(0,0,"zoom_in");b.setStartPosition(256,48);b.setIconSize(16,16);l.registIcon(0,0,"zoom_in_hover");b.setStartPosition(272,48);b.setIconSize(16,16);l.registIcon(0,0,"zoom_out");b.setStartPosition(288,48);b.setIconSize(16,16);l.registIcon(0,0,"zoom_out_hover");b.setStartPosition(304,
48);b.setIconSize(32,32);l.registIcon(0,0,"fulljoin");b.setStartPosition(336,48);b.setIconSize(32,32);l.registIcon(0,0,"innerjoin");b.setStartPosition(368,48);b.setIconSize(32,32);l.registIcon(0,0,"leftjoin");b.setStartPosition(0,64);b.setIconSize(32,32);l.registIcon(0,0,"rightjoin");b.setStartPosition(32,64);b.setIconSize(20,20);l.registIcon(0,0,"micro_fulljoin");b.setStartPosition(52,64);b.setIconSize(20,20);l.registIcon(0,0,"micro_innerjoin");b.setStartPosition(72,64);b.setIconSize(20,20);l.registIcon(0,
0,"micro_leftjoin");b.setStartPosition(92,64);b.setIconSize(20,20);l.registIcon(0,0,"micro_rightjoin");b.setStartPosition(112,64);b.setIconSize(48,48);l.registIcon(0,0,"join");b.setStartPosition(160,64);b.setIconSize(48,48);l.registIcon(0,0,"union");b.setStartPosition(208,64);b.setIconSize(40,40);l.registIcon(0,0,"checkbox");b.setStartPosition(248,64);b.setIconSize(40,40);l.registIcon(0,0,"date_ctrl");b.setStartPosition(288,80);b.setIconSize(40,40);l.registIcon(0,0,"date_f7");b.setStartPosition(328,
80);b.setIconSize(40,40);l.registIcon(0,0,"input");b.setStartPosition(32,84);b.setIconSize(40,40);l.registIcon(0,0,"label");b.setStartPosition(72,84);b.setIconSize(40,40);l.registIcon(0,0,"list");b.setStartPosition(208,104);b.setIconSize(40,40);l.registIcon(0,0,"select");b.setStartPosition(248,104);b.setIconSize(40,40);l.registIcon(0,0,"spinner");b.setStartPosition(112,112);b.setIconSize(40,40);l.registIcon(0,0,"switch_btn");b.setStartPosition(304,120);b.setIconSize(64,64);l.registIcon(0,0,"arrow");
b.setStartPosition(0,124);b.setIconSize(66,78);l.registIcon(0,0,"icon_question");b.setStartPosition(152,144);b.setIconSize(60,78);l.registIcon(0,0,"no_source");b.setStartPosition(212,144);b.setIconSize(90,45);l.registIcon(0,0,"Access");b.setStartPosition(88,152);b.setIconSize(64,64);l.registIcon(0,0,"fulljoin2x");b.setStartPosition(304,184);b.setIconSize(64,64);l.registIcon(0,0,"innerjoin2x");b.setStartPosition(214,189);b.setIconSize(90,45);l.registIcon(0,0,"Amazon_Redshift");b.setStartPosition(0,
202);b.setIconSize(64,64);l.registIcon(0,0,"leftjoin2x");b.setStartPosition(64,216);b.setIconSize(64,64);l.registIcon(0,0,"rightjoin2x");b.setStartPosition(656,230);b.setIconSize(144,144);l.registIcon(0,0,"boEntity");b.setStartPosition(512,230);b.setIconSize(144,144);l.registIcon(0,0,"datasource");b.setStartPosition(368,230);b.setIconSize(144,144);l.registIcon(0,0,"file_java");b.setStartPosition(128,234);b.setIconSize(90,46);l.registIcon(0,0,"KingBase");b.setStartPosition(224,248);b.setIconSize(144,
144);l.registIcon(0,0,"oql");b.setStartPosition(0,280);b.setIconSize(90,45);l.registIcon(0,0,"Apache_Doris");b.setStartPosition(90,280);b.setIconSize(90,45);l.registIcon(0,0,"Apache_Drill");b.setStartPosition(0,325);b.setIconSize(90,45);l.registIcon(0,0,"Apache_Hive");b.setStartPosition(90,325);b.setIconSize(90,45);l.registIcon(0,0,"Apache_Impala");b.setStartPosition(0,370);b.setIconSize(90,45);l.registIcon(0,0,"Apache_Kylin");b.setStartPosition(90,370);b.setIconSize(90,45);l.registIcon(0,0,"CLICKHOUSE");
b.setStartPosition(368,374);b.setIconSize(144,144);l.registIcon(0,0,"param");b.setStartPosition(512,374);b.setIconSize(144,144);l.registIcon(0,0,"sql");b.setStartPosition(656,374);b.setIconSize(144,144);l.registIcon(0,0,"ds_linkTable");b.setStartPosition(200,392);b.setIconSize(168,96);l.registIcon(0,0,"marco_error");b.setStartPosition(0,415);b.setIconSize(90,45);l.registIcon(0,0,"DB2");b.setStartPosition(90,415);b.setIconSize(90,45);l.registIcon(0,0,"DM");b.setStartPosition(0,460);b.setIconSize(90,
45);l.registIcon(0,0,"GaussDB");b.setStartPosition(90,460);b.setIconSize(90,45);l.registIcon(0,0,"Gbase");b.setStartPosition(217,488);b.setIconSize(151,86);l.registIcon(0,0,"notable");b.setStartPosition(0,505);b.setIconSize(90,45);l.registIcon(0,0,"Greenplum");b.setStartPosition(90,505);b.setIconSize(90,45);l.registIcon(0,0,"HANA");b.setStartPosition(368,518);b.setIconSize(144,144);l.registIcon(0,0,"link3x");b.setStartPosition(512,518);b.setIconSize(144,144);l.registIcon(0,0,"union3x");b.setStartPosition(710,
518);b.setIconSize(90,45);l.registIcon(0,0,"MySQL");b.setStartPosition(0,550);b.setIconSize(90,45);l.registIcon(0,0,"ODPS");b.setStartPosition(90,550);b.setIconSize(90,45);l.registIcon(0,0,"ORACLE");b.setStartPosition(710,563);b.setIconSize(90,45);l.registIcon(0,0,"Postgre_SQL");b.setStartPosition(278,574);b.setIconSize(90,45);l.registIcon(0,0,"Spark_SQL");b.setStartPosition(188,574);b.setIconSize(90,45);l.registIcon(0,0,"SQLite");b.setStartPosition(0,595);b.setIconSize(90,45);l.registIcon(0,0,"SQL_Server");
b.setStartPosition(90,595);b.setIconSize(90,45);l.registIcon(0,0,"superQuery");b.setStartPosition(710,608);b.setIconSize(90,45);l.registIcon(0,0,"SYBASE");b.setStartPosition(180,619);b.setIconSize(90,45);l.registIcon(0,0,"SyBase_IQ");b.setStartPosition(270,619);b.setIconSize(90,45);l.registIcon(0,0,"TIDB");b.setStartPosition(0,640);b.setIconSize(90,46);l.registIcon(0,0,"TDSQL");b.setStartPosition(90,640);b.setIconSize(90,45);l.registIcon(0,0,"VastBase");b.setStartPosition(710,653);b.setIconSize(90,
45);l.registIcon(0,0,"YasDB");b.setStartPosition(360,662);b.setIconSize(90,45);l.registIcon(0,0,"cosmic");b.setStartPosition(450,662);b.setIconSize(200,120);l.registIcon(0,0,"NoParam");b.setFilePath("qingrpt/dataset-designer/skin/ierp/res/iconSprite1_scaled1.png");b.setGap(0,0);b.setStartPosition(0,0);b.setIconSize(200,200);l.registIcon(0,0,"no_data");b.setStartPosition(546,0);b.setIconSize(254,140);l.registIcon(0,0,"linkBg")}};R.Icons=X})();(function(){function R(aa,ia,Ba,fa){b.call(this,aa,ia,Ba,fa);var Aa=this.protectedMethod;this.loadModel=function(na,ya,ra){Aa.remote("loadModel",{dataSetId:na,spaceType:ya,spaceId:ra})};this.saveModel=function(na,ya,ra,Ma){na={model:JSON.stringify(ra),dataSetId:na,modelCacheId:ya,spaceId:Ca.decodeParamFromUrl(window.location.search,"spaceId"),spaceType:Ma};Aa.remote("saveModel",na)};this.checkModel=function(na,ya){na={model:JSON.stringify(ya),dataSetId:na};Aa.remote("checkModel",na)};this.checkSpaceCreatorPerm=
function(na,ya){na={model:JSON.stringify(ya),dataSetId:na};Aa.remote("checkSpaceCreatorPerm",na)};this.cacheModel=function(na,ya){na={model:JSON.stringify(ya),dataSetId:na};Aa.remote("cacheModel",na)};this.cleanCacheModel=function(na){Aa.remote("cleanCacheModel",{cacheId:na})};this.checkCalcFormula=function(na,ya,ra,Ma,Qa){na={name:na,formula:ya,arrCols:JSON.stringify(ra),arrCalcCols:JSON.stringify(Ma),tableId:Qa};Aa.setShowBlocking(!1);Aa.remote("checkCalcFormula",na)};this.checkAllFormulas=function(na,
ya,ra){na={arrFields:JSON.stringify(na),arrCalcFields:JSON.stringify(ya),tableId:ra};Aa.remote("checkAllFormulas",na)}}function V(aa,ia,Ba,fa){b.call(this,aa,ia,Ba,fa);var Aa=this.protectedMethod;this.checkMacroPermission=function(){var na={};na.appID=Ha.QING_RPT;Aa.remote("checkMacroPermission",na)};this.loadAllMacros=function(){Aa.remote("loadAllMacros",{})};this.loadMacroPageIndexByUid=function(na,ya){Aa.remote("loadPageIndexByUid",{macroUid:na,pageSize:ya})};this.loadSelectMacros=function(na){na=
{arrMacroUid:JSON.stringify(na)};Aa.remote("loadSelectMacros",na)};this.loadMacros=function(na,ya,ra,Ma,Qa){Aa.remote("loadMacros",{targetPage:na,pageSize:ya,searchText:ra,mulValueMacro:Ma,timeStamp:Qa})};this.loadMacroFieldsByUid=function(na){Aa.remote("loadMacroFieldsByUid",{macroUid:na})};this.previewMacroById=function(na,ya){Aa.remote("previewMacroById",{macroId:na,macroType:ya})};this.loadMacroByUids=function(na){na={macroUids:JSON.stringify(na)};Aa.remote("loadMacroByUids",na)}}function X(){}
"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.common&&(com.kingdee.bos.extreport.datasetdesigner.common={});var l=com.kingdee.bos.extreport.datasetdesigner.common;
l.DesignerFacade=R;l.MacroFacade=V;l.RemoteImpl=function(){Ja.call(this);var aa;this.getRemoteUrl=function(){return aa};this.setRemoteUrl=function(ia){aa=ia}};l.EventListenerMap=function(){var aa={};this.addListener=function(ia,Ba){var fa=aa[ia];fa||(fa=[],aa[ia]=fa);for(ia=0;ia<fa.length;ia++)if(fa[ia]==Ba)return;fa.push(Ba)};this.removeListener=function(ia,Ba){if(ia=aa[ia])for(var fa=ia.length-1;0<=fa;fa--)if(ia[fa]==Ba){ia.splice(fa,1);break}};this.fireEvent=function(ia,Ba){if(ia=aa[ia])for(var fa=
ia.length-1;0<=fa;fa--)ia[fa](Ba)}};l.LanguageUtil=X;var sa,b,Ja,Ha,za,Ca;(function(){var aa=com.kingdee.bos.qing.framework.common;sa=sa=aa.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);b=aa.AbstractFacade;Ja=aa.AbstractRemoteCall;Ha=aa.TabbedUiUtil;aa=com.kingdee.bos.qing;za=aa.Seer;aa=com.kingdee.bos.qing.common;Ca=aa.Util})();var ta={Designer:"Designer",Macro:"Macro",Query:"Query",ParamCtrl:"ParamCtrl",Generic:"Generic"};l.FacadeType=ta;var xa=new function(){var aa=
{};this.addFacade=function(ia,Ba){aa[ia]=Ba};this.getFacade=function(ia){return aa[ia]}};l.FacadeFactory=xa;xa.addFacade(ta.Designer,R);xa.addFacade(ta.Macro,V);var ea=new function(){var aa=this,ia=/\s/g;this.isValidString=function(fa,Aa){if(Aa)return Aa.test(fa);if(fa&&(Ba(fa[0])||"_"==fa[0]))return!1;fa=fa.trim().replace(ia,"*");return aa.isLegalString(fa)?!0:!1};this.isLegalString=function(fa){for(var Aa=0;fa&&Aa<fa.length;Aa++)if(!aa.isLegalChar(fa[Aa]))return!1;return!0};this.isLegalChar=function(fa){fa=
fa.charCodeAt(0);return 33<=fa&&47>=fa||58<=fa&&64>=fa||91<=fa&&94>=fa||96==fa||123<=fa&&126>=fa?!1:!0};this.replaceIllegalChar=function(fa,Aa,na){var ya="";if(null==fa)return ya;fa=fa.trim().replaceAll(ia,"*");for(var ra=0;ra<fa.length;ra++){var Ma=fa[ra];if(ea.isLegalChar(Ma)){if(ya[ya.length-1]||!Ba(Ma)&&"_"!=Ma)ya+=Ma}else ya[ya.length-1]&&"_"!=ya[ya.length-1]&&(ya+="_")}0==ya.length&&(ya=na);if(Aa){fa=0;na="";for(ra=ya;Aa[ra+na];)fa++,na="_"+fa,ra.length+na.length>ea.iMAX_COLUMN_LEN&&(ra=ya.substring(0,
ya.length-na.length));ya=ra+na}return ya};var Ba=function(fa){fa=fa.charCodeAt(0);return 48<=fa&&57>=fa?!0:!1};this.isNotEmptyStr=function(fa){return!!fa};this.isEmptyStr=function(fa){return!fa}};ea.iMAX_COLUMN_LEN=32;l.StringUtil=ea;l.EntityHelper=new function(){this.getEntityNumber=function(aa){if(aa&&(aa=aa.split("\u0001"),3<=aa.length))return aa[2]}};X.isEnglish=function(){return"en"==za.getUrlParamValue("language")};l.EventType={QUERY_AREA_INSERT_TYPE:"QUERY_AREA_INSERT",QUERY_AREA_SET_HINT_TYPE:"QUERY_AREA_SET_HINT",
QUERY_AREA_ADD_HINT_TYPE:"QUERY_AREA_ADD_HINT",QUERY_AREA_ADD_AT_HINT_TYPE:"QUERY_AREA_ADD_AT_HINT",QUERY_AREA_SET_DOLLAR_HINT_TYPE:"QUERY_AREA_SET_DOLLAR_HINT",OUTPUT_AREA_SHOW_HINT:"OUTPUT_AREA_SHOW_HINT",OUTPUT_AREA_REFRESH:"OUTPUT_AREA_REFRESH",Java_PARAM_AREA_REFRESH:"Java_PARAM_AREA_REFRESH",DATASOURCE_AREA_SHOW_EXP:"DATASOURCE_AREA_SHOW_EXP",PARAM_NAME_CHANGE:"QUERY_AREA_ADD_AT_HINT",COLS_AREA_DEL_COL:"COLS_AREA_DEL_COL",CALC_MODEFIED_FROM_FIELD_AREA:"CALC_MODEFIED_FROM_FIELD_AREA"};ta=new function(){var aa;
this.hookCollector=function(ia){aa=ia};this.occur=function(ia,Ba){try{aa&&aa(ia,Ba)}catch(fa){window.console&&console.warn(fa)}}};ta.SAVE_DATASET_DESIGNER_TYPE="ext-save-dataset-designer-type";ta.SAVEAS_DATASET_DESIGNER_TYPE="ext-saveas-dataset-designer-type";ta.PREVIEW_DATASET_DESIGNER_TYPE="ext-preview-dataset-designer-type";ta.CHECK_DATASET_DESIGNER_TYPE="ext-check-dataset-designer-type";l.UserOperationReporter=ta;l.ClickableURL=new function(){this.wrap=function(aa,ia){aa=com.kingdee.bos.qing.integration.PageHelper.getIframeUrl(aa);
aa=$("<a onclick='javascript:window.open(\""+aa+"\");' href='#'>");aa.css({cursor:"pointer",color:"#5582f3"});!ia&&(ia=sa.get("helpDoc","\u5e2e\u52a9\u6587\u6863"));aa.text(ia);return aa}}})();(function(){function R(Ha,za,Ca,ta){l.call(this,Ha,za,Ca,ta);var xa=this.protectedMethod;this.getOutDBList=function(){var ea={spaceCreatorId:X.getUrlParamValue("spaceCreatorId")};xa.remote("getOutDBList",ea)};this.checkOutDBByName=function(ea){xa.remote("checkOutDBByName",{name:ea})};this.getUsableEntities=function(){xa.remote("getUsableEntities",{})};this.getEntityPreviewData=function(ea){xa.remote("getEntityPreviewData",{tableName:ea})};this.getEntityDataCount=function(ea){xa.remote("getEntityDataCount",
{tableName:ea})};this.checkDataSource=function(ea,aa){ea={dataSetId:ea,model:JSON.stringify(aa)};xa.remote("checkDataSource",ea)};this.getUsableTableObject=function(ea,aa,ia){ea={dataSetId:ea,model:JSON.stringify(aa),sourceId:ia};xa.remote("getUsableTableObject",ea)};this.getOutputColumns=function(ea,aa){ea={dataSetId:ea,modelContent:JSON.stringify(aa)};xa.remote("getOutputColumns",ea)};this.getTableFields=function(ea,aa,ia,Ba){ea={dataSetType:ea,dataSourceType:aa,dataSource:"string"==typeof ia?ia:
JSON.stringify(ia),tableNames:JSON.stringify(Ba)};xa.remote("getTableFields",ea)};this.isSupportKsql=function(ea,aa,ia,Ba){ea={dataSetType:ea,dataSourceType:aa,dataSource:"string"==typeof ia?ia:JSON.stringify(ia)};xa.remote("isSupportKsql",ea)};this.checkSqlExecutable=function(ea,aa,ia,Ba){xa.remote("checkSqlExecutable",{dataSource:ea,dataSourceType:aa,sqlType:ia,sqlContent:Ba})};this.getAppNameByAppNumber=function(ea){xa.remote("getAppNameByAppNumber",{appNumber:ea})};this.loadSystemVar=function(ea,
aa,ia,Ba){xa.remote("loadSystemVar",{searchText:ea,targetPage:aa,pageSize:ia,timeStamp:Ba})};this.loadSystemVarPageIndexByName=function(ea,aa){xa.remote("loadSystemVarPageIndexByName",{sysName:ea,pageSize:aa})};this.loadSelectSysVars=function(ea){ea={arrSysName:JSON.stringify(ea)};xa.remote("loadSelectSysVars",ea)};this.previewDataSysVar=function(ea){xa.remote("previewDataSysVar",{name:ea})};this.checkDataSourcePermission=function(ea){var aa={};aa.appID=X.getUrlParamValue("appID");aa.dataSetId=X.getUrlParamValue("dataSetId");
aa.bOutDbList=ea;xa.remote("checkDataSourcePermission",aa)};this.loadClusterENV=function(){xa.remote("loadClusterENV",{})};this.loadJavaResourcesTree=function(){xa.remote("loadJavaResourcesTree",{})};this.loadJavaResources=function(){xa.remote("loadJavaResources",{})};this.loadJavaClassCode=function(ea,aa){xa.remote("loadJavaClassCode",{timeStamp:aa,javaClassPath:ea})};this.loadJavaParameter=function(ea,aa){xa.remote("loadJavaParameter",{timeStamp:aa,javaClassPath:ea})};this.getFieldsFromDBSource=
function(ea,aa,ia){ea={dataSourceType:ea,dataSource:aa,tableNames:JSON.stringify(ia)};xa.remote("getFieldsFromDBSource",ea)};this.getSuperQuerySchemaList=function(){xa.remote("getSuperQuerySchemaList",{})};this.getTableSrcName=function(ea){ea={dataSource:JSON.stringify(ea)};xa.remote("getTableSrcName",ea)};this.loadAppNameByAppNumber=function(ea){xa.remote("loadAppNameByAppNumber",{appNumber:ea})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.common&&(com.kingdee.bos.extreport.datasetdesigner.common={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.common.query&&(com.kingdee.bos.extreport.datasetdesigner.common.query={});var V=com.kingdee.bos.extreport.datasetdesigner.common.query;
V.QueryFacade=R;var X,l,sa,b;(function(){var Ha=com.kingdee.bos.qing;X=Ha.Seer;Ha=com.kingdee.bos.qing.framework.common;l=Ha.AbstractFacade;Ha=com.kingdee.bos.extreport.datasetdesigner.common;sa=Ha.FacadeType;b=Ha.FacadeFactory})();b.addFacade(sa.Query,R);var Ja=new function(){var Ha={};this.addQueryPane=function(za,Ca){Ha[za]=Ca};this.createTabQueryPane=function(za,Ca){return new Ha[za](za,Ca)}};V.TabQueryPaneFactory=Ja})();(function(){function R(b,Ja,Ha,za){V.call(this,b,Ja,Ha,za);var Ca=this.protectedMethod;this.loadDataSetMenu=function(ta,xa,ea,aa,ia){ta={menuName:xa,dataSetName:ta,groupType:aa,datasetType:ea,timeStamp:ia,spaceId:X.decodeParamFromUrl(window.location.search,"spaceId")};Ca.remote("loadDataSetMenu",ta)};this.loadParameterByDataSetId=function(ta){Ca.remote("loadParameterByDataSetId",{dataSetId:ta})};this.queryTableFieldsByDataSetId=function(ta,xa,ea,aa,ia){Ca.remote("loadTableFieldsByDataSetId",{dataSetId:ta,
groupId:xa,userId:ea,sGroupName:aa,sDBSourceName:ia})};this.loadDataSetByGroupId=function(ta,xa,ea,aa,ia,Ba){Ca.remote("loadDataSetByGroupId",{groupId:ea,pageSize:xa,targetPage:ta,dataSetName:aa,dataType:ia,dataSetId:Ba})};this.queryBatchLinkageVO=function(ta){ta={arrSourceId:JSON.stringify(ta),spaceId:X.decodeParamFromUrl(window.location.search,"spaceId")};Ca.remote("queryBatchLinkageVO",ta)};this.loadDateTimeFunction=function(){Ca.remote("loadDateTimeFunction",{})};this.checkFormula=function(ta){Ca.remote("checkFormula",
{formula:ta})};this.queryDataSourceInfo=function(ta,xa,ea,aa,ia){Ca.remote("queryDataSourceInfo",{sSourceId:ta,sSourceName:xa,sGroupId:ea,sGroupName:aa,sSpaceId:ia})};this.getConstantValueFromSource=function(ta){Ca.remote("getConstantValueFromSource",ta)};this.loadVariableValue=function(ta,xa){Ca.remote("loadVariableValue",{sId:ta,dataType:xa})};this.repairVariableAlias=function(ta,xa){Ca.remote("repairVariableAlias",{defaultValues:ta,defaultAlias:xa})};this.checkDataSetById=function(ta){Ca.remote("checkDataSetById",
{dataSetId:ta})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.common&&(com.kingdee.bos.extreport.datasetdesigner.common={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.common.paramctrl&&
(com.kingdee.bos.extreport.datasetdesigner.common.paramctrl={});com.kingdee.bos.extreport.datasetdesigner.common.paramctrl.ParamCtrlFacade=R;var V,X,l,sa;(function(){var b=com.kingdee.bos.qing.framework.common;V=b.AbstractFacade;b=com.kingdee.bos.qing.common;X=b.Util;b=com.kingdee.bos.extreport.datasetdesigner.common;l=b.FacadeType;sa=b.FacadeFactory})();sa.addFacade(l.ParamCtrl,R)})();(function(){function R(d){var h=d;this.getModel=function(){return h};this.setModel=function(e){h=e}}function V(){var d={};this.check=function(){throw Error("Override me.");};this.addException=function(e,a,c){var f=d[e];f||(f={});f[a]=c;d[e]=f};this.addExceptionFromMapCheckResult=function(e,a,c){if(e){var f=e[a];if(f){for(var g=f.length-1;0<=g;g--){var p=f[g];if(!c||c===p.getCode()){var n=p.getSubCode();n?this.addException(a,n,p.getMessage()):this.addException(a,p.getCode(),p.getMessage());f.splice(g,
1)}}c&&0!==f.length||delete e[a]}}};this.getException=function(e,a){return h(e,a)};this.removeException=function(e,a){(e=d[e])&&delete e[a]};this.clearException=function(e){if(e){var a=d[e];a&&(a={},d[e]=a)}else d={}};this.getExceptionMap=function(){return d};var h=function(e,a){if(e){if(e=d[e]){if(a)return e[a];a=Object.keys(e);for(var c=0;c<a.length;c++){var f=e[a[c]];if(f)return f}}}else for(var g=Object.keys(d),p=0;p<g.length;p++)if(e=d[g[p]])for(a=Object.keys(e),c=0;c<a.length;c++)if(f=e[a[c]])return f;
return null};this.protectedCheckerMethod={getException:h}}function X(d,h){V.call(this);var e=this,a=h,c,f,g,p,n,u;this.check=function(H){H&&H()};this.clearDefaultRelativeChange=function(){e.setDefaultValue(null);e.setDefaultAlias(null);e.clearException(k.PARAM_CTRL_DEFAULT_VALUE)};this.setDefaultAlias=function(H,la){la||e.getParameter().getModel().setDirty(u!==H);u=H};this.getDefaultAlias=function(){return u};this.repairDefaultAlias=function(H){u=H};this.setDefaultValue=function(H){e.getParameter().getModel().setDirty(n!==
H);n=H};this.getDefaultValue=function(){return n};this.setDefaultValueType=function(H){e.getParameter().getModel().setDirty(p!==H);p=H};this.getDefaultValueType=function(){return p};this.setCtrlType=function(H){e.getParameter().getModel().setDirty(a!==H);a=H};this.getCtrlType=function(){return a};this.setCtrlState=function(H){e.getParameter().getModel().setDirty(c!==H);c=H};this.getCtrlState=function(){return c};this.setIsRequired=function(H){e.getParameter().getModel().setDirty(f!==H);f=H};this.getIsRequired=
function(){return f};this.repairRequired=function(H){f=H};this.setDescription=function(H){e.getParameter().getModel().setDirty(g!==H);g=H};this.getDescription=function(){return g};this.getParameter=function(){return d};this.isConvertibleToOther=function(){return c!==D.STANDER||f||g?!1:!0};this.protectedMethod={toJsonObject:function(){var H={};H.ctrlType=a;H.ctrlState=c;H.isRequired=f;H.description=g;H.defaultValueType=p;H.defaultValue=n;H.defaultAlias=u;return H},fromJsonObject:function(H,la){e.addExceptionFromMapCheckResult(la,
k.PARAM_CTRL_DEFAULT_VALUE);e.addExceptionFromMapCheckResult(la,k.PARAM_CTRL_LINKAGE);e.addExceptionFromMapCheckResult(la,k.PARAM_CTRL_BIND_SOURCE);a=parseInt(H.ctrlType);c=parseInt(H.ctrlState);f=H.isRequired;g=H.description;p=parseInt(H.defaultValueType);n=H.defaultValue;u=H.defaultAlias}}}function l(){var d,h,e;this.getLinkageParamObject=function(){return d};this.setLinkageParamObject=function(a){(d=a)&&d.getName()&&(h=d.getName())};this.getLinkageParamName=function(){return h};this.setLinkageParamName=
function(a){h=a};this.getRelatedDSParamName=function(){return e};this.setRelatedDSParamName=function(a){e=a};this.toJsonObject=function(){var a={};a.linkageParamName=d.getName();a.relatedDSParamName=e;return a};this.fromJsonObject=function(a){h=a.linkageParamName;e=a.relatedDSParamName}}function sa(d,h){X.call(this,d,h);var e=this.protectedMethod,a=this,c=[];this.getLinkageParams=function(){return c};this.setLinkageParams=function(g){a.getParameter().getModel().setDirty(c!==g);c=g};this.addLinkageParam=
function(g,p){};var f=a.isConvertibleToOther;this.isConvertibleToOther=function(){return f()?!(c&&0<c.length):!1};this.checkLinkage=function(g,p){for(var n=d.getModel().getParameters(),u=a.getLinkageParams(),H=0;H<u.length;H++){var la=u[H],U=la.getLinkageParamObject();if(U&&-1!==n.indexOf(U))if(-1===g.indexOf(U))a.addException(k.PARAM_CTRL_LINKAGE,d.getName()+"$"+la.getLinkageParamName()+A.LINKAGE_DS,ba.get("ctrlError","\u63a7\u4ef6\u201c#1\u201d\u5b58\u5728\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u8be5\u63a7\u4ef6\u7684\u6570\u636e\u6e90\u3002").replace("#1",
la.getLinkageParamName()));else{U=U.getCtrlObject().getBindSource().getId();U=p[U];for(var ja=la.getRelatedDSParamName(),W=!1,Da=0;Da<U.length;Da++)if(ja===U[Da].getName()){W=!0;break}W||a.addException(k.PARAM_CTRL_LINKAGE,d.getName()+"$"+la.getLinkageParamName()+A.LINKAGE_DS_PARAM,ba.get("noFindParam","\u53c2\u6570\u201cxx\u201d\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664").replace("xx",la.getRelatedDSParamName()))}else a.addException(k.PARAM_CTRL_LINKAGE,d.getName()+"$"+la.getLinkageParamName()+
A.LINKAGE_PARAM,ba.get("cantfindParamCtrlName","\u627e\u4e0d\u5230\u539f\u63a7\u4ef6\u201c#1\u201d\u7684\u53c2\u6570\u540d\u79f0\u548c\u63a7\u4ef6\u540d\u79f0\u3002").replace("#1",la.getLinkageParamName()))}};this.protectedMethod={toJsonObject:function(){var g=e.toJsonObject();if(c&&0<c.length){for(var p=[],n=0;n<c.length;n++)p.push(c[n].toJsonObject());g.linkageParams=p}return g},fromJsonObject:function(g,p){e.fromJsonObject(g,p);if(g=g.linkageParams)for(p=0;p<g.length;p++){var n=g[p],u=new l;u.fromJsonObject(n);
c.push(u)}}}}function b(d){R.call(this,d);V.call(this);var h=this,e;this.getSpaceId=function(){return e};this.setSpaceId=function(a){h.getModel().setDirty(e!==a);e=a};this.protectedMethod={toJsonObject:function(){var a={};a.spaceID=e;return a},fromJsonObject:function(a){e=a.spaceID}}}function Ja(d){b.call(this,d);var h=this.protectedMethod,e=this,a,c,f,g;this.setId=function(p){e.getModel().setDirty(a!==p);a=p};this.getId=function(){return a};this.setName=function(p){e.getModel().setDirty(c!==p);c=
p};this.getName=function(){return c};this.setGroupId=function(p){e.getModel().setDirty(p!==p);f=p};this.getGroupId=function(){return f};this.setGroupName=function(p){e.getModel().setDirty(g!==p);g=p};this.repairSource=function(p,n,u,H){g=p;f=n;a=u;c=H};this.getGroupName=function(){return g};this.toJsonObject=function(){var p=h.toJsonObject();p.id=a;p.name=c;p.groupId=f;p.groupName=g;return p};this.fromJsonObject=function(p){h.fromJsonObject(p);a=p.id;c=p.name;f=p.groupId;g=p.groupName}}function Ha(d){b.call(this,
d);var h=this.protectedMethod,e=this,a,c;this.setSourceName=function(f){e.getModel().setDirty(a!==f);a=f};this.getSourceName=function(){return a};this.setSourceAlias=function(f){e.getModel().setDirty(c!==f);c=f};this.getSourceAlias=function(){return c};this.toJsonObject=function(){var f=h.toJsonObject();f.sourceName=a;f.sourceAlias=c;return f};this.fromJsonObject=function(f){h.fromJsonObject(f);a=f.sourceName;c=f.sourceAlias}}function za(d){b.call(this,d);var h=this.protectedMethod,e=this,a;this.getMacroId=
function(){return a};this.setMacroId=function(c){e.getModel().setDirty(a!==c);a=c};this.toJsonObject=function(){var c=h.toJsonObject();c.macroUid=a;return c};this.fromJsonObject=function(c){h.fromJsonObject(c);a=c.macroUid}}function Ca(){var d,h;this.getName=function(){return d};this.setName=function(e){d=e};this.getAlias=function(){return h};this.setAlias=function(e){h=e};this.protectedMethod={toJsonObject:function(){var e={};e.left=d;e.right=h;return e},fromJsonObject:function(e){d=e.left;h=e.right}}}
function ta(){Ca.call(this);var d=this.protectedMethod,h=this;this.getPatternText=function(){if(!h.getAlias()&&!h.getName())return"";var e=h.getAlias()?h.getAlias():"",a=h.getAlias()?"("+h.getName()+")":h.getName();return e+a};this.toJsonObject=function(){return d.toJsonObject()};this.fromJsonObject=function(e){d.fromJsonObject(e)}}function xa(d){b.call(this,d);var h=this.protectedMethod,e=this,a=[];this.getArrNameAliasPairs=function(){return a};this.setNameAliasPair=function(c){e.getModel().setDirty(a!==
c);a=c};this.toJsonObject=function(){var c=h.toJsonObject();if(a&&0<a.length){for(var f=[],g=0;g<a.length;g++){var p=!0,n=a[g],u=n.toJsonObject();if(Ia.isNotEmptyStr(n.getAlias())||Ia.isNotEmptyStr(n.getName())){for(n=0;n<f.length;n++)JSON.stringify(f[n])==JSON.stringify(u)&&(p=!1);p&&f.push(u)}}c.nameAliasPairs=f}return c};this.fromJsonObject=function(c){h.fromJsonObject(c);if(c=c.nameAliasPairs)for(var f=0;f<c.length;f++){var g=c[f],p=new ta;p.fromJsonObject(g);a.push(p)}}}function ea(d,h){sa.call(this,
d,h);var e=this.protectedMethod,a=this,c,f,g,p,n,u,H;this.setBindSource=function(U){a.getParameter().getModel().setDirty(f!==U);f=U};this.getBindSource=function(){return f};this.setBindSourceType=function(U){a.getParameter().getModel().setDirty(c!==U);c=U};this.clearDataSourcePropAndException=function(){a.getDefaultValueType()===w.CONSTANT&&(a.clearException(k.PARAM_CTRL_DEFAULT_VALUE),a.setDefaultValue(null),a.setDefaultAlias(null));a.setValueFieldName(null);a.setValueFieldAlias(null);a.setDisplayFieldName(null);
a.setDisplayFieldAlias(null);d.clearException(k.PARAM_CLIENT_ERROR);a.clearException(k.PARAM_CTRL_BIND_SOURCE);ma.removeLinkage(d)};this.clearFieldRelativeChange=function(U){a.getDefaultValueType()==w.CONSTANT&&(a.setDefaultValue(null),a.setDefaultAlias(null),a.clearException(k.PARAM_CTRL_DEFAULT_VALUE));a.removeException(k.PARAM_CTRL_BIND_SOURCE,d.getName()+U)};this.repairFieldAlias=function(U){for(var ja={},W=0;W<U.length;W++){var Da=U[W];ja[Da.getName()]=Da.getAlias()}ja[g]&&(p=ja[g]);ja[n]&&(u=
ja[n]);return ja};this.getBindSourceType=function(){return c};this.setValueFieldName=function(U){a.getParameter().getModel().setDirty(g!==U);g=U};this.getValueFieldName=function(){return g};this.setValueFieldAlias=function(U){a.getParameter().getModel().setDirty(p!==U);p=U};this.getValueFieldAlias=function(){return p};this.setDisplayFieldName=function(U){a.getParameter().getModel().setDirty(n!==U);n=U};this.getDisplayFieldName=function(){return n};this.setDisplayFieldAlias=function(U){a.getParameter().getModel().setDirty(u!==
U);u=U};this.getDisplayFieldAlias=function(){return u};this.isAllowEdit=function(){return H};this.setIsAllowEdit=function(U){a.getModel().setDirty(H!==U);H=U};var la=a.isConvertibleToOther;this.isConvertibleToOther=function(){return la()?!f:!1};this.buildConstantQueryParams=function(U){var ja={},W=a.getBindSource(),Da=a.getBindSourceType();U&&(ja.sTimeStamp=U);ja.iBindSourceType=Da;ja.sValueField=a.getValueFieldName();ja.sDisplayField=a.getDisplayFieldName();switch(Da){case r.DATA_SET:ja.dataSetId=
W.getId();break;case r.MACRO:ja.sMacroUid=W.getMacroId()}return ja};this.protectedMethod={toJsonObject:function(){var U=e.toJsonObject();U.bindSourceType=c;f&&(U.bindSource=f.toJsonObject());U.valueFieldName=g;U.valueFieldAlias=p;U.displayFieldName=n;U.displayFieldAlias=u;U.isAllowEdit=H;return U},fromJsonObject:function(U,ja){e.fromJsonObject(U,ja);c=parseInt(U.bindSourceType);if(ja=U.bindSource)f=M.createBindSource(c,a.getParameter().getModel()),f.fromJsonObject(ja);g=U.valueFieldName;p=U.valueFieldAlias;
n=U.displayFieldName;u=U.displayFieldAlias;H=U.isAllowEdit}}}function aa(d,h){ea.call(this,d,h);var e=this.protectedMethod,a=this;this.check=function(c){d.clearException(k.PARAM_CLIENT_ERROR);var f=a.getBindSource();if(!a.getBindSource()||f.getArrNameAliasPairs&&0==f.getArrNameAliasPairs().length){var g=ba.get("ctrlPropRequiredTips","\u63a7\u4ef6\u5c5e\u6027\u5b58\u5728\u672a\u8bbe\u7f6e\u7684\u5fc5\u586b\u9879\u3002");d.addException(k.PARAM_CLIENT_ERROR,d.getName(),g)}!g&&(a.getException(k.PARAM_CTRL_DEFAULT_VALUE)||
a.getException(k.PARAM_CTRL_LINKAGE)||a.getException(k.PARAM_CTRL_BIND_SOURCE))&&(g=ba.get("ctrlPropSettingTips","\u63a7\u4ef6\u5c5e\u6027\u8bbe\u7f6e\u5b58\u5728\u9519\u8bef\u3002"));c&&c();return g};this.toJsonObject=function(){return e.toJsonObject()};this.fromJsonObject=function(c,f){e.fromJsonObject(c,f)}}function ia(d,h){sa.call(this,d,h);var e=this.protectedMethod,a=this,c,f,g=new Ba;this.getDateGranType=function(){return c};this.setDateGranType=function(u){a.getParameter().getModel().setDirty(c!==
u);c=u;d.getDataType()!=ua.TIME&&(g.setDateGran(u),n())};this.getDefaultDateType=function(){return f};this.setDefaultDateType=function(u){a.getParameter().getModel().setDirty(f!==u);f=u;d.getDataType()!=ua.TIME&&(g.setDateType(u),n())};this.getDateValue=function(){return ua.TIME==d.getDataType()?a.getDefaultValue():g.getValue()};this.setDateValue=function(u){if(ua.TIME==d.getDataType())return a.setDefaultValue(u);g.setValue(u);n()};this.toJsonObject=function(){var u=e.toJsonObject();u.dateGranType=
c;u.defaultDateType=f;return u};var p=a.isConvertibleToOther;this.isConvertibleToOther=function(){return p()?!a.getDefaultValue():!1};this.fromJsonObject=function(u,H){e.fromJsonObject(u,H);c=u.dateGranType;f=u.defaultDateType;d.getDataType()!=ua.TIME&&Ia.isNotEmptyStr(a.getDefaultValue())&&g.fromJsonObject(JSON.parse(a.getDefaultValue()))};var n=function(){var u=d.getDataType();u!=ua.DATE&&u!=ua.DATETIME||a.setDefaultValue(JSON.stringify(g.toJsonObject()))}}function Ba(){var d=this,h,e,a;this.getVersion=
function(){return"2"};this.getDateGran=function(){return h};this.setDateGran=function(c){h=c};this.getDateType=function(){return e};this.setDateType=function(c){e=c};this.getValue=function(){return a};this.setValue=function(c){a=c};this.fromJsonObject=function(c){d.setDateGran(c.dateGran);d.setDateType(c.dateType);d.setValue(c.value)};this.toJsonObject=function(){var c={version:"2"};c.dateGran=h;c.dateType=e;c.value=a;return c}}function fa(d,h){ea.call(this,d,h);var e=this.protectedMethod,a=this,
c=[],f=G.NOT_TREE,g,p,n,u,H,la,U,ja,W,Da;this.check=function(x){d.clearException(k.PARAM_CLIENT_ERROR);a.removeException(k.PARAM_CTRL_BIND_SOURCE,d.getName()+"$PARENT_FIELD");if(a.getBindSource()){var pa=f==G.NOT_TREE?!1:!(ja&&Da||u&&la);if(pa){f==G.PARENT_CHILD&&a.addException(k.PARAM_CTRL_BIND_SOURCE,d.getName()+"$PARENT_FIELD",ba.get("notNullParent","\u7236\u8282\u70b9\u5b57\u6bb5\u4e0d\u53ef\u4e3a\u7a7a"));var va=ba.get("ctrlPropRequiredTips","\u63a7\u4ef6\u5c5e\u6027\u5b58\u5728\u672a\u8bbe\u7f6e\u7684\u5fc5\u586b\u9879\u3002");
d.addException(k.PARAM_CLIENT_ERROR,d.getName(),va)}else if(a.getException(k.PARAM_CTRL_DEFAULT_VALUE)||a.getException(k.PARAM_CTRL_LINKAGE)||a.getException(k.PARAM_CTRL_BIND_SOURCE))va=ba.get("ctrlPropSettingTips","\u63a7\u4ef6\u5c5e\u6027\u8bbe\u7f6e\u5b58\u5728\u9519\u8bef\u3002")}else va=ba.get("ctrlPropRequiredTips","\u63a7\u4ef6\u5c5e\u6027\u5b58\u5728\u672a\u8bbe\u7f6e\u7684\u5fc5\u586b\u9879\u3002"),d.addException(k.PARAM_CLIENT_ERROR,d.getName(),va);x&&x();return va};var Wa=this.clearDataSourcePropAndException;
this.clearDataSourcePropAndException=function(){Wa();a.getCtrlType()===m.F7&&(a.clearAdvancedProp(),r.isSupportTreeType(a.getBindSourceType())||(f=G.NOT_TREE))};this.clearAdvancedProp=function(){a.setLongNumberField(null);a.setLongNumberFieldAlias(null);a.setParentField(null);a.setParentFieldAlias(null);a.setCurrentField(null);a.setCurrentFieldAlias(null);a.setTreeExpandLevel(1);a.setSeparator(null)};var Ta=this.buildConstantQueryParams;this.buildConstantQueryParams=function(x,pa){x=Ta(x);if(pa&&
0<pa.length){for(var va=JSON,Na=va.stringify,Ka=[],Xa=a.getHiddenFields(),Ua=0;Ua<pa.length;Ua++){var ib=pa[Ua].getName();-1===Xa.indexOf(ib)&&Ka.push(ib)}x.arrMoreDisplay=Na.call(va,Ka)}f==G.PARENT_CHILD?(x.treeType=f,x.currentField=u,x.parentField=la):f==G.LONG_NUMBER&&(x.treeType=f,x.longfield=ja,x.separator=Da);return x};var T=this.repairFieldAlias;this.repairFieldAlias=function(x){x=T(x);g!=G.NOT_TREE&&(g==G.LONG_NUMBER?x[ja]&&(W=x[ja]):(x[u]&&(H=x[u]),x[la]&&(U=x[la])))};this.setSeparator=function(x){a.getParameter().getModel().setDirty(Da!==
x);Da=x};this.getSeparator=function(){return Da};this.setLongNumberFieldAlias=function(x){a.getParameter().getModel().setDirty(W!==x);W=x};this.getLongNumberFieldAlias=function(){return W};this.setLongNumberField=function(x){a.getParameter().getModel().setDirty(ja!==x);ja=x};this.getLongNumberField=function(){return ja};this.setParentFieldAlias=function(x){a.getParameter().getModel().setDirty(U!==x);U=x};this.getParentFieldAlias=function(){return U};this.getParentField=function(){return la};this.setParentField=
function(x){a.getParameter().getModel().setDirty(la!==x);la=x};this.getCurrentFieldAlias=function(){return H};this.setCurrentFieldAlias=function(x){a.getParameter().getModel().setDirty(H!==x);H=x};this.getCurrentField=function(){return u};this.setCurrentField=function(x){a.getParameter().getModel().setDirty(u!==x);u=x};this.getRowLimit=function(){return n};this.setRowLimit=function(x){a.getParameter().getModel().setDirty(n!==x);n=x};this.setIsAllowMultipleSelected=function(x){a.getParameter().getModel().setDirty(p!==
x);p=x};this.getIsAllowMultipleSelected=function(){return p};this.getTreeExpandLevel=function(){return g};this.setTreeExpandLevel=function(x){a.getParameter().getModel().setDirty(g!==x);g=x};this.setTreeType=function(x){a.getParameter().getModel().setDirty(f!==x);f=x};this.getTreeType=function(){return f};this.setHiddenFields=function(x){a.getParameter().getModel().setDirty(c!==x);c=x};this.addHiddenField=function(x){a.getParameter().getModel().setDirty(!0);c.push(x)};this.removeHiddenField=function(x){x=
c.indexOf(x);-1!==x&&(a.getParameter().getModel().setDirty(!0),c.splice(x,1))};this.getHiddenFields=function(){return c};this.toJsonObject=function(){var x=e.toJsonObject();x.hiddenFields=c;x.treeType=f;x.treeExpandLevel=g;x.isAllowMultipleSelected=p;x.rowLimit=n;x.currentField=u;x.currentFieldAlias=H;x.parentField=la;x.parentFieldAlias=U;x.longNumberField=ja;x.longNumberFieldAlias=W;x.separator=Da;return x};this.fromJsonObject=function(x,pa){e.fromJsonObject(x,pa);x.hiddenFields&&(c=x.hiddenFields);
f=parseInt(x.treeType);g=parseInt(x.treeExpandLevel);p=x.isAllowMultipleSelected;n=parseInt(x.rowLimit);u=x.currentField;H=x.currentFieldAlias;la=x.parentField;U=x.parentFieldAlias;ja=x.longNumberField;W=x.longNumberFieldAlias;Da=x.separator}}function Aa(d,h){sa.call(this,d,h);var e=this.protectedMethod,a=this;this.toJsonObject=function(){return e.toJsonObject()};this.check=function(f){if(a.getException(k.PARAM_CTRL_DEFAULT_VALUE)||a.getException(k.PARAM_CTRL_LINKAGE)){var g=ba.get("ctrlPropSettingTips",
"\u63a7\u4ef6\u5c5e\u6027\u8bbe\u7f6e\u5b58\u5728\u9519\u8bef\u3002");f&&f()}return g};var c=a.isConvertibleToOther;this.isConvertibleToOther=function(){return c()?!a.getDefaultValue():!1};this.fromJsonObject=function(f,g){e.fromJsonObject(f,g)}}function na(d,h){X.call(this,d,h);var e=this.protectedMethod;this.toJsonObject=function(){return e.toJsonObject()};this.fromJsonObject=function(a,c){e.fromJsonObject(a,c)}}function ya(d,h){ea.call(this,d,h);var e=this.protectedMethod,a=this;this.check=function(c){d.clearException(k.PARAM_CLIENT_ERROR);
var f=a.getBindSource();if(!a.getBindSource()||f.getArrNameAliasPairs&&0==f.getArrNameAliasPairs().length){var g=ba.get("ctrlPropRequiredTips","\u63a7\u4ef6\u5c5e\u6027\u5b58\u5728\u672a\u8bbe\u7f6e\u7684\u5fc5\u586b\u9879\u3002");d.addException(k.PARAM_CLIENT_ERROR,d.getName(),g)}!g&&a.getException(k.PARAM_CTRL_DEFAULT_VALUE)?(g=ba.get("ctrlPropSettingTips","\u63a7\u4ef6\u5c5e\u6027\u8bbe\u7f6e\u5b58\u5728\u9519\u8bef\u3002"),d.addException(k.PARAM_CLIENT_ERROR,d.getName(),g)):g||!a.getException(k.PARAM_CTRL_LINKAGE)&&
!a.getException(k.PARAM_CTRL_BIND_SOURCE)||(g=ba.get("ctrlPropSettingTips","\u63a7\u4ef6\u5c5e\u6027\u8bbe\u7f6e\u5b58\u5728\u9519\u8bef\u3002"));c&&c();return g};this.toJsonObject=function(){return e.toJsonObject()};this.fromJsonObject=function(c,f){e.fromJsonObject(c,f)}}function ra(d,h){sa.call(this,d,h);var e=this.protectedMethod,a=this,c="1000",f="1",g="1";this.setMaxValue=function(n){a.getParameter().getModel().setDirty(c!==n);c=n};this.getMaxValue=function(){return c};this.setMinValue=function(n){a.getParameter().getModel().setDirty(f!==
n);f=n};this.getMinValue=function(){return f};this.setStepSize=function(n){a.getParameter().getModel().setDirty(g!==n);g=n};this.getStepSize=function(){return g};this.toJsonObject=function(){var n=e.toJsonObject();n.maxValue=c;n.minValue=f;n.stepSize=g;return n};var p=a.isConvertibleToOther;this.isConvertibleToOther=function(){return p()?!("1000"!==c||"1"!==f||"1"!==g):!1};this.fromJsonObject=function(n,u){e.fromJsonObject(n,u);c=n.maxValue;f=n.minValue;(g=n.stepSize)&&"0"!=g||(g="1")}}function Ma(d,
h){sa.call(this,d,h);var e=this.protectedMethod,a=this,c="1",f=ba.get("switchOn","\u5f00\u542f"),g="0",p=ba.get("switchOff","\u5173\u95ed");this.getSwitchOnValue=function(){return c};this.setSwitchOnValue=function(u){a.getParameter().getModel().setDirty(c!==u);c=u};this.getSwitchOnText=function(){return f};this.setSwitchOnText=function(u){a.getParameter().getModel().setDirty(f!==u);f=u};this.getSwitchOffValue=function(){return g};this.setSwitchOffValue=function(u){a.getParameter().getModel().setDirty(g!==
u);g=u};this.getSwitchOffText=function(){return p};this.setSwitchOffText=function(u){a.getParameter().getModel().setDirty(p!==u);p=u};var n=a.isConvertibleToOther;this.isConvertibleToOther=function(){return n()&&"1"===a.getDefaultValue()&&"1"===c&&f===ba.get("switchOn","\u5f00\u542f")&&"0"===g&&p===ba.get("switchOff","\u5173\u95ed")?!0:!1};this.toJsonObject=function(){var u=e.toJsonObject();u.switchOnValue=c;u.switchOnText=f;u.switchOffValue=g;u.switchOffText=p;return u};this.fromJsonObject=function(u,
H){e.fromJsonObject(u,H);c=u.switchOnValue;f=u.switchOnText;g=u.switchOffValue;p=u.switchOffText}}function Qa(d){R.call(this,d);V.call(this);var h=this,e,a,c,f=!0,g,p,n;this.setName=function(u){h.getModel().setDirty(e!==u);e=u};this.getName=function(){return e};this.setAlias=function(u){h.getModel().setDirty(a!==u);a=u};this.getAlias=function(){return a};this.setDataType=function(u){h.getModel().setDirty(c!==u);c=u};this.getDataType=function(){return c};this.setIsIgnoreNull=function(u){h.getModel().setDirty(f!==
u);f=u};this.getIsIgnoreNull=function(){return f};this.setRemark=function(u){h.getModel().setDirty(g!==u);g=u};this.getRemark=function(){return g};this.setCtrlType=function(u){h.getModel().setDirty(n!==u);n=u;p&&p.setCtrlType(n)};this.getCtrlType=function(){return n};this.getCtrlObject=function(){return p};this.setCtrlObject=function(u){h.getModel().setDirty(p!==u);p=u};this.getPatternText=function(){var u=h.getName(),H=h.getAlias();return u&&H?"#A(#B)".replace("#A",u).replace("#B",H):u?u:H};this.isLinkableParam=
function(){var u=h.getCtrlObject();return u.getBindSource&&u.getBindSourceType()===r.DATA_SET&&u.getBindSource()?!0:!1};this.check=function(){h.clearException(k.PARAM);if(!p)return null;var u=p.check();u&&h.addException(k.PARAM,"ctrl_error",ba.get("paramCtrlErrorTips","\u53c2\u6570\u5c5e\u6027\u8bbe\u7f6e\u5b58\u5728\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u53c2\u6570\u5217\u8868\u9519\u8bef\u63d0\u793a\u5e76\u4fee\u590d\u3002"));return u};this.getParamLinkageToMe=function(){if(!h.getCtrlObject().getBindSource)return[];
for(var u=[],H=h.getModel().getParameters(),la=0;la<H.length;la++){var U=H[la];if(U!==this){var ja=U.getCtrlObject();if(ja.getLinkageParams&&0<ja.getLinkageParams().length){ja=ja.getLinkageParams();for(var W=0;W<ja.length;W++)ja[W].getLinkageParamObject()===this&&u.push(U)}}}return u};this.toJsonObject=function(){var u={};u.name=e;u.alias=a;u.dataType=c;u.isIgnoreNull=f;u.remark=g;p&&(u.ctrl=p.toJsonObject());return u};this.fromJsonObject=function(u,H){e=u.name;a=u.alias;c=parseInt(u.dataType);f=
u.isIgnoreNull;g=u.remark;if(u=u.ctrl){n=parseInt(u.ctrlType);p=O.createCtrl(n,this);if(H)for(var la={},U=Object.keys(H),ja=0;ja<U.length;ja++){var W=U[ja];if(W.startsWith("PARAM_")){var Da=H[W];if(Da)for(var Wa=0;Wa<Da.length;){var Ta=Da[Wa].getCode();Ta.startsWith(e+"$")||Ta==e?(Ta=Da.splice(Wa,1),la[W]?la[W].push(Ta[0]):la[W]=Ta):Wa++}}}p.fromJsonObject(u,la)}}}function ka(d){R.call(this,d);var h=this,e,a,c;this.getName=function(){return e};this.setName=function(p){h.getModel().setDirty(e!==p);
e=p};this.getAlias=function(){return a};this.setAlias=function(p){h.getModel().setDirty(a!==p);a=p};this.getDataType=function(){return c};this.setDataType=function(p){h.getModel().setDirty(c!==p);c=p};this.getPatternText=function(){return e+"("+a+")"};this.init=function(p,n,u){e=p;a=n;c=u};var f=function(){var p={};p.name=e;p.alias=a;p.dataType=c;return p};this.toJsonObject=function(){return f()};var g=function(p){e=p.name;a=p.alias;c=p.dataType};this.fromJsonObject=function(p){g(p)};this.protectedMethod=
{toJsonObject:f,fromJsonObject:g,getName:this.getName,getAlias:this.getAlias}}function Za(){V.call(this);var d=this,h,e,a,c=[],f=[],g=!1,p=!1;this.isShowIgnoreFilterByNull=function(){return!0};this.getDataSetId=function(){return h};this.setDataSetId=function(n){h=n};this.getDataSetName=function(){return e};this.setDataSetName=function(n){e=n};this.getDataSetType=function(){return a};this.setDataSetType=function(n){a=n};this.getOutputColumns=function(){return c};this.setOutputColumns=function(n){d.setDirty(c!==
n);c=n};this.getParameters=function(){return f};this.setParameters=function(n){d.setDirty(f!==n);f=n};this.isDirty=function(){return g};this.setDirty=function(n,u){p||!u&&!n||((g!=n&&n&&!u||!n&&u)&&com.kingdee.bos.qing.integration.TabStatusHelper.setTabStatus(n),g=n)};this.isPreset=function(){return p};this.setPreset=function(n){p=n};this.pushParameter=function(n){d.setDirty(!0);f.push(n)};this.removeParameterByIndex=function(n,u){d.setDirty(!0);f.splice(n,u)};this.removeParamByObject=function(n){n=
f.indexOf(n);-1!=n&&(d.setDirty(!0),f.splice(n,1))};this.getParamNameSet=function(){for(var n={},u=0;u<f.length;u++){var H=f[u];H.getName()&&(n[H.getName().toLowerCase()]=H.getName())}return n};this.hasContent=function(){return!0};this.getContent=function(){throw Error("Override me.");};this.setContent=function(n){throw Error("Override me.");};this.isEmpty=function(){var n=d.getContent();return n&&0!=n.length?null:ba.get("queryStatNull","\u67e5\u8be2\u8bed\u53e5\u4e0d\u80fd\u4e3a\u7a7a\u3002")};this.getParamInSql=
function(){var n=qa.removeMark(d.getContent());n=n.replace(/[\r\n]/g,"");for(var u=[],H=0;H<n.length;H++)if("@"===n[H]){for(var la=H+1,U=la;U<n.length;U++)if("'"===n[U]||" "===n[U]||")"===n[U]){var ja=n.slice(la,U);!ja.startsWith("ExtRpt")&&0<ja.length&&-1===u.indexOf(ja)&&u.push(ja);H=U;break}U===n.length&&(ja=n.slice(la,U),!ja.startsWith("ExtRpt")&&0<ja.length&&-1===u.indexOf(ja)&&u.push(ja))}return u};this.protectedMethod={toJsonObject:function(){var n={};n.dataSetName=e;n.dataSetType=a;if(c&&
0<c.length){for(var u=[],H=0;H<c.length;H++)u.push(c[H].toJsonObject());n.outputColumns=u}if(f&&0<f.length){u=[];for(H=0;H<f.length;H++)u.push(f[H].toJsonObject());n.parameters=u}return n},fromJsonObject:function(n,u){a=parseInt(n.dataSetType);d.addExceptionFromMapCheckResult(u,k.DATA_SOURCE);d.addExceptionFromMapCheckResult(u,k.OUTPUT_COLUMN);var H=n.outputColumns;n.dataSetName&&(e=n.dataSetName);if(H)for(var la=0;la<H.length;la++){var U=H[la],ja=new ka(d);ja.fromJsonObject(U);c.push(ja)}if(U=n.parameters){n=
{};for(la=0;la<U.length;la++)ja=U[la],H=new Qa(d),H.fromJsonObject(ja,u),f.push(H),n[H.getName()]=H;for(u=0;u<f.length;u++)if(H=f[u],m.isLinkageType(H.getCtrlType())&&(la=H.getCtrlObject().getLinkageParams()))for(H=0;H<la.length;H++)U=la[H],(ja=n[U.getLinkageParamName()])&&U.setLinkageParamObject(ja)}}}}function Ea(){Za.call(this);var d=this.protectedMethod,h=this,e,a,c,f,g;this.getDataSourceType=function(){return e};this.setDataSourceType=function(p){h.setDirty(e!=p);e=p};this.getDataSourceName=
function(){return a};this.setDataSourceName=function(p){h.setDirty(a!=p);a=p};this.getSqlType=function(){return c};this.setSqlType=function(p){h.setDirty(c!=p);c=p};this.getDBType=function(){return f};this.setDBType=function(p){h.setDirty(f!=p);f=p};this.getContent=function(){return g};this.setContent=function(p){h.setDirty(g!=p);g=p};this.toJsonObject=function(){var p=d.toJsonObject();p.dataSourceType=e;p.dataSourceName=a;p.sqlType=c;p.dbType=f;p.sql=g;return p};this.fromJsonObject=function(p,n){d.fromJsonObject(p,
n);e=parseInt(p.dataSourceType);a=p.dataSourceName;c=parseInt(p.sqlType);f=p.dbType;g=p.sql}}function $a(){Za.call(this);var d=this.protectedMethod,h=this,e,a;this.getEntityName=function(){return e};this.setEntityName=function(c){h.setDirty(e!=c);e=c};this.getContent=function(){return a};this.setContent=function(c){h.setDirty(a!=c);a=c};this.toJsonObject=function(){var c=d.toJsonObject();c.entityName=e;c.oql=a;return c};this.fromJsonObject=function(c,f){d.fromJsonObject(c,f);e=c.entityName;a=c.oql}}
function Fa(){var d,h,e;this.getCode=function(){return d};this.setCode=function(a){d=a};this.getMessage=function(){return h};this.setMessage=function(a){h=a};this.getSubCode=function(){return e};this.setSubCode=function(a){e=a};this.fromJsonObject=function(a){d=a.code;h=a.message;e=a.subCode}}function eb(){var d,h,e,a,c,f=!0;this.hasChildren=function(){return!1};this.setName=function(g){d=g};this.getName=function(){return d};this.setDisplayName=function(g){h=g};this.getDisplayName=function(){return h};
this.setCommentInfo=function(g){e=g};this.getCommentInfo=function(){return e};this.setModelId=function(g){a=g};this.getModelId=function(){return a};this.setParentNode=function(g){c=g};this.getParentNode=function(){return c};this.getRoot=function(){for(var g=c;g&&g.getParentNode();)g=g.getParentNode();return g};this.setEnabled=function(g){f=g};this.isEnabled=function(){return f};this.getSubNodeLevel=function(){for(var g=-1,p=c;p;)g++,p=p.getParentNode();return g}}function Sa(){eb.call(this);var d=
this,h=[];this.hasChildren=function(){return h&&0!=h.length};this.initArrNode=function(){for(var c=[],f=d.getChildren(),g=0;g<f.length;g++)e(f[g],c);return c};this.setChildren=function(c){h=c};this.getChildren=function(){return h};this.toJsonObject=function(){var c={};c.children=h;return c};this.fromJsonObject=function(c,f){a(c,f)};var e=function(c,f){f.push(c);if(c instanceof Sa||c instanceof ab)if(c=c.getChildren())for(var g=0;g<c.length;g++)e(c[g],f)},a=function(c,f){d.setName(c.name);d.setDisplayName(c.displayName);
d.setCommentInfo(c.commentInfo);d.setModelId(c.id);if(c=c.children)for(var g=0;g<c.length;g++){var p=c[g];if(p.parentName||p.fieldNode){var n=new ab;n.fromJsonObject(p,f);n.setParentNode(d);h.push(n)}else p.tableName?(n=new fb,n.fromJsonObject(p,f),n.setParentNode(d),h.push(n)):p.type?(n=new bb,n.fromJsonObject(p,f),n.setParentNode(d),h.push(n)):(n=new Sa,n.fromJsonObject(p,f),n.setParentNode(d),h.push(n))}};this.protectedMethod={superFromJsonObject:a}}function bb(){eb.call(this);var d=this,h;this.setType=
function(a){h=a};this.getType=function(){return h};this.fromJsonObject=function(a,c){e(a,c)};var e=function(a,c){d.setType(a.type);d.setName(a.name);d.setDisplayName(a.displayName);d.setCommentInfo(a.commentInfo);d.setModelId(a.modelId);d.setModelId(a.id);c&&(c[d.getName()]=[])};this.protectedMethod={superFromJsonObject:e}}function gb(){Sa.call(this);var d=this,h=this.protectedMethod,e;this.getFieldNode=function(){return e};this.fromJsonObject=function(c,f){a(c,f)};var a=function(c,f){h.superFromJsonObject(c,
f);if(c=c.fieldNode){var g=d.getName();e=new Sa;g&&!f[g]&&(f[g]=[]);e.fromJsonObject(c,f)}};this.protectedMethod={tableNodeFromJsonObject:a}}function fb(){bb.call(this);var d=this,h=this.protectedMethod,e,a,c;this.getTableName=function(){return e};this.getFullTableName=function(){return a};this.getExtension=function(f){return c&&f?c[f]:null};this.fromJsonObject=function(f,g){e=f.tableName;a=f.fullTableName;c=f.extensions;h.superFromJsonObject(f);if((f=d.getName())&&g){if(a){g[a]||(g[a]=[]);g[a].push(f);
var p=a.substring(a.indexOf(".")+1);g[p]||(g[p]=[]);g[p].push(f)}else g[e]||(g[e]=[]),g[e].push(f);e&&e==a&&(g[f]||(g[f]=[]))}}}function ab(){gb.call(this);var d=this,h=this.protectedMethod,e;this.getParentName=function(){return e};this.fromJsonObject=function(a,c){e=a.parentName;h.tableNodeFromJsonObject(a,c);e&&(c[e]||(c[e]=[]),c[e].push(d.getName()))}}function jb(){Ca.call(this);var d=this.protectedMethod,h,e;this.getType=function(){return h};this.getTableName=function(){return e};this.setTableName=
function(a){e=a};this.fromJsonObject=function(a){h=a.type;d.fromJsonObject(a)}}function Va(){var d=-1,h=-1,e;this.getDataSetType=function(){return d};this.setDataSetType=function(a){d=a};this.getDataSourceType=function(){return h};this.setDataSourceType=function(a){h=a};this.getDataSource=function(){return e};this.setDataSource=function(a){e=a};this.isSameDataSourceModel=function(a){return a?d==a.getDataSetType()&&h==a.getDataSourceType()&&e&&e.getName()==a.getDataSource().getName():!1};this.getDataSourceDisplayName=
function(){var a=e.getName(),c=e.getAlias();return d==Ga.OQL_DATASET?(c&&(a=a+"("+c+")"),a):h==La.DATA_CENTER&&c&&0<=c.indexOf("/")?c.split("/")[1]:h==La.SUPER_QUERY&&c?c:a};this.getDataSourceDisplayAlias=function(){var a=e.getName(),c=e.getAlias();if(d==Ga.OQL_DATASET)return c?ba.get("entityNumberComa","\u5b9e\u4f53\u7f16\u7801\uff1a")+a+"\n"+ba.get("entityNameComa","\u5b9e\u4f53\u540d\u79f0\uff1a")+c:ba.get("nameComa","\u540d\u79f0\uff1a")+a;if(h==La.DATA_CENTER&&c&&0<=c.indexOf("/")){var f=c.split("/");
c=f[0];f=f[1];return ba.get("cloudComa","\u4e91\uff1a")+c+"\n"+ba.get("appComa","\u5e94\u7528\uff1a")+f+"\n"+ba.get("codeComa","\u7f16\u7801\uff1a")+a}return h==La.SUPER_QUERY&&c?ba.get("codeComa","\u7f16\u7801\uff1a")+a+"\n"+ba.get("nameComa","\u540d\u79f0\uff1a")+c:ba.get("nameComa","\u540d\u79f0\uff1a")+a}}function Oa(){var d,h,e,a,c,f;this.getId=function(){return e};this.getSerialNo=function(){return d};this.getName=function(){return h};this.getDbType=function(){return a};this.getAddress=function(){return c};
this.getUserName=function(){return f};this.fromJsonObject=function(g){d=g.serialNo;h=g.name;e=g.id;a=g.dbType;c=g.address;f=g.userName}}function cb(){var d=0,h=[],e,a=!0,c,f;this.setParentNode=function(g){e=g};this.getParentNode=function(){return e};this.setDisPlayName=function(g){f=g};this.getDisPlayName=function(){return f};this.setChildren=function(g){h=g};this.getChildren=function(){return h};this.setShowFolderNode=function(g){c=g};this.getShowFolderNode=function(){return c};this.setIsOpenDir=
function(g){a=g};this.getIsOpenDir=function(){return a};this.setLevel=function(g){d=g};this.getLevel=function(){return d}}function hb(){this.isSystemVar=function(){}}function Ya(){hb.call(this);var d,h,e,a,c,f,g,p,n,u,H,la,U,ja;this.isSystemVar=function(){return!1};this.isUsable=function(){return g==Y.MacroStatusEnum.AVAILABLE||g==Y.MacroStatusEnum.PROPERTY_ABNORMAL};this.getMacroStatus=function(){return g};this.getEntityFullName=function(){return p};this.setMacroStatus=function(W){g=W};this.getUid=
function(){return d};this.setUid=function(W){d=W};this.getFid=function(){return h};this.setFid=function(W){h=W};this.getName=function(){return e};this.setName=function(W){e=W};this.getCreatorId=function(){return n};this.setCreatorId=function(W){n=W};this.getCreatorName=function(){return u};this.setCreatorName=function(W){u=W};this.getCreateTime=function(){return H};this.setCreateTime=function(W){H=W};this.setModifierId=function(W){la=W};this.getModifierId=function(){return la};this.setModifierName=
function(W){U=W};this.getModifierName=function(){return U};this.setModifyTime=function(W){ja=W};this.getModifyTime=function(){return ja};this.getDesc=function(){return a};this.setDesc=function(W){a=W};this.isMultiValued=function(){return c};this.setMultiValued=function(W){c=W};this.getType=function(){return f};this.setType=function(W){f=W};this.toJsonObject=function(){var W={};W.uid=d;W.fid=h;W.name=e;W.creatorId=n;W.modifierId=la;W.desc=a;W.multiValued=c;W.type=f;W.macroStatus=g;W.creatorName=u;
W.modifierName=U;W.createTime=H&&H.getTime();W.modifyTime=ja&&ja.getTime();return W};this.fromJsonObject=function(W){d=W.uid;h=W.fid;e=W.name;a=W.desc;c=W.multiValued;n=W.creatorId;la=W.modifierId;u=W.creatorName;f=W.type;g=W.macroStatus;p=W.entityFullName;H=new Date(W.createTime);ja=new Date(W.modifyTime);U=W.modifierName};this.getStatusWarning=function(){switch(this.getMacroStatus()){case Y.MacroStatusEnum.DB_NOT_EXIST:var W=ba.get("macroDeletedTips","\u516c\u5171\u6570\u636e\u6e90\u4e2d\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u7ee7\u7eed\u4f7f\u7528\u3002");
break;case Y.MacroStatusEnum.WITHOUT_DB_PERMISSION:W=ba.get("macroNoPermissionTips",'\u516c\u5171\u6570\u636e\u6e90\u4e2d\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5df2\u53d6\u6d88\u6388\u6743\u7ed9\u5b8f\u53d8\u91cf\u7684\u6700\u540e\u4fee\u6539\u4eba"#1"\uff0c\u65e0\u6cd5\u7ee7\u7eed\u4f7f\u7528\u3002').replace("#1",this.getModifierName());break;case Y.MacroStatusEnum.WITHOUT_DB_CENTER_PERMISSION:W=ba.get("macroNoDBCenterPermissionTips",'\u5b8f\u53d8\u91cf\u7684\u6700\u540e\u4fee\u6539\u4eba"#1"\u6ca1\u6709\u6570\u636e\u4e2d\u5fc3\u6743\u9650\uff0c\u65e0\u6cd5\u7ee7\u7eed\u4f7f\u7528\u3002').replace("#1",
this.getModifierName());break;case Y.MacroStatusEnum.WITHOUT_SCHEMA_PERMISSION:W=ba.get("macroNoSchemaTips",'\u8be5\u53d8\u91cf\u4f7f\u7528\u7684\u8d85\u7ea7\u67e5\u8be2\u6a21\u5f0f\u5df2\u88ab\u5220\u9664\u6216\u53d6\u6d88\u6388\u6743\u7ed9\u6700\u540e\u4fee\u6539\u4eba"#1"\uff0c\u65e0\u6cd5\u7ee7\u7eed\u4f7f\u7528\u3002').replace("#1",this.getModifierName());break;case Y.MacroStatusEnum.ENTITY_NOT_EXIST:W=ba.get("macroEntityNotExist",'\u57fa\u7840\u8d44\u6599"#1"\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u7ee7\u7eed\u4f7f\u7528\u3002').replace("#1",
this.getEntityFullName());break;case Y.MacroStatusEnum.NOT_AVAILABLE:W=ba.get("macroAbnormalTips","\u5f53\u524d\u5b8f\u5b58\u5728\u5f02\u5e38\uff0c\u65e0\u6cd5\u7ee7\u7eed\u4f7f\u7528\u3002")}return W}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner=
{});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.model&&(com.kingdee.bos.extreport.datasetdesigner.model={});var Y=com.kingdee.bos.extreport.datasetdesigner.model,ba,Ia,Ga={},La={},Ra={},wa={},ua={},m={},D={},w={},r={},v={},G={},k={},A={},y={},z={},P={},K={};z.BOOL=1;z.TEXT=2;z.NUMBER=3;Ga.SQL_DATASET=1;Ga.JAVA_DATASET=3;Ga.OQL_DATASET=9;Ga.GENERIC_QUERY_DATASET=10;Ga.ALL_DATASET_TYPE=[Ga.SQL_DATASET,Ga.OQL_DATASET,Ga.GENERIC_QUERY_DATASET,Ga.JAVA_DATASET];La.DATA_CENTER=0;La.SUPER_QUERY=
1;La.USER_SUPER_QUERY=2;La.OUT_DB=3;La.isSuperQuery=function(d){return d==La.SUPER_QUERY||d==La.USER_SUPER_QUERY};Ra.KSQL=0;Ra.SQL=1;wa.BOOLEAN="boolean";wa.INT="integer";wa.NUMBER="number";wa.STRING="string";wa.DATE="date";wa.DATETIME="datetime";wa.BINARY="binary";wa.ALL_DATA_TYPES=[wa.BOOLEAN,wa.INT,wa.NUMBER,wa.STRING,wa.DATE,wa.DATETIME,wa.BINARY];wa.GENERIC_ALL_DATA_TYPES=[wa.BOOLEAN,wa.INT,wa.NUMBER,wa.STRING,wa.DATE,wa.DATETIME];var I;wa.checkValue=function(d,h){I||(I={},I[wa.STRING]=ca.checkText,
I[wa.NUMBER]=ca.checkNumber,I[wa.DATE]=ca.checkDate,I[wa.BOOLEAN]=ca.checkBoolean,I[wa.DATETIME]=ca.checkDateTime,I[wa.INT]=ca.checkInteger,I[wa.BINARY]=ca.checkBinary);return h&&I[d](h)};ua.TXT=0;ua.NUMERICAL=1;ua.DATE=2;ua.BOOLEAN=3;ua.DATETIME=4;ua.TIME=5;ua.ALL_DATA_TYPE=[ua.TXT,ua.NUMERICAL,ua.DATE,ua.DATETIME,ua.TIME,ua.BOOLEAN];m.INPUT=0;m.LIST=1;m.DATE=2;m.CHECKBOX=3;m.F7=4;m.SWITCH=6;m.SPINNER=7;m.LABEL=10;m.ALL_CTRL_TYPE=[m.INPUT,m.LIST,m.DATE,m.CHECKBOX,m.F7,m.SWITCH,m.SPINNER,m.LABEL];
D.STANDER=0;D.READONLY=1;D.HIDDEN=2;D.ALL_STATE_TYPE=[D.STANDER,D.READONLY,D.HIDDEN];w.CONSTANT=0;w.VARIABLE=1;w.FIRST_DATA=2;w.SPLIT="0xx1xx";w.FIRST_DATA_SIGN="#@$firstData$@#";r.DATA_SET=0;r.SELF=1;r.SQL=4;r.SYSTEM=6;r.MACRO=7;v.PERM="PERM";v.EXPR="EXPR";v.RELATIVE="RELATIVE";G.NOT_TREE=-1;G.PARENT_CHILD=0;G.LONG_NUMBER=1;G.ALL_TREE_TYPE=[G.NOT_TREE,G.LONG_NUMBER,G.PARENT_CHILD];k.DATA_SOURCE="DATA_SOURCE";k.JAVA_PARAM="JAVA_PARAM";k.JAVA_PARAM_BIND="JAVA_PARAM_BIND";k.JAVA_PARAM_GET_ERROR="JAVA_PARAM_GET_ERROR";
k.DATA_CLIENT_JAVA_PARAM_ERROR="DATA_CLIENT_JAVA_PARAM_ERROR";k.TABLE="TABLE";k.FIELD="FIELD";k.FILTER="FILTER";k.CALCULATE_FIELD="CALCULATE_FIELD";k.JOIN="JOIN";k.ORDER="ORDER";k.OUTPUT_COLUMN="OUTPUT_COLUMN";k.PARAM="PARAM";k.PARAM_CTRL_DEFAULT_VALUE="PARAM_CTRL_DEFAULT_VALUE";k.PARAM_CTRL_LINKAGE="PARAM_CTRL_LINKAGE";k.PARAM_CTRL_BIND_SOURCE="PARAM_CTRL_BIND_SOURCE";k.PARAM_CLIENT_ERROR="PARAM_CLIENT_ERROR";k.GENERIC_CLIENT_FILTER_ERROR="GENERIC_CLIENT_FILTER_ERROR";k.GENERIC_CLIENT_ORDER_ERROR=
"GENERIC_CLIENT_ORDER_ERROR";k.GENERIC_CLIENT_CALC_ERROR="GENERIC_CLIENT_CALC_ERROR";k.GENERIC_CLIENT_UNION_ERROR="GENERIC_CLIENT_UNION_ERROR";k.GENERIC_CLIENT_JOIN_ERROR="GENERIC_CLIENT_JOIN_ERROR";k.PARAM_NOT_FATAL_ERROR="PARAM_NOT_FATAL_ERROR";k.CHECK_EXP_TYPE=[k.DATA_SOURCE,k.OUTPUT_COLUMN,k.PARAM,k.TABLE,k.FIELD,k.FILTER,k.CALCULATE_FIELD,k.JOIN,k.ORDER,k.DATA_CLIENT_JAVA_PARAM_ERROR];k.SAVE_CHECK_TYPE=[k.DATA_SOURCE,k.PARAM,k.DATA_CLIENT_JAVA_PARAM_ERROR];k.CLIENT_CHECK_TYPE=[k.PARAM_CLIENT_ERROR,
k.GENERIC_CLIENT_FILTER_ERROR,k.GENERIC_CLIENT_ORDER_ERROR,k.GENERIC_CLIENT_CALC_ERROR,k.GENERIC_CLIENT_UNION_ERROR,k.DATA_CLIENT_JAVA_PARAM_ERROR,k.GENERIC_CLIENT_JOIN_ERROR];k.GENERIC_QUERY_CHECK_TYPE=[k.TABLE,k.FIELD,k.FILTER,k.CALCULATE_FIELD,k.JOIN,k.ORDER,k.GENERIC_CLIENT_FILTER_ERROR,k.GENERIC_CLIENT_ORDER_ERROR,k.GENERIC_CLIENT_CALC_ERROR,k.GENERIC_CLIENT_UNION_ERROR,k.GENERIC_CLIENT_JOIN_ERROR];A.DATA_SOURCE_UNDEFINED="1101";A.OUTPUT_COLUMNS_NAME_EXP="3302";A.LINKAGE_PARAM="$PARAM";A.LINKAGE_DS=
"$DS";A.LINKAGE_DS_PARAM="$DS_PARAM";A.SOURCE_BIND="$BIND";A.OUTPUT_COLUMN_NAME_DUPLICATED="8077014";A.OUTPUT_COLUMN_KSQL_DISABLE_SELECT_ALL="8077015";A.OUTPUT_COLUMN_FIELD_CHANGED="8077024";A.FRONT_END="$FRONTEND";A.JAVA_FIELD_CHANGED_EXEC_CODE="8077028";A.ETX_JAVA_EXEC_ERROR_CODE="8099017";A.ETX_JAVA_NO_FIND_CODE="8099018";A.ETX_JAVA_CHECK_ERROR_CODE="8099019";y.ACCESS="Access";y.SQLITE="SQLite";y.HIVE="Apache Hive";y.ODPS="ODPS";y.REDSHIFT="Amazon Redshift";y.APACHEDRILL="Apache Drill";y.SPARKSQL=
"Spark SQL";y.IMPALA="Apache Impala";y.KYLIN="Apache Kylin";y.DORIS="Apache Doris";y.HANA="HANA";P.SINGLEMACRO=0;P.MULTIMACRO=1;P.ALLTYPE=2;K.SYSTEM=1;K.MACRO=2;Y.DataSetType=Ga;Y.DataSourceType=La;Y.SqlType=Ra;Y.OutputColumDataType=wa;Y.ParamDataType=ua;Y.ParamCtrlType=m;Y.ParamCtrlState=D;Y.ParamDefaultValueType=w;Y.ParamBindSourceType=r;Y.ParamDefaultDateType=v;Y.ParamF7TreeType=G;Y.DataSetModelCheckType=k;Y.DataSetModelCheckCode=A;Y.DBType=y;Y.SwitchCtrlDataType=z;Y.ModelContainer=R;Y.ModelChecker=
V;Y.AbstractDataSetModel=Za;Y.SQLDataSetModel=Ea;Y.OQLDataSetModel=$a;Y.OutputColumn=ka;Y.Parameter=Qa;Y.AbstractCtrl=X;Y.LinkageParamPair=l;Y.AbstractLinkageCtrl=sa;Y.AbstractSource=b;Y.DataSetSource=Ja;Y.SystemVarSource=Ha;Y.MacroVarSource=za;Y.NameAliasPair=ta;Y.DataSourceNameAliasPair=function(){ta.call(this);var d;this.getDBType=function(){return d};this.setDBType=function(h){d=h}};Y.SelfDefineSource=xa;Y.AbstractBindSourceCtrl=ea;Y.CheckBoxCtrl=aa;Y.DateCtrl=ia;Y.F7Ctrl=fa;Y.InputCtrl=Aa;Y.LabelCtrl=
na;Y.ListCtrl=ya;Y.SpinnerCtrl=ra;Y.SwitchCtrl=Ma;Y.DataSetModelVO=function(){var d={},h,e,a,c;this.getCheckResult=function(f){return d[f]};this.getDataSetModel=function(){return h};this.getLockHolderName=function(){return e};this.setLockHolderName=function(f){e=f};this.isUserAcquiredLock=function(){return a};this.setUserAcquiredLock=function(f){a=f};this.getLockType=function(){return c};this.setLockType=function(f){c=f};this.fromJsonObject=function(f){e=f.lockHolderName;c=f.lockType;a=f.isUserAcquiredLock;
var g=f.checkResult;if(g)for(var p=Object.keys(g),n=0;n<p.length;n++){var u=p[n],H=g[u];if(H){for(var la=[],U=0;U<H.length;U++){var ja=H[U],W=new Fa;W.fromJsonObject(ja);la.push(W)}d[u]=la}}f=f.dataSetModel;g=parseInt(f.dataSetType);g=oa.createDataSetModel(g);g.fromJsonObject(f,d);h=g};this.toJsonObject=function(){var f={};f.checkResult=JSON.stringify(h.getExceptionMap());f.dataSetModel=JSON.stringify(h.toJsonObject());return f}};Y.ParameterModelVO=function(){var d={},h=[];this.getCheckResult=function(e){return d[e]};
this.getParameters=function(){return h};this.fromJsonObject=function(e){var a=e.checkResult;if(a)for(var c=Object.keys(a),f=0;f<c.length;f++){var g=c[f],p=a[g];if(p){for(var n=[],u=0;u<p.length;u++){var H=p[u],la=new Fa;la.fromJsonObject(H);n.push(la)}d[g]=n}}if(e=e.parameters)for(u=0;u<e.length;u++)a=e[u],c=new Qa,c.fromJsonObject(a,d),h.push(c)}};Y.DataSetModelCheckResult=Fa;Y.DataSourceTableObjectVO=function(){var d=this,h,e,a,c,f,g=[],p={};this.getDataSetType=function(){return h};this.getDataSourceType=
function(){return e};this.getDataSourceName=function(){return a};this.getDataSourceNameAlias=function(){return c};this.getDataSource=function(){var n=new ta;n.setName(a);n.setAlias(c);return n};this.getDataSourceModel=function(){var n=new Va;n.setDataSetType(h);n.setDataSourceType(e);n.setDataSource(d.getDataSource());return n};this.getTableNode=function(){return f};this.getTables=function(){return g};this.getMapTableFields=function(){return p};this.fromJsonObject=function(n){h=n.dataSetType;e=n.dataSourceType;
a=n.dataSourceName;c=n.dataSourceNameAlias;if(n=n.tableNode)f=new Sa,f.fromJsonObject(n,p)}};Y.FolderNode=Sa;Y.LeafNode=bb;Y.TableNode=gb;Y.EntityNode=ab;Y.FieldNode=fb;Y.EntityPreviewData=function(){var d,h=[],e=[];this.getTableName=function(){return d};this.getFields=function(){return h};this.getData=function(){return e};this.fromJsonObject=function(a){d=a.tableName;var c=a.fields;if(c)for(var f=0;f<c.length;f++){var g=new jb;g.fromJsonObject(c[f]);h[f]=g}e=a.data}};Y.DataSourceModel=Va;Y.OutDBVO=
Oa;Y.DataSourceCheckerVO=function(){var d,h,e,a,c,f,g=[],p=[];this.getOutDBList=function(){return p};this.hasQingModelerPerm=function(){return c};this.hasEntityPerm=function(){return f};this.hasDataCenterPerm=function(){return d};this.hasDBManagePerm=function(){return h};this.hasSuperQuerySchema=function(){return e};this.isSuperQueryNotDeployed=function(){return a};this.getSuperQuerySchemas=function(){return g};this.fromJsonObject=function(n){d=n.hasDataCenterPerm;h=n.hasDBManagePerm;e=n.hasSuperQuerySchema;
a=n.superQueryNotDeployed;c=n.hasQingModelerPerm;f=n.hasEntityPerm;var u=n.schemas,H=[],la;for(la in u){var U=new ta;U.setName(la);U.setAlias(u[la]);H.push(U)}g=H;n=n.outDBList;p=[];for(u=0;n&&u<n.length;u++)H=new Oa,H.fromJsonObject(n[u]),p.push(H)}};Y.SuperQueryCheckerVO=function(){var d,h,e=[];this.hasSuperQuerySchema=function(){return h};this.isSuperQueryNotDeployed=function(){return d};this.getSuperQuerySchemas=function(){return e};this.fromJsonObject=function(a){h=a.hasSuperQuerySchema;d=a.superQueryNotDeployed;
a=a.schemas;var c=[],f;for(f in a){var g=new ta;g.setName(f);g.setAlias(a[f]);c.push(g)}e=c}};Y.DBCenterCheckerVO=function(){var d,h,e,a,c,f;this.getAppNumber=function(){return d};this.getAppName=function(){return h};this.getIsNoConnPerm=function(){return e};this.getIsAppDeleted=function(){return a};this.getIsAppBanned=function(){return c};this.getIsCloudBanned=function(){return f};this.fromJsonObject=function(g){d=g.appNumber;h=g.appName;e=g.isNoConnPerm;a=g.isAppDeleted;c=g.isAppBanned;f=g.isCloudBanned}};
Y.SystemVar=function(){cb.call(this);hb.call(this);var d=this,h,e;this.isSystemVar=function(){return!0};this.setName=function(a){h=a};this.getName=function(){return h};this.setText=function(a){e=a};this.getText=function(){return e};this.fromJsonObject=function(a){d.setName(a._name);d.setText(a._text);d.setLevel(d.getLevel()+1);d.setDisPlayName(d.getText()+"("+d.getName()+")")}};Y.MacroVar=function(){Ya.call(this);cb.call(this)};Y.Macro=Ya;Y.SwitchCheckType={};Y.SwitchErrorCode={};Y.MacroDialogType=
P;Y.MacroOrSysDialogType=K;Y.DateSettingModel=Ba;Y.ModelContainer=R;Y.ModelChecker=V;(function(){var d=com.kingdee.bos.qing.framework.common;ba=d.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);d=com.kingdee.bos.extreport.datasetdesigner.common;Ia=d.StringUtil})();Y.SplitHelper=new function(){var d=/[\s;\uff1b,\uff0c]|(?:0xx1xx)/g,h=/[;\uff1b,\uff0c]|(?:0xx1xx)/g;this.split=function(e,a){return e?a?e.split(h):e.split(d):[]}};var ha,J;P.macroDialogTypeToName=function(d){ha||
(ha={},ha[P.SINGLEMACRO]=ba.get("singleMacro","\u5355\u503c\u5b8f"),ha[P.MULTIMACRO]=ba.get("multiMacro","\u591a\u503c\u5b8f"),ha[P.ALLTYPE]=ba.get("allType","\u5168\u90e8\u7c7b\u578b"));return ha[d]};K.macroSysDialogTypeToName=function(d){J||(J={},J[K.MACRO]=ba.get("macroVar","\u5b8f\u53d8\u91cf"),J[K.SYSTEM]=ba.get("systemVar","\u7cfb\u7edf\u53d8\u91cf"));return J[d]};var N;y.isSupportKSQL=function(d){N||(N=[],N.push(y.ACCESS),N.push(y.SQLITE),N.push(y.HIVE),N.push(y.ODPS),N.push(y.REDSHIFT),N.push(y.APACHEDRILL),
N.push(y.SPARKSQL),N.push(y.IMPALA),N.push(y.KYLIN),N.push(y.DORIS),N.push(y.HANA));return-1===N.indexOf(d)};var E,C,L,q,t,B;ua.dataTypeToIconName=function(d){E||(E={},E[ua.TXT]="txt",E[ua.NUMERICAL]="numerical",E[ua.DATE]="date",E[ua.BOOLEAN]="boolean",E[ua.DATETIME]="dateTime",E[ua.TIME]="time");return E[d]};ua.dataTypeToName=function(d){C||(C={},C[ua.TXT]=ba.get("text","\u6587\u672c"),C[ua.NUMERICAL]=ba.get("decimal","\u6570\u503c"),C[ua.DATE]=ba.get("date","\u65e5\u671f"),C[ua.BOOLEAN]=ba.get("bool",
"\u5e03\u5c14"),C[ua.DATETIME]=ba.get("dateTime","\u65e5\u671f\u65f6\u95f4"),C[ua.TIME]=ba.get("time","\u65f6\u95f4"));return C[d]};ua.defaultValueCheck=function(d,h){L||(L={},L[ua.TXT]=ca.checkText,L[ua.NUMERICAL]=ca.checkNumber,L[ua.DATE]=ca.checkDate,L[ua.BOOLEAN]=ca.checkBoolean,L[ua.TIME]=ca.checkTime,L[ua.DATETIME]=ca.checkDateTime);return L[d](h)};ua.dataTypeToErrorMsg=function(d){q||(q={},q[ua.TXT]="",q[ua.NUMERICAL]=ba.get("numericalTypeTip","#1 \u5fc5\u987b\u662f\u6570\u503c\u7c7b\u578b\u3002"),
q[ua.DATE]=ba.get("dateTypeTip","#1 \u5fc5\u987b\u662f\u6b63\u786e\u7684\u65e5\u671f\u7c7b\u578b\uff0c\u683c\u5f0f\u5982 2001-03-19\u3002"),q[ua.BOOLEAN]=ba.get("booleanTypeTip","#1 \u5fc5\u987b\u662f\u5e03\u5c14\u7c7b\u578b\u3002"),q[ua.DATETIME]=ba.get("dateTimeTypeTip","#1 \u5fc5\u987b\u662f\u6b63\u786e\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b\uff0c\u683c\u5f0f\u5982 2001-03-19 13:30:21\u3002"),q[ua.TIME]=ba.get("timeTypeTip","#1 \u5fc5\u987b\u662f\u6b63\u786e\u7684\u65f6\u95f4\u7c7b\u578b\uff0c\u683c\u5f0f\u5982 13:30:21\u3002"));
return q[d]};m.ctrlTypeToIconName=function(d){t||(t={},t[m.INPUT]="input",t[m.LIST]="list",t[m.DATE]="date_ctrl",t[m.CHECKBOX]="checkbox",t[m.F7]="date_f7",t[m.SWITCH]="switch_btn",t[m.SPINNER]="spinner",t[m.LABEL]="label");return t[d]};var F;m.ctrlTypeToMicroIconName=function(d){F||(F={},F[m.INPUT]="micro_input",F[m.LIST]="micro_list",F[m.DATE]="micro_date",F[m.CHECKBOX]="micro_check",F[m.F7]="micro_f7",F[m.SWITCH]="micro_switch",F[m.SPINNER]="micro_spinner",F[m.LABEL]="micro_label");return F[d]};
m.ctrlTypeToName=function(d){B||(B={},B[m.INPUT]=ba.get("inputCtrl","\u8f93\u5165\u6846"),B[m.LIST]=ba.get("listCtrl","\u4e0b\u62c9\u5217\u8868"),B[m.DATE]=ba.get("dateCtrl","\u65e5\u671f\u63a7\u4ef6"),B[m.CHECKBOX]=ba.get("checkboxCtrl","\u591a\u9009\u6846\u7ec4"),B[m.F7]=ba.get("f7Ctrl","\u5f39\u7a97\u9009\u62e9\u5668"),B[m.SWITCH]=ba.get("switchCtrl","\u5f00\u5173\u63a7\u4ef6"),B[m.SPINNER]=ba.get("spinnerCtrl","\u6570\u5b57\u5fae\u8c03\u6846"),B[m.LABEL]=ba.get("labelCtrl","\u6807\u7b7e\u63a7\u4ef6"));
return B[d]};m.isBindSourceType=function(d){return m.F7==d||m.CHECKBOX==d||m.LIST==d};m.isLinkageType=function(d){return m.isBindSourceType(d)||m.DATE==d||m.INPUT==d||m.SWITCH==d||m.SPINNER==d};Ga.datesetTypeToName=function(d){if(d==Ga.SQL_DATASET)return ba.get("sqlDataSet","SQL\u6570\u636e\u96c6");if(d==Ga.OQL_DATASET)return ba.get("oqlDataSet","\u5b9e\u4f53\u67e5\u8be2\u6570\u636e\u96c6");if(d==Ga.GENERIC_QUERY_DATASET)return ba.get("genericDataSet","\u901a\u7528\u67e5\u8be2\u6570\u636e\u96c6");
if(d==Ga.JAVA_DATASET)return ba.get("javaDataSet","Java\u6570\u636e\u96c6")};r.sourceTypeToName=function(d){switch(d){case r.SQL:case r.DATA_SET:return ba.get("dataset","\u6570\u636e\u96c6");case r.SYSTEM:return ba.get("systemVar","\u7cfb\u7edf\u53d8\u91cf");case r.MACRO:return ba.get("macroVar","\u5b8f");case r.SELF:return ba.get("custom","\u81ea\u5b9a\u4e49")}};r.isSupportTreeType=function(d){switch(d){case r.SQL:case r.DATA_SET:case r.MACRO:return!0;case r.SYSTEM:case r.SELF:return!1}};w.sourceTypeToName=
function(d){switch(d){case w.CONSTANT:return ba.get("constant","\u5e38\u91cf");case w.FIRST_DATA:return ba.get("firstData","\u7b2c\u4e00\u6761\u6570\u636e");case w.VARIABLE:return ba.get("variant","\u53d8\u91cf")}};wa.dataTypeToName=function(d){switch(d){case wa.BOOLEAN:return ba.get("bool","\u5e03\u5c14");case wa.INT:return ba.get("integer","\u6574\u6570");case wa.NUMBER:return ba.get("decimal","\u6570\u503c");case wa.STRING:return ba.get("txt","\u6587\u672c");case wa.DATETIME:return ba.get("datetime",
"\u65e5\u671f\u65f6\u95f4");case wa.DATE:return ba.get("date","\u65e5\u671f");case wa.BINARY:return ba.get("binary","\u4e8c\u8fdb\u5236")}return null};wa.dataTypeToIconName=function(d){var h="";switch(d){case wa.BOOLEAN:h="boolean";break;case wa.INT:h="integer";break;case wa.NUMBER:h="numerical";break;case wa.STRING:h="txt";break;case wa.DATE:h="date";break;case wa.DATETIME:h="dateTime";break;case wa.BINARY:h="binary"}return h};var Z;w.defaultTypeToName=function(d){Z||(Z={},Z[w.CONSTANT]=ba.get("constant",
"\u5e38\u91cf"),Z[w.VARIABLE]=ba.get("variant","\u53d8\u91cf"),Z[w.FIRST_DATA]=ba.get("firstData","\u7b2c\u4e00\u6761\u6570\u636e"));return Z[d]};Ra=new function(){var d=/^(?![0-9]+$)[a-zA-Z0-9_]+$/;this.check=function(h){return h&&0!==h.length?d.test(h):!1}};Y.ParamNameChecker=Ra;var ma=new function(){this.removeLinkage=function(d){for(var h=d.getModel().getParameters(),e=0;e<h.length;e++){var a=h[e].getCtrlObject();if(a.getLinkageParams&&0<a.getLinkageParams().length)for(var c=a.getLinkageParams(),
f=0;f<c.length;f++)c[f].getLinkageParamObject()===d&&(c.splice(f,1),a.getException(k.PARAM_CTRL_LINKAGE)&&a.clearException(k.PARAM_CTRL_LINKAGE),f--)}}};Y.LinkageRemover=ma;Ra=new function(){this.moveSelectedUp=function(h,e){var a=Object.keys(e);if(a.length!=h.length){var c=Number(a[0]);0<c&&c--;for(var f=[],g=0;g<h.length;g++)if(g<c)f.push(g);else{for(var p=0;p<a.length;p++)f.push(Number(a[p]));for(;g<h.length;)e[g]||f.push(g),g++}d(h,f);h={};for(g=0;g<a.length;g++)f=Number(a[g]),h[c]=e[f],delete e[f],
c++;a=Object.keys(h);for(g=0;g<a.length;g++)c=a[g],e[c]=h[c]}};this.moveSelectedDown=function(h,e){var a=Object.keys(e);if(a.length!=h.length){var c=Number(a[a.length-1]);c<h.length-1&&c++;for(var f=[],g=h.length-1;0<=g;g--)if(g>c)f.unshift(g);else{for(var p=a.length-1;0<=p;p--)f.unshift(Number(a[p]));for(;0<=g;)e[g]||f.unshift(g),g--}d(h,f);h={};for(g=a.length-1;0<=g;g--)f=Number(a[g]),h[c]=e[f],delete e[f],c--;a=Object.keys(h);for(g=0;g<a.length;g++)c=a[g],e[c]=h[c]}};var d=function(h,e){for(var a=
[],c=0;c<e.length;c++)a.push(h[e[c]]);for(c=h.length=0;c<a.length;c++)h.push(a[c])}};Y.ParamListUtils=Ra;var M=new function(){this.createBindSource=function(d,h){switch(parseInt(d)){case r.DATA_SET:case r.SQL:return new Ja(h);case r.SELF:return new xa(h);case r.SYSTEM:return new Ha(h);case r.MACRO:return new za(h)}}};Y.BindSourceFactory=M;var O=new function(){var d;this.createCtrl=function(h,e){d||(d={},d[m.INPUT]=Aa,d[m.LIST]=ya,d[m.DATE]=ia,d[m.CHECKBOX]=aa,d[m.F7]=fa,d[m.SWITCH]=Ma,d[m.SPINNER]=
ra,d[m.LABEL]=na);return new d[h](e,h)}};Y.CtrlFactory=O;Ra=new function(){this.createDefault=function(d){d=new Qa(d);d.setCtrlType(m.INPUT);d.setDataType(ua.TXT);d.setIsIgnoreNull(!1);var h=O.createCtrl(m.INPUT,d);h.setIsRequired(!1);h.setCtrlState(D.STANDER);h.setDefaultValueType(w.CONSTANT);d.setCtrlObject(h);return d}};Y.ParameterFactory=Ra;var qa=new function(){var d=this;this.removeMark=function(e){return Ia.isNotEmptyStr(e)?e.trim().replace(/--.*$/gm,"").replace(/\s#.*$/gm,"").replace(/\/\/.*/,
"").replace(/\/\*[\s\S]*\*\//,"").trim():e};this.parseTable=function(e){if(e){var a=d.removeMark(e);e=[];var c=h(a,"from");c&&e.push(c);(a=h(a,"join"))&&e.push(a);return e}return[]};var h=function(e,a){var c=/\bfrom\b/gi;"join"==a.toLowerCase()&&(c=/\bjoin\b/gi);c=c.exec(e);c=null!=c?c.index:-1;if(-1==c)return null;e=e.substring(c+a.length).trim();a=e.indexOf(" ");c=e.indexOf("\n");var f=e.indexOf("\r"),g=e.indexOf(";");if(-1==a&&-1==c&&-1==f&&-1==g)return e.split(",")[0];var p=e.length;-1!=a&&(p=
a);-1!=c&&c<p&&(p=c);-1!=f&&f<p&&(p=f);-1!=g&&g<p&&(p=g);return e.substring(0,p).split(",")[0]}};Y.SqlContentParser=qa;var oa=new function(){var d={};this.addDataSetModel=function(h,e){d[h]=e};this.createDataSetModel=function(h){return new d[h]}};Y.DataSetModelFactory=oa;oa.addDataSetModel(Ga.SQL_DATASET,Ea);oa.addDataSetModel(Ga.OQL_DATASET,$a);var Q={};Y.RptSourceType=Q;Q.ENTITY="ENTITY";Q.DATA_CENTER="DATA_CENTER";Q.QING_MODELER="QING_MODELER";Q.SUPER_QUERY="SUPER_QUERY";Q.OUT_DB="OUT_DB";Y.AbstractRptSourceType=
Q;var da;Q.fromDataSetSourceType=function(d,h){da||(da={},da[Ga.SQL_DATASET]=Q.fromSqlSourceType,da[Ga.OQL_DATASET]=Q.fromOqlSourceType,da[Ga.GENERIC_QUERY_DATASET]=Q.fromGenericSourceType);return da[d](h)};var S;Q.fromSqlSourceType=function(d){S||(S={},S[La.DATA_CENTER]=Q.DATA_CENTER,S[La.OUT_DB]=Q.OUT_DB,S[La.USER_SUPER_QUERY]=Q.OUT_DB,S[La.SUPER_QUERY]=Q.SUPER_QUERY);return S[d]};Q.fromOqlSourceType=function(){return Q.ENTITY};Oa.TYPE_SUPERQUERY="superQuery";Y.MacroStatusEnum={AVAILABLE:"AVAILABLE",
NOT_EXIST:"NOT_EXIST",NOT_AVAILABLE:"NOT_AVAILABLE",DB_NOT_EXIST:"DB_NOT_EXIST",ENTITY_NOT_EXIST:"ENTITY_NOT_EXIST",WITHOUT_DB_PERMISSION:"WITHOUT_DB_PERMISSION",WITHOUT_ENTITY_PERMISSION:"WITHOUT_ENTITY_PERMISSION",WITHOUT_DB_CENTER_PERMISSION:"WITHOUT_DB_CENTER_PERMISSION",WITHOUT_SCHEMA_PERMISSION:"WITHOUT_SCHEMA_PERMISSION",PROPERTY_ABNORMAL:"PROPERTY_ABNORMAL"};var ca=new function(){var d=/[\s\S]*/,h=/^[-+]?\d+(\.\d+)?$/,e=/^(\d{4}-\d{2}-\d{2})$/,a=/^\b(?:true|false|0{1}|1{1})\b$/i,c=/^([0-1]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,
f=/^[01]+$/,g=/^(0|-?[1-9]\d*)$/,p=/^(\d{10}|\d{13}|\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})$/;this.checkText=function(n){return d.test(n)};this.checkNumber=function(n){return h.test(n)};this.checkDate=function(n){return e.test(n)};this.checkTime=function(n){return c.test(n)};this.checkDateTime=function(n){return p.test(n)};this.checkBoolean=function(n){return a.test(n)};this.checkBinary=function(n){return f.test(n)};this.checkInteger=function(n){return g.test(n)}};Y.StringValidator=ca})();(function(){function R(){KTableUIDraggableAdjustingHandler.CustomExpendor.call(this);var m,D,w=this.getMinColumnWidthLimited;this.setColumnNotDraggable=function(r){m=r};this.setColumnMinWidth=function(r){D=r};this.getTailBlankForDragging=function(){return-1};this.isRowDraggable=function(r,v){return!1};this.isColumnDraggable=function(r,v){return!(r.getColumnsCount()===v+1||m&&m.includes(v))};this.getMinColumnWidthLimited=function(r,v){return D&&0<D.length&&D.length>v?D[v]:w()}}function V(){com.kingdee.bos.qing.ui.component.SearchBox.call(this);
this.setFontSize=function(m){this.getJqUi().find("input").css({"font-size":m+"px"})}}function X(m,D,w,r){ia.call(this);var v=this,G=this.protectedMethod,k,A;(function(){G.setTitle(ka.get("preview","\u9884\u89c8"));v.setSize(700,500);G.setSelectable(!0);G.setContentPaneCreator(function(){if(k)var z=k.getJqUi();else{k=new l(w);z=k.getJqUi();m.addWindowResizeListener(y);var P=function(I){var ha=new sa;ha.fromJsonObject(I);k.setModel(ha);A&&A(!0);r&&r(D,!1)},K=function(I,ha){A&&A(!1);if(w){r&&r(D,!0);
switch(I){case 1200004:var J=ka.get("noConnectionPerm","\u60a8\u6ca1\u6709\u9009\u62e9\u7684\u201c\u6570\u636e\u5e93\u8fde\u63a5\u201d\u7684\u6743\u9650\u3002");break;case 1200013:J=ka.get("noEntityPerm","\u60a8\u6ca1\u6709\u9009\u62e9\u7684\u57fa\u7840\u8d44\u6599\u7684\u6743\u9650\u3002");break;case 1200014:J=ka.get("entityNotExits","\u5b8f\u53d8\u91cf\u4f7f\u7528\u7684\u57fa\u7840\u8d44\u6599\u4e0d\u5b58\u5728\u3002")}void 0!==J?k.showPreviewError(J):k.showPreviewError(ka.get("macroCannotExe",
"\u8be5\u5b8f\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\uff0c\u8bf7\u68c0\u67e5\u5b8f\u4fe1\u606f\u662f\u5426\u6b63\u786e\u3002"),ha);return!0}};w?(P=m.createMacroManageFacade(P,K),P.previewMacroById(D.getFid(),D.getType(),!1)):(P=m.createQueryFacade(P,K),P.previewDataSysVar(D.getText()))}return z});G.setFooterClosingOnly(!0);G.setClosingChecker2(function(){m.removeWindowResizeListener(y)},function(){m.removeWindowResizeListener(y);G.destroy();return!0});G.setClosingAction(function(z){})})();var y=function(){k&&
Ea.refresh(k.getPreviewTable())};this.setFunPreviewCallback=function(z){A=z}}function l(m){function D(J){KTDefaultCellRender.call(this,J);var N=this,E=this.paintCellUI;this.paintCellUI=function(C,L){var q=N.getCurrentRowIdx(),t=N.getCurrentRow(),B=N.getCurrentColIdx();t=t.getUserObject();var F=v&&r.getNoPermFieldIndex();F=v&&(!F||-1==F.indexOf(B));N.getCurrentRowIdx()<Ea.getHeadRowCount()?v&&!F?($(C).css("background-color","#DFDFDF"),1==q&&(q=r.getFieldTitle(B),L=ka.get("noFieldPermTips","\u60a8\u6ca1\u6709\u6743\u9650\u67e5\u770b\u8be5\u5b57\u6bb5\u6570\u636e\u3002"),
ha(L,C,q))):0==B?(v&&$(C).css("background-color","#DFDFDF"),1===q&&(q=r.getFieldTitle(B),v?(L=ka.get("macroField","\u8be5\u5b57\u6bb5\u4e3a\u5b8f\u7684\u53d6\u503c\u5b57\u6bb5\u3002"),ha(L,C,q)):E(C,L))):E(C,L):(L=t.getColumn(B).getValue(),v&&!F&&(L="***"),q=$("<div>"),q.text(L),q.attr("title",L),q.css({"line-height":"28px","padding-left":"2px","padding-right":"2px",overflow:"hidden"}),q.appendTo(C))}}var w,r,v=m,G,k,A,y,z,P,K;this.setModel=function(J){if(r=J)y.hide(),z.hide();G||I();if(0!=document.body.clientHeight&&
0!=document.body.clientWidth){Ea.clear(G);if(r){J=r.getActualRowCount();var N=r.getTotalRowCount();G.addColumns(r.getFieldCount());for(var E=Ea.createHeadRow(G),C=120,L=new Ma,q=0;q<r.getFieldCount();q++){if(!v){L.setFontSize(12);var t=r.getFieldTitle(q);t&&(t=L.measureWidth(t)+50,C=t<C?C:t)}G.getColumn(q).setWidth(C);E.getCell(q).setValue(r.getFieldTitle(q))}for(q=0;q<J;q++)E=r.getRow(q),Ea.createRow(G).setUserObject(E);q=ka.get("previewRowNum","\u5171#1\u884c").replace("#1",N);J<N&&(q+=ka.get("previewRowLimit",
"\uff0c\u4ec5\u663e\u793a\u524d#1\u884c").replace("#1",J));A.text(q)}else A.empty();Ea.refresh(G)}};this.showPreviewError=function(J,N){y.hide();z.show();P&&P.empty();P=$("<div>");var E=$("<div>");Fa.background(E,"marco_error");E.addClass("extreport-error-icon");z.append(E);K=$("<span>");K.text(J);K.appendTo(P);if(N){var C=$("<span>");C.text(ka.get("youCan","\u60a8\u53ef\u4ee5#1\u3002"));C.appendTo(P);C.html(function(){return C.html().replace("#1","<span id = 'view' class = 'extreport-error-darkmask-button' style = 'cursor: pointer;'> "+
ka.get("moreDetailBlank"," \u67e5\u770b\u8be6\u7ec6 ")+"</span>")});C.find("#view").on("click",function(){b.showErrorDialog(ka.get("macroCannotExe","\u8be5\u5b8f\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\uff0c\u8bf7\u68c0\u67e5\u5b8f\u4fe1\u606f\u662f\u5426\u6b63\u786e\u3002"),N)})}P.css({"line-height":"20px",color:"#333","font-size":"14px","text-align":"center"});ra.layoutCtrlWithLRTB(P,0,0,null,"68%",null,20);z.append(P)};this.getPreviewTable=function(){return G};this.getJqUi=function(){w||(w=$("<div>"),
I(),w.append(k),A=$("<div>"),ra.layoutCtrlWithLRTB(A,0,0,null,0,null,20),w.append(A),A.css({"line-height":"20px",color:"#333","font-size":"12px"}),y=$("<div>"),ra.layoutCtrlWithLRTB(y,0,0,null,0,null,20),w.append(y),y.css({"line-height":"20px",color:"#333","font-size":"14px"}),y.text(ka.get("loading","\u52a0\u8f7d\u4e2d\u2026")),r&&y.hide(),z=$("<div>"),w.append(z),z.hide());return w};var I=function(){G=Ea.createTable();G.setColumnFitVisibleWidth(!1);var J=new D(G);J.setOutsideVisible(!0);G.setCellRender(J);
G.setSyncUIWhenModelChanged(!0);k=$(G.getUI());ra.layoutCtrlWithLRTB(k,0,0,null,20,0,null)},ha=function(J,N,E){var C=$("<div>");C.attr("title",E);C.text(E);C.css({display:"inline-block","line-height":"20px",height:"20px"});E=new Ba;E.setIconType(Ba.ICON_TYPE_QUESTION);E.setTipsText(J);J=E.getJqUi();J.css({display:"inline-block",margin:"3px 0 0 3px"});C.appendTo(N);J.appendTo(N)}}function sa(){function m(){var k=[];this.getColumn=function(A){return k[A]};this.fromJsonObject=function(A){if(A=A.columns)for(var y=
0;y<A.length;y++){var z=new D;z.fromJsonObject(A[y]);k.push(z)}}}function D(){var k;this.getValue=function(){return k};this.fromJsonObject=function(A){k=A.value}}var w=0,r=[],v=[],G=[];this.getNoPermFieldIndex=function(){return G};this.getFieldCount=function(){return r.length};this.getFieldTitle=function(k){return r[k]};this.getTotalRowCount=function(){return w};this.getActualRowCount=function(){return v.length};this.getRow=function(k){return v[k]};this.fromJsonObject=function(k){var A=k.fields;A&&
(r=A);(A=k.totalRowCount)&&(w=A);(A=k.noPermFieldIndex)&&(G=A);if(k=k.rows)for(A=0;A<k.length;A++){var y=new m;y.fromJsonObject(k[A]);v.push(y)}}}function b(){}function Ja(m){KTDefaultTreeHandlerRender.call(this,m);var D=this;this.create=function(w,r,v,G,k,A,y){var z=20*w.getLevel();var P=z+17;var K=null;if(D.protectedMethod.isTreeNodeHasChildren(w,r,v)||w.isHaveHandlerAlways())K=D.protectedMethod.createAbsoluteHtmlElement("div",z,k,17,y),K.style.cursor="pointer",r=$(K),v=$("<div>"),r.append(v),w.isExpanded()?
(v.addClass("table-lower-triangle"),v.removeClass("table-right-triangle")):(v.addClass("table-right-triangle"),v.removeClass("table-lower-triangle"));r=[K,P,k,null];w=r[0];P=r[1];K=r[2];r=r[3];G=D.protectedMethod.createAbsoluteHtmlElement("span",P,K,G+A-P,k+y-K);return[w,G,r]}}function Ha(){this.doPaintIcon=function(m,D,w){D=cb.dataTypeToIconName(D);w&&(D+="_selected");Fa.background(m,D)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.common&&(com.kingdee.bos.extreport.datasetdesigner.common={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.common.ui&&(com.kingdee.bos.extreport.datasetdesigner.common.ui={});var za=com.kingdee.bos.extreport.datasetdesigner.common.ui;
za.AbstractDataSetTabPane=function(m,D){ea.AbstractTabPane.call(this);var w=this,r,v;this.getTitle=function(){return m};this.setMessageCurtain=function(G){v=G};this.getMessageCurtain=function(){return v};this.getDataSetModelVO=function(){return D.getMainDataSetModelVO()};this.model2Ui=function(G){w.protectedUpdateUi(w.getDataSetModelVO(),G)};this.getJqUi=function(){r||(r=$("<div>"),w.protectedInit(r));return r};this.resize=function(){throw Error("override me");};this.fireTabChangeEvent=function(){throw Error("override me");
};this.protectedInit=function(G){throw Error("Override me.");};this.protectedUpdateUi=function(G){throw Error("Override me.");}};za.TableCustomExpandor=R;za.SearchBox=V;za.PreviewDialog=X;za.DialogUtil=b;za.SearchableTable=function(){function m(M){KTDefaultCellRender.call(this,M);var O=this;this.paintCellUI=function(qa,oa){var Q=O.getCurrentRow(),da=O.getCell(),S=da.getValue();da=da.getUserObject();var ca=$(qa);qa=D.protectedPaintCellItem(S);S.isEnabled()||qa.attr("disabled",!0);qa.data("model",S);
var d=S.isEnabled();d||qa.css({color:"#ddd",cursor:"default"});if(!K&&da||K==S)I=Q,Z(ca,S);ca.on("mousedown",function(e){I=Q;d&&F(ca,S)});ca.on("dblclick",function(e){d&&(F(ca,S),J&&J(S))});da=ca;var h=S.hasChildren();h&&oa?(da=$(oa),oa=da.css("left"),oa=parseInt(oa.substring(0,oa.lastIndexOf("px"))),isNaN(oa)||da.css({left:oa+"px"}),oa=da.width(),da.css({width:oa+16+"px"})):h||(oa=0,S.getParentNode()&&(oa=20*S.getSubNodeLevel()),ra.layoutCtrlWithLRTB(qa,oa,null,ca.width()-oa),qa.css("z-index","2"));
ca.css({width:ca.width()+11+"px"});qa.appendTo(da);ca.addClass("wizard-tablearea-table-item")}}var D=this,w,r,v,G,k,A,y="",z=[],P=[],K=null,I=null,ha,J;this.getJqUi=function(){w||E();return w};this.setSearchableTableGap=function(M){};this.setArrNodes=function(M){z=M};this.getArrNodes=function(){return z};this.setSelectedNode=function(M){K=M;ha&&ha(M)};this.getSelectedNode=function(){return K};var N;this.updateUi=function(M){clearTimeout(N);N=setTimeout(function(){w||E();L()})};this.setFunItemPressedCallback=
function(M){ha=M};this.setFunDBClickedCallback=function(M){J=M};var E=function(){var M=w=$("<div>"),O=new V;O.setSearchListenerDelay(1E3);O.setShowSearchIcon(!0);O.setPlaceholder(ka.get("searchContent","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9"));O.setFontSize(12);O.addSearchListener(L);A=O;O=O.getJqUi();O.addClass("extreport-dataset-designer-tablearea-search-box");ra.layoutCtrlWithLRTB(O,0,0,null,0,0,30);O.appendTo(M);M=31+D.protectedGetTopGap(w);D.protectedCreateCtrlAtTop(w);O=new KTable;O.setCellRender(new m(O));
O.setTreeHandlerRender(new Ja(O));O.setSyncUIWhenModelChanged(!1);O.setColumnFitVisibleWidth(!1);O.setDraggableAdjusting(!0,3,0,new R);k=O;r=$(O.getUI());r.children().css("overflow-x","hidden");D.protectedCreateCtrlAtBottom(w);O=D.protectedGetBottomGap(w);ra.layoutCtrlWithLRTB(r,0,0,null,M,O,null);r.appendTo(w);w.addClass("extreport-dataset-designer-grey-border")};this.protectedCreateCtrlAtTop=function(M){};this.protectedGetTopGap=function(){return 0};this.protectedCreateCtrlAtBottom=function(M){};
this.protectedGetBottomGap=function(){return 0};this.protectedUpdateTableCallBack=function(M){};this.protectedGetNoTableUi=function(M,O,qa){return wa.initNoDataUi(void 0,ka.get("noTable","\u6682\u65e0\u53ef\u7528\u7684\u6570\u636e\u8868"))};this.protectedShowOrHideTips=function(M,O){};this.protectedCanShowNoTableUi=function(){return!0};var C=function(M){D.protectedShowOrHideTips(y,M);y?M?(v||(v=wa.initNoDataUi(void 0,ka.get("noSearchResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c")),
ra.layoutCtrlWithLRTB(v,1,1,null,30,0,null),v.appendTo(w)),$(k.getUI()).hide(),G&&G.hide(),v.show()):(G&&G.hide(),v&&v.hide(),$(k.getUI()).show()):M?(G||(G=D.protectedGetNoTableUi(w,M,y),G.appendTo(w)),$(k.getUI()).hide(),v&&v.hide(),D.protectedCanShowNoTableUi()?G.show():G.hide()):(G&&G.hide(),v&&v.hide(),$(k.getUI()).show())},L=function(){y=$.trim(A.getText());P=[];if(z&&0<z.length){P=[];if(y)for(var M=0;M<z.length;M++){var O=z[M];0===O.getSubNodeLevel()&&(P=P.concat(q(O,y,!1)))}else P=z;if(0<P.length){if(K){M=
!1;O=K.getName();for(var qa=K.getDisplayName(),oa,Q=0;Q<P.length;Q++){var da=P[Q],S=da.getName(),ca=da.getDisplayName();!oa&&(S&&0<=S.toUpperCase().indexOf(y.toUpperCase())||ca&&0<=ca.toUpperCase().indexOf(y.toUpperCase()))&&(oa=da);if(O&&O===S&&(0<=O.toUpperCase().indexOf(y.toUpperCase())||qa&&0<=qa.toUpperCase().indexOf(y.toUpperCase()))){M=!0;break}}M||D.setSelectedNode(oa?oa:z[0])}else D.setSelectedNode(z[0]);C(!1);Ea.clear(k);1E3<P.length&&k.setLargeDataMode(!0,!1);k.addColumn().setWidth(w.prop("offsetWidth")-
4-9);oa=k;M=P;if(0!=M.length){O=!1;var d;qa=M;for(Q=0;Q<M.length&&K;Q++)if(da=M[Q],K.getName()==da.getName()){O=!0;S=da;qa=M;Q=[];for(da=[];S;)da.push(S.getParentNode()),S=S.getParentNode();for(S=0;S<qa.length;S++)ca=qa[S],-1!=da.indexOf(ca.getParentNode())&&Q.push(ca);qa=Q;break}for(Q=0;Q<M.length;Q++){da=M[Q];S=oa.addRow();S.setHeight(30);S.setHide(!1);ca=S.getCell(0);ca.setValue(da);K&&K.getName()==da.getName()&&(ca.setUserObject(!0),I=S);0==Q&&(d=ca);var h=da.getSubNodeLevel(),e=h=new KTCellTreeModel(h),
a=e.setExpanded;a:{var c=da;var f=qa;if(y)f=!0;else{if(c.hasChildren()){c=c.getChildren();for(var g=0;g<c.length;g++)if(-1!=f.indexOf(c[g])){f=!0;break a}}f=!1}}a.call(e,f);ca.setTreeModel(h);y?S.setHide(!1):S.setHide(-1==qa.indexOf(da))}!O&&d&&d.setUserObject(!0)}Ea.refresh(k);D.protectedUpdateTableCallBack(k);B();return}D.setSelectedNode(null)}C(!0)};this.protectedIsNodeMatch=function(M,O){var qa=O.getName();O=O.getDisplayName();return qa&&0<=qa.toUpperCase().indexOf(M.toUpperCase())||O&&0<=O.toUpperCase().indexOf(M.toUpperCase())};
var q=function(M,O,qa){var oa=[],Q=!1;if(D.protectedIsNodeMatch(O,M)||qa)oa.push(M),Q=qa=!0;for(var da=M.getChildren?M.getChildren():[],S=0;S<da.length;S++){var ca=q(da[S],O,qa);0<ca.length&&(Q||(oa.push(M),Q=!0),oa=oa.concat(ca))}return oa};this.scrollToSpecifiedNode=function(M){z&&0!=z.length&&M&&(M=z.indexOf(M),0<=M&&(M=k.getRow(M)))&&(I=M,B())};var t;this.scrollToSelectedNode=function(){clearTimeout(t);t=setTimeout(function(){B()})};var B=function(){if(I){var M=k.getRowIndex(I);0<=M&&k.scrollCellVisible(M,
0,!0)}},F=function(M,O){if(K){var qa=K,oa=r.find(".wizard-tablearea-table-item_selected");if(oa){var Q=oa.find(".extreport-dataset-designer-tablearea-table-icon");(qa=D.getIconNameByNode(qa))&&Fa.background(Q,qa);oa.removeClass("wizard-tablearea-table-item_selected");(oa=ma(oa))&&oa.removeClass("wizard-table-triangle-selected")}}D.setSelectedNode(O);Z(M,K)},Z=function(M,O){M.addClass("wizard-tablearea-table-item_selected");var qa=M.find(".extreport-dataset-designer-tablearea-table-icon");(O=D.getIconNameByNode(O))&&
Fa.background(qa,O+"_selected");(M=ma(M))&&M.addClass("wizard-table-triangle-selected")},ma=function(M){var O=M.find(".table-right-triangle");0==O.length&&(O=M.find(".table-lower-triangle"));return O};this.getIconNameByNode=function(M){var O="";M instanceof fb?O="field":M instanceof ab?O=0==M.getSubNodeLevel()?"entity_head":"entity_sub":M instanceof jb&&(O="table");return O};this.protectedPaintCellItem=function(M){M.getName();var O=M.getDisplayName(),qa=$("<div>");qa.addClass("wizard-tablearea-table-item-context");
var oa=6,Q=D.getIconNameByNode(M);if(Q){M=M==K?"_selected":"";var da=$("<div>");da.addClass("extreport-dataset-designer-tablearea-table-icon");Q&&Fa.background(da,Q+M);da.appendTo(qa);oa+=18}Q=$("<div>");Q.attr("title",O);Q.addClass("wizard-tablearea-table-name");D.highlightKeyWords(Q,O);ra.layoutCtrlWithLRTB(Q,oa,4,null,7,null,null);Q.appendTo(qa);return qa};this.highlightKeyWords=function(M,O){La.highlightKeyWords(M,y,O)}};za.ChoosePropertyPane=function(){var m=[],D,w,r,v,G,k,A,y=!0,z=!1;this.setEnableNameShow=
function(I){y=I};this.setShowName=function(I){z=I};this.setItemModel=function(I){m=I};this.setListItemPainter=function(I){w=I};this.setFunGetSelectedIconName=function(I){r=I};this.setFunGetButtonName=function(I){v=I};this.setFunModelEqualsChecker=function(I){G=I};this.createJqPopup=function(I,ha,J){D=new Ma;D.setFontSize(12);k=$("<div>");k.appendTo(I);A=$("<div>");I=ka.get("search","\u641c\u7d22");var N=new V;N.setSearchListenerDelay(200);N.setPlaceholder(I);N.addSearchListener(function(){var t=m,
B=N.getText(),F=A,Z=P,ma=z;B=B.trim().toLowerCase();var M=[];if(B)for(var O=0;O<t.length;O++){var qa=t[O];qa&&(-1!=qa.getAlias().trim().toLowerCase().indexOf(B)?M.push(t[O]):ma&&-1!=qa.getName().trim().toLowerCase().indexOf(B)&&M.push(t[O]))}else M=M.concat(t);F.children().remove();if(0<M.length){for(O=0;O<M.length;O++)Z(M[O],F,ha);M.length=0}else t=new ta,t.setText(ka.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),t.setEnabled(!1),t.setAlign(ta.ALIGN_CENTER),t=t.getJqUi(),
t.addClass("wizard-field-popup-search-result"),t.appendTo(F)});I=N.getJqUi();I.addClass("wizard-field-popup-search");I.appendTo(k);A.addClass("wizard-field-popup-list-owner");A.on("click",function(t){var B=$(t.currentTarget);t=$(t.target);if(t=ra.upwardSearchHasClass(t,B,"wizard-field-popup-list-item"))t.addClass("wizard-list-item_selected_enabled"),B=t.data("model"),J(B)});A.appendTo(k);I=k.find(".sa-ctrl-textfield-input");I.css("top","0px");I.css("height","100%");for(I=0;I<m.length;I++)P(m[I],A,
ha,z);I=25*Math.max(Math.min(10,m.length),1);var E=I+25+4;if(y){E+=25;var C=new ta,L=v();C.setText(L);var q=D.measureWidth(L);C=C.getJqUi();C.attr("title",L);ra.layoutCtrlWithLRTB(C,8,null,q,0,10,23);L=new Ca;L.setOn(z);L.addStateChangeListener(function(t,B,F){z=F;A.empty();for(t=0;t<m.length;t++)P(m[t],A,ha,z)});L=L.getJqUi();ra.layoutCtrlWithLRTB(L,q+13,null,35,0,10,23);q=$("<div>");q.addClass("wizard-field-popup-show-field-name");L.appendTo(q);C.appendTo(q);q.appendTo(k)}else A.css("bottom","5px");
k.css("height",E+"px");A.css("height",I+"px");k.addClass("wizard-field-popup");return[-1,E]};var P=function(I,ha,J,N){var E=$("<div>"),C=$("<span>"),L=$("<div>");E.on("mouseenter",function(){E.addClass("wizard-field-popup-list-item-hover")});E.on("mouseleave",function(){E.removeClass("wizard-field-popup-list-item-hover")});E.addClass("wizard-field-popup-list-item");C.addClass("wizard-pane-join-table-selector-text");L.addClass("wizard-pane-join-table-selector-icon");E.append(L);E.append(C);ha.append(E);
E.data("model",I);I&&w(I,L,C,N);E.attr("title",C.text());I&&G(J,I)&&K(ha,E,L,I)},K=function(I,ha,J,N){var E=null;0<I.height()?(clearTimeout(E),ha.addClass("wizard-pane-join-table-selector-text-selected"),I.prop("scrollTop",ha.prop("offsetTop")),r&&Fa.background(J,r(N))):E=setTimeout(function(){K(I,ha,J,N)},0)}};za.SearchDropDown=function(m,D,w,r){xa.call(this);var v=this,G=m,k=w,A=D,y;(function(){v.setSelectedModel(G);v.setCustomPainter(function(z,P){P.empty();if(z){var K=$("<span>"),I=$("<div>");
"string"==typeof z?K.text(z):r(z,K,I);K.text()&&v.getJqUi().attr("title",K.text());K.addClass("wizard-pane-join-table-selector-text");I.addClass("wizard-pane-join-table-selector-icon");P.append(I);P.append(K)}else v.getJqUi().attr("title","")});v.setDropdownCreator(function(z,P,K){var I=new y;I.setModel(A);z=I.createJqUi(z,P,K);135>v.getJqUi().outerWidth()&&(z[0]=135);return z});v.addSelectionListener(function(z,P,K){(P=z.getSelectedModel())&&k(z,P)})})();this.setPaneClass=function(z){y=z};this.setAllModel=
function(z){A=z};this.setFunSelectedCallBack=function(z){k=z};this.setSelected=function(z){G=z}};za.DataTypeIconPainter=Ha;za.FieldDropPainter=function(){function m(){var y=[],z,P,K,I,ha,J=!1;this.setItemModel=function(N){y=N};this.setSearchListener=function(N){z=N};this.setListItemPainter=function(N){P=N};this.setShowFieldNameListener=function(N){K=N};this.createJqPopup=function(N,E,C){I=$("<div>");N.css("min-width","120px");I.appendTo(N);ha=$("<div>");var L=25*Math.max(Math.min(10,y.length),1);
N=L+25+25+4;I.css("height",N+"px");ha.css("height",L+"px");I.addClass("dataset-fields-popup");L=ka.get("search","\u641c\u7d22");var q=new V;q.setFontSize(12);q.setSearchListenerDelay(200);q.setPlaceholder(L);q.addSearchListener(function(){z(y,q.getText(),ha,E,P,J)});L=q.getJqUi();L.addClass("wizard-field-popup-search");L.appendTo(I);ha.addClass("dataset-fields-popup-list-owner");ha.on("click",function(F){var Z=$(F.currentTarget);F=$(F.target);if(F=ra.upwardSearchHasClass(F,Z,"dataset-fields-popup-list-item"))F.addClass("wizard-list-item_selected_enabled"),
C(F.data("model"))});ha.appendTo(I);L=I.find(".sa-ctrl-textfield-input");L.css("top","0px");L.css("height","100%");for(L=0;L<y.length;L++)P(y[L],ha,E,!1);L=new ta;var t=ka.get("showFieldName","\u663e\u793a\u5b57\u6bb5\u540d\u79f0");L.setText(t);L=L.getJqUi();L.attr("title",t);ra.layoutCtrlWithLRTB(L,8,null,100,0,10,25);t=new Ca;t.addStateChangeListener(function(F,Z,ma){(J=ma)?K&&K(ha,!0):K&&K(ha,!1)});t.setOn(!1);t=t.getJqUi();ra.layoutCtrlWithLRTB(t,null,5,35,0,10,25);var B=$("<div>");B.addClass("wizard-field-popup-show-field-name");
t.appendTo(B);L.appendTo(B);B.appendTo(I);return[-1,N]}}Ha.call(this);var D=this,w;this.setSelectionListener=function(y){w=y};this.doPaint=function(y,z,P,K,I,ha,J,N){var E=new m,C=y.getAllColumns();E.setItemModel(C);E.setListItemPainter(r);E.setSearchListener(v);E.setShowFieldNameListener(G);y=Ea.createCtrlInCell(z,P,K,xa);y.setUserObject(I);y.setSelectedModel(ha);y.setDropdownCreator(function(L,q,t){if(J&&N){var B=E.setItemModel,F;if((F=N())&&0!==F.length){for(var Z=[],ma=0;ma<C.length;ma++){var M=
C[ma];0>F.indexOf(M.getName())&&Z.push(M)}F=Z}else F=C;B.call(E,F)}return E.createJqPopup(L,q,t)});y.addSelectionListener(function(L){w&&w(L)});y.setCustomPainter(k(I.getUserObject()))};var r=function(y,z,P){var K=$("<div>");K.addClass("dataset-fields-popup-list-item");K.data("model",y);var I=$("<span>");D.doPaintIcon(I,y.getDataType());I.addClass("dataset-fields-list-dataType-icon");K.append(I);I=$("<span>");var ha=y.getAlias(),J=y.getName(),N=ha+"("+J+")";I.text(N);I.attr("title",N);I.addClass("dataset-fields-popup-list-item-text");
I.data("nameAliasPair",{alias:ha,name:y.isCalcColumn()?ha:J});K.append(I);z.append(K);P&&P.getName()===y.getName()&&A(z,K)},v=function(y,z,P,K,I,ha){z=z.trim().toLowerCase();for(var J=[],N,E=0;E<y.length;E++)N=y[E],(N=-1!==N.getAlias().trim().toLowerCase().indexOf(z)?!0:ha&&-1!==N.getName().trim().toLowerCase().indexOf(z))&&J.push(y[E]);P.children().remove();if(0<J.length){for(y=0;y<J.length;y++)I(J[y],P,K);J.length=0}else K=new ta,K.setText(ka.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),
K.setEnabled(!1),K.setAlign(ta.ALIGN_CENTER),K=K.getJqUi(),K.addClass("wizard-field-popup-search-result"),K.appendTo(P);G(P,ha)},G=function(y,z){y=y.find(".dataset-fields-popup-list-item-text");if(z)for(z=0;z<y.length;z++){var P=y.eq(z),K=P.data("nameAliasPair");K=K.alias+"("+K.name+")";P.text(K);P.attr("title",K)}else for(z=0;z<y.length;z++)P=y.eq(z),K=P.data("nameAliasPair"),K=K.alias,P.text(K),P.attr("title",K)},k=function(y){return function(z,P){P.text("");if(z){var K=z.getDataType();if(K){var I=
$("<div>");D.doPaintIcon(I,K);I.addClass("dataset-fields-select-filter-dataType-icon");P.append(I)}K=$("<div>");K.addClass("dataset-fields-select-filter-dataType-text");z=z&&!z.isEmpty()?z.getAlias():y?y.getField():"";K.text(z);K.attr("title",z);P.append(K)}}},A=function(y,z){var P=null;0<y.height()?(clearTimeout(P),z.addClass("wizard-list-filter_selected_enabled"),y.prop("scrollTop",z.prop("offsetTop"))):P=setTimeout(function(){A(y,z)},0)}};za.CheckBoxTable=function(){function m(){R.call(this);this.isColumnDraggable=
function(E,C){return 0===C||E.getColumnsCount()==C+1?!1:!0}}function D(E){KTDefaultCellRender.call(this,E);var C=this,L=this.paintCellUI,q;this.paintCellUI=function(t,B){var F=C.getCurrentRowIdx(),Z=C.getCurrentRow(),ma=C.getCurrentColIdx(),M=Z.getUserObject(),O=F-Ea.getHeadRowCount(),qa=w.protectGetTableModelList();F<Ea.getHeadRowCount()?(L(t,B),1===F&&0===ma&&(B=q&&q.isChecked()?!0:!1,q=new Aa,q.setChecked(B&&0<w.protectGetTableModelList().length),q.setUserObject([]),q.addCheckedListener(function(oa,
Q){if(Q)if(Q=oa.isChecked(),oa=oa.getUserObject(),Q){r={};for(var da=0;da<qa.length;da++){r[da]=qa[da];var S=oa[da];S.setChecked(Q)}}else for(r={},da=0;da<oa.length;da++)S=oa[da],S.setChecked(Q)}),B=q.getJqUi(),ra.layoutCtrlCenterAlign(B,14),ra.layoutCtrlWithLRTB(B,null,null,14,null,null,null),$(t).append(B))):0===ma?(t=$(t),F=new Aa,F.setUserObject(M),(B=q&&q.isChecked())?(F.setChecked(B),r[O]=qa[O]):r[O]?F.setChecked(!0):F.setChecked(!1),B=F.getJqUi(),F.addCheckedListener(function(oa,Q){Q&&(oa=
oa.isChecked(),Q=w.protectGetTableModelList(),oa?(r[O]=M,Object.keys(r).length===Q.length&&q.setChecked(!0)):(delete r[O],q.setChecked(!1)))}),q&&q.getUserObject().push(F),ra.layoutCtrlCenterAlign(B,14),ra.layoutCtrlWithLRTB(B,null,null,14,2,null,null),t.append(B)):1===ma?(t=$(t),B=C.getCell().getValue(),t.text(B),t.css({"text-align":"center","line-height":"25px"})):w.protectedPaintCell(F,ma,Z,t,C)}}var w=this,r={},v,G,k,A,y,z,P=!0,K;this.getJqUi=function(){if(!v){v=$("<div>");var E=$("<div>"),C=
new ta;w.protectedSetTitleStyle(C,E);C=C.getJqUi();E.append(C);ra.layoutCtrl(C,null,4);E.addClass("extreport-dataset-designer-param-btn-area");C=I("extreport-dataset-designer-param-btn",w.deleteParam);C.css("right","2px");C.addClass("extreport-dataset-designer-param-btn-remove");Fa.background(C,"delete");var L=I("extreport-dataset-designer-param-btn",ha);L.css("right","24px");Fa.background(L,"add");var q=I("extreport-dataset-designer-param-btn",J);q.css("right","44px");Fa.background(q,"down");var t=
I("extreport-dataset-designer-param-btn",N);t.css("right","66px");Fa.background(t,"up");E.append(C);E.append(L);E.append(q);E.append(t);P||(C.hide(),L.hide(),q.hide(),t.hide());k=C;A=L;y=q;z=t;ra.layoutCtrlWithLRTB(E,10,10,null,0);C=Ea.createTable();C.setSyncUIWhenModelChanged(!1);C.setDraggableAdjusting(!0,2,0,new m);L=new D(C);L.setOutsideVisible(!1);C.setCellRender(L);P&&Ea.bindTableListenerForCtrl(C);L=$(C.getUI());ra.layoutCtrlWithLRTB(L,10,10,null,10,10,null);q=$("<div>");q.addClass("extreport-dataset-designer-param-detail-edittable");
ra.layoutCtrl(q,null,30,null,130);C.setSyncUIWhenModelChanged(!0);q.append(L);w.protectedInitTable(C);K=C;G=q;v.append(E);v.append(q);ra.layoutCtrlWithLRTB(v,0,0,null,null,null,160)}return v};this.setEnabled=function(E){P=E;v&&(P?(k.show(),A.show(),y.show(),z.show()):(k.hide(),A.hide(),y.hide(),z.hide()))};this.protectGetTableModelList=function(){};this.protectedGetTableColNumber=function(){};this.protectedSetHeadWidthAndValue=function(E,C){};this.protectedSetCellValue=function(E,C){};this.protectedDeleteRowsCallBack=
function(E){};this.protectedAddBtnCallBack=function(){};this.protectedPaintCell=function(E,C,L,q,t){};this.protectedSyncTableHeight=function(E){};this.protectedInitTable=function(E){};this.protectedSetTitleStyle=function(E,C){};this.getTable=function(){return K};this.updateTable=function(){Ea.clear(K);K.setSyncUIWhenModelChanged(!1);K.addColumns(w.protectedGetTableColNumber());K.getColumn(0).setWidth(40);K.getColumn(1).setWidth(40);var E=Ea.createHeadRow(K);E.getCell(1).setValue("#");w.protectedSetHeadWidthAndValue(K,
E);E=w.protectGetTableModelList();var C=E.length;if(!C||3>=C){K.setScrollerVisible(!1,!1);var L=130}else 10<=C?(K.setScrollerVisible(!1,"auto"),L=305):L=25*(C-3)+130;G.css("height",L);v.css("height",L+36);w.protectedSyncTableHeight(L);for(L=0;L<C;++L){var q=E[L],t=Ea.createRow(K);t.getCell(1).setValue(L+1);w.protectedSetCellValue(t,q);t.setHeight(25);t.setUserObject(q)}K.setSyncUIWhenModelChanged(!0);Ea.refresh(K)};var I=function(E,C){var L=$("<div>");L.addClass(E);L.on("click",C);return L};this.getSelectedCount=
function(){return Object.keys(r).length};this.deleteParam=function(E){var C=w.protectGetTableModelList();if(0===w.getSelectedCount())E.preventDefault();else{E=Object.values(r);for(var L=[],q=0;q<E.length;q++){var t=C.indexOf(E[q]);-1!==t&&(L.push(C[t]),C.splice(t,1))}w.protectedDeleteRowsCallBack(L);r={};w.updateTable()}};var ha=function(){w.protectedAddBtnCallBack();w.updateTable()},J=function(E){0===Object.keys(r).length?E.preventDefault():(ua.moveSelectedDown(w.protectGetTableModelList(),r),w.updateTable())},
N=function(E){0===Object.keys(r).length?E.preventDefault():(ua.moveSelectedUp(w.protectGetTableModelList(),r),w.updateTable())}};za.SystemAndMacroVarArea=function(m,D,w){var r=this,v,G,k=!1,A,y,z=[],P=[],K="",I,ha=[],J=[],N,E,C;this.init=function(){if(!k){var Q=L();I=new V;I.setPlaceholder(ka.get("searchContent","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9"));I.setShowSearchIcon(!0);I.setSearchListenerDelay(1E3);I.addSearchListener(q);I.setFontSize(12);G=I.getJqUi();G.addClass("extreport-dataset-designer-var-select-filter-searchBox");
G.addClass("extreport-dataset-designer-left-border");v=t();v.addClass("extreport-dataset-designer-left-border");Q.on("click",function(){r.loadMacroAndSystemVar(A.searchVarMenu,C)});Q.appendTo(w);v.appendTo(D);G.appendTo(D);k=!0}};var L=function(){var Q=$("<div>");Q.attr("title",ka.get("refresh","\u5237\u65b0"));Q.css({cursor:"pointer"});Fa.backgroundWithHover(Q,"refresh");ra.layoutCtrlWithLRTB(Q,null,4,16,1,null,16);return Q},q=function(){K=I.getText().trim().toLowerCase();r.searchListener()};this.resize=
function(){k&&A&&A.updateUi()};this.searchListener=function(){y=[];Z();ma(A.searchVarMenu,C)};var t=function(){A=new oa;A.setTreeVarModel(y);A.setMessageCurtain(void 0);A.setGlobal(m);A.setLoadVarNameListener(qa);A.setCheckMacroPerm(M);var Q=A.getJqUi();Q.addClass("extreport-dataset-designer-var-select-tree-data");Q.addClass("extreport-dataset-designer-bottom-border");return Q};this.loadMacroAndSystemVar=function(Q,da){B(function(){F(Q,da)})};var B=function(Q){y=[];var da=m.createQueryFacade(function(S){J=
[];z=[];if(0<S.length){J=S;for(var ca=0;ca<S.length;ca++){var d=new Va;d.fromJsonObject(S[ca]);z.push(d.getName())}}Z();m.fireEvent(Ia.QUERY_AREA_ADD_AT_HINT_TYPE,{hint:z,type:"sysVar"})},function(S,ca){return 8077E3<S?(m.getMessageCurtain().showPrompt(ca,5E3),!0):!1},function(){Q&&Q()});da.setShowBlocking(!1);da.loadSystemVar()},F=function(Q,da){var S=m.createMacroManageFacade(function(ca){ha=[];P=[];if(0<ca.length){ha=ca;for(var d=0;d<ca.length;d++){var h=new Oa;h.fromJsonObject(ca[d]);h.isUsable()&&
P.push(h.getUid())}}ma(Q,da);m.fireEvent(Ia.QUERY_AREA_SET_DOLLAR_HINT_TYPE,P)},function(ca,d){return 8077E3<ca?(m.getMessageCurtain().showPrompt(d,5E3),!0):!1});S.setBlockingJqUi(D);S.loadAllMacros()},Z=function(){if(0<J.length){E=new Va;E.setDisPlayName(ka.get("systemVar","\u7cfb\u7edf\u53d8\u91cf"));for(var Q=E.getChildren(),da=0;da<J.length;da++){var S=new Va;S.fromJsonObject(J[da]);var ca=S,d=K,h=!1,e=ca.getName();ca=ca.getText();if(e&&-1<e.toUpperCase().indexOf(d.toUpperCase())||ca&&-1<ca.toUpperCase().indexOf(d.toUpperCase()))h=
!0;h&&(S.setParentNode(E),Q.push(S))}0==Q.length&&(E=null);O(y,E)}},ma=function(Q,da){if(0<ha.length){N=new Oa;N.setDisPlayName(ka.get("macroVar","\u5b8f\u53d8\u91cf"));N.setLevel(0);var S=new Oa;S.setDisPlayName(ka.get("singleMacro","\u5355\u503c\u5b8f"));S.setLevel(1);var ca=new Oa;ca.setDisPlayName(ka.get("multiMacro","\u591a\u503c\u5b8f"));ca.setLevel(1);var d=N.getChildren();d.push(S);d.push(ca);S.setParentNode(N);ca.setParentNode(N);S=N.getChildren();ca=[];d=[];for(var h=S[0],e=S[1],a=0;a<ha.length;a++){var c=
new Oa;c.fromJsonObject(ha[a]);c.isUsable()&&P.push(c.getUid());c.setDisPlayName(c.getName()+"("+c.getUid()+")");c.setLevel(2);var f=c,g=K,p=!1,n=f.getName();f=f.getUid();if(n&&-1<n.toUpperCase().indexOf(g.toUpperCase())||f&&-1<f.toUpperCase().indexOf(g.toUpperCase()))p=!0;p&&(c.isMultiValued()?(d.push(c),c.setParentNode(e)):(ca.push(c),c.setParentNode(h)))}0<ca.length?h.setChildren(ca):S.splice(0,1);0<d.length?e.setChildren(d):2==S.length?S.splice(1,1):S.splice(0,1);0==S.length&&(N=null);O(y,N)}da&&
da(y);Q&&Q()},M=function(Q){var da=m.createMacroManageFacade(function(S){Q&&Q(S)},function(S,ca){return 8077E3<S?(m.getMessageCurtain().showPrompt(ca,5E3),!0):!1});da.setBlockingJqUi(D);da.checkMacroPermission()},O=function(Q,da){if(null!=da)if(Array.isArray(da))for(var S=0;S<da.length;S++)Q.push(da[S]),O(Q,da[S].getChildren());else Q.push(da),O(Q,da.getChildren())},qa=function(Q){C=Q;y?Q(y):r.loadMacroAndSystemVar(A.searchVarMenu,Q)},oa=function(){var Q=this,da,S,ca,d,h,e,a,c;this.getJqUi=function(){da||
(da=Q.init());return da};this.setGlobal=function(T){a=T};this.init=function(){var T=$("<div>");e=wa.initNoDataUi(T,ka.get("noVariant","\u6682\u65e0\u53d8\u91cf"));e.hide();ca||(h(g),d(f));S=new na;S.setBorderVisible(!1);S.scrollSelectedToVisible();S.setCustomItemPainter(H);S.addSelectedChangedListener(Wa);S.setUserObject(ca);S.setItemModels(ca);S.setCustomSelectedsPainter(u);T.append(S.getJqUi());return T};var f=function(T){ca=[];Q.resetItemModels(T)},g=function(T){c=T};this.resetItemModels=function(T){ca=
T;S.setUserObject(ca);S.setItemModels(ca);Q.refreshList(S.getUserObject());T=p(ca);S.setSelecteds([]);S.setSelecteds(T)};var p=function(T){var x=[],pa;for(pa in T){var va=T[pa];if(va instanceof Va&&1==va.getLevel()){x.push(va);break}if(va instanceof Oa&&va.getUid()){x.push(va);break}}return x};this.searchVarMenu=function(){ca&&0!=ca.length&&(null!=K&&""!=K||n(S.getUserObject()),0<ca.length?n(ca):Q.refreshList(S.getUserObject()))};var n=function(T){for(var x in T){var pa=T[x];if(!pa.getShowFolderNode()){pa.setShowFolderNode(!0);
for(var va=pa.getParentNode();va;)va.setShowFolderNode(!0),va.setIsOpenDir(!0),pa=va,va=va.getParentNode();Ta(pa)}}T=p(T);Q.jumpToTheSelected(T[0])};this.jumpToTheSelected=function(T){Q.refreshList(S.getUserObject());S.setSelecteds([]);S.setSelecteds([T]);S.scrollSelectedToVisible(T)};var u=function(T,x){x&&0<x.length&&(T&&0<T.length&&(T=T[0].find(".extreport-dataset-designer-var-preview-icon"),Fa.backgroundWithHover(T,"btn_preview")),T=x[0].find(".extreport-dataset-designer-var-preview-icon"),Fa.backgroundWithHover(T,
"btn_preview_selected"))},H=function(T,x){T.addClass("extreport-dataset-designer-var-lists-dir");var pa=$("<div>"),va=x.getDisPlayName();pa.css("margin-left",6*x.getLevel()+"px");la(T,x,pa);var Na=x instanceof Va;if(Na=Na&&0==x.getLevel()||!Na&&1>=x.getLevel())pa.css({cursor:"default"}),na.undressItem(T);var Ka=$("<div>");Ka.addClass("extreport-dataset-designer-var-lists-dir-opt-icon");Ka.css("margin-left",6*x.getLevel()+"px");Ka.data("oItemModel",x);var Xa=U(x,T,pa),Ua=W(),ib=ja();x instanceof Oa&&
0==x.getLevel()&&(T.append(Ua),c?(Fa.backgroundWithHover(Ua,"macromanage"),Ua.addClass("extreport-dataset-designer-var-macromanage-icon")):(Fa.background(Ua,"macromanage"),Ua.addClass("extreport-dataset-designer-var-macromanage-icon-disabled")));x.getShowFolderNode()?(T.show(),Ka.on("mousedown",function(Pa){Pa.stopPropagation();if(Pa=$(Pa.currentTarget).data("oItemModel")){if(Pa.getChildren()&&0<Pa.getChildren().length){var db=Pa.getIsOpenDir();Pa.setIsOpenDir(!db)}else Pa.setIsOpenDir(!0);Ta(Pa);
Q.refreshList(S.getUserObject());Pa=S.getSelecteds();S.setSelecteds([]);S.setSelecteds(Pa)}})):T.hide();Ua=x.getIsOpenDir();Na&&(Ua?Da(!0,Ka):Da(!1,Ka));0<x.getChildren().length?(pa.text(va),T.append(Ka)):(x instanceof Va?T.append(Xa):x instanceof Oa&&(x.isUsable()?T.append(Xa):T.append(ib)),La.highlightKeyWords(pa,K,va));va=x instanceof Oa&&!x.isUsable();if(!Na&&!va){var kb=pa.width();T.on("mouseenter",function(Pa){Pa=T.width()-60;kb=pa.width();pa.css("width",Pa)});T.on("mouseleave",function(Pa){pa.css("width",
kb)})}T.append(pa);x==S.getSelecteds()[0]&&(T.addClass("extreport-dataset-designer-var-lists-item-selected"),T.addClass("sa-ctrl-list-item_selected_enabled"),Ka.addClass("extreport-dataset-designer-var-lists-dir-opt-icon-selected"));T.on("dblclick",function(Pa){var db;x.getUid&&x.isUsable&&1<x.getLevel()?x.isUsable()&&(db="$"+x.getUid()):!(x instanceof Oa)&&0<x.getLevel()&&(db="@"+x.getName());db&&a.fireEvent(Ia.QUERY_AREA_INSERT_TYPE,db)})},la=function(T,x,pa){1<x.getLevel()?x.isUsable()?pa.addClass("extreport-dataset-designer-var-lists-dir-text"):
(pa.addClass("extreport-dataset-designer-var-lists-dir-text-noperm"),na.undressItem(T)):pa.addClass("extreport-dataset-designer-var-lists-dir-text")},U=function(T,x,pa){var va=$("<div>");va.addClass("extreport-dataset-designer-var-preview-icon");Fa.backgroundWithHover(va,"btn_preview");va.attr("title",ka.get("preview","\u9884\u89c8"));va.on("click",function(Na){Na.stopPropagation();T instanceof Oa?(Na=new X(a,T,!0),Na.setFunPreviewCallback(function(Ka){Ka||(T.setMacroStatus(null),pa.addClass("extreport-dataset-designer-var-lists-dir-text-noperm"),
x.prepend(ja()),na.undressItem(x))})):Na=new X(a,T);Na.showDialog()});return va},ja=function(){var T=$("<div>");T.addClass("extreport-dataset-designer-var-macroperm-icon");Fa.background(T,"macronoperm");T.attr("title",ka.get("previewNoPerm","\u5f02\u5e38\u5b8f\u53d8\u91cf\u65e0\u6cd5\u5728\u67e5\u8be2\u8bed\u53e5\u4e2d\u4f7f\u7528\u3002"));return T},W=function(){var T=$("<div>");T.attr("title",ka.get("macroManager","\u5b8f\u5b9a\u4e49"));T.on("click",function(x){x.stopPropagation();if(c){var pa=Qa.decodeParamFromUrl(location.search,
"path");pa=pa?pa:"/ierp";x=ba.getUrlParamValue();var va=Y.getUrlParamValue("language");pa=Qa.appendParamToUrl(pa+"/qing/macroDesignerEntrance.do","appID","qing_rpt");pa=Qa.appendParamToUrl(pa,"language",va);x&&(pa=Qa.appendParamToUrl(pa,"skin",x));Za.openNewTab(ka.get("macroManager","\u5b8f\u5b9a\u4e49"),pa)}});return T},Da=function(T,x){var pa=document.createElement("div"),va=$(pa);va.text("\u25b2");va.addClass("extreport-dataset-designer-header-expand");va.removeClass(T?"extreport-dataset-designer-header-expand_able":
"extreport-dataset-designer-header-expand_ed");va.addClass(T?"extreport-dataset-designer-header-expand_ed":"extreport-dataset-designer-header-expand_able");$(pa).appendTo(x);T&&(T=parseInt(x.css("margin-left")),x.css({"margin-left":T+2+"px"}))},Wa=function(T,x,pa){if(T=pa[0]){pa=S;x=x[0];var va=pa.getJqUi().find(".extreport-dataset-designer-var-lists-item-selected");va&&(va.removeClass("extreport-dataset-designer-var-lists-item-selected"),va=va.find(".extreport-dataset-designer-var-lists-dir-opt-icon-selected"),
x&&Da(x.getIsOpenDir(),va),va&&0<va.length&&(va.removeClass("extreport-dataset-designer-var-lists-dir-opt-icon-selected"),va.css("color","rgb(138, 158, 191)")));if(pa=pa.getItemUiByModel(T))x=pa.find(".extreport-dataset-designer-var-lists-dir-opt-icon"),pa.addClass("sa-ctrl-list-item_selected_enabled"),pa.addClass("extreport-dataset-designer-var-lists-item-selected"),Da(T.getIsOpenDir(),x),x.addClass("extreport-dataset-designer-var-lists-dir-opt-icon-selected"),x.css("color","white"),T.getChildren()&&
0>=T.getChildren().length&&Da(!0,x)}},Ta=function(T){if(null!=T&&(T=T.getChildren())&&0<T.length)for(var x=0;x<T.length;x++)T[x].getParentNode().getIsOpenDir()&&T[x].getParentNode().getShowFolderNode()?T[x].setShowFolderNode(!0):T[x].setShowFolderNode(!1),Ta(T[x])};this.refreshList=function(T){var x=da.find(".sa-ctrl-list-owner");x.empty();if(1>=T.length)x=ka.get("noSearchResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"),T=e.find("#noDataText"),T.text(x),x=12*x.length,
ra.layoutCtrlCenterAlign(T,160<x?160:x),e.show();else{e.hide();for(var pa=$(document.createDocumentFragment()),va=H,Na=0;Na<T.length;Na++){var Ka=$("<div>");Ka.addClass("sa-ctrl-list-item");Ka.addClass("sa-ctrl-list-item_enabled");Ka.addClass("sa-ctrl-list-item-defaultlayout");var Xa=T[Na];Ka.data("model",Xa);va(Ka,Xa);pa.append(Ka)}x.append(pa)}};this.updateUi=function(){var T=da.find(".sa-ctrl-list-owner");T.find(".extreport-dataset-designer-var-lists-dir-text-noperm").css({width:"70%"});T.find(".extreport-dataset-designer-var-lists-dir-text").css({width:"85%"})};
this.setTreeVarModel=function(T){ca=T};this.setMessageCurtain=function(T){};this.setLoadVarNameListener=function(T){d=T};this.setCheckMacroPerm=function(T){h=T}}};za.QueryArea=function(m){var D=this,w,r,v,G,k=[],A,y={},z={},P=[],K=[],I=[],ha=[];this.getJqUi=function(){w||(w=$("<div>"),w.css({"margin-top":"25px","line-height":"150%"}),w.addClass("extreport-dataset-designer-left-border"),w.addClass("extreport-dataset-designer-right-border"),r=$("<textarea>").attr("id","sqlEditor"),r.appendTo(w));return w};
this.setDataSetModel=function(q){A=q};this.getDataSetModel=function(){return A};this.setSqlEditorContent=function(q){v.setValue(q);v.setCursor(v.lineCount(),0);E(q)};this.getSqlContent=function(){return v.getValue()};this.initSqlEditor=function(q,t,B){0!=document.body.clientHeight&&0!=document.body.clientWidth&&document.getElementById(r.attr("id"))&&(q||t||!A||(q=A.getContent(),t="text/k-sql",A.getDataSetType()==Ya.OQL_DATASET&&(t="text/o-sql")),v||(q||(q="SELECT * FROM"),t||(t="text/k-sql"),q=q.trim(),
r.val(q),v=CodeMirror.fromTextArea(document.getElementById(r.attr("id")),{mode:t,lineNumbers:!0,theme:"idea",hint:CodeMirror.hint.sql,lineWrapping:!0,autofocus:!0,foldGutter:{rangeFinder:new CodeMirror.fold.combine(CodeMirror.fold.indent,CodeMirror.fold.comment)},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],hintOptions:{tables:{}}}),v.on("keyup",function(F,Z){E(v.getValue());!F.state.completionActive&&(65<=Z.keyCode&&90>=Z.keyCode||50==Z.keyCode||52==Z.keyCode||190==Z.keyCode)&&CodeMirror.commands.autocomplete(F,
N,{completeSingle:!1})}),v.on("change",function(F,Z){E(v.getValue())}),v.setSize("100%","100%"),v.setCursor(v.lineCount(),0),E(q),q=function(F){F&&(v.replaceSelection(F),E(v.getValue()))},m.addListener(Ia.QUERY_AREA_INSERT_TYPE,q),k.push(J(Ia.QUERY_AREA_INSERT_TYPE,q)),q=function(F){F&&D.setHintTables(F)},m.addListener(Ia.QUERY_AREA_SET_HINT_TYPE,q),k.push(J(Ia.QUERY_AREA_SET_HINT_TYPE,q)),q=function(F){F&&D.addHintTables(F)},m.addListener(Ia.QUERY_AREA_ADD_HINT_TYPE,q),k.push(J(Ia.QUERY_AREA_ADD_HINT_TYPE,
q)),q=function(F){F&&D.setHintDollarVariables(F)},m.addListener(Ia.QUERY_AREA_SET_DOLLAR_HINT_TYPE,q),k.push(J(Ia.QUERY_AREA_SET_DOLLAR_HINT_TYPE,q)),q=function(F){F&&D.addHintAtVariables(F)},m.addListener(Ia.QUERY_AREA_ADD_AT_HINT_TYPE,q),k.push(J(Ia.QUERY_AREA_ADD_AT_HINT_TYPE,q))),G=B)};var J=function(q,t){return function(){m.addListener(q,t)}};this.close=function(){for(var q=0;q<k.length;q++){var t=k[q];t&&t()}};this.setHintTables=function(q){y=q;z={};for(var t=Object.keys(q).splice(0,1E3),B=
0;B<t.length;B++){var F=t[B];z[F]=q[F]}C()};this.addHintTables=function(q){z=$.extend({},z,q);C()};this.addHintAtVariables=function(q){var t=q.hint;"param"==q.type?I=t:K=t;P=L(I,K);v.setOption("atHintOptions",{atVariables:P})};this.setHintDollarVariables=function(q){ha=q;v.setOption("dollarHintOptions",{dollarVariables:ha})};this.adjustSqlEditorHeight=function(q){v&&v.setSize("height",q-26+"px")};this.formatSelectedSqlContent=function(){try{var q=v.getSelection();if(q)v.replaceSelection(sqlFormatter.format(q,
{language:"mysql"}));else{var t=v.getValue();v.setValue(sqlFormatter.format(t,{language:"mysql"}))}E(v.getValue())}catch(B){}};this.commentSelectedSqlContent=function(){try{var q=v.getSelection(),t=q;if(Ga.isNotEmptyStr(q))t=q.startsWith("/*")?q.replace("/*","").replace("*/",""):"/*"+q+"*/",v.replaceSelection(t);else{var B=v.getCursor();q=v.getLine(B.line);Ga.isNotEmptyStr(q)&&(t=q.startsWith("-- ")?q.replace("-- ",""):q.startsWith("--")?q.replace("--",""):"-- "+q,v.replaceRange(t,{line:B.line,ch:0},
{line:B.line,ch:q.length}))}E(v.getValue())}catch(F){}};var N=function(q){if(A&&A.getDataSetType()==Ya.OQL_DATASET)return q.showHint({completeSingle:!1});var t=(t=v.getValue())?hb.parseTable(t):[];if(t&&0<t.length){for(var B=[],F=0;F<t.length;F++){var Z=t[F],ma=y[Z];ma&&0==ma.length&&((ma=z[Z])&&0!=ma.length||B.push(Z))}0<B.length?D.protectedGetHintInSql(q,B):q.showHint({completeSingle:!1})}else q.showHint({completeSingle:!1})};this.protectedGetHintInSql=function(q,t){throw Error("Override me!");
};var E=function(q){q&&(q=q.trim());if(A){var t=A.getContent();t&&(t=t.trim());t!=q&&(A.setContent(q),G&&G())}},C=function(){v.setOption("hintOptions",{tables:z})},L=function(q,t){q=q.concat(t);return q=q.filter(function(B,F){return q.indexOf(B)==F})}};za.AppChooseDialogSelector=function(){var m,D,w=$("<div>"),r=new ya,v=r.getJqUi(),G;this.getJqUi=function(){D||(D=$("<div>"),r.setText(A()),r.setReadonly("readonly"),v.find(".sa-ctrl-textfield-input").css({"font-size":"12px"}),v.on("click",y),Fa.background(w,
"f7"),w.css("z-index","1"),w.css("cursor","pointer"),w.on("click",y),ra.layoutCtrl(v,0,0,200,23),ra.layoutCtrl(w,180,5,16,16),w.appendTo(D),v.appendTo(D));return D};this.setEnabled=function(z){r&&r.setEnabled(z);v&&v.css({"pointer-events":"none"});w&&w.css({"pointer-events":"none"})};this.setFunSelectedChangeListener=function(z){G=z};this.setSelectedValue=function(z){m=z;k()};this.setDisplayText=function(z){r&&r.setText(z)};this.getSelectedValue=function(){return m};this.getJqText=function(){return v};
this.getJqIcon=function(){return w};var k=function(){r&&r.setText(A());G&&G(m)},A=function(){var z=ka.get("chooseApp","\u8bf7\u9009\u62e9\u4e00\u4e2a\u5e94\u7528");m&&(z=m.text);return z},y=function(){var z=com.kingdee.bos.qing.integration.AppChooseForm;z.setCallBack(function(P){if(P&&P.content){P=P.content;var K=P.appNumber,I={};I.text=P.appName;I.value=K;m=I;k()}});z.openAppChooseForm(m?m.value:null)}};za.CalcFieldEditor=function(){function m(){$a.FieldsProvider.call(this);var J=this.protectedMethod,
N=new D,E;(function(){N.setCustomItemPainter(function(C,L){var q=$("<div>");q.addClass("wizard-calc-fields-icon");E&&E(q,L.getDataType());q.appendTo(C);q=$("<div>");q.addClass("wizard-calc-fields-text");q.text(L.getAlias());q.appendTo(C)});N.addDBLClickListener(function(C){C="["+C.getSelecteds()[0].getAlias()+"]";J.fireChoosingEvent(C)})})();this.setAllFields=function(C){N.setAllFields(C)};this.getJqUi=function(){return N.getJqUi()};this.setIconProvider=function(C){E=C}}function D(){var J,N=$("<div>"),
E,C;this.setAllFields=function(L){J=L};this.getJqUi=function(){var L=$("<div>"),q=new V;q.setFontSize(12);q.setSearchListenerDelay(200);q.setPlaceholder(ka.get("search","\u641c\u7d22"));q.addSearchListener(function(){var B=q.getText().trim(),F=new na;if(B){var Z=[],ma;for(ma in J){var M=J[ma];0<=M.getAlias().toUpperCase().indexOf(B.toUpperCase())&&Z.push(M)}N.empty();0<Z.length?F.setItemModels(Z):(B=new ta,B.setText(ka.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),B.setEnabled(!1),
B.setAlign(ta.ALIGN_CENTER),B=B.getJqUi(),B.addClass("wizard-fields-popup-search-result"),B.appendTo(N))}else N.empty(),F.setItemModels(J);F.addDBLClickListener(E);F.setCustomItemPainter(C);F.getJqUi().appendTo(N)});var t=q.getJqUi();t.addClass("wizard-calc-fields-search");t.appendTo(L);t=new na;t.setItemModels(J);t.addDBLClickListener(E);t.setCustomItemPainter(C);N.addClass("wizard-calc-fields-list");t.getJqUi().appendTo(N);N.appendTo(L);return L};this.setCustomItemPainter=function(L){C=L};this.addDBLClickListener=
function(L){E=L}}ia.call(this);var w=this,r=this.protectedMethod,v=new $a,G,k,A,y=[],z;(function(){w.setSize(800,570);r.setSelectable(!0);r.setContentPaneCreator(function(){return v.getJqUi()});r.setClosingChecker(function(){return v.isValidToAccepted()});r.setClosingAction(function(J){J&&(v.acceptEditing(),z.setAlias(v.getEditedDisplayName()),z.setFormula(v.getEditedExecutableFormula()),G())});v.setFunctionsProviderCreator(function(J){return J.getInstanceForDataModeling()});v.setDuplicatedNameChecker(function(J,
N){a:{for(var E=y.concat(A),C=0;C<E.length;C++){var L=E[C];if(J!==L.getName()&&N.toUpperCase()===L.getAlias().toUpperCase()){J=!0;break a}}J=!1}return J});v.setDisplayNameTranslator(function(J,N){return N?K(J):P(J)})})();this.setSyntaxValidator=function(J){v.setSyntaxValidator(function(N,E,C){J(N,E,C,!1)})};this.setFunClosingDialogCallback=function(J){};this.setContext=function(J,N,E,C){A=J;z=N;C&&(y=C);r.setTitle(E?ka.get("editCalculatedField","\u7f16\u8f91\u8ba1\u7b97\u5b57\u6bb5"):ka.get("newCalcCol",
"\u65b0\u5efa\u8ba1\u7b97\u5b57\u6bb5"))};this.setFieldIconProvider=function(J){k=J};this.edit=function(J){G=J;J=new m;J.setIconProvider(k);J.setAllFields(A);v.setFieldsProvider(J);J=z.getSourceField();v.setEditingTarget(z.getName(),J?J:z.getAlias(),z.getFormula());w.showDialog();v.prepareToStart()};this.getEditedDisplayName=function(){return v.getEditedDisplayName()};var P=function(J){return ha(J,function(N){return N.getAlias()},function(N){return N.isCalcColumn()&&N.IsModelCalcCol()?N.getName():
N.getSourceTable()?N.getSourceTable().getId()+"\x00"+I(N):I(N)})},K=function(J){(J=ha(J,function(N){return N.isCalcColumn()&&N.IsModelCalcCol()?N.getName():N.getSourceTable()?N.getSourceTable().getId()+"\x00"+I(N):I(N)},function(N){return N.getAlias()}))&&-1<J.indexOf("\x00")&&(J=J.replace(/table.*\0/g,""));return J},I=function(J){return J.getSourceField()?J.getSourceField().getName():J.getName()},ha=function(J,N,E){for(var C={},L=0;L<A.length;L++){var q=A[L],t="["+N(q)+"]";q="["+E(q)+"]";if(t!==
q)for(var B=null;-1!==J.indexOf(t);)B||(B="["+Qa.createUUID()+"]",C[B]=q),J=J.replace(t,B)}for(B in C)for(q=C[B];-1!=J.indexOf(B);)J=J.replace(B,q);return J}};za.OutputTableArea=function(m,D){var w=this,r,v=[],G,k,A,y,z,P,K;this.initOutputTable=function(){G||(G=$("<div>"),G.addClass("extreport-dataset-designer-output-fieldtable"),G.appendTo(D));r=new KTable;r.setDraggableAdjusting(!0,3,0,new R);Ea.bindTextEditor(r,C,L);var t=new E(r);t.setOutsideVisible(!1);r.setCellRender(t);r.addColumns(3);r.getColumn(0).setWidth(250);
r.getColumn(1).setWidth(250);r.getColumn(2).setWidth(250);t=Ea.createHeadRow(r);t.getCell(0).setValue(ka.get("fieldName","\u5b57\u6bb5\u540d\u79f0"));t.getCell(1).setValue(ka.get("displayName","\u663e\u793a\u540d\u79f0"));t.getCell(2).setValue(ka.get("dataType","\u6570\u636e\u7c7b\u578b"));t=q();ra.layoutCtrlWithLRTB(t,10,10,null,10,10,null);t.appendTo(G);m.addListener(Ia.OUTPUT_AREA_SHOW_HINT,function(B){B?w.showNoFieldUi():(w.showTableUi(),w.addOutputRefreshMasking())});m.addListener(Ia.OUTPUT_AREA_REFRESH,
function(B){if(B.isPreview)var F=B.funCallback;I(F)})};this.setDataSetModel=function(t){P=t};this.model2Ui=function(t){throw Error("override me");};this.protectedGetNoFieldUI=function(){throw Error("overrite me");};this.protectedCalcGetOutputError=function(t,B,F){throw Error("overrite me");};this.showNoFieldUi=function(){ha();k=w.protectedGetNoFieldUI();G&&G.hide();k.show()};this.showTableUi=function(){ha();G&&G.show()};this.addOutputRefreshMasking=function(){ha();z=w.protectedGetOutputRefreshMaskingUI();
z.show()};this.resize=function(){J()};this.hideBorderRight=function(){k&&k.addClass("extreport-dataset-designer-hidden-border-right");G&&G.addClass("extreport-dataset-designer-hidden-border-right")};this.showBorderRight=function(){k&&k.removeClass("extreport-dataset-designer-hidden-border-right");G&&G.removeClass("extreport-dataset-designer-hidden-border-right")};this.setFunUpdateByErrorCallback=function(t){K=t};var I=function(t){var B=m.collectJsonModel(!1);if(B){ha();N(ka.get("loadingOutputData",
"\u6b63\u5728\u83b7\u53d6\u8f93\u51fa\u5b57\u6bb5\uff0c\u8bf7\u7a0d\u5019\u2026\u2026"));var F=m.createQueryFacade(function(Z){P.clearException(Sa.OUTPUT_COLUMN);A&&A.hide();var ma=new eb;ma.fromJsonObject(Z);Z=ma.getDataSetModel();(ma=Z.getException(Sa.OUTPUT_COLUMN,bb.OUTPUT_COLUMNS_NAME_EXP))&&m.getMessageCurtain().showPrompt(ma);if(Z=Z.getOutputColumns()){var M=v;ma={};for(var O=0;O<M.length;O++){var qa=M[O],oa=qa.getName();qa=qa.getAlias();ma[oa]=qa}v=[];for(M=0;M<Z.length;M++)O=new gb(P),O.fromJsonObject(Z[M].toJsonObject()),
(oa=ma[O.getName()])&&O.setAlias(oa),v[M]=O;P.setOutputColumns(v)}setTimeout(function(){J();t&&t()},0)},function(Z,ma,M){A&&A.hide();w.protectedCalcGetOutputError(Z,ma,M);P.clearException(Sa.OUTPUT_COLUMN);P.addException(Sa.OUTPUT_COLUMN,Z,ka.get("getOutputColErr","\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5\u5f02\u5e38\u3002"));return!0});F.setShowBlocking(!1);F.getOutputColumns(P.getDataSetId(),B)}},ha=function(){k&&k.remove();z&&z.remove();y&&y.remove()};this.protectedGetOutputRefreshMaskingUI=function(){w.showTableUi();
var t=$("<div>");t.addClass("extreport-output-fieldtable-darkmask");t.appendTo(q());var B=$("<div>");B.text(ka.get("refreshOutputData","\u70b9\u51fb\u6b64\u5904\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5\u3002"));B.on("click",function(F){I()});B.addClass("extreport-output-fieldtable-darkmask-button");B.appendTo(t);return t};var J=function(){r||w.initOutputTable();Ea.clearWithoutHead(r);if(v)for(var t=0,B=v.length;t<B;t++){var F=Ea.createRow(r);F.getCell(0).setValue(v[t].getName());F.getCell(1).setValue(v[t].getAlias());
F.getCell(2).setValue(v[t].getDataType());F.setUserObject(v[t])}r.setSyncUIWhenModelChanged(!0);Ea.refresh(r)},N=function(t){if(!A){A=$("<div>");A.addClass("extreport-output-fieldtable-darkmask");var B=$("<div>");B.addClass("extreport-output-fieldtable-datapreview-waiting");B.html(t);B.appendTo(A);A.appendTo(q())}A.show()},E=function(t){KTDefaultCellRender.call(this,t);var B=this,F=this.paintCellUI;this.paintCellUI=function(Z,ma){var M=B.getCurrentRowIdx(),O=B.getCurrentColIdx(),qa=B.getCurrentRow(),
oa=B.getCell(),Q=$(Z);Q.css("color","#666");M<Ea.getHeadRowCount()?(F(Z,ma),O=qa.getCell(O).getValue(),Q.css("line-height","22px"),Q.text(O)):1===O?(Z=oa.getValue(),Q.attr("title",Z),O=$("<div>"),O.text(Z),O.addClass("extreport-dataset-designer-fieldtable-editable"),Q.empty(),Q.append(O),Q.css("cursor","pointer")):(ma=Z=oa.getValue(),2===O&&(O=cb.dataTypeToName(Z))&&O!=Z&&(ma=O+ka.get("leftBracket","\uff08")+Z+ka.get("rightBracket","\uff09")),Q.attr("title",ma),O=$("<div>"),O.text(ma),O.addClass("extreport-dataset-designer-fieldtable-cell"),
Q.empty(),Q.append(O),Q.css("cursor","default"))}},C=function(t,B){return 1===B},L=function(t,B,F,Z,ma){t=t.getUserObject();B=P.getDataSetType()==Ya.OQL_DATASET;if(Z&&0!=Z.length){if(!B&&32<Z.length)return F=ka.get("displayTooLong32","\u663e\u793a\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc732\u4e2a\u5b57\u7b26\u3002"),ma||(F=ka.get("displayTooLong32Abandon","\u663e\u793a\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc732\u4e2a\u5b57\u7b26\uff0c\u5df2\u653e\u5f03\u4fee\u6539\u3002")),m.getMessageCurtain().showPrompt(F),
!1;if(B&&!Ga.isValidString(Z,/^([\u4E00-\u9FA5a-zA-Z_])[\u4E00-\u9FA5a-zA-Z0-9_\.]{0,}$/)||!B&&!Ga.isValidString(Z))return F=ka.get("invalidDisplayName","\u663e\u793a\u540d\u79f0\u4e0d\u80fd\u4ee5\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u4e14\u4e0d\u80fd\u5305\u542b\u4ee5\u4e0b\u7279\u6b8a\u7b26\u53f7\uff1a#1\u3002").replace("#1","!@#$%^&*?~+-=()[]{}<>\\/|.,:;`'\""),ma||(F=ka.get("invalidDisplayNameAbandon","\u663e\u793a\u540d\u79f0\u4e0d\u80fd\u4ee5\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u4e14\u4e0d\u80fd\u5305\u542b\u4ee5\u4e0b\u7279\u6b8a\u7b26\u53f7\uff1a#1\uff0c\u5df2\u653e\u5f03\u4fee\u6539\u3002").replace("#1",
"!@#$%^&*?~+-=()[]{}<>\\/|.,:;`'\"")),m.getMessageCurtain().showPrompt(F),!1;B=0;for(var M=v.length;B<M;B++){var O=v[B],qa=O.getAlias();if(t!=O&&qa&&Z.toLowerCase()==qa.toLowerCase())return F=ka.get("duplicatedName","\u91cd\u590d\u7684\u663e\u793a\u540d\u79f0\uff1a#1\u3002").replace("#1",Z),ma||(F=ka.get("duplicatedNameAbandon","\u91cd\u590d\u7684\u663e\u793a\u540d\u79f0\uff1a#1\uff0c\u5df2\u653e\u5f03\u4fee\u6539\u3002").replace("#1",Z)),m.getMessageCurtain().showPrompt(F),!1}}else return F=ka.get("displayEmpty",
"\u663e\u793a\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\u3002"),ma||(F=ka.get("displayEmptyAbandon","\u663e\u793a\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u5df2\u653e\u5f03\u4fee\u6539\u3002")),m.getMessageCurtain().showPrompt(F),!1;F.setValue(Z);t.setAlias(Z);return!0},q=function(){r||w.initOutputTable();return $(r.getUI())};this.protectedMethod={getTableUi:q,getDataSetModel:function(){return P},previewOutputData:I,getOutputColumnPane:function(){return D},updateOutputTableFromModel:function(t){var B=
P.getOutputColumns();if(B&&0<B.length){var F;a:{if((F=v)&&B){if(F.length!=B.length){F=!0;break a}for(var Z=0;Z<B.length;Z++){var ma=B[Z],M=F[Z];if(ma.getName()!=M.getName()||ma.getDataType()!=M.getDataType()){F=!0;break a}}}F=!1}v=B;J();(F||t)&&ha()}},addKnownErrorOutputRefreshMasking:function(t,B){ha();w.showTableUi();y=$("<div>");y.addClass("extreport-output-fieldtable-error-darkmask");y.appendTo(q());var F=$("<div>");F.addClass("extreport-output-fieldtable-error-darkmask-text");F.appendTo(y);var Z=
$("<p>");B?(Z.text(ka.get("refreshOutputFields","#1\uff0c\u60a8\u53ef\u4ee5 #2 \u8f93\u51fa\u5b57\u6bb5\u3002").replace("#1",t)),Z.html(function(){return Z.html().replace("#2","<span class = 'extreport-error-darkmask-button' style = 'cursor: pointer;'> "+ka.get("refreshWithBlank"," \u5237\u65b0 ")+"</span>")}),Z.find(".extreport-error-darkmask-button").on("click",function(){I()})):Z.text(ka.get("cantRefreshOutputFields","#1\uff0c\u65e0\u6cd5\u5237\u65b0\u201c\u8f93\u51fa\u5b57\u6bb5\u201d\u3002").replace("#1",
t));Z.show();Z.appendTo(F)},addExecFailureOutputRefreshMasking:function(t,B,F){ha();w.showTableUi();K&&K(t);y=$("<div>");y.addClass("extreport-output-fieldtable-error-darkmask");y.appendTo(q());var Z=$("<div>");Z.addClass("extreport-output-fieldtable-error-darkmask-text");Z.appendTo(y);if(F){F=$("<p>");F.text(t);F.appendTo(Z);var ma=$("<span>");ma.text(ka.get("viewOrRefreshOutputFields","\u60a8\u53ef\u4ee5 #1 \u6216 #2 \u8f93\u51fa\u5b57\u6bb5\u3002"));ma.appendTo(Z);ma.html(function(){return ma.html().replace("#1",
"<span id = 'view' class = 'extreport-error-darkmask-button' style = 'cursor: pointer;'> "+ka.get("moreDetailBlank"," \u67e5\u770b\u8be6\u7ec6 ")+"</span>").replace("#2","<span id = refresh class = 'extreport-error-darkmask-button' style = 'cursor: pointer;'> "+ka.get("refreshWithBlank"," \u5237\u65b0 ")+"</span>")});ma.find("#view").on("click",function(){b.showErrorDialog(t,B)});ma.find("#refresh").on("click",function(){I()})}else ma=$("<span>"),ma.text(ka.get("viewOutputError","#1\uff0c\u60a8\u53ef\u4ee5#2\u3002").replace("#1",
t)),ma.appendTo(Z),ma.html(function(){return ma.html().replace("#2","<span id = 'view' class = 'extreport-error-darkmask-button' style = 'cursor: pointer;'> "+ka.get("moreDetailBlank"," \u67e5\u770b\u8be6\u7ec6 ")+"</span>")}),ma.find("#view").on("click",function(){b.showErrorDialog(t,B)})},removeAllRefreshRequestMask:ha}};var Ca,ta,xa,ea,aa,ia,Ba,fa,Aa,na,ya,ra,Ma,Qa,ka,Za,Ea,$a,Fa,eb,Sa,bb,gb,fb,ab,jb,Va,Oa,cb,hb,Ya,Y,ba,Ia,Ga;(function(){var m=com.kingdee.bos.qing.ui.component;Ca=m.SwitchButton;
ta=m.Label;xa=m.DropdownSelector;ea=m.TabContainer;aa=m.Dialog;ia=m.AbstractModalDialog;Ba=m.HelpIcon;fa=m.MessageDialog;Aa=m.CheckBox;na=m.List;ya=m.TextField;m=com.kingdee.bos.qing.common;ra=m.DomUtil;Ma=m.TextMeasurer;Qa=m.Util;m=com.kingdee.bos.qing.framework.common;ka=m.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);Za=m.TabbedUiUtil;m=com.kingdee.bos.qing.common.ui;Ea=m.TableUtil;$a=m.FormulaEditorPanel;m=com.kingdee.bos.extreport.datasetdesigner;Fa=m.Icons;
m=com.kingdee.bos.extreport.datasetdesigner.model;eb=m.DataSetModelVO;Sa=m.DataSetModelCheckType;bb=m.DataSetModelCheckCode;gb=m.OutputColumn;fb=m.FieldNode;ab=m.EntityNode;jb=m.LeafNode;Va=m.SystemVar;Oa=m.MacroVar;cb=m.OutputColumDataType;hb=m.SqlContentParser;Ya=m.DataSetType;m=com.kingdee.bos.qing;Y=m.Seer;ba=m.SkinUtil;m=com.kingdee.bos.extreport.datasetdesigner.common;Ia=m.EventType;Ga=m.StringUtil})();b.showErrorDialog=function(m,D){var w=new fa;w.setCustomPainter(function(r,v){var G=$("<div>");
G.text(m);var k=$('<textarea readonly="true" ></textarea>');k.text(v);k.addClass("sa-ctrl-msgdlg-detail");k.on("click",function(){k.select()});k.addClass("extreport-dataset-designer-top-border");ra.layoutCtrlWithLRTB(k,0,0,268,35,0,160);G.appendTo(r);k.appendTo(r)});w.setOptionType(fa.OPTION_OK);w.setButtonText(fa.OPTION_OK,ka.get("ok","\u786e\u5b9a"));w.setMessage(D);w.showDialog(300,320)};var La=new function(){this.highlightKeyWords=function(m,D,w){if(D&&w){D=D.toUpperCase();var r=w.toUpperCase(),
v=r.split(D),G=D.length,k;for(k in v){var A=r.indexOf(v[k]),y=w.substr(P,v[k].length);A+=v[k].length;var z=r.length-A;r=r.substr(A,z);w=w.substr(A,z);A=$("<span>");A.text(y);A.appendTo(m);if(k!=v.length-1&&1<v.length){var P=r.indexOf(D);y=w.substr(P,G);A=P+G;z=r.length-A;r=r.substr(A,z);w=w.substr(A,z);A=$("<span>");A.text(y);A.css("color","red");A.clone().appendTo(m)}}}else m.text(w);m.attr("title",m.text())}};za.SearchHelper=La;var Ra=new function(){this.showConfirmDialog=function(m,D){var w=$(document.body),
r=$("<div class='sa-ctrl-common-modallayer'>");r.appendTo(w);var v=new aa(r),G=ka.get("operateConfirm","\u64cd\u4f5c\u786e\u8ba4");v.setTitle(G);G=w.prop("clientWidth");var k=w.prop("clientHeight");v.setBounds(G-400>>1,k-300>>1,400,300);v.setToolbarVisible(!1);G=$("<div>");k=$("<div>");var A=$("<span>");Fa.background(A,"icon_question");var y=$("<span>");y.text(m);y.addClass("extreport-dataset-designer-dialog-confirm-msg");y.attr("title",m);ra.layoutCtrl(k,null,null,368,185);ra.layoutCtrl(A,150,10,
65,78);ra.layoutCtrl(y,0,115,370,60);A.appendTo(k);y.appendTo(k);k.appendTo(G);v.setContent(G);v.addClosingListener(function(z,P){P&&D();z.destroy();r.remove()});v.showFooterPane();v.show();r.appendTo(w)}};za.ConfirmDialogHelper=Ra;var wa=new function(){this.createTitle=function(m){var D=$("<div>");D.addClass("extreport-dataset-designer-title");var w=$("<div>");w.addClass("extreport-dataset-designer-label");w.appendTo(D);w=$("<div>");w.addClass("extreport-dataset-designer-text");w.text(m);w.appendTo(D);
D.attr("title",m);D.addClass("extreport-dataset-designer-text-ellipsis");return D};this.initNoDataUi=function(m,D,w,r){void 0===w&&(w=0);r||(r="no_source");var v=$("<div>");v.appendTo(m);m=$("<div>");m.appendTo(v);Fa.background(m,r);ra.layoutCtrlCenterAlign(m,60);r=78;m.css({position:"absolute",top:"50%","margin-top":-(r>>1)+w+"px",height:r+"px","line-height":r+"px"});m=$("<div id='noDataText'>");m.text(D);m.css({color:"rgb(102, 102, 102)"});D=12*D.length;ra.layoutCtrlCenterAlign(m,160<D?160:D);r=
16;m.css({position:"absolute",top:"50%","margin-top":-(r>>1)+60+w+"px",height:r+"px","line-height":r+"px","text-align":"center"});m.appendTo(v);return v}};za.QueryCommonUi=wa;Ra=new function(){this.backgroundWithHover=function(m,D,w){Fa.background(m,D);w||(w="_hover");m.on("mouseenter",function(){Fa.background(m,D+w)});m.on("mouseleave",function(){Fa.background(m,D)});m.css("cursor","pointer")}};za.IconHelper=Ra;var ua=new function(){this.moveSelectedUp=function(D,w){var r=Object.keys(w);if(r.length!=
D.length){var v=Number(r[0]);0<v&&v--;for(var G=[],k=0;k<D.length;k++)if(k<v)G.push(k);else{for(var A=0;A<r.length;A++)G.push(Number(r[A]));for(;k<D.length;)w[k]||G.push(k),k++}m(D,G);D={};for(k=0;k<r.length;k++)G=Number(r[k]),D[v]=w[G],delete w[G],v++;r=Object.keys(D);for(k=0;k<r.length;k++)v=r[k],w[v]=D[v]}};this.moveSelectedDown=function(D,w){var r=Object.keys(w);if(r.length!=D.length){var v=Number(r[r.length-1]);v<D.length-1&&v++;for(var G=[],k=D.length-1;0<=k;k--)if(k>v)G.unshift(k);else{for(var A=
r.length-1;0<=A;A--)G.unshift(Number(r[A]));for(;0<=k;)w[k]||G.unshift(k),k--}m(D,G);D={};for(k=r.length-1;0<=k;k--)G=Number(r[k]),D[v]=w[G],delete w[G],v--;r=Object.keys(D);for(k=0;k<r.length;k++)v=r[k],w[v]=D[v]}};var m=function(D,w){for(var r=[],v=0;v<w.length;v++)r.push(D[w[v]]);for(v=D.length=0;v<r.length;v++)D.push(r[v])}};za.ParamListUtils=ua})();
//qingVersionTag: 20250324