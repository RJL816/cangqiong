var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(q){var G=0;return function(){return G<q.length?{done:!1,value:q[G++]}:{done:!0}}};$jscomp.arrayIterator=function(q){return{next:$jscomp.arrayIteratorImpl(q)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,G,J){if(q==Array.prototype||q==Object.prototype)return q;q[G]=J.value;return q};$jscomp.getGlobal=function(q){q=["object"==typeof globalThis&&globalThis,q,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var G=0;G<q.length;++G){var J=q[G];if(J&&J.Math==Math)return J}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(q,G){var J=$jscomp.propertyToPolyfillSymbol[G];if(null==J)return q[G];J=q[J];return void 0!==J?J:q[G]};
$jscomp.polyfill=function(q,G,J,S){G&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(q,G,J,S):$jscomp.polyfillUnisolated(q,G,J,S))};$jscomp.polyfillUnisolated=function(q,G,J,S){J=$jscomp.global;q=q.split(".");for(S=0;S<q.length-1;S++){var c=q[S];if(!(c in J))return;J=J[c]}q=q[q.length-1];S=J[q];G=G(S);G!=S&&null!=G&&$jscomp.defineProperty(J,q,{configurable:!0,writable:!0,value:G})};
$jscomp.polyfillIsolated=function(q,G,J,S){var c=q.split(".");q=1===c.length;S=c[0];S=!q&&S in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var la=0;la<c.length-1;la++){var oa=c[la];if(!(oa in S))return;S=S[oa]}c=c[c.length-1];J=$jscomp.IS_SYMBOL_NATIVE&&"es6"===J?S[c]:null;G=G(J);null!=G&&(q?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:G}):G!==J&&(void 0===$jscomp.propertyToPolyfillSymbol[c]&&(J=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[c]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(c):$jscomp.POLYFILL_PREFIX+J+"$"+c),$jscomp.defineProperty(S,$jscomp.propertyToPolyfillSymbol[c],{configurable:!0,writable:!0,value:G})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(q){if(q)return q;var G=function(la,oa){this.$jscomp$symbol$id_=la;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:oa})};G.prototype.toString=function(){return this.$jscomp$symbol$id_};var J="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",S=0,c=function(la){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new G(J+(la||"")+"_"+S++,la)};return c},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(q){if(q)return q;q=Symbol("Symbol.iterator");for(var G="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),J=0;J<G.length;J++){var S=$jscomp.global[G[J]];"function"===typeof S&&"function"!=typeof S.prototype[q]&&$jscomp.defineProperty(S.prototype,q,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return q},"es6",
"es3");$jscomp.iteratorPrototype=function(q){q={next:q};q[Symbol.iterator]=function(){return this};return q};$jscomp.iteratorFromArray=function(q,G){q instanceof String&&(q+="");var J=0,S=!1,c={next:function(){if(!S&&J<q.length){var la=J++;return{value:G(la,q[la]),done:!1}}S=!0;return{done:!0,value:void 0}}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill("Array.prototype.keys",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(G){return G})}},"es6","es3");$jscomp.findInternal=function(q,G,J){q instanceof String&&(q=String(q));for(var S=q.length,c=0;c<S;c++){var la=q[c];if(G.call(J,la,c,q))return{i:c,v:la}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(q){return q?q:function(G,J){return $jscomp.findInternal(this,G,J).v}},"es6","es3");
(function(){function q(h){var X,K,F,z=[],k={};this.getJqUi=function(){X||(X=$("<div>"),c.layoutCtrlWithLRTB(X,0,0,null,25,0,null),X.addClass("extreport-dataset-designer-left-border"),X.addClass("extreport-dataset-designer-right-border"),F=new La,F.setBorderVisible(!1),F.setToggleSelectingEnabled(!1),F.setCustomItemPainter(C),F.setItemModels(z),F.getJqUi().appendTo(X));return X};this.model2Ui=function(v){v=v.getParameters();k={};if(v&&0<v.length){z=v;for(v=0;v<z.length;v++){var H=z[v],D=H.getName();
H.check();k[D]=H.getException()}F.setItemModels(z);K&&K.hide();F.getJqUi().show()}else K||(K=pa.initNoDataUi(X,r.get("noParam","\u5c1a\u672a\u8bbe\u7f6e\u53c2\u6570"))),F.getJqUi().hide(),K.show();v={hint:Object.keys(k),type:"param"};h.fireEvent(va.QUERY_AREA_ADD_AT_HINT_TYPE,v)};var C=function(v,H){v.css("height","30px");v.css("cursor","pointer");if(H){var D=H.getName();D=D?D:"";var N=H.getAlias();N=N?N:"";v.data("model",H);v.attr("name",D);var T=!1;k[D]&&(t(v,r.get("paramErrorTips","\u53c2\u6570\u8bbe\u7f6e\u5b58\u5728\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u8be5\u53c2\u6570\u3002")),
T=!0);var aa=$("<div>");aa.addClass("extreport-dataset-designer-sourcearea-name");aa.css({right:"4px"});N=N+"("+D+")";aa.text(N);aa.attr("title",N);aa.appendTo(v);N=$("<div>");N.addClass("extreport-dataset-designer-paramarea-icon");var O=F.getSelecteds();O&&0<O.length&&O[0]===H?ha.background(N,fa.dataTypeToIconName(H.getDataType())+"_selected"):ha.background(N,fa.dataTypeToIconName(H.getDataType()));N.appendTo(v);v.on("dblclick",function(ca){h.fireEvent(va.QUERY_AREA_INSERT_TYPE,"@"+D)});v.on("mousedown",
function(ca){var U=F.getJqUi().find(".sa-ctrl-list-item_selected_enabled");ca=U.data("model");U&&ca&&(U=U.find(".extreport-dataset-designer-paramarea-icon"),ha.background(U,fa.dataTypeToIconName(ca.getDataType())));U=v.find(".extreport-dataset-designer-paramarea-icon");ha.background(U,fa.dataTypeToIconName(H.getDataType())+"_selected")});T&&aa.css({right:"20px"})}},t=function(v,H){var D=Sa.createWarning();D.attr("title",H);D.addClass("extreport-dataset-designer-warning-icon");D.appendTo(v)}}function G(h,
X){Ta.call(this,h,X);var K=this,F=this.protectedMethod,z;this.model2Ui=function(k){z=F.getDataSetModel();var C=z.getException(ra.OUTPUT_COLUMN);if(C){k=!1;var t=z.getException(ra.OUTPUT_COLUMN,Ma.OUTPUT_COLUMN_NAME_DUPLICATED);t||(t=z.getException(ra.OUTPUT_COLUMN,Ma.OUTPUT_COLUMN_KSQL_DISABLE_SELECT_ALL),t||(t=z.getException(ra.OUTPUT_COLUMN,Ma.OUTPUT_COLUMN_FIELD_CHANGED),k=!0));t?(k&&F.updateOutputTableFromModel(),F.addKnownErrorOutputRefreshMasking(t,k)):F.addExecFailureOutputRefreshMasking(r.get("execError",
"\u201c\u67e5\u8be2\u8bed\u53e5\u201d\u6267\u884c\u5931\u8d25\uff0c\u65e0\u6cd5\u5237\u65b0\u201c\u8f93\u51fa\u5b57\u6bb5\u201d\u3002"),C,!0)}else F.updateOutputTableFromModel(k)};this.protectedGetNoFieldUI=function(){var k=$("<div>");k.appendTo(F.getOutputColumnPane());k.addClass("extreport-dataset-designer-output-fieldtable");var C=$("<div>");C.appendTo(k);var t=$("<div>");t.appendTo(C);ha.background(t,"notable");c.layoutCtrlCenterAlign(t,150);c.layoutCtrlMiddleAlign(t,150);c.layoutCtrl(t,null,
null,null,86);t=$("<div>");var v=z&&z.getDataSetType()==ja.OQL_DATASET?r.get("noEntityField","\u4e1a\u52a1\u5b9e\u4f53\u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5"):r.get("noTableField","\u6570\u636e\u6e90\u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5");t.text(v);c.layoutCtrlCenterAlign(t,200);c.layoutCtrlMiddleAlign(t,20);c.layoutCtrl(t,"52%","70%",210,null);t.css({"text-align":"center"});t.appendTo(C);c.layoutCtrlCenterAlign(C,210);
c.layoutCtrlMiddleAlign(C,210);return k};this.protectedCalcGetOutputError=function(k,C,t){8099101==k||8099007==k||8077016==k||8077020==k||8077021==k||8077022==k||8077023==k||8077017==k||8077018==k||8077019==k?(h.fireEvent(va.DATASOURCE_AREA_SHOW_EXP,C),K.showNoFieldUi()):8077014==k||8077015==k||8077024==k?F.addKnownErrorOutputRefreshMasking(C,8077024==k):F.addExecFailureOutputRefreshMasking(r.get("execError","\u201c\u67e5\u8be2\u8bed\u53e5\u201d\u6267\u884c\u5931\u8d25\uff0c\u65e0\u6cd5\u5237\u65b0\u201c\u8f93\u51fa\u5b57\u6bb5\u201d\u3002"),
t,!0)}}function J(h){Ua.call(this,h);var X=this;this.protectedGetHintInSql=function(K,F){var z=X.getDataSetModel(),k=ba.fromDataSetSourceType(z.getDataSetType(),z.getDataSourceType()),C=h.createQueryFacade(function(t){if(t){for(var v=0;v<t.length;v++){var H={};(new Ja).fromJsonObject(t[v],H);X.addHintTables(H)}K.showHint({completeSingle:!1})}},function(t,v){return!0});C.setShowBlocking(!1);C.getTableFields(z.getDataSetType(),k,z.getDataSourceName(),F)}}"undefined"==typeof com&&(com={});"undefined"==
typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.query&&(com.kingdee.bos.extreport.datasetdesigner.query={});var S=com.kingdee.bos.extreport.datasetdesigner.query;S.DataSourceArea=function(h,X){function K(a){KTDefaultCellRender.call(this,
a);var b=this;this.paintCellUI=function(m,x){var A=b.getCurrentRow(),u=b.getCell(),y=u.getValue();u=u.getUserObject();m=$(m);var L=g(y),Aa=y.isEnabled();Aa||L.css({color:"#ddd",cursor:"default"});if(!ka&&u||ka&&ka.getName()==y.getName())y instanceof wa||(Ba=A),Aa&&nb(L,y);m.on("mousedown",function(Ha){y instanceof wa||(Ba=A);Aa&&nb(L,y)});m.on("dblclick",function(Ha){if(Aa){ob(L,y);Ha=y.getName();if(y instanceof wa){var Na=y.getFullTableName();Na&&(Ha=Na+"."+Ha)}k.fireEvent(va.QUERY_AREA_INSERT_TYPE,
Ha)}});y instanceof xa&&(u=y.getChildren())&&0<u.length&&(u=m.children()[0])&&"DIV"==$(u).prop("nodeName").toUpperCase()&&$(u).remove();u=m;x?(u=$(x),L.appendTo(u)):L.appendTo(m);x=u.css("left");x=parseInt(x.substring(0,x.lastIndexOf("px")))-16;isNaN(x)||u.css({left:x+"px"});x=u.width();u.css({width:x+16+"px"})};var g=function(m){var x=m.getName();if(m instanceof wa){x=pb(x,m.getTableName());var A=n==ja.OQL_DATASET?m.getDisplayName():m.getType()}else n==ja.OQL_DATASET&&(A=m.getDisplayName());var u=
$("<div>");u.addClass("extreport-dataset-designer-tablearea-table-item");var y=$("<div>");y.addClass("extreport-dataset-designer-tablearea-table-icon");ha.background(y,hb(m));y.appendTo(u);y=$("<div>");var L=x;A&&(L=x+"("+A+")");y.attr("title",L);y.addClass("extreport-dataset-designer-tablearea-table-name");$a.highlightKeyWords(y,m instanceof wa?Ca:ya,L);y.appendTo(u);m.isEnabled()||u.attr("disabled",!0);return u}}function F(a,b,g){Va.call(this);var m=this,x=this.protectedMethod,A,u;(function(){x.setTitle(a);
m.setSize(791,515);x.setSelectable(!0);x.setContentPaneCreator(function(){return b.getJqUi()});b.setMessageCurtain(x.getMessageCurtain());x.setClosingChecker2(function(y){u&&u();var L=b.checkUIInput();if(L)x.getMessageCurtain().showPrompt(L,2E3),y(!1);else{L=g.model;var Aa=L.getDataSourceType(),Ha=L.getDataSource(),Na=b.getModelFromUI(),Cb=Na.getDataSourceType(),Db=Na.getDataSource().getName();Ha&&Aa==Cb&&Ha.getName()==Db||(Na.setDataSetType(L.getDataSetType()),A&&A(Na,!Ha));y(!0)}},function(y){u&&
u();y(!0)},!0);x.setClosingAction(function(y){})})();this.setFunSuccessCallback=function(y){A=y};this.setFunClosedCallback=function(y){u=y}}var z=this,k=X,C,t,v,H,D,N,T,aa,O,ca,U,Z,Y,V,W,ea=null,da,qa,sa,R,n=h,e,p,d,w,B=[],M={},I=[],P=[],ma=[],Ba,ka,za,ya="",Ca="",Wa=!1,Ia=!1,f=!1,l=!1,Q=!0,na,Oa,Pa,ab=!0,ib={},kb;this.getJqUi=function(){C||Eb();return C};this.showNoSourceUi=function(a){t||Fb(a);C.hide();H&&H.hide();t.show();0==document.body.clientHeight&&0==document.body.clientWidth||!Q||(Q=!1,setTimeout(function(){lb(a)},
0))};this.showPaneUi=function(){t&&t.hide();H&&H.hide();C.show()};this.showNoTableExceptionUiFromModel=function(a){e=a;z.protectedSyncModel(e,R);p&&p.setItemModels([e]);a=R.getException(ra.DATA_SOURCE);qb(a);k.fireEvent(va.OUTPUT_AREA_SHOW_HINT,!0)};this.isShowNoTableExceptionUi=function(){return Ia};this.setDataSetModel=function(a){R=a};this.setFunGetDataSourceModelCallback=function(a){Oa=a};this.setEnableButtonFunCallBack=function(a){Pa=a};this.dataSourceModel2Ui=function(a,b){var g=!1;a&&!a.isSameDataSourceModel(e)&&
(g=!0);if(g||b)e=a,z.protectedSyncModel(e,R),b=k.createQueryFacade(function(m){ab=!1;z.showPaneUi();R.clearException(ra.DATA_SOURCE);Pa&&Pa(!0,!0,!0);W||rb();W.hide();var x=new bb;x.fromJsonObject(m);a:if(m=g,Ia&&(Ia=!1,t&&t.hide(),H&&H.hide(),C.show(),U.show(),Z.show(),da.collapseSecondHalf(!1),jb(),k.fireEvent(va.OUTPUT_AREA_SHOW_HINT,!1)),e=x.getDataSourceModel(),z.protectedSyncModel(e,R),p.setItemModels([e]),p.setSelecteds([e]),cb(x.getTableNode()),P){var A=P[0];m?za=ka=null:A=ka?ka:P[0];Da();
if(A instanceof xa&&(cb(A.getFieldNode(),"field"),I&&0<I.length)){Da("field");break a}A?mb(A):Ea(!0)}k.fireEvent(va.QUERY_AREA_SET_HINT_TYPE,x.getMapTableFields())},function(m,x){ab=!1;R.clearException(ra.DATA_SOURCE);R.addException(ra.DATA_SOURCE,"no-sense",x);Pa&&Pa(!1,!1,!0);z.showNoTableExceptionUiFromModel(a);return 8077E3<m?(k.getMessageCurtain().showPrompt(x,5E3),!0):!1}),Ia?b.setBlockingJqUi(H):b.setBlockingJqUi(U),b.getUsableTableObject(R.getDataSetId(),R.toJsonObject())};this.updateUi=function(){jb();
f?(db(!0),Ea(!0)):l?(Da(),Ea(!0)):(Da(),Da("field"))};this.resize=function(){jb()};this.protectedInit=function(a){throw Error("override me");};this.protectedCreateDataSourceSelectPane=function(a){throw Error("override me");};this.protectedSyncModel=function(a,b){throw Error("override me");};this.setFunAddDataSourceCallback=function(a){na=a};var rb=function(){W=Sa.createWarning();var a=52;Qa.isEnglish()?n==ja.SQL_DATASET&&(a+=34):a=n==ja.OQL_DATASET?62:52;c.layoutCtrl(W,a,5,12,12);W.appendTo(D)},qb=
function(a){a&&(W||rb(),W.attr("title",a),W.show());Ia=!0;if(!H){H=$("<div>");H.appendTo(D);c.layoutCtrlWithLRTB(H,0,0,null,90,-8,null);H.addClass("extreport-dataset-designer-notable");a=$("<div>");a.appendTo(H);ha.background(a,"notable");c.layoutCtrlCenterAlign(a,150);c.layoutCtrlMiddleAlign(a,150);c.layoutCtrl(a,null,"50%",null,86);a=$("<div>");var b=n==ja.SQL_DATASET?r.get("noTableError","\u6570\u636e\u6e90\u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u83b7\u53d6\u6570\u636e\u8868"):r.get("noEntityError",
"\u4e1a\u52a1\u5b9e\u4f53\u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u83b7\u53d6\u5b9e\u4f53\u7ed3\u6784");a.text(b);c.layoutCtrlCenterAlign(a,200);c.layoutCtrlMiddleAlign(a,20);c.layoutCtrl(a,"52%","56%",210,null);a.css({"text-align":"center"});a.appendTo(H)}t&&t.hide();C.show();U.hide();Z.hide();da.collapseSecondHalf(!0);jb();H.show()},sb=function(a,b){var g=!1;b="field"==b;var m=n==ja.OQL_DATASET,x="",A="";b&&za?x=za.getName():ka&&(x=ka.getName(),m&&(A=ka.getDisplayName()));for(var u=null,y=0;y<
a.length;y++){var L=a[y];m&&!u&&(0<=L.getName().toUpperCase().indexOf(ya.toUpperCase())||0<=L.getDisplayName().toUpperCase().indexOf(ya.toUpperCase()))&&(u=L);if(x&&x==a[y].getName())if(m){if(0<=x.toUpperCase().indexOf(ya.toUpperCase())||0<=A.toUpperCase().indexOf(ya.toUpperCase())){g=!0;break}}else{g=!0;break}}g||(b?za=null:ka=m&&u?u:null)},tb=function(a,b){var g=[],m=!0;if(0<=a.getName().toUpperCase().indexOf(b.toUpperCase())||0<=a.getDisplayName().toUpperCase().indexOf(b.toUpperCase()))g.push(a),
m=!1;for(var x=a.getChildren?a.getChildren():[],A=0;A<x.length;A++){var u=tb(x[A],b);u&&0<u.length&&(m&&(g.push(a),m=!1),g=g.concat(u))}return g},ub=function(){if(""==ya)P=B;else for(var a=0;a<B.length;a++){var b=B[a];0==b.getSubNodeLevel()&&(P=P.concat(tb(b,ya)))}sb(P)},vb=function(){if(""==Ca)ma=I;else{for(var a=I.length,b=0;b<a;b++){var g=I[b],m=pb(g.getName(),g.getTableName()).toUpperCase(),x;n==ja.OQL_DATASET&&(x=g.getDisplayName().toUpperCase());(0<=m.indexOf(Ca.toUpperCase())||x&&0<=x.indexOf(Ca.toUpperCase()))&&
ma.push(g)}sb(ma,"field")}},cb=function(a,b){"field"==b?(ma=[],I=[]):(P=[],B=[]);a=a.getChildren();for(var g=0;g<a.length;g++)wb(a[g],b);"field"==b?vb():ub()},wb=function(a,b){"field"==b?I.push(a):B.push(a);if(a instanceof Ja||a instanceof xa)if(a=a.getChildren())for(var g=0;g<a.length;g++)wb(a[g],b)},Eb=function(){D=$("<div>");z.protectedInit(D);var a=$("<div>");a.attr("title",r.get("refresh","\u5237\u65b0"));a.css({cursor:"pointer"});ha.backgroundWithHover(a,"refresh");c.layoutCtrlWithLRTB(a,null,
4,16,67,null,16);a.appendTo(D);a.on("click",function(){z.dataSourceModel2Ui(Oa(R),!0)});ca=$("<div>");Gb(ca);ca.appendTo(D);U=$("<div>");xb(U);U.appendTo(D);Z=$("<div>");pa.createTitle(r.get("field","\u5b57\u6bb5")).appendTo(Z);xb(Z,"field");da=new ia;da.setHorizontalSplit(!1);da.setFirstSize(400,260,-1);da.setSecondSize(260,260,-1);da.setResizeMode(ia.RESIZE_MODE_SECOND_FIXED);da.setFirstChild(ia.createChildWrapper(D));da.setSecondChild(ia.createChildWrapper(Z));C=da.getJqUi();k.addListener(va.DATASOURCE_AREA_SHOW_EXP,
function(b){qb(b)})},jb=function(){v&&v.is(":visible")||(da.setFirstSize(400,260,-1),da.setSecondSize(260,260,-1),da.setResizeMode(ia.RESIZE_MODE_SECOND_FIXED),da.resize(!0))},Fb=function(a){t=$("<div>");t.appendTo(C.parent());c.layoutCtrl(t,null,null,"100%","100%");var b=pa.createTitle(n==ja.SQL_DATASET?r.get("dataSource","\u6570\u636e\u6e90"):r.get("entity","\u4e1a\u52a1\u5b9e\u4f53")),g=0;Qa.isEnglish()&&(g=24);c.layoutCtrl(b,null,null,60+g,null);b.appendTo(t);b=$("<div>");b.addClass("extreport-dataset-designer-left-border");
b.addClass("extreport-dataset-designer-right-border");b.addClass("extreport-dataset-designer-top-border");b.addClass("extreport-dataset-designer-bottom-border");b.appendTo(t);c.layoutCtrlWithLRTB(b,0,0,null,25,0,null);v=$("<div>");v.addClass("extreport-dataset-select-source-tip-ui");v.appendTo(b);v.hide();setTimeout(function(){v.show()},0);b=$("<div>");b.appendTo(v);ha.background(b,"NoParam");c.layoutCtrlCenterAlign(b,200);c.layoutCtrlMiddleAlign(b,120);c.layoutCtrl(b,null,130,null,null);b=n==ja.SQL_DATASET?
r.get("noAddSourceClick","\u5c1a\u672a\u6dfb\u52a0\u6570\u636e\u6e90\uff0c\u70b9\u51fb\u6dfb\u52a0"):r.get("noAddEntityClick","\u5c1a\u672a\u6dfb\u52a0\u4e1a\u52a1\u5b9e\u4f53\uff0c\u70b9\u51fb\u6dfb\u52a0");g=new la;g.setFontSize(Xa.getFontSize(),Xa.getFontName());var m=g.measureWidth(b);g=$("<div>");g.text(n==ja.SQL_DATASET?r.get("noAddSource","\u5c1a\u672a\u6dfb\u52a0\u6570\u636e\u6e90\uff0c\u70b9\u51fb"):r.get("noAddEntity","\u5c1a\u672a\u6dfb\u52a0\u4e1a\u52a1\u5b9e\u4f53\uff0c\u70b9\u51fb"));
g.css({color:"rgb(102, 102, 102)"});c.layoutCtrlCenterAlign(g,m+5);c.layoutCtrlMiddleAlign(g,100);c.layoutCtrl(g,null,213,null,null);g.appendTo(v);m=$("<div>");m.text(r.get("addSource","\u6dfb\u52a0"));m.attr("title",b);m.on("click",function(){lb(a)});m.addClass("extreport-dataset-designer-text-add");m.appendTo(g)},Hb=function(a){if(!Wa){Wa=!0;var b=k.createQueryFacade(function(g){Ia&&z.dataSourceModel2Ui(e,!0)},function(g,m){R.clearException(ra.DATA_SOURCE);R.addException(ra.DATA_SOURCE,"no-sense",
m);Pa&&Pa(!1,!1,!0);z.showNoTableExceptionUiFromModel(e);return!0},function(){Wa=!1;a&&a()});b.setBlockingJqUi(C);b.setShowBlocking(!1);b.checkDataSource(R.getDataSetId(),R.toJsonObject())}},Gb=function(a){var b=new La;b.setBorderVisible(!0);b.setToggleSelectingEnabled(!1);b.setCustomItemPainter(function(g,m){g.css("height","30px");g.css("cursor","default");if(m){var x=e.getDataSourceType();g.attr("name",m.getDataSource().getName());var A=$("<div>");A.addClass("extreport-dataset-designer-sourcearea-name");
A.text(m.getDataSourceDisplayName());A.attr("title",m.getDataSourceDisplayAlias());A.appendTo(g);m=$("<div>");m.addClass("extreport-dataset-designer-sourcearea-icon");ha.background(m,x==ta.DATA_CENTER?"ds_datacenter":x==ta.SUPER_QUERY?"ds_superquery":x==ta.OUT_DB||x==ta.USER_SUPER_QUERY?"ds_outdb":"ds_entity");m.appendTo(g)}var u=$("<div>");n==ja.OQL_DATASET?u.attr("title",r.get("switchEntity","\u5207\u6362\u4e1a\u52a1\u5b9e\u4f53")):u.attr("title",r.get("switchDs","\u5207\u6362\u6570\u636e\u6e90"));
u.addClass("extreport-dataset-designer-sourcearea-switch-btn");u.on("mousedown",function(y){y.stopPropagation();Hb(function(){lb(na)})});ha.backgroundWithHover(u,"switch");u.appendTo(g);u.hide();g.mouseenter(function(){u.show()}).mouseleave(function(){u.hide()})});b.setCustomSelectedsPainter(function(g,m){m&&0<m.length&&(g&&0<g.length&&(g=g[0],g.css("background-color",""),g.css("color","")),m=m[0],m.css("background-color","#eff3fd"),m.css("color","rgb(130, 130, 130)"))});p=b;p.setItemModels([]);b=
b.getJqUi();c.layoutCtrlWithLRTB(b,0,0,null,25,0,32);b.appendTo(a)},db=function(a){f=a;ya?a?(N||(N=pa.initNoDataUi(U,r.get("noSearchResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"),30)),$(d.getUI()).hide(),aa&&aa.hide(),N.show()):(aa&&aa.hide(),N&&N.hide(),$(d.getUI()).show()):a&&!ab?(aa||(aa=pa.initNoDataUi(U,r.get("noTable","\u6682\u65e0\u6570\u636e\u8868"),30)),$(d.getUI()).hide(),N&&N.hide(),aa.show()):(aa&&aa.hide(),N&&N.hide(),$(d.getUI()).show())},Ea=function(a){l=
a;Ca?a?(T||(T=pa.initNoDataUi(Z,r.get("noSearchResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"),30)),$(w.getUI()).hide(),Y.hide(),O&&O.hide(),T.show()):(O&&O.hide(),T&&T.hide(),Y.show(),$(w.getUI()).show()):a&&!ab?(O||(O=pa.initNoDataUi(Z,r.get("noField","\u6682\u65e0\u5b57\u6bb5"),30)),$(w.getUI()).hide(),Y.hide(),T&&T.hide(),O.show()):(O&&O.hide(),T&&T.hide(),$(w.getUI()).show(),ab?Y.hide():Y.show())},pb=function(a,b){if(b){var g=a.indexOf(b);-1!=g&&(a=a.substring(g+
b.length+1))}return a},mb=function(a){var b=a.getName();if(!ib[b]){ib[b]=!0;var g=kb=(new Date).getTime()+"";ea&&ea.remove();ea=com.kingdee.bos.qing.framework.common.AbstractFacade.block(Z);var m=ba.fromDataSetSourceType(R.getDataSetType(),R.getDataSourceType()),x=k.createQueryFacade(function(A){ib[b]=!1;if(A){var u=new Ja,y={};u.fromJsonObject(A[0],y);k.fireEvent(va.QUERY_AREA_ADD_HINT_TYPE,y);M[b]=u;kb==g&&ka&&b==ka.getName()&&(ea&&ea.remove(),ea=null,yb(a),cb(u,"field"),Da("field"))}},function(A,
u){ib[b]=!1;kb==g&&(ea&&ea.remove(),ea=null,a.setEnabled(!1),oa.refresh(d),Ea(!0));return!0});x.setShowBlocking(!1);x.getTableFields(R.getDataSetType(),m,R.getDataSourceName(),[b])}},zb=function(a){var b;a instanceof xa&&(b=a.getFieldNode());b||(b=M[a.getName()]);return b},Da=function(a){if("field"==a)ma&&0<ma.length?(Ea(!1),a=Z.width(),Ab(w,ma,a)):Ea(!0);else if(P&&0<P.length){db(!1);a=d;var b=a.keepScrollStatus();b.v&&(b.v=0);a.restoreScrollStatus(b);a=U.width();Ab(d,P,a);Bb()}else db(!0)},Ab=function(a,
b,g){oa.clear(a);1E3<b.length&&a.setLargeDataMode(!0,!1);a.addColumn().setWidth(g-4-9);if(0!=b.length){g=!1;for(var m,x=0;x<b.length;x++){var A=b[x],u=a.addRow();u.setHeight(30);u.setHide(!1);var y=u.getCell(0);y.setValue(A);A instanceof wa?za&&za.getName()==A.getName()&&(y.setUserObject(!0),g=!0):ka&&ka.getName()==A.getName()&&(y.setUserObject(!0),g=!0,Ba=u);0==x&&(m=y);A=A.getSubNodeLevel();A=new KTCellTreeModel(A);A.setExpanded(!0);y.setTreeModel(A)}!g&&m&&m.setUserObject(!0)}oa.refresh(a)},nb=
function(a,b){ob(a,b);b instanceof wa||((a=zb(b))?(yb(b),cb(a,"field"),Da("field")):mb(b))},ob=function(a,b){if(b instanceof wa){var g=$(w.getUI());if(za){var m=g.find(".extreport-dataset-designer-tablearea-table-item_selected");m&&(m=m.find(".extreport-dataset-designer-tablearea-table-icon"),ha.background(m,hb(za)))}za=b}else g=$(d.getUI()),ka&&(m=g.find(".extreport-dataset-designer-tablearea-table-item_selected"))&&(m=m.find(".extreport-dataset-designer-tablearea-table-icon"),ha.background(m,hb(ka))),
ka=b;g.find(".extreport-dataset-designer-tablearea-table-item").removeClass("extreport-dataset-designer-tablearea-table-item_selected");a.addClass("extreport-dataset-designer-tablearea-table-item_selected");a=a.find(".extreport-dataset-designer-tablearea-table-icon");ha.background(a,hb(b)+"_selected")},hb=function(a){var b="table";a instanceof wa?b="field":n==ja.OQL_DATASET&&(b=0==a.getSubNodeLevel()?"entity_head":"entity_sub");return b},yb=function(a){var b=a.getName(),g;n==ja.OQL_DATASET&&(g=a.getDisplayName());
g&&(b=g);V.text(b);V.attr("title",b);Y.show()},Bb=function(){if(Ba){var a=d.getRowIndex(Ba);0<=a&&d.scrollCellVisible(a,0,!0)}},xb=function(a,b){var g=90;"field"==b&&(g=25);var m=function(y){ya=$.trim(y.getText());P=[];if(B&&0<B.length&&(ub(),0<P.length)){db(!1);Ea(!1);Da();y=ka?ka:P[0];var L=zb(y);L?(cb(L,"field"),Da("field")):mb(y);return}db(!0);I=[];Ea(!0)},x=function(y){Ca=$.trim(y.getText());ma=[];if(I&&0<I.length&&(vb(),0<ma.length)){Ea(!1);Da("field");return}Ea(!0)};(function(y){var L=new Ya;
L.setSearchListenerDelay(1E3);L.setShowSearchIcon(!0);L.setPlaceholder(r.get("searchContent","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9"));L.setFontSize(12);"field"==b?(sa=L,sa.addSearchListener(x)):(qa=L,qa.addSearchListener(m));L=L.getJqUi();L.addClass("extreport-dataset-designer-tablearea-search-box");L.addClass("extreport-dataset-designer-top-border");L.addClass("extreport-dataset-designer-left-border");L.addClass("extreport-dataset-designer-right-border");c.layoutCtrlWithLRTB(L,0,0,null,g,0,
30);L.appendTo(y)})(a);"field"==b&&function(y){var L=$("<div>");L.addClass("extreport-dataset-designer-left-border");L.addClass("extreport-dataset-designer-right-border");Y=$("<div>");Y.addClass("extreport-dataset-designer-field-table-item");Y.appendTo(L);var Aa=$("<div>");Aa.addClass("extreport-dataset-designer-field-table-item-icon");ha.background(Aa,"table");Aa.appendTo(Y);V=$("<div>");V.text("");V.addClass("extreport-dataset-designer-field-table-item-name");V.appendTo(Y);Y.hide();g+=32;c.layoutCtrlWithLRTB(L,
0,0,null,g,0,30);L.on("click",Bb);L.appendTo(y)}(a);var A=new KTable;A.setCellRender(new K(A));A.setSyncUIWhenModelChanged(!1);A.setColumnFitVisibleWidth(!1);A.setDraggableAdjusting(!0,3,0,new eb);"field"==b?w=A:d=A;var u=$("<div>");u.addClass("extreport-dataset-designer-left-border");u.addClass("extreport-dataset-designer-right-border");u.addClass("extreport-dataset-designer-bottom-border");g+=30;c.layoutCtrlWithLRTB(u,0,0,null,g,0,null);A=$(A.getUI());A.children().css("overflow-x","hidden");c.layoutCtrlWithLRTB(A,
1,1,null,3,0,null);A.appendTo(u);u.appendTo(a)},lb=function(a){var b=e?e:new fb;b.setDataSetType(n);var g={model:b,dataSetModel:R};b=z.protectedCreateDataSourceSelectPane(g);g=n==ja.SQL_DATASET?new F(r.get("selectDataSource","\u9009\u62e9\u6570\u636e\u6e90"),b,g):new F(r.get("selectEntity","\u9009\u62e9\u4e1a\u52a1\u5b9e\u4f53"),b,g);g.showDialog();g.setFunSuccessCallback(a);b.getClosedCallback&&g.setFunClosedCallback(b.getClosedCallback())}};S.DataSetQueryTabPane=function(h,X){Fa.call(this,r.get("query",
"\u67e5\u8be2"),X);var K=this,F,z,k,C,t,v,H,D,N,T,aa,O,ca,U,Z,Y,V,W,ea,da,qa,sa,R,n,e,p,d;this.showQueryTitleButton=function(f){f.getDataSetType()==ja.OQL_DATASET?(Z&&Z.css({display:"none"}),U&&U.css({right:"0px"}),ca&&ca.css({right:"80px"})):ta.isSuperQuery(f.getDataSourceType())||f.getDataSourceType()==ta.OUT_DB&&f.getDataSource&&!E.isSupportKSQL(f.getDataSource().getDBType())?(da&&da.setChecked(!0),Z&&Z.css({display:"none"}),U&&U.css({right:"0px"}),ca&&ca.css({right:"80px"})):(Z&&Z.css({display:"block"}),
U&&U.css({right:"140px"}),ca&&ca.css({right:"220px"}))};this.resize=function(f){z&&z.is(":visible")?Y&&Y.resize(!0):(Y&&Y.resize(!0),n&&n.resize(),V&&V.resize(!0),W&&W.resize(!0),ea&&ea.resize(!0),d&&d.resize(),!f&&w())};this.fireTabChangeEvent=function(){K.resize();var f=K.getDataSetModelVO();f&&(f=f.getDataSetModel())&&p&&p.model2Ui(f)};this.setEnableButtonFunCallBack=function(f){sa=f};this.protectedInit=function(f){F||(n=K.protectedCreatDataSourceArea(),n.setFunAddDataSourceCallback(ka),n.setFunGetDataSourceModelCallback(K.protectedGetDataSourceModel),
n.setEnableButtonFunCallBack(sa),F=n.getJqUi());B();M();I();P();W=new ia;W.setHorizontalSplit(!1);W.setFirstSize(400,260,-1);W.setSecondSize(260,260,-1);W.setResizeMode(ia.RESIZE_MODE_SECOND_FIXED);W.setFirstChild(ia.createChildWrapper(t,function(){R.adjustSqlEditorHeight(W.getNonemptyFirstWide())}));W.setSecondChild(ia.createChildWrapper(v));ea=new ia;ea.setHorizontalSplit(!1);ea.setFirstSize(400,260,-1);ea.setSecondSize(260,260,-1);ea.setResizeMode(ia.RESIZE_MODE_SECOND_FIXED);ea.setFirstChild(ia.createChildWrapper(H));
ea.setSecondChild(ia.createChildWrapper(D));V=new ia;V.setHorizontalSplit(!0);V.setFirstChild(ia.createChildWrapper(W.getJqUi(),function(){e&&e.resize()}));V.setSecondChild(ea);V.setFirstSize(400,400,-1);V.setSecondSize(260,200,400);V.setResizeMode(ia.RESIZE_MODE_SECOND_FIXED);C=$("<div>");V.getJqUi().appendTo(C);Y=new ia;Y.setHorizontalSplit(!0);Y.setFirstSize(260,200,400);Y.setSecondSize(600,-1,-1);Y.setResizeMode(ia.RESIZE_MODE_FIRST_FIXED);Y.setFirstChild(ia.createChildWrapper(F));Y.setSecondChild(ia.createChildWrapper(C,
function(){z&&z.is(":visible")&&ma();V&&V.resize(!0);n&&n.updateUi()}));var l=Y.getJqUi();l.addClass("extreport-dataset-designer-tab-pane");l.appendTo(f)};this.protectedUpdateUi=function(f,l){if(f=f.getDataSetModel())if(n.setDataSetModel(f),R.setDataSetModel(f),d.setDataSetModel(f),f.getSqlType&&(ua.SQL==f.getSqlType()?da.setChecked(!0):qa.setChecked(!0)),K.protectedIsNeedShowNoDataSourceUi(f))ma(),sa&&sa(!1,!1,!1);else{za();var Q=f.getContent(),na="text/k-sql";f.getDataSetType()==ja.OQL_DATASET&&
(na="text/o-sql");w(Q,na);Q=K.protectedGetDataSourceModel(f);f.getException(ra.DATA_SOURCE)?(sa&&sa(!1,!1,!0),n.showNoTableExceptionUiFromModel(Q),d.showNoFieldUi()):(sa&&sa(!0,!0,!0),n.dataSourceModel2Ui(Q,n.isShowNoTableExceptionUi()),d.model2Ui(l));K.showQueryTitleButton(Q);p.model2Ui(f);e.init()}};this.protectedCreatDataSourceArea=function(){throw Error("override me");};this.protectedIsNeedShowNoDataSourceUi=function(f){throw Error("override me");};this.protectedGetDataSourceModel=function(f){throw Error("override me");
};this.protectedInitNoDataSourcePaneUi=function(f,l){throw Error("override me");};var w=function(f,l){R.initSqlEditor(f,l,function(){d.addOutputRefreshMasking()});R.adjustSqlEditorHeight(W.getNonemptyFirstWide())},B=function(){if(!t){t=$("<div>");t.addClass("extreport-dataset-designer-bottom-border");var f=pa.createTitle(r.get("queryStatement","\u67e5\u8be2\u8bed\u53e5"));f.addClass("extreport-dataset-designer-bottom-border");var l=new Za;l.setIconType(Za.ICON_TYPE_QUESTION);var Q=ja.SQL_DATASET==
h?r.get("dataTable","\u6570\u636e\u8868"):r.get("entityTable","\u5b9e\u4f53\u7ed3\u6784");l.setTipsText(r.get("queryStatTips","\u5728#1\u3001\u5b57\u6bb5\u3001\u53ef\u7528\u53c2\u6570\u53ca\u53d8\u91cf\u533a\u57df\u53cc\u51fb\u9f20\u6807\u5de6\u952e\uff0c\u53ef\u4ee5\u5728\u67e5\u8be2\u8bed\u53e5\u8f93\u5165\u6846\u4e2d\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u63d2\u5165\u6307\u5b9a\u503c\u3002").replace("#1",Q));l=l.getJqUi();c.layoutCtrlWithLRTB(l,null,null,16,4,null,16);l.css({position:"relative",
"float":"left","margin-left":"4px"});l.appendTo(f);l=r.get("comment","\u6ce8\u91ca/\u53cd\u6ce8\u91ca");Q=new Ka(l);Q.addActionListener(function(){R.commentSelectedSqlContent()});U=Q.getJqUi();c.layoutCtrlWithLRTB(U,null,140,78,null,null,24);U.attr("title",l);U.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"});U.appendTo(f);l=r.get("format","\u683c\u5f0f\u5316");Q=new Ka(l);Q.addActionListener(function(){R.formatSelectedSqlContent()});ca=Q.getJqUi();ca.attr("title",l);c.layoutCtrlWithLRTB(ca,
null,220,48,null,null,24);ca.appendTo(f);Z=$("<div>");l=new Ga;qa=new Ra;qa.setText("KSQL");da=new Ra;da.setText("SQL");l.addElement(da);l.addElement(qa);l.addChangedListener(function(na,Oa){(na=K.getDataSetModelVO())&&(na=na.getDataSetModel())&&na.setSqlType(da.isChecked()?ua.SQL:ua.KSQL);d&&d.addOutputRefreshMasking()});l=da.getJqUi();c.layoutCtrlWithLRTB(l,null,0,60,0,null,24);Q=qa.getJqUi();c.layoutCtrlWithLRTB(Q,null,70,60,0,null,24);Q.appendTo(Z);l.appendTo(Z);Z.appendTo(f);f.appendTo(t);R=
new J(X);aa=R.getJqUi();aa.appendTo(t)}},M=function(){if(!v){v=$("<div>");var f=pa.createTitle(r.get("outputColumn","\u8f93\u51fa\u5b57\u6bb5"));ya(f,r.get("collapseOutputColumn","\u6536\u8d77\u8f93\u51fa\u5b57\u6bb5\u9762\u677f"),"downArrow");f.appendTo(v);d=new G(X,v);d.initOutputTable()}},I=function(){if(!H){H=$("<div>");H.addClass("extreport-dataset-designer-bottom-border");var f=pa.createTitle(r.get("usableParam","\u53ef\u7528\u53c2\u6570"));f.addClass("extreport-dataset-designer-bottom-border");
ya(f,r.get("collapseParam","\u6536\u8d77\u53ef\u7528\u53c2\u6570\u53ca\u53d8\u91cf\u9762\u677f"),"rightArrow");f.appendTo(H);p=new q(X);O=p.getJqUi();O.appendTo(H)}},P=function(){if(!D){D=$("<div>");var f=pa.createTitle(r.get("variant","\u53d8\u91cf"));e=new gb(X,D,f);f.appendTo(D)}},ma=function(){if(!z){z=$("<div>");z.addClass("extreport-dataset-designer");z.appendTo(C);c.layoutCtrlWithLRTB(z,0,0,null,25,0,null);k=$("<div id='noDatasource'>");k.addClass("extreport-dataset-no-source-tip-ui");k.appendTo(z);
var f=$("<div id='middle'>");f.appendTo(k);c.layoutCtrlCenterAlign(f,180);c.layoutCtrlMiddleAlign(f,230);var l=$("<div id='left'>");c.layoutCtrlCenterAlign(l,180);c.layoutCtrlMiddleAlign(l,230);l.css({transform:"translateX(-280px)"});l.appendTo(k);K.protectedInitNoDataSourcePaneUi(l,f);l=$("<div>");l.text(r.get("sqlDesc","\u7f16\u5199\u67e5\u8be2\u8bed\u53e5"));l.css({color:"rgb(102, 102, 102)","text-align":"center"});c.layoutCtrlCenterAlign(l,160);c.layoutCtrlMiddleAlign(l,100);c.layoutCtrl(l,null,
180,null,null);l.appendTo(f);f=$("<div id='arrow1'>");ha.background(f,"arrow");c.layoutCtrlCenterAlign(f,64);c.layoutCtrlMiddleAlign(f,64);f.css({transform:"translate(-140px, -43px)"});f.appendTo(k);f=$("<div id='arrow2'>");ha.background(f,"arrow");c.layoutCtrlCenterAlign(f,64);c.layoutCtrlMiddleAlign(f,64);f.css({transform:"translate(140px, -43px)"});f.appendTo(k);f=$("<div id='right'>");c.layoutCtrlCenterAlign(f,180);c.layoutCtrlMiddleAlign(f,230);f.css({transform:"translateX(280px)"});f.appendTo(k);
l=$("<div>");l.appendTo(f);ha.background(l,"param");c.layoutCtrlCenterAlign(l,144);c.layoutCtrl(l,null,0,144,144);l=$("<div>");l.text(r.get("parameterDesc","\u8bbe\u7f6e\u53c2\u6570\u53ca\u63a7\u4ef6"));l.css({color:"rgb(102, 102, 102)","text-align":"center"});c.layoutCtrlCenterAlign(l,100);c.layoutCtrlMiddleAlign(l,100);c.layoutCtrl(l,null,180,null,null);l.appendTo(f)}V.getJqUi().hide();Ba(!1);z.show();n.showNoSourceUi(ka)},Ba=function(f){for(var l=K.getJqUi().parent().parent().children(".sa-ctrl-tab-head"),
Q,na=0;na<l.length;na++){var Oa=$(l[na]);Oa.text()!=K.getTitle()&&(Q=Oa)}f?Q&&Q.removeClass("extreport-dataset-designer-disable-param-tab"):Q&&Q.addClass("extreport-dataset-designer-disable-param-tab")},ka=function(f,l){if(l){Ba(!0);za();l="SELECT * FROM";var Q="text/k-sql";f.getDataSetType()==ja.OQL_DATASET&&(l=l+" "+f.getDataSource().getName(),Q="text/o-sql");w(l,Q);n.showPaneUi();K.resize();e.init();p.model2Ui(K.getDataSetModelVO().getDataSetModel())}n.dataSourceModel2Ui(f);K.showQueryTitleButton(f);
d.showTableUi();d.addOutputRefreshMasking()},za=function(){z&&z.hide();V.getJqUi().show()},ya=function(f,l,Q){var na=$("<div>");na.on("click",function(Oa){Ca(Q)});na.attr("title",l);na.addClass("extreport-dataset-designer-collapse-icon");ha.backgroundWithHover(na,Q);na.appendTo(f)},Ca=function(f){"downArrow"==f?(W.collapseSecondHalf(!0),v.show(!1),Ia(!0),t.removeClass("extreport-dataset-designer-bottom-border")):"rightArrow"==f?(V.collapseSecondHalf(!0),Wa(!0)):"upArrow"==f?(W.collapseSecondHalf(!1),
v.show(!0),Ia(!1),t.addClass("extreport-dataset-designer-bottom-border")):"leftArrow"==f&&(V.collapseSecondHalf(!1),Wa(!1))},Wa=function(f){if(!N){N=$("<div>");N.addClass("extreport-dataset-designer-show-param-btn");N.on("click",function(){Ca("leftArrow")});var l=$("<div>");l.appendTo(N);ha.backgroundWithHover(l,"leftArrow");var Q=$("<div>");Q.text(r.get("etc","..."));Q.appendTo(N);c.layoutCtrlCenterAlign(Q,16);c.layoutCtrlWithLRTB(Q,null,null,null,25,0,null);c.layoutCtrlCenterAlign(l,16);c.layoutCtrlWithLRTB(l,
null,null,null,5,null,16);N.appendTo(Y.getJqUi())}l=T&&!T.is(":hidden");f?(N.show(),V.setSplitLineWide(27),R&&R.getJqUi().removeClass("extreport-dataset-designer-right-border"),l?T.addClass("extreport-dataset-designer-hidden-border-right"):d.hideBorderRight()):(N.hide(),V.setSplitLineWide(8),R&&R.getJqUi().addClass("extreport-dataset-designer-right-border"),l?T.removeClass("extreport-dataset-designer-hidden-border-right"):d.showBorderRight());V.resize()},Ia=function(f){if(!T){T=$("<div>");T.on("click",
function(){Ca("upArrow")});T.addClass("extreport-dataset-designer-show-output-btn");var l=$("<div>");l.appendTo(T);ha.backgroundWithHover(l,"upArrow");var Q=$("<div>");Q.text(r.get("outputColumn","\u8f93\u51fa\u5b57\u6bb5"));Q.appendTo(T);c.layoutCtrlMiddleAlign(Q,16);c.layoutCtrlMiddleAlign(l,16);c.layoutCtrlWithLRTB(Q,5,null,120,null,null,null);c.layoutCtrlWithLRTB(l,null,5,16,null,null,16);T.appendTo(W.getJqUi())}l=N&&!N.is(":hidden");f?(T.show(),W.setSplitLineWide(27),l&&T.addClass("extreport-dataset-designer-hidden-border-right")):
(T.hide(),W.setSplitLineWide(8),l&&T.removeClass("extreport-dataset-designer-hidden-border-right"),l?d.hideBorderRight():d.showBorderRight());W.resize()}};var c,la,oa,Sa,r,Xa,Ya,Va,ia,Za,Ra,Ga,Ka,La,va,Qa,ha,Fa,eb,$a,pa,gb,Ua,Ta,ja,ra,Ma,bb,Ja,xa,wa,fb,E,ta,ua,fa,ba;(function(){var h=com.kingdee.bos.qing.common;c=h.DomUtil;la=h.TextMeasurer;h=com.kingdee.bos.qing.common.ui;oa=h.TableUtil;Sa=h.CommonIconUtil;h=com.kingdee.bos.qing.framework.common;r=h.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);
Xa=h.GlobalFont;h=com.kingdee.bos.qing.ui.component;Va=h.AbstractModalDialog;ia=h.SplitPane;Za=h.HelpIcon;Ra=h.RadioButton;Ga=h.RadioButtonGroup;Ka=h.WorkButton;La=h.List;h=com.kingdee.bos.extreport.datasetdesigner.common;va=h.EventType;Qa=h.LanguageUtil;ha=com.kingdee.bos.extreport.datasetdesigner.Icons;h=com.kingdee.bos.extreport.datasetdesigner.common.ui;Fa=h.AbstractDataSetTabPane;eb=h.TableCustomExpandor;Ya=h.SearchBox;$a=h.SearchHelper;pa=h.QueryCommonUi;gb=h.SystemAndMacroVarArea;Ua=h.QueryArea;
Ta=h.OutputTableArea;h=com.kingdee.bos.extreport.datasetdesigner.model;ja=h.DataSetType;ra=h.DataSetModelCheckType;Ma=h.DataSetModelCheckCode;bb=h.DataSourceTableObjectVO;Ja=h.FolderNode;xa=h.EntityNode;wa=h.FieldNode;fb=h.DataSourceModel;E=h.DBType;ta=h.DataSourceType;ua=h.SqlType;fa=h.ParamDataType;ba=h.RptSourceType})()})();(function(){function q(E,ta){function ua(ba){var h,X,K,F,z,k,C,t,v=0,H=0,D,N,T,aa,O,ca=!1;this.getJqUi=function(){h||(h=$("<div>"),V(Y));return h};this.setMessageCurtain=function(e){X=e};this.getMessageCurtain=function(){return X};this.checkUIInput=function(){if(ca)return $(document.body).find(".sa-common-loading-modallayer").css({"background-color":"transparent"}),r.get("loadingDataSource","\u6570\u636e\u6e90\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019\u3002");if(K.isChecked()){D=xa.DATA_CENTER;var e=
k.getSelectedValue();e&&(N=e.value,T=e.text)}else if(F.isChecked()){if(D=xa.SUPER_QUERY,e=C.getSelected())N=e.getName(),T=e.getAlias()}else if(e=t.getSelected())D="superQuery"==e.getDbType()?xa.USER_SUPER_QUERY:xa.OUT_DB,T=N=e.getName(),aa=e.getDbType();if(void 0==D||void 0==N)return r.get("pleaseSelectDataSource","\u8bf7\u9009\u62e9\u6570\u636e\u6e90\u3002")};this.getModelFromUI=function(){var e=new ra;e.setDataSetType(Ua.SQL_DATASET);e.setDataSourceType(D);var p=new Ja;p.setName(N);p.setAlias(T);
p.setDBType(aa);e.setDataSource(p);return e};var U=function(){var e=ba.dataSetModel;var p=e?(p=e.getException(Ta.DATA_SOURCE,ja.DATA_SOURCE_UNDEFINED))?null:e.getException(Ta.DATA_SOURCE):null;e=ba.model;if(e.getDataSourceType()==xa.DATA_CENTER){ea();K.setChecked(!0);var d=e.getDataSource();e=d.getName();var w=d.getAlias();if(w){var B=w.split("/")[1];B&&(e=B)}d={text:e,value:d.getName()};k.setSelectedValue(d);p?(w||k.setDisplayText(e),Z(K.getJqUi(),96,p)):W()}else e.getDataSourceType()==xa.SUPER_QUERY?
(W(),F.setChecked(!0),e=e.getDataSource(),O&&O.hasSuperQuerySchema()&&C.setItemModels(O.getSuperQuerySchemas(),function(M,I){return M&&I?M.getName()==I.getName():!1}),C.setSelected(e),p?Z(F.getJqUi(),72,p):ea()):(W(),ea(),z.setChecked(!0),t.setSelectedModel(e),p&&Z(z.getJqUi(),84+H,p));t.loadAllOutDBs()},Z=function(e,p,d){var w=Sa.createWarning();c.layoutCtrl(w,p,4,12,12);w.attr("title",d);w.appendTo(e)},Y=function(){Qa.isEnglish()&&(v=24,H=64);var e=0,p=new Ka;K=new Ga;var d=r.get("currentDataCenter",
"\u5f53\u524d\u6570\u636e\u4e2d\u5fc3");K.setText(d);var w=K.getJqUi();w.attr("title",d);w.appendTo(h);c.layoutCtrl(w,0,e,95,23);p.addElement(K);K.addCheckedListener(function(){});d=new La;d.setText(r.get("app","\u5e94\u7528"));d=d.getJqUi();d.appendTo(h);c.layoutCtrl(d,20,e+=38,50,23);k=new gb;k.setFunSelectedChangeListener(function(B){R(K,B)});d=k.getJqUi();c.layoutCtrl(d,80,e,200,23);d.appendTo(h);F=new Ga;d=r.get("superQuery","\u8d85\u7ea7\u67e5\u8be2");F.setText(d);w=F.getJqUi();w.attr("title",
d);w.appendTo(h);c.layoutCtrl(w,0,e+=43,72+v,23);p.addElement(F);F.addCheckedListener(function(){});d=new La;d.setText(r.get("schema","\u6a21\u5f0f"));d=d.getJqUi();d.appendTo(h);c.layoutCtrl(d,20,e+=38,50,23);C=new ia;C.addSelectedChangedListener(function(B,M,I){R(F,I)});C.setCustomPainter(n);d=C.getJqUi();c.layoutCtrl(d,80,e,200,23);d.appendTo(h);z=new Ga;d=r.get("outDB","\u516c\u5171\u6570\u636e\u6e90");z.setText(d);w=z.getJqUi();w.attr("title",d);w.appendTo(h);c.layoutCtrl(w,0,e+=43,85+H,23);
p.addElement(z);z.addCheckedListener(function(){});d=$("<div>");d.attr("title",r.get("outDB","\u516c\u5171\u6570\u636e\u6e90"));c.layoutCtrlWithLRTB(d,null,15,16,173,null,16);O&&O.hasDBManagePerm()?(Fa.backgroundWithHover(d,"outdb"),d.css({cursor:"pointer",opacity:"1"})):(Fa.background(d,"outdb"),d.css({cursor:"not-allowed",opacity:"0.5"}));d.appendTo(h);d.on("click",function(){if(O&&O.hasDBManagePerm()){var B=S.decodeParamFromUrl(location.search,"path");B=(B?B:"/ierp")+"/qing/dbManageEntrance.do";
var M=J.getUrlParamValue();M&&(B=S.appendParamToUrl(B,"skin",M));(M=G.getUrlParamValue("appID"))&&(B=S.appendParamToUrl(B,"appID",M));Xa.openNewTab(r.get("outDB","\u516c\u5171\u6570\u636e\u6e90"),B)}});d=$("<div>");d.attr("title",r.get("refresh","\u5237\u65b0"));d.css({cursor:"pointer"});Fa.backgroundWithHover(d,"refresh");c.layoutCtrlWithLRTB(d,null,42,16,173,null,16);d.appendTo(h);qa(h,170,sa);t=new fa;t.setMessageCurtain(X);t.setFunSelectedListener(function(B){R(z,B)});w=t.getJqUi();c.layoutCtrl(w,
20,e+=38,719,198);w.appendTo(h);d.on("click",function(){t.loadAllOutDBs()});p.addChangedListener(function(B,M){K==B?t.unSelected():F==B?(t.unSelected(),O&&(B=O.getSuperQuerySchemas())&&!C.getSelected()&&C.setSelected(B[0])):t.doAutoSelected(M)});U()},V=function(e){ca=!0;var p=ta.createQueryFacade(function(d){ca=!1;O=new bb;O.fromJsonObject(d);e&&e()},function(d,w){ca=!1;e&&e();return!0});p.setBlockingJqUi(h);p.checkDataSourcePermission()},W=function(){O&&!O.hasDataCenterPerm()&&(K.setEnabled(!1),
k.setEnabled(!1),da(h,r.get("dataCenterTips","\u60a8\u6ca1\u6709\u201c\u6570\u636e\u4e2d\u5fc3\u8fde\u63a5\u201d\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u8fdb\u884c\u6388\u6743\u3002\u6388\u6743\u65b9\u5f0f\u8bf7\u53c2\u8003#1\u3002"),Ya.getQingRptSqlDataSetUrl(),96,2,null,!0))},ea=function(){if(O&&O.hasSuperQuerySchema())C.setItemModels(O.getSuperQuerySchemas(),function(p,d){return p&&d?p.getName()==d.getName():!1});else{var e=O&&O.isSuperQueryNotDeployed()?r.get("superQueryTips1",
"\u5f53\u524d\u73af\u5883\u672a\u90e8\u7f72\u8d85\u7ea7\u67e5\u8be2\u670d\u52a1\u6216\u670d\u52a1\u672a\u542f\u52a8\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u68c0\u67e5\u8d85\u7ea7\u67e5\u8be2\u90e8\u7f72\u60c5\u51b5\u3002"):r.get("superQueryTips2","\u201c\u8d85\u7ea7\u67e5\u8be2\u201d\u6ca1\u6709\u53ef\u7528\u7684\u6a21\u5f0f\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u8fdb\u884c\u6388\u6743\u3002");da(h,e,Ya.getQingRptSuperQueryUrl(),72+v,83,56);F.setEnabled(!1);C.setEnabled(!1);(e=C.getJqUi().find(".sa-ctrl-combobox-text").text())&&
e!=r.get("selectSchemaTips","\u8bf7\u9009\u62e9\u4e00\u4e2a\u6a21\u5f0f")||C.getJqUi().find(".sa-ctrl-combobox-text").text(r.get("noSchema","\u6ca1\u6709\u53ef\u7528\u7684\u6a21\u5f0f"))}},da=function(e,p,d,w,B,M,I){var P=new Ra;M?P.setTipsSize(300,M):(M=new la,M.setFontSize(Va.getFontSize(),Va.getFontName()),M=M.measureWidth(p),P.setTipsSize(300,24*Math.ceil(M/300)));P.setIconType(Ra.ICON_TYPE_QUESTION);var ma=$("<div>");ma.text(p);I&&ma.html(function(){return ma.html().replace("#1","<a onclick='javascript:window.open(\""+
d+"\");' href='#' style = 'cursor: pointer; color: var(--color-main, #5582f3); text-decoration: none'> "+r.get("helpDoc","\u5e2e\u52a9\u6587\u6863")+"</a>")});P.setTipsHtml(ma);p=P.getJqUi();c.layoutCtrlWithLRTB(p,w,null,16,B,null,16);p.appendTo(e)},qa=function(e,p,d){var w=new Za;w.setSearchListenerDelay(1E3);w.addSearchListener(d);w.setShowSearchIcon(!0);w.setPlaceholder(r.get("searchOutDB","\u641c\u7d22\u540d\u79f0/\u7c7b\u578b/\u5730\u5740/\u7528\u6237"));w.setFontSize(12);var B=w.getJqUi();c.layoutCtrlWithLRTB(B,
null,70,200,p+3,null,18);B.find(":input").on("keydown",function(I){13===(I.keyCode||I.which||I.charCode)&&d()});B.hide();B.appendTo(e);var M=$("<div>");c.layoutCtrlWithLRTB(M,null,70,16,p+3,null,16);Fa.background(M,"icon_search");M.appendTo(e);M.on("mouseenter",function(){M.hide();B.show();w.setFoucs()});e.on("mousedown",function(I){var P=w.getText();P=P?P.trim():P;P=va.isNotEmptyStr(P);I=$(I.target);B.find(I)[0]||P||(B.hide(),M.show())})},sa=function(e){e&&(e=e.getText(),t&&t.doSearchText(e))},R=
function(e,p){var d=e.isChecked();p&&!d&&e.setChecked(!0)},n=function(e,p,d){d?(e=d.getName(),d=d.getAlias(),p.text(d?d+"("+e+")":e)):p.text(r.get("selectSchemaTips","\u8bf7\u9009\u62e9\u4e00\u4e2a\u6a21\u5f0f"))}}function fa(){function ba(n){KTDefaultCellRender.call(this,n);var e=this,p=this.paintCellUI;this.paintCellUI=function(w,B){var M=e.getCurrentRowIdx(),I=e.getCurrentRow(),P=e.getCurrentColIdx();I=I.getUserObject();if(M<oa.getHeadRowCount())p(w,B);else if(0==P){ca||U||(sa(),U=!0);B=M-oa.getHeadRowCount();
P=new Ga;var ma=D&&D.getName()==I.getName(),Ba=v&&v.getDataSource()&&v.getDataSource().getName()==I.getName();t&&(ma||!D&&Ba)&&(V.setChecked(!1),P.setChecked(!0),N=!0,T=M,ma||(D=I));Y[B]=P;Z.addElement(P);P.setUserObject(I);M=P.getJqUi();c.layoutCtrl(M,12,4,23,23);M.appendTo(w)}else 1==P?d(w,I.getSerialNo()):2==P?d(w,I.getName(),!0):3==P?(M=I.getDbType(),"superQuery"==M&&(M=r.get("superQuery","\u8d85\u7ea7\u67e5\u8be2")),d(w,M,!0)):4==P?d(w,I.getAddress(),!0):5==P&&d(w,I.getUserName(),!0)};var d=
function(w,B,M){var I=$("<div>");I.addClass("extreport-dataset-designer-table-cell-text");M?$a.highlightKeyWords(I,C,B+""):(I.text(B),I.attr("title",B));I.appendTo(w)}}var h,X,K,F,z,k,C,t=!1,v,H=!1,D,N=!1,T,aa=[],O=[],ca=!0,U=!1,Z=new Ka,Y=[],V=new Ga,W;this.getJqUi=function(){h||(h=$("<div>"),h.css({border:"1px solid #e5e5e5"}),c.layoutCtrlWithLRTB(h,0,0,null,0,0,null),R(),Z.addElement(V),Z.addChangedListener(ea));return h};this.setMessageCurtain=function(n){z=n};this.getSelected=function(){return D};
this.setSelectedModel=function(n){v=n};this.loadAllOutDBs=function(){var n=function(d){if(d&&0<d.length)for(var w=0;w<d.length;w++){var B=new Ma;B.fromJsonObject(d[w]);aa[w]=B}else aa=[];D?(n=function(M){qa()},e=function(M,I){return 8077E3<=M?(z.showPrompt(I,5E3),D&&(H=v&&v.getDataSource()&&v.getDataSource().getName()==D.getName(),D=null),qa(),!0):!1},d=ta.createQueryFacade(n,e),d.setBlockingJqUi(h),d.checkOutDBByName(D.getName())):qa()},e=function(d,w){aa=[];D=null;qa();return 8077E3<=d?(z.showPrompt(w,
5E3),!0):!1},p=ta.createQueryFacade(n,e);p.setBlockingJqUi(h);p.getOutDBList()};this.setFunSelectedListener=function(n){W=n};this.doSearchText=function(n){C=n?n.trim():null;qa()};this.unSelected=function(){t=!1;V.setChecked(!0)};this.doAutoSelected=function(n){t=!0;if(n)if(D)for(n=0;n<Y.length;n++){var e=Y[n],p=e.getUserObject();if(D.getName()==p.getName()){e.setChecked(!0);break}}else(e=Y[0])&&e.setChecked(!0)};var ea=function(n,e){var p=V==n,d=n.isChecked();!p&&d&&(D=n.getUserObject(),e&&W&&W(n.getUserObject()))},
da=function(){document.body.style.height=document.documentElement.clientHeight+"px";qa()},qa=function(){if(0==document.body.clientHeight||0==document.body.clientWidth)ta.addWindowResizeListener(da);else{var n=!1;k||(R(),n=!0);if(aa)if(C){var e=C.toUpperCase();O=[];for(var p=0;p<aa.length;p++){var d=aa[p];(0<=d.getName().toUpperCase().indexOf(e)||0<=d.getAddress().toUpperCase().indexOf(e)||0<=d.getDbType().toUpperCase().indexOf(e)||0<=d.getUserName().toUpperCase().indexOf(e))&&O.push(d)}}else O=aa;
if(O&&0<O.length){Y=[];n||sa();F&&F.hide();K&&K.hide();oa.clearWithoutHead(k);p=0;for(n=O.length;p<n;p++)e=O[p],t&&!D&&0==p&&(H||v&&!v.getDataSource())&&(D=e),oa.createRow(k).setUserObject(e);N=!1;1<k.getRowsCount()&&(p=new KTBorderStyle,p.setLeftBorderWidth(0),k.getRow(1).getCell(0).setBorder(p));k.updateUI();U=ca=!1;k.relayoutViews();U=ca=!1;N&&T&&k.scrollCellVisible(T,0,!1)}else oa.clearWithoutHead(k),oa.refresh(k),C?(F||(F=pa.initNoDataUi(X,r.get("noSearchResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"))),
K&&K.hide(),F.show()):(K||(K=pa.initNoDataUi(X,r.get("noOutDB","\u6682\u65e0\u6570\u636e\u6e90"))),F&&F.hide(),K.show())}},sa=function(){Z=new Ka;V=new Ga;Z.addElement(V);Z.addChangedListener(ea)},R=function(){k=oa.createTable();k.setColumnFitVisibleWidth(!1);k.setSyncUIWhenModelChanged(!1);var n=new eb;n.setColumnNotDraggable([0,1]);k.setDraggableAdjusting(!0,3,0,n);k.addColumns(6);k.getColumn(0).setWidth(40);k.getColumn(1).setWidth(40);k.getColumn(2).setWidth(190);k.getColumn(3).setWidth(100);k.getColumn(4).setWidth(200);
k.getColumn(5).setWidth(140);n=oa.createHeadRow(k);n.getCell(1).setValue(r.get("serial","#"));n.getCell(2).setValue(r.get("name","\u540d\u79f0"));n.getCell(3).setValue(r.get("type","\u7c7b\u578b"));n.getCell(4).setValue(r.get("addr","\u5730\u5740"));n.getCell(5).setValue(r.get("user","\u7528\u6237"));n=new ba(k);n.setOutsideVisible(!1);k.setCellRender(n);X=$(k.getUI());c.layoutCtrlWithLRTB(X,0,0,null,0,0,null);X.appendTo(h)}}fb.call(this,E,ta);this.protectedInit=function(ba){var h=pa.createTitle(r.get("dataSource",
"\u6570\u636e\u6e90")),X=0;Qa.isEnglish()&&(X=24);c.layoutCtrl(h,null,null,60+X,null);h.appendTo(ba);h=pa.createTitle(r.get("table","\u8868"));c.layoutCtrl(h,null,65,null,null);h.appendTo(ba)};this.protectedCreateDataSourceSelectPane=function(ba){return new ua(ba)};this.protectedSyncModel=function(ba,h){h.setDataSourceType(ba.getDataSourceType());if(ba=ba.getDataSource())h.setDataSourceName(ba.getName()),ba.getDBType&&h.setDBType(ba.getDBType())}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&
(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.sql&&(com.kingdee.bos.extreport.datasetdesigner.sql={});var G,J,S,c,la,oa,Sa,r,Xa,Ya,Va,ia,Za,Ra,Ga,Ka,La,va,Qa,ha,Fa,eb,$a,pa,gb,Ua,Ta,ja,ra,Ma,bb,Ja,xa,wa,fb;(function(){var E=
com.kingdee.bos.qing;G=E.Seer;J=E.SkinUtil;E=com.kingdee.bos.qing.common;S=E.Util;c=E.DomUtil;la=E.TextMeasurer;E=com.kingdee.bos.qing.common.ui;oa=E.TableUtil;Sa=E.CommonIconUtil;E=com.kingdee.bos.qing.framework.common;r=E.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);Xa=E.TabbedUiUtil;Ya=E.OfficialArticleUtil;Va=E.GlobalFont;E=com.kingdee.bos.qing.ui.component;ia=E.ComboBox;Ra=E.HelpIcon;Ga=E.RadioButton;Ka=E.RadioButtonGroup;La=E.Label;E=com.kingdee.bos.extreport.datasetdesigner.common;
va=E.StringUtil;Qa=E.LanguageUtil;E=com.kingdee.bos.extreport.datasetdesigner.common.query;ha=E.TabQueryPaneFactory;Fa=com.kingdee.bos.extreport.datasetdesigner.Icons;E=com.kingdee.bos.extreport.datasetdesigner.common.ui;eb=E.TableCustomExpandor;Za=E.SearchBox;$a=E.SearchHelper;pa=E.QueryCommonUi;gb=E.AppChooseDialogSelector;E=com.kingdee.bos.extreport.datasetdesigner.model;Ua=E.DataSetType;Ta=E.DataSetModelCheckType;ja=E.DataSetModelCheckCode;ra=E.DataSourceModel;Ma=E.OutDBVO;bb=E.DataSourceCheckerVO;
Ja=E.DataSourceNameAliasPair;xa=E.DataSourceType;E=com.kingdee.bos.extreport.datasetdesigner.query;wa=E.DataSetQueryTabPane;fb=E.DataSourceArea})();ha.addQueryPane(Ua.SQL_DATASET,function(E,ta){wa.call(this,E,ta);this.protectedCreatDataSourceArea=function(){return new q(E,ta)};this.protectedIsNeedShowNoDataSourceUi=function(ua){return!ua.getDataSourceName()};this.protectedGetDataSourceModel=function(ua){var fa=new ra;fa.setDataSetType(ua.getDataSetType());fa.setDataSourceType(ua.getDataSourceType());
var ba=new Ja;ba.setName(ua.getDataSourceName());ba.setDBType(ua.getDBType());fa.setDataSource(ba);return fa};this.protectedInitNoDataSourcePaneUi=function(ua,fa){var ba=$("<div>");Fa.background(ba,"sql");c.layoutCtrlCenterAlign(ba,144);c.layoutCtrl(ba,null,0,144,144);ba.appendTo(fa);fa=$("<div>");Fa.background(fa,"datasource");c.layoutCtrlCenterAlign(fa,144);c.layoutCtrl(fa,null,0,144,144);fa.appendTo(ua);fa=$("<div>");fa.text(r.get("dataSourceDesc","\u6dfb\u52a0\u6570\u636e\u6e90"));fa.css({color:"rgb(102, 102, 102)",
"text-align":"center"});c.layoutCtrlCenterAlign(fa,100);c.layoutCtrlMiddleAlign(fa,100);c.layoutCtrl(fa,null,180,null,null);fa.appendTo(ua)}})})();
//qingVersionTag: 20250324