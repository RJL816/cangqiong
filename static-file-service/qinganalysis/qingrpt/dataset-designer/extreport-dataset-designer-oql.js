var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(q){var t=0;return function(){return t<q.length?{done:!1,value:q[t++]}:{done:!0}}};$jscomp.arrayIterator=function(q){return{next:$jscomp.arrayIteratorImpl(q)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,t,A){if(q==Array.prototype||q==Object.prototype)return q;q[t]=A.value;return q};$jscomp.getGlobal=function(q){q=["object"==typeof globalThis&&globalThis,q,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<q.length;++t){var A=q[t];if(A&&A.Math==Math)return A}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(q,t){var A=$jscomp.propertyToPolyfillSymbol[t];if(null==A)return q[t];A=q[A];return void 0!==A?A:q[t]};
$jscomp.polyfill=function(q,t,A,E){t&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(q,t,A,E):$jscomp.polyfillUnisolated(q,t,A,E))};$jscomp.polyfillUnisolated=function(q,t,A,E){A=$jscomp.global;q=q.split(".");for(E=0;E<q.length-1;E++){var d=q[E];if(!(d in A))return;A=A[d]}q=q[q.length-1];E=A[q];t=t(E);t!=E&&null!=t&&$jscomp.defineProperty(A,q,{configurable:!0,writable:!0,value:t})};
$jscomp.polyfillIsolated=function(q,t,A,E){var d=q.split(".");q=1===d.length;E=d[0];E=!q&&E in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var pa=0;pa<d.length-1;pa++){var wa=d[pa];if(!(wa in E))return;E=E[wa]}d=d[d.length-1];A=$jscomp.IS_SYMBOL_NATIVE&&"es6"===A?E[d]:null;t=t(A);null!=t&&(q?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:t}):t!==A&&(void 0===$jscomp.propertyToPolyfillSymbol[d]&&(A=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[d]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+A+"$"+d),$jscomp.defineProperty(E,$jscomp.propertyToPolyfillSymbol[d],{configurable:!0,writable:!0,value:t})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(q){if(q)return q;var t=function(pa,wa){this.$jscomp$symbol$id_=pa;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:wa})};t.prototype.toString=function(){return this.$jscomp$symbol$id_};var A="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",E=0,d=function(pa){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new t(A+(pa||"")+"_"+E++,pa)};return d},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(q){if(q)return q;q=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),A=0;A<t.length;A++){var E=$jscomp.global[t[A]];"function"===typeof E&&"function"!=typeof E.prototype[q]&&$jscomp.defineProperty(E.prototype,q,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return q},"es6",
"es3");$jscomp.iteratorPrototype=function(q){q={next:q};q[Symbol.iterator]=function(){return this};return q};$jscomp.iteratorFromArray=function(q,t){q instanceof String&&(q+="");var A=0,E=!1,d={next:function(){if(!E&&A<q.length){var pa=A++;return{value:t(pa,q[pa]),done:!1}}E=!0;return{done:!0,value:void 0}}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.keys",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6","es3");$jscomp.findInternal=function(q,t,A){q instanceof String&&(q=String(q));for(var E=q.length,d=0;d<E;d++){var pa=q[d];if(t.call(A,pa,d,q))return{i:d,v:pa}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(q){return q?q:function(t,A){return $jscomp.findInternal(this,t,A).v}},"es6","es3");
(function(){function q(w){var U,W,L,B=[],n={};this.getJqUi=function(){U||(U=$("<div>"),d.layoutCtrlWithLRTB(U,0,0,null,25,0,null),U.addClass("extreport-dataset-designer-left-border"),U.addClass("extreport-dataset-designer-right-border"),L=new Pa,L.setBorderVisible(!1),L.setToggleSelectingEnabled(!1),L.setCustomItemPainter(N),L.setItemModels(B),L.getJqUi().appendTo(U));return U};this.model2Ui=function(z){z=z.getParameters();n={};if(z&&0<z.length){B=z;for(z=0;z<B.length;z++){var F=B[z],V=F.getName();
F.check();n[V]=F.getException()}L.setItemModels(B);W&&W.hide();L.getJqUi().show()}else W||(W=xa.initNoDataUi(U,G.get("noParam","\u5c1a\u672a\u8bbe\u7f6e\u53c2\u6570"))),L.getJqUi().hide(),W.show();z={hint:Object.keys(n),type:"param"};w.fireEvent(za.QUERY_AREA_ADD_AT_HINT_TYPE,z)};var N=function(z,F){z.css("height","30px");z.css("cursor","pointer");if(F){var V=F.getName();V=V?V:"";var O=F.getAlias();O=O?O:"";z.data("model",F);z.attr("name",V);var X=!1;n[V]&&(y(z,G.get("paramErrorTips","\u53c2\u6570\u8bbe\u7f6e\u5b58\u5728\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u8be5\u53c2\u6570\u3002")),
X=!0);var ma=$("<div>");ma.addClass("extreport-dataset-designer-sourcearea-name");ma.css({right:"4px"});O=O+"("+V+")";ma.text(O);ma.attr("title",O);ma.appendTo(z);O=$("<div>");O.addClass("extreport-dataset-designer-paramarea-icon");var ra=L.getSelecteds();ra&&0<ra.length&&ra[0]===F?fa.background(O,oa.dataTypeToIconName(F.getDataType())+"_selected"):fa.background(O,oa.dataTypeToIconName(F.getDataType()));O.appendTo(z);z.on("dblclick",function(ja){w.fireEvent(za.QUERY_AREA_INSERT_TYPE,"@"+V)});z.on("mousedown",
function(ja){var P=L.getJqUi().find(".sa-ctrl-list-item_selected_enabled");ja=P.data("model");P&&ja&&(P=P.find(".extreport-dataset-designer-paramarea-icon"),fa.background(P,oa.dataTypeToIconName(ja.getDataType())));P=z.find(".extreport-dataset-designer-paramarea-icon");fa.background(P,oa.dataTypeToIconName(F.getDataType())+"_selected")});X&&ma.css({right:"20px"})}},y=function(z,F){var V=Qa.createWarning();V.attr("title",F);V.addClass("extreport-dataset-designer-warning-icon");V.appendTo(z)}}function t(w,
U){ta.call(this,w,U);var W=this,L=this.protectedMethod,B;this.model2Ui=function(n){B=L.getDataSetModel();var N=B.getException(Y.OUTPUT_COLUMN);if(N){n=!1;var y=B.getException(Y.OUTPUT_COLUMN,La.OUTPUT_COLUMN_NAME_DUPLICATED);y||(y=B.getException(Y.OUTPUT_COLUMN,La.OUTPUT_COLUMN_KSQL_DISABLE_SELECT_ALL),y||(y=B.getException(Y.OUTPUT_COLUMN,La.OUTPUT_COLUMN_FIELD_CHANGED),n=!0));y?(n&&L.updateOutputTableFromModel(),L.addKnownErrorOutputRefreshMasking(y,n)):L.addExecFailureOutputRefreshMasking(G.get("execError",
"\u201c\u67e5\u8be2\u8bed\u53e5\u201d\u6267\u884c\u5931\u8d25\uff0c\u65e0\u6cd5\u5237\u65b0\u201c\u8f93\u51fa\u5b57\u6bb5\u201d\u3002"),N,!0)}else L.updateOutputTableFromModel(n)};this.protectedGetNoFieldUI=function(){var n=$("<div>");n.appendTo(L.getOutputColumnPane());n.addClass("extreport-dataset-designer-output-fieldtable");var N=$("<div>");N.appendTo(n);var y=$("<div>");y.appendTo(N);fa.background(y,"notable");d.layoutCtrlCenterAlign(y,150);d.layoutCtrlMiddleAlign(y,150);d.layoutCtrl(y,null,
null,null,86);y=$("<div>");var z=B&&B.getDataSetType()==D.OQL_DATASET?G.get("noEntityField","\u4e1a\u52a1\u5b9e\u4f53\u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5"):G.get("noTableField","\u6570\u636e\u6e90\u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5");y.text(z);d.layoutCtrlCenterAlign(y,200);d.layoutCtrlMiddleAlign(y,20);d.layoutCtrl(y,"52%","70%",210,null);y.css({"text-align":"center"});y.appendTo(N);d.layoutCtrlCenterAlign(N,210);
d.layoutCtrlMiddleAlign(N,210);return n};this.protectedCalcGetOutputError=function(n,N,y){8099101==n||8099007==n||8077016==n||8077020==n||8077021==n||8077022==n||8077023==n||8077017==n||8077018==n||8077019==n?(w.fireEvent(za.DATASOURCE_AREA_SHOW_EXP,N),W.showNoFieldUi()):8077014==n||8077015==n||8077024==n?L.addKnownErrorOutputRefreshMasking(N,8077024==n):L.addExecFailureOutputRefreshMasking(G.get("execError","\u201c\u67e5\u8be2\u8bed\u53e5\u201d\u6267\u884c\u5931\u8d25\uff0c\u65e0\u6cd5\u5237\u65b0\u201c\u8f93\u51fa\u5b57\u6bb5\u201d\u3002"),
y,!0)}}function A(w){Aa.call(this,w);var U=this;this.protectedGetHintInSql=function(W,L){var B=U.getDataSetModel(),n=Va.fromDataSetSourceType(B.getDataSetType(),B.getDataSourceType()),N=w.createQueryFacade(function(y){if(y){for(var z=0;z<y.length;z++){var F={};(new Ma).fromJsonObject(y[z],F);U.addHintTables(F)}W.showHint({completeSingle:!1})}},function(y,z){return!0});N.setShowBlocking(!1);N.getTableFields(B.getDataSetType(),n,B.getDataSourceName(),L)}}"undefined"==typeof com&&(com={});"undefined"==
typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.query&&(com.kingdee.bos.extreport.datasetdesigner.query={});var E=com.kingdee.bos.extreport.datasetdesigner.query;E.DataSourceArea=function(w,U){function W(a){KTDefaultCellRender.call(this,
a);var b=this;this.paintCellUI=function(m,u){var x=b.getCurrentRow(),r=b.getCell(),v=r.getValue();r=r.getUserObject();m=$(m);var H=k(v),Ea=v.isEnabled();Ea||H.css({color:"#ddd",cursor:"default"});if(!I&&r||I&&I.getName()==v.getName())v instanceof ua||(T=x),Ea&&nb(H,v);m.on("mousedown",function(Na){v instanceof ua||(T=x);Ea&&nb(H,v)});m.on("dblclick",function(Na){if(Ea){ob(H,v);Na=v.getName();if(v instanceof ua){var Ra=v.getFullTableName();Ra&&(Na=Ra+"."+Na)}n.fireEvent(za.QUERY_AREA_INSERT_TYPE,Na)}});
v instanceof Fa&&(r=v.getChildren())&&0<r.length&&(r=m.children()[0])&&"DIV"==$(r).prop("nodeName").toUpperCase()&&$(r).remove();r=m;u?(r=$(u),H.appendTo(r)):H.appendTo(m);u=r.css("left");u=parseInt(u.substring(0,u.lastIndexOf("px")))-16;isNaN(u)||r.css({left:u+"px"});u=r.width();r.css({width:u+16+"px"})};var k=function(m){var u=m.getName();if(m instanceof ua){u=pb(u,m.getTableName());var x=R==D.OQL_DATASET?m.getDisplayName():m.getType()}else R==D.OQL_DATASET&&(x=m.getDisplayName());var r=$("<div>");
r.addClass("extreport-dataset-designer-tablearea-table-item");var v=$("<div>");v.addClass("extreport-dataset-designer-tablearea-table-icon");fa.background(v,gb(m));v.appendTo(r);v=$("<div>");var H=u;x&&(H=u+"("+x+")");v.attr("title",H);v.addClass("extreport-dataset-designer-tablearea-table-name");$a.highlightKeyWords(v,m instanceof ua?Q:J,H);v.appendTo(r);m.isEnabled()||r.attr("disabled",!0);return r}}function L(a,b,k){ab.call(this);var m=this,u=this.protectedMethod,x,r;(function(){u.setTitle(a);
m.setSize(791,515);u.setSelectable(!0);u.setContentPaneCreator(function(){return b.getJqUi()});b.setMessageCurtain(u.getMessageCurtain());u.setClosingChecker2(function(v){r&&r();var H=b.checkUIInput();if(H)u.getMessageCurtain().showPrompt(H,2E3),v(!1);else{H=k.model;var Ea=H.getDataSourceType(),Na=H.getDataSource(),Ra=b.getModelFromUI(),Cb=Ra.getDataSourceType(),Db=Ra.getDataSource().getName();Na&&Ea==Cb&&Na.getName()==Db||(Ra.setDataSetType(H.getDataSetType()),x&&x(Ra,!Na));v(!0)}},function(v){r&&
r();v(!0)},!0);u.setClosingAction(function(v){})})();this.setFunSuccessCallback=function(v){x=v};this.setFunClosedCallback=function(v){r=v}}var B=this,n=U,N,y,z,F,V,O,X,ma,ra,ja,P,Z,da,ca,aa,na=null,ha,Ga,Ba,S,R=w,la,ya,ba,c,f=[],e={},g=[],p=[],C=[],T,I,ea,J="",Q="",ia=!1,sa=!1,h=!1,l=!1,K=!0,qa,Sa,Ta,bb=!0,hb={},kb;this.getJqUi=function(){N||Eb();return N};this.showNoSourceUi=function(a){y||Fb(a);N.hide();F&&F.hide();y.show();0==document.body.clientHeight&&0==document.body.clientWidth||!K||(K=!1,
setTimeout(function(){lb(a)},0))};this.showPaneUi=function(){y&&y.hide();F&&F.hide();N.show()};this.showNoTableExceptionUiFromModel=function(a){la=a;B.protectedSyncModel(la,S);ya&&ya.setItemModels([la]);a=S.getException(Y.DATA_SOURCE);qb(a);n.fireEvent(za.OUTPUT_AREA_SHOW_HINT,!0)};this.isShowNoTableExceptionUi=function(){return sa};this.setDataSetModel=function(a){S=a};this.setFunGetDataSourceModelCallback=function(a){Sa=a};this.setEnableButtonFunCallBack=function(a){Ta=a};this.dataSourceModel2Ui=
function(a,b){var k=!1;a&&!a.isSameDataSourceModel(la)&&(k=!0);if(k||b)la=a,B.protectedSyncModel(la,S),b=n.createQueryFacade(function(m){bb=!1;B.showPaneUi();S.clearException(Y.DATA_SOURCE);Ta&&Ta(!0,!0,!0);aa||rb();aa.hide();var u=new ib;u.fromJsonObject(m);a:if(m=k,sa&&(sa=!1,y&&y.hide(),F&&F.hide(),N.show(),P.show(),Z.show(),ha.collapseSecondHalf(!1),jb(),n.fireEvent(za.OUTPUT_AREA_SHOW_HINT,!1)),la=u.getDataSourceModel(),B.protectedSyncModel(la,S),ya.setItemModels([la]),ya.setSelecteds([la]),
cb(u.getTableNode()),p){var x=p[0];m?ea=I=null:x=I?I:p[0];Ha();if(x instanceof Fa&&(cb(x.getFieldNode(),"field"),g&&0<g.length)){Ha("field");break a}x?mb(x):Ia(!0)}n.fireEvent(za.QUERY_AREA_SET_HINT_TYPE,u.getMapTableFields())},function(m,u){bb=!1;S.clearException(Y.DATA_SOURCE);S.addException(Y.DATA_SOURCE,"no-sense",u);Ta&&Ta(!1,!1,!0);B.showNoTableExceptionUiFromModel(a);return 8077E3<m?(n.getMessageCurtain().showPrompt(u,5E3),!0):!1}),sa?b.setBlockingJqUi(F):b.setBlockingJqUi(P),b.getUsableTableObject(S.getDataSetId(),
S.toJsonObject())};this.updateUi=function(){jb();h?(db(!0),Ia(!0)):l?(Ha(),Ia(!0)):(Ha(),Ha("field"))};this.resize=function(){jb()};this.protectedInit=function(a){throw Error("override me");};this.protectedCreateDataSourceSelectPane=function(a){throw Error("override me");};this.protectedSyncModel=function(a,b){throw Error("override me");};this.setFunAddDataSourceCallback=function(a){qa=a};var rb=function(){aa=Qa.createWarning();var a=52;Wa.isEnglish()?R==D.SQL_DATASET&&(a+=34):a=R==D.OQL_DATASET?
62:52;d.layoutCtrl(aa,a,5,12,12);aa.appendTo(V)},qb=function(a){a&&(aa||rb(),aa.attr("title",a),aa.show());sa=!0;if(!F){F=$("<div>");F.appendTo(V);d.layoutCtrlWithLRTB(F,0,0,null,90,-8,null);F.addClass("extreport-dataset-designer-notable");a=$("<div>");a.appendTo(F);fa.background(a,"notable");d.layoutCtrlCenterAlign(a,150);d.layoutCtrlMiddleAlign(a,150);d.layoutCtrl(a,null,"50%",null,86);a=$("<div>");var b=R==D.SQL_DATASET?G.get("noTableError","\u6570\u636e\u6e90\u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u83b7\u53d6\u6570\u636e\u8868"):
G.get("noEntityError","\u4e1a\u52a1\u5b9e\u4f53\u5b58\u5728\u9519\u8bef\uff0c\u65e0\u6cd5\u83b7\u53d6\u5b9e\u4f53\u7ed3\u6784");a.text(b);d.layoutCtrlCenterAlign(a,200);d.layoutCtrlMiddleAlign(a,20);d.layoutCtrl(a,"52%","56%",210,null);a.css({"text-align":"center"});a.appendTo(F)}y&&y.hide();N.show();P.hide();Z.hide();ha.collapseSecondHalf(!0);jb();F.show()},sb=function(a,b){var k=!1;b="field"==b;var m=R==D.OQL_DATASET,u="",x="";b&&ea?u=ea.getName():I&&(u=I.getName(),m&&(x=I.getDisplayName()));for(var r=
null,v=0;v<a.length;v++){var H=a[v];m&&!r&&(0<=H.getName().toUpperCase().indexOf(J.toUpperCase())||0<=H.getDisplayName().toUpperCase().indexOf(J.toUpperCase()))&&(r=H);if(u&&u==a[v].getName())if(m){if(0<=u.toUpperCase().indexOf(J.toUpperCase())||0<=x.toUpperCase().indexOf(J.toUpperCase())){k=!0;break}}else{k=!0;break}}k||(b?ea=null:I=m&&r?r:null)},tb=function(a,b){var k=[],m=!0;if(0<=a.getName().toUpperCase().indexOf(b.toUpperCase())||0<=a.getDisplayName().toUpperCase().indexOf(b.toUpperCase()))k.push(a),
m=!1;for(var u=a.getChildren?a.getChildren():[],x=0;x<u.length;x++){var r=tb(u[x],b);r&&0<r.length&&(m&&(k.push(a),m=!1),k=k.concat(r))}return k},ub=function(){if(""==J)p=f;else for(var a=0;a<f.length;a++){var b=f[a];0==b.getSubNodeLevel()&&(p=p.concat(tb(b,J)))}sb(p)},vb=function(){if(""==Q)C=g;else{for(var a=g.length,b=0;b<a;b++){var k=g[b],m=pb(k.getName(),k.getTableName()).toUpperCase(),u;R==D.OQL_DATASET&&(u=k.getDisplayName().toUpperCase());(0<=m.indexOf(Q.toUpperCase())||u&&0<=u.indexOf(Q.toUpperCase()))&&
C.push(k)}sb(C,"field")}},cb=function(a,b){"field"==b?(C=[],g=[]):(p=[],f=[]);a=a.getChildren();for(var k=0;k<a.length;k++)wb(a[k],b);"field"==b?vb():ub()},wb=function(a,b){"field"==b?g.push(a):f.push(a);if(a instanceof Ma||a instanceof Fa)if(a=a.getChildren())for(var k=0;k<a.length;k++)wb(a[k],b)},Eb=function(){V=$("<div>");B.protectedInit(V);var a=$("<div>");a.attr("title",G.get("refresh","\u5237\u65b0"));a.css({cursor:"pointer"});fa.backgroundWithHover(a,"refresh");d.layoutCtrlWithLRTB(a,null,
4,16,67,null,16);a.appendTo(V);a.on("click",function(){B.dataSourceModel2Ui(Sa(S),!0)});ja=$("<div>");Gb(ja);ja.appendTo(V);P=$("<div>");xb(P);P.appendTo(V);Z=$("<div>");xa.createTitle(G.get("field","\u5b57\u6bb5")).appendTo(Z);xb(Z,"field");ha=new ka;ha.setHorizontalSplit(!1);ha.setFirstSize(400,260,-1);ha.setSecondSize(260,260,-1);ha.setResizeMode(ka.RESIZE_MODE_SECOND_FIXED);ha.setFirstChild(ka.createChildWrapper(V));ha.setSecondChild(ka.createChildWrapper(Z));N=ha.getJqUi();n.addListener(za.DATASOURCE_AREA_SHOW_EXP,
function(b){qb(b)})},jb=function(){z&&z.is(":visible")||(ha.setFirstSize(400,260,-1),ha.setSecondSize(260,260,-1),ha.setResizeMode(ka.RESIZE_MODE_SECOND_FIXED),ha.resize(!0))},Fb=function(a){y=$("<div>");y.appendTo(N.parent());d.layoutCtrl(y,null,null,"100%","100%");var b=xa.createTitle(R==D.SQL_DATASET?G.get("dataSource","\u6570\u636e\u6e90"):G.get("entity","\u4e1a\u52a1\u5b9e\u4f53")),k=0;Wa.isEnglish()&&(k=24);d.layoutCtrl(b,null,null,60+k,null);b.appendTo(y);b=$("<div>");b.addClass("extreport-dataset-designer-left-border");
b.addClass("extreport-dataset-designer-right-border");b.addClass("extreport-dataset-designer-top-border");b.addClass("extreport-dataset-designer-bottom-border");b.appendTo(y);d.layoutCtrlWithLRTB(b,0,0,null,25,0,null);z=$("<div>");z.addClass("extreport-dataset-select-source-tip-ui");z.appendTo(b);z.hide();setTimeout(function(){z.show()},0);b=$("<div>");b.appendTo(z);fa.background(b,"NoParam");d.layoutCtrlCenterAlign(b,200);d.layoutCtrlMiddleAlign(b,120);d.layoutCtrl(b,null,130,null,null);b=R==D.SQL_DATASET?
G.get("noAddSourceClick","\u5c1a\u672a\u6dfb\u52a0\u6570\u636e\u6e90\uff0c\u70b9\u51fb\u6dfb\u52a0"):G.get("noAddEntityClick","\u5c1a\u672a\u6dfb\u52a0\u4e1a\u52a1\u5b9e\u4f53\uff0c\u70b9\u51fb\u6dfb\u52a0");k=new pa;k.setFontSize(Oa.getFontSize(),Oa.getFontName());var m=k.measureWidth(b);k=$("<div>");k.text(R==D.SQL_DATASET?G.get("noAddSource","\u5c1a\u672a\u6dfb\u52a0\u6570\u636e\u6e90\uff0c\u70b9\u51fb"):G.get("noAddEntity","\u5c1a\u672a\u6dfb\u52a0\u4e1a\u52a1\u5b9e\u4f53\uff0c\u70b9\u51fb"));
k.css({color:"rgb(102, 102, 102)"});d.layoutCtrlCenterAlign(k,m+5);d.layoutCtrlMiddleAlign(k,100);d.layoutCtrl(k,null,213,null,null);k.appendTo(z);m=$("<div>");m.text(G.get("addSource","\u6dfb\u52a0"));m.attr("title",b);m.on("click",function(){lb(a)});m.addClass("extreport-dataset-designer-text-add");m.appendTo(k)},Hb=function(a){if(!ia){ia=!0;var b=n.createQueryFacade(function(k){sa&&B.dataSourceModel2Ui(la,!0)},function(k,m){S.clearException(Y.DATA_SOURCE);S.addException(Y.DATA_SOURCE,"no-sense",
m);Ta&&Ta(!1,!1,!0);B.showNoTableExceptionUiFromModel(la);return!0},function(){ia=!1;a&&a()});b.setBlockingJqUi(N);b.setShowBlocking(!1);b.checkDataSource(S.getDataSetId(),S.toJsonObject())}},Gb=function(a){var b=new Pa;b.setBorderVisible(!0);b.setToggleSelectingEnabled(!1);b.setCustomItemPainter(function(k,m){k.css("height","30px");k.css("cursor","default");if(m){var u=la.getDataSourceType();k.attr("name",m.getDataSource().getName());var x=$("<div>");x.addClass("extreport-dataset-designer-sourcearea-name");
x.text(m.getDataSourceDisplayName());x.attr("title",m.getDataSourceDisplayAlias());x.appendTo(k);m=$("<div>");m.addClass("extreport-dataset-designer-sourcearea-icon");fa.background(m,u==Ja.DATA_CENTER?"ds_datacenter":u==Ja.SUPER_QUERY?"ds_superquery":u==Ja.OUT_DB||u==Ja.USER_SUPER_QUERY?"ds_outdb":"ds_entity");m.appendTo(k)}var r=$("<div>");R==D.OQL_DATASET?r.attr("title",G.get("switchEntity","\u5207\u6362\u4e1a\u52a1\u5b9e\u4f53")):r.attr("title",G.get("switchDs","\u5207\u6362\u6570\u636e\u6e90"));
r.addClass("extreport-dataset-designer-sourcearea-switch-btn");r.on("mousedown",function(v){v.stopPropagation();Hb(function(){lb(qa)})});fa.backgroundWithHover(r,"switch");r.appendTo(k);r.hide();k.mouseenter(function(){r.show()}).mouseleave(function(){r.hide()})});b.setCustomSelectedsPainter(function(k,m){m&&0<m.length&&(k&&0<k.length&&(k=k[0],k.css("background-color",""),k.css("color","")),m=m[0],m.css("background-color","#eff3fd"),m.css("color","rgb(130, 130, 130)"))});ya=b;ya.setItemModels([]);
b=b.getJqUi();d.layoutCtrlWithLRTB(b,0,0,null,25,0,32);b.appendTo(a)},db=function(a){h=a;J?a?(O||(O=xa.initNoDataUi(P,G.get("noSearchResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"),30)),$(ba.getUI()).hide(),ma&&ma.hide(),O.show()):(ma&&ma.hide(),O&&O.hide(),$(ba.getUI()).show()):a&&!bb?(ma||(ma=xa.initNoDataUi(P,G.get("noTable","\u6682\u65e0\u6570\u636e\u8868"),30)),$(ba.getUI()).hide(),O&&O.hide(),ma.show()):(ma&&ma.hide(),O&&O.hide(),$(ba.getUI()).show())},Ia=function(a){l=
a;Q?a?(X||(X=xa.initNoDataUi(Z,G.get("noSearchResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"),30)),$(c.getUI()).hide(),da.hide(),ra&&ra.hide(),X.show()):(ra&&ra.hide(),X&&X.hide(),da.show(),$(c.getUI()).show()):a&&!bb?(ra||(ra=xa.initNoDataUi(Z,G.get("noField","\u6682\u65e0\u5b57\u6bb5"),30)),$(c.getUI()).hide(),da.hide(),X&&X.hide(),ra.show()):(ra&&ra.hide(),X&&X.hide(),$(c.getUI()).show(),bb?da.hide():da.show())},pb=function(a,b){if(b){var k=a.indexOf(b);-1!=k&&(a=
a.substring(k+b.length+1))}return a},mb=function(a){var b=a.getName();if(!hb[b]){hb[b]=!0;var k=kb=(new Date).getTime()+"";na&&na.remove();na=com.kingdee.bos.qing.framework.common.AbstractFacade.block(Z);var m=Va.fromDataSetSourceType(S.getDataSetType(),S.getDataSourceType()),u=n.createQueryFacade(function(x){hb[b]=!1;if(x){var r=new Ma,v={};r.fromJsonObject(x[0],v);n.fireEvent(za.QUERY_AREA_ADD_HINT_TYPE,v);e[b]=r;kb==k&&I&&b==I.getName()&&(na&&na.remove(),na=null,yb(a),cb(r,"field"),Ha("field"))}},
function(x,r){hb[b]=!1;kb==k&&(na&&na.remove(),na=null,a.setEnabled(!1),wa.refresh(ba),Ia(!0));return!0});u.setShowBlocking(!1);u.getTableFields(S.getDataSetType(),m,S.getDataSourceName(),[b])}},zb=function(a){var b;a instanceof Fa&&(b=a.getFieldNode());b||(b=e[a.getName()]);return b},Ha=function(a){if("field"==a)C&&0<C.length?(Ia(!1),a=Z.width(),Ab(c,C,a)):Ia(!0);else if(p&&0<p.length){db(!1);a=ba;var b=a.keepScrollStatus();b.v&&(b.v=0);a.restoreScrollStatus(b);a=P.width();Ab(ba,p,a);Bb()}else db(!0)},
Ab=function(a,b,k){wa.clear(a);1E3<b.length&&a.setLargeDataMode(!0,!1);a.addColumn().setWidth(k-4-9);if(0!=b.length){k=!1;for(var m,u=0;u<b.length;u++){var x=b[u],r=a.addRow();r.setHeight(30);r.setHide(!1);var v=r.getCell(0);v.setValue(x);x instanceof ua?ea&&ea.getName()==x.getName()&&(v.setUserObject(!0),k=!0):I&&I.getName()==x.getName()&&(v.setUserObject(!0),k=!0,T=r);0==u&&(m=v);x=x.getSubNodeLevel();x=new KTCellTreeModel(x);x.setExpanded(!0);v.setTreeModel(x)}!k&&m&&m.setUserObject(!0)}wa.refresh(a)},
nb=function(a,b){ob(a,b);b instanceof ua||((a=zb(b))?(yb(b),cb(a,"field"),Ha("field")):mb(b))},ob=function(a,b){if(b instanceof ua){var k=$(c.getUI());if(ea){var m=k.find(".extreport-dataset-designer-tablearea-table-item_selected");m&&(m=m.find(".extreport-dataset-designer-tablearea-table-icon"),fa.background(m,gb(ea)))}ea=b}else k=$(ba.getUI()),I&&(m=k.find(".extreport-dataset-designer-tablearea-table-item_selected"))&&(m=m.find(".extreport-dataset-designer-tablearea-table-icon"),fa.background(m,
gb(I))),I=b;k.find(".extreport-dataset-designer-tablearea-table-item").removeClass("extreport-dataset-designer-tablearea-table-item_selected");a.addClass("extreport-dataset-designer-tablearea-table-item_selected");a=a.find(".extreport-dataset-designer-tablearea-table-icon");fa.background(a,gb(b)+"_selected")},gb=function(a){var b="table";a instanceof ua?b="field":R==D.OQL_DATASET&&(b=0==a.getSubNodeLevel()?"entity_head":"entity_sub");return b},yb=function(a){var b=a.getName(),k;R==D.OQL_DATASET&&
(k=a.getDisplayName());k&&(b=k);ca.text(b);ca.attr("title",b);da.show()},Bb=function(){if(T){var a=ba.getRowIndex(T);0<=a&&ba.scrollCellVisible(a,0,!0)}},xb=function(a,b){var k=90;"field"==b&&(k=25);var m=function(v){J=$.trim(v.getText());p=[];if(f&&0<f.length&&(ub(),0<p.length)){db(!1);Ia(!1);Ha();v=I?I:p[0];var H=zb(v);H?(cb(H,"field"),Ha("field")):mb(v);return}db(!0);g=[];Ia(!0)},u=function(v){Q=$.trim(v.getText());C=[];if(g&&0<g.length&&(vb(),0<C.length)){Ia(!1);Ha("field");return}Ia(!0)};(function(v){var H=
new eb;H.setSearchListenerDelay(1E3);H.setShowSearchIcon(!0);H.setPlaceholder(G.get("searchContent","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9"));H.setFontSize(12);"field"==b?(Ba=H,Ba.addSearchListener(u)):(Ga=H,Ga.addSearchListener(m));H=H.getJqUi();H.addClass("extreport-dataset-designer-tablearea-search-box");H.addClass("extreport-dataset-designer-top-border");H.addClass("extreport-dataset-designer-left-border");H.addClass("extreport-dataset-designer-right-border");d.layoutCtrlWithLRTB(H,0,0,null,
k,0,30);H.appendTo(v)})(a);"field"==b&&function(v){var H=$("<div>");H.addClass("extreport-dataset-designer-left-border");H.addClass("extreport-dataset-designer-right-border");da=$("<div>");da.addClass("extreport-dataset-designer-field-table-item");da.appendTo(H);var Ea=$("<div>");Ea.addClass("extreport-dataset-designer-field-table-item-icon");fa.background(Ea,"table");Ea.appendTo(da);ca=$("<div>");ca.text("");ca.addClass("extreport-dataset-designer-field-table-item-name");ca.appendTo(da);da.hide();
k+=32;d.layoutCtrlWithLRTB(H,0,0,null,k,0,30);H.on("click",Bb);H.appendTo(v)}(a);var x=new KTable;x.setCellRender(new W(x));x.setSyncUIWhenModelChanged(!1);x.setColumnFitVisibleWidth(!1);x.setDraggableAdjusting(!0,3,0,new fb);"field"==b?c=x:ba=x;var r=$("<div>");r.addClass("extreport-dataset-designer-left-border");r.addClass("extreport-dataset-designer-right-border");r.addClass("extreport-dataset-designer-bottom-border");k+=30;d.layoutCtrlWithLRTB(r,0,0,null,k,0,null);x=$(x.getUI());x.children().css("overflow-x",
"hidden");d.layoutCtrlWithLRTB(x,1,1,null,3,0,null);x.appendTo(r);r.appendTo(a)},lb=function(a){var b=la?la:new Ca;b.setDataSetType(R);var k={model:b,dataSetModel:S};b=B.protectedCreateDataSourceSelectPane(k);k=R==D.SQL_DATASET?new L(G.get("selectDataSource","\u9009\u62e9\u6570\u636e\u6e90"),b,k):new L(G.get("selectEntity","\u9009\u62e9\u4e1a\u52a1\u5b9e\u4f53"),b,k);k.showDialog();k.setFunSuccessCallback(a);b.getClosedCallback&&k.setFunClosedCallback(b.getClosedCallback())}};E.DataSetQueryTabPane=
function(w,U){Xa.call(this,G.get("query","\u67e5\u8be2"),U);var W=this,L,B,n,N,y,z,F,V,O,X,ma,ra,ja,P,Z,da,ca,aa,na,ha,Ga,Ba,S,R,la,ya,ba;this.showQueryTitleButton=function(h){h.getDataSetType()==D.OQL_DATASET?(Z&&Z.css({display:"none"}),P&&P.css({right:"0px"}),ja&&ja.css({right:"80px"})):Ja.isSuperQuery(h.getDataSourceType())||h.getDataSourceType()==Ja.OUT_DB&&h.getDataSource&&!Ka.isSupportKSQL(h.getDataSource().getDBType())?(ha&&ha.setChecked(!0),Z&&Z.css({display:"none"}),P&&P.css({right:"0px"}),
ja&&ja.css({right:"80px"})):(Z&&Z.css({display:"block"}),P&&P.css({right:"140px"}),ja&&ja.css({right:"220px"}))};this.resize=function(h){B&&B.is(":visible")?da&&da.resize(!0):(da&&da.resize(!0),R&&R.resize(),ca&&ca.resize(!0),aa&&aa.resize(!0),na&&na.resize(!0),ba&&ba.resize(),!h&&c())};this.fireTabChangeEvent=function(){W.resize();var h=W.getDataSetModelVO();h&&(h=h.getDataSetModel())&&ya&&ya.model2Ui(h)};this.setEnableButtonFunCallBack=function(h){Ba=h};this.protectedInit=function(h){L||(R=W.protectedCreatDataSourceArea(),
R.setFunAddDataSourceCallback(I),R.setFunGetDataSourceModelCallback(W.protectedGetDataSourceModel),R.setEnableButtonFunCallBack(Ba),L=R.getJqUi());f();e();g();p();aa=new ka;aa.setHorizontalSplit(!1);aa.setFirstSize(400,260,-1);aa.setSecondSize(260,260,-1);aa.setResizeMode(ka.RESIZE_MODE_SECOND_FIXED);aa.setFirstChild(ka.createChildWrapper(y,function(){S.adjustSqlEditorHeight(aa.getNonemptyFirstWide())}));aa.setSecondChild(ka.createChildWrapper(z));na=new ka;na.setHorizontalSplit(!1);na.setFirstSize(400,
260,-1);na.setSecondSize(260,260,-1);na.setResizeMode(ka.RESIZE_MODE_SECOND_FIXED);na.setFirstChild(ka.createChildWrapper(F));na.setSecondChild(ka.createChildWrapper(V));ca=new ka;ca.setHorizontalSplit(!0);ca.setFirstChild(ka.createChildWrapper(aa.getJqUi(),function(){la&&la.resize()}));ca.setSecondChild(na);ca.setFirstSize(400,400,-1);ca.setSecondSize(260,200,400);ca.setResizeMode(ka.RESIZE_MODE_SECOND_FIXED);N=$("<div>");ca.getJqUi().appendTo(N);da=new ka;da.setHorizontalSplit(!0);da.setFirstSize(260,
200,400);da.setSecondSize(600,-1,-1);da.setResizeMode(ka.RESIZE_MODE_FIRST_FIXED);da.setFirstChild(ka.createChildWrapper(L));da.setSecondChild(ka.createChildWrapper(N,function(){B&&B.is(":visible")&&C();ca&&ca.resize(!0);R&&R.updateUi()}));var l=da.getJqUi();l.addClass("extreport-dataset-designer-tab-pane");l.appendTo(h)};this.protectedUpdateUi=function(h,l){if(h=h.getDataSetModel())if(R.setDataSetModel(h),S.setDataSetModel(h),ba.setDataSetModel(h),h.getSqlType&&(va.SQL==h.getSqlType()?ha.setChecked(!0):
Ga.setChecked(!0)),W.protectedIsNeedShowNoDataSourceUi(h))C(),Ba&&Ba(!1,!1,!1);else{ea();var K=h.getContent(),qa="text/k-sql";h.getDataSetType()==D.OQL_DATASET&&(qa="text/o-sql");c(K,qa);K=W.protectedGetDataSourceModel(h);h.getException(Y.DATA_SOURCE)?(Ba&&Ba(!1,!1,!0),R.showNoTableExceptionUiFromModel(K),ba.showNoFieldUi()):(Ba&&Ba(!0,!0,!0),R.dataSourceModel2Ui(K,R.isShowNoTableExceptionUi()),ba.model2Ui(l));W.showQueryTitleButton(K);ya.model2Ui(h);la.init()}};this.protectedCreatDataSourceArea=
function(){throw Error("override me");};this.protectedIsNeedShowNoDataSourceUi=function(h){throw Error("override me");};this.protectedGetDataSourceModel=function(h){throw Error("override me");};this.protectedInitNoDataSourcePaneUi=function(h,l){throw Error("override me");};var c=function(h,l){S.initSqlEditor(h,l,function(){ba.addOutputRefreshMasking()});S.adjustSqlEditorHeight(aa.getNonemptyFirstWide())},f=function(){if(!y){y=$("<div>");y.addClass("extreport-dataset-designer-bottom-border");var h=
xa.createTitle(G.get("queryStatement","\u67e5\u8be2\u8bed\u53e5"));h.addClass("extreport-dataset-designer-bottom-border");var l=new Ya;l.setIconType(Ya.ICON_TYPE_QUESTION);var K=D.SQL_DATASET==w?G.get("dataTable","\u6570\u636e\u8868"):G.get("entityTable","\u5b9e\u4f53\u7ed3\u6784");l.setTipsText(G.get("queryStatTips","\u5728#1\u3001\u5b57\u6bb5\u3001\u53ef\u7528\u53c2\u6570\u53ca\u53d8\u91cf\u533a\u57df\u53cc\u51fb\u9f20\u6807\u5de6\u952e\uff0c\u53ef\u4ee5\u5728\u67e5\u8be2\u8bed\u53e5\u8f93\u5165\u6846\u4e2d\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u63d2\u5165\u6307\u5b9a\u503c\u3002").replace("#1",
K));l=l.getJqUi();d.layoutCtrlWithLRTB(l,null,null,16,4,null,16);l.css({position:"relative","float":"left","margin-left":"4px"});l.appendTo(h);l=G.get("comment","\u6ce8\u91ca/\u53cd\u6ce8\u91ca");K=new Ua(l);K.addActionListener(function(){S.commentSelectedSqlContent()});P=K.getJqUi();d.layoutCtrlWithLRTB(P,null,140,78,null,null,24);P.attr("title",l);P.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"});P.appendTo(h);l=G.get("format","\u683c\u5f0f\u5316");K=new Ua(l);K.addActionListener(function(){S.formatSelectedSqlContent()});
ja=K.getJqUi();ja.attr("title",l);d.layoutCtrlWithLRTB(ja,null,220,48,null,null,24);ja.appendTo(h);Z=$("<div>");l=new Za;Ga=new Da;Ga.setText("KSQL");ha=new Da;ha.setText("SQL");l.addElement(ha);l.addElement(Ga);l.addChangedListener(function(qa,Sa){(qa=W.getDataSetModelVO())&&(qa=qa.getDataSetModel())&&qa.setSqlType(ha.isChecked()?va.SQL:va.KSQL);ba&&ba.addOutputRefreshMasking()});l=ha.getJqUi();d.layoutCtrlWithLRTB(l,null,0,60,0,null,24);K=Ga.getJqUi();d.layoutCtrlWithLRTB(K,null,70,60,0,null,24);
K.appendTo(Z);l.appendTo(Z);Z.appendTo(h);h.appendTo(y);S=new A(U);ma=S.getJqUi();ma.appendTo(y)}},e=function(){if(!z){z=$("<div>");var h=xa.createTitle(G.get("outputColumn","\u8f93\u51fa\u5b57\u6bb5"));J(h,G.get("collapseOutputColumn","\u6536\u8d77\u8f93\u51fa\u5b57\u6bb5\u9762\u677f"),"downArrow");h.appendTo(z);ba=new t(U,z);ba.initOutputTable()}},g=function(){if(!F){F=$("<div>");F.addClass("extreport-dataset-designer-bottom-border");var h=xa.createTitle(G.get("usableParam","\u53ef\u7528\u53c2\u6570"));
h.addClass("extreport-dataset-designer-bottom-border");J(h,G.get("collapseParam","\u6536\u8d77\u53ef\u7528\u53c2\u6570\u53ca\u53d8\u91cf\u9762\u677f"),"rightArrow");h.appendTo(F);ya=new q(U);ra=ya.getJqUi();ra.appendTo(F)}},p=function(){if(!V){V=$("<div>");var h=xa.createTitle(G.get("variant","\u53d8\u91cf"));la=new M(U,V,h);h.appendTo(V)}},C=function(){if(!B){B=$("<div>");B.addClass("extreport-dataset-designer");B.appendTo(N);d.layoutCtrlWithLRTB(B,0,0,null,25,0,null);n=$("<div id='noDatasource'>");
n.addClass("extreport-dataset-no-source-tip-ui");n.appendTo(B);var h=$("<div id='middle'>");h.appendTo(n);d.layoutCtrlCenterAlign(h,180);d.layoutCtrlMiddleAlign(h,230);var l=$("<div id='left'>");d.layoutCtrlCenterAlign(l,180);d.layoutCtrlMiddleAlign(l,230);l.css({transform:"translateX(-280px)"});l.appendTo(n);W.protectedInitNoDataSourcePaneUi(l,h);l=$("<div>");l.text(G.get("sqlDesc","\u7f16\u5199\u67e5\u8be2\u8bed\u53e5"));l.css({color:"rgb(102, 102, 102)","text-align":"center"});d.layoutCtrlCenterAlign(l,
160);d.layoutCtrlMiddleAlign(l,100);d.layoutCtrl(l,null,180,null,null);l.appendTo(h);h=$("<div id='arrow1'>");fa.background(h,"arrow");d.layoutCtrlCenterAlign(h,64);d.layoutCtrlMiddleAlign(h,64);h.css({transform:"translate(-140px, -43px)"});h.appendTo(n);h=$("<div id='arrow2'>");fa.background(h,"arrow");d.layoutCtrlCenterAlign(h,64);d.layoutCtrlMiddleAlign(h,64);h.css({transform:"translate(140px, -43px)"});h.appendTo(n);h=$("<div id='right'>");d.layoutCtrlCenterAlign(h,180);d.layoutCtrlMiddleAlign(h,
230);h.css({transform:"translateX(280px)"});h.appendTo(n);l=$("<div>");l.appendTo(h);fa.background(l,"param");d.layoutCtrlCenterAlign(l,144);d.layoutCtrl(l,null,0,144,144);l=$("<div>");l.text(G.get("parameterDesc","\u8bbe\u7f6e\u53c2\u6570\u53ca\u63a7\u4ef6"));l.css({color:"rgb(102, 102, 102)","text-align":"center"});d.layoutCtrlCenterAlign(l,100);d.layoutCtrlMiddleAlign(l,100);d.layoutCtrl(l,null,180,null,null);l.appendTo(h)}ca.getJqUi().hide();T(!1);B.show();R.showNoSourceUi(I)},T=function(h){for(var l=
W.getJqUi().parent().parent().children(".sa-ctrl-tab-head"),K,qa=0;qa<l.length;qa++){var Sa=$(l[qa]);Sa.text()!=W.getTitle()&&(K=Sa)}h?K&&K.removeClass("extreport-dataset-designer-disable-param-tab"):K&&K.addClass("extreport-dataset-designer-disable-param-tab")},I=function(h,l){if(l){T(!0);ea();l="SELECT * FROM";var K="text/k-sql";h.getDataSetType()==D.OQL_DATASET&&(l=l+" "+h.getDataSource().getName(),K="text/o-sql");c(l,K);R.showPaneUi();W.resize();la.init();ya.model2Ui(W.getDataSetModelVO().getDataSetModel())}R.dataSourceModel2Ui(h);
W.showQueryTitleButton(h);ba.showTableUi();ba.addOutputRefreshMasking()},ea=function(){B&&B.hide();ca.getJqUi().show()},J=function(h,l,K){var qa=$("<div>");qa.on("click",function(Sa){Q(K)});qa.attr("title",l);qa.addClass("extreport-dataset-designer-collapse-icon");fa.backgroundWithHover(qa,K);qa.appendTo(h)},Q=function(h){"downArrow"==h?(aa.collapseSecondHalf(!0),z.show(!1),sa(!0),y.removeClass("extreport-dataset-designer-bottom-border")):"rightArrow"==h?(ca.collapseSecondHalf(!0),ia(!0)):"upArrow"==
h?(aa.collapseSecondHalf(!1),z.show(!0),sa(!1),y.addClass("extreport-dataset-designer-bottom-border")):"leftArrow"==h&&(ca.collapseSecondHalf(!1),ia(!1))},ia=function(h){if(!O){O=$("<div>");O.addClass("extreport-dataset-designer-show-param-btn");O.on("click",function(){Q("leftArrow")});var l=$("<div>");l.appendTo(O);fa.backgroundWithHover(l,"leftArrow");var K=$("<div>");K.text(G.get("etc","..."));K.appendTo(O);d.layoutCtrlCenterAlign(K,16);d.layoutCtrlWithLRTB(K,null,null,null,25,0,null);d.layoutCtrlCenterAlign(l,
16);d.layoutCtrlWithLRTB(l,null,null,null,5,null,16);O.appendTo(da.getJqUi())}l=X&&!X.is(":hidden");h?(O.show(),ca.setSplitLineWide(27),S&&S.getJqUi().removeClass("extreport-dataset-designer-right-border"),l?X.addClass("extreport-dataset-designer-hidden-border-right"):ba.hideBorderRight()):(O.hide(),ca.setSplitLineWide(8),S&&S.getJqUi().addClass("extreport-dataset-designer-right-border"),l?X.removeClass("extreport-dataset-designer-hidden-border-right"):ba.showBorderRight());ca.resize()},sa=function(h){if(!X){X=
$("<div>");X.on("click",function(){Q("upArrow")});X.addClass("extreport-dataset-designer-show-output-btn");var l=$("<div>");l.appendTo(X);fa.backgroundWithHover(l,"upArrow");var K=$("<div>");K.text(G.get("outputColumn","\u8f93\u51fa\u5b57\u6bb5"));K.appendTo(X);d.layoutCtrlMiddleAlign(K,16);d.layoutCtrlMiddleAlign(l,16);d.layoutCtrlWithLRTB(K,5,null,120,null,null,null);d.layoutCtrlWithLRTB(l,null,5,16,null,null,16);X.appendTo(aa.getJqUi())}l=O&&!O.is(":hidden");h?(X.show(),aa.setSplitLineWide(27),
l&&X.addClass("extreport-dataset-designer-hidden-border-right")):(X.hide(),aa.setSplitLineWide(8),l&&X.removeClass("extreport-dataset-designer-hidden-border-right"),l?ba.hideBorderRight():ba.showBorderRight());aa.resize()}};var d,pa,wa,Qa,G,Oa,eb,ab,ka,Ya,Da,Za,Ua,Pa,za,Wa,fa,Xa,fb,$a,xa,M,Aa,ta,D,Y,La,ib,Ma,Fa,ua,Ca,Ka,Ja,va,oa,Va;(function(){var w=com.kingdee.bos.qing.common;d=w.DomUtil;pa=w.TextMeasurer;w=com.kingdee.bos.qing.common.ui;wa=w.TableUtil;Qa=w.CommonIconUtil;w=com.kingdee.bos.qing.framework.common;
G=w.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);Oa=w.GlobalFont;w=com.kingdee.bos.qing.ui.component;ab=w.AbstractModalDialog;ka=w.SplitPane;Ya=w.HelpIcon;Da=w.RadioButton;Za=w.RadioButtonGroup;Ua=w.WorkButton;Pa=w.List;w=com.kingdee.bos.extreport.datasetdesigner.common;za=w.EventType;Wa=w.LanguageUtil;fa=com.kingdee.bos.extreport.datasetdesigner.Icons;w=com.kingdee.bos.extreport.datasetdesigner.common.ui;Xa=w.AbstractDataSetTabPane;fb=w.TableCustomExpandor;
eb=w.SearchBox;$a=w.SearchHelper;xa=w.QueryCommonUi;M=w.SystemAndMacroVarArea;Aa=w.QueryArea;ta=w.OutputTableArea;w=com.kingdee.bos.extreport.datasetdesigner.model;D=w.DataSetType;Y=w.DataSetModelCheckType;La=w.DataSetModelCheckCode;ib=w.DataSourceTableObjectVO;Ma=w.FolderNode;Fa=w.EntityNode;ua=w.FieldNode;Ca=w.DataSourceModel;Ka=w.DBType;Ja=w.DataSourceType;va=w.SqlType;oa=w.ParamDataType;Va=w.RptSourceType})()})();(function(){function q(M,Aa){function ta(D){function Y(c){KTDefaultCellRender.call(this,c);var f=this;this.paintCellUI=function(e,g){var p=f.getCell().getValue(),C=p.getName(),T=p.getDisplayName(),I=T+"("+p.getCommentInfo()+")",ea=ua.find(".sa-ctrl-switcher-thumb").parent();if(p instanceof Pa){var J=$("<div>");J.addClass("extreport-dataset-designer-select-entity-table-item");J.attr("table-name",A.encode(C));J.attr("title",T);var Q=$("<div>");Q.addClass("extreport-dataset-designer-select-entity-table-item-text");
Q.css("left","0px");Q.css("top","-2px");Q.text(T);J.append(Q);e=$(e);e.css("left","4px");e.append(J)}else{J=$("<div>");J.addClass("extreport-dataset-designer-select-entity-table-item");J.css("margin-left","-16px");J.attr("table-name",A.encode(C));J.attr("parent-name",A.encode(p.getParentNode().getName()));ea.hasClass("sa-ctrl-switcher_on")?J.attr("title",I):J.attr("title",T);J.on("mousedown",ya);var ia=new Qa;Q=ia.getJqUi();Q.attr("table-name-component",A.encode(p.getName()));Q.addClass("extreport-dataset-designer-select-entity-table-item-component");
Q.data("object",p);ia.setUserObject(p);Q.data("model",ia);ia.addCheckedListener(ba);W[p.getName()]?(ia.setChecked(!1),ia.setEnabled(!1)):n==p.getName()&&(U=ia,ia.setChecked(!0));Va.addElement(ia);var sa=$("<div>");t.layoutCtrl(sa,25,0,300,23);sa.addClass("extreport-dataset-designer-select-entity-table-item");var h=$("<div>");h.addClass("extreport-dataset-designer-select-entity-table-item-icon");var l=p.getType();Da.background(h,l+"_head");Q=$("<div>");Q.addClass("extreport-dataset-designer-select-entity-table-item-text");
W[C]&&Q.css("color","#c0c0c0");ea.hasClass("sa-ctrl-switcher_on")?(Q.text(I),Q.attr("entity-coding",T)):(Q.text(T),Q.attr("entity-coding",I));"xml"==l&&Q.attr("title",I);T=ia.getJqUi();J.append(T);sa.append(h);sa.append(Q);J.append(sa);n==p.getName()&&ia.setChecked(!0);""!=n&&n==C&&(sa.addClass("extreport-dataset-designer-select-entity-table-item_selected"),Da.background(h,l+"_head_selected"));e=$(e);e.css("overflow","visible")}g?(g=$(g),g.css("overflow","visible"),J.appendTo(g)):J.appendTo(e);t.layoutCtrlWithLRTB(J,
0,0,null,0,0,null)}}function La(){var c,f;this.setJqLeftPane=function(e){c=e};this.getSwitchButtonStatus=function(){return f.isOn()};this.displayEntityCodingPane=function(e,g,p,C,T){var I=0;ka.isEnglish()&&(I=20);var ea=new Oa;ea.setText(p);ea=ea.getJqUi();ea.attr("title",p);t.layoutCtrlWithLRTB(ea,8,null,105+I,2,10,23);f=new ab;f.setOn(!1);f.addStateChangeListener(function(){var J=$(e);$(g);for(var Q=0;Q<J.length;Q++){var ia=J.eq(Q);if(ia.attr("entity-coding")){var sa=ia.attr("entity-coding"),h=
ia.text();ia.text(sa);ia.parents(C).attr("title",sa);ia.attr("entity-coding",h)}}T(f.isOn())});p=f.getJqUi();t.layoutCtrlWithLRTB(p,120+I,null,35,2,10,23);I=$("<div>");I.addClass("extreport-dataset-designer-select-entity-show-name");I.attr("id","extreport-dataset-designer-select-entity-show-comment");I.css("margin-bottom","-3px");p.appendTo(I);ea.appendTo(I);I.appendTo(c);c.parents(".sa-ctrl-dialog-padding").css("overflow","visible")}}function ib(){var c,f,e,g,p;this.getJqUi=function(){if(!c){c=$("<div>");
c.addClass("extreport-dataset-designer-select-entity-preview");var C=(new Oa(d.get("preview","\u9884\u89c8"))).getJqUi();C.addClass("extreport-dataset-designer-select-entity-preview-label");p=new eb;p.setText(d.get("enablePreview","\u542f\u7528\u9884\u89c8"));p.setChecked(!0);p.addCheckedListener(g);var T=p.getJqUi();T.addClass("extreport-dataset-designer-select-entity-preview-checkbox");c.append(C);c.append(T);e=E.createTable();C=$(e.getUI());C.addClass("extreport-dataset-designer-select-entity-preview-table");
c.append(C)}return c};this.setSelectedTableName=function(C){f=C};this.getSelectedTableName=function(){return f};this.setEnablePreviewFunction=function(C){g=C};this.getPreviewTable=function(){return e};this.relayoutViews=function(){e.relayoutViews()};this.getCheckBoxIsChecked=function(){return p.isChecked()}}var Ma=this,Fa,ua,Ca,Ka,Ja,va,oa,Va=new G,w=new Qa,U,W={},L=[],B,n,N={},y={},z={};this.getJqUi=function(){Fa||(Fa=$("<div>"),ua=$("<div>"),Ca=$("<div>"),ua.append(Ca),Ga(),oa=new ib,oa.setEnablePreviewFunction(Ba),
oa.setSelectedTableName(n),Ka=oa.getJqUi(),Aa.addWindowResizeListener(R),la());return Fa};this.setMessageCurtain=function(c){Ja=c};this.getMessageCurtain=function(){return Ja};this.checkUIInput=function(){if(!U)return d.get("noEntitySelected","\u8bf7\u9009\u62e9\u4e00\u4e2a\u5b9e\u4f53\u3002");L=[];B=[];n=null;N={};y={}};this.getModelFromUI=function(){var c=U.getJqUi().data("object");c||(c=U.getUserObject());var f=new fa;f.setDataSetType(Ua.OQL_DATASET);f.setDataSourceType(-1);var e=new Xa;e.setName(c.getCommentInfo());
e.setAlias(c.getDisplayName());f.setDataSource(e);return f};this.getClosedCallback=function(){return S};this.getTableSearchBoxPlaceholder=function(c){var f=d.get("searchEntityName","\u641c\u7d22\u5b9e\u4f53\u540d\u79f0");c&&(f=f+"/"+d.get("mark","\u6807\u8bc6"));return f};this.setTableSearchBoxPlaceholder=function(c){va.setPlaceholder(Ma.getTableSearchBoxPlaceholder(c))};var F=function(c){c.find(".extreport-dataset-designer-select-entity-waiting").remove()},V=function(c,f,e){F(f);var g=$("<div>");
g.text(c);g.addClass("extreport-dataset-designer-select-entity-waiting");g.css("top",e);g.appendTo(f)},O=function(c){var f=new KTable,e=$(f.getUI());e.children().css("overflow-x","hidden");f.setCellRender(new Y(f));f.setSyncUIWhenModelChanged(!1);f.setLargeDataMode(!0,!1);f.addColumn().setWidth(300);f.addTreeExpandListener(function(){var g=f.keepScrollStatus();g.v&&(g.v+=1);f.restoreScrollStatus(g)});X(f,c);Va.addElement(w);f.updateUI();return e},X=function(c,f){var e=B;if(0==e.length)return!1;for(var g=
0;g<e.length;g++){var p=e[g],C=c.addRow();C.setHeight(23);var T=C.getCell(0);T.setValue(p);var I=p.getSubNodeLevel(),ea=new KTCellTreeModel(I);var J=p.getName();J=n?-1<n.indexOf(J):!1;f||J?ea.setExpanded(!0):ea.setExpanded(!1);!f&&0<I&&(I=C.setHide,p=(p=p.getParentNode())?!(n&&-1<n.indexOf(p.getName())):!1,I.call(C,p));T.setTreeModel(ea)}},ma=function(c){B=[];var f;va&&(f=va.getText().trim());if(f)for(var e=0;e<L.length;e++){var g=L[e];0==g.getSubNodeLevel()&&(B=B.concat(ra(g,f)))}else B=L;Ca.empty();
0==B.length?(F(Ca),e=new Oa(d.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),f||e.setText(d.get("noTable","\u6682\u65e0\u6570\u636e\u8868")),e.setAlign(Oa.ALIGN_CENTER),f=e.getJqUi(),f.addClass("extreport-dataset-designer-select-entity-table-area-prompt"),Ca.append(f)):(e=$("<div>"),e.addClass("extreport-dataset-designer-select-entity-table-area"),f=O(f?!0:!1),e.append(f),Ca.append(e));1==L.length&&1==c&&(c=L[0].getName(),(f=$(va.getJqUi()).parent().find("[table-name='"+
A.encode(c)+"']").find(".extreport-dataset-designer-select-entity-table-item-component").data("model"))&&f.setChecked(!0),ja(c));n&&ja(n)},ra=function(c,f){var e=[];if(c instanceof za){var g=$(".sa-ctrl-switcher-thumb").parent();0<=c.getDisplayName().toUpperCase().indexOf(f.toUpperCase())?e.push(c):g.hasClass("sa-ctrl-switcher_on")&&0<=c.getCommentInfo().toUpperCase().indexOf(f.toUpperCase())&&e.push(c)}else{g=!0;for(var p=c.getChildren(),C=0;C<p.length;C++){var T=ra(p[C],f);T&&0<T.length&&(g&&(e.push(c),
g=!1),e=e.concat(T))}}return e},ja=function(c){n&&ha(!1);(n=c)&&ha(!0);var f=N[c];f?ca(f,c)||aa(f):na(c)},P=function(c){var f=oa.getPreviewTable();E.clear(f);if(c){for(var e=E.createHeadRow(f),g=c.getFields(),p=g.length,C=0;C<p;C++){var T=g[C];f.addColumn(T.getName()).setWidth(100);e.getCell(C).setValue(T.getAlias())}p=c.getData();e=p.length;C=0;for(T=Math.min(e,10);C<T;C++)for(var I=p[C],ea=E.createRow(f),J=0;J<I.length;J++){var Q=I[J];ea.getCell(J).setValue(Q)}C=10<e;g=50<=g.length;0==e?(g=d.get("noData",
"\u6ca1\u6709\u6570\u636e"),Z(g)):C||g?!C&&g?(g=d.get("totalRows","\u603b\u5171#1\u884c\u6570\u636e").replace("#1",e),g+=d.get("comma","\uff0c")+d.get("dataShownCols","\u4ec5\u9884\u89c8\u524d#1\u5217\u6570\u636e").replace("#1",50),Z(g,e)):(C&&!g?(g=d.get("loadingTotalRows","\u6b63\u5728\u8ba1\u7b97\u603b\u884c\u6570\uff0c\u8bf7\u7a0d\u5019...."),Z(g,e),g=d.get("dataShownRows","\u4ec5\u9884\u89c8\u524d#1\u884c\u6570\u636e").replace("#1",10)):(g=d.get("loadingTotalRows","\u6b63\u5728\u8ba1\u7b97\u603b\u884c\u6570\uff0c\u8bf7\u7a0d\u5019...."),
Z(g,e),g=d.get("dataShownRowsAndCols","\u4ec5\u9884\u89c8\u524d#1\u884c\u3001\u524d#2\u5217\u6570\u636e"),g=g.replace("#1",10),g=g.replace("#2",50)),g=d.get("totalRows","\u603b\u5171#1\u884c\u6570\u636e")+d.get("comma","\uff0c")+g,da(c.getTableName(),g)):(g=d.get("totalRows","\u603b\u5171#1\u884c\u6570\u636e").replace("#1",e),Z(g,e))}E.refresh(f)},Z=function(c,f){var e=oa.getPreviewTable(),g=10;f&&10>f&&(g=f);e.getRowsCount()-E.getHeadRowCount()==g||0==e.getRowsCount()-E.getHeadRowCount()?(f=E.createRow(e),
f.getCell(0).setValue(c),c=new KTStyle,c.setBackgroundColor(com.kingdee.bos.qing.common.CommonTableSkin.ODD_ROW_BACKGROUND_COLOR),f.setStyle(c),c=new KTStyle,c.setTextAlign("left"),f.getCell(0).setStyle(c),E.refresh(e)):e.getRowsCount()-E.getHeadRowCount()==g+1&&(f=e.getRowsCount()-1,e.getRow(f).getCell(0).setValue(c),E.refresh(e))},da=function(c,f){var e=y[c];e?(f=f.replace("#1",e),Z(f,e)):(e=Aa.createQueryFacade(function(g){n==c&&(y[c]=g,f=f.replace("#1",g),Z(f,g))},function(g,p){f=d.get("loadingTotalRowsError",
"\u83b7\u53d6\u603b\u884c\u6570\u5931\u8d25");Z(f);return!0}),e.setShowBlocking(!1),e.getEntityDataCount(c))},ca=function(c,f){if(0==c.getFields().length){Ma.getMessageCurtain().showPrompt(d.get("noDataAndUnableToSelect","\u8be5\u8868\u6ca1\u6709\u6570\u636e\uff0c\u65e0\u6cd5\u88ab\u9009\u4e2d\u3002"));c=Ca.find("[table-name='"+A.encode(f)+"']");var e=c.find(".extreport-dataset-designer-select-entity-table-item-component"),g=e.data("model");g&&(g.isChecked()&&(w.setChecked(!0),g.setEnabled(!1)),W[f]=
!0);c.find(".extreport-dataset-designer-select-entity-table-item-text").css("color","#c0c0c0");e.data("object");U=null;P(null);V(d.get("noDataAndUnableToSelect","\u8be5\u8868\u6ca1\u6709\u6570\u636e\uff0c\u65e0\u6cd5\u88ab\u9009\u4e2d\u3002"),Ka.find(".extreport-dataset-designer-select-entity-preview-table"),10);return!0}return!1},aa=function(c){P(null);F(Ka.find(".extreport-dataset-designer-select-entity-preview-table"));oa.getCheckBoxIsChecked()&&P(c)},na=function(c){oa.getCheckBoxIsChecked()&&
(P(null),V(d.get("loadingPreviewData","\u6b63\u5728\u83b7\u53d6\u9884\u89c8\u6570\u636e\uff0c\u8bf7\u7a0d\u5019\u2026\u2026"),Ka.find(".extreport-dataset-designer-select-entity-preview-table"),10));if(!z[c]){z[c]=!0;var f=Aa.createQueryFacade(function(e){z[c]=!1;var g=new Wa;e&&g.fromJsonObject(e);N[c]=g;n==c&&!ca(g,c)&&oa.getCheckBoxIsChecked()&&(F(Ka.find(".extreport-dataset-designer-select-entity-preview-table")),P(g))},function(e,g){z[c]=!1;return n==c?(F(Ka.find(".extreport-dataset-designer-select-entity-preview-table")),
!1):!0});f.setShowBlocking(!1);f.getEntityPreviewData(c)}},ha=function(c){var f=$(va.getJqUi()).parent().find("[table-name='"+A.encode(n)+"']"),e=f.find(".extreport-dataset-designer-select-entity-table-item-component"),g=f.find(".extreport-dataset-designer-select-entity-table-item");if(e=e.data("object"))e=e.getType(),f=f.find(".extreport-dataset-designer-select-entity-table-item-icon"),c?(g.addClass("extreport-dataset-designer-select-entity-table-item_selected"),Da.background(f,e+"_head_selected")):
c||(g.removeClass("extreport-dataset-designer-select-entity-table-item_selected"),Da.background(f,e+"_head"))},Ga=function(){Ca.empty();V(d.get("loadingData","\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019\u2026\u2026"),Ca,20);var c=function(e,g){L.push(e);var p=e.getCommentInfo();p&&p==g&&(n=e.getName());if(e instanceof Pa&&(e=e.getChildren()))for(p=0;p<e.length;p++)c(e[p],g)},f=Aa.createQueryFacade(function(e){var g=new Pa;g.fromJsonObject(e);var p;D&&(e=D.model.getDataSource())&&e.getName()&&(p=e.getName());
g=g.getChildren();for(e=0;e<g.length;e++)c(g[e],p);B=L;0<L.length&&(P(null),va=new pa,va.addSearchListener(ma),va.setPlaceholder(Ma.getTableSearchBoxPlaceholder(!1)),va.setShowSearchIcon(!0),va.setFontSize(12),p=va.getJqUi(),p.addClass("extreport-dataset-designer-select-entity-searchbox"),ua.prepend(p));ma(!0);p=new La;p.setJqLeftPane(ua);g=d.get("displayEntityMark","\u663e\u793a\u5b9e\u4f53\u6807\u8bc6");p.displayEntityCodingPane(".extreport-dataset-designer-select-entity-table-item-text",".extreport-dataset-designer-select-entity-table-item-name",
g,".extreport-dataset-designer-select-entity-table-item",Ma.setTableSearchBoxPlaceholder)},function(e,g){return 8077E3<e?(Aa.getMessageCurtain().showPrompt(g,5E3),!0):!1});f.setShowBlocking(!1);f.getUsableEntities()},Ba=function(){if(oa.getCheckBoxIsChecked()){$(oa.getPreviewTable().getUI()).show();var c=N[n];c&&aa(c)}else $(oa.getPreviewTable().getUI()).hide()},S=function(){Aa.removeWindowResizeListener(R)},R=function(){oa&&E.refresh(oa.getPreviewTable())},la=function(){var c=new wa;c.setHorizontalSplit(!0);
c.setEnabled(!0);c.setFirstSize(200,185,300);c.setSecondSize(550,0,-1);c.setResizeMode(wa.RESIZE_MODE_FIRST_FIXED);c.setFirstChild(wa.createChildWrapper(ua));c.setSecondChild(wa.createChildWrapper(Ka,function(){oa.relayoutViews()}));c.getJqUi().appendTo(Fa)},ya=function(c){c=$(c.currentTarget);c=A.decode(c.attr("table-name"));n!=c&&ja(c)},ba=function(c,f){var e=c.getJqUi().data("object");f&&(c.isChecked()?(U&&U.setChecked(!1),U=c,n=e.getName(),ja(n)):U&&!U.isEnabled()&&(U=null))}}xa.call(this,M,Aa);
this.protectedInit=function(D){var Y=Za.createTitle(d.get("entity","\u4e1a\u52a1\u5b9e\u4f53"));t.layoutCtrl(Y,null,null,60,null);Y.appendTo(D);Y=Za.createTitle(d.get("entityTable","\u5b9e\u4f53\u7ed3\u6784"));t.layoutCtrl(Y,null,65,null,null);Y.appendTo(D)};this.protectedCreateDataSourceSelectPane=function(D){return new ta(D)};this.protectedSyncModel=function(D,Y){(D=D.getDataSource())&&Y.setEntityName(D.getName())}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee=
{});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.oql&&(com.kingdee.bos.extreport.datasetdesigner.oql={});var t,A,E,d,pa,wa,Qa,G,Oa,eb,ab,ka,Ya,Da,Za,Ua,Pa,za,Wa,fa,Xa,fb,$a,xa;(function(){var M=com.kingdee.bos.qing.common;t=M.DomUtil;A=M.Base32Util;M=com.kingdee.bos.qing.common.ui;E=M.TableUtil;M=com.kingdee.bos.qing.framework.common;d=M.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);
M=com.kingdee.bos.qing.ui.component;wa=M.SplitPane;Qa=M.RadioButton;G=M.RadioButtonGroup;Oa=M.Label;eb=M.CheckBox;ab=M.SwitchButton;M=com.kingdee.bos.extreport.datasetdesigner.common;ka=M.LanguageUtil;M=com.kingdee.bos.extreport.datasetdesigner.common.query;Ya=M.TabQueryPaneFactory;Da=com.kingdee.bos.extreport.datasetdesigner.Icons;M=com.kingdee.bos.extreport.datasetdesigner.common.ui;pa=M.SearchBox;Za=M.QueryCommonUi;M=com.kingdee.bos.extreport.datasetdesigner.model;Ua=M.DataSetType;Pa=M.FolderNode;
za=M.LeafNode;Wa=M.EntityPreviewData;fa=M.DataSourceModel;Xa=M.NameAliasPair;fb=M.SqlContentParser;M=com.kingdee.bos.extreport.datasetdesigner.query;$a=M.DataSetQueryTabPane;xa=M.DataSourceArea})();Ya.addQueryPane(Ua.OQL_DATASET,function(M,Aa){$a.call(this,M,Aa);this.protectedCreatDataSourceArea=function(){return new q(M,Aa)};this.protectedIsNeedShowNoDataSourceUi=function(ta){ta=ta.getContent();return!ta||0==ta.trim().length};this.protectedGetDataSourceModel=function(ta){var D=new fa;D.setDataSetType(ta.getDataSetType());
var Y=new Xa,La=fb.parseTable(ta.getContent());ta=0<La.length?La[0]:ta.getEntityName();Y.setName(ta);D.setDataSource(Y);return D};this.protectedInitNoDataSourcePaneUi=function(ta,D){var Y=$("<div>");Da.background(Y,"oql");t.layoutCtrlCenterAlign(Y,144);t.layoutCtrl(Y,null,0,144,144);Y.appendTo(D);D=$("<div>");Da.background(D,"boEntity");t.layoutCtrlCenterAlign(D,144);t.layoutCtrl(D,null,0,144,144);D.appendTo(ta);D=$("<div>");D.text(d.get("boEntityDesc","\u6dfb\u52a0\u4e1a\u52a1\u5b9e\u4f53"));D.css({color:"rgb(102, 102, 102)",
"text-align":"center"});t.layoutCtrlCenterAlign(D,100);t.layoutCtrlMiddleAlign(D,100);t.layoutCtrl(D,null,180,null,null);D.appendTo(ta)}})})();
//qingVersionTag: 20250324