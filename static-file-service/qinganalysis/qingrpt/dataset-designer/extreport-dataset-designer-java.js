var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(t,w,p){t instanceof String&&(t=String(t));for(var M=t.length,D=0;D<M;D++){var b=t[D];if(w.call(p,b,D,t))return{i:D,v:b}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,w,p){if(t==Array.prototype||t==Object.prototype)return t;t[w]=p.value;return t};$jscomp.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var w=0;w<t.length;++w){var p=t[w];if(p&&p.Math==Math)return p}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(t,w){var p=$jscomp.propertyToPolyfillSymbol[w];if(null==p)return t[w];p=t[p];return void 0!==p?p:t[w]};
$jscomp.polyfill=function(t,w,p,M){w&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(t,w,p,M):$jscomp.polyfillUnisolated(t,w,p,M))};$jscomp.polyfillUnisolated=function(t,w,p,M){p=$jscomp.global;t=t.split(".");for(M=0;M<t.length-1;M++){var D=t[M];if(!(D in p))return;p=p[D]}t=t[t.length-1];M=p[t];w=w(M);w!=M&&null!=w&&$jscomp.defineProperty(p,t,{configurable:!0,writable:!0,value:w})};
$jscomp.polyfillIsolated=function(t,w,p,M){var D=t.split(".");t=1===D.length;M=D[0];M=!t&&M in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var b=0;b<D.length-1;b++){var e=D[b];if(!(e in M))return;M=M[e]}D=D[D.length-1];p=$jscomp.IS_SYMBOL_NATIVE&&"es6"===p?M[D]:null;w=w(p);null!=w&&(t?$jscomp.defineProperty($jscomp.polyfills,D,{configurable:!0,writable:!0,value:w}):w!==p&&(void 0===$jscomp.propertyToPolyfillSymbol[D]&&(p=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[D]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(D):$jscomp.POLYFILL_PREFIX+p+"$"+D),$jscomp.defineProperty(M,$jscomp.propertyToPolyfillSymbol[D],{configurable:!0,writable:!0,value:w})))};$jscomp.polyfill("Array.prototype.find",function(t){return t?t:function(w,p){return $jscomp.findInternal(this,w,p).v}},"es6","es3");
$jscomp.polyfill("String.prototype.replaceAll",function(t){return t?t:function(w,p){if(w instanceof RegExp&&!w.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return w instanceof RegExp?this.replace(w,p):this.replace(new RegExp(String(w).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),p)}},"es_2021","es3");
$jscomp.checkStringArgs=function(t,w,p){if(null==t)throw new TypeError("The 'this' value for String.prototype."+p+" must not be null or undefined");if(w instanceof RegExp)throw new TypeError("First argument to String.prototype."+p+" must not be a regular expression");return t+""};
$jscomp.polyfill("String.prototype.startsWith",function(t){return t?t:function(w,p){var M=$jscomp.checkStringArgs(this,w,"startsWith");w+="";var D=M.length,b=w.length;p=Math.max(0,Math.min(p|0,M.length));for(var e=0;e<b&&p<D;)if(M[p++]!=w[e++])return!1;return e>=b}},"es6","es3");$jscomp.polyfill("Object.is",function(t){return t?t:function(w,p){return w===p?0!==w||1/w===1/p:w!==w&&p!==p}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(t){return t?t:function(w,p){var M=this;M instanceof String&&(M=String(M));var D=M.length;p=p||0;for(0>p&&(p=Math.max(p+D,0));p<D;p++){var b=M[p];if(b===w||Object.is(b,w))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(t){return t?t:function(w,p){return-1!==$jscomp.checkStringArgs(this,w,"includes").indexOf(w,p||0)}},"es6","es3");
(function(){function t(A){Ua.call(this,A);var u=this,E,c=0,l=0,h=0,y=!1,I,X,qa="",Qa=!1;this.copyValue=function(g){u.setBindType(g.getBindType());u.setBindDataValue(g.getBindDataValue());u.setBindDataAlias(g.getBindDataAlias());u.setDefaultValue(g.getDefaultValue())};this.setChange=function(g){Qa=g?!0:Qa};this.isChange=function(){return Qa};this.checkHasNotNullExp=function(){if(n.isEmptyStr(qa)&&y)return!0};this.getName=function(){return E};this.getDataType=function(){return c};this.getInputValueType=
function(){return l};this.isRequired=function(){return y};this.getBindType=function(){return h};this.setBindType=function(g){u.getModel().setDirty(h!==g);u.setChange(h!==g);h=g};this.getBindDataValue=function(){return I};this.setBindDataValue=function(g){u.getModel().setDirty(I!==g);u.setChange(I!==g);I=g};this.getBindDataAlias=function(){return n.isNotEmptyStr(X)?X:I};this.setBindDataAlias=function(g){X=g};this.getDefaultValue=function(){return qa};this.setDefaultValue=function(g){u.getModel().setDirty(qa!=
g);u.setChange(qa!=g);qa=g;u.getModel().removeException(Ja.JAVA_PARAM,E)};this.check=function(){var g=u.getModel(),Ca=g.getParameters();g.removeException(Ja.DATA_CLIENT_JAVA_PARAM_ERROR,E);var na=l==M.MULTIPLE,ea=u.getDefaultValue(),J=g.getException(Ja.JAVA_PARAM_BIND,E);n.isEmptyStr(J)&&(J=g.getException(Ja.JAVA_PARAM,E));if(n.isEmptyStr(J)&&h==D.PARAM&&n.isNotEmptyStr(I)&&Ca){for(var W=!1,aa=0;aa<Ca.length;aa++)if(Ca[aa].getName()==I){W=!0;break}W||(J=ca.get("deleteParamTips","\u7a0b\u5e8f\u53c2\u6570\u7ed1\u5b9a\u7684\u53c2\u6570 \u201c#1\u201d \u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002").replace("#1",
I))}if(n.isEmptyStr(J))if(n.isEmptyStr(ea))y&&(J=ca.get("paramDefaultValueEmpty","\u7a0b\u5e8f\u53c2\u6570\u5fc5\u586b\u65f6\uff0c\u9ed8\u8ba4\u503c\u4e0d\u80fd\u4e3a\u7a7a\u3002"));else if(na||c==e.TXT||c==e.NUMERICAL||c==e.INTEGER)for(Ca=na?Va.split(ea,c==e.DATETIME):[ea],aa=0;aa<Ca.length;aa++)if(ea=Ca[aa],c==e.TXT&&na&&n.isEmptyStr(ea)){J=ca.get("DefaultValueTips","\u9ed8\u8ba4\u503c\u6309\u5206\u9694\u7b26\u5206\u5272\u540e\u4e3a\u7a7a\u3002\n\u5206\u9694\u7b26\u4e3a\uff1a\u4e2d\u6587\u5206\u53f7\uff08\uff1b\uff09\u3001\u82f1\u6587\u5206\u53f7\uff08,\uff09\u3001\u4e2d\u6587\u9017\u53f7\uff08\uff0c\uff09\u3001\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3001\u7a7a\u683c\u3002");
break}else if(!e.defaultValueCheck(c,ea)){J=e.dataTypeToErrorMsg(c).replace("#1","\u9ed8\u8ba4\u503c");break}n.isNotEmptyStr(J)&&g.addException(Ja.DATA_CLIENT_JAVA_PARAM_ERROR,E,ca.get("paramSettingError","\u7a0b\u5e8f\u53c2\u6570\u8bbe\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u68c0\u67e5\u7a0b\u5e8f\u53c2\u6570\u3002"));return J};this.toJsonObject=function(){var g={};g.name=E;g.dataType=c;g.inputValueType=l;g.bindType=h;g.required=y;""!==I&&(g.bindDataValue=I);""!==X&&(g.bindDataAlias=X);""!==qa&&(g.defaultValue=
qa);return g};this.fromJsonObject=function(g){E=g.name;c=parseInt(g.dataType);l=parseInt(g.inputValueType);h=parseInt(g.bindType);y=!!g.required;I=g.bindDataValue;X=g.bindDataAlias;qa=n.isNotEmptyStr(g.defaultValue)?g.defaultValue:""}}function w(A){var u,E,c=[],l;this.getResourceName=function(){return u};this.getParentPath=function(){return l};this.setParentPath=function(h){l=h};this.getFullPath=function(){return E};this.getChildren=function(){return c};this.getLevel=function(){return A};this.fromJsonObject=
function(h){u=h.resourceName;E=h.fullPath;h=h.children;var y=A,I=h?h.length:0;y+=1;for(var X=0;X<I;X++){var qa=new w(y);qa.fromJsonObject(h[X]);qa.setParentPath(E?E:u);c.push(qa)}}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner=
{});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.java&&(com.kingdee.bos.extreport.datasetdesigner.java={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.java.model&&(com.kingdee.bos.extreport.datasetdesigner.java.model={});var p=com.kingdee.bos.extreport.datasetdesigner.java.model,M={},D={},b={},e={};p.InputValueType=M;p.ParamBindType=D;p.Property=b;p.JavaParamDataType=e;p.JavaResourceVO=w;p.JavaParameter=t;var ca,n,Za,Ua,Xa,$a,Ja,va,Va;M.SINGLE=0;M.MULTIPLE=1;M.ALL_RETURN_VALUE_TYPE=
[M.SINGLE,M.MULTIPLE];D.PARAM=0;D.VARIABLE=1;D.ALL_PARAM_BIND_TYPE=[D.PARAM,D.VARIABLE];b.BOOLEAN_TRUE="True";b.BOOLEAN_FALSE="False";e.TXT=0;e.NUMERICAL=1;e.DATE=2;e.BOOLEAN=3;e.DATETIME=4;e.INTEGER=5;e.ALL_DATA_TYPE=[e.TXT,e.NUMERICAL,e.DATE,e.DATETIME,e.INTEGER,e.BOOLEAN];(function(){var A=com.kingdee.bos.qing.framework.common;ca=A.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);A=com.kingdee.bos.extreport.datasetdesigner.common;n=A.StringUtil;A=com.kingdee.bos.extreport.datasetdesigner.model;
Za=A.DataSetModelFactory;Ua=A.ModelContainer;Xa=A.DataSetType;$a=A.AbstractDataSetModel;Ja=A.DataSetModelCheckType;va=A.StringValidator;Va=A.SplitHelper})();var Oa;M.dataTypeToName=function(A){Oa||(Oa={},Oa[M.SINGLE]=ca.get("singleValued","\u5355\u503c"),Oa[M.MULTIPLE]=ca.get("multiValued","\u591a\u503c"));return Oa[A]};var Da;D.dataTypeToName=function(A){Da||(Da={},Da[D.PARAM]=ca.get("param","\u53c2\u6570"),Da[D.VARIABLE]=ca.get("variant","\u53d8\u91cf"));return Da[A]};var Ea,f,B,U;e.dataTypeToIconName=
function(A){Ea||(Ea={},Ea[e.TXT]="txt",Ea[e.NUMERICAL]="numerical",Ea[e.DATE]="date",Ea[e.BOOLEAN]="boolean",Ea[e.DATETIME]="dateTime",Ea[e.INTEGER]="integer");return Ea[A]};e.dataTypeToName=function(A){f||(f={},f[e.TXT]=ca.get("text","\u6587\u672c"),f[e.NUMERICAL]=ca.get("decimal","\u6570\u503c"),f[e.DATE]=ca.get("date","\u65e5\u671f"),f[e.BOOLEAN]=ca.get("bool","\u5e03\u5c14"),f[e.DATETIME]=ca.get("dateTime","\u65e5\u671f\u65f6\u95f4"),f[e.INTEGER]=ca.get("int","\u6574\u578b"));return f[A]};e.defaultValueCheck=
function(A,u){B||(B={},B[e.TXT]=va.checkText,B[e.NUMERICAL]=va.checkNumber,B[e.DATE]=va.checkDate,B[e.BOOLEAN]=va.checkBoolean,B[e.INTEGER]=va.checkInteger,B[e.DATETIME]=va.checkDateTime);return B[A](u)};e.dataTypeToErrorMsg=function(A){U||(U={},U[e.TXT]="",U[e.NUMERICAL]=ca.get("numericalTypeTip","#1\u5fc5\u987b\u662f\u6570\u503c\u7c7b\u578b\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"),U[e.DATE]=ca.get("dateTypeTip","#1\u5fc5\u987b\u662f\u6b63\u786e\u7684\u65e5\u671f\u7c7b\u578b\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"),
U[e.BOOLEAN]=ca.get("booleanTypeTip","#1\u5fc5\u987b\u662f\u5e03\u5c14\u7c7b\u578b\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"),U[e.DATETIME]=ca.get("dateTimeTypeTip","#1\u5fc5\u987b\u662f\u65e5\u671f\u65f6\u95f4\u7c7b\u578b\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"),U[e.INTEGER]=ca.get("integerTypeTip","#1\u5fc5\u987b\u662f\u6574\u578b\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"));return U[A]};Za.addDataSetModel(Xa.JAVA_DATASET,function(){$a.call(this);var A=this.protectedMethod,u=this,E,c=[];this.isShowIgnoreFilterByNull=
function(){return!1};this.hasContent=function(){return!1};this.isArrJavaParameterDirty=function(){for(var l=0;l<c.length;l++)if(c[l].isChange())return!0;return!1};this.checkArrParameterHasNotNullExp=function(){for(var l=0;l<c.length;l++)if(c[l].checkHasNotNullExp())return!0;return!1};this.getJavaSourcePath=function(){return E};this.setJavaSourcePath=function(l){u.setDirty(E!=l);E=l};this.getArrJavaParameters=function(){return c};this.setArrJavaParameters=function(l,h){u.setDirty(h);c=l};this.clearArrJavaParameters=
function(){u.setDirty(0==c.length?!1:!0);c=[];u.clearException(Ja.DATA_CLIENT_JAVA_PARAM_ERROR)};this.getContent=function(){return E};this.check=function(){if(c&&0<c.length)for(var l=0;l<c.length;l++){var h=c[l].check();if(n.isNotEmptyStr(h))break}return h};this.toJsonObject=function(){var l=A.toJsonObject();l.javaSourcePath=E;if(c&&0<c.length){for(var h=[],y=0;y<c.length;y++)h.push(c[y].toJsonObject());l.javaParameters=h}return l};this.fromJsonObject=function(l,h){A.fromJsonObject(l,h);u.addExceptionFromMapCheckResult(h,
Ja.JAVA_PARAM);u.addExceptionFromMapCheckResult(h,Ja.JAVA_PARAM_BIND);E=l.javaSourcePath;if(l=l.javaParameters)for(h=0;h<l.length;h++){var y=l[h],I=new t(u);I.fromJsonObject(y);c.push(I)}}})})();(function(){function t(f,B,U){Ea.call(this);var A=this.getJqUi,u=this,E=f,c=B,l=new w,h=!1;this.getJqUi=function(){h||(h=!0,l.setFunLoadFieldAlias(u.protectedLoadFieldAlias),l.setFunLoadFieldValue(u.protectedLoadFieldValue),u.setSelectedModel(E),u.setCustomPainter(function(y,I){if(!y)return I.text(""),"";I.text(u.protectedLoadFieldAlias(y))}),u.setDropdownCreator(function(y,I,X){l=new w;l.setFunLoadFieldAlias(u.protectedLoadFieldAlias);l.setFunLoadFieldValue(u.protectedLoadFieldValue);l.setAllField(c);
return l.createJqUi(y,I,X)}),u.addSelectionListener(function(y,I,X){(y=y.getSelectedModel())&&U(y)}));return A()};this.protectedLoadFieldAlias=function(y){throw Error("override me");};this.protectedLoadFieldValue=function(y){throw Error("override me");};this.setArrSourceList=function(y){c=y;u.setDropdownCreator(function(I,X,qa){l=new w;l.setFunLoadFieldAlias(u.protectedLoadFieldAlias);l.setFunLoadFieldValue(u.protectedLoadFieldValue);l.setAllField(c);return l.createJqUi(I,X,qa)})};this.setSelected=
function(y){E=y;u.setSelectedModel(E)}}function w(){var f=[],B,U;this.setAllField=function(c){f=c};this.createJqUi=function(c,l,h){var y=new p;y.setItemModel(f);y.setListItemPainter(A);y.setSearchListener(E);return y.createJqPopup(c,l,h)};this.setFunLoadFieldAlias=function(c){B=c};this.setFunLoadFieldValue=function(c){U=c};var A=function(c,l,h){var y=$("<div>");y.addClass("dataset-field-popup-list-item");y.data("model",c);var I=$("<span>");I.addClass("dataset-field-popup-list-item-field-name");I.text(B(c));
y.append(I);l.append(y);h&&B(h)==B(c)&&u(l,y)},u=function(c,l){var h=null;0<c.height()?(clearTimeout(h),l.addClass("dataset-list-item_selected_enabled"),c.prop("scrollTop",l.prop("offsetTop"))):h=setTimeout(function(){u(c,l)},0)},E=function(c,l,h,y,I,X){l=l.trim().toLowerCase();for(var qa=[],Qa,g=0;g<c.length;g++)Qa=c[g],(Qa=-1!=B(Qa).trim().toLowerCase().indexOf(l)?!0:X&&-1!=U(Qa).trim().toLowerCase().indexOf(l)?!0:!1)&&qa.push(c[g]);h.children().remove();if(0<qa.length){for(g=0;g<qa.length;g++)I(qa[g],
h,y);qa.length=0}else c=new Ua,c.setText(Da.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),c.setEnabled(!1),c.setAlign(Ua.ALIGN_CENTER),c=c.getJqUi(),c.addClass("dataset-field-popup-search-result"),c.appendTo(h)}}function p(){var f=[],B,U,A,u;this.setItemModel=function(E){f=E};this.setSearchListener=function(E){B=E};this.setListItemPainter=function(E){U=E};this.createJqPopup=function(E,c,l){A=$("<div>");A.appendTo(E);u=$("<div>");var h=25*Math.max(Math.min(10,f.length),
1);E=h+25+4;A.css("height",E+"px");u.css("height",h+"px");A.addClass("dataset-field-popup");h=Da.get("search","\u641c\u7d22");var y=new Za;y.setSearchListenerDelay(200);y.setPlaceholder(h);y.addSearchListener(function(){B(f,y.getText(),u,c,U,!0)});h=y.getJqUi();h.addClass("dataset-field-popup-search");h.appendTo(A);u.addClass("dataset-field-popup-list-owner");u.on("click",function(I){var X=$(I.currentTarget);I=$(I.target);if(I=e.upwardSearchHasClass(I,X,"dataset-field-popup-list-item"))I.addClass("dataset-list-item_selected_enabled"),
X=I.data("model"),l(X)});u.appendTo(A);h=A.find(".sa-ctrl-textfield-input");h.css("top","0px");h.css("height","100%");for(h=0;h<f.length;h++)U(f[h],u,c,!0);u.css("bottom","5px");return[-1,E]}}function M(f){var B,U,A;this.getJqUi=function(){B||(B=$("<div>"),B.css({height:"100%",width:"100%"}),U=$("<textarea>").attr("id",f),U.appendTo(B),U.hide());return B};this.setSqlEditorContent=function(u){var E=u;0==document.body.clientHeight||0==document.body.clientWidth||A||(E=E.trim(),U.val(E),A=CodeMirror.fromTextArea(document.getElementById(U.attr("id")),
{mode:"text/x-java",lineNumbers:!0,theme:"idea",lineWrapping:!0,readOnly:!0}),A.setSize("100%","100%"),A.setCursor(0,0));A.setValue(u)}}function D(){}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.java&&
(com.kingdee.bos.extreport.datasetdesigner.java={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.java.common&&(com.kingdee.bos.extreport.datasetdesigner.java.common={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.java.common.ui&&(com.kingdee.bos.extreport.datasetdesigner.java.common.ui={});var b=com.kingdee.bos.extreport.datasetdesigner.java.common.ui;b.TextSearchDropdown=function(f,B,U){t.call(this,f,B,U);this.protectedLoadFieldAlias=function(A){return A};this.protectedLoadFieldValue=
function(A){return A}};b.ShowClassCodeArea=M;b.PreviewProgramDialog=function(f,B){function U(Ca,na){KTDefaultCellRender.call(this,na);var ea=this,J=this.paintCellUI;this.setGlobal=function(W){};this.paintCellUI=function(W,aa){var Ka=ea.getCurrentRowIdx(),La=ea.getCurrentColIdx(),gb=ea.getCurrentRow(),Ga=$(W);Ga.css({"line-height":"30px",color:"#666"});var lb=gb.getUserObject();Ka<ca.getHeadRowCount()?(W=gb.getCell(La).getValue(),Ga.css("line-height","25px"),Ga.text(W)):0===La?(Ga.empty(),Ka=lb.getName(),
aa=$("<div>"),aa.text(Ka),aa.attr("title",Ka),e.layoutCtrlWithLRTB(aa,5,0,null,0,0,null),Ga.append(aa)):1===La?(Ga.empty(),Ka=lb.getDataType(),W=$("<div>"),aa=Oa.dataTypeToIconName(Ka),Xa.background(W,aa),e.layoutCtrl(W,6,8,16,16),aa=$("<div>"),Ka=Oa.dataTypeToName(Ka),aa.text(Ka),aa.attr("title",Ka),e.layoutCtrlWithLRTB(aa,24,0,null,0,0,null),Ga.append(W),Ga.append(aa)):J(W,aa)}}n.call(this);var A=this,u=this.protectedMethod,E,c,l,h,y,I,X,qa;(function(){u.setTitle(Da.get("viewParamAndCode","\u67e5\u770b\u7a0b\u5e8f\u53c2\u6570\u53ca\u4ee3\u7801")+
"-"+B.getResourceName());A.setSize(900,500);u.setSelectable(!0);u.setContentPaneCreator(function(){E=(new Date).getTime()+"";var Ca=B.getFullPath();h||(h=A.getJqUi());f.addWindowResizeListener(g);var na=function(J){var W=[];if(J&&J.timeStamp===E)if(J=J.javaParameters,0==J.length)W=D.createJavaPageTipsUi(Da.get("noParamTips","\u5f53\u524d\u9009\u62e9\u7684Java\u7a0b\u5e8f\u6ca1\u6709\u7a0b\u5e8f\u53c2\u6570\uff0c\u65e0\u9700\u8bbe\u7f6e")),e.layoutCtrlWithLRTB(W,1,1,null,26,1,null),$(c.getUI()).hide(),
W.appendTo(y);else{for(var aa=0;aa<J.length;aa++){var Ka=new Va(B);Ka.fromJsonObject(J[aa]);W[aa]=Ka}J=0;for(aa=W.length;J<aa;J++)ca.createRow(c).setUserObject(W[J]);ca.refresh(c)}},ea=function(J,W,aa){return 8099017==J||8099018==J?(Qa(W,aa),!0):!1};na=f.createQueryFacade(na,ea);na.setBlockingJqUi(y);na.loadJavaParameter(Ca,E);na=function(J){J&&J.timeStamp===E&&(Da.get("procedureCode","\u7a0b\u5e8f\u4ee3\u7801"),J=J.classCode,l.setSqlEditorContent(J))};ea=function(J,W){return 8099017==J||8099018==
J?(l.setSqlEditorContent(" "),J=D.createJavaPageTipsUi(W),e.layoutCtrlWithLRTB(J,1,1,null,26,1,null),J.appendTo(I),!0):!1};na=f.createQueryFacade(na,ea);na.setBlockingJqUi(I);na.loadJavaClassCode(Ca,E);return h});u.setFooterClosingOnly(!0);u.setClosingChecker2(function(){f.removeWindowResizeListener(g)},function(){f.removeWindowResizeListener(g);u.destroy();return!0});u.setClosingAction(function(Ca){})})();this.getJqUi=function(){if(!h){h||(h=$("<div>"));var Ca=$("<div>");e.layoutCtrlWithLRTB(Ca,
0,null,250,0,0,null);var na=Ja.createTitle(Da.get("procedureParam","\u7a0b\u5e8f\u53c2\u6570"));y=$("<div>");y.addClass("extreport-dataset-class-code");c=new KTable;c.setDraggableAdjusting(!0,ca.getHeadRowCount(),0,new $a);c.setSyncUIWhenModelChanged(!1);var ea=new U(f,c);ea.setOutsideVisible(!1);c.setCellRender(ea);c.setSyncUIWhenModelChanged(!1);c.addColumns(2);c.getColumn(0).setWidth(120);c.getColumn(1).setWidth(120);ea=ca.createHeadRow(c);ea.getCell(0).setValue(Da.get("paramName","\u53c2\u6570\u540d\u79f0"));
ea.getCell(1).setValue(Da.get("dataType","\u6570\u636e\u7c7b\u578b"));ca.refresh(c);ea=$(c.getUI());e.layoutCtrlWithLRTB(ea,5,null,240,30,5,null);ea.appendTo(y);Ca.append(na);Ca.append(y);na=$("<div>");e.layoutCtrlWithLRTB(na,260,0,null,0,0,null);qa=Ja.createTitle(Da.get("procedureCode","\u7a0b\u5e8f\u4ee3\u7801"));I=$("<div>");I.addClass("extreport-dataset-class-code");l=new M("javaCode_dialog");X=l.getJqUi();X.appendTo(I);na.append(qa);na.append(I);h.append(Ca);h.append(na)}return h};var Qa=function(Ca,
na){var ea=$("<div>");ea.addClass("extreport-output-fieldtable-error-darkmask");var J=$("<div>");J.addClass("extreport-dataset-designer-java-error-darkmask-text");J.appendTo(ea);e.layoutCtrlWithLRTB(ea,1,1,null,26,1,null);var W=$("<div>");W.text(Da.get("viewOutputError","#1\uff0c\u60a8\u53ef\u4ee5#2\u3002").replace("#1",Ca));W.appendTo(J);W.html(function(){return W.html().replace("#2","<span id = 'view' class = 'extreport-error-darkmask-button' style = 'cursor: pointer;'> "+Da.get("moreDetailBlank",
" \u67e5\u770b\u8be6\u7ec6 ")+"</span>")});W.find("#view").on("click",function(){va.showErrorDialog(Ca,na)});ea.appendTo(y)},g=function(){c&&ca.refresh(c)}};b.JavaCreateTipUiUtil=D;var e,ca,n,Za,Ua,Xa,$a,Ja,va,Va,Oa,Da,Ea;(function(){var f=com.kingdee.bos.qing.common;e=f.DomUtil;f=com.kingdee.bos.qing.common.ui;ca=f.TableUtil;f=com.kingdee.bos.qing.ui.component;n=f.AbstractModalDialog;Za=f.SearchBox;Ua=f.Label;Xa=com.kingdee.bos.extreport.datasetdesigner.Icons;f=com.kingdee.bos.extreport.datasetdesigner.common.ui;
$a=f.TableCustomExpandor;Ja=f.QueryCommonUi;va=f.DialogUtil;f=com.kingdee.bos.extreport.datasetdesigner.java.model;Va=f.JavaParameter;Oa=f.JavaParamDataType;f=com.kingdee.bos.qing.framework.common;Da=f.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);f=com.kingdee.bos.qing.ui.component;Ea=f.DropdownSelector})();D.createJavaPageTipsUi=function(f){var B=$("<div>");B.addClass("extreport-dataset-designer-tip");var U=$("<div>");U.addClass("extreport-dataset-designer-tip-no-data-text");
U.text(f);f=$("<div>");f.addClass("extreport-dataset-designer-tip-no-data");Xa.background(f,"NoParam");B.append(U);B.append(f);return B};D.createMaskingUi=function(f){var B=$("<div>");B.addClass("extreport-output-fieldtable-error-darkmask");var U=$("<div>");U.addClass("extreport-dataset-designer-java-error-darkmask-text");U.text(f);U.appendTo(B);return B};D.createDelBtn=function(){var f=$("<span>");f.attr("title",Da.get("clear","\u6e05\u7a7a"));f.css({position:"absolute",cursor:"pointer"});e.layoutCtrlWithLRTB(f,
null,3,16,7,0,16);Xa.background(f,"delete");return f}})();(function(){function t(m){function Y(d,q){var F=d.getChildren();d=d.getChildren().length;for(var r=0;r<d;r++){var S=F[r];if(-1!=S.getResourceName().toLowerCase().indexOf(V.toLowerCase()))return!0;q=Y(S)?!0:q}return q}function ka(d){KTDefaultCellRender.call(this,d);var q=this,F;this.paintCellUI=function(r,S){if(q.getCell()){var P=q.getCell().getValue(),wa=P.getResourceName(),xa=$(r),sa=$("<div>");r=$(S);xa.css("width","100%");if(P.getChildren()&&0==P.getChildren().length){sa.addClass("extreport-dataset-designer-java-tree-name");
xa.addClass("extreport-dataset-designer-java-hover");S=$("<div>");b.layoutCtrlWithLRTB(S,5,null,16,8,0,16);N==P.getFullPath()?B.background(S,"file_selected"):B.background(S,"file");var Aa=$("<div>");Aa.attr("title",n.get("viewParamAndCode","\u67e5\u770b\u7a0b\u5e8f\u53c2\u6570\u53ca\u4ee3\u7801"));Aa.addClass("extreport-dataset-icon-top");B.backgroundWithHover(Aa,"btn_preview");Aa.hide();b.layoutCtrlWithLRTB(Aa,null,5,16,8,0,16);r.append(S);r.append(Aa);xa.on("mouseenter",function(Ma){sa.css("width",
"calc(100% - 44px)");xa.css("cursor","pointer");Aa.show()});xa.on("mouseleave",function(Ma){sa.css("width","calc(100% - 24px)");Aa.hide()});xa.on("dblclick",function(Ma){la&&la(P.getFullPath());xa.addClass("extreport-dataset-designer-java-tree_selected");F&&F.removeClass("extreport-dataset-designer-java-tree_selected");F=xa});Aa.on("click",function(){(new h(m,P)).showDialog()})}else xa.attr("title",P.getFullPath()),sa.addClass("extreport-dataset-designer-java-tree-branch-name");E.highlightKeyWords(sa,
V,wa);r.append(sa);N&&N==P.getFullPath()&&(B.backgroundWithHover(Aa,"btn_preview_selected"),xa.addClass("extreport-dataset-designer-java-tree_selected"),F=xa)}}}function Q(d){KTDefaultTreeHandlerRender.call(this,d);var q=this;this.create=function(F,r,S,P,wa,xa,sa){var Aa=17*F.getLevel();var Ma=Aa+14;var a=null;if(q.protectedMethod.isTreeNodeHasChildren(F,r,S)||F.isHaveHandlerAlways())a=q.protectedMethod.createAbsoluteHtmlElement("div",Aa,wa,14,sa),a.style.cursor="pointer",r=$(a),r.css("width","100%"),
S=$("<div>"),r.append(S),F.isExpanded()?(S.addClass("extreport-category-lower-triangle"),r.css("left",17*F.getLevel()+7+"px"),S.removeClass("extreport-category-right-triangle")):(S.addClass("extreport-category-right-triangle"),r.css("left",17*F.getLevel()+"px"),S.removeClass("extreport-category-lower-triangle"));r=[a,Ma,wa,null];F=r[0];Ma=r[1];a=r[2];r=r[3];P=q.protectedMethod.createAbsoluteHtmlElement("span",Ma,a,P+xa-Ma,wa+sa-a);return[F,P,r]}}var R,x,k,ba,la,ya,ha=!1,da,fa,ta,ma=[],O=[],V="",N=
"",C;this.getJqUi=function(){R||hb();return R};this.showPaneUi=function(){R.show()};this.setDataSetModel=function(d){ya=d};this.setEnableButtonFunCallBack=function(d){};this.model2Ui=function(d){d&&f.isEmptyStr(x.text())?oa(za):Wa()};this.updateTree=function(){Wa()};this.resize=function(){da&&ha&&ib(da,k.width())};this.setUpdateListFunCallBack=function(d){C=d};this.setDoubleClickSelectPathFunCallBack=function(d){la=d};var oa=function(d){m.createQueryFacade(function(q){q&&(x.text(q),d&&d())}).loadClusterENV()},
za=function(){m.createQueryFacade(function(d){if(d){ha=!0;for(var q=[],F,r=0;r<d.length;r++)F=new Ca(0),F.fromJsonObject(d[r]),q.push(F);C(q);Ra(q)}},function(d,q){return ha=!1}).loadJavaResourcesTree()},Ra=function(d){if(d&&0!=d.length){Sa(!1);O=[];ma=[];for(var q=0;q<d.length;q++)ab(d[q]);eb();ma&&Wa()}else Sa(!0)},Wa=function(){N=ya.getJavaSourcePath();if(ma&&0<ma.length){Sa(!1);var d=da,q=d.keepScrollStatus();q.v&&(q.v=0);d.restoreScrollStatus(q);d=k.width();ib(da,d);ta&&(d=da.getRowIndex(ta),
0<=d&&da.scrollCellVisible(d,0,!0))}else Sa(!0)},bb=function(d,q){var F=[],r=!0,S=d.getFullPath();if(f.isEmptyStr(S)&&0<=d.getResourceName().toUpperCase().indexOf(q.toUpperCase())||f.isNotEmptyStr(S&&0<=S.toUpperCase().indexOf(q.toUpperCase())))F.push(d),r=!1;S=d.getChildren?d.getChildren():[];for(var P=0;P<S.length;P++){var wa=bb(S[P],q);wa&&0<wa.length&&(r&&(F.push(d),r=!1),F=F.concat(wa))}return F},eb=function(){if(f.isNotEmptyStr(V))for(var d=0;d<ma.length;d++){var q=ma[d];0==q.getLevel()&&(O=
O.concat(bb(q,V)))}},ab=function(d){ma.push(d);if(d=d.getChildren())for(var q=0;q<d.length;q++)ab(d[q])},hb=function(){R=$("<div>");var d=X.createTitle(n.get("currendAccount","\u5f53\u524d\u79df\u6237"));d.addClass("extreport-dataset-designer-text-ellipsis");b.layoutCtrl(d,null,null,150,null);var q=$("<div>");K(q);var F=X.createTitle(n.get("javaProgram","Java\u7a0b\u5e8f"));F.attr("title","");b.layoutCtrl(F,null,75,null,null);var r=$("<div>"),S=$("<span>");S.text(n.get("javaAccountTips","\u5f53\u524d\u79df\u6237\u6709\u6743\u9650\u4f7f\u7528\u7684Java\u7a0b\u5e8f\uff0cJava\u7a0b\u5e8f\u7684\u5f00\u53d1\u53ca\u90e8\u7f72\u65b9\u5f0f\u8bf7 #1\u3002#n\u5728\u5217\u8868\u4e2d\u901a\u8fc7\u9f20\u6807\u5de6\u952e\u53cc\u51fb\u7a0b\u5e8f\u540d\u79f0\uff0c\u53ef\u4ee5\u9009\u62e9\u7a0b\u5e8f\u8fdb\u884c\u8bbe\u7f6e\u3002").replaceAll("#n",
"\n"));S.appendTo(r);S.html(function(){var wa=Za.getQingRptJavaProgramUrl();return S.html().replace("#1","<a onclick='javascript:window.open(\""+wa+"\");' href='#' style = 'cursor: pointer; color: var(--color-main, #5582f3); text-decoration: none'> "+n.get("viewHelpDoc","\u67e5\u770b\u5e2e\u52a9\u6587\u6863")+"</a>")});var P=new Va;P.setIconType(Va.ICON_TYPE_QUESTION);P.setTipsSize(465,55);P.setTipsHtml(r[0]);r=P.getJqUi();b.layoutCtrlWithLRTB(r,null,null,16,4,null,16);r.addClass("extreport-dataset-icon-end");
P=$("<div>");Ta(P);d.appendTo(R);q.appendTo(R);F.appendTo(R);r.appendTo(F);P.appendTo(R);z()},z=function(){var d=!1,q=!1,F=!1;document.addEventListener("keydown",function(r){"shift"===r.key.toLowerCase()&&2===r.location?d=!0:"alt"===r.key.toLowerCase()&&2===r.location?d=!0:"n"===r.key.toLowerCase()?q=!0:"o"===r.key.toLowerCase()&&(F=!0);d&&d&&q&&F&&(C([]),Ra([]))});document.addEventListener("keyup",function(r){F=q=d=!1})},K=function(d){x=$("<div>");x.addClass("extreport-dataset-designer-title-div");
b.layoutCtrlWithLRTB(x,0,0,null,25,0,42);x.appendTo(d)},Ta=function(d){var q=100,F=function(S){V=$.trim(S.getText());O=[];if(f.isNotEmptyStr(V)){if(ma&&0<ma.length&&(eb(),0<O.length)){Sa(!1);Wa();return}Sa(!0)}else Wa()};(function(S){var P=new $a;P.setSearchListenerDelay(500);P.setShowSearchIcon(!0);P.setPlaceholder(n.get("searchContent","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9"));P.setFontSize(12);fa=P;fa.addSearchListener(F);P=P.getJqUi();P.addClass("extreport-dataset-designer-tablearea-search-box");
P.addClass("extreport-dataset-designer-left-border");P.addClass("extreport-dataset-designer-top-border");P.addClass("extreport-dataset-designer-right-border");b.layoutCtrlWithLRTB(P,0,0,null,q,0,30);P.appendTo(S)})(d);var r=new KTable;r.setCellRender(new ka(r));r.setTreeHandlerRender(new Q(r));r.setSyncUIWhenModelChanged(!1);r.setColumnFitVisibleWidth(!1);da=r;k=$("<div>");k.addClass("extreport-dataset-designer-left-border");k.addClass("extreport-dataset-designer-right-border");k.addClass("extreport-dataset-designer-bottom-border");
q+=30;b.layoutCtrlWithLRTB(k,0,0,null,q,0,null);r=$(r.getUI());r.children().css("overflow-x","hidden");b.layoutCtrlWithLRTB(r,0,0,null,2,0,null);r.appendTo(k);k.appendTo(d)},Sa=function(d){if(d){ba&&ba.remove();ba=$("<div>");ba.addClass("extreport-dataset-designer-tip");d=$("<div>");d.addClass("extreport-dataset-designer-tip-no-data-text");if(f.isNotEmptyStr(V))d.text(n.get("noSearchData","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"));else{var q=$("<div>");q.addClass("wizard-page-ratio-text");
b.layoutCtrlWithLRTB(q,22,22,null,null,null,null);var F=$("<span>");F.text(n.get("javaShortAccountTips","\u5f53\u524d\u79df\u6237\u6709\u6743\u9650\u4f7f\u7528\u7684Java\u7a0b\u5e8f\uff0cJava\u7a0b\u5e8f\u7684\u5f00\u53d1\u53ca\u90e8\u7f72\u65b9\u5f0f\u8bf7 #1\u3002"));F.html(function(){var r=Za.getQingRptJavaProgramUrl();return F.html().replace("#1","<a onclick='javascript:window.open(\""+r+"\");' href='#' style = 'cursor: pointer; color: var(--color-main, #5582f3); text-decoration: none'> "+n.get("viewHelpDoc",
"\u67e5\u770b\u5e2e\u52a9\u6587\u6863")+"</a>")});F.appendTo(q);q.appendTo(d)}q=$("<div>");q.addClass("extreport-dataset-designer-tip-no-data");B.background(q,"NoParam");ba.append(d);ba.append(q);b.layoutCtrlWithLRTB(ba,0,0,null,2,0,null);ba.appendTo(k)}else $(da.getUI()).show(),ba&&ba.remove()},ib=function(d,q){var F=f.isNotEmptyStr(V)?O:ma;e.clear(d);1E3<F.length&&d.setLargeDataMode(!0,!1);d.addColumn().setWidth(q-8);if(0!=F.length){q=f.isNotEmptyStr(V);var r=!1,S="",P,wa=F.length;if(!q)for(var xa=
0;xa<wa;xa++){var sa=F[xa],Aa=sa.getFullPath();Aa||(S=sa.getResourceName());if(N&&N==Aa){r=!0;break}}for(xa=0;xa<wa;xa++){sa=F[xa];Aa=sa.getResourceName();var Ma=d.addRow();Ma.setHeight(30);var a=Ma.getCell(0);a.setValue(sa);var L=sa.getLevel();L=new KTCellTreeModel(L);if(q){var G=!1;G=Y(sa,G);Ma.setHide(!G);L.setExpanded(G);-1!=Aa.toLowerCase().indexOf(V.toLowerCase())&&Ma.setHide(!1)}r&&N&&(G=sa.getFullPath(),sa=sa.getParentPath(),S!=Aa&&sa!=S&&!N.startsWith(sa)||N!=G||(a.setUserObject(!0),ta=Ma));
0==xa&&(P=a);a.setTreeModel(L)}!r&&P&&P.setUserObject(!0)}d.updateUI()}}function w(m){function Y(a,L){KTDefaultCellRender.call(this,L);var G=this,T=this.paintCellUI,ia=a;this.setGlobal=function(H){ia=H};this.paintCellUI=function(H,ua){var ra=G.getCurrentRowIdx(),Fa=G.getCurrentColIdx(),v=G.getCurrentRow(),Ha=$(H);Ha.css({"line-height":"30px",color:"#666"});var Z=v.getUserObject(),nb=Z&&Z.getName();if(ra<e.getHeadRowCount())T(H,ua),v=v.getCell(Fa).getValue(),Ha.css("line-height","25px"),Ha.text(v);
else if(0===Fa){v=$("<div>");v.text("!");v.addClass("extreport-dataset-designer-param-ctrl-fault-mark");b.layoutCtrl(v,5,null,null,null);v.appendTo(Ha);za[nb]=v;var Ba=Z.check();Ba?(v.show(),v.attr("title",Ba)):v.hide()}else if(2===Fa){Ha.empty();Ba=Z.getDataType();var Ia=$("<div>"),Na=$("<div>");v=Ga.dataTypeToIconName(Ba);B.background(Na,v);b.layoutCtrl(Na,0,8,16,16);v=$("<div>");H=Ga.dataTypeToName(Ba);v.text(H);v.attr("title",H);b.layoutCtrlWithLRTB(v,20,0,null,0,0,null);Ia.append(Na);Ia.append(v);
b.layoutCtrlWithLRTB(Ia,6,0,null,0,0,null);Ba===Ga.DATETIME?b.layoutCtrlCenterAlign(Ia,75):b.layoutCtrlCenterAlign(Ia,50);Ha.append(Ia)}else if(5===Fa){ra=55;U.isEnglish()&&(ra=90);ua=G.getCellWidth()-ra;H=Z.getBindType();var cb=Z.getBindDataValue();Ba=Z.getBindDataAlias();Fa=H==W.PARAM?!0:!1;Na=O.getParameters();var pb=$("<div>"),mb=$("<div>"),jb=$("<div>"),kb=$("<div>");pb.appendTo(Ha);mb.appendTo(Ha);jb.appendTo(mb);kb.appendTo(mb);mb.css({position:"absolute",left:ra+1});ra=e.createCtrlInCell(pb[0],
ra+3,G.getCellHeight(),Ua);ra.setSelected(H);ra.setItemModels(W.ALL_PARAM_BIND_TYPE);ra.setUserObject(v);ra.showFeature(!0);ra.setCustomPainter(function(pa,Pa,ja){pa=$("<div>");ja=W.dataTypeToName(ja);pa.text(ja);pa.attr("title",ja);Pa.append(pa)});ra.addSelectedChangedListener(function(pa,Pa,ja){ja!=Pa&&(Z.setBindType(ja),Z.setBindDataValue(""),Z.setBindDataAlias(""),ja==W.PARAM?(jb.show(),kb.hide(),db.setSelected("")):(kb.show(),jb.hide(),Ya.setModel("")),Aa(Z.getName()),wa(Z))});var db=e.createCtrlInCell(jb[0],
ua+2,G.getCellHeight(),Ua);H=[];H.push(new ea);for(ra=0;ra<Na.length;ra++)H.push(Na[ra]);db.setItemModels(H);db.setUserObject(v);db.showFeature(!0);db.setCustomPainter(function(pa,Pa,ja){ja&&(pa=ja.getName(),f.isNotEmptyStr(pa)?(ja=ja.getAlias(),ja=pa+n.get("","\uff08")+ja+n.get("","\uff09")):ja=pa,Pa.attr("title",ja),Pa.append(ja))});db.addSelectedChangedListener(function(pa,Pa,ja){ja!=Pa&&(pa=ja.getName(),Z.setBindDataValue(pa),wa(Z),Ra[nb]=ja,db.setSelected(ja))});var Ya=e.createCtrlInCell(kb[0],
ua,G.getCellHeight(),Xa);Ya.setClearable(!0);Ya.addClearListener(function(){Ya.setModel("");cb="";Z.setBindDataValue("");Z.setBindDataAlias("");Aa(Z.getName());wa(Z)});Ya.setCustomPainter(function(pa){pa&&Ya.getJqUi().attr("title",pa);return pa?pa:""});Ya.showFeature(!0);Ya.addActionListener(function(){var pa=new I(ia,!1,cb);pa.setFunSelectCallBack(function(Pa,ja){if(cb!=ja){var qb=Z.getName();cb=ja;Z.setBindDataValue(cb);Z.setBindDataAlias(Pa);Ya.setModel(Pa);Aa(qb);wa(Z)}});pa.showDialog()});if(Fa){if(f.isNotEmptyStr(cb)){v=
Ra[nb];if(!v){for(H=0;H<Na.length;H++)ua=Na[H],ua.getName()==cb&&(v=ua);v||(v=Ka.createDefault(O),v.setName(cb),v.setAlias(Ba))}db.setSelected(v)}jb.show();kb.hide()}else Ya.setModel(Ba),kb.show(),jb.hide()}else if(6===Fa)if(Ha.empty(),H=Z.getDataType(),Z.getInputValueType()==J.SINGLE&&H!=Ga.TXT&&H!=Ga.NUMERICAL&&H!=Ga.INTEGER){var fb=Z.getDefaultValue();Ia=$("<div>");b.layoutCtrlWithLRTB(Ia,0,0,null,0,0,null);Ia.appendTo(Ha);switch(H){case Ga.BOOLEAN:Ba=e.createCtrlInCell(Ia,G.getCellWidth()+2,G.getCellHeight(),
Ua);Ba.setSelected(fb);Ba.setItemModels(["",gb.BOOLEAN_TRUE,gb.BOOLEAN_FALSE]);Ba.setUserObject(v);Ba.addSelectedChangedListener(function(pa,Pa,ja){ja!=Pa&&(Z.setDefaultValue(ja),wa(Z),Ha.attr("title",ja),ia.fireEvent(Ea.OUTPUT_AREA_SHOW_HINT,!1));Ia.trigger("mouseleave")});v=Ba.getJqUi();b.layoutCtrlWithLRTB(v,0,0,null,1,null,28);Ba.showFeature(!0);Ha.attr("title",fb);break;case Ga.DATE:case Ga.DATETIME:Ba=new lb,Ba.setDateValue(fb),Ha.attr("title",fb),v=Ba,ua=v.setPatternType,H=H==Ga.DATE?ob.YEAR_MONTH_DAY:
H==Ga.DATETIME?ob.DATETIME:null,ua.call(v,H),Ba.setDateChangedListener(function(pa,Pa){pa!=fb&&(fb=pa,Ha.attr("title",pa),Z.setDefaultValue(pa),wa(Z),ia.fireEvent(Ea.OUTPUT_AREA_SHOW_HINT,!1));Ia.trigger("mouseleave")}),v=Ba.getJqUi(),b.layoutCtrlWithLRTB(v,0,0,null,1,null,28),v.css("background-color","transparent"),v.appendTo(Ia),Ba.showFeature(!0)}if(v=Z.isRequired())Na=$("<div>"),Na.text(n.get("selectDefault","\u8bf7\u9009\u62e9\u9ed8\u8ba4\u503c")),Na.css("color","#999"),b.layoutCtrlWithLRTB(Na,
6,0,null,0,0,null),Na.appendTo(Ia),f.isNotEmptyStr(fb)&&Na.hide();xa(Ba,Ia,v,Na)}else Ia=Ma(Z),Ia.appendTo(Ha);else{v=$("<div>");if(1===Fa)H=Z.getName(),b.layoutCtrlWithLRTB(v,6,0,null,0,0,null);else if(3===Fa)H=J.dataTypeToName(Z.getInputValueType()),v.css("text-align","center");else if(4===Fa)H=Z.isRequired()?n.get("yes","\u662f"):n.get("No","\u5426"),v.css("text-align","center");else{T(H,ua);return}v.text(H);v.attr("title",H);Ha.append(v)}}}var ka=this,Q,R,x,k,ba,la,ya,ha,da,fa,ta,ma,O,V,N,C,oa,
za={},Ra={},Wa,bb=!0;this.getJqUi=function(){Q||K();return Q};this.showPaneUi=function(){Q.show()};this.setDataSetModel=function(a){O=a};this.setEnableButtonFunCallBack=function(a){fa=a};this.setUpdateBySelectClassPathFunCallBack=function(a){ta=a};this.setOutputShowMaskingFunCallBack=function(a){ma=a};this.model2Ui=function(a){O.getException(g.JAVA_PARAM,La.JAVA_FIELD_CHANGED_EXEC_CODE)?(ab(),x||P(),q(!0),x.show()):O.getException(g.JAVA_PARAM,La.ETX_JAVA_EXEC_ERROR_CODE)?S(n.get("javaExecError","\u5f53\u524d\u9009\u62e9\u7684Java\u7c7b\u6267\u884c\u5f02\u5e38")):
O.getException(g.JAVA_PARAM,La.ETX_JAVA_NO_FIND_CODE)?S(n.get("deleteJavaTips","\u5f53\u524d\u9009\u62e9\u7684Java\u7c7b\u8def\u5f84\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664")):a||ab(a);hb()};this.resize=function(){d()};this.updateSourcePath=function(a){for(var L=[],G=0;G<a.length;G++){var T=[];eb(a[G],T);L=L.concat(T)}V.setArrSourceList(L);V.setSelected(C);C&&!L.includes(C)&&ka.showPathErrorIcos(!0,n.get("pleaseSelect","#1\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002").replace("#1",n.get("deleteJavaTips",
"\u5f53\u524d\u9009\u62e9\u7684Java\u7c7b\u8def\u5f84\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664")))};this.seletedJavaPath=function(a){bb=!1;f.isNotEmptyStr(a)&&a!=C&&V.setSelected(a);sa()};this.adjustOutputHeight=function(a){la&&ya&&(a?(b.layoutCtrlWithLRTB(la,0,0,null,100,19,null),b.layoutCtrlWithLRTB(ya,6,6,null,105,24,null)):(b.layoutCtrlWithLRTB(la,0,0,null,100,0,null),b.layoutCtrlWithLRTB(ya,6,6,null,105,5,null)))};var eb=function(a,L){var G=a.getChildren(),T=G.length;0==T&&(a=a.getFullPath(),
L.push(a));for(a=0;a<T;a++)eb(G[a],L);return L},ab=function(a){0<O.getArrJavaParameters().length?(d(),a&&q(!0)):r()},hb=function(){(C=O.getJavaSourcePath())?R.removeClass("extreport-dataset-highlight-border"):(ka.showPathErrorIcos(),F(),R.addClass("extreport-dataset-highlight-border"))},z=function(a,L){Wa=(new Date).getTime()+"";oa=O.getArrJavaParameters();var G=m.createQueryFacade(function(T){fa&&fa(!0,!0,!0);O.clearException(g.JAVA_PARAM);ka.showPathErrorIcos();if(T&&T.timeStamp===Wa){var ia=[];
T=T.javaParameters;for(var H=oa.length!==T.length,ua=0;ua<T.length;ua++){var ra=new na(O);ra.fromJsonObject(T[ua]);if(a){for(var Fa=!1,v=0;v<oa.length;v++){var Ha=oa[v];ra.getName()==Ha.getName()&&(Fa=!0,ra.copyValue(Ha))}H=Fa?H:!0}else H=!0;ia[ua]=ra}O.setArrJavaParameters(ia,H);0==ia.length?m.fireEvent(Ea.OUTPUT_AREA_REFRESH,{isPreview:!0}):m.fireEvent(Ea.OUTPUT_AREA_SHOW_HINT,!1);d();L&&L()}},function(T,ia,H){return 8099017==T||8099018==T?(O.clearArrJavaParameters(),ka.showPathErrorIcos(n.get("pleaseSelect",
"#1\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002").replace("#1",ia)),S(ia),fa&&fa(!1,!1,!1),ma&&ma(ia,H),O.addException(g.JAVA_PARAM,T,n.get("getOutputColErr","\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5\u5f02\u5e38\u3002")),!0):!1});q(!0);G.setBlockingJqUi(la);G.loadJavaParameter(O.getJavaSourcePath(),Wa)},K=function(){Q=$("<div>");var a=X.createTitle(n.get("javaClassPath","Java\u7c7b\u8def\u5f84"));a.addClass("extreport-dataset-designer-text-ellipsis");b.layoutCtrl(a,null,null,120,null);R=$("<div>");R.addClass("extreport-dataset-designer-div-border");
b.layoutCtrlWithLRTB(R,0,0,null,25,0,40);da=$("<div>");da.text("!");da.addClass("extreport-dataset-designer-param-ctrl-fault-mark");da.hide();b.layoutCtrl(da,5,20,null,null);V=new c(C,[],function(T){if(C!=T)if(O.isArrJavaParameterDirty()){var ia=Oa.createFeedbackDialog();ia.setOptionType(Oa.OPTION_OK_CANCEL);ia.setMessage(n.get("changeJavaProgramTips","\u5207\u6362Java\u7a0b\u5e8f\u540e\uff0c\u5c06\u4f1a\u6e05\u7a7a\u5f53\u524d\u9875\u9762\u7684\u6240\u6709\u8bbe\u7f6e\uff0c\u786e\u5b9a\u5207\u6362\u5417\uff1f"));
ia.setClosingChecker(function(H){H==Oa.RETURN_OK?Ta(T):V.setSelected(C);return!0});ia.showDialog()}else Ta(T)});var L=V.getJqUi();b.layoutCtrlWithLRTB(L,8,8,null,8,0,24);L.addClass("extreport-dataset-icon-top");var G=$("<div>");Sa(G);da.appendTo(R);L.appendTo(R);a.appendTo(Q);R.appendTo(Q);G.appendTo(Q)},Ta=function(a){C=a;sa();O.setOutputColumns([]);O.setJavaSourcePath(C);ka.showPathErrorIcos();hb();z(!1);ta&&ta(bb);bb=!0},Sa=function(a){var L=X.createTitle(n.get("setProcedureParam","\u8bbe\u7f6e\u7a0b\u5e8f\u53c2\u6570"));
L.attr("title","");L.addClass("extreport-dataset-designer-text-ellipsis");b.layoutCtrl(L,null,75,250,null);var G=new Va;G.setIconType(Va.ICON_TYPE_QUESTION);G.setTipsText(n.get("procedureParamTips","\u6ce8\u610f\u4e8b\u9879\uff1a#n1\u3001\u5982\u679c\u7a0b\u5e8f\u53c2\u6570\u7684\u8f93\u5165\u503c\u4e3a\u591a\u503c\uff0c\u7cfb\u7edf\u4f1a\u5c06\u7a0b\u5e8f\u53c2\u6570\u7684\u503c\u4ee5\u5217\u8868\u5f62\u5f0f\u4f20\u5165\uff0c\u7528\u6237\u9700\u8981\u5728\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u5206\u89e3\u3002#n2\u3001\u5982\u679c\u60f3\u5728\u9ed8\u8ba4\u503c\u4e2d\u8f93\u5165\u591a\u503c\uff0c\u652f\u6301\u4ee5\u4e2d\u6587\u5206\u53f7\uff08\uff1b\uff09\u3001\u82f1\u6587\u5206\u53f7\uff08;\uff09\u3001\u4e2d\u6587\u9017\u53f7\uff08\uff0c\uff09\u3001\u82f1\u6587\u9017\u53f7\uff08,\uff09\u3001\u4ee5\u53ca\u7a7a\u683c\uff08\u65e5\u671f\u65f6\u95f4\u7c7b\u578b\u7684\u503c\u9664\u5916\uff09\u4f5c\u4e3a\u5206\u9694\u7b26\u3002#n3\u3001\u5982\u679c\u7a0b\u5e8f\u53c2\u6570\u7684\u8f93\u5165\u503c\u4e3a\u5355\u503c\uff0c\u4f46\u7ed1\u5b9a\u7684\u53c2\u6570/\u53d8\u91cf\u6216\u9ed8\u8ba4\u503c\u4e3a\u591a\u503c\u65f6\uff0c\u7cfb\u7edf\u5c06\u53ea\u53d6\u7b2c\u4e00\u4e2a\u503c\u4f20\u5165\u3002#n4\u3001\u5fc5\u586b\u7684\u7a0b\u5e8f\u53c2\u6570\u5fc5\u987b\u8bbe\u7f6e\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u5426\u5219\u5f53\u7ed1\u5b9a\u7684\u53c2\u6570\u6216\u53d8\u91cf\u4e3a\u7a7a\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u6570\u636e\u8f6c\u578b\u9519\u8bef\uff0c\u4f8b\u5982\uff1a\u7a7a\u8f6c\u4e3a\u6574\u578b\u3002#n5\u3001\u5982\u679c\u7a0b\u5e8f\u53c2\u6570\u65e2\u8bbe\u7f6e\u4e86\u9ed8\u8ba4\u503c\uff0c\u53c8\u7ed1\u5b9a\u4e86\u53c2\u6570\u6216\u53d8\u91cf\uff0c\u5219\u4f18\u5148\u4f7f\u7528\u53c2\u6570\u6216\u53d8\u91cf\u7684\u503c\u6267\u884c\u7a0b\u5e8f\uff1b\u5f53\u53c2\u6570\u6216\u53d8\u91cf\u7684\u503c\u4e3a\u7a7a\u65f6\uff0c\u5219\u4f7f\u7528\u7a0b\u5e8f\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u6267\u884c\u7a0b\u5e8f\u3002").replaceAll("#n",
"\n"));G=G.getJqUi();b.layoutCtrlWithLRTB(G,null,null,16,4,null,16);G.addClass("extreport-dataset-icon-end");G.appendTo(L);la=$("<div>");la.addClass("extreport-dataset-designer-div-border");b.layoutCtrlWithLRTB(la,0,0,null,100,0,null);ib();ya=$(N.getUI());b.layoutCtrlWithLRTB(ya,6,6,null,105,5,null);L.appendTo(a);la.appendTo(a);ya.appendTo(a)},ib=function(){N=new KTable;var a=new u;a.setColumnNotDraggable([0]);N.setDraggableAdjusting(!0,e.getHeadRowCount(),0,a);N.setSyncUIWhenModelChanged(!1);a=new Y(m,
N);a.setOutsideVisible(!1);N.setCellRender(a);N.addColumns(7);N.getColumn(0).setWidth(25);N.getColumn(1).setWidth(110);N.getColumn(2).setWidth(80);N.getColumn(3).setWidth(70);N.getColumn(4).setWidth(50);N.getColumn(5).setWidth(180);N.getColumn(6).setWidth(150);a=e.createHeadRow(N);a.getCell(1).setValue(n.get("paramName","\u53c2\u6570\u540d\u79f0"));a.getCell(2).setValue(n.get("dataType","\u6570\u636e\u7c7b\u578b"));a.getCell(3).setValue(n.get("inputValue","\u8f93\u5165\u503c"));a.getCell(4).setValue(n.get("require",
"\u5fc5\u586b"));a.getCell(5).setValue(n.get("bindParamOrVar","\u7ed1\u5b9a\u53c2\u6570/\u53d8\u91cf"));a.getCell(6).setValue(n.get("defaultValue","\u9ed8\u8ba4\u503c"));e.refresh(N);N.setSyncUIWhenModelChanged(!0);m.addListener(Ea.Java_PARAM_AREA_REFRESH,function(L){if(L.isPreview)var G=L.funCallback;z(!0,G)})},d=function(){C=O.getJavaSourcePath();oa=O.getArrJavaParameters();N||ib();if(oa&&C&&""!=C)if(0==oa.length)O.clearArrJavaParameters(),r(),e.clearWithoutHead(N),e.refresh(N);else{e.clearWithoutHead(N);
N.setSyncUIWhenModelChanged(!1);za={};for(var a=0,L=oa.length;a<L;a++){var G=e.createRow(N),T=oa[a],ia=T.getDefaultValue()?T.getDefaultValue():"";ia=T.getInputValueType()==J.MULTIPLE?ia.replaceAll(aa.SPLIT,","):ia;G.getCell(6).setValue(ia);G.setUserObject(T)}N.setSyncUIWhenModelChanged(!0);N.updateUI()}else O.clearArrJavaParameters(),F(),e.refresh(N)};this.showPathErrorIcos=function(a){da&&(a?(da.attr("title",a),da.show(),a=V.getJqUi(),b.layoutCtrlWithLRTB(a,20,8,null,8,0,24)):(da.hide(),a=V.getJqUi(),
b.layoutCtrlWithLRTB(a,8,8,null,8,0,24)))};var q=function(a){ya&&a?ya.show():ya.hide();ba&&ba.hide();ha&&ha.hide();k&&k.remove();x&&x.hide()},F=function(){ba||(ba=D(la));b.layoutCtrlWithLRTB(ba,1,1,null,1,1,null);q(!1);ba.show();fa&&fa(!1,!1,!1)},r=function(){ha||(ha=y.createJavaPageTipsUi(n.get("noParamTips","\u5f53\u524d\u9009\u62e9\u7684Java\u7a0b\u5e8f\u6ca1\u6709\u7a0b\u5e8f\u53c2\u6570\uff0c\u65e0\u9700\u8bbe\u7f6e")),b.layoutCtrlWithLRTB(ha,1,1,null,1,1,null),ha.appendTo(la));q(!1);ha.show()},
S=function(a){q(!0);k=y.createMaskingUi(a);k.appendTo(la);k.show()},P=function(){x=$("<div>");x.addClass("extreport-output-fieldtable-error-darkmask");x.appendTo(la);var a=$("<div>");a.addClass("extreport-dataset-designer-java-error-darkmask-text");b.layoutCtrlMiddleAlign(a,25);a.text(n.get("procedureParamChange","\u7a0b\u5e8f\u53c2\u6570\u6709\u53d8\u5316\uff0c\u60a8\u53ef\u4ee5#1\u7a0b\u5e8f\u53c2\u6570\u3002"));a.html(function(){return a.html().replace("#1","<span class = 'extreport-error-darkmask-button' style = 'cursor: pointer;'> "+
n.get("refreshWithBlank"," \u5237\u65b0 ")+"</span>")});a.find(".extreport-error-darkmask-button").on("click",function(){O.removeException(g.JAVA_PARAM,La.JAVA_FIELD_CHANGED_EXEC_CODE);m.fireEvent(Ea.OUTPUT_AREA_SHOW_HINT,!1);z(!0)});a.appendTo(x)},wa=function(a){if(a){var L=a.check();if(a=za[a.getName()])L?(a.show(),a.attr("title",L)):a.hide()}},xa=function(a,L,G,T){a&&(L.on("mouseenter",function(){T&&T.hide()}),L.on("mouseleave",function(){G&&f.isEmptyStr(a.getSelected())?T&&T.show():T&&T.hide()}))},
sa=function(a){f.isNotEmptyStr(a)?O.removeException(g.DATA_CLIENT_JAVA_PARAM_ERROR,a):O.clearException(g.DATA_CLIENT_JAVA_PARAM_ERROR)},Aa=function(a){f.isNotEmptyStr(a)?O.removeException(g.JAVA_PARAM_BIND,a):O.clearException(g.JAVA_PARAM_BIND)},Ma=function(a){var L=new Ja,G=a.getDefaultValue(),T=a.isRequired();L.setText(G?G:"");L.addEditedListener(function(){var v=L.getText().trim();G=a.getDefaultValue();v!==G&&(L.getJqUi().attr("title",v),a.setDefaultValue(v),wa(a),m.fireEvent(Ea.OUTPUT_AREA_SHOW_HINT,
!1))});L.addBlurListener(function(){wa(a)});var ia=L.getJqUi();ia.css({height:"29px","background-color":"transparent"});var H=y.createDelBtn();H.on("mousedown",function(v){v.stopPropagation();L.setText("");a.setDefaultValue("");m.fireEvent(Ea.OUTPUT_AREA_SHOW_HINT,!1);wa(a)});var ua=ia.find("input");ua.css({overflow:"hidden","text-overflow":"ellipsis"});var ra=!1;ua.on("focus",function(){ra=!0;setTimeout(function(){var v=a.getDefaultValue();v&&(ua[0].setSelectionRange(v.length,v.length),ua[0].scrollLeft=
ua[0].scrollWidth)},100)});L.addBlurListener(function(){ra=!1;H.hide();ua.css("padding","0px 0px 0px 4px");ua[0].scrollLeft=0});var Fa=$("<div>");T&&!G&&(Fa.text(n.get("inputDefaultValueTips","\u8bf7\u8f93\u5165\u9ed8\u8ba4\u503c")),Fa.css("color","#999"),b.layoutCtrlWithLRTB(Fa,6,0,null,0,0,null),Fa.appendTo(ia));ia.on("mouseleave",function(){if(!ra){var v=a.getDefaultValue();T&&!v&&Fa&&Fa.show();H.hide();ua.css("padding","0px 0px 0px 4px")}});ia.on("mouseenter",function(){T&&Fa&&Fa.hide();H.show();
ua.css("padding","0px 21px 0px 4px")});H.hide();ia.append(H);return ia}}function p(m){var Y,ka,Q,R,x,k,ba,la,ya,ha={},da={},fa,ta=!0;this.getJqUi=function(){Y||O();return Y};this.showPaneUi=function(){Y.show()};this.setDataSetModel=function(C){ba=C};this.model2Ui=function(C){C&&ta&&(ya=ba.getJavaSourcePath(),ma(ya))};this.updateClassCode=function(){ya=ba.getJavaSourcePath();ma(ya);ta=!1};this.adjustOutputHeight=function(C){Y&&(C?Y.css("bottom","19px"):Y.css("bottom","0px"))};var ma=function(C){if(C)if(V(!1),
ha[C])la.setSqlEditorContent(ha[C]),k.empty(),k=X.createTitle(da[C]),k.appendTo(Y);else{fa=(new Date).getTime()+"";var oa=m.createQueryFacade(function(za){if(za&&za.timeStamp===fa){var Ra=n.get("procedureCode","\u7a0b\u5e8f\u4ee3\u7801");k.empty();k=X.createTitle(Ra);k.appendTo(Y);za=za.classCode;da[C]=Ra;ha[C]=za;N(!1);la.setSqlEditorContent(za);ta=!1}},function(za,Ra){if(8099017==za||8099018==za)return la.setSqlEditorContent(" "),N(!0,Ra),ta=!1,!0;ta=!0;return!1});oa.setBlockingJqUi(Y);oa.loadJavaClassCode(C,
fa)}else la.setSqlEditorContent(" "),V(!0)},O=function(){Y=$("<div>");k=X.createTitle(n.get("procedureCode","\u7a0b\u5e8f\u4ee3\u7801"));k.addClass("extreport-dataset-designer-text-ellipsis");b.layoutCtrl(k,null,null,180,null);var C=$("<div>");C.text(n.get("copySuccess","\u590d\u5236\u6210\u529f"));C.addClass("extreport-dataset-operating-success-tips");C.hide();b.layoutCtrlWithLRTB(C,null,24,null,null,null,null);var oa=$("<div>");oa.attr("title",n.get("copy","\u590d\u5236"));oa.addClass("extreport-dataset-icon-top");
oa.on("click",function(){ya&&ha[ya]&&navigator.clipboard.writeText(ha[ya]).then(function(){var za=new ca;za.setDuration(325,175);za.setTimes(3);za.setAction(function(){C.hide()});za.blink(C)})});B.backgroundWithHover(oa,"copy");b.layoutCtrlWithLRTB(oa,null,4,16,4,0,16);Q=$("<div>");Q.addClass("extreport-dataset-class-code");la=new l("javaCode_mian");ka=la.getJqUi();ka.appendTo(Q);oa.appendTo(Y);C.appendTo(Y);k.appendTo(Y);Q.appendTo(Y)},V=function(C){R||(R=D(Q));C?(R.show(),ka&&ka.hide()):(ka&&ka.show(),
R.hide());x&&x.remove()},N=function(C,oa){x=y.createJavaPageTipsUi(oa);b.layoutCtrlWithLRTB(x,1,1,null,26,1,null);x.appendTo(Q);C?(x.show(),ka&&ka.hide()):(ka&&ka.show(),x&&x.remove());R&&R.hide()}}function M(m,Y){qa.call(this,m,Y);var ka=this,Q=this.protectedMethod,R;this.model2Ui=function(x){R=Q.getDataSetModel();var k=R.getException(g.JAVA_PARAM,La.JAVA_FIELD_CHANGED_EXEC_CODE);k?ka.addOutputRefreshMasking():(k=R.getException(g.JAVA_PARAM,La.ETX_JAVA_EXEC_ERROR_CODE))?(x=n.get("javaExecError",
"\u5f53\u524d\u9009\u62e9\u7684Java\u7c7b\u6267\u884c\u5f02\u5e38"),Q.addExecFailureOutputRefreshMasking(x,k)):(k=R.getException(g.JAVA_PARAM,La.ETX_JAVA_NO_FIND_CODE))?(x=n.get("deleteJavaTips","\u5f53\u524d\u9009\u62e9\u7684Java\u7c7b\u8def\u5f84\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664"),Q.addExecFailureOutputRefreshMasking(x,k)):(k=R.getOutputColumns(),R.getException(g.OUTPUT_COLUMN)?(x=R.getException(g.OUTPUT_COLUMN,La.ETX_JAVA_CHECK_ERROR_CODE),k=R.getException(g.OUTPUT_COLUMN,La.ETX_JAVA_EXEC_ERROR_CODE),
x?Q.addKnownErrorOutputRefreshMasking(n.get("paramSettingError1","\u7a0b\u5e8f\u53c2\u6570\u8bbe\u7f6e\u4e0d\u6b63\u786e"),!1):k&&Q.addExecFailureOutputRefreshMasking(n.get("javaExecError","\u5f53\u524d\u9009\u62e9\u7684Java\u7c7b\u6267\u884c\u5f02\u5e38"),k)):x&&0< !k.length?ka.showNoFieldUi():Q.updateOutputTableFromModel(x))};this.showOutputRefreshMasking=function(x,k){Q.addExecFailureOutputRefreshMasking(x,k)};this.protectedGetNoFieldUI=function(){var x=D(Q.getOutputColumnPane());x.css("border",
"1px solid #e5e5e5");return x};this.protectedGetOutputRefreshMaskingUI=function(){ka.showTableUi();var x=R.getArrJavaParameters();var k=R.getOutputColumns(),ba=R.getException(g.JAVA_PARAM,La.JAVA_FIELD_CHANGED_EXEC_CODE);0==k.length&&0<x.length?(Q.removeAllRefreshRequestMask(),x=$("<div>"),x.addClass("extreport-output-fieldtable-darkmask"),x.appendTo(Q.getTableUi()),k=$("<div>"),k.text(n.get("clickRefreshOutputTips","\u8bbe\u7f6e\u7a0b\u5e8f\u53c2\u6570\u540e\uff0c\u70b9\u51fb\u6b64\u5904\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5\u3002")),
k.on("click",function(la){R.checkArrParameterHasNotNullExp()?m.getMessageCurtain().showPrompt("\u8bf7\u5148\u4e3a\u5fc5\u586b\u7684\u7a0b\u5e8f\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u518d\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5\u3002",5E3):f.isNotEmptyStr(R.check())?Q.addKnownErrorOutputRefreshMasking(n.get("paramSettingError1","\u7a0b\u5e8f\u53c2\u6570\u8bbe\u7f6e\u4e0d\u6b63\u786e"),!1):Q.previewOutputData()}),k.addClass("extreport-output-fieldtable-darkmask-button"),k.appendTo(x)):ba?(x=
$("<div>"),x.addClass("extreport-output-fieldtable-darkmask"),x.appendTo(Q.getTableUi()),k=$("<div>"),k.addClass("extreport-dataset-designer-java-error-darkmask-text"),b.layoutCtrlMiddleAlign(k,25),k.text(n.get("refreshOutputTips","\u8bf7\u5148\u5237\u65b0\u7a0b\u5e8f\u53c2\u6570\uff0c\u518d\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5")),k.appendTo(x)):(x=$("<div>"),x.addClass("extreport-output-fieldtable-darkmask"),x.appendTo(Q.getTableUi()),k=$("<div>"),k.text(n.get("refreshOutputData","\u70b9\u51fb\u6b64\u5904\u5237\u65b0\u8f93\u51fa\u5b57\u6bb5\u3002")),
k.on("click",function(la){f.isNotEmptyStr(R.check())?Q.addKnownErrorOutputRefreshMasking(n.get("paramSettingError1","\u7a0b\u5e8f\u53c2\u6570\u8bbe\u7f6e\u4e0d\u6b63\u786e"),!1):Q.previewOutputData()}),k.addClass("extreport-output-fieldtable-darkmask-button"),k.appendTo(x));return x};this.protectedCalcGetOutputError=function(x,k,ba){8077024==x||8099019==x?Q.addKnownErrorOutputRefreshMasking(k,8077024==x):Q.addExecFailureOutputRefreshMasking(k,ba,!1)}}function D(m){var Y=$("<div>");Y.addClass("extreport-dataset-designer-tip");
var ka=$("<div>");ka.addClass("extreport-dataset-designer-tip-select-text");ka.text(n.get("selectJavaClassPath","\u8bf7\u5148\u9009\u62e9Java\u7c7b\u8def\u5f84"));var Q=$("<div>");Q.addClass("extreport-dataset-designer-tip-select");B.background(Q,"select");Y.append(ka);Y.append(Q);Y.appendTo(m);b.layoutCtrlWithLRTB(Y,1,1,null,26,1,null);return Y}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==
typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner&&(com.kingdee.bos.extreport.datasetdesigner={});"undefined"==typeof com.kingdee.bos.extreport.datasetdesigner.java&&(com.kingdee.bos.extreport.datasetdesigner.java={});var b,e,ca,n,Za,Ua,Xa,$a,Ja,va,Va,Oa,Da,Ea,f,B,U,A,u,E,c,l,h,y,I,X,qa,Qa,g,Ca,na,ea,J,W,aa,Ka,La,gb,Ga,lb,ob;(function(){var m=com.kingdee.bos.qing.common;b=m.DomUtil;m=com.kingdee.bos.qing.common.ui;e=m.TableUtil;
ca=m.BlinkHelper;m=com.kingdee.bos.qing.framework.common;n=m.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.datasetdesigner);Za=m.OfficialArticleUtil;m=com.kingdee.bos.qing.ui.component;Ua=m.ComboBox;Xa=m.F7Selector;Ja=m.TextField;va=m.SplitPane;Va=m.HelpIcon;Oa=m.MessageDialog;m=com.kingdee.bos.extreport.datasetdesigner.common.query;Da=m.TabQueryPaneFactory;m=com.kingdee.bos.extreport.datasetdesigner.common;Ea=m.EventType;f=m.StringUtil;B=com.kingdee.bos.extreport.datasetdesigner.Icons;
U=m.LanguageUtil;m=com.kingdee.bos.extreport.datasetdesigner.common.ui;A=m.AbstractDataSetTabPane;u=m.TableCustomExpandor;$a=m.SearchBox;E=m.SearchHelper;X=m.QueryCommonUi;qa=m.OutputTableArea;m=com.kingdee.bos.extreport.datasetdesigner.java.common.ui;c=m.TextSearchDropdown;l=m.ShowClassCodeArea;h=m.PreviewProgramDialog;y=m.JavaCreateTipUiUtil;m=com.kingdee.bos.extreport.datasetdesigner.model;Qa=m.DataSetType;g=m.DataSetModelCheckType;ea=m.Parameter;aa=m.ParamDefaultValueType;Ka=m.ParameterFactory;
La=m.DataSetModelCheckCode;m=com.kingdee.bos.extreport.datasetdesigner.java.model;Ca=m.JavaResourceVO;na=m.JavaParameter;J=m.InputValueType;W=m.ParamBindType;gb=m.Property;Ga=m.JavaParamDataType;m=com.kingdee.bos.extreport.common;lb=m.DateDropdownSelector;ob=m.DatePatternType;m=com.kingdee.bos.extreport.datasetdesigner.ctrl;I=m.MacroAndSysTemVarSelectDialog})();Da.addQueryPane(Qa.JAVA_DATASET,function(m,Y){A.call(this,n.get("query","\u67e5\u8be2"),Y);var ka=this,Q,R,x,k,ba,la,ya,ha,da,fa,ta,ma,O,
V,N,C,oa=!1,za;this.resize=function(z){k&&k.is(":visible")?ta&&ta.resize(!0):(ta&&ta.resize(!0),fa&&fa.resize(!0),ma&&ma.resize(!0),V&&V.resize(),C&&C.resize())};this.setEnableButtonFunCallBack=function(z){za=z};this.fireTabChangeEvent=function(){ka.resize();var z=ka.getDataSetModelVO();z&&z.getDataSetModel()&&V&&V.resize()};this.protectedInit=function(z){Wa();bb();ya||(N=new p(Y),ya=N.getJqUi());eb();ma=new va;ma.setHorizontalSplit(!0);ma.setFirstSize(710,200,1E3);ma.setResizeMode(va.RESIZE_MODE_FIRST_FIXED);
ma.setFirstChild(va.createChildWrapper(la));ma.setSecondChild(va.createChildWrapper(ya));x=ma.getJqUi();fa=new va;fa.setHorizontalSplit(!1);fa.setFirstSize(410,260,-1);fa.setSecondSize(260,200,-1);fa.setResizeMode(va.RESIZE_MODE_SECOND_FIXED);fa.setFirstChild(va.createChildWrapper(ma,function(){var Ta=fa.getNonemptyFirstWide()+8-28;V.adjustOutputHeight(oa,Ta);N.adjustOutputHeight(oa)}));fa.setSecondChild(va.createChildWrapper(ha));R=fa.getJqUi();ta=new va;ta.setHorizontalSplit(!0);ta.setFirstSize(280,
200,400);ta.setResizeMode(va.RESIZE_MODE_FIRST_FIXED);ta.setFirstChild(va.createChildWrapper(Q,function(){O.resize();fa.resize(!0);ma.resize(!0)}));ta.setSecondChild(va.createChildWrapper(R));var K=ta.getJqUi();K.addClass("extreport-dataset-designer-tab-pane");K.appendTo(z)};this.protectedUpdateUi=function(z,K){if(z=z.getDataSetModel())O.setDataSetModel(z),V.setDataSetModel(z),N.setDataSetModel(z),C.setDataSetModel(z),O.model2Ui(K),V.model2Ui(K),N.model2Ui(K),C.model2Ui(K)};var Ra=function(z){if(z){if(!k){k=
$("<div>");k.addClass("extreport-dataset-designer");k.addClass("extreport-dataset-designer-left-border");k.addClass("extreport-dataset-background-top");k.appendTo(R);ba=$("<div id='noDatasource'>");ba.appendTo(k);b.layoutCtrl(ba,null,null,750,300);ba.addClass("extreport-dataset-no-source-tip-ui");z=$("<div id='left'>");b.layoutCtrlCenterAlign(z,180);b.layoutCtrlMiddleAlign(z,230);z.css({transform:"translateX(-160px)"});z.appendTo(ba);var K=$("<div>");B.background(K,"file_java");b.layoutCtrlCenterAlign(K,
144);b.layoutCtrl(K,null,0,144,144);K.appendTo(z);K=$("<div>");K.text(n.get("selectJavaProcedure","\u9009\u62e9Java\u7a0b\u5e8f"));K.addClass("wizard-page-ratio-text");b.layoutCtrlCenterAlign(K,100);b.layoutCtrlMiddleAlign(K,100);b.layoutCtrl(K,null,180,null,null);K.appendTo(z);z=$("<div id='arrow1'>");B.background(z,"arrow");b.layoutCtrlCenterAlign(z,64);b.layoutCtrlMiddleAlign(z,64);z.css({transform:"translate(-10px, -43px)"});z.appendTo(ba);z=$("<div id='right'>");b.layoutCtrlCenterAlign(z,180);
b.layoutCtrlMiddleAlign(z,230);z.css({transform:"translateX(145px)"});z.appendTo(ba);K=$("<div>");K.appendTo(z);B.background(K,"param");b.layoutCtrlCenterAlign(K,144);b.layoutCtrl(K,null,0,144,144);K=$("<div>");K.text(n.get("parameterDesc","\u8bbe\u7f6e\u53c2\u6570\u53ca\u63a7\u4ef6"));K.addClass("wizard-page-ratio-text");b.layoutCtrlCenterAlign(K,100);b.layoutCtrlMiddleAlign(K,100);b.layoutCtrl(K,null,180,null,null);K.appendTo(z)}x&&x.hide();ha&&ha.hide();k.show()}else k&&k.hide(),x&&x.show(),ha&&
ha.show()},Wa=function(){Q||(O=new t(Y),Q=O.getJqUi(),O.setUpdateListFunCallBack(function(z){0!=z.length?(V.updateSourcePath(z),Ra(!1)):(Ra(!0),za(!1,!1,!1))}),O.setDoubleClickSelectPathFunCallBack(function(z){V.seletedJavaPath(z)}))},bb=function(){la||(V=new w(Y),V.setEnableButtonFunCallBack(za),la=V.getJqUi(),V.setUpdateBySelectClassPathFunCallBack(function(z){z&&O.updateTree();N.updateClassCode()}),V.setOutputShowMaskingFunCallBack(function(z,K){C.showOutputRefreshMasking(z,K)}))},eb=function(){if(!ha){ha=
$("<div>");var z=X.createTitle(n.get("outputColumn","\u8f93\u51fa\u5b57\u6bb5"));hb(z,n.get("collapseOutputColumn","\u6536\u8d77\u8f93\u51fa\u5b57\u6bb5\u9762\u677f"),"downArrow");z.appendTo(ha);C=new M(Y,ha);C.initOutputTable();C.setFunUpdateByErrorCallback(V.showPathErrorIcos);z.appendTo(ha)}},ab=function(z){if(!da){da=$("<div>");da.on("click",function(){fa.collapseSecondHalf(!1);ha.show(!0);ab(!1)});da.addClass("extreport-dataset-designer-show-output-btn");var K=$("<div>");K.appendTo(da);B.backgroundWithHover(K,
"upArrow");var Ta=$("<div>");Ta.text(n.get("outputColumn","\u8f93\u51fa\u5b57\u6bb5"));Ta.appendTo(da);b.layoutCtrlMiddleAlign(Ta,16);b.layoutCtrlMiddleAlign(K,16);b.layoutCtrlWithLRTB(Ta,5,null,120,null,null,null);b.layoutCtrlWithLRTB(K,null,5,16,null,null,16);da.appendTo(fa.getJqUi())}z?da.show():da.hide();oa=z;fa.resize()},hb=function(z,K,Ta){var Sa=$("<div>");Sa.on("click",function(ib){fa.collapseSecondHalf(!0);ha.show(!1);ab(!0)});Sa.attr("title",K);K=$("<div>");K.addClass("extreport-dataset-designer-collapse-icon");
B.backgroundWithHover(K,Ta);Sa.append(K);Sa.appendTo(z)}})})();
//qingVersionTag: 20250324