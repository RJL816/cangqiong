var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(w,h,x){w instanceof String&&(w=String(w));for(var K=w.length,ba=0;ba<K;ba++){var ja=w[ba];if(h.call(x,ja,ba,w))return{i:ba,v:ja}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(w,h,x){if(w==Array.prototype||w==Object.prototype)return w;w[h]=x.value;return w};$jscomp.getGlobal=function(w){w=["object"==typeof globalThis&&globalThis,w,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var h=0;h<w.length;++h){var x=w[h];if(x&&x.Math==Math)return x}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(w,h){var x=$jscomp.propertyToPolyfillSymbol[h];if(null==x)return w[h];x=w[x];return void 0!==x?x:w[h]};
$jscomp.polyfill=function(w,h,x,K){h&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(w,h,x,K):$jscomp.polyfillUnisolated(w,h,x,K))};$jscomp.polyfillUnisolated=function(w,h,x,K){x=$jscomp.global;w=w.split(".");for(K=0;K<w.length-1;K++){var ba=w[K];if(!(ba in x))return;x=x[ba]}w=w[w.length-1];K=x[w];h=h(K);h!=K&&null!=h&&$jscomp.defineProperty(x,w,{configurable:!0,writable:!0,value:h})};
$jscomp.polyfillIsolated=function(w,h,x,K){var ba=w.split(".");w=1===ba.length;K=ba[0];K=!w&&K in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var ja=0;ja<ba.length-1;ja++){var xa=ba[ja];if(!(xa in K))return;K=K[xa]}ba=ba[ba.length-1];x=$jscomp.IS_SYMBOL_NATIVE&&"es6"===x?K[ba]:null;h=h(x);null!=h&&(w?$jscomp.defineProperty($jscomp.polyfills,ba,{configurable:!0,writable:!0,value:h}):h!==x&&(void 0===$jscomp.propertyToPolyfillSymbol[ba]&&(x=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[ba]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(ba):$jscomp.POLYFILL_PREFIX+x+"$"+ba),$jscomp.defineProperty(K,$jscomp.propertyToPolyfillSymbol[ba],{configurable:!0,writable:!0,value:h})))};$jscomp.polyfill("Array.prototype.find",function(w){return w?w:function(h,x){return $jscomp.findInternal(this,h,x).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(w){var h=0;return function(){return h<w.length?{done:!1,value:w[h++]}:{done:!0}}};$jscomp.arrayIterator=function(w){return{next:$jscomp.arrayIteratorImpl(w)}};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(w){if(w)return w;var h=function(ja,xa){this.$jscomp$symbol$id_=ja;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:xa})};h.prototype.toString=function(){return this.$jscomp$symbol$id_};var x="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",K=0,ba=function(ja){if(this instanceof ba)throw new TypeError("Symbol is not a constructor");return new h(x+(ja||"")+"_"+K++,ja)};return ba},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(w){if(w)return w;w=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),x=0;x<h.length;x++){var K=$jscomp.global[h[x]];"function"===typeof K&&"function"!=typeof K.prototype[w]&&$jscomp.defineProperty(K.prototype,w,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return w},"es6",
"es3");$jscomp.iteratorPrototype=function(w){w={next:w};w[Symbol.iterator]=function(){return this};return w};$jscomp.iteratorFromArray=function(w,h){w instanceof String&&(w+="");var x=0,K=!1,ba={next:function(){if(!K&&x<w.length){var ja=x++;return{value:h(ja,w[ja]),done:!1}}K=!0;return{done:!0,value:void 0}}};ba[Symbol.iterator]=function(){return ba};return ba};
$jscomp.polyfill("Array.prototype.keys",function(w){return w?w:function(){return $jscomp.iteratorFromArray(this,function(h){return h})}},"es6","es3");$jscomp.owns=function(w,h){return Object.prototype.hasOwnProperty.call(w,h)};$jscomp.polyfill("Object.values",function(w){return w?w:function(h){var x=[],K;for(K in h)$jscomp.owns(h,K)&&x.push(h[K]);return x}},"es8","es3");
$jscomp.polyfill("String.prototype.replaceAll",function(w){return w?w:function(h,x){if(h instanceof RegExp&&!h.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return h instanceof RegExp?this.replace(h,x):this.replace(new RegExp(String(h).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),x)}},"es_2021","es3");
$jscomp.checkStringArgs=function(w,h,x){if(null==w)throw new TypeError("The 'this' value for String.prototype."+x+" must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+x+" must not be a regular expression");return w+""};
$jscomp.polyfill("String.prototype.startsWith",function(w){return w?w:function(h,x){var K=$jscomp.checkStringArgs(this,h,"startsWith");h+="";var ba=K.length,ja=h.length;x=Math.max(0,Math.min(x|0,K.length));for(var xa=0;xa<ja&&x<ba;)if(K[x++]!=h[xa++])return!1;return xa>=ja}},"es6","es3");
var KEXTCommonUtil=new function(){var w=this,h=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;this.isDarkColor=function(x){if(!x)return!1;0==x.indexOf("#")&&(x=w.getRgbIntArr(x));return 128>=Math.round(.299*x[0]+.587*x[1]+.114*x[2])?!0:!1};this.getRgbaString=function(x){return"RGBA("+x.join(",")+")"};this.getRgbIntArr=function(x){if(!x)return x;if((x=x.toLowerCase())&&h.test(x)){if(4===x.length){for(var K="#",ba=1;4>ba;ba++)K+=x.slice(ba,ba+1).concat(x.slice(ba,ba+1));x=K}K=[];for(ba=1;7>ba;ba+=2)K.push(parseInt("0x"+
x.slice(ba,ba+2)));return K}return x}};var Constants={REPORT_EXT:"ext",CHANGE_SHEET:"changeSheet",TREE_ROW_COUNT:200},KReportUtil=function(){var w=function(h){var x=typeof h;if("string"==x)return'"'+h.replace(/["\\\x00-\x1f\x7f-\x9f]/g,function(xa){xa=xa.charCodeAt();return"\\u00"+Math.floor(xa/16).toString(16)+(xa%16).toString(16)})+'"';if("number"==x){if(isNaN(h)||!isFinite(h))throw Error("SueError: Invalid JSON number type.");return""+h}if("boolean"==x||null===h)return""+h;if("undefined"==x)return"null";if(h instanceof Array){var K=
"";x=0;for(var ba=h.length;x<ba;x++){var ja=w(h[x]);K+=ja;x<ba-1&&(K+=",")}return"["+K+"]"}if("object"==x){x=[];for(K in h)x.push('"'+K+'":'+w(h[K]));return"{"+x.join(",")+"}"}if("function"!=x)throw Error("SueError: Invalid JSON type.");};return{toJson:function(h){try{return eval("("+h+")")}catch(x){return null}},toStr:w,toJsonEscapeString:function(h){h&&(h=h.replace(/"/g,'\\"'),h=h.replace(/\r/g,"\\r"),h=h.replace(/\n/g,"\\n"),h=h.replace(/\t/g,"\\t"));return h},fromJsonEscapeString:function(h){h&&
(h=h.replace(/\\"/g,'"'),h=h.replace(/\\r/g,"\r"),h=h.replace(/\\n/g,"\n"),h=h.replace(/\\t/g,"\t"));return h},getCssStyle:function(h){var x=new KTStyle;x.setFontName(h.fontName);x.setFontSize(h.fontSize);x.setBold(h.isBold);x.setItalic(h.isItalic);x.setUnderLine(h.isUnderLine);x.setLineThrough(h.isLineThrough);x.setColor(h.color);x.setBackgroundColor(h.backgroundColor);x.setTextAlign(h.textAlign);x.setVerticalAlign(h.verticalAlign);x.setWrapText(h.isWrapText);x.setVerticalText(h.isVerticalText);
x.setIndent(h.indentation);x.setRotation(h.rotation);x.setShrinkText(h.isShrinkText);return x},getCssBorder:function(h){var x=new KTBorderStyle;x.setTopBorderPen(h.top.pen);x.setRightBorderPen(h.right.pen);x.setBottomBorderPen(h.bottom.pen);x.setLeftBorderPen(h.left.pen);x.setTopBorderWidth(h.top.width);x.setRightBorderWidth(h.right.width);x.setBottomBorderWidth(h.bottom.width);x.setLeftBorderWidth(h.left.width);x.setTopBorderColor(h.top.color);x.setRightBorderColor(h.right.color);x.setBottomBorderColor(h.bottom.color);
x.setLeftBorderColor(h.left.color);return x},getCssDiagonal:function(h){var x=new KTBorderStyle;x.setLeftBorderPen(h.pen);x.setLeftBorderWidth(h.width);x.setLeftBorderColor(h.color);return x},getCssWidth:function(h,x){var K=$("<div/>");K.css({left:"-1000px",top:"-1000px",position:"absolute",overflow:"hidden",fontSize:x});K.text(h);$(document.body).append(K);h=K.width();K.remove();return h},getCssIntValue:function(h){return parseInt(h.substr(0,h.lastIndexOf("px")))},isNullString:function(h){return"string"==
typeof h&&"null"==h?!0:!1},stopPropagation:function(h){h&&h.stopPropagation?h.stopPropagation():window.event.cancelBubble=!0},preventDefault:function(h){h&&h.preventDefault?h.preventDefault():window.event.returnValue=!1;return!1}}}();
function StringUtil(){this.toJsonEscapeString=function(w){w&&(w=w.replace(/"/g,'\\"'),w=w.replace(/\r/g,"\\r"),w=w.replace(/\n/g,"\\n"),w=w.replace(/\t/g,"\\t"));return w};this.fromJsonEscapeString=function(w){w&&(w=w.replace(/\\"/g,'"'),w=w.replace(/\\r/g,"\r"),w=w.replace(/\\n/g,"\n"),w=w.replace(/\\t/g,"\t"));return w}}
function KRListenerProxy(){var w={};this.addListener=function(h,x){var K=w[h];K||(K=[],w[h]=K);for(h=0;h<K.length;h++)if(K[h]==x)return;K.push(x)};this.removeListener=function(h,x){if(h=w[h])for(var K=h.length-1;0<=K;K--)if(h[K]==x){h.splice(K,1);break}};this.fireEvent=function(h){var x=h.type||h.getType();if(x=w[x])for(var K=x.length-1;0<=K;K--)x[K](h)}}KRListenerProxy.Event=function(w){this.getType=function(){return w}};
var KReportToast=function(){var w,h,x;return{toast:function(K){w||(w=$("<div class='my-toast' style=\"top: 2px; z-index: 9999;margin-left: 30%;font-family: 'Microsoft YaHei'; position: absolute;width: 40%;background-color: #fff5cb; border: 1px solid #f7e492;color: #e37b00; font-size: 12px; font-weight: bold; padding:0px 10px;\"><div class='my-toast-text'  style=\"word-break: break-all;text-align: center\"></div></div>"),h=w.find(".my-toast-text"));w.hide();w.remove();clearTimeout(x);var ba=K.delay||
6E3;h.html(K.text||"empty info...");K=$("body");w.appendTo(K).show();x=setTimeout(function(){clearTimeout(x);w.hide();w.remove()},ba);return w}}}();function ValueTextModel(){var w,h;this.setValue=function(x){w=x};this.getValue=function(){return w};this.setText=function(x){h=x};this.getText=function(){return h};this.toJsonObject=function(){var x={};x.value=this.getValue();x.text=this.getText();return x};this.fromJsonObject=function(x){var K=x.value;K=(new StringUtil).fromJsonEscapeString(K);this.setValue("null"==K?null:K);x=x.text;x=(new StringUtil).fromJsonEscapeString(x);this.setText("null"==x?null:x)};this.toJsonString=function(){var x='{"value":',
K=this.getValue();K||""===K?(K=JSON.stringify(K),x+=K):x+="null";x+=',"text":';(K=this.getText())||""===K?(K=JSON.stringify(K),x+=K):x+="null";return x+"}"}}
function ParamValue(){var w,h,x=[];this.setParamName=function(ba){w=ba};this.getParamName=function(){return w};this.setDataType=function(ba){h=ba};this.getDataType=function(){return h};this.clearValues=function(){x=[]};this.addValue=function(ba){if(!(ba instanceof ValueTextModel||ba instanceof ValueTextTreeNodeModel))throw Error("Illegal argument.");x.push(ba)};this.getValuesCount=function(){return x.length};this.getValue=function(ba){return x[ba]};this.getValues=function(){for(var ba=[],ja=0;ja<
this.getValuesCount();ja++)ba.push(this.getValue(ja));return ba};this.toJsonObject=function(){var ba={};ba.paramName=this.getParamName();ba.dataType=this.getDataType();for(var ja=[],xa=0;xa<this.getValuesCount();xa++){var Xa=this.getValue(xa);ja.push(Xa.toJsonObject())}ba.values=ja;return ba};this.fromJsonObject=function(ba){this.setParamName(ba.paramName);this.setDataType(ba.dataType);this.clearValues();ba=ba.values;for(var ja=0;ja<ba.length;ja++){var xa=ba[ja],Xa=new ValueTextModel;Xa.fromJsonObject(xa);
this.addValue(Xa)}};var K=/\d{4}(-|\/)(0[1-9]|1[0-2])(-|\/)(0[1-9]|[12][0-9]|3[01])\s([01]\d|2[0-3])(:[0-5][0-9]){2}/g;this.toJsonString=function(ba){var ja='{"paramName":"'+this.getParamName()+'",';ja+='"dataType":"'+h+'",';ja+='"paramVars":[';ba||(ba=/;/g);for(var xa=0;xa<this.getValuesCount();xa++){0<xa&&(ja+=",");var Xa=this.getValue(xa),oa=Xa.getValue();ba.lastIndex=0;if(oa&&ba.test(oa)){var ta=[];if(-1<ba.toString().indexOf("s"))if(ta=oa.match(K),null!=ta)for(var Pa=0;Pa<ta.length;Pa++)oa=oa.replace(ta[Pa],
" ");else ta=[];oa=oa.trim();ba.lastIndex=0;oa&&ba.test(oa)&&(ta=ta.concat(oa.split(ba)));for(oa=0;oa<ta.length;oa++)(Pa=ta[oa])&&""!==Pa.trim()&&(Xa.setValue(Pa),Xa.setText(Pa),ja+=Xa.toJsonString(),ja+=",");ja=ja.substring(0,ja.length-1)}else ja+=Xa.toJsonString()}return ja+"]}"}}
function ValueTextTreeNodeModel(){var w,h,x,K,ba,ja,xa,Xa;this.setEntry=function(oa){xa=oa};this.getEntry=function(){return xa};this.setEntryHeadMap=function(oa){Xa=oa};this.getEntryHeadMap=function(){return Xa};this.setLevel=function(oa){ja=oa};this.getLevel=function(){return ja};this.setValue=function(oa){w=oa};this.getValue=function(){return w};this.setText=function(oa){h=oa};this.getText=function(){return h};this.setId=function(oa){x=oa};this.getId=function(){return x};this.setParentId=function(oa){K=
oa};this.getParentId=function(){return K};this.setChildren=function(oa){ba=oa};this.getChildren=function(){return ba};this.addChild=function(oa){if(!(oa instanceof ValueTextTreeNodeModel))throw Error("Illegal argument. Argument should be instanceof ValueTextTreeNodeModel");null==ba&&(ba=[]);ba.push(oa)};this.addChildren=function(oa){if(!(oa instanceof Array))throw Error("Illegal argument.");null==ba&&(ba=[]);ba.concat(oa)};this.toJsonObject=function(){var oa={};oa.value=this.getValue();oa.text=this.getText();
oa.id=this.getId();oa.parentId=this.getParentId();oa.children=this.getChildren();return oa};this.fromJsonObject=function(oa){var ta=oa.value;ta=(new StringUtil).fromJsonEscapeString(ta);this.setValue("null"==ta?null:ta);ta=oa.text;ta=(new StringUtil).fromJsonEscapeString(ta);this.setText("null"==ta?null:ta);ta=oa.id;ta=(new StringUtil).fromJsonEscapeString(ta);this.setId("null"==ta?null:ta);ta=oa.parentId;ta=(new StringUtil).fromJsonEscapeString(ta);this.setparentId("null"==ta?null:ta);oa=oa.children;
this.setChildren("null"==oa?null:oa)};this.toJsonString=function(){var oa='{"value":',ta=this.getValue();ta||""===ta?(ta=(new StringUtil).toJsonEscapeString(ta),oa+='"'+ta+'"'):oa+="null";oa+=',"text":';(ta=this.getText())||""===ta?(ta=(new StringUtil).toJsonEscapeString(ta),oa+='"'+ta+'"'):oa+="null";return oa+"}"}}
function ValueTextTreeModel(){var w;this.getRootArray=function(){return w};this.buildTree=function(h){if(!(h instanceof Array))throw Error("Illegal argument.");w=[];if(h&&0!=h.length){if(!(h[0]instanceof ValueTextTreeNodeModel))throw Error("Illegal argument. Elements in Array should be instance of ValueTextTreeNodeModel.");for(var x=h.length,K={},ba,ja,xa=0;xa<x;xa++)ba=h[xa],ja=ba.getId(),ja||(ja="treeAutoId_"+xa,ba.setId(ja)),K[ja]=ba;for(xa=0;xa<x;xa++)ba=h[xa],ja=null,ba.getParentId()&&(ja=K[ba.getParentId()]),
ja?ja.addChild(ba):w.push(ba)}};this.clear=function(){w=[]}};function ReportParamDescription(){var w,h,x,K,ba,ja,xa,Xa,oa,ta,Pa,Qa,Pb,Sa,hb,ib,Eb;this.setMaxRestrictNumber=function(Ia){hb="null"==Ia?"":Ia};this.getMaxRestrictNumber=function(){return hb};this.setName=function(Ia){w="null"==Ia?"":Ia};this.getName=function(){return w};this.setText=function(Ia){h="null"==Ia?"":Ia};this.getText=function(){return h};this.getCaption=function(){return h?h:w};this.setRequired=function(Ia){x=Ia};this.isRequired=function(){return x};this.setDataType=function(Ia){K=Ia};
this.getDataType=function(){return K};this.setCtrlType=function(Ia){ba=Ia};this.getCtrlType=function(){return ba};this.setState=function(Ia){ja=Ia};this.getState=function(){return ja};this.setReadOnly=function(Ia){xa=Ia};this.isReadOnly=function(){return xa};this.setMultiSelectable=function(Ia){Xa=Ia};this.isMultiSelectable=function(){return Xa};this.setIsTree=function(Ia){oa=Ia};this.isTree=function(){return oa};this.setTreeExpandLevel=function(Ia){ta=Ia};this.getTreeExpandLevel=function(){return ta};
this.setSuppliedValue=function(Ia){Pa="null"==Pa?"":Ia};this.getSuppliedValue=function(){return Pa};this.setDefaultValue=function(Ia){"null"!=Ia&&(Qa=Ia)};this.getDefaultValue=function(){return Qa};this.setSuppliedValueDescription=function(Ia){Sa=Ia};this.getSuppliedValueDescription=function(){return Sa};this.setEditable=function(Ia){Pb=Ia};this.isEditable=function(){return Pb};this.setPattern=function(Ia){ib=Ia};this.getPattern=function(){return ib};this.setDescription=function(Ia){Eb=Ia};this.getDescription=
function(){return Eb}}ReportParamDescription.Y_M_D_PATTERN="yyyy-MM-dd";ReportParamDescription.Y_PATTERN="yyyy";ReportParamDescription.Y_M_PATTERN="yyyy-MM";ReportParamDescription.Y_Q_PATTERN="yyyy-'Q'q";
function KEXTParamsAssociateModel(){var w={},h={};this.addOneAffectAnother=function(K,ba){var ja=w[K];ja||(ja={},w[K]=ja);ja[ba]=!0;ja=h[ba];ja||(ja={},h[ba]=ja);ja[K]=!0};this.isOneAffectOthers=function(K){return w[K]?!0:!1};this.isOneAffectAnother=function(K,ba){return x(w,K,ba)};this.isOneAffectedByAnother=function(K,ba){return x(h,K,ba)};var x=function(K,ba,ja){return(K=K[ba])?K[ja]?!0:!1:!1}}
function SwitchButtonSuppliedValue(){var w,h;this.setChecked=function(x){if(!(x instanceof ValueTextModel))throw Error("Illegal argument.");w=x};this.getChecked=function(){return w};this.setUnchecked=function(x){if(!(x instanceof ValueTextModel))throw Error("Illegal argument.");h=x};this.getUnchecked=function(){return h}}
function NumberStepperSuppliedValue(){var w,h,x;this.setMin=function(K){w=K};this.getMin=function(){return w};this.setMax=function(K){h=K};this.getMax=function(){return h};this.setStep=function(K){x=K};this.getStep=function(){return x}}
function ListDelaySuppliedValueDescription(){var w,h,x,K,ba;this.setValueField=function(ja){w=ja};this.getValueField=function(){return w};this.setTextField=function(ja){h=ja};this.getTextField=function(){return h};this.setDatasetPersistenceModel=function(ja){x=ja};this.getDatasetPersistenceModel=function(){return x};this.setDataSourceType=function(ja){K=ja};this.getDataSourceType=function(){return K};this.setReportId=function(ja){ba=ja};this.getReportId=function(){return ba}};(function(){function w(a){x.call(this,a);var e=this.protectedMethod,l=new t;this.protectedCreateItemUi=function(u,v,E,V){var Ea=v.getValue();u=e.isSelected(Ea);E=new H;E.setText(v.getText());E.setChecked(u);E.addCheckedListener(function(J,y){y&&e.selectOnlyOne(Ea)});l.addElement(E);return E.getJqUi()}}function h(a){x.call(this,a);var e=this,l=this.protectedMethod,u=!0,v,E,V;this.protectedInitBar=function(y,O,Z){V=new P;V.setText(g.get("includeSubs","\u9009\u62e9\u65f6\u5305\u542b\u4e0b\u7ea7\u8282\u70b9"));
V.setChecked(u);V.addCheckedListener(J);var Ya=V.getJqUi(),ub="en"==c.getUrlParamValue("language")?163:130;B.layoutCtrlWithLRTB(Ya,null,0,ub,30,null,21);Ya.appendTo(y);v=new P;v.setText(g.get("selectAll","\u5168\u9009"));v.setChecked(O);v.addCheckedListener(function(za,Za){if(Za){za=za.isChecked();for(Za=0;Za<Z.getRowsCount();Za++){var vb=Z.getRow(Za);if(!vb.isHide()||V.isEnabled()&&V.isChecked())vb=vb.getCell(0).getValue(),l.select(vb.getValue(),za)}e.resetScrollStatus(Z);Z.updateUI(!0);Ea()}});
Ya=v.getJqUi();O="en"==c.getUrlParamValue("language")?26:0;B.layoutCtrlWithLRTB(Ya,0,null,50+O,30,null,21);Ya.appendTo(y);E=new pa;Ea();Ya=E.getJqUi();B.layoutCtrlWithLRTB(Ya,60+O,null,110,30,null,21);Ya.find(".sa-ctrl-label-text").css({overflow:"visible"});Ya.appendTo(y)};this.protectedGetBarHeight=function(){return 58};this.protectedAfterUpdateTree=function(y,O){v.setChecked(y);V.setEnabled(!O)};this.protectedIsIncludeSubs=function(){return u};this.protectedCreateItemUi=function(y,O,Z,Ya){var ub=
O.getValue();ub=l.isSelected(ub);var za=new P;za.setUserObject(Z);za.setText(O.getText());za.setChecked(ub);za.addCheckedListener(function(Za,vb){if(vb){vb=Za.getUserObject();Za=Za.isChecked();var Fb=y.getRow(vb).getCell(0),db=Fb.getValue();l.select(db.getValue(),Za);if(u&&!Ya()){db=Fb.getTreeModel();var wb=db.getLevel();for(vb+=1;vb<y.getRowsCount();vb++){Fb=y.getRow(vb).getCell(0);db=Fb.getTreeModel();if(db.getLevel()<=wb)break;db=Fb.getValue();l.select(db.getValue(),Za)}}y.updateUI(!0);vb=!0;Za=
!1;for(Fb=0;Fb<y.getRowsCount();Fb++)if(wb=y.getRow(Fb),!wb.isHide()&&(Za=!0,wb=wb.getCell(0).getValue(),!l.isSelected(wb.getValue()))){vb=!1;break}v.setChecked(Za&&vb);Ea()}});return za.getJqUi()};var Ea=function(){var y=0;for(var O=e.getSelectableItems(),Z=0;Z<O.length;Z++)l.isSelected(O[Z].getValue())&&y++;y=g.get("selectedCount","(\u5df2\u9009\u62e9#1\u9879)").replace("#1",y);E.setText(y)},J=function(y,O){O&&(u=y.isChecked())}}function x(a){function e(Fa){KTDefaultTreeHandlerRender.call(this,
Fa);var Na=this.create;this.create=function(eb,Ja,X,Ca,Ma,Db,fb){return Fb()?[]:Na(eb,Ja,X,Ca,Ma,Db,fb)}}function l(Fa){KTDefaultCellRender.call(this,Fa);var Na=this;this.paintCellUI=function(eb,Ja){var X=Na.getCell().getValue(),Ca=Na.getCurrentRowIdx();X=v.protectedCreateItemUi(Fa,X,Ca,Fb);X.css("overflow","visible");X.children().css("overflow","visible");eb=$(eb);eb.css("overflow","visible");Ja?(Ja=$(Ja),Ja.css("overflow","visible"),X.appendTo(Ja),B.layoutCtrlWithLRTB(X,4,0,null,0,null,"100%")):
(X.appendTo(eb),B.layoutCtrlWithLRTB(X,0,0,null,0,null,"100%"))}}var u=23,v=this,E,V,Ea,J=!1,y=[],O=[],Z,Ya=!1;this.getJqUi=function(){if(!E){E=$("<div>");for(var Fa={},Na=0,eb=O.length;Na<eb;Na++)O[Na].getValue()&&(Fa[O[Na].getValue()]=!0);V=Fa;J=!1;Fa=new KTable;Fa.setCellRender(new l(Fa));Fa.setTreeHandlerRender(new e(Fa));Fa.setSyncUIWhenModelChanged(!1);y&&1024<=y.length?Fa.setLargeDataMode(!0,!1):Fa.setLargeDataMode(!1);Fa.addColumn().setWidth(320);Na=new KTStyle;Na.setVerticalAlign("middle");
Fa.setStyle(Na);var Ja=y;if(0==Ja.length)Na=!1;else{Na=!0;var X=wb(),Ca=!X;for(eb=0;eb<Ja.length;eb++){var Ma=Ja[eb],Db=db(Ma.getValue()),fb=Fa.addRow();fb.setHeight(u);var bb=fb.getCell(0);bb.setValue(Ma);Ma=Ma.getLevel();Ma=new KTCellTreeModel(Ma);Ca&&za(fb,Ma);bb.setTreeModel(Ma);Na=Na&&Db}if(X){var m;Ja={};for(eb=Fa.getRowsCount()-1;0<=eb;eb--){fb=Fa.getRow(eb);bb=fb.getCell(0);X=bb.getTreeModel();Ca=X.getLevel();Ma=bb.getValue();if(db(Ma.getValue())){fb.setHide(!1);var k=Ma.getParentId();(bb=
Ja[Ca])&&0!=bb.length||(bb=[]);bb.push(Ma);Ja[Ca]=bb}if(m&&m===Ca+1)if((bb=Ja[m])&&0<bb.length){Db=!1;for(m=0;m<bb.length;m++){var fa=bb[m];if(k===Ma.getId()||fa&&fa.getParentId()===Ma.getId()){Db=!0;break}}if(Db){var z=!0;X.setExpanded(!0);fb.setHide(!1);(bb=Ja[Ca])&&0!=bb.length||(bb=[]);bb.push(Ma);Ja[Ca]=bb}else X.setExpanded(!1)}else X.setExpanded(!1);0===eb&&z&&(fb.setHide(!1),X.setExpanded(!0));m=Ca}fb=0;k=Object.values(Ja);for(eb=0;eb<k.length;eb++)for(z=k[eb],m=0;m<z.length;m++)Ma=z[m],fb=
Ma.getLevel()>fb?Ma.getLevel():fb;for(eb=Fa.getRowsCount()-1;0<=eb;eb--)if(fb=Fa.getRow(eb),bb=fb.getCell(0),X=bb.getTreeModel(),Ma=bb.getValue(),k=X.getLevel(),(z=Ja[k])&&0<z.length){bb=!1;for(m=0;m<z.length;m++)if((Ca=z[m])&&Ca.getParentId()===Ma.getParentId()){bb=!0;break}bb?(fb.setHide(!1),k<a-1&&X.setExpanded(!0)):za(fb,X)}else za(fb,X)}}Fa.updateUI();eb=v.protectedGetBarHeight()+6;fb=$(Fa.getUI());B.layoutCtrlWithLRTB(fb,0,0,null,eb,0,null);E.append(fb);Fa=[Na,Fa];ub(Fa[0],Fa[1])}return E};
this.setSelectableItems=function(Fa){y=Fa};this.getSelectableItems=function(){return y};this.setSelected=function(Fa){O=Fa};this.getSelected=function(){var Fa=[];if(!V)return Fa;for(var Na=0,eb=y.length;Na<eb;Na++){var Ja=y[Na].getValue();V[Ja]&&Fa.push(y[Na])}return Fa};this.setItemHeight=function(Fa){u=Fa};this.protectedIsIncludeSubs=function(){return!1};this.resetScrollStatus=function(Fa){if(Fa&&Fa.isLargeDataMode()){var Na=Fa.keepScrollStatus();Na.v&&(Na.v=0);Fa.restoreScrollStatus(Na)}};this.setMobile=
function(Fa){Ya=Fa};var ub=function(Fa,Na){var eb=$("<div>");eb.css("border-bottom","1px solid #eee");var Ja=v.protectedGetBarHeight();B.layoutCtrlWithLRTB(eb,0,0,null,0,null,Ja);Ea=new Sa(Ya);Ea.setSearchingHandler(function(){var Ca=Za(Na);v.resetScrollStatus(Na);Na.updateUI(!0);vb(Ca)});Ja=Ea.getJqUi();B.layoutCtrlWithLRTB(Ja,0,null,Ya?"57%":"66%",0,null,23);Ja.css({"min-width":"214px !important","max-width":"500px !important"});Ja.appendTo(eb);Ja=new P;Ja.setText(g.get("showOnlySelected","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));
Ja.setChecked(J);Ja.addCheckedListener(function(Ca,Ma){Ma&&(J=Ca.isChecked(),Ca=Za(Na),v.resetScrollStatus(Na),Na.updateUI(!0),vb(Ca))});Ja=Ja.getJqUi();if(Ya){var X="en"==c.getUrlParamValue("language")?128:94;B.layoutCtrlWithLRTB(Ja,null,0,X,0,null,21)}else X="en"==c.getUrlParamValue("language")?140:106,B.layoutCtrlWithLRTB(Ja,null,23,X,0,null,21);Ja.appendTo(eb);v.protectedInitBar(eb,Fa,Na);eb.appendTo(E)};this.protectedInitBar=function(Fa,Na,eb){};this.protectedGetBarHeight=function(){return 30};
var za=function(Fa,Na){Na.getLevel()<a-1?(Na.setExpanded(!0),Fa.setHide(!1)):Na.getLevel()===a-1?(Na.setExpanded(!1),Fa.setHide(!1)):(Na.setExpanded(!1),Fa.setHide(!0))},Za=function(Fa){for(var Na=Fb(),eb=!0,Ja=!1,X=65535,Ca=!1,Ma=0;Ma<Fa.getRowsCount();Ma++){var Db=Fa.getRow(Ma),fb=Db.getCell(0),bb=fb.getTreeModel(),m=!0;bb.getLevel()<=X&&(m=!1);var k=fb.getValue();fb=db(k.getValue());k=J&&!fb||Ea.isSearching()&&!Ea.check(k.getText());var fa=m;fa=Na?k:fa;Db.setHide(fa);fa||(Ca=!0);k||(Ja=Ja||fb,
eb=eb&&fb);m||(X=bb.isExpanded()?65535:bb.getLevel())}v.protectedAfterUpdateTree(Ja?eb:!1,Na);return Ca};this.protectedAfterUpdateTree=function(Fa,Na){};this.protectedCreateItemUi=function(Fa,Na,eb,Ja){throw Error("Override");};var vb=function(Fa){Fa?(Z&&Z.remove(),Z=null):Z||(Fa=new pa,Fa.setText(g.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),Fa.setEnabled(!1),Z=Fa.getJqUi(),B.layoutCtrlWithLRTB(Z,0,0,null,60,null,16),Fa.setAlign(pa.ALIGN_CENTER),Z.appendTo(E))},Fb=
function(){return J||Ea&&Ea.isSearching()},db=function(Fa){return 1==V[Fa]},wb=function(){if(V&&0<Object.keys(V).length){var Fa=y;if(0==Fa.length)return!1;for(var Na=0;Na<Fa.length;Na++)if(db(Fa[Na].getValue()))return!0}return!1};this.protectedMethod={isSelected:db,select:function(Fa,Na){Na?V[Fa]=!0:delete V[Fa]},selectOnlyOne:function(Fa){V={};V[Fa]=!0}}}function K(){xa.call(this);var a=this.protectedMethod,e=[],l=[];this.setSelectableItems=function(u){e=u};this.setSelected=function(u){l=u};this.protectedGetSelectableItems=
function(){return e};this.protectedCloneSelectedValue=function(){var u={};if(l)for(var v=0,E=l.length;v<E;v++)u[l[v].getValue()]=!0;return u};this.getSelected=function(){var u=a.acceptSelectingResult(),v=[];if(!u)return v;for(var E=0,V=e.length;E<V;E++){var Ea=e[E].getValue();if(u[Ea]){v.push(e[E]);break}}return v}}function ba(){ja.call(this);var a=this.protectedMethod,e=[],l=[];this.setSelectableItems=function(u){e=u};this.setSelected=function(u){l=u};this.protectedGetSelectableItems=function(){return e};
this.protectedCloneSelectedValue=function(){var u={};if(l)for(var v=0,E=l.length;v<E;v++)u[l[v].getValue()]=!0;return u};this.getSelected=function(){var u=a.acceptSelectingResult(),v=[];if(!u)return v;for(var E=0,V=e.length;E<V;E++){var Ea=e[E].getValue();u[Ea]&&v.push(e[E])}return v}}function ja(){Xa.call(this);var a=this,e=this.protectedMethod,l,u;this.protectedInitBar=function(J){l=new P;l.setText(g.get("selectAll","\u5168\u9009"));l.addCheckedListener(Ea);var y=l.getJqUi();B.layoutCtrlWithLRTB(y,
0,null,80,30,null,21);y.appendTo(J);u=new pa;y=u.getJqUi();B.layoutCtrlWithLRTB(y,80,0,null,30,null,21);y.find(".sa-ctrl-label-text").css({overflow:"visible"});y.appendTo(J);v();return 55};this.protectedItemCreator=function(J){var y=J.getValue();y=e.isSelected(y);var O=J.getText(),Z=new P;Z.addCheckedListener(V);Z.setUserObject(J);Z.setText(O);Z.setChecked(y);a.protectedIsExcludeMode()&&Z.setCustomStyle("text-decoration","line-through");J=Z.getJqUi();B.layoutCtrlWithLRTB(J,0,0,null);return J};this.protectedIsExcludeMode=
function(){return!1};this.protectedAfterUpdateDynamicScroller=function(){E()};var v=function(){var J=0;for(var y=a.protectedGetSelectableItems(),O=0;O<y.length;O++)e.isSelected(y[O].getValue())&&J++;J=g.get("selectedCount","(\u5df2\u9009\u62e9#1\u9879)").replace("#1",J);u.setText(J)},E=function(){var J=!0,y=!1;e.visitAllVisibleSelectableItems(function(O){var Z=!1;y=!0;e.isSelected(O.getValue())||(J=!1,Z=!0);return Z});l.setChecked(y&&J)},V=function(J,y){y&&(y=J.getUserObject(),J=J.isChecked(),e.select(y.getValue(),
J),E(),v())},Ea=function(J,y){if(y){var O=J.isChecked();e.visitAllVisibleSelectableItems(function(Z){e.select(Z.getValue(),O)});e.repaintWithScrollState();v()}}}function xa(){Xa.call(this);var a=this.protectedMethod;this.protectedItemCreator=function(l){var u=l.getValue();u=a.isSelected(u);var v=l.getText(),E=new H;E.addCheckedListener(e);E.setUserObject(l);E.setText(v);E.setChecked(u);l=E.getJqUi();B.layoutCtrlWithLRTB(l,0,0,null);return l};var e=function(l,u){u&&(l.isChecked()?(l=l.getUserObject(),
a.selectOnlyOne(l.getValue()),a.repaintWithScrollState()):l.setChecked(!0))}}function Xa(){var a=21,e=this,l,u,v,E,V,Ea,J,y={},O=!1;this.getJqUi=function(){l||(l=$("<div>"),Z(l));return l};this.protectedGetSelectableItems=function(){throw Error("Impl");};this.setMobile=function(db){O=db};var Z=function(db){u=db;y=e.protectedCloneSelectedValue();Ea=!1;var wb=$("<div>");wb.appendTo(db);var Fa=Ya(wb);B.layoutCtrlWithLRTB(wb,0,0,null,0,null,Fa);V=new da;V.setItemHeight(a);V.setItemUiCreator(function(Na){return e.protectedItemCreator(J[Na])});
V.getJqUi().appendTo(db);B.layoutCtrlWithLRTB(V.getJqUi(),0,0,null,Fa,0,null);ub()};this.protectedCloneSelectedValue=function(){throw Error("Impl");};this.protectedItemCreator=function(db){throw Error("Impl");};var Ya=function(db){E=new Sa(O);E.setSearchingHandler(vb);var wb=E.getJqUi();B.layoutCtrlWithLRTB(wb,0,null,O?"57%":"66%",0,null,23);wb.css({"min-width":"214px !important","max-width":"500px !important"});wb.appendTo(db);wb=new P;wb.setText(g.get("showOnlySelected","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));
wb.setChecked(Ea);wb.addCheckedListener(Fb);wb=wb.getJqUi();var Fa="en"==c.getUrlParamValue("language")?140:106;O&&(Fa="en"==c.getUrlParamValue("language")?128:94);B.layoutCtrlWithLRTB(wb,null,0,Fa,0,null,21);wb.appendTo(db);return e.protectedInitBar(db)};this.protectedInitBar=function(db){return 28};var ub=function(){var db=e.protectedGetSelectableItems();J=E.isSearching()||Ea?$.grep(db,function(wb){var Fa=E.check(wb.getText());wb=!Ea||Za(wb.getValue());return Fa&&wb}):db;V.setItemCount(J.length);
V.repaint();e.protectedAfterUpdateDynamicScroller()};this.protectedAfterUpdateDynamicScroller=function(){};this.setItemHeight=function(db){a=db};var za=function(){if(0==J.length){if(!v){var db=new pa;db.setText(g.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c"));db.setEnabled(!1);v=db.getJqUi();B.layoutCtrlWithLRTB(v,0,0,null,60,null,16);db.setAlign(pa.ALIGN_CENTER);v.appendTo(u)}}else v&&v.remove(),v=null},Za=function(db){return 1==y[db]},vb=function(){ub();za()},Fb=function(db,
wb){Ea=db.isChecked();ub();za()};this.protectedMethod={repaintWithScrollState:function(){V.keepState();V.repaint();V.restoreState()},visitAllVisibleSelectableItems:function(db){for(var wb=0;wb<J.length&&!db(J[wb]);wb++);},isSelected:Za,select:function(db,wb){wb?y[db]=!0:delete y[db]},selectOnlyOne:function(db){y={};y[db]=!0},acceptSelectingResult:function(){return y}}}function oa(){Qa.call(this);var a=this.protectedMethod,e=[],l=[];this.setSelectableItems=function(u){e=u};this.setSelected=function(u){l=
u};this.protectedGetSelectableItems=function(){return e};this.protectedCloneSelectedValue=function(){var u={};if(l)for(var v=0,E=l.length;v<E;v++)u[l[v].getValue()]=!0;return u};this.getSelected=function(){var u=a.acceptSelectingResult(),v=[];if(!u)return v;for(var E=0,V=e.length;E<V;E++){var Ea=e[E].getValue();if(u[Ea]){v.push(e[E]);break}}return v}}function ta(){Pa.call(this);var a=this.protectedMethod,e=[],l=[];this.setSelectableItems=function(u){e=u};this.setSelected=function(u){l=u};this.protectedGetSelectableItems=
function(){return e};this.protectedCloneSelectedValue=function(){var u={};if(l)for(var v=0,E=l.length;v<E;v++)u[l[v].getValue()]=!0;return u};this.getSelected=function(){var u=a.acceptSelectingResult(),v=[];if(!u)return v;for(var E=0,V=e.length;E<V;E++){var Ea=e[E].getValue();u[Ea]&&v.push(e[E])}return v}}function Pa(){Pb.call(this);var a=this,e=this.protectedMethod,l,u=[],v;this.protectedInitBar=function(y){l=new P;l.setText(g.get("selectAll","\u5168\u9009"));l.addCheckedListener(J);var O=l.getJqUi();
B.layoutCtrlWithLRTB(O,0,null,80,30,null,21);O.appendTo(y);v=new pa;O=v.getJqUi();B.layoutCtrlWithLRTB(O,80,0,null,30,null,21);O.find(".sa-ctrl-label-text").css({overflow:"visible"});O.appendTo(y);E();return 55};this.protectedItemCreator=function(y){var O=y.getValue();O=e.isSelected(O);var Z=new P;Z.addCheckedListener(Ea);Z.setUserObject(y);Z.setChecked(O);a.protectedIsExcludeMode()&&Z.setCustomStyle("text-decoration","line-through");u.push(Z);return Z.getJqUi()};this.protectedIsExcludeMode=function(){return!1};
this.protectedAfterUpdateTable=function(){V()};var E=function(){var y=0;for(var O=a.protectedGetSelectableItems(),Z=0;Z<O.length;Z++)e.isSelected(O[Z].getValue())&&y++;y=g.get("selectedCount","(\u5df2\u9009\u62e9#1\u9879)").replace("#1",y);v.setText(y)},V=function(){var y=!0,O=!1;e.visitAllVisibleSelectableItems(function(Z){var Ya=!1;O=!0;e.isSelected(Z.getValue())||(y=!1,Ya=!0);return Ya});l.setChecked(O&&y)},Ea=function(y,O){O&&(O=y.getUserObject(),y=y.isChecked(),e.select(O.getValue(),y),V(),E())},
J=function(y,O){if(O){var Z=y.isChecked();for(y=0;y<u.length;y++)u[y]&&u[y].setChecked(Z);e.visitAllVisibleSelectableItems(function(Ya){e.select(Ya.getValue(),Z)});E()}}}function Qa(){Pb.call(this);var a=this.protectedMethod,e=new t;this.protectedItemCreator=function(u){var v=u.getValue();v=a.isSelected(v);var E=new H;E.addCheckedListener(l);E.setUserObject(u);E.setChecked(v);e.addElement(E);return E.getJqUi()};var l=function(u,v){v&&(u.isChecked()?(u=u.getUserObject(),a.selectOnlyOne(u.getValue())):
u.setChecked(!0))}}function Pb(){function a(X){KTDefaultCellRender.call(this,X);var Ca=this,Ma=this.paintCellUI;this.paintCellUI=function(Db,fb){var bb=Ca.getCurrentRowIdx(),m=Ca.getCurrentRow(),k=Ca.getCurrentColIdx(),fa=m.getUserObject(),z=vb&&-1!=vb.indexOf(k-1);bb<la.getHeadRowCount()?z&&1==bb?(k=m.getCell(k).getValue(),z=new q,z.setIconType(q.ICON_TYPE_QUESTION),z.setTipsText(g.get("noFieldPermTips","\u60a8\u6ca1\u6709\u6743\u9650\u67e5\u770b\u8be5\u5b57\u6bb5\u6570\u636e\u3002")),z=z.getJqUi(),
z.css({display:"inline-block",margin:"5px 0 0 3px"}),fb=$("<div>"),fb.attr("title",k),fb.text(k),fb.css({"margin-top":"5px",display:"inline-block"}),fb.appendTo(Db),z.appendTo(Db)):Ma(Db,fb):0==k?(k=l.protectedItemCreator(fa),k.css({position:"absolute",left:"30%",top:"2px",width:"23px",height:"23px"}),k.appendTo(Db)):(fb=fa.getEntry(),k=z?"***":fb?fb[O[k-1]]:"",z=$("<div>"),z.attr("title",k),z.text(k),z.css({"line-height":"28px","padding-left":"10px","padding-right":"10px","text-align":"left",overflow:"hidden",
"text-overflow":"ellipsis"}),z.appendTo(Db))}}function e(){KTableUIDraggableAdjustingHandler.CustomExpendor.call(this);this.getTailBlankForDragging=function(){return 10}}var l=this,u,v,E,V,Ea,J,y,O,Z=[],Ya,ub,za,Za={},vb=[],Fb=!1;this.getJqUi=function(){if(!u){var X=u=$("<div>");v=X;Za=l.protectedCloneSelectedValue();ub=!1;var Ca=$("<div>");Ca.appendTo(X);Ya=new Sa(Fb);Ya.setSearchingHandler(eb);var Ma=Ya.getJqUi();B.layoutCtrlWithLRTB(Ma,0,null,Fb?"57%":"66%",0,null,23);Ma.css({"min-width":"214px !important",
"max-width":"500px !important"});Ma.appendTo(Ca);Ma=new P;Ma.setText(g.get("showOnlySelected","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));Ma.setChecked(ub);Ma.addCheckedListener(Ja);Ma=Ma.getJqUi();var Db="en"==c.getUrlParamValue("language")?140:106;Fb&&(Db="en"==c.getUrlParamValue("language")?128:94);B.layoutCtrlWithLRTB(Ma,null,0,Db,0,null,21);Ma.appendTo(Ca);Ma=l.protectedInitBar(Ca);B.layoutCtrlWithLRTB(Ca,0,0,null,0,null,Ma);V=new KTable;V.setFrozenRows(la.getHeadRowCount());V.setDraggableAdjusting(!0,
la.getHeadRowCount(),0,new e);Ca=new KTStyle;Ca.setVerticalAlign("middle");Ca.setFontSize(U.getFontSize());Ca.setFontUnit("px");Ca.setFontName(U.getFontName());Ca.setColor(com.kingdee.bos.qing.common.CommonTableSkin.COLOR);V.setStyle(Ca);Ca=new a(V);Ca.setOutsideVisible(!1);V.setCellRender(Ca);V.setSyncUIWhenModelChanged(!1);Ca=Ma+6;Ea=$(V.getUI());B.layoutCtrlWithLRTB(Ea,0,0,null,Ca,0,null);Ea.appendTo(X)}return u};this.setNoPermFieldIndex=function(X){vb=X};this.setMobile=function(X){Fb=X};this.protectedGetSelectableItems=
function(){throw Error("Impl");};var db=function(){za&&1024<=za.length?V.setLargeDataMode(!0,!1):V.setLargeDataMode(!1);var X=za[0].getEntryHeadMap();y||(X?(y=Object.values(X),O=Object.keys(X)):((X=za[0].getEntry())||(X=l.protectedGetSelectableItems()[0].getEntry()),y=Object.keys(X),O=Object.keys(X)));J=y.length+1;if(0==Z.length){var Ca=za,Ma,Db;X=[];for(Ma=0;Ma<y.length;Ma++)X[Ma]=0;for(Ma=0;Ma<Ca.length;Ma++){var fb=Ca[Ma].getEntry();for(Db=0;Db<y.length;Db++){var bb=fb[O[Db]];20>Ma&&(bb=bb?bb.toString().length:
0,bb=200<bb?200:bb,bb=10>bb?10:bb,X[Db]+=bb)}}if(0==Ca.length)for(Ma=0;Ma<y.length;Ma++)X[Ma]+=y[Ma].length+10;Ma=0;Db=[];fb=20<=za.length?20:za.length;fb=0===fb?1:fb;for(Ca=0;Ca<y.length;Ca++){bb=X[Ca]/fb;var m=y[Ca]?y[Ca].length:0;bb=bb<m?m:bb;Ma+=bb;Db.push(bb)}for(Ca=0;Ca<y.length;Ca++)Z.push(Db[Ca]/Ma)}V.addColumns(J);Ca=la.createHeadRow(V);V.getColumn(0).setWidth(32);for(X=1;X<J;X++)Ma=X-1,Db=556,fb=140,bb=y.length*fb,Db||(Db=bb),m=Math.floor(Db/bb),2<=m&&(fb*=m,bb=y.length*fb),Ma=bb<Db&&Ma===
y.length-1?Z[Ma]*fb*y.length+(Db-bb):Z[Ma]*fb*y.length,V.getColumn(X).setWidth(Ma),Ca.getCell(X).setValue(y[X-1].toUpperCase());for(X=0;X<za.length;X++)Ca=za[X],la.createRow(V).setUserObject(Ca)},wb=function(){la.clear(V);var X=l.protectedGetSelectableItems();if(Ya.isSearching()||ub){var Ca=Ya.getSelectedSearcherImplLogic();za=$.grep(X,function(Ma){var Db=!1,fb=!ub||Na(Ma.getValue());Ma=Ma.getEntry();for(var bb=Object.keys(Ma).length,m=0;m<bb;m++)if(Ma[O[m]]&&(Db=Ya.check(""+Ma[O[m]])),Ca){if(Db)break}else if(!Db)break;
return Db&&fb})}else za=X;0<za.length&&db();la.refresh(V);l.protectedAfterUpdateTable()};this.protectedAfterUpdateTable=function(){};this.updateTable=function(){wb()};this.protectedCloneSelectedValue=function(){throw Error("Impl");};this.protectedItemCreator=function(X){throw Error("Impl");};this.protectedInitBar=function(X){return 28};this.setItemHeight=function(X){};var Fa=function(){if(0==za.length){if(!E){var X=new pa;X.setText(g.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c"));
X.setEnabled(!1);E=X.getJqUi();B.layoutCtrlWithLRTB(E,0,0,null,60,null,16);X.setAlign(pa.ALIGN_CENTER);E.appendTo(v)}}else E&&E.remove(),E=null},Na=function(X){return 1==Za[X]},eb=function(){wb();Fa()},Ja=function(X,Ca){ub=X.isChecked();wb();Fa()};this.protectedMethod={visitAllVisibleSelectableItems:function(X){for(var Ca=0;Ca<za.length&&!X(za[Ca]);Ca++);},isSelected:Na,select:function(X,Ca){Ca?Za[X]=!0:delete Za[X]},selectOnlyOne:function(X){Za={};Za[X]=!0},acceptSelectingResult:function(){return Za},
protectedUpdateTable:wb}}function Sa(a){hb.call(this);var e=this.protectedMethod,l;this.protectedInitUi=function(u,v){var E=new pa;E.setText(g.get("searcherTitle","\u641c\u7d22"));var V=e.createAllSearchImpl();l=V[0];e.changeSearchImpl(V[0],!1);var Ea=new ab;Ea.setItemModels(V);Ea.setSelected(V[0]);Ea.setCustomPainter(function(J,y,O){O&&y.text(O.getCaption())});Ea.addSelectedChangedListener(function(J,y,O){l=O;e.changeSearchImpl(O,!0)});E=E.getJqUi();Ea=Ea.getJqUi();V="en"==c.getUrlParamValue("language")?
10:0;B.layoutCtrlWithLRTB(E,0,null,40+V,0,null,23);B.layoutCtrlWithLRTB(Ea,33+V,null,74,0,null,23);B.layoutCtrlWithLRTB(v,114+V,null,a?"47%":"45%",0,null,23);v.css({"min-width":"100px !important","max-width":"278px !important","margin-right":"5px"});u.append(E);u.append(Ea);u.append(v)};this.getSelectedSearcherImplLogic=function(){return l.getLogic()}}function hb(){var a=this,e,l,u,v;this.setSearchingHandler=function(V){v=V};this.isSearching=function(){return l&&l.getText()?!0:!1};this.check=function(V){return!(l&&
l.getText())||u.check(V.toLowerCase(),(l?l.getText():null).toLowerCase())};this.clear=function(){l&&l.clear()};this.getJqUi=function(){e||(e=$("<div>"),a.protectedInitUi(e,E().getJqUi()));return e};this.protectedInitUi=function(V,Ea){throw Error("Implement");};var E=function(){l=new r;l.setPlaceholder(g.get("searcherTips","\u641c\u7d22\u5185\u5bb9"));l.addSearchListener(function(V){v()});l.setSearchListenerDelay(1E3);return l};this.protectedMethod={createAllSearchImpl:function(){return[new Eb(!0),
new Eb(!1),new Kb(!0),new Kb(!1),new Nb(!0),new Nb(!1),new Ia(!0),new Ia(!1)]},changeSearchImpl:function(V,Ea){u=V;Ea&&v()}}}function ib(a){var e=this;this.getLogic=function(){return a};this.getCaption=function(){return e.protectedGetCaption(!a)};this.protectedGetCaption=function(l){throw Error("Override");};this.check=function(l,u){l=e.protectedCheckImpl(l,u);return a?l:!l};this.protectedCheckImpl=function(l,u){throw Error("Override");}}function Eb(a){ib.call(this,a);this.protectedGetCaption=function(e){return e?
g.get("searchNotInclude","\u4e0d\u5305\u542b"):g.get("searchInclude","\u5305\u542b")};this.protectedCheckImpl=function(e,l){return 0<=e.indexOf(l)}}function Ia(a){ib.call(this,a);this.protectedGetCaption=function(e){return e?g.get("searchNotEqual","\u4e0d\u7b49\u4e8e"):g.get("searchEqual","\u7b49\u4e8e")};this.protectedCheckImpl=function(e,l){return e===l}}function Kb(a){ib.call(this,a);this.protectedGetCaption=function(e){return e?g.get("searchNotStartOf","\u5f00\u5934\u4e0d\u662f"):g.get("searchStartOf",
"\u5f00\u5934\u662f")};this.protectedCheckImpl=function(e,l){return 0==e.indexOf(l)}}function Nb(a){ib.call(this,a);this.protectedGetCaption=function(e){return e?g.get("searchNotEndOf","\u7ed3\u5c3e\u4e0d\u662f"):g.get("searchEndOf","\u7ed3\u5c3e\u662f")};this.protectedCheckImpl=function(e,l){var u=e.lastIndexOf(l);return 0<=u&&u==e.length-l.length}}function Ob(){var a=this,e,l=!0;this.setUserObject=function(E){e=E};this.getUserObject=function(){return e};this.setEnabled=function(E){l=E;a.protectedUpdateEnabledState()};
this.isEnabled=function(){return l};this.setTooltips=function(E){a.getJqUi().attr("title",E)};this.getJqUi=function(){throw Error("Override me.");};this.protectedUpdateEnabledState=function(){};var u=function(E,V){v(E,V,"sa-ctrl-common-singlelineborder","sa-ctrl-common-singlelineborder_disabled")},v=function(E,V,Ea,J){V?(E.addClass(Ea),E.removeClass(J)):(E.removeClass(Ea),E.addClass(J))};this.protectedMethod={superSetEnabled:function(E){l=E;a.protectedUpdateEnabledState()},createBorder:function(E){var V=
$("<div>");V.addClass("sa-ctrl-common-border");B.layoutCtrlWithLRTB(V,0,0,null,0,0,null);V.appendTo(E);return V},setUiBorderVisible:function(E,V){V?u(E,l):(E.removeClass("sa-ctrl-common-singlelineborder"),E.removeClass("sa-ctrl-common-singlelineborder_disabled"))},setUiBorderEnabled:u,setUiForegroundEnabled:function(E,V){v(E,V,"sa-ctrl-common-foreground_enabled","sa-ctrl-common-foreground_disabled")},setUiBackgroundEnabled:function(E,V){v(E,V,"sa-ctrl-common-background_enabled","sa-ctrl-common-background_disabled")}}}
function ab(){Ob.call(this);var a=this.protectedMethod,e=this,l=[],u,v,E=$("<div>"),V,Ea,J,y,O,Z=[],Ya,ub=!1,za=!1,Za,vb,Fb;this.setItemModels=function(z,M){J=M;l=z;O=null};this.setEditable=function(z,M){Za=(za=z)?M:null};this.setSelected=function(z){u=z;Ca();O&&eb()};this.getSelected=function(){return u};this.setCustomPainter=function(z){Ea=z;Ca();O&&Ja()};this.setDropdownAsLongAsPossible=function(z){ub=z};this.setDropdownListener=function(z){Ya=z};this.addSelectedChangedListener=function(z){Z.push(z)};
this.getJqUi=function(){v||db();return v};this.protectedUpdateEnabledState=function(){v&&(a.setUiBorderEnabled(v,e.isEnabled()),a.setUiBackgroundEnabled(v,e.isEnabled()),a.setUiForegroundEnabled(v,e.isEnabled()),e.isEnabled()?V.addClass("extreport-runtime-filter-combobox-arrow_enabled"):V.removeClass("extreport-runtime-filter-combobox-arrow_enabled"))};this.isChildOfPopup=function(z){return y?B.isDescendent(z,y[0]):!1};var db=function(){v=$("<div>");v.addClass("extreport-runtime-filter-combobox");
E.addClass("extreport-runtime-filter-combobox-text");E.appendTo(v);V=$("<div>");V.addClass("extreport-runtime-filter-combobox-arrow");V.appendTo(v);V.on("mouseenter",function(z){e.isEnabled()&&X(!0)});V.on("mouseleave",function(z){e.isEnabled()&&X(!1)});X(!1);if(za)E.on("click",wb),V.on("click",Ma),vb=$("<input>"),vb.addClass("extreport-runtime-filter-textfield-input"),vb.on("blur",m),vb.on("keydown",k),vb.appendTo(v),vb.hide();else v.on("click",Ma);e.protectedUpdateEnabledState()},wb=function(z){vb&&
(E.hide(),vb.show(),vb.focus(),vb.val(E.text()))},Fa=function(){O=new A;O.setToggleSelectingEnabled(!1);O.setItemModels(l,J);eb();O.addSelectedChangedListener(function(z,M,ca){if(!Na)for(z=u,ca=0<ca.length?ca[0]:null,e.setSelected(ca),M=0;M<Z.length;M++)(0,Z[M])(e,z,ca)});O.addPressedListener(function(z,M){Db()});Ja()},Na=!1,eb=function(){Na=!0;O.setSelecteds(u||0===u||!1===u?[u]:[]);Na=!1},Ja=function(){Ea?O.setCustomItemPainter(function(z,M){Ea(!1,z,M)}):O.setCustomItemPainter(null)},X=function(z){var M=
y?"arrow-up":"arrow-down";z&&(M+="_hover");na.background(V,M)},Ca=function(){E.empty();Ea?Ea(!0,E,u):E.text(u||0===u||!1===u?u:"");E.show();vb&&vb.hide()},Ma=function(z){if(e.isEnabled())if(y)Db();else{O||Fa();z=$(document.body);var M=v.outerHeight(),ca=v.outerWidth(),ka=[0,M-1];ka=B.upwardCoordinate(v[0],ka,z[0]);M=ka[0];var qa=ka[1];ka=z.prop("clientHeight");var wa=Math.min(20*Math.max(1,Math.min(l.length,ub?65535:10))+2,(ka>>1)-10);qa+wa>ka&&(ka=[0,0],ka=B.upwardCoordinate(v[0],ka,z[0]),ka=ka[1]-
wa+1,0<=ka&&(qa=ka));y=$("<div>");y.addClass("sa-ctrl-common-popup");y.addClass("sa-ctrl-common-unselectable");y.css("position","absolute");y.css("left",M+"px");y.css("top",qa+"px");y.css("width",ca+"px");y.css("height",wa+"px");y.appendTo(z);ca=O.getJqUi();ca.appendTo(y);ca.css("position","absolute");ca.css("left","0px");ca.css("top","0px");ca.css("width","100%");ca.css("height","100%");O.scrollSelectedToVisible();z.on("mousedown",bb);z.on("mousewheel",fb);X(!1);Ya&&Ya(e,!0)}},Db=function(){if(y){var z=
$(document.body);z.off("mousedown",bb);z.off("mousewheel",fb);y.detach();y=null;X(!1);Ya&&Ya(e,!1)}},fb=function(z){B.isDescendent(z.target,O.getJqUi()[0])||Db()},bb=function(z){v.is(":visible")&&(B.isDescendent(z.target,v[0])||B.isDescendent(z.target,y[0]))||Db()},m=function(z){fa()},k=function(z){Fb=!0;13==z.keyCode?(fa(),z.preventDefault()):27==z.keyCode&&(Ca(),Fb=!1)},fa=function(){if(Fb){var z=$.trim(vb.val());z=Za?Za(z):z;e.setSelected(z);Fb=!1}}}function Q(){Ob.call(this);var a=this.protectedMethod,
e=this,l,u,v,E=$("<div>"),V,Ea,J,y,O=[],Z=["arrow-down","arrow-up"],Ya=!1,ub,za,Za;this.setEditable=function(m,k){ub=(Ya=m)?k:null};this.getSelectedModel=function(){return l};this.setSelectedModel=function(m){l=m;Na();vb(!1)};this.addSelectionListener=function(m){O.push(m)};this.removeSelectionListener=function(m){for(var k=O.length-1;0<=k;k--)O[k]==m&&O.splice(k,1)};var vb=function(m){for(var k=0;k<O.length;k++)(0,O[k])(e,m)};this.setCustomPainter=function(m){y=m;Na()};this.setDropdownCreator=function(m){Ea=
m};var Fb=function(m){return Ea(m,l,function(k){X();l=k;Na();vb(!0)},function(){X()},function(k){J=k})};this.getJqUi=function(){u||db();return u};this.setIconName=function(m,k){Z=[m,k?k:m]};var db=function(){u=$("<div>");u.addClass("extreport-runtime-filter-combobox");E.addClass("extreport-runtime-filter-combobox-text");E.appendTo(u);v=$("<div>");v.addClass("extreport-runtime-filter-combobox-arrow");v.appendTo(u);v.on("mouseenter",function(m){e.isEnabled()&&eb(!0)});v.on("mouseleave",function(m){e.isEnabled()&&
eb(!1)});eb(!1);Na();if(Ya)E.on("click",wb),v.on("click",Ja),za=$("<input>"),za.addClass("extreport-runtime-filter-textfield-input"),za.on("blur",Db),za.on("keydown",fb),za.appendTo(u),za.hide();else u.on("click",Ja);e.protectedUpdateEnabledState()},wb=function(m){za&&e.isEnabled()&&(E.hide(),za.show(),za.focus(),za.val(E.text()))},Fa=function(m,k){k.text(m?m:"")},Na=function(){E&&(y?y:Fa)(l,E);E.show();za&&za.hide()},eb=function(m){var k=V?Z[1]:Z[0];m&&(k+="_hover");com.kingdee.bos.qing.ui.component.Icons.background(v,
k)};this.protectedUpdateEnabledState=function(){u&&(a.setUiBorderEnabled(u,e.isEnabled()),a.setUiBackgroundEnabled(u,e.isEnabled()),a.setUiForegroundEnabled(u,e.isEnabled()),e.isEnabled()?(v.addClass("extreport-runtime-filter-combobox-arrow_enabled"),v.css({cursor:"pointer",opacity:""}),Ya&&za.removeAttr("disabled")):(v.removeClass("extreport-runtime-filter-combobox-arrow_enabled"),v.css({cursor:"",opacity:"0.4"}),Ya&&za.attr("disabled","disabled")))};var Ja=function(m){if(e.isEnabled())if(V)X();
else{m=$(document.body);V=$("<div>");V.addClass("sa-ctrl-common-popup");V.addClass("sa-ctrl-common-unselectable");V.appendTo(m);var k=Fb(V),fa=k?k[0]:-1,z=k?k[1]:-1;k=m.prop("clientWidth");var M=m.prop("clientHeight"),ca=M>>1,ka=u.outerWidth(),qa=u.outerHeight(),wa=Math.max(0,ca-qa-28),Ta=[0,qa-1];Ta=B.upwardCoordinate(u[0],Ta,m[0]);var ea=Ta[0],Ua=Ta[1];fa=0>fa?ka:fa;z=0>z?wa:z;Ua+z>M&&(Ua>ca+qa?(Ta=[0,0],Ta=B.upwardCoordinate(u[0],Ta,m[0]),M=Ta[1]-z+1,0<=M?Ua=M:(Ua=2,z=Ta[1]-2)):z=M-Ua-2);ea+fa>
k-10&&(ea=k-fa-10,0>ea&&(ea=0));B.layoutCtrl(V,ea,Ua,fa,z);m.on("mousedown",Ma);m.on("mousewheel",Ca);eb(!1);J&&J()}},X=function(){if(V){var m=$(document.body);m.off("mousedown",Ma);m.off("mousewheel",Ca);V.remove();V=null;eb(!1)}},Ca=function(m){B.isDescendent(m.target,V[0])||X()},Ma=function(m){u.is(":visible")&&(B.isDescendent(m.target,u[0])||B.isDescendent(m.target,V[0]))||X()},Db=function(m){bb()},fb=function(m){Za=!0;13==m.keyCode?(bb(),m.preventDefault()):27==m.keyCode&&(Na(),Za=!1)},bb=function(){if(Za){var m=
$.trim(za.val());m=ub?ub(m):m;e.setSelectedModel(m);Za=!1}}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.runtime&&(com.kingdee.bos.extreport.runtime={});"undefined"==typeof com.kingdee.bos.extreport.runtime.filter&&(com.kingdee.bos.extreport.runtime.filter={});var aa=com.kingdee.bos.extreport.runtime.filter;
aa.F7Selector=function(){Ob.call(this);var a=this.protectedMethod,e=this,l,u,v,E,V,Ea=!1,J=!1,y=!1,O,Z,Ya=[],ub=[];this.setClearable=function(X){Ea=X};this.setEditable=function(X,Ca){Z=(J=X)?Ca:null};this.setEnabled=function(X){l||Fb();a.superSetEnabled(X);var Ca=l.parent();a.setUiBorderEnabled(Ca,X);X?(v.css({color:"#666"}),v.removeAttr("disabled"),v.attr("title",J?v.val():v.text()),l.find(".extreport-runtime-filter-f7selector-btn").css("display",""),Ea=!0):(v.css({color:"#c0c0c0"}),v.attr("disabled",
"disabled"),v.removeAttr("title"),l.find(".extreport-runtime-filter-f7selector-btn").css("display","none"),Ea=!1)};this.setModel=function(X){V=X;Fa()};this.getModel=function(){return V};this.setCustomPainter=function(X){O=X;Fa()};this.addActionListener=function(X){Ya.push(X)};this.removeActionListener=function(X){for(var Ca=Ya.length-1;0<=Ca;Ca--)Ya[Ca]==X&&Ya.splice(Ca,1)};this.addClearListener=function(X){ub.push(X)};this.removeClearListener=function(X){for(var Ca=ub.length-1;0<=Ca;Ca--)ub[Ca]==
X&&ub.splice(Ca,1)};var za=function(){Ea&&V?E?E.show():(E=$("<div>"),E.addClass("extreport-runtime-filter-f7selector-btn"),E.addClass("extreport-runtime-filter-f7selector-btnclear"),E.on("click",vb),na.background(E,"delete"),u.append(E),e.protectedUpdateEnabledState()):E&&E.hide()},Za=function(){E&&E.hide()},vb=function(){if(e.isEnabled()&&Ea){e.setModel(null);E&&E.hide();for(var X=ub.length,Ca=0;Ca<X;Ca++)(0,ub[Ca])(e)}};this.getJqUi=function(){l||Fb();return l};var Fb=function(){u=$("<div>");u.on("mouseenter",
za);u.on("mouseleave",Za);u.addClass("extreport-runtime-filter-f7selector-textcontainer");J?(v=$("<input>"),v.addClass("extreport-runtime-filter-textfield-input"),v.on("blur",Na),v.on("keydown",eb)):(v=$("<div>"),v.addClass("extreport-runtime-filter-f7selector-text"));v.appendTo(u);var X=$("<div>");X.addClass("extreport-runtime-filter-f7selector-btn");X.addClass("extreport-runtime-filter-f7selector-btnedit");X.on("click",db);na.background(X,"search");l=$("<div>");l.addClass("extreport-runtime-filter-f7selector");
l.append(u);l.append(X);Fa();e.protectedUpdateEnabledState()},db=function(){if(e.isEnabled())for(var X=Ya.length,Ca=0;Ca<X;Ca++)(0,Ya[Ca])(e)},wb=function(X){return X?X:""};this.protectedUpdateEnabledState=function(){if(l){a.setUiBorderEnabled(l,e.isEnabled());a.setUiBackgroundEnabled(l,e.isEnabled());a.setUiForegroundEnabled(l,e.isEnabled());var X=l.find(".extreport-runtime-filter-f7selector-btn");e.isEnabled()?X.addClass("extreport-runtime-filter-f7selector-btn_enabled"):X.removeClass("extreport-runtime-filter-f7selector-btn_enabled")}};
var Fa=function(){if(v){var X=(O?O:wb)(V);J?v.val(X):v.text(X);v.attr("title",X)}},Na=function(X){Ja()},eb=function(X){y=!0;13==X.keyCode?(Ja(),X.preventDefault()):27==X.keyCode&&(Fa(),y=!1)},Ja=function(){if(y){var X=$.trim(v.val());X=Z?Z(X):X;e.setModel(X);y=!1}}};aa.F7Dialog=function(){ha.call(this);var a=this,e=this.protectedMethod,l,u=[],v=[],E=!1,V,Ea=!1,J,y,O=[];(function(){e.setTitle(g.get("f7dialog","\u5f39\u7a97\u9009\u62e9\u5668"));a.setSize(640,480);e.setSelectable(!0);e.setContentPaneCreator(function(){if(Ea)l=
E?new h(J):new w(J);else{var Z=u[0]?u[0].getEntry():null;E?Z&&0<Object.keys(Z).length?(l=new ta,l.setNoPermFieldIndex(O)):l=new ba:Z&&0<Object.keys(Z).length?(l=new oa,l.setNoPermFieldIndex(O)):l=new K}l.setSelectableItems(u);l.setSelected(v);return l.getJqUi()});e.setClosingChecker2(function(Z){Z=l.getSelected();if(y&&!isNaN(y)&&Z.length>y)return Z=g.get("exceedMaxSelect","\u9009\u62e9\u6570\u91cf\u8d85\u8fc7\u9650\u5236\uff0c\u6700\u591a\u53ef\u9009#1\u4e2a\u53c2\u6570\u3002").replace("#1",y),e.getMessageCurtain().showPrompt(Z),
!1;V&&V(Z);e.destroy();return!0},function(Z){e.destroy();return!0});e.setClosingAction(function(Z){})})();this.setTreeNodeStyle=function(Z){Ea=Z};this.setTreeExpandLevel=function(Z){J=Z};this.setSelectabledItems=function(Z){u=Z;l&&l.setSelectableItems(u)};this.getPanel=function(){return l};this.setConfirmCallback=function(Z){V=Z};this.setMultiSelect=function(Z){E=Z};this.setSelected=function(Z){Z||(Z=[]);v=Z};this.setMaxSelect=function(Z){y=Z};this.setNoPermFieldIndex=function(Z){O=Z}};aa.ComboBox=
ab;aa.DropdownSelector=Q;aa.ChooseItemPane=function(){var a=[],e,l,u,v;this.setItemModel=function(E){a=E};this.setRawTypeSwitchListener=function(E){};this.setSearchListener=function(E){e=E};this.setListItemPainter=function(E){l=E};this.createJqPopup=function(E,V,Ea){u=$("<div>");u.appendTo(E);v=$("<div>");u.addClass("extreport-runtime-filter-field-popup");E=g.get("search","\u641c\u7d22");var J=new r;J.setSearchListenerDelay(200);J.setPlaceholder(E);J.addSearchListener(function(){e(a,J.getText(),v,
V,l)});E=J.getJqUi();E.addClass("extreport-runtime-filter-field-popup-search");E.appendTo(u);v.addClass("extreport-runtime-filter-field-popup-list-owner");v.on("click",function(O){var Z=$(O.currentTarget);O=$(O.target);if(O=B.upwardSearchHasClass(O,Z,"extreport-runtime-filter-field-popup-list-item"))O.addClass("extreport-runtime-filter-list-item_selected_enabled"),Z=O.data("model"),Ea(Z)});v.appendTo(u);var y=u.find(".extreport-runtime-filter-search-textfield-input");y.css("top","0px");y.css("height",
"100%");for(y=0;y<a.length;y++)l(a[y],v,V,!1);return[-1,10<a.length?200+E.height():20*a.length+E.height()+3]}};aa.DateSelector=function(){com.kingdee.bos.qing.ui.component.DateSelector.call(this);var a=this;this.protectedCreatePopupUi=function(e,l,u,v){v.addSelectedChangedListener(function(V){V=new Date;V.setHours(0,0,0,0);V.setFullYear(v.getSelectedYear(),v.getSelectedMonth()-1,v.getSelectedDay());u(V)});l=v.suggestSize()[1];var E=$("<div>");E.addClass("sa-ctrl-date-foot");e.append(E);B.layoutCtrlWithLRTB(E,
0,0,null,null,0,32);l+=32;a.isSelectedNullable()&&(e=new n,e.setText(g.get("clean","\u6e05\u7a7a")),e.addActionListener(function(V){u(null)}),E.append(e.getJqUi()),B.layoutCtrlWithLRTB(e.getJqUi(),4,null,60,null,4,24));e=new n;e.setText(g.get("today","\u4eca\u5929"));e.addActionListener(function(V){V=new Date;V.setHours(0,0,0,0);u(V)});e.getJqUi().appendTo(E);B.layoutCtrlWithLRTB(e.getJqUi(),null,4,60,null,4,24);B.layoutCtrlWithLRTB(v.getJqUi(),0,0,null,0,32,null);return[230,l]}};aa.DateTimeSelector=
function(){com.kingdee.bos.qing.ui.component.DateTimeSelector.call(this);var a=this;this.protectedCreatePopupUi=function(e,l,u,v){v.setCurrentMonthNavigatorListener(function(za,Za){Ea.css("display",Za?"":"none")});v.addSelectedChangedListener(function(za){O.setEnabled(!0)});var E=$("<div>"),V=$("<div>"),Ea=$([E[0],V[0]]);Ea.css("display","none");Ea.addClass("sa-ctrl-date-mask");var J=new T;J.getJqUi().addClass("sa-ctrl-date-separater");setTimeout(function(){l?J.setSelected(l.getHours(),l.getMinutes(),
l.getSeconds()):J.setSelected(0,0,0)},0);var y=$("<div>");y.addClass("sa-ctrl-date-foot");var O=new n;O.setText(g.get("ok","\u786e\u5b9a"));O.setEnabled(v.isSelected());O.addActionListener(function(za){za=f.createDateObject(v.getSelectedYear(),v.getSelectedMonth()-1,v.getSelectedDay());za.setHours(J.getHour(),J.getMinute(),J.getSecond(),0);u(za)});O.getJqUi().appendTo(y);B.layoutCtrlWithLRTB(O.getJqUi(),null,4,60,null,4,24);if(a.isSelectedNullable()){var Z=new n;Z.setText(g.get("clean","\u6e05\u7a7a"));
Z.addActionListener(function(za){u(null)});Z.getJqUi().appendTo(y);B.layoutCtrlWithLRTB(Z.getJqUi(),4,null,60,null,4,24)}Z=new n;Z.setText(g.get("now","\u73b0\u5728"));Z.addActionListener(function(za){za=new Date;za.setMilliseconds(0);u(za)});Z.getJqUi().appendTo(y);B.layoutCtrlWithLRTB(Z.getJqUi(),null,J.suggestSize()[0],60,null,4,24);e.append(J.getJqUi());e.append(y);e.append(E);e.append(V);e=v.suggestSize();Z=J.suggestSize();var Ya=e[0]+Z[0],ub=Math.max(e[1],Z[1])+32;B.layoutCtrlWithLRTB(v.getJqUi(),
0,null,e[0],0,32,null);B.layoutCtrlWithLRTB(J.getJqUi(),null,0,Z[0],0,32,null);B.layoutCtrlWithLRTB(E,null,0,Z[0],0,32,null);B.layoutCtrlWithLRTB(y,0,0,null,null,0,32);B.layoutCtrlWithLRTB(V,0,0,null,null,0,32);return[Ya,ub]}};aa.TimeSelector=function(){Ob.call(this);var a=this,e=this.protectedMethod,l,u=!1,v=[0,0,0];this.setEnabled=function(J){Ea().setEnabled(J)};this.isEnabled=function(){return Ea().isEnabled()};this.addSelectionListener=function(J){Ea().addSelectionListener(function(y,O){O&&(v=
y.getSelectedModel(),J(a))})};this.getJqUi=function(){return Ea().getJqUi()};this.setSelectedNullable=function(J){u=J};this.setSelected=function(J,y,O){if(!u&&null===J)throw Error("Illegal argument");v=null===J?null:[J,y,O];Ea().setSelectedModel(v)};this.isSelectedNull=function(){return null===v};this.getHour=function(){return v[0]};this.getMinute=function(){return v[1]};this.getSecond=function(){return v[2]};var E=function(J){return(10>J?"0":"")+J},V=function(J,y){var O="";J&&(O=E(J[0])+" : "+E(J[1])+
" : "+E(J[2]));y.text(O)},Ea=function(){l||(l=new Q,l.setIconName("time"),l.setCustomPainter(V),l.setDropdownCreator(function(J,y,O,Z){Z=$("<div>");Z.addClass("sa-ctrl-date-foot");if(u){var Ya=new n;Ya.setText(g.get("clean","\u6e05\u7a7a"));Ya.addActionListener(function(za){O(null)});Ya.getJqUi().appendTo(Z);B.layoutCtrlWithLRTB(Ya.getJqUi(),4,null,60,null,5,22)}Ya=new n;Ya.setText(g.get("ok","\u786e\u5b9a"));Ya.addActionListener(function(za){O([ub.getHour(),ub.getMinute(),ub.getSecond()])});Ya.getJqUi().appendTo(Z);
B.layoutCtrlWithLRTB(Ya.getJqUi(),null,4,60,null,5,22);var ub=new T;setTimeout(function(){ub.setSelected(y?y[0]:0,y?y[1]:0,y?y[2]:0)},0);J.append(ub.getJqUi());J.append(Z);B.layoutCtrlWithLRTB(ub.getJqUi(),0,0,null,0,32,null);B.layoutCtrlWithLRTB(Z,0,0,null,null,0,32);e.setUiBackgroundEnabled(J,!0);ub.suggestSize();J=new n;J.setText(g.get("now","\u73b0\u5728"));J.addActionListener(function(za){za=new Date;O([za.getHours(),za.getMinutes(),za.getSeconds()])});J.getJqUi().appendTo(Z);B.layoutCtrlWithLRTB(J.getJqUi(),
85,null,60,null,5,22);return[230,300]}));return l}};aa.SwitchButton=function(){Ob.call(this);var a=this,e,l,u,v=!0,E=[],V,Ea,J=0,y,O=new F;this.setText=function(za,Za){V=za;Ea=Za;ub(!1)};this.addStateChangeListener=function(za){E.push(za)};var Z=function(za){for(var Za=0;Za<E.length;Za++)(0,E[Za])(a,za,v)};this.setOn=function(za){v=za;ub(!0);Z(!1)};this.isOn=function(){return v};this.getJqUi=function(){if(!e){var za=$("<div>");e=$("<div>");e.on("click",Ya);e.appendTo(za);l=$("<div>");l.addClass("sa-ctrl-switcher-thumb");
l.appendTo(e);u=$("<div>");u.addClass("extreport-runtime-filter-switch-text");u.appendTo(e);ub(!1);e.css("border-radius","10px");B.layoutCtrlMiddleAlign(e,19);B.layoutCtrlMiddleAlign(l,15);l.css("border-radius","8px");l.css("width",15);l.css("margin-top","-8px")}return e.parent()};var Ya=function(){a.isEnabled()&&(v=!v,ub(!0),Z(!0))};this.protectedUpdateEnabledState=function(){ub(!1)};var ub=function(za){var Za=v?V:Ea;Za?(O.setFontSize(12,"Microsoft YaHei"),J=O.measureWidth(Za),y=15+J+12):(y=38,J=
0);65<y&&(J-=y-65,y=65);if(e){e.css("width",y);u.css("width",J);a.isEnabled()?(e.css("cursor","pointer"),e.css("opacity","")):(e.css("cursor",""),e.css("opacity","0.5"));v?(e.addClass("sa-ctrl-switcher_on"),e.removeClass("sa-ctrl-switcher_off"),u.text(V),u.attr("title",V)):(e.removeClass("sa-ctrl-switcher_on"),e.addClass("sa-ctrl-switcher_off"),u.text(Ea),u.attr("title",Ea));Za=4;var vb=23;v&&(vb=4,Za=0<J?J+8:y-4-15);za?(l.animate({left:Za+"px"},"fast"),u.animate({left:vb+"px"},"fast")):(l.css("left",
Za+"px"),u.css("left",vb+"px"))}}};aa.SingleValueDiscreteFilterPane=K;aa.MultiValueDiscreteFilterPane=ba;aa.SingleValueTreeFilterPane=w;aa.MultiValueTreeFilterPane=h;aa.MultiValueDiscreteTableFilterPanel=ta;aa.SingleValueDiscreteTableFilterPanel=oa;var ha,pa,r,da,A,H,t,P,n,T,f,q,c,B,la,g,U,F,na;(function(){var a=com.kingdee.bos.qing.ui.component;ha=a.AbstractModalDialog;pa=a.Label;r=a.SearchBox;da=a.DynamicScroller;A=a.List;H=a.RadioButton;t=a.RadioButtonGroup;P=a.CheckBox;n=a.WorkButton;T=a.TimeList;
f=a.AbstractMonthlyCalendar;q=a.HelpIcon;a=com.kingdee.bos.qing;c=a.Seer;a=com.kingdee.bos.qing.common;B=a.DomUtil;F=a.TextMeasurer;a=com.kingdee.bos.qing.common.ui;la=a.TableUtil;a=com.kingdee.bos.qing.framework.common;g=a.MultilanguageManager.createPackageAccessor(aa);U=a.GlobalFont;a=com.kingdee.bos.extreport.runtime;na=a.MyIcons})()})();(function(){function w(r,da){var A=this,H;this.getParamDescription=function(){return r};this.getContext=function(){return da};this.createUI=function(n){throw Error("Override me.");};this.setSuppliedValue=function(n){throw Error("Override me.");};this.setSelectedValue=function(n){throw Error("Override me.");};this.getSelectedValue=function(){throw Error("Override me.");};this.setSuppliedValueDescription=function(n){};this.resetSuppliedValue=function(n,T){};this.setSelectedValueChangedListener=function(n){H=
n};this.fireSelectedValueChanged=function(){H&&H(A)};var t=function(){var n=$("<div>"),T=new ha;T.setFontSize(pa.getFontSize(),pa.getFontName());var f=T.measureWidth(r.getCaption())+4,q=r.isRequired();q&&(f+=8);f=Math.min(f,97);n.css({display:"inline-block",width:"108px",height:"24px",position:"relative",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"});var c=new com.kingdee.bos.qing.ui.component.Label;c.setRequired(q);c.setText(r.getCaption());c.setTooltips(r.getCaption());q=c.getJqUi();
q.css({position:"absolute",left:"6px",top:0,width:f+"px",height:"24px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",verticalAlign:"middle"});q.appendTo(n);if(c=r.getDescription())q=new ab,q.setIconType(ab.ICON_TYPE_QUESTION),q.setTipsText(c),T=T.measureWidth(c),q.setTipsSize(300<T?300:T+40,20*(Math.ceil(T/300)+1)),T=q.getJqUi(),f+=10,T.css({"z-index":2}),aa.layoutCtrlWithLRTB(T,f,null,16,4,null,16),T.appendTo(n);return n},P=function(n,T){n.prop(T,!0);n.css("background-color","transparent")};
this.protectedMethod={createUiWithLabel:function(n,T){var f="ctrl_"+r.getName();T.attr("id",f);var q=t();q.css("verticalAlign","middle");T.css({position:"relative",height:"24px",width:"230px",display:"inline-block",verticalAlign:"middle","font-size":"12px"});q.attr("for",f);n.append(q);n.append(T);"Hidden"==r.getState()?n.css("display","none"):r.isReadOnly()?(T.addClass("r-filter-disable"),n=T.find("input"),T.is("input")?P(T,"readonly"):n.is("input")?P(n,"readonly"):(n=$(T[0]),P(n,"disabled")),n.addClass("r-filter-disable")):
T.addClass("extreport-runtime-filter-enabled")},createUiWithFieldset:function(n,T){var f=$("<div>");f.attr("data-role","controlgroup");var q=t();q.css({"margin-top":"8px",verticalAlign:"top"});var c=$("<ul>");c.css({position:"relative",width:"85%",display:"inline-block"});f.append(q);f.append(c);if(T instanceof Array)for(q=0;q<T.length;q++){var B=$("<li>");B.css({margin:"8px 24px 8px 0px",display:"inline-block","font-size":"12px"});B.append(T[q]);c.append(B);r.isReadOnly()?T[q].prop("disabled",!0):
T[q].addClass("extreport-runtime-filter-enabled")}else q="ctrl_"+A.getParamDescription().getName(),T.attr("id",q),c.append(T);n.append(f);"Hidden"==A.getParamDescription().getState()?n.css("display","none"):r.isReadOnly()&&c.addClass("r-filter-disable")},createUiWithLabel2:function(n,T){var f="ctrl_"+A.getParamDescription().getName();T.attr("id",f);n.append(T);"Hidden"==A.getParamDescription().getState()&&n.css("display","none")}}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&
(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.runtime&&(com.kingdee.bos.extreport.runtime={});"undefined"==typeof com.kingdee.bos.extreport.runtime.filter&&(com.kingdee.bos.extreport.runtime.filter={});var h=com.kingdee.bos.extreport.runtime.filter;h.FilterTextField=function(r,da){var A=this;w.call(this,r,da);var H,t,P=this.protectedMethod;this.createUI=
function(T){H||n();var f=H.getJqUi();P.createUiWithLabel(T,f)};this.setSuppliedValue=function(T){};this.setSelectedValue=function(T){var f;T&&0<T.length&&(f=T[0].getValue());H||n();H.setText(null==f?"":f);A.fireSelectedValueChanged()};this.getSelectedValue=function(){H||n();var T=null==H.getText()?"":H.getText(),f=new ValueTextModel;f.setValue(T);f.setText(T);return[f]};var n=function(){H=new x;H.addEditedListener(function(T){clearTimeout(t);t=setTimeout(function(){A.fireSelectedValueChanged()},1E3)})}};
h.FilterComboBox=function(r,da){var A=this;w.call(A,r,da);var H=this.protectedMethod,t,P,n=[];this.createUI=function(f){t||T();var q=t.getJqUi();H.createUiWithLabel(f,q)};this.createUIWithoutLabel=function(f){T();t.setItemModels(n,function(c,B){return c&&B?c.getValue()==B.getValue():!1});var q=t.getJqUi();H.createUiWithLabel2(f,q)};this.setEnabled=function(f){t&&t.setEnabled(f)};var T=function(){t=new Eb;r.isEditable()&&t.setEditable(!0,function(f){if(!f||""==f&&r.isRequired())return null;for(var q=
0,c=n.length;q<c;q++)if(n[q].getText()==f)return n[q];q=new ValueTextModel;q.setText(f);q.setValue(f);return q});r.isReadOnly()&&t.setEnabled(!1);t.setCustomPainter(function(f,q,c){c&&q.text(c.getText())});t.addSelectedChangedListener(A.fireSelectedValueChanged)};this.setSuppliedValue=function(f){t||T();if(f){var q=A.getParamDescription(),c=q.getCtrlType();q=q.isRequired();"combobox"!=c.toLowerCase()||q||(c=new ValueTextModel,c.setValue(""),c.setText(""),f.unshift(c));t.setItemModels(f,function(B,
la){return B&&la?B.getValue()==la.getValue():!1});n=f}};this.setSelectedValue=function(f){var q;f&&0<f.length&&(q=f[0]);if(q){t||T();f=q;q=0;for(var c=n.length;q<c;q++)if(n[q].getValue()==f.getValue()){var B=n[q];break}t.setSelected(B)}};this.getSelectedValue=function(){t||T();var f=t.getSelected();if(f){var q=new ValueTextModel;q.setValue(f.getValue());q.setText(f.getText());return[q]}return[]};this.setSuppliedValueDescription=function(f){P=f};this.resetSuppliedValue=function(f,q){var c=A.getParamDescription().getName();
A.getContext().delaySuppliedValueRemoteGetter(c,P,function(B){var la=[];if(B){B=B.entryList;for(var g=0;g<B.length;g++){var U=new ValueTextModel,F=B[g];U.setText(F.text);U.setValue(F.value);la.push(U)}}A.setSuppliedValue(la);A.setSelectedValue(null);A.fireSelectedValueChanged();f&&f(q)})}};h.FilterComboBoxSearch=function(r,da){var A=this;w.call(A,r,da);var H=this.protectedMethod,t,P,n=[],T;this.createUI=function(g){t||f();var U=t.getJqUi();H.createUiWithLabel(g,U)};this.createUIWithoutLabel=function(g){f();
T.setItemModel(n);var U=t.getJqUi();H.createUiWithLabel2(g,U)};this.setEnabled=function(g){t&&t.setEnabled(g)};var f=function(){T=new Ia;T.setListItemPainter(c);T.setSearchListener(q);t=new Kb;r.isEditable()&&t.setEditable(!0,function(g){if(!g||""==g&&r.isRequired())return null;for(var U=0,F=n.length;U<F;U++)if(n[U].getText()==g)return n[U];U=new ValueTextModel;U.setText(g);U.setValue(g);return U});r.isReadOnly()&&t.setEnabled(!1);t.setDropdownCreator(function(g,U,F){return T.createJqPopup(g,U,F)});
t.addSelectionListener(A.fireSelectedValueChanged);t.setCustomPainter(function(g,U){U.text(g?g.getText():"")})},q=function(g,U,F,na,a){U=U.toLowerCase().trim();for(var e=[],l,u=0;u<g.length;u++)(l=-1!=g[u].getText().toLowerCase().indexOf(U)?!0:!1)&&e.push(g[u]);F.children().remove();if(0<e.length){for(u=0;u<e.length;u++)a(e[u],F,na);e.length=0}else g=new Qa,g.setText(Pa.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),g.setEnabled(!1),g.setAlign(Qa.ALIGN_CENTER),g=g.getJqUi(),
g.addClass("extreport-runtime-filter-field-popup-search-result"),g.appendTo(F)},c=function(g,U,F){var na=$("<div>");na.addClass("extreport-runtime-filter-field-popup-list-item");na.data("model",g);var a=g?g.getText():"",e=$("<span>");e.text(a);e.attr("title",a);e.addClass("extreport-runtime-filter-field-popup-list-item-text");na.append(e);U.append(na);F&&F.getText()==g.getText()&&B(U,na)},B=function(g,U){var F=null;0<g.height()?(clearTimeout(F),U.addClass("extreport-runtime-filter-list-item_selected_enabled"),
g.prop("scrollTop",0)):F=setTimeout(function(){B(g,U)},0)};this.setSuppliedValue=function(g){t||f();if(g){var U=A.getParamDescription(),F=U.getCtrlType();U=U.isRequired();"combobox"!=F.toLowerCase()||U||(F=new ValueTextModel,F.setValue(""),F.setText(""),g.unshift(F));T.setItemModel(g);n=g}};this.setSelectedValue=function(g){var U;g&&0<g.length&&(U=g[0]);t||f();U?la(U):(g=new ValueTextModel,g.setText(""),la(g))};this.getSelectedValue=function(){t||f();var g=t.getSelectedModel();if(g){var U=new ValueTextModel;
U.setValue(g.getValue());U.setText(g.getText());return[U]}return[]};this.setSuppliedValueDescription=function(g){P=g};this.resetSuppliedValue=function(g,U){var F=A.getParamDescription().getName();A.getContext().delaySuppliedValueRemoteGetter(F,P,function(na){var a=[];if(na){na=na.entryList;for(var e=0;e<na.length;e++){var l=new ValueTextModel,u=na[e];l.setText(u.text);l.setValue(u.value);a.push(l)}}A.setSuppliedValue(a);A.setSelectedValue(null);A.fireSelectedValueChanged();g&&g(U)})};var la=function(g){for(var U=
g,F=0,na=n.length;F<na;F++)if(n[F].getValue()==g.getValue()){U=n[F];break}t.setSelectedModel(U)}};h.FilterForwardSelector=function(r,da){w.call(this,r,da);var A=this,H=this.protectedMethod,t,P=[],n=[],T=!0,f;this.createUI=function(g){t||q();var U=t.getJqUi();H.createUiWithLabel(g,U)};this.createUIWithoutLabel=function(g){q();var U=t.getJqUi();H.createUiWithLabel2(g,U)};this.setEnabled=function(g){t&&t.setEnabled(g)};this.setSuppliedValueInner=function(g){T=!1;P=g};this.setSuppliedValue=function(g){};
this.setSelectedValue=function(g){t||q();g&&0==g.length?t.setModel(null):t.setModel(g);A.fireSelectedValueChanged()};this.getSelectedValue=function(){return t&&t.getModel()?t.getModel():[]};this.setSuppliedValueDescription=function(g){f=g};this.resetSuppliedValue=function(g,U){T=!0;t&&t.setModel(null);A.fireSelectedValueChanged();g&&g(U)};var q=function(){t=new ib;t.setClearable(!0);r.isEditable()&&t.setEditable(!0,function(g){if(!g||""==g)return null;for(var U=[],F=0,na=P.length;F<na;F++)if(P[F].getText()==
g){U.push(P[F]);break}0==U.length&&(F=new ValueTextTreeNodeModel,F.setText(g),F.setValue(g),U.push(F));return U});r.isReadOnly()&&t.setEnabled(!1);t.addActionListener(la);t.setCustomPainter(function(g){var U="";if(!g)return U;for(var F=g.length,na=3>F?F:3,a=0;a<na;a++)U+=g[a].getText(),a<na-1&&(U+="; ");3<F&&(U=Pa.get("selectNumInTotal","#1\u7b49#2\u9879").replace("#1",U),U=U.replace("#2",F));return U})},c=function(g){g=new hb;g.setSelectabledItems(P);g.setSelected(t.getModel());g.setMultiSelect(A.getParamDescription().isMultiSelectable());
g.setConfirmCallback(function(U){t.setModel(U);A.fireSelectedValueChanged()});g.setTreeNodeStyle(A.getParamDescription().isTree());g.setTreeExpandLevel(A.getParamDescription().getTreeExpandLevel());g.setMaxSelect(A.getParamDescription().getMaxRestrictNumber());g.setNoPermFieldIndex(n);g.showDialog();g=g.getPanel();(g instanceof com.kingdee.bos.extreport.runtime.filter.MultiValueDiscreteTableFilterPanel||g instanceof com.kingdee.bos.extreport.runtime.filter.SingleValueDiscreteTableFilterPanel)&&g.updateTable()},
B=function(g,U,F){for(var na=0;na<g.length;na++){var a=g[na];a.setLevel(U);F.push(a);(a=a.getChildren())&&B(a,U+1,F)}},la=function(g){T?(g=A.getParamDescription().getName(),A.getContext().delaySuppliedValueRemoteGetter(g,f,function(U){n=U?U.noPermFieldIndex:[];if(U){var F=U.entryList;P=[];for(var na,a,e=0;e<F.length;e++)na=F[e],a=new ValueTextTreeNodeModel,a.setText(na.text),a.setValue(na.value),a.setId(na.id),a.setParentId(na.parentId),a.setEntry(na.rows),a.setEntryHeadMap(U.head),P.push(a);if(A.getParamDescription().isTree()){U=
P;if(!(U instanceof Array))throw Error("Illegal argument. Argument should be instance of Array.");if(U&&0!=U.length){if(!(U[0]instanceof ValueTextTreeNodeModel))throw Error("Illegal argument. Elements in Array should be instance of ValueTextTreeNodeModel.");F=new ValueTextTreeModel;F.buildTree(U);U=F.getRootArray();F=[];B(U,0,F);P=F}else P=void 0}}c()})):c()}};h.FilterNumberInput=function(r,da){var A=this;w.call(this,r,da);var H,t=this.protectedMethod;this.createUI=function(n){H||P();var T=H.getJqUi(),
f=T.find(".sa-ctrl-spinner-text");f&&f.css("background-color","#fafafa");t.createUiWithLabel(n,T)};var P=function(){H=new K;H.supportDecimal(2);r.isReadOnly()&&H.setEnabled(!1);H.addValueChangedListener(A.fireSelectedValueChanged)};this.setSuppliedValue=function(n){H||P();var T=n.getMin(),f=n.getMax();n=n.getStep();H.setConstraint(T?Number(T):-Infinity,f?Number(f):Infinity,n?Number(n):1)};this.setDefaultValue=function(n){};this.setSelectedValue=function(n){n&&0<n.length&&(n=n[0],H||P(),H.setValue(Number(n.getValue())))};
this.getSelectedValue=function(){H||P();var n=new ValueTextModel;n.setValue(H.getValue()+"");n.setText(n.getValue());return[n]}};h.FilterDate=function(r,da){var A=this;w.call(this,r,da);var H,t,P=this.protectedMethod;this.createUI=function(q){H||n();var c=H.getJqUi();P.createUiWithLabel(q,c)};var n=function(){H=new ba;H.setSelectedNullable(!0);H.addModelChangedListener(A.fireSelectedValueChanged);r.isReadOnly()&&H.setEnabled(!1)};this.setSuppliedValue=function(q){};this.setSelectedValue=function(q){q&&
0<q.length?(q=q[0],(q=q.getValue())&&"string"==typeof q&&T(q)):T("")};this.getSelectedValue=function(){var q=f(),c=new ValueTextModel;c.setValue(q);c.setText(c.getValue());return[c]};var T=function(q){H||n();if(q){if(-1<q.indexOf("-")){var c=q.split("-");if(3>c.length)return;q=parseInt(c[0]);var B=parseInt(c[1]);c=parseInt(c[2]);var la=new Date;la.setYear(q);la.setMonth(B-1);la.setDate(c)}else la=new Date(Number(q));H.setDateObject(la)}else H.setDateObject(null)},f=function(){if(!H)return"";var q=
H.getDateObject();if(!q)return"";t||(t=new ta,t.setFormatString("yyyy-MM-dd"));return t.format(q)}};h.FilterSimilarDate=function(r,da){function A(F,na,a){n.call(this,Pa.get("month","\u6708"),new Pb,F,na,a);var e=this;e.setOkBtnListener(function(l){if(l instanceof Pb){var u=l.getSelectedYear();l=l.getSelectedMonth();a(10>l?u+"-0"+l:u+"-"+l)}});setTimeout(function(){var l=e.getPanel();if(l instanceof Pb){var u=na?na:la((new Date).getTime()+""),v=u?parseInt(u.substring(0,4)):(new Date).getFullYear();
u=u?parseInt(u.substring(5)):(new Date).getMonth()+1;l.setSelectedYear(v);l.setSelectedMonth(u);l.scrollSelectedToVisible()}},0);return[230,300]}function H(F,na,a){n.call(this,Pa.get("quarter","\u5b63"),new Sa,F,na,a);var e=this;e.setOkBtnListener(function(l){if(l instanceof Sa){var u=l.getSelectedYear();l=l.getSelectedQuarter();u=Sa.toDateRange(u,l);a(la(u[0]+""))}});setTimeout(function(){var l=e.getPanel();if(l instanceof Sa){var u=na?na:la((new Date).getTime()+""),v=parseInt(u.substring(0,4));
u=parseInt(u.substring(6))-1;l.setSelectedYear(v);l.setSelectedQuarter(u);l.scrollSelectedToVisible()}},0);return[230,300]}function t(F,na,a){n.call(this,Pa.get("year","\u5e74"),new P,F,na,a);var e=this;e.setOkBtnListener(function(l){l instanceof P&&(l=l.getDateRange(),a(la(l[0]+"")))});setTimeout(function(){var l=e.getPanel();if(l instanceof P){var u=na?na:la((new Date).getTime()+"");l.setDateRange(u);l.into()}},0);return[230,300]}function P(){var F;this.getJqUi=function(){return na().getJqUi()};
this.setDateRange=function(a,e){a=(a?new Date(a):new Date).getFullYear();na().setSelecteds([a])};this.getDateRange=function(){var a=na().getSelecteds()[0],e=new Date;e.setFullYear(a,0,1);e.setHours(0,0,0,0);var l=new Date;l.setFullYear(a,11,31);l.setHours(23,59,59,999);return[e.getTime(),l.getTime()]};this.into=function(){na().scrollSelectedToVisible()};var na=function(){if(!F){for(var a=[],e=1970;2099>=e;e++)a.push(e);F=new Ob;F.setToggleSelectingEnabled(!1);F.setBorderVisible(!1);F.setItemModels(a)}return F}}
function n(F,na,a,e,l){var u=na.getJqUi();e=$("<div>");e.addClass("sa-ctrl-date-foot");e.css({background:"#fff"});a.append(u);a.append(e);aa.layoutCtrlWithLRTB(u,0,0,null,0,32,null);aa.layoutCtrlWithLRTB(e,0,0,null,null,0,32);a=new Nb;a.setText(Pa.get("clean","\u6e05\u7a7a"));a.addActionListener(function(E){l(null)});a.getJqUi().appendTo(e);aa.layoutCtrlWithLRTB(a.getJqUi(),6,null,40,null,5,22);a=new Nb;"en"==oa.getUrlParamValue("language")?a.setText("Now"):a.setText(Pa.get("this","\u672c")+F);a.addActionListener(function(E){l(la((new Date).getTime()+
""))});a.getJqUi().appendTo(e);aa.layoutCtrlCenterAlign(a.getJqUi(),40);aa.layoutCtrlMiddleAlign(a.getJqUi(),22);var v=new Nb;v.setText(Pa.get("ok","\u786e\u5b9a"));v.getJqUi().appendTo(e);aa.layoutCtrlWithLRTB(v.getJqUi(),null,6,40,null,5,22);this.setOkBtnListener=function(E){v.addActionListener(function(V){E(na)})};this.getPanel=function(){return na}}w.call(this,r,da);var T=this,f=this.protectedMethod,q,c;this.createUI=function(F){q||B();f.createUiWithLabel(F,q.getJqUi())};this.createUIWithoutLabel=
function(F){B();f.createUiWithLabel2(F,q.getJqUi())};this.setEnabled=function(F){q&&q.setEnabled(F)};var B=function(){q=new Kb;r.isReadOnly()&&q.setEnabled(!1);q.setIconName("calendar");r.getDefaultValue();var F=q,na=F.setSelectedModel,a;(a=r.getDefaultValue())&&0<a.length?(a=a[0].getValue(),a=la(a)):a="";na.call(F,a);q.setCustomPainter(g);q.setDropdownCreator(U());q.addSelectionListener(T.fireSelectedValueChanged)};this.setSuppliedValue=function(F){};this.setSelectedValue=function(F){q||B();F&&0<
F.length&&(F=F[0],F=F.getValue(),q.setSelectedModel(la(F)))};this.protectedGetFormatString=function(){var F=r.getPattern();return ReportParamDescription.Y_M_PATTERN===F?ReportParamDescription.Y_M_PATTERN:ReportParamDescription.Y_Q_PATTERN===F?ReportParamDescription.Y_Q_PATTERN:ReportParamDescription.Y_PATTERN===F?ReportParamDescription.Y_PATTERN:ReportParamDescription.Y_M_D_PATTERN};var la=function(F){if(F&&"string"==typeof F){var na=new ta;na.setFormatString(T.protectedGetFormatString());return 0>
F.indexOf("-")?na.format(Number(F)):na.format(F)}return""},g=function(F,na){na.text(F);c=F};this.getSelectedValue=function(){var F=r.getPattern(),na=new ValueTextModel;if(c&&4<=c.length){var a=c.substring(0,4);if(ReportParamDescription.Y_M_PATTERN===F)F=c.substring(5,7);else if(ReportParamDescription.Y_Q_PATTERN===F)F=c.substring(6),F=3*parseInt(F);else if(ReportParamDescription.Y_PATTERN===F)F=12;else throw Error(F+"type will be implemented");var e=parseInt(F);switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:10>
e&&(F="0"+e);F+="-31";break;case 4:case 6:case 9:case 11:10>e&&(F="0"+e);F+="-30";break;case 2:F="0"+e,F=0==parseInt(a)%4&&0!=parseInt(a)%400?F+"-29":F+"-28"}na.setValue(a+"-"+F);na.setText(na.getValue())}return[na]};var U=function(){var F=r.getPattern();if(ReportParamDescription.Y_M_PATTERN===F)return A;if(ReportParamDescription.Y_Q_PATTERN===F)return H;if(ReportParamDescription.Y_PATTERN===F)return t;throw Error(F+"type will be implemented");}};h.FilterDateAndTime=function(r,da){var A=this;w.call(this,
r,da);var H,t,P=this.protectedMethod;this.createUI=function(q){H||n();var c=H.getJqUi();P.createUiWithLabel(q,c)};var n=function(){H=new ja;H.setSelectedNullable(!0);H.isSelectedNullable(!0);H.addModelChangedListener(A.fireSelectedValueChanged);r.isReadOnly()&&H.setEnabled(!1)};this.setSuppliedValue=function(q){};this.setSelectedValue=function(q){q&&0<q.length?(q=q[0],(q=q.getValue())&&"string"==typeof q&&T(q)):T("")};this.getSelectedValue=function(){var q=f(),c=new ValueTextModel;c.setValue(q);c.setText(c.getValue());
return[c]};var T=function(q){H||n();if(q){if(-1<q.indexOf("-")){var c=q.split(" ");if(2>c.length)return;q=c[1];var B=c[0].split("-"),la=q.split(":");if(3>B.length||3>la.length)return;q=parseInt(B[0]);c=parseInt(B[1]);B=parseInt(B[2]);var g=parseInt(la[0]),U=parseInt(la[1]);la=parseInt(la[2]);var F=new Date;F.setYear(q);F.setMonth(c-1);F.setDate(B);F.setHours(g);F.setMinutes(U);F.setSeconds(la)}else F=new Date(Number(q));H.setDateObject(F)}else H.setDateObject(null)},f=function(){if(!H)return"";var q=
H.getDateObject();if(!q)return"";t||(t=new ta,t.setFormatString("yyyy-MM-dd HH:mm:ss"));return t.format(q)}};h.FilterTime=function(r,da){var A=this;w.call(this,r,da);var H,t,P=this.protectedMethod;this.createUI=function(f){H||n();var q=H.getJqUi();P.createUiWithLabel(f,q)};this.setSuppliedValue=function(f){};this.setSelectedValue=function(f){f&&0<f.length?(f=f[0],(f=f.getValue())&&"string"==typeof f&&T(f)):T("")};this.getSelectedValue=function(){var f=new ValueTextModel,q=f.setValue;if(!H||H.isSelectedNull())var c=
"";else t||(t=new ta,t.setFormatString("HH:mm:ss")),c=new Date,c.setHours(H.getHour()),c.setMinutes(H.getMinute()),c.setSeconds(H.getSecond()),c=t.format(c);q.call(f,c);f.setText(f.getValue());return[f]};var n=function(){H=new Xa;H.setSelectedNullable(!0);H.setSelected(null);H.addSelectionListener(A.fireSelectedValueChanged);r.isReadOnly()&&H.setEnabled(!1)},T=function(f){H||n();if(f)if(-1<f.indexOf(":")){var q=f.split(":");if(!(3>q.length)){f=parseInt(q[0]);var c=parseInt(q[1]);q=parseInt(q[2]);
H.setSelected(f,c,q)}}else f=new Date(Number(f)),H.setSelected(f.getHours(),f.getMinutes(),f.getSeconds());else H.setSelected(null)}};h.FilterCheckBoxGroup=function(r,da){var A=this;w.call(A,r,da);var H=this.protectedMethod,t,P=[],n={},T,f;this.createUI=function(la){f=la;t||q();var g=[];t.getJqUi().css({overflow:"hidden"});g.push(t.getJqUi());for(var U=0,F=P.length;U<F;U++)g.push(P[U].getJqUi());H.createUiWithFieldset(la,g)};this.setSuppliedValue=function(la){P=[];n={};if(la)for(var g=0,U=la.length;g<
U;g++){var F=B(la[g]);F&&P.push(F)}};this.setSelectedValue=function(la){c();for(var g=0,U=P.length,F=0,na=la.length;F<na;F++)for(var a=la[F].getValue().split(";"),e=0;e<a.length;e++)for(var l=a[e],u=0;u<U;u++){var v=P[u];v.getUserObject().getValue()==l&&(g++,r.isReadOnly()&&v.getJqUi().addClass("rpt-filter-togglebutton-important-disabled"),v.setSelected(!0))}la=g==U;t||q();t.setSelected(la);la&&c();A.fireSelectedValueChanged()};this.getSelectedValue=function(){for(var la=[],g=t?t.isSelected():!1,
U=0,F=P.length;U<F;U++){var na=P[U];if(g||na.isSelected()){na=na.getUserObject();var a=new ValueTextModel;a.setValue(na.getValue());a.setText(na.getText());la.push(a)}}return la};this.setSuppliedValueDescription=function(la){T=la};this.resetSuppliedValue=function(la,g){var U=A.getParamDescription().getName();A.getContext().delaySuppliedValueRemoteGetter(U,T,function(F){var na=[];if(F){F=F.entryList;for(var a=0;a<F.length;a++){var e=new ValueTextModel,l=F[a];e.setText(l.text);e.setValue(l.value);na.push(e)}}A.setSuppliedValue(na);
f&&(f.empty(),q(),A.createUI(f));A.setSelectedValue([]);A.fireSelectedValueChanged();la&&la(g)})};var q=function(){t=new xa;r.isReadOnly()&&t.setEnabled(!1);t.setText(Pa.get("noLimit","\u4e0d\u9650"));t.setTooltips(Pa.get("noLimit","\u4e0d\u9650"));t.addActionListener(function(la,g){g?c():la.setSelected(!0);A.fireSelectedValueChanged()})},c=function(){for(var la=0,g=P.length;la<g;la++)P[la].setSelected(!1)},B=function(la){var g=la.getValue();if(!n[g]){n[g]="1";g=la.getText();var U=new xa;U.setUserObject(la);
U.setText(""===g?Pa.get("emptyText","\uff08\u7a7a\uff09"):g);U.setTooltips(""===g?Pa.get("emptyText","\uff08\u7a7a\uff09"):g);U.getJqUi().css({"max-width":"230px","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"});r.isReadOnly()&&U.setEnabled(!1);U.addActionListener(function(F,na){t&&(na&&t.setSelected(!1),A.fireSelectedValueChanged())});return U}}};h.FilterLabel=function(r,da){w.call(this,r,da);var A=this.protectedMethod,H=$(r.getDefaultValue()[0].getValue()).css({padding:"0 0.2em",
fontSize:"12px",marginLeft:"0.2em",lineHeight:"1.7em",verticalAlign:"middle",color:"#666"});this.createUI=function(t){A.createUiWithLabel2(t,H)};this.setSuppliedValue=function(t){};this.setSelectedValue=function(t){var P;t&&0<t.length&&(P=t[0].getValue());H.attr("value",P)};this.getSelectedValue=function(){var t=H.attr("value"),P=new ValueTextModel;P.setValue(t);P.setText(t);return[P]}};h.FilterSwitch=function(r,da){var A=this;w.call(this,r,da);var H=this.protectedMethod,t,P,n;this.createUI=function(f){t||
T();var q=t.getJqUi();H.createUiWithLabel(f,q)};this.createUIWithoutLabel=function(f){T();var q=P?P.getText():"",c=n?n.getText():"";t.setText(q,c);q=t.getJqUi();H.createUiWithLabel2(f,q)};this.setEnabled=function(f){t&&t.setEnabled(f)};var T=function(){t=new Q;r.isReadOnly()&&t.setEnabled(!1);t.addStateChangeListener(A.fireSelectedValueChanged)};this.setSuppliedValue=function(f){t||T();f?(P=f.getChecked(),n=f.getUnchecked()):n=P=void 0;f=P?P.getText():"";var q=n?n.getText():"";t.setText(f,q)};this.setSelectedValue=
function(f){var q;f&&0<f.length&&(q=f[0]);q&&(t||T(),f=n&&n.getValue()==q.getValue(),t.setOn(!f))};this.getSelectedValue=function(){t||T();var f=t.isOn()?P:n;if(f){var q=new ValueTextModel;q.setValue(f.getValue());q.setText(f.getText());return[q]}return[]}};h.AbstractFilterCtrl=w;var x,K,ba,ja,xa,Xa,oa,ta,Pa,Qa,Pb,Sa,hb,ib,Eb,Ia,Kb,Nb,Ob,ab,Q,aa,ha,pa;(function(){var r=com.kingdee.bos.qing.ui.component;x=r.TextField;K=r.Spinner;xa=r.ToggleButton;Nb=r.WorkButton;Ob=r.List;ab=r.HelpIcon;r=com.kingdee.bos.qing;
oa=r.Seer;r=com.kingdee.bos.qing.common;ta=r.DateFormater;aa=r.DomUtil;ha=r.TextMeasurer;r=com.kingdee.bos.qing.framework.common;Pa=r.MultilanguageManager.createPackageAccessor(h);pa=r.GlobalFont;r=com.kingdee.bos.qing.ui.component;Qa=r.Label;Pb=r.DateOfYearMonthPanel;Sa=r.DateOfYearQuarterPanel;hb=h.F7Dialog;ib=h.F7Selector;Eb=h.ComboBox;Kb=h.DropdownSelector;Ia=h.ChooseItemPane;ba=h.DateSelector;ja=h.DateTimeSelector;Xa=h.TimeSelector;Q=h.SwitchButton})()})();function ReportFilter(w,h,x,K){var ba=[],ja=new FilterContext(this,h,w),xa=null,Xa=new KEXTParamsAssociateModel,oa,ta,Pa,Qa,Pb,Sa=!1,hb=com.kingdee.bos.qing.framework.common.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.runtime.filter),ib=function(Q){var aa=new ReportParamDescription;aa.setName(Q.name);aa.setText(Q.text);aa.setDataType(Q.dataType);aa.setState(Q.state);aa.setReadOnly("ReadOnly"==Q.state);aa.setCtrlType(Q.ctrlType);aa.setRequired(1==Q.required);aa.setMultiSelectable(1==
Q.multiSelectable);aa.setIsTree(Q.isTree);aa.setTreeExpandLevel(Q.treeExpandLevel);aa.setMaxRestrictNumber(Q.maxRestrictNumber);aa.setEditable(1==Q.editable);aa.setPattern(Q.pattern);aa.setDescription(Q.description);var ha=Ia(Q.suppliedValue);aa.setSuppliedValue(ha);ha=Kb(Q.defaultValue,aa.getDataType());aa.setDefaultValue(ha);var pa=Q.suppliedValueDescription;if(pa){Q=pa.reportId;ha=pa.dataSourceType;var r=pa.persistenceModel,da=pa.valueFieldName;pa=pa.textFieldName;if(r&&da&&pa){var A=new ListDelaySuppliedValueDescription;
A.setDatasetPersistenceModel(r);A.setValueField(da);A.setTextField(pa);A.setDataSourceType(ha);A.setReportId(Q);Q=A}else Q=null}else Q=null;aa.setSuppliedValueDescription(Q);return aa},Eb=function(Q){for(var aa=[],ha=0;ha<Q.length;ha++){var pa=Q[ha],r=new ValueTextModel;r.setText("");r.setValue("");pa.text&&!KReportUtil.isNullString(pa.text)&&r.setText(pa.text);pa.value&&!KReportUtil.isNullString(pa.value)&&r.setValue(pa.value);aa.push(r)}return aa},Ia=function(Q){if(!Q)return null;var aa=Q.min,ha=
Q.max,pa=Q.step;if(pa)return Q=new NumberStepperSuppliedValue,Q.setMin(aa),Q.setMax(ha),Q.setStep(pa),Q;pa=Q.checked;aa=Q.unChecked;return pa&&aa?(ha=new ValueTextModel,ha.setValue(pa.value),ha.setText(pa.text),pa=new ValueTextModel,pa.setValue(aa.value),pa.setText(aa.text),Q=new SwitchButtonSuppliedValue,Q.setChecked(ha),Q.setUnchecked(pa),Q):Q&&!KReportUtil.isNullString(Q)?Eb(Q):null},Kb=function(Q,aa){if(null==Q||KReportUtil.isNullString(Q))return null;if(Q instanceof Array)return Eb(Q);var ha=
Q.selectedValue,pa=Q.valueField,r=Q.textField;if(ha&&pa&&r){aa=[];for(Q=0;Q<ha.length;Q++){for(var da=ha[Q].columnDatas,A=new ValueTextModel,H=0;H<da.length;H++){var t=da[H];pa==t.value&&A.setValue(t.text);r==t.value&&A.setText(t.text)}aa.push(A)}return aa}ha=Q.value;pa=Q.text;if(void 0!=ha&&void 0!=pa)return aa=new ValueTextModel,KReportUtil.isNullString(ha)&&(ha=pa=""),aa.setValue(ha),aa.setText(pa),[aa];if(ha=Q.value)return r=new Date,r.setTime(ha),Q=r.getFullYear(),da=r.getMonth()+1,A=r.getDate(),
ha=r.getHours(),pa=r.getMinutes(),r=r.getSeconds(),Q=Q+"-"+da+"-"+A,ha=ha+":"+pa+":"+r,aa="Date"==aa?Q:"Time"==aa?ha:Q+" "+ha,ha=new ValueTextModel,ha.setValue(aa),ha.setText(aa),[ha];ha=Q instanceof Object?null:Q.toString();aa=new ValueTextModel;aa.setValue(ha);aa.setText(ha);return[aa]},Nb=function(Q,aa){ta&&(ta.children().detach(),ta.append(aa?aa:Pa),ta.trigger("pagecreate"))};this.forRpcReduced=function(Q,aa,ha){oa=[];xa={};Q={};if(x)for(var pa=0;pa<x.length;pa++){var r=x[pa],da=new ParamValue;
da.fromJsonObject(r);Q[da.getParamName()]=da.getValues()}for(pa=0;pa<aa.length;pa++){var A=aa[pa];r=ib(A);"Hidden"!=r.getState()&&(Pb=!0);oa.push(r.getName());da=(new FilterCtrlFactory).create(r,ja,K);xa[r.getName()]=da;da.setSuppliedValue(r.getSuppliedValue());da.setSuppliedValueDescription(r.getSuppliedValueDescription());"numberstepper"==(r.getCtrlType()?r.getCtrlType().toLowerCase():null)&&da.setDefaultValue(A.defaultValue);A=Q[r.getName()];da instanceof com.kingdee.bos.extreport.runtime.filter.FilterLabel||
(A?da.setSelectedValue(A):da.setSelectedValue(r.getDefaultValue()),da.setSelectedValueChangedListener(Ob))}if(ha)for(var H in ha)for(aa=ha[H],pa=0;pa<aa.length;pa++)Xa.addOneAffectAnother(H,aa[pa]);ha=[];ba=[];for(var t in xa){aa=xa[t].getParamDescription();H=new ParamValue;H.setParamName(t);H.setDataType(aa.getDataType());if(aa=aa.getDefaultValue())for(Q=0;Q<aa.length;Q++)H.addValue(aa[Q]);ha.push(H.toJsonObject());ba.push(H)}return ha};this.isDispalay=function(){return Pb};this.render=function(Q,
aa){ta=$(Q);ta.attr("data-role","page");aa=ta;Q=$("<div>");Q.appendTo(aa);Q.css("position","relative");aa=$("<div>");aa.attr("data-role","listview");aa.appendTo(Q);aa.css({fontSize:"13px"});for(var ha in xa){var pa=xa[ha],r=pa instanceof com.kingdee.bos.extreport.runtime.filter.FilterCheckBoxGroup?$("<div>").css({position:"relative",display:"inline-block",width:"100%","min-height":"24px"}):pa instanceof com.kingdee.bos.extreport.runtime.filter.FilterLabel?$("<div>").css({position:"relative",display:"inline-block",
width:"100%"}):$("<div>").css({position:"relative",display:"inline-block",margin:"8px 70px 8px 0"});r.attr("data-role","fieldcontain");r.appendTo(aa);pa.createUI(r)}Pa=Q;ha=$(window).height()-270;160>=ha&&(ha=160);ta.css({padding:"0px 10px 0px 10px",maxHeight:ha,overflowY:"auto",position:"relative"});Nb()};this.execute=function(Q,aa){var ha=!1,pa="[";ba=[];var r={};for(n in xa){var da=xa[n];if(!(da instanceof com.kingdee.bos.extreport.runtime.filter.FilterLabel)){var A=new ParamValue;A.setParamName(n);
A.setDataType(da.getParamDescription().getDataType());var H=da.getSelectedValue();!ha&&da.getParamDescription().isRequired()&&(ha=!H||0==H.length);if(H){da.getParamDescription().isRequired()&&(ha=!0);for(var t=0;t<H.length;t++){var P=H[t];A.addValue(P);da.getParamDescription().isRequired()&&P.getValue()&&(ha=!1)}}if(ha)return{success:!1,errMsg:da.getParamDescription().getText()+hb.get("paramValEmptyError"," \u53c2\u6570\u503c\u4e0d\u80fd\u4e3a\u7a7a\u3002")};1<pa.length&&(pa+=",",pa+="\r\n");pa="TextField"==
da.getParamDescription().getCtrlType()?pa+A.toJsonString(/,|;|\uff0c|\uff1b|\s+/g):pa+A.toJsonString();ba.push(A)}}var n={};n.pageId=w;n.schemeName=Q;n.isDefaultChange=aa;n.flag="1";n.paramValues=pa+"]";return ha?{success:!1,errMsg:hb.get("incompleteParamError","\u53c2\u6570\u503c\u4e0d\u5b8c\u6574\u3002")}:{success:!0,data:n,selectAll:JSON.stringify(r)}};this.getCtrl=function(Q){return xa[Q]};this.updateParamByName=function(Q,aa){Q=xa[Q];for(var ha=aa.length,pa=[],r=0;r<ha;r++){var da=aa[r],A=new ValueTextModel;
A.setValue(da);A.setText(da);pa.push(A)}Q.setSelectedValue(pa)};this.getDataSetParamValues=function(){var Q=!1,aa="[";ba=[];for(var ha in xa){var pa=xa[ha];if(!(pa instanceof com.kingdee.bos.extreport.runtime.filter.FilterLabel)){var r=new ParamValue;r.setParamName(ha);r.setDataType(pa.getParamDescription().getDataType());var da=pa.getSelectedValue();!Q&&pa.getParamDescription().isRequired()&&(Q=!da||0==da.length);if(da){pa.getParamDescription().isRequired()&&(Q=!0);for(var A=0;A<da.length;A++){var H=
da[A];r.addValue(H);pa.getParamDescription().isRequired()&&H.getValue()&&(Q=!1)}}if(Q)return{success:!1,errMsg:pa.getParamDescription().getText()+hb.get("paramValEmptyError"," \u53c2\u6570\u503c\u4e0d\u80fd\u4e3a\u7a7a\u3002")};1<aa.length&&(aa+=",",aa+="\r\n");aa="TextField"==pa.getParamDescription().getCtrlType()?aa+r.toJsonString(/,|;|\uff0c|\uff1b|\s+/g):aa+r.toJsonString();ba.push(r)}}ha={};ha.paramValues=aa+"]";return Q?{success:!1,errMsg:hb.get("incompleteParamError","\u53c2\u6570\u503c\u4e0d\u5b8c\u6574\u3002")}:
{success:!0,data:ha}};this.setSchemeParams=function(Q,aa,ha){for(var pa in xa){for(var r="",da="",A=xa[pa].getSelectedValue(),H=0;H<A.length;H++){var t=A[H];r+=t.getValue();da+=t.getText();H!=A.length-1&&(r+="0xx1xx",da+="0xx1xx")}Q.push([r]);aa.push([da]);ha.push([pa])}};this.updateFilterByScheme=function(Q,aa){for(var ha=function(c,B,la){return function(){c.setSelectedValue(B);ab(c,la,aa)}},pa=function(){for(var c=0,B={};;){var la=Q.match(new RegExp("N"+c+"=(.*?)\u0001"));if(!la||!la[1])break;la=
la[1];var g=Q.match(new RegExp("V"+c+"=(.*?)\u0001"))[1],U=Q.match(new RegExp("C"+c+"=(.*?)\u0001"))[1];B[la]=[g,U];c++}for(var F in xa){if(!B[F])break;var na=B[F][0];U=B[F][1];c=xa[F];la=c.getParamDescription().getCtrlType();g="";la&&(g=la.toLowerCase());la=[];if("combobox"==g||"f7"==g||"checkboxgroup"==g){na=na.split("0xx1xx");U=U.split("0xx1xx");for(var a=0,e=na.length;a<e;a++)g=new ValueTextModel,g.setText(U[a]),g.setValue(na[a]),la.push(g)}else"datetime"==g?na&&(g=new ValueTextModel,g.setText(U),
g.setValue(na),la.push(g)):("textfield"==g&&(U=U.replaceAll("0xx1xx",";"),na=na.replaceAll("0xx1xx",";")),g=new ValueTextModel,g.setText(U),g.setValue(na),la.push(g));c.setSelectedValue(la)}Nb()},r=0,da={};;){var A=Q.match(new RegExp("N"+r+"=(.*?)\u0001"));if(!A||!A[1])break;A=A[1];var H=Q.match(new RegExp("V"+r+"=(.*?)\u0001"))[1],t=Q.match(new RegExp("C"+r+"=(.*?)\u0001"))[1];da[A]=[H,t];r++}for(var P in xa){if(!da[P])break;var n=da[P][0];A=da[P][1];H=xa[P];t=H.getParamDescription().getCtrlType();
var T="";t&&(T=t.toLowerCase());t=[];if("combobox"==T||"f7"==T||"checkboxgroup"==T){n=n.split("0xx1xx");var f=A.split("0xx1xx");A="";T=0;for(var q=f.length;T<q;T++)A+=f[T]+";";A=A.substring(0,A.length-1);T=0;for(q=n.length;T<q;T++)f=new ValueTextModel,f.setText(A),f.setValue(n[T]),t.push(f)}else"datetime"==T?n&&(f=new ValueTextModel,f.setText(A),f.setValue(n),t.push(f)):("textfield"==T&&(A=A.replaceAll("0xx1xx",";"),n=n.replaceAll("0xx1xx",";")),f=new ValueTextModel,f.setText(A),f.setValue(n),t.push(f));
pa=ha(H,t,pa);r++}pa()};this.getCurrentValueCaption=function(){for(var Q="",aa=0;aa<ba.length;aa++){var ha=ba[aa],pa=ha.getParamName();pa=xa[pa].getParamDescription().getCaption();0<aa&&(Q+="    ");Q+=pa;Q+=":";pa=ha.getValuesCount();if(0==pa)Q+="(\u65e0)";else for(var r=0;r<pa;r++){0<r&&(Q+=";");var da=ha.getValue(r);Q+=da.getText()}}return Q};this.close=function(){};this.isEditable=function(Q){return xa[Q].getParamDescription().isEditable()};this.getSuppliedValue=function(Q){return xa[Q].getParamDescription().getSuppliedValue()};
this.getAssociatedFiltersJsonValue=function(Q){var aa="[",ha;for(ha in xa)if(ha!=Q&&Xa.isOneAffectedByAnother(Q,ha)){1<aa.length&&(aa+=",");var pa=xa[ha];aa+='{"paramName":"';aa+=ha;aa+='","paramValues":[';if(pa=pa.getSelectedValue())for(var r=0;r<pa.length;r++){0<r&&(aa+=",");var da=pa[r].getValue();a:{if("string"===typeof da)try{JSON.parse(da);var A=!0;break a}catch(H){A=!1;break a}A=!1}da?A?aa+=da:(aa+='"',aa+=da,aa+='"'):aa+="null"}aa+="]}"}return aa+"]"};this.setSchemeList=function(Q){Qa=Q};
this.getSchemeList=function(){return Qa};var Ob=function(Q){Sa?Sa=!1:ab(Q)},ab=function(Q,aa,ha){var pa=Q.getParamDescription().getName();if(Xa&&Xa.isOneAffectOthers(pa)){if(aa){var r={};var da=function(H){Sa=r[H]=!0;for(var t in r)if(!r[t]){Sa=!1;break}Sa&&(aa(),ha&&ha())}}for(var A=0;A<oa.length;A++)Q=oa[A],Xa.isOneAffectAnother(pa,Q)&&(Q=xa[Q],aa?(r[A]=!1,Q.resetSuppliedValue(da,A)):Q.resetSuppliedValue())}else aa&&aa()};this.setArrParamsName=function(Q){oa=Q};this.pushArrParamsName=function(Q){oa.push(Q)};
this.setMapCtrls=function(Q){xa=Q};this.getMapCtrls=function(){return xa};this.pushMapCtrls=function(Q,aa){xa[Q]=aa};this.setDisplay=function(Q){Pb=Q};this.addOneAffectAnother=function(Q,aa){Xa.addOneAffectAnother(Q,aa)};this.protectedMethod={decodeParamDesc:ib,ctrlSelectedValueChanged:Ob,updateUI:Nb}}
function FilterContext(w,h,x){var K=this;this.objReportFilter=w;this.reportDiv=h.reportDiv;this.oGlobal=h.oGlobal;this.strReportId=x;this.constructParam=function(ba,ja){var xa=ja.getDatasetPersistenceModel(),Xa=ja.getValueField(),oa=ja.getTextField(),ta=ja.getDataSourceType();ja=ja.getReportId();xa=(new StringUtil).toJsonEscapeString(xa);var Pa=this.objReportFilter.getAssociatedFiltersJsonValue(ba);return{datasetXml:xa,paramValues:Pa,textName:oa,valueName:Xa,dataSourceType:ta,reportId:ja,paramName:ba,
pageId:this.strReportId}};this.delaySuppliedValueRemoteGetter=function(ba,ja,xa){this.oGlobal.createFacade(function(Xa){xa(Xa)},function(Xa,oa){if(8099002===Xa||8099007===Xa||8099008===Xa||8077016===Xa||8099101===Xa||8099010<=Xa&&8099014>=Xa){Xa=com.kingdee.bos.qing.ui.component.MessageDialog;var ta=new Xa;ta.setOptionType(Xa.OPTION_OK);ta.setMessage(oa);ta.showDialog();return!0}return!1}).getDelaySuppliedValue(K.constructParam(ba,ja))}}
function FilterCtrlFactory(){this.create=function(w,h,x){var K=com.kingdee.bos.extreport.runtime.filter;if(!(w instanceof ReportParamDescription))throw Error("Illegal argument.");var ba=w.getCtrlType()?w.getCtrlType().toLowerCase():null;if(x)switch(ba){case "checkbox":return new K.FilterSwitch(w,h);case "combobox":return new K.FilterComboBoxMobile(w,h);case "f7":return new K.FilterForwardSelectorMobile(w,h);case "numberstepper":return new K.FilterNumberInputMobile(w,h);case "checkboxgroup":return new K.FilterCheckBoxGroup(w,
h);case "datetime":if("Date"==w.getDataType())return h=new K.DateTimeSliderSelector(w,h),x=w.getPattern(),ReportParamDescription.Y_M_PATTERN===x?h.setSelectorType(K.DateTimeSliderSelector.DATE_YM):ReportParamDescription.Y_Q_PATTERN===x?h.setSelectorType(K.DateTimeSliderSelector.DATE_YQ):ReportParamDescription.Y_PATTERN===x?h.setSelectorType(K.DateTimeSliderSelector.DATE_Y):h.setSelectorType(K.DateTimeSliderSelector.DATE),h;if("DateTime"==w.getDataType())return h=new K.DateTimeSliderSelector(w,h),
h.setSelectorType(K.DateTimeSliderSelector.DATE_TIME),h;if("Time"==w.getDataType())return h=new K.DateTimeSliderSelector(w,h),h.setSelectorType(K.DateTimeSliderSelector.TIME),h;throw Error("Illegal datetime!");case "label":return new K.FilterLabel(w,h);default:return new K.FilterTextField(w,h)}else switch(ba){case "checkbox":return new K.FilterSwitch(w,h);case "combobox":return new K.FilterComboBoxSearch(w,h);case "f7":return new K.FilterForwardSelector(w,h);case "numberstepper":return new K.FilterNumberInput(w,
h);case "checkboxgroup":return new K.FilterCheckBoxGroup(w,h);case "datetime":if("Date"==w.getDataType())return x=w.getPattern(),ReportParamDescription.Y_M_PATTERN===x||ReportParamDescription.Y_Q_PATTERN===x||ReportParamDescription.Y_PATTERN===x?new K.FilterSimilarDate(w,h):new K.FilterDate(w,h);if("DateTime"==w.getDataType())return new K.FilterDateAndTime(w,h);if("Time"==w.getDataType())return new K.FilterTime(w,h);throw Error("Illegal datetime!");case "label":return new K.FilterLabel(w,h);default:return new K.FilterTextField(w,
h)}}}ReportFilter.CONSTANTS={getDelaySuppliedValue:"getDelaySuppliedValue"};(function(){function w(m,k,fa){u.call(this);var z=this,M=this.protectedMethod,ca,ka,qa;(function(){M.setTitle(m);z.setSize(500,540);M.setSelectable(!1);M.setContentPaneCreator(function(){ca||(ca=new h(k,fa));return ca.getJqUi()});M.setClosingChecker2(function(Ta){wa(Ta)},function(Ta){Ta(!0)},!0);M.setClosingAction(function(Ta){})})();this.setSelectedModel=function(Ta){qa=Ta;ca&&ca.setSelected(qa)};this.setSelectedCallback=function(Ta){ka=Ta};var wa=function(Ta){var ea=ca.checkUIInput(function(Ua){qa=
ca.getModelFromUI();ka&&ka(qa);Ta(!0)});ea&&(M.getMessageCurtain().showPrompt(ea,2E3),Ta(!1))}}function h(m,k){var fa=this,z,M=m.oGlobal,ca,ka,qa,wa,Ta,ea,Ua,jb,cb,Cb,La;this.getJqUi=function(){z||(Hb(),ob());return z};this.setSelected=function(sb){ca=sb;z&&ob()};this.getSelectedModel=function(){if(wa.isChecked())ca=jb.getSelected();else if(Ta.isChecked())ca=La.getSelectedModel();else if(ka&&ka.isChecked())ca=new K(Na,B.get("firstData","\u7b2c\u4e00\u6761\u6570\u636e"));else if(k instanceof Ob){var sb=
ea.getSelectedValue();ca=(sb=0<sb.length?sb[0]:null)?new K(sb.getValue(),sb.getText()):null}else k instanceof Q?(sb=ea.getSelectedValue(),1==sb.length?(sb=0<sb.length?sb[0]:null,ca=new K(sb.getValue(),sb.getText())):ca=1<sb.length?new ba(ea.getSelectedValue()):null):ca=new K(ea.getText(),ea.getText());return ca};this.checkUIInput=function(sb){if(Ta.isChecked()){if(!La.getSelectedModel())return B.get("selectVar","\u8bf7\u9009\u62e9\u4e00\u4e2a\u53d8\u91cf\u3002")}else if(qa.isChecked()&&k instanceof
Nb){var Wb=ea.getText();if(null==Wb||0==$.trim(Wb).length)return B.get("inputConst","\u8bf7\u8f93\u5165\u4e00\u4e2a\u5e38\u91cf\u3002")}sb(!0)};this.getModelFromUI=function(){return fa.getSelectedModel()};var ob=function(){if(ca){var sb=bb(ca)?"macro_var":ca.getVariableType();sb==db?(wa.setChecked(!0),jb.setSelected(ca)):"macro_var"==sb?(Ta.setChecked(!0),La&&La.setSelected(ca)):(sb=ca.getValue(),ka&&Na==sb?ka.setChecked(!0):(qa.setChecked(!1),qa.setChecked(!0),k instanceof Ob?(sb=new ValueTextModel,
sb.setValue(ca.getValue()),sb.setText(ca.getText()),ea.setSelectedValue([sb])):k instanceof Q?ca instanceof K?(sb=new ValueTextTreeNodeModel,sb.setValue(ca.getValue()),sb.setText(ca.getText()),ea.setSelectedValue([sb])):ca instanceof ba&&ea.setSelectedValue(ca.getValue()):ea.setText(sb)))}},Hb=function(){z=$("<div>");var sb=0,Wb=new E;if(k instanceof Ob){ka=new v;ka.setText(B.get("firstData","\u7b2c\u4e00\u6761\u6570\u636e"));var Xb=ka.getJqUi();Xb.appendTo(z);q.layoutCtrl(Xb,0,sb,200,23);Wb.addElement(ka);
ka.addCheckedListener(function(){ea&&ea.setEnabled(!1);jb&&jb.setEnabled(!1);La&&La.setEnabled(!1)});sb+=43}qa=new v;qa.setText(B.get("constant","\u5e38\u91cf"));Xb=qa.getJqUi();Xb.appendTo(z);q.layoutCtrl(Xb,0,sb,200,23);Wb.addElement(qa);qa.addCheckedListener(function(){jb&&jb.setEnabled(!1);La&&La.setEnabled(!1);ea&&ea.setEnabled(!0)});k instanceof Q?(ea=k.getFilterForwardSelector(),Ua=$("<div>"),Ua.addClass("sa-ctrl-common-singlelineborder"),ea.createUIWithoutLabel(Ua)):k instanceof Ob?(ea=k.getFilterCombox(),
Ua=$("<div>"),ea.createUIWithoutLabel(Ua)):(ea=new J,ea.setPlaceholder(B.get("constantPlaceholder","\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5e38\u91cf\u503c")),Ua=ea.getJqUi());Ua.appendTo(z);q.layoutCtrl(Ua,0,sb+=33,200,23);wa=new v;wa.setChecked(!1);wa.setText(B.get("systemVar","\u7cfb\u7edf\u53d8\u91cf"));Xb=wa.getJqUi();Xb.appendTo(z);q.layoutCtrl(Xb,0,sb+=43,200,23);Wb.addElement(wa);wa.addCheckedListener(function(){ea&&ea.setEnabled(!1);La&&La.setEnabled(!1);jb&&jb.setEnabled(!0)});jb=new V;jb.setItemModels(ja.SUPPORTED_VAR_TYPE);
jb.setSelected(ja.SUPPORTED_VAR_TYPE[0]);cb=jb.getJqUi();q.layoutCtrl(cb,0,sb+=33,200,23);cb.appendTo(z);Ta=new v;Ta.setText(B.get("macroVar","\u5b8f\u53d8\u91cf"));Xb=Ta.getJqUi();Xb.appendTo(z);q.layoutCtrl(Xb,0,sb+=43,200,23);Wb.addElement(Ta);Ta.addCheckedListener(function(){ea&&ea.setEnabled(!1);jb&&jb.setEnabled(!1);La&&La.setEnabled(!0)});La||(x(M),La=new Za,bb(ca)&&La.setSelected(ca),Cb=La.getJqUi(),Wb=ka?195:230,q.layoutCtrl(Cb,0,sb+=33,465,Wb),Cb.appendTo(z),Cb&&Cb.show());ka&&ka.setChecked(!1);
qa.setChecked(!0);jb.setEnabled(!1);Ta.setChecked(!1)}}function x(m){if(!Za){var k=com.kingdee.bos.qing.data.MacroVariateSelectorRegister;Za=com.kingdee.bos.qing.macro.MacroVarSelector;k.registerConstructor(com.kingdee.bos.qing.macro.MacroVarSelector);Za.registerRemoteImpl(m.getMacroManageRemoteImpl());com.kingdee.bos.qing.dbmanage.BizMetaSourceCreatorRegister.setCreator(new function(){this.createBizMetaSource=function(fa){var z=com.kingdee.bos.qing.scene.ERPCloudDBCenterSource,M=com.kingdee.bos.qing.scene.SuperQuerySource,
ca=null;fa.bizMetaType==z.DBCENTER?(ca=new z,ca.fromJsonObject(fa)):fa.bizMetaType==M.ENTITY&&(ca=new M,ca.fromJsonObject(fa));return ca}})}}function K(m,k){this.getValue=function(){return m};this.getText=function(){return k};this.getVariableType=function(){return vb}}function ba(m){var k;this.getValue=function(){return m};this.getText=function(){k||(k=Ca(m));return k};this.getVariableType=function(){return Fb}}function ja(m,k,fa,z){this.toString=function(){return B.get(fa,z)};this.getValue=function(){return m};
this.getExtRptTypeId=function(){return k};this.getVariableType=function(){return db}}function xa(){var m=this,k,fa,z;this.getVersion=function(){return"2"};this.getDateGran=function(){return k};this.setDateGran=function(M){k=M};this.getDateType=function(){return fa};this.setDateType=function(M){fa=M};this.getValue=function(){return z};this.setValue=function(M){z=M};this.fromJsonObject=function(M){m.setDateGran(M.dateGran);m.setDateType(M.dateType);m.setValue(M.value)};this.toJsonObject=function(){var M=
{version:"2"};M.dateGran=k;M.dateType=fa;M.value=z;return M}}function Xa(m,k,fa){this.toString=function(){return B.get(k,fa)};this.getValue=function(){return m}}function oa(m,k,fa){this.toString=function(){return B.get(k,fa)};this.getValue=function(){return m}}function ta(m,k,fa){this.toString=function(){return B.get(k,fa)};this.getValue=function(){return m}}function Pa(m,k,fa){this.toString=function(){return B.get(k,fa)};this.getValue=function(){return m}}function Qa(m,k,fa){u.call(this);var z=this,
M=this.protectedMethod,ca,ka;(function(){M.setTitle(m);z.setSize(k.getWidth(),k.getHeight());M.setSelectable(!1);M.setContentPaneCreator(function(){return k.getJqUi()});M.setClosingChecker2(function(wa){qa(wa)},function(wa){wa(!0)},!0);M.setClosingAction(function(wa){})})();this.setSelectedModel=function(wa){ka=wa;k&&k.setSelected(ka)};this.setSelectedCallback=function(wa){ca=wa};var qa=function(wa){var Ta=k.checkUIInput(function(ea){ka=k.getModelFromUI();ca&&ca(ka);wa(!0)});Ta&&(M.getMessageCurtain().showPrompt(Ta,
2E3),wa(!1))}}function Pb(m,k,fa){Qa.call(this,m,new Sa(k,fa),k)}function Sa(m,k){var fa=this,z,M,ca,ka,qa,wa,Ta,ea,Ua,jb,cb,Cb,La,ob,Hb,sb,Wb;var Xb=new c;Xb.setFormatString("yyyy-MM-dd");this.getJqUi=function(){z||(fc(),ec());return z};this.getWidth=function(){return 435};this.getHeight=function(){return 360};this.setSelected=function(d){M=d;z&&ec()};this.getSelectedModel=function(){M=new ValueTextModel;var d,b=ca.getSelected().getValue(),C=new xa;C.setDateGran(b);if(ka.isChecked()){C.setDateType("PERM");
if(wa)var p=d=(d=wa.getDateObject())?Xb.format(d):"";else if(b=qa.getSelectedValue()[0])d=b.getValue(),p=b.getText();C.setValue(d)}else ea.isChecked()?(C.setDateType("EXPR"),d=Ja.EXPRESSION+jb.getText(),C.setValue(d),p=d):Ua.isChecked()&&(C.setDateType("RELATIVE"),d=La.getSelected().getValue(),b==Ja.Y_M_D&&"DAY"==d?(C.setValue(cb.getSelected().getValue()+"!@#ORANGE#@!"+Cb.getValue()+"!@#ORANGE#@!"+d),p=B.get("sysDate","\u670d\u52a1\u7aef\u7cfb\u7edf\u65e5\u671f")+cb.getSelected().toString()+Cb.getValue()+
La.getSelected().toString()):(d=cb.getSelected().getValue()+"!@#ORANGE#@!"+Cb.getValue()+"!@#ORANGE#@!"+d,p=B.get("sysDate","\u670d\u52a1\u7aef\u7cfb\u7edf\u65e5\u671f")+cb.getSelected().toString()+Cb.getValue()+La.getSelected().toString(),b==Ja.Y_M_D&&(d=d+"!@#ORANGE#@!"+sb.getSelected().getValue(),p=p+ob.getText()+sb.getSelected().toString()),C.setValue(d)));M.setValue(JSON.stringify(C.toJsonObject()));M.setText(p);return M};this.checkUIInput=function(d){if(ea.isChecked()){var b=jb.getText();if(null==
b||0==$.trim(b).length)return B.get("inputExpression","\u8bf7\u8f93\u5165\u8868\u8fbe\u5f0f\u3002")}d(!0)};this.getModelFromUI=function(){return fa.getSelectedModel()};var $b=function(d){if(-1<d.indexOf("-")){var b=d.split("-");if(3!=b.length)return null;d=parseInt(b[0]);var C=parseInt(b[1]);b=parseInt(b[2]);if(isNaN(d)||isNaN(C)||isNaN(b))return null;var p=new Date;p.setYear(d);p.setMonth(C-1);p.setDate(b);return p}p=new Date(Number(d));return p.getTime()?p:null},ec=function(){if(M){var d=M;M instanceof
ValueTextModel&&(d=M.getValue());d=d?d:"";var b=ca.getSelected(),C=b.getValue();if(d.startsWith(eb)){var p=new xa;p.fromJsonObject(JSON.parse(d));C==p.getDateGran()&&(d=p.getDateType(),"PERM"==d?(ka.setChecked(!0),b=new ValueTextModel,wa?(b=p.getValue(),p=ReportParamDescription.Y_M_D_PATTERN,b&&"string"==typeof b?(d=new c,d.setFormatString(p),p=0>b.indexOf("-")?d.format(Number(b)):d.format(b)):p="",(b=$b(p))&&wa.setDateObject(b)):(p=p.getValue(),b.setValue(p),b.setText(p),b=[b],qa.setSelectedValue(b))):
"EXPR"==d?(ea.setChecked(!0),b=p.getValue(),b=b.substring(Ja.EXPRESSION.length,b.length),jb.setText(b)):(Ua.setChecked(!0),d=p.getValue().split("!@#ORANGE#@!"),cb.setSelected(oa.getDateFrontBehindTypeByValue(d[0])),Cb.setValue(parseInt(d[1])),p=ra(p.getDateGran()),La.setItemModels(p),La.setSelected(ta.getDateOffsetUnitTypeByValue(d[2])),tb(b.getValue(),d[2]),3<d.length&&sb.setSelected(Pa.getDateFirstLastDayTypeByValue(d[3]))))}else d.startsWith(Ja.SYS_DATE)?Ua.setChecked(!0):d.startsWith(Ja.DATE_ADD)?
(Ua.setChecked(!0),p=d.substring(Ja.DATE_ADD.length,d.length-1),cb.setSelected(oa.SUPPORTED_VAR_TYPE[1]),p=parseInt(p),Cb.setValue(100<p?100:p),La.setItemModels(ta.SUPPORTED_VAR_TYPE),La.setSelected(ta.SUPPORTED_VAR_TYPE[0]),tb(b.getValue(),ta.SUPPORTED_VAR_TYPE[0].getValue())):d.startsWith(Ja.DATE_SUB)?(Ua.setChecked(!0),p=d.substring(Ja.DATE_SUB.length,d.length-1),cb.setSelected(oa.SUPPORTED_VAR_TYPE[0]),p=parseInt(p),Cb.setValue(100<p?100:p),La.setItemModels(ta.SUPPORTED_VAR_TYPE),La.setSelected(ta.SUPPORTED_VAR_TYPE[0]),
tb(b.getValue(),ta.SUPPORTED_VAR_TYPE[0].getValue())):d.startsWith(Ja.DAY_BEGIN)?(Ua.setChecked(!0),La.setItemModels(ta.SUPPORTED_VAR_TYPE),La.setSelected(ta.SUPPORTED_VAR_TYPE[2]),tb(b.getValue(),ta.SUPPORTED_VAR_TYPE[2].getValue()),sb.setSelected(Pa.SUPPORTED_VAR_TYPE[0])):d.startsWith(Ja.DAY_END)?(Ua.setChecked(!0),La.setItemModels(ta.SUPPORTED_VAR_TYPE),La.setSelected(ta.SUPPORTED_VAR_TYPE[2]),tb(b.getValue(),ta.SUPPORTED_VAR_TYPE[2].getValue()),sb.setSelected(Pa.SUPPORTED_VAR_TYPE[1])):d.startsWith(Ja.EXPRESSION)?
(ea.setChecked(!0),b=d.substring(Ja.EXPRESSION.length,d.length),jb.setText(b)):(ka.setChecked(!0),m.pattern&&ReportParamDescription.Y_M_D_PATTERN!=m.pattern?(d instanceof Array?b=d:d instanceof ValueTextModel?b=[d]:(b=new ValueTextModel,b.setValue(d),b.setText(d),b=[b]),qa.setSelectedValue(b)):(b=$b(d))&&wa.setDateObject(b))}},fc=function(){z=$("<div>");var d=0;"en"==f.getUrlParamValue("language")&&(d=18);var b=20,C=new O;C.setText(B.get("dateType","\u65f6\u95f4\u7c92\u5ea6\uff1a"));C=C.getJqUi();
C.appendTo(z);q.layoutCtrl(C,20,b,60+d,23);ca=new V;ca.setEnabled(!1);ca.setItemModels(Xa.SUPPORTED_VAR_TYPE);C=ca.getJqUi();q.layoutCtrl(C,110,b,270,23);C.appendTo(z);C=new O;C.setText(B.get("dateSetting","\u65e5\u671f\u8bbe\u7f6e\uff1a"));C=C.getJqUi();C.appendTo(z);q.layoutCtrl(C,20,b+=43,60+d,23);C=new E;ka=new v;ka.setText(B.get("designatedDate","\u56fa\u5b9a\u65e5\u671f"));var p=ka.getJqUi();p.attr("title",B.get("designatedDate","\u56fa\u5b9a\u65e5\u671f"));p.appendTo(z);q.layoutCtrl(p,110,
b,80,23);C.addElement(ka);ka.addCheckedListener(function(){wa&&wa.setEnabled(!0);qa&&qa.setEnabled(!0);jb.setEnabled(!1);cb.setEnabled(!1);Cb.setEnabled(!1);La.setEnabled(!1);sb.setEnabled(!1)});m.pattern&&ReportParamDescription.Y_M_D_PATTERN!=m.pattern?(qa=k.getFilterSimilarDate(),Ta=$("<div>"),qa.createUIWithoutLabel(Ta)):(wa=new Z,wa.setSelectedNullable(!0),wa.addModelChangedListener(function(){}),Ta=wa.getJqUi());Ta.appendTo(z);q.layoutCtrl(Ta,190,b,190,23);Ua=new v;Ua.setText(B.get("dateRelative",
"\u76f8\u5bf9\u4e8e\u670d\u52a1\u7aef\u7684\u65e5\u671f"));p=Ua.getJqUi();p.attr("title",B.get("dateRelative","\u76f8\u5bf9\u4e8e\u670d\u52a1\u7aef\u7684\u65e5\u671f"));p.appendTo(z);q.layoutCtrl(p,110,b+=43,180,23);C.addElement(Ua);Ua.addCheckedListener(function(){wa&&wa.setEnabled(!1);qa&&qa.setEnabled(!1);jb.setEnabled(!1);cb.setEnabled(!0);Cb.setEnabled(!0);La.setEnabled(!0);sb.setEnabled(!0)});cb=new V;cb.setItemModels(oa.SUPPORTED_VAR_TYPE);cb.setSelected(oa.SUPPORTED_VAR_TYPE[0]);p=cb.getJqUi();
q.layoutCtrl(p,130,b+=43,50+d,23);p.appendTo(z);Cb=new y;Cb.setValue(0);Cb.setConstraint(0,100,1);p=Cb.getJqUi();p.appendTo(z);q.layoutCtrl(p,180+d,b,50,23);La=new V;p=La.getJqUi();q.layoutCtrl(p,230+d,b,50+d,23);p.appendTo(z);ob=new O;ob.setText(B.get("de","\u7684"));Hb=ob.getJqUi();Hb.css("text-align","center");Hb.appendTo(z);q.layoutCtrl(Hb,280+2*d,b,20,23);sb=new V;sb.setItemModels(Pa.SUPPORTED_VAR_TYPE);sb.setSelected(Pa.SUPPORTED_VAR_TYPE[0]);Wb=sb.getJqUi();q.layoutCtrl(Wb,300+2*d,b,80,23);
Wb.appendTo(z);ea=new v;ea.setChecked(!1);ea.setText(B.get("expression","\u8868\u8fbe\u5f0f\u5b9a\u4e49"));d=ea.getJqUi();d.attr("title",B.get("expression","\u8868\u8fbe\u5f0f\u5b9a\u4e49"));d.appendTo(z);q.layoutCtrl(d,110,b+=43,90,23);C.addElement(ea);ea.addCheckedListener(function(){wa&&wa.setEnabled(!1);qa&&qa.setEnabled(!1);jb.setEnabled(!0);cb.setEnabled(!1);Cb.setEnabled(!1);La.setEnabled(!1);sb.setEnabled(!1)});jb=new J;jb.setPlaceholder(B.get("expressionPlaceholder","\u4f7f\u7528\u65e5\u671f\u51fd\u6570"));
d=jb.getJqUi();(C=d.find(".sa-ctrl-textfield-input"))&&C.css({"text-overflow":"ellipsis",padding:"0px 20px"});d.appendTo(z);q.layoutCtrl(d,200,b,180,23);dc(d,m.pattern);b=ta.SUPPORTED_VAR_TYPE;La.addSelectedChangedListener(function(L,G,R){tb(ca.getSelected().getValue(),R.getValue())});La.setItemModels(b);La.setSelected(b[0]);kb();tb(ca.getSelected().getValue(),b[0].getValue());ka.setChecked(!0)},dc=function(d,b){switch(b){case ReportParamDescription.Y_M_D_PATTERN:var C=B.get("exprTips","\u53d6\u8868\u8fbe\u5f0f\u8fd4\u56de\u65e5\u671f\u503c\u7684#1\u90e8\u5206").replace("#1",
B.get("yMD","\u5e74\u6708\u65e5"));break;case ReportParamDescription.Y_M_PATTERN:C=B.get("exprTips","\u53d6\u8868\u8fbe\u5f0f\u8fd4\u56de\u65e5\u671f\u503c\u7684#1\u90e8\u5206").replace("#1",B.get("yM","\u5e74\u6708"));break;case ReportParamDescription.Y_Q_PATTERN:C=B.get("exprTips","\u53d6\u8868\u8fbe\u5f0f\u8fd4\u56de\u65e5\u671f\u503c\u7684#1\u90e8\u5206").replace("#1",B.get("yQ","\u5e74\u5b63"));break;case ReportParamDescription.Y_PATTERN:C=B.get("exprTips","\u53d6\u8868\u8fbe\u5f0f\u8fd4\u56de\u65e5\u671f\u503c\u7684#1\u90e8\u5206").replace("#1",
B.get("y","\u5e74"))}C&&(b=new za,b.setIconType(za.ICON_TYPE_QUESTION),b.setTipsText(C),C=b.getJqUi(),q.layoutCtrlWithLRTB(C,null,3,16,2,null,16),C.appendTo(d))},ra=function(d){var b=ta.SUPPORTED_VAR_TYPE;switch(d){case Ja.Y_M:b=ta.SUPPORTED_VAR_TYPE.slice(2);break;case Ja.Y_S:b=ta.SUPPORTED_VAR_TYPE.slice(3);break;case Ja.Y:b=ta.SUPPORTED_VAR_TYPE.slice(4)}return b},kb=function(){var d=m.pattern,b=Xa.SUPPORTED_VAR_TYPE[0];if(d)switch(d){case ReportParamDescription.Y_M_PATTERN:b=Xa.SUPPORTED_VAR_TYPE[1];
break;case ReportParamDescription.Y_Q_PATTERN:b=Xa.SUPPORTED_VAR_TYPE[2];break;case ReportParamDescription.Y_PATTERN:b=Xa.SUPPORTED_VAR_TYPE[3]}ca.setSelected(b);d=b.getValue();b=ra(d);La.setItemModels(b);La.setSelected(b[0]);tb(d,b[0].getValue())},tb=function(d,b){Ja.Y_M_D==d&&"DAY"!=b?(Hb&&Hb.css("display","block"),Wb&&Wb.css("display","block")):(Hb&&Hb.css("display","none"),Wb&&Wb.css("display","none"))}}function hb(m,k){Qa.call(this,m,new ib(k),k)}function ib(m){var k,fa,z,M,ca,ka,qa,wa,Ta,ea,
Ua,jb,cb,Cb,La,ob,Hb;var sb=new c;sb.setFormatString("yyyy-MM-dd HH:mm:ss");var Wb=new c;Wb.setFormatString("HH:mm:ss");this.getJqUi=function(){k||(Xb(),fc());return k};this.getWidth=function(){return 390};this.getHeight=function(){return 400};var Xb=function(){k=$("<div>");var ra=0,kb=0;"en"==f.getUrlParamValue("language")&&(ra=18,kb=10);var tb=20,d=new E;z=new v;z.setText(B.get("designatedDateTime","\u56fa\u5b9a\u65e5\u671f\u65f6\u95f4"));var b=z.getJqUi();b.attr("title",B.get("designatedDateTime",
"\u56fa\u5b9a\u65e5\u671f\u65f6\u95f4"));b.appendTo(k);q.layoutCtrl(b,20-kb,tb,100,23);d.addElement(z);z.addCheckedListener(function(){M.setEnabled(!0);ka.setEnabled(!1);wa.setEnabled(!1);Ta.setEnabled(!1);ea.setEnabled(!1);cb.setEnabled(!1);La.setEnabled(!1);ob.setEnabled(!1);Hb.setEnabled(!1)});M=new Ya;M.setSelectedNullable(!0);M.isSelectedNullable(!0);M.addModelChangedListener(function(){});b=M.getJqUi();b.appendTo(k);q.layoutCtrl(b,120-kb,tb,210+2*ra,23);qa=new v;qa.setText(B.get("dateTimeRelative",
"\u76f8\u5bf9\u4e8e\u670d\u52a1\u7aef\u7684\u65e5\u671f\u65f6\u95f4"));b=qa.getJqUi();b.attr("title",B.get("dateTimeRelative","\u76f8\u5bf9\u4e8e\u670d\u52a1\u7aef\u7684\u65e5\u671f\u65f6\u95f4"));b.appendTo(k);q.layoutCtrl(b,20-kb,tb+=43,180,23);d.addElement(qa);qa.addCheckedListener(function(){La.setEnabled(!0);ob.setEnabled(!0);M.setEnabled(!1);ka.setEnabled(!1);wa.setEnabled(!0);Ta.setEnabled(!0);ea.setEnabled(!0);cb.setEnabled(!0);ob.isChecked()&&Hb.setEnabled(!0)});b=new O;b.setText(B.get("dateCol",
"\u65e5\u671f\uff1a"));b=b.getJqUi();b.attr("title",B.get("dateCol","\u65e5\u671f\uff1a"));b.appendTo(k);q.layoutCtrl(b,40-kb,tb+=43,40,23);wa=new V;wa.setItemModels(oa.SUPPORTED_VAR_TYPE);wa.setSelected(oa.SUPPORTED_VAR_TYPE[0]);b=wa.getJqUi();q.layoutCtrl(b,80-kb,tb,50+ra,23);b.appendTo(k);Ta=new y;Ta.setValue(0);Ta.setConstraint(0,100,1);b=Ta.getJqUi();b.appendTo(k);q.layoutCtrl(b,130+ra-kb,tb,50,23);ea=new V;ea.setItemModels(ta.SUPPORTED_VAR_TYPE);b=ea.getJqUi();q.layoutCtrl(b,180+ra-kb,tb,50+
ra,23);b.appendTo(k);Ua=new O;Ua.setText(B.get("de","\u7684"));jb=Ua.getJqUi();jb.css("text-align","center");jb.appendTo(k);q.layoutCtrl(jb,230+2*ra-kb,tb,20,23);cb=new V;cb.setItemModels(Pa.SUPPORTED_VAR_TYPE);cb.setSelected(Pa.SUPPORTED_VAR_TYPE[0]);Cb=cb.getJqUi();q.layoutCtrl(Cb,250+2*ra-kb,tb,80,23);Cb.appendTo(k);b=new O;b.setText(B.get("timeCol","\u65f6\u95f4\uff1a"));b=b.getJqUi();b.attr("title",B.get("timeCol","\u65f6\u95f4\uff1a"));b.appendTo(k);q.layoutCtrl(b,40-kb,tb+=43,40,23);b=new E;
La=new v;La.setText(B.get("sysTime","\u670d\u52a1\u7aef\u5f53\u524d\u65f6\u95f4"));var C=La.getJqUi();C.attr("title",B.get("sysTime","\u670d\u52a1\u7aef\u5f53\u524d\u65f6\u95f4"));C.appendTo(k);q.layoutCtrl(C,80-kb,tb,120,23);b.addElement(La);La.addCheckedListener(function(){Hb.setEnabled(!1)});ob=new v;ob.setText(B.get("designatedTime","\u56fa\u5b9a\u65f6\u95f4"));C=ob.getJqUi();C.attr("title",B.get("designatedTime","\u56fa\u5b9a\u65f6\u95f4"));C.appendTo(k);q.layoutCtrl(C,80-kb,tb+=43,90,23);b.addElement(ob);
ob.addCheckedListener(function(){Hb.setEnabled(!0)});Hb=new ub;Hb.addSelectionListener(function(){});b=new Date;Hb.setSelected(b.getHours(),b.getMinutes(),b.getSeconds());b=Hb.getJqUi();b.appendTo(k);q.layoutCtrl(b,170-kb,tb,100,23);ca=new v;ca.setChecked(!1);ca.setText(B.get("expression","\u8868\u8fbe\u5f0f\u5b9a\u4e49"));b=ca.getJqUi();b.attr("title",B.get("expression","\u8868\u8fbe\u5f0f\u5b9a\u4e49"));b.appendTo(k);q.layoutCtrl(b,20-kb,tb+=43,90,23);d.addElement(ca);ca.addCheckedListener(function(){M.setEnabled(!1);
ka.setEnabled(!0);wa.setEnabled(!1);Ta.setEnabled(!1);ea.setEnabled(!1);cb.setEnabled(!1);La.setEnabled(!1);ob.setEnabled(!1);Hb.setEnabled(!1)});ka=new J;ka.setPlaceholder(B.get("expressionPlaceholder","\u4f7f\u7528\u65e5\u671f\u51fd\u6570"));d=ka.getJqUi();(b=d.find(".sa-ctrl-textfield-input"))&&b.css({"text-overflow":"ellipsis",padding:"0px 20px"});d.appendTo(k);q.layoutCtrl(d,110-kb,tb,220+2*ra,23);ea.addSelectedChangedListener(function(p,L,G){$b(G.getValue())});ea.setSelected(ta.SUPPORTED_VAR_TYPE[0]);
$b(ta.SUPPORTED_VAR_TYPE[0].getValue());La.setChecked(!0);z.setChecked(!0)},$b=function(ra){"DAY"==ra?(jb&&jb.css("display","none"),Cb&&Cb.css("display","none")):(jb&&jb.css("display","block"),Cb&&Cb.css("display","block"))};this.setSelected=function(ra){ra&&(fa=ra,k&&fc())};this.checkUIInput=function(ra){if(ca.isChecked()){var kb=ka.getText();if(null==kb||0==$.trim(kb).length)return B.get("inputExpression","\u8bf7\u8f93\u5165\u8868\u8fbe\u5f0f\u3002")}if(qa.isChecked()&&ob.isChecked()&&Hb.isSelectedNull())return B.get("setTimeValue",
"\u8bf7\u8bbe\u7f6e\u56fa\u5b9a\u65f6\u95f4");ra(!0)};this.getModelFromUI=function(){fa=new ValueTextModel;var ra,kb=new xa;kb.setDateGran(Ja.Y_M_D);if(z.isChecked()){kb.setDateType("PERM");var tb=ra=(ra=M.getDateObject())?sb.format(ra):"";kb.setValue(ra)}else if(ca.isChecked())kb.setDateType("EXPR"),ra=Ja.EXPRESSION+ka.getText(),kb.setValue(ra),tb=ra;else if(qa.isChecked()){kb.setDateType("RELATIVE");tb=ea.getSelected().getValue();Hb&&!Hb.isSelectedNull()&&(ra=new Date,ra.setHours(Hb.getHour()),
ra.setMinutes(Hb.getMinute()),ra.setSeconds(Hb.getSecond()),ra=Wb.format(ra));ra=La.isChecked()?Ja.SYS_TIME:ra;var d=Ja.SYS_TIME==ra?"|"+B.get("sysTime","\u670d\u52a1\u7aef\u5f53\u524d\u65f6\u95f4"):ra?"|"+ra:"";"DAY"==tb?(kb.setValue(wa.getSelected().getValue()+"!@#ORANGE#@!"+Ta.getValue()+"!@#ORANGE#@!"+tb+"!@#ORANGE#@!"+ra),tb=B.get("sysDate","\u670d\u52a1\u7aef\u7cfb\u7edf\u65e5\u671f")+wa.getSelected().toString()+Ta.getValue()+ea.getSelected().toString()+d):(kb.setValue(wa.getSelected().getValue()+
"!@#ORANGE#@!"+Ta.getValue()+"!@#ORANGE#@!"+tb+"!@#ORANGE#@!"+cb.getSelected().getValue()+"!@#ORANGE#@!"+ra),tb=B.get("sysDate","\u670d\u52a1\u7aef\u7cfb\u7edf\u65e5\u671f")+wa.getSelected().toString()+Ta.getValue()+ea.getSelected().toString()+Ua.getText()+cb.getSelected().toString()+d)}fa.setValue(JSON.stringify(kb.toJsonObject()));fa.setText(tb);return fa};var ec=function(ra){if(-1<ra.indexOf("-")){var kb=ra.split(" ");if(2!=kb.length)return null;ra=kb[1];var tb=kb[0].split("-"),d=ra.split(":");
if(3!=tb.length||3!=d.length)return null;ra=parseInt(tb[0]);kb=parseInt(tb[1]);tb=parseInt(tb[2]);var b=parseInt(d[0]),C=parseInt(d[1]);d=parseInt(d[2]);if(isNaN(ra)||isNaN(kb)||isNaN(tb)||isNaN(b)||isNaN(C)||isNaN(d))return null;var p=new Date;p.setYear(ra);p.setMonth(kb-1);p.setDate(tb);p.setHours(b);p.setMinutes(C);p.setSeconds(d);return p}p=new Date(Number(ra));return p.getTime()?p:null},fc=function(){if(fa){var ra=fa;fa instanceof ValueTextModel&&(ra=fa.getValue());if(ra.startsWith(eb)){var kb=
new xa;kb.fromJsonObject(JSON.parse(ra));ra=kb.getDateType();if("PERM"==ra)z.setChecked(!0),z.setChecked(!0),(ra=ec(kb.getValue()))&&M.setDateObject(ra);else if("EXPR"==ra)ca.setChecked(!0),ra=kb.getValue(),ra=ra.substring(Ja.EXPRESSION.length,ra.length),ka.setText(ra);else if(qa.setChecked(!0),ra=kb.getValue().split("!@#ORANGE#@!"),wa.setSelected(oa.getDateFrontBehindTypeByValue(ra[0])),Ta.setValue(parseInt(ra[1])),ea.setItemModels(ta.SUPPORTED_VAR_TYPE),ea.setSelected(ta.getDateOffsetUnitTypeByValue(ra[2])),
$b(ra[2]),"DAY"!=ra[2]&&3<ra.length?(cb.setSelected(Pa.getDateFirstLastDayTypeByValue(ra[3])),ra=ra[4]):ra=ra[3],Ja.SYS_TIME==ra)La.setChecked(!0);else if(ob.setChecked(!0),-1<ra.indexOf(":")){var tb=ra.split(":");3==tb.length&&(ra=parseInt(tb[0]),kb=parseInt(tb[1]),tb=parseInt(tb[2]),isNaN(ra)||isNaN(kb)||isNaN(tb)||Hb.setSelected(ra,kb,tb))}else ra=new Date(Number(ra)),ra.getTime()&&Hb.setSelected(ra.getHours(),ra.getMinutes(),ra.getSeconds())}else ra.startsWith(Ja.SYS_DATE)?(qa.setChecked(!0),
La.setChecked(!0)):ra.startsWith(Ja.DATE_ADD)?(qa.setChecked(!0),kb=ra.substring(Ja.DATE_ADD.length,ra.length-1),wa.setSelected(oa.SUPPORTED_VAR_TYPE[1]),kb=parseInt(kb),Ta.setValue(100<kb?100:kb),ea.setItemModels(ta.SUPPORTED_VAR_TYPE),ea.setSelected(ta.SUPPORTED_VAR_TYPE[0]),$b(ta.SUPPORTED_VAR_TYPE[0].getValue()),dc(ra)):ra.startsWith(Ja.DATE_SUB)?(qa.setChecked(!0),kb=ra.substring(Ja.DATE_SUB.length,ra.length-1),wa.setSelected(oa.SUPPORTED_VAR_TYPE[0]),kb=parseInt(kb),Ta.setValue(100<kb?100:kb),
ea.setItemModels(ta.SUPPORTED_VAR_TYPE),ea.setSelected(ta.SUPPORTED_VAR_TYPE[0]),$b(ta.SUPPORTED_VAR_TYPE[0].getValue()),dc(ra)):ra.startsWith(Ja.DAY_BEGIN)?(qa.setChecked(!0),ea.setItemModels(ta.SUPPORTED_VAR_TYPE),ea.setSelected(ta.SUPPORTED_VAR_TYPE[2]),$b(ta.SUPPORTED_VAR_TYPE[2].getValue()),cb.setSelected(Pa.SUPPORTED_VAR_TYPE[0]),dc(ra)):ra.startsWith(Ja.DAY_END)?(qa.setChecked(!0),ea.setItemModels(ta.SUPPORTED_VAR_TYPE),ea.setSelected(ta.SUPPORTED_VAR_TYPE[2]),$b(ta.SUPPORTED_VAR_TYPE[2].getValue()),
cb.setSelected(Pa.SUPPORTED_VAR_TYPE[1]),dc(ra)):ra.startsWith(Ja.EXPRESSION)?(ca.setChecked(!0),ra=ra.substring(Ja.EXPRESSION.length,ra.length),ka.setText(ra)):(z.setChecked(!0),(ra=ec(ra))&&M.setDateObject(ra))}},dc=function(ra){var kb=ra.indexOf("|");if(-1!=kb)if(ra=ra.substring(kb+1,ra.length),ra.startsWith(Ja.SYS_TIME))La.setChecked(!0);else if(ob.setChecked(!0),-1<ra.indexOf(":")){var tb=ra.split(":");3==tb.length&&(ra=parseInt(tb[0]),kb=parseInt(tb[1]),tb=parseInt(tb[2]),isNaN(ra)||isNaN(kb)||
isNaN(tb)||Hb.setSelected(ra,kb,tb))}else ra=new Date(Number(ra)),ra.getTime()&&Hb.setSelected(ra.getHours(),ra.getMinutes(),ra.getSeconds());else Hb.setSelected(null)}}function Eb(m,k){Qa.call(this,m,new Ia(k),k)}function Ia(m){var k=this,fa,z,M,ca,ka;var qa=new c;qa.setFormatString("HH:mm:ss");this.getJqUi=function(){fa||(Ta(),wa());return fa};this.getWidth=function(){return 360};this.getHeight=function(){return 250};this.setSelected=function(ea){z=ea;fa&&wa()};this.getSelectedModel=function(){if(M.isChecked())if(!ca||
ca.isSelectedNull())z="";else{var ea=new Date;ea.setHours(ca.getHour());ea.setMinutes(ca.getMinute());ea.setSeconds(ca.getSecond());z=qa.format(ea)}else ka.isChecked()&&(z=Ja.SYS_TIME);return z};this.checkUIInput=function(ea){ea(!0)};this.getModelFromUI=function(){return k.getSelectedModel()};var wa=function(){if(z)if(z instanceof ValueTextModel&&(z=z.getValue()),z.startsWith(Ja.SYS_TIME))ka.setChecked(!0);else if(M.setChecked(!0),-1<z.indexOf(":")){var ea=z.split(":");if(3==ea.length){var Ua=parseInt(ea[0]),
jb=parseInt(ea[1]);ea=parseInt(ea[2]);isNaN(Ua)||isNaN(jb)||isNaN(ea)||ca.setSelected(Ua,jb,ea)}}else Ua=new Date(Number(z)),Ua.getTime()&&ca.setSelected(Ua.getHours(),Ua.getMinutes(),Ua.getSeconds())},Ta=function(){fa=$("<div>");var ea=0,Ua=0;"en"==f.getUrlParamValue("language")&&(Ua=10,ea=30);var jb=30,cb=new E;M=new v;M.setChecked(!0);M.setText(B.get("designatedTime","\u56fa\u5b9a\u65f6\u95f4"));var Cb=M.getJqUi();Cb.attr("title",B.get("designatedTime","\u56fa\u5b9a\u65f6\u95f4"));q.layoutCtrl(Cb,
60-Ua,jb,90+ea,23);Cb.appendTo(fa);cb.addElement(M);M.addCheckedListener(function(La,ob){ca.setEnabled(ob&&La.isChecked())});ca=new ub;ca.setSelectedNullable(!0);ca.addSelectionListener(function(){});ca.setSelected(null);Cb=ca.getJqUi();Cb.appendTo(fa);q.layoutCtrl(Cb,150+ea-Ua,jb,100,23);ka=new v;ka.setText(B.get("sysTime","\u670d\u52a1\u7aef\u5f53\u524d\u65f6\u95f4"));ka.addCheckedListener(function(){ca.setEnabled(!1)});cb.addElement(ka);ea=ka.getJqUi();ea.attr("title",B.get("sysTime","\u670d\u52a1\u7aef\u5f53\u524d\u65f6\u95f4"));
ea.appendTo(fa);q.layoutCtrl(ea,60-Ua,jb+=43,180,23)}}function Kb(){var m;this.setVarF7SelectorModel=function(k){m=k};this.getVarF7SelectorModel=function(){return m}}function Nb(m,k,fa){H.call(this,null,k,fa,!0);Kb.call(this);var z=this;this.createFilterUI=function(M){z.createUI(M);fb(z,m,M,k.isReadOnly())}}function Ob(m,k,fa){H.call(this,null,k,fa,!0);Kb.call(this);var z=this,M;M||(M=new g(k,fa));this.createFilterUI=function(ca){z.createUI(ca);fb(z,m,ca,k.isReadOnly())};this.getFilterCombox=function(){return M};
this.setSuppliedValue=function(ca){if(ca&&0<ca.length)for(var ka=0;ka<ca.length;ka++){var qa=ca[0].getValue();void 0!=qa&&(qa.startsWith(wb)||qa.startsWith(Fa)||qa.startsWith(Na))&&ca.splice(ka,1)}ca&&0<ca.length&&M.setSuppliedValue(ca)};this.setSuppliedValueDescription=function(ca){M.setSuppliedValueDescription(ca)};this.setSelectedValueChangedListener=function(ca){M.setSelectedValueChangedListener(ca)};this.setSelectedValue=function(ca){z.setOutterSelectedValue(ca);if(ca&&0<ca.length){var ka=ca[0].getValue();
void 0==ka||ka.startsWith(wb)||ka.startsWith(Fa)||ka.startsWith(Na)||M.setSelectedValue(ca)}};this.resetSuppliedValue=function(ca,ka){M.resetSuppliedValue(ca,ka)}}function ab(m,k){var fa=this;U.call(this,m,k);this.setSuppliedValue=function(z){if(z&&0!=z.length){for(var M=[],ca,ka,qa=0;qa<z.length;qa++)ca=z[qa],ka=new ValueTextTreeNodeModel,ka.setText(ca.getText()),ka.setValue(ca.getValue()),ka.setId(ca.getValue()),ka.setParentId(""),M.push(ka);fa.setSuppliedValueInner(M)}}}function Q(m,k,fa){H.call(this,
null,k,fa,!0);Kb.call(this);var z=this,M;M||(M=new ab(k,fa));this.createFilterUI=function(ca){z.createUI(ca);fb(z,m,ca,k.isReadOnly())};this.getFilterForwardSelector=function(){return M};this.setSuppliedValue=function(ca){M.setSuppliedValue(ca)};this.setSuppliedValueDescription=function(ca){M.setSuppliedValueDescription(ca)};this.setSelectedValueChangedListener=function(ca){M.setSelectedValueChangedListener(ca)};this.setSelectedValue=function(ca){z.setOutterSelectedValue(ca);M.setSelectedValue(ca)};
this.resetSuppliedValue=function(ca,ka){M.resetSuppliedValue(ca,ka)}}function aa(m,k,fa){F.call(this,k,fa);var z=this;this.createFilterUI=function(M){z.createUI(M);M.find(".sa-ctrl-spinner-text").css("background-color","#ffffff")}}function ha(m,k,fa){H.call(this,X.SCHEDULE_FILTER_DATE,k,fa,!0);Kb.call(this);var z=this,M=$.extend(!0,{},m),ca;M.pattern=k.getPattern();!ca&&M.pattern&&ReportParamDescription.Y_M_D_PATTERN!=M.pattern&&(ca=new e(k,fa));this.getFilterSimilarDate=function(){return ca};this.createFilterUI=
function(ka){z.createUI(ka);fb(z,M,ka,k.isReadOnly())}}function pa(m,k,fa){H.call(this,X.SCHEDULE_FILTER_DATETIME,k,fa,!0);Kb.call(this);var z=this;this.createFilterUI=function(M){z.createUI(M);fb(z,m,M,k.isReadOnly())}}function r(m,k,fa){H.call(this,X.SCHEDULE_FILTER_TIME,k,fa,!0);Kb.call(this);var z=this;this.createFilterUI=function(M){z.createUI(M);fb(z,m,M,k.isReadOnly())}}function da(m,k,fa){na.call(this,k,fa);var z=this;this.createFilterUI=function(M){z.createUI(M)}}function A(m,k,fa){l.call(this,
k,fa);var z=this;this.createFilterUI=function(M){z.createUI(M);M.find(".extreport-runtime-filter-enabled").removeClass("extreport-runtime-filter-enabled")}}function H(m,k,fa,z){var M=this;a.call(this,k,fa);var ca,ka,qa,wa,Ta=this.protectedMethod,ea=new c,Ua=new c,jb=new c;ea.setFormatString("yyyy-MM-dd");Ua.setFormatString("yyyy-MM-dd HH:mm:ss");jb.setFormatString("HH:mm:ss");this.createUI=function(La){ka||Cb();var ob=ka.getJqUi();(ca=ob.find(".sa-ctrl-textfield-input"))&&ca.css({"text-overflow":"ellipsis",
padding:"0px 16px 0px 4px"});Ta.createUiWithLabel(La,ob)};this.setSuppliedValue=function(La){};this.setOutterSelectedValue=function(La){M.setTextFieldValue(La)};this.setSelectedValue=function(La){M.setTextFieldValue(La)};this.setTextFieldValue=function(La){ka||Cb();if(La&&1==La.length){qa=La[0];var ob=La[0].getValue()}else if(La&&1<La.length){wa=La;m?cb(""):cb(Ca(La));return}ob&&"string"==typeof ob?!m||-1<ob.indexOf(eb)?cb(qa.getText()):-1<ob.indexOf("date")||-1<ob.indexOf("day")||-1<ob.indexOf("get")||
-1<ob.indexOf("=")||m!=X.SCHEDULE_FILTER_TIME&&-1<ob.indexOf("-")||-1<ob.indexOf(":")?cb(ob):(La=Number(ob),isNaN(La)?cb(ob):(ob=new Date(La),X.SCHEDULE_FILTER_DATE==m?cb(ea.format(ob)):X.SCHEDULE_FILTER_DATETIME==m?cb(Ua.format(ob)):X.SCHEDULE_FILTER_TIME==m&&cb(jb.format(ob)))):cb("");M.fireSelectedValueChanged()};this.getSelectedValue=function(){ka||Cb();var La=null==ka.getText()?"":ka.getText();if(qa&&La==qa.getText())return[qa];if(wa&&La==Ca(wa))return wa;var ob=new ValueTextModel;ob.setValue(La);
ob.setText(La);return[ob]};var cb=function(La){ka.setText(La);ca&&ca.attr("title",La)},Cb=function(){ka=new J;if(z||k.isReadOnly())ka.setReadonly(!0),k.isReadOnly()&&ka.setEnabled(!1);ka.addEditedListener(M.fireSelectedValueChanged)}}function t(){this.create=function(m,k,fa){if(!(k instanceof ReportParamDescription))throw Error("Illegal argument.");switch(k.getCtrlType()?k.getCtrlType().toLowerCase():null){case "checkbox":return new A(m,k,fa);case "combobox":return new Ob(m,k,fa);case "f7":return new Q(m,
k,fa);case "numberstepper":return new aa(m,k,fa);case "checkboxgroup":return new Q(m,k,fa);case "datetime":if("Date"==k.getDataType())return new ha(m,k,fa);if("DateTime"==k.getDataType())return new pa(m,k,fa);if("Time"==k.getDataType())return new r(m,k,fa);throw Error("Illegal datetime!");case "label":return new da(m,k,fa);default:return new Nb(m,k,fa)}}}function P(m,k,fa,z){FilterContext.call(this,m,k,fa);var M=this,ca=k.oGlobal,ka=!1;this.delaySuppliedValueRemoteGetter=function(qa,wa,Ta){wa&&ca.createFacade(function(ea){Ta(ea);
ka||(ka=!0,z&&z(qa))},function(ea,Ua){return!0}).getDelaySuppliedValue(M.constructParam(qa,wa))}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.snapschedule&&(com.kingdee.bos.extreport.snapschedule={});"undefined"==typeof com.kingdee.bos.extreport.snapschedule.filter&&(com.kingdee.bos.extreport.snapschedule.filter=
{});var n=com.kingdee.bos.extreport.snapschedule.filter;n.ScheduleFilterTextField=Nb;n.ScheduleFilterComboBox=function(m,k,fa){la.call(this,k,fa);var z=this;this.createFilterUI=function(M){z.createUI(M);M.find(".extreport-runtime-filter-enabled").removeClass("extreport-runtime-filter-enabled")}};n.ScheduleFilterForwardSelector=Q;n.ScheduleFilterNumberInput=aa;n.ScheduleFilterDate=ha;n.ScheduleFilterDateAndTime=pa;n.ScheduleFilterTime=r;n.ScheduleFilterLabel=da;n.ScheduleFilterSwitch=A;n.ScheduleFilterCtrlFactory=
t;n.ScheduleFilterContext=P;n.ScheduleReportFilter=function(m,k,fa){ReportFilter.call(this,m,k,null);var z=this,M=this.protectedMethod,ca=new P(this,k,m,fa);this.init=function(ka,qa,wa){z.setArrParamsName([]);z.setMapCtrls({});z.setSchemeList(qa);for(qa=0;qa<ka.length;qa++){var Ta=ka[qa],ea=M.decodeParamDesc(Ta);"Hidden"!=ea.getState()&&z.setDisplay(!0);z.pushArrParamsName(ea.getName());var Ua=(new t).create(k,ea,ca);z.pushMapCtrls(ea.getName(),Ua);Ua instanceof Q?ea.getSuppliedValueDescription()||
Ua.setSuppliedValue(ea.getSuppliedValue()):Ua.setSuppliedValue(ea.getSuppliedValue());Ua.setSuppliedValueDescription(ea.getSuppliedValueDescription());"numberstepper"==(ea.getCtrlType()?ea.getCtrlType().toLowerCase():null)&&Ua.setDefaultValue(Ta.defaultValue);Ua instanceof da||(Ua.setSelectedValueChangedListener(M.ctrlSelectedValueChanged),Ua.setSelectedValue(ea.getDefaultValue()))}if(wa)for(var jb in wa)for(ka=wa[jb],qa=0;qa<ka.length;qa++)z.addOneAffectAnother(jb,ka[qa])};this.render=function(ka){_jqMainOwner=
$(ka);_jqMainOwner.attr("data-role","page");var qa=_jqMainOwner;ka=$("<div>");ka.appendTo(qa);ka.css("position","relative");qa=$("<div>");qa.attr("data-role","listview");qa.appendTo(ka);qa.css({fontSize:"12px"});var wa=z.getMapCtrls();for(Ua in wa){var Ta=wa[Ua],ea=Ta instanceof da?$("<div>").css({position:"relative",display:"inline-block",width:"100%"}):$("<div>").css({position:"relative",display:"inline-block",margin:"8px 70px 8px 0"});ea.attr("data-role","fieldcontain");ea.appendTo(qa);Ta.createFilterUI(ea)}_jqAllFilter=
ka;var Ua=$(window).height()-270;100>=Ua&&(Ua=100);_jqMainOwner.css({padding:"0px 10px 0px 10px",maxHeight:Ua,overflowY:"auto",position:"relative"});M.updateUI()};this.restoreSelectedVarByScheme=function(ka){for(var qa={},wa=0,Ta={};;){var ea=ka.match(new RegExp("N"+wa+"=(.*?)\u0001"));if(!ea||!ea[1])break;var Ua=ea[1];ea=ka.match(new RegExp("V"+wa+"=(.*?)\u0001"))[1];var jb=ka.match(new RegExp("C"+wa+"=(.*?)\u0001"))[1];Ta[Ua]=[ea,jb];wa++}ka=z.getMapCtrls();for(var cb in ka)if(wa=ka[cb],jb=Ta[cb])if(ea=
jb[0],jb=jb[1],wa instanceof ha||wa instanceof pa||wa instanceof r)wa=new ValueTextModel,wa.setText(jb),wa.setValue(ea),qa[cb]=wa;else if(ea)if(ea.startsWith(wb))(ea=ja.getSystemVarTypeByExtRptId(ea.substring(1,ea.length)))&&(qa[cb]=ea);else if(ea.startsWith(Fa))(ea=ea.substring(1,ea.length))&&com.kingdee.bos.qing.macro.MacroVarHelper.loadVarModelAdapter(ea,function(ob){qa[cb]=ob});else if(ea==Na)qa[cb]=new K(Na,B.get("firstData","\u7b2c\u4e00\u6761\u6570\u636e"));else{if(wa instanceof Nb)ea=ea.replaceAll("0xx1xx",
";"),jb=jb.replaceAll("0xx1xx",";"),ea=new K(ea,jb);else{Ua=[];ea=ea.split("0xx1xx");jb=jb.split("0xx1xx");for(var Cb=0,La=ea.length;Cb<La;Cb++)wa=new ValueTextModel,wa.setText(jb[Cb]),wa.setValue(ea[Cb]),Ua.push(wa);ea=new ba(Ua)}qa[cb]=ea}return qa};this.getVarF7SelectorModel=function(){var ka={},qa=z.getMapCtrls(),wa;for(wa in qa){var Ta=qa[wa];"function"==typeof eval(Ta.getVarF7SelectorModel)&&Ta.getVarF7SelectorModel()&&(ka[wa]=Ta.getVarF7SelectorModel())}return ka};this.updateFilterByF7SelectorModel=
function(ka){var qa=z.getMapCtrls(),wa;for(wa in qa){var Ta=qa[wa];if("function"==typeof eval(Ta.getVarF7SelectorModel)&&ka&&ka[wa]){Ta.setVarF7SelectorModel(ka[wa]);var ea=Ma(ka[wa]);Ta.setSelectedValue(ea)}}};this.execute=function(ka,qa){var wa=!1,Ta="[",ea={},Ua=z.getMapCtrls(),jb;for(jb in Ua){var cb=Ua[jb];if(!(cb instanceof da)){var Cb=new ParamValue;Cb.setParamName(jb);Cb.setDataType(cb.getParamDescription().getDataType());var La=cb.getSelectedValue();!wa&&cb.getParamDescription().isRequired()&&
(wa=!La||0==La.length);if(La)for(var ob=0;ob<La.length;ob++){var Hb=La[ob];Cb.addValue(Hb);Hb=Hb.getValue();if(cb.getParamDescription().isRequired())if(!Hb){wa=!0;break}else if((cb instanceof ha||cb instanceof pa)&&Hb.startsWith('{"version":"2"')){var sb=new xa;sb.fromJsonObject(JSON.parse(Hb));Hb=sb.getValue();if(!Hb||0==Hb.trim().length){wa=!0;break}}}if(wa)return{success:!1,errMsg:cb.getParamDescription().getText()+" \u53c2\u6570\u503c\u4e0d\u80fd\u4e3a\u7a7a\u3002"};1<Ta.length&&(Ta+=",",Ta+=
"\r\n");Ta+=Cb.toJsonString()}}Ua={};Ua.pageId=m;Ua.schemeName=ka;Ua.isDefaultChange=qa;Ua.flag="1";Ua.paramValues=Ta+"]";return wa?{success:!1,errMsg:"\u53c2\u6570\u503c\u4e0d\u5b8c\u6574"}:{success:!0,data:Ua,selectAll:JSON.stringify(ea)}}};n.SystemVarType=ja;var T,f,q,c,B,la,g,U,F,na,a,e,l,u,v,E,V,Ea,J,y,O,Z,Ya,ub,za,Za,vb="const_var",Fb="const_arr_var",db="sys_var",wb="@",Fa="$",Na="#@$firstData$@#",eb='{"version":"2"',Ja={DESIGNATED_DATE:"date",SYS_DATE:"getSystemDate()",SYS_TIME:"getSystemTime()",
DATE_ADD:"dateAdd + ",DATE_SUB:"dateSub - ",DAY_BEGIN:"dayBegin",DAY_END:"dayEnd",EXPRESSION:"=",Y_M_D:"Y_M_D",Y_M:"Y_M",Y_S:"Y_S",Y:"Y"},X={SCHEDULE_FILTER_DATE:"1",SCHEDULE_FILTER_DATETIME:"2",SCHEDULE_FILTER_TIME:"3"};(function(){var m=com.kingdee.bos.qing;T=m.CodeLoader;f=m.Seer;m=com.kingdee.bos.qing.common;q=m.DomUtil;c=m.DateFormater;m=com.kingdee.bos.qing.framework.common;B=m.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.snapschedule);m=com.kingdee.bos.extreport.runtime.filter;
la=m.FilterComboBox;g=m.FilterComboBoxSearch;U=m.FilterForwardSelector;F=m.FilterNumberInput;na=m.FilterLabel;a=m.AbstractFilterCtrl;e=m.FilterSimilarDate;l=m.FilterSwitch;Z=m.DateSelector;Ya=m.DateTimeSelector;ub=m.TimeSelector;m=com.kingdee.bos.qing.ui.component;u=m.AbstractModalDialog;v=m.RadioButton;E=m.RadioButtonGroup;V=m.ComboBox;Ea=m.F7Selector;J=m.TextField;y=m.Spinner;O=m.Label;za=m.HelpIcon;T.loadJs("biz-common/qing-biz-common.js");T.loadJs("data-modeling/qing-data-modeling.js");T.loadJs("scene/ierp-dm-scene.js");
T.loadJs("db-manage/qing-db-manage.js");T.loadJs("macro/qing-macro-runtime.js");T.loadI18n("macro","macro");T.loadSkinCss("macro","qing-macro");T.loadSkinJs("macro","skin")})();var Ca=function(m){var k="";if(!m)return k;for(var fa=m.length,z=3>fa?fa:3,M=0;M<z;M++)k+=m[M].getText(),M<z-1&&(k+="; ");3<fa&&(k=B.get("selectNumInTotal","#1\u7b49#2\u9879").replace("#1",k),k=k.replace("#2",fa));return k};ja.getSystemVarTypeById=function(m){for(var k=0;k<ja.SUPPORTED_VAR_TYPE.length;k++){var fa=ja.SUPPORTED_VAR_TYPE[k];
if(fa.getValue()==m)return fa}return null};ja.getSystemVarTypeByExtRptId=function(m){for(var k=0;k<ja.SUPPORTED_VAR_TYPE.length;k++){var fa=ja.SUPPORTED_VAR_TYPE[k];if(fa.getExtRptTypeId()==m)return fa}return null};ja.SUPPORTED_VAR_TYPE=[new ja("USER_ID","ExtRptCurrentUserInfoID","currentUserId","\u5f53\u524d\u7528\u6237ID"),new ja("USER_NAME","ExtRptCurrentUserInfoName","currentUserName","\u5f53\u524d\u7528\u6237\u540d\u79f0"),new ja("ORG_ID","ExtRptCurrentOrgUnitID","currentGroupID","\u5f53\u524d\u7ec4\u7ec7ID"),
new ja("ORG_NAME","ExtRptCurrentOrgUnitName","currentGroupNAME","\u5f53\u524d\u7ec4\u7ec7\u540d\u79f0"),new ja("DEPARTMENT_IDS","ExtRptCurrentUserDepartmentIDS","currentDepartmentIds","\u5f53\u524d\u7528\u6237\u6240\u5c5e\u90e8\u95e8(ID)"),new ja("DEPARTMENT_AND_SUBORDINATE_IDS","ExtRptCurrentUserDepartmentWithSubordinateIDS","currentDeptAndSubIds","\u5f53\u524d\u7528\u6237\u6240\u5c5e\u90e8\u95e8\u53ca\u4e0b\u7ea7(ID)"),new ja("CHARGE_DEPARTMENT_IDS","ExtRptCurrentUserChargeDepartmentIDS","currentChargeDeptId",
"\u5f53\u524d\u7528\u6237\u8d1f\u8d23\u7684\u90e8\u95e8(ID)"),new ja("CHARGE_DEPARTMENT_AND_SUBORDINATE_IDS","ExtRptCurrentUserChargeDepartmentWithSubordinateIDS","currentChargeDeptAndSubIds","\u5f53\u524d\u7528\u6237\u8d1f\u8d23\u7684\u90e8\u95e8\u53ca\u4e0b\u7ea7(ID)"),new ja("BIZ_UNIT_ORGRANG_ID","ExtRptCurrentBizUnitOrgRangeIds","currentBizUnitOrgRangeIds","\u5f53\u524d\u7528\u6237\u4e1a\u52a1\u5355\u5143\u8303\u56f4(ID)"),new ja("I18N","ExtRptCurrentSystemLanguage","currentSystemLanguage","\u5f53\u524d\u7cfb\u7edf\u8bed\u8a00")];
Xa.SUPPORTED_VAR_TYPE=[new Xa(Ja.Y_M_D,"yMD","\u5e74\u6708\u65e5"),new Xa(Ja.Y_M,"yM","\u5e74\u6708"),new Xa(Ja.Y_S,"yQ","\u5e74\u5b63"),new Xa(Ja.Y,"y","\u5e74")];Xa.getDateTypeByValue=function(m){for(var k=0;k<Xa.SUPPORTED_VAR_TYPE.length;k++){var fa=Xa.SUPPORTED_VAR_TYPE[k];if(fa.getValue()==m)return fa}return null};oa.SUPPORTED_VAR_TYPE=[new oa("FRONT","front","\u524d"),new oa("BEHIND","behind","\u540e")];oa.getDateFrontBehindTypeByValue=function(m){for(var k=0;k<oa.SUPPORTED_VAR_TYPE.length;k++){var fa=
oa.SUPPORTED_VAR_TYPE[k];if(fa.getValue()==m)return fa}return null};ta.SUPPORTED_VAR_TYPE=[new ta("DAY","day2","\u65e5"),new ta("WEEK","week","\u5468"),new ta("MONTH","month","\u6708"),new ta("SEASON","season","\u5b63"),new ta("YEAR","year","\u5e74")];ta.getDateOffsetUnitTypeByValue=function(m){for(var k=0;k<ta.SUPPORTED_VAR_TYPE.length;k++){var fa=ta.SUPPORTED_VAR_TYPE[k];if(fa.getValue()==m)return fa}return null};Pa.SUPPORTED_VAR_TYPE=[new Pa("FIRST_DAY","firstDay","\u7b2c\u4e00\u5929"),new Pa("LAST_DAY",
"lastDay","\u6700\u540e\u4e00\u5929")];Pa.getDateFirstLastDayTypeByValue=function(m){for(var k=0;k<Pa.SUPPORTED_VAR_TYPE.length;k++){var fa=Pa.SUPPORTED_VAR_TYPE[k];if(fa.getValue()==m)return fa}return null};var Ma=function(m){if(m instanceof ja){var k=wb+m.getExtRptTypeId();m=wb+m.toString()}else if(bb(m))m=k=Fa+(void 0!=m.getUid?m.getUid():m.getId());else if(m instanceof K)k=m.getValue(),m=m.getText();else{if(m instanceof ba)return m.getValue();if(m instanceof ValueTextModel)return[m];k=m}var fa=
new ValueTextModel;fa.setValue(k);fa.setText(m);return[fa]},Db=function(m,k){if(k instanceof Nb||k instanceof Ob||k instanceof Q){var fa=new w(B.get("settingBox","\u8bbe\u7f6e\u8f93\u5165\u6846"),m,k);fa.setSelectedCallback(function(qa){k.setVarF7SelectorModel(qa);qa=Ma(qa);k&&k.setSelectedValue(qa);k&&k.fireSelectedValueChanged()});fa.showDialog();if(k.getVarF7SelectorModel())fa.setSelectedModel(k.getVarF7SelectorModel());else{var z,M=k.getSelectedValue();if(M&&1==M.length){if(m=M[0].getValue(),
M=M[0].getText(),m&&0<m.length){var ca=!0,ka=m.substring(1,m.length);m.startsWith(wb)?z=ja.getSystemVarTypeByExtRptId(ka):m.startsWith(Fa)?com.kingdee.bos.qing.macro.MacroVarHelper.loadVarModelAdapter(ka,function(qa){z=qa;fa.setSelectedModel(z);ca=!1}):z=new K(m,M);ca&&fa.setSelectedModel(z)}}else M&&1<M.length&&(z=new ba(M),fa.setSelectedModel(z))}}else k instanceof ha?(M=new Pb(B.get("selectDate","\u8bbe\u7f6e\u65e5\u671f"),m,k),M.setSelectedCallback(function(qa){k.setVarF7SelectorModel(qa);qa=
Ma(qa);k&&k.setSuppliedValue(qa);k&&k.setSelectedValue(qa);k&&k.fireSelectedValueChanged()}),M.showDialog(),k.getVarF7SelectorModel()?M.setSelectedModel(k.getVarF7SelectorModel()):(m=k.getSelectedValue())&&0<m.length&&(m=m[0])&&M.setSelectedModel(m.getValue())):k instanceof pa?(M=new hb(B.get("selectDateAndTime","\u8bbe\u7f6e\u65e5\u671f\u65f6\u95f4"),m),M.setSelectedCallback(function(qa){k.setVarF7SelectorModel(qa);qa=Ma(qa);k&&k.setSuppliedValue(qa);k&&k.setSelectedValue(qa);k&&k.fireSelectedValueChanged()}),
M.showDialog(),k.getVarF7SelectorModel()?M.setSelectedModel(k.getVarF7SelectorModel()):(m=k.getSelectedValue())&&0<m.length&&(m=m[0])&&M.setSelectedModel(m.getValue())):k instanceof r&&(M=new Eb(B.get("selectTime","\u8bbe\u7f6e\u65f6\u95f4"),m),M.setSelectedCallback(function(qa){k.setVarF7SelectorModel(qa);var wa=new ValueTextModel;wa.setValue(qa);wa.setText(qa);k&&k.setSuppliedValue([wa]);k&&k.setSelectedValue([wa]);k&&k.fireSelectedValueChanged()}),M.showDialog(),k.getVarF7SelectorModel()?M.setSelectedModel(k.getVarF7SelectorModel()):
(m=k.getSelectedValue())&&0<m.length&&(m=m[0])&&M.setSelectedModel(m.getValue()))},fb=function(m,k,fa,z){z||(z=new Ea,z.addActionListener(function(M){Db(k,m)}),z=z.getJqUi(),fa.find(".extreport-runtime-filter-enabled").removeClass("extreport-runtime-filter-enabled"),fa.append(z))},bb=function(m){if(m)return m.getVariateType&&"macro_var"==m.getVariateType()}})();(function(){function w(r,da,A){var H=da?da:pa,t=Qa.RUNTIME==r?285:245,P,n,T,f=new Eb,q,c,B,la,g,U,F;var na=ha.get("publicCategory","\u516c\u5171\u76ee\u5f55");var a=ha.get("personalCategory","\u4e2a\u4eba\u76ee\u5f55");this.setOuterMessageCurtain=function(J){F=J};this.getWidth=function(){return 392};this.getHeight=function(){return t};this.getJqUi=function(){if(!P){Ea();var J=function(){if(e())A.snapGroupTypeName="B"==A.snapGroupTypeId?a:na,T.setText(A.snapName),q.doAutoSelected(A.snapGroupTypeName,
A.snapGroupTypeId),B.doAutoSelected(A.snapGroupName,A.snapGroupId),q.setEnable(!1);else if(void 0!=A.snapGroupTypeId&&void 0!=A.snapGroupId&&void 0!=A.snapGroupName&&void 0!=A.isHyperLink)A.snapGroupTypeName="B"==A.snapGroupTypeId?a:na,g.setOn(A.isHyperLink),q.doAutoSelected(A.snapGroupTypeName,A.snapGroupTypeId),B.doAutoSelected(A.snapGroupName,A.snapGroupId),q.setEnable(!0);else{if(c&&1<=c.length){var y=c[0];q.doAutoSelected(y.getName(),y.getId());1==c.length&&q.setEnable(!1)}(y=B.getArrFolderNode())&&
1<=y.length&&(y=y[0],B.doAutoSelected(y.getName(),y.getId()))}};E(q,function(){V(B,J)})}return P};var e=function(){return A.snapName&&A.snapGroupTypeName&&A.snapGroupTypeId&&A.snapGroupId&&A.snapGroupName},l=function(J){J=new ba(J,null);J.setPlaceholder(ha.get("selectPathType","\u8bf7\u9009\u62e9\u4fdd\u5b58\u76ee\u5f55\u7c7b\u578b"));J.setMaxHeight(118);J.getJqUi().css("background","white");return J},u=function(J){J=new ba(null,J);J.setPlaceholder(ha.get("selectPath","\u8bf7\u9009\u62e9\u4fdd\u5b58\u76ee\u5f55"));
J.setMaxHeight(118);J.getJqUi().css("background","white");return J},v=function(J){var y=[],O=[];if(!J)return O;for(O=0;O<J.length;O++){var Z=new x;Z.fromJsonObject(J[O]);y.push(Z)}return y},E=function(J,y){if(null==c){var O=H.createFacade(function(Z){c=v(Z);J.setArrFolderNode(c);y&&y()},function(Z,Ya){8099101==Z?H.getMessageCurtain().showPrompt(ha.get("querySnapCenterPermExp","\u67e5\u8be2\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u5f02\u5e38\u3002"),5E3):8099102==Z?H.getMessageCurtain().showPrompt(ha.get("noQuerySnapCenterPermExp",
"\u5f53\u524d\u7528\u6237\u6ca1\u6709\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u3002"),5E3):_super.getMessageCurtain().showPrompt(Ya,5E3);return!0});Qa.SNAP_SCHEDULE==r?O.setShowBlocking(!1):(O.setShowBlocking(!0),O.setBlockingJqUi(P));O.loadSnapGroupTypes(A.snapId)}else J.setArrFolderNode(c)},V=function(J,y){if(null==la){var O=H.createFacade(function(Z){la=v(Z);J.setArrFolderNode(la);y&&y()},function(Z,Ya){8099101==iErrorCode?H.getMessageCurtain().showPrompt(ha.get("querySnapCenterPermExp","\u67e5\u8be2\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u5f02\u5e38\u3002"),
5E3):8099102==iErrorCode?H.getMessageCurtain().showPrompt(ha.get("noQuerySnapCenterPermExp","\u5f53\u524d\u7528\u6237\u6ca1\u6709\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u3002"),5E3):_super.getMessageCurtain().showPrompt(Ya,5E3);return!0});Qa.SNAP_SCHEDULE==r?O.setShowBlocking(!1):(O.setShowBlocking(!0),O.setBlockingJqUi(P));O.loadSnapGroupInfo(A.snapId)}else J.setArrFolderNode(la)},Ea=function(){var J=0;P=$("<div>");n=$("<div>");n.addClass("publish-manage-left");if(Qa.RUNTIME==r||Qa.SNAP_CENTER==r){var y=
new Kb,O=y.getJqUi();y.setRequired(!0);y.setText(ha.get("snapName","\u5feb\u7167\u540d\u79f0"));O.attr("title",y.getText());T=new Nb;var Z=$("<div>");T.addEditedListener(function(za){clearTimeout(U);U=setTimeout(function(){var Za=T.getText();if(""!=Za){var vb=H.createFacade(function(Fb){Z.empty();Fb=Fb[T.getText()];if(null!=Fb&&0<Fb.length){f.setCustomItemPainter(function(Na,eb){Na.on("mousedown",function(Ja){T.setText(eb);Z.remove();Ja.stopPropagation()});Na.text(eb);Na.attr("title",eb)});f.setItemModels(Fb);
f.setSelecteds([Fb[0]]);Fb=f.getJqUi();var db=Ya.width(),wb=Ya.css("left"),Fa=Ya.position().top+Ya.height();Sa.layoutCtrl(Z,wb,Fa,db,122);Z.css("z-index","9999");Fb.css({width:db+"px",height:"122px"});Fb.find(".sa-ctrl-list-owner").css("height","100px");db=$("<div>");db.css({position:"absolute","z-index":"9999",color:"#c5c5c5"});db.text(ha.get("HistorySnapName","\u5386\u53f2\u5feb\u7167\u540d\u79f0"));db.css({right:"13px",top:"100px"});Fb.appendTo(Z);db.appendTo(Z);Z.appendTo(n)}else Z.remove()});
vb.setShowBlocking(!1);vb.getSnapNameByInputText(Za)}else Z.remove()},1E3)});T.addBlurListener(function(){Z.remove()});var Ya=T.getJqUi();Sa.layoutCtrl(O,15,J,115,23);Sa.layoutCtrl(Ya,130,J,215,23);O.appendTo(n);Ya.appendTo(n);J+=45}else J+=15;O=new Kb;y=O.getJqUi();e()||O.setRequired(!0);O.setText(ha.get("snapSavePathType","\u76ee\u5f55\u7c7b\u578b"));y.attr("title",O.getText());q=l(function(za){if(za&&za!=q.getLastTimeSelectedTailPathId()){var Za=[];$.extend(!0,Za,la);if(Za&&0<Za.length)if(za&&
0==za.indexOf("A")){for(za=0;za<Za.length;za++)"B"==Za[za].getType()&&(Za.splice(za,1),za--);Za.sort(function(vb,Fb){return Fb.getOrder()-vb.getOrder()});B.setArrFolderNode(Za);B.clearSelectedTreePath()}else if(za&&0==za.indexOf("B")){for(za=0;za<Za.length;za++)"A"==Za[za].getType()&&(Za.splice(za,1),za--);Za.sort(function(vb,Fb){return Fb.getOrder()-vb.getOrder()});B.setArrFolderNode(Za);B.clearSelectedTreePath()}}});O=q.getJqUi();Sa.layoutCtrl(y,15,J,115,23);Sa.layoutCtrl(O,130,J,215,23);y.appendTo(n);
O.appendTo(n);O=new Kb;y=O.getJqUi();O.setRequired(!0);O.setText(ha.get("snapSavePath","\u76ee\u5f55"));y.attr("title",O.getText());B=u(function(za){!q||q.getSelectedTreePath()&&q.getSelectedTreePath().getText()||(za.clearSelectedTreePath(),F.showPrompt(ha.get("selectPathType","\u8bf7\u9009\u62e9\u76ee\u5f55\u7c7b\u578b\u3002")))});O=B.getJqUi();J+=45;Sa.layoutCtrl(y,15,J,115,23);Sa.layoutCtrl(O,130,J,215,23);y.appendTo(n);O.appendTo(n);if(Qa.RUNTIME==r||Qa.SNAP_SCHEDULE==r){g=new Ia;g.setOn(!1);
y=g.getJqUi();O=new Kb(ha.get("saveSnapHyperLink","\u4fdd\u5b58\u8054\u67e5/\u8054\u52a8\u8bbe\u7f6e"));var ub=O.getJqUi();ub.attr("title",O.getText());J+=45;Sa.layoutCtrl(ub,15,J,115,23);Sa.layoutCtrl(y,130,J,31,23);ub.appendTo(n);y.appendTo(n)}n.appendTo(P)};this.getModelFromUI=function(){var J=new ta;Qa.SNAP_SCHEDULE!=r&&J.setSnapName($.trim(T.getText()));var y=B.getSelectedTreePath();J.setSaveSnapGroupPath(y.getValue());J.setSaveSnapGroupPathText(y.getText());J.setSaveSnapGroupName(B.getSelectedTailPathName());
J.setSaveSnapGroupId(B.getSelectedTailPathId());J.setSaveSnapGroupType(q.getSelectedTailPathId());Qa.RUNTIME==r?(J.setPageId(A.pageId),J.setPublishId(A.urlParams.publishId),y=g.isOn(),J.setIsHyperLink(y),J.setOldSnapId(A.snapId),J.setReportId(A.extReportId)):Qa.SNAP_CENTER==r?(J.setSnapId(A.snapId),J.setReportId(A.reportId)):Qa.SNAP_SCHEDULE==r&&(y=g.isOn(),J.setIsHyperLink(y));return J};this.checkUIInput=function(J){if(Qa.SNAP_SCHEDULE==r)if(q.getSelectedTreePath())if(B.getSelectedTreePath())J(!0);
else return ha.get("selectPath","\u8bf7\u9009\u62e9\u76ee\u5f55\u3002");else return ha.get("selectPathType","\u8bf7\u9009\u62e9\u76ee\u5f55\u7c7b\u578b\u3002");else{var y=$.trim(T.getText());if(null==y||0==$.trim(y).length)return ha.get("snapNameNotEmpty","\u8bf7\u8f93\u5165\u5feb\u7167\u540d\u79f0\u3002");if(50<y.length)return ha.get("snapNameTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002");if(oa.isValidString(y)){if(oa.isKeywords(y))return ha.get("isKeywords",'\u65e0\u6cd5\u4f7f\u7528"#1"\u4f5c\u4e3a\u540d\u79f0\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002').replace("#1",
y);if(q.getSelectedTreePath())if(B.getSelectedTreePath())J(!0);else return ha.get("selectPathWithPeriod","\u8bf7\u9009\u62e9\u76ee\u5f55\u3002");else return ha.get("selectPathType","\u8bf7\u9009\u62e9\u76ee\u5f55\u7c7b\u578b\u3002")}else return ha.get("invalidName","\u540d\u79f0\u53ea\u80fd\u7531\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002")}}}function h(){var r,da,A,H,t,P;this.setId=function(n){r=
n};this.getId=function(){return r};this.setName=function(n){da=n};this.getName=function(){return da};this.setType=function(n){A=n};this.getType=function(){return A};this.setParentId=function(n){H=n};this.getParentId=function(){return H};this.setParentNode=function(n){t=n};this.getParentNode=function(){return t};this.setOrder=function(n){P=n};this.getOrder=function(){return P}}function x(){h.call(this);var r=this,da=[],A,H;this.setChildren=function(t){da=t};this.getChildren=function(){return da};this.setIsOpenDir=
function(t){A=t};this.getIsOpenDir=function(){return A};this.getIsShow=function(){return H};this.setIsShow=function(t){H=t};this.toJsonObject=function(){var t={};t.children=da;return t};this.fromJsonObject=function(t){r.setName(t.name);r.setId(t.id);r.setType(t.type);r.setParentId(t.parentId);r.setOrder(t.order);r.setIsOpenDir(!0);if(t=t.children)for(var P=0;P<t.length;P++){var n=t[P];if(!n.children||n.children&&0==n.children.length){var T=new K;T.fromJsonObject(n);T.setParentNode(r);da.push(T)}else T=
new x,T.fromJsonObject(n),T.setParentNode(r),da.push(T)}}}function K(){h.call(this);var r=this;this.fromJsonObject=function(da){r.setName(da.name);r.setId(da.id);r.setParentId(da.parentId);r.setOrder(da.order)}}function ba(r,da){ja.call(this);var A=this,H=this.protectedMethod,t,P=[],n,T,f,q;this.getDropDownContent=function(){A.updateArrFolderNode();A.initTreeSelector();return t.getJqUi()};this.updateArrFolderNode=function(e){r&&r(e)};this.checkClearSelectedTreePath=function(e){da&&da(e)};this.clearSelectedTreePath=
function(){n=null;H.updateText(n?n.getText():"")};this.setSelectedTreePath=function(e){n=e;H.updateText(n?n.getText():"")};this.getSelectedTreePath=function(){return n};this.getSelectedTailPathName=function(){return T};this.getSelectedTailPathId=function(){return f};this.getLastTimeSelectedTailPathId=function(){return q};this.initTreeSelector=function(){if(P){t=new ib;t.setRootVisible(!1);t.setNodePainter(F);var e=t,l=e.setRoot,u=P,v=new x;v.setParentId(" ");v.setName("\u65b0\u589e\u76ee\u5f55");
v.setId(" ");v=c(v);la(v,u);l.call(e,v);t.hookLoadingHandler(U);t.addSelectingListener(na);t.getRoot().setExpanded(!0);t.setLineHeight(30);Sa.layoutCtrl(t.getJqUi(),0,1,"100%",4<P.length?120:30*P.length+2);t.getJqUi().css("border","1px solid rgba(138, 153, 170, 0.4)");t.getJqUi().css("background","white");t.getJqUi().appendTo($(document.body))}else return null};this.setArrFolderNode=function(e){P=e};this.getArrFolderNode=function(){return P};this.doAutoSelected=function(e,l){T=e;q=f;f=l;var u=new xa;
u.setValue(l);u.setText(e);n=u;H.updateText(n?n.getText():"");A.updateArrFolderNode(l);A.checkClearSelectedTreePath(A)};var c=function(e){var l=new ib.BranchNode;l.setUserObject(e);return l},B=function(e){var l=new ib.LeafNode;l.setUserObject(e);return l},la=function(e,l){if(l&&0<l.length)for(var u=0;u<l.length;u++){var v=l[u];v&&v instanceof x&&0<v.getChildren().length?g(e,v):e.addChild(B(v))}},g=function(e,l){var u=0<l.getChildren().length?c(l):B(l);e.addChild(u);e=l.getChildren();if(0!=e.length)for(l=
0;l<e.length;l++)e[l]&&e[l]instanceof x&&e[l].getChildren()?g(u,e[l]):u.addChild(B(e[l]))},U=function(e,l){setTimeout(function(){la(e);l()},500)},F=function(e,l){e.css("padding-left","4px");e.css("padding-right","4px");e.text(l.getUserObject().getName())},na=function(e,l){var u=l.getTreePath();l=e="";for(var v,E=1;E<u.length;E++)1<E&&(e+="/",l+="/"),v=u[E],e+=v.getUserObject().getName(),l+=v.getUserObject().getId();T=v.getUserObject().getName();q=f;f=v.getUserObject().getId();v=new xa;v.setValue(l);
v.setText(e);n=v;H.updateText(n?n.getText():"");H.doDropdown();A.updateArrFolderNode(l);A.checkClearSelectedTreePath(A)},a=200;this.setMaxHeight=function(e){a=e};this.getPopupHeight=function(){return null==P||0==P.length?22:Math.min(30*P.length+2,a+2)}}function ja(){var r=this,da,A,H,t,P,n=!0;this.setEnable=function(la){n=la;n||(H.hide(),A.css({color:"rgb(192, 192, 192)"}))};this.getDropDownContent=function(){throw Error("orrive me");};this.getPopupHeight=function(){throw Error("orrive me");};this.getJqUi=
function(){da||T();return da};this.setPlaceholder=function(la){T();"placeholder"in A[0]?A.attr("placeholder",la):(P&&P.remove(),P=$("<div>"),P.text(la),P.css({color:"#ccc","font-size":"12px"}),P.on("mousedown",function(g){A.focus()}),P.appendTo(r.getJqUi()),Sa.layoutCtrlWithLRTB(P,4,4,null,2,2,null),B())};var T=function(){if(!da){da=$("<div>");da.addClass("sa-ctrl-combobox");if(n)da.on("click",q);da.css("border-bottom","1px solid #ccc");A=$("<input readonly=readonly>");A.addClass("sa-ctrl-textfield-input");
A.css({color:"#666","font-size":"12px","text-overflow":"ellipsis",padding:"0px 16px 0px 4px"});A.appendTo(da);H=$("<div>");H.addClass("sa-ctrl-combobox-arrow sa-ctrl-combobox-arrow_enabled");H.appendTo(da);H.on("mouseenter",function(la){f(!0)});H.on("mouseleave",function(la){f(!1)});f(!1)}},f=function(la){var g=t?"arrow-up":"arrow-down";la&&(g+="_hover");Ob.background(H,g)},q=function(){if(n){if(t)$(document.body).off("mousedown",c),t.detach(),t=null;else{var la=$(document.body),g=t=$("<div>"),U=
$("<div>");U.addClass("sa-ctrl-common-border");U.appendTo(g);t.addClass("sa-qing-publish-dropdown-selector");r.getDropDownContent().appendTo(t);var F=r.getPopupHeight();t.css("z-index",999999);t.appendTo(la);var na=la.prop("clientHeight"),a=da.outerHeight();g=da.outerWidth();var e=[0,a-1];e=Sa.upwardCoordinate(da[0],e,la[0]);U=e[0];var l=e[1];F=0>F?Math.max(0,(na>>1)-a):F;l+F>na&&(e=[0,0],e=Sa.upwardCoordinate(da[0],e,la[0]),la=e[1]-F+1,0<=la&&(l=la));Sa.layoutCtrl(t,U,l,g,F);$(document.body).on("mousedown",
c)}f(!1)}},c=function(la){for(var g=$(document.body),U=$(la.target);U[0]!=g[0];){if(U[0]==da[0])return;U=U.parent()}for(U=$(la.target);U[0]!=g[0];){if(U[0]==t[0])return;U=U.parent()}q()},B=function(){P&&setTimeout(function(){P.css("display",A.val()?"none":"")},0)};this.protectedMethod={updateText:function(la){T();A.val(la?la:"");la&&A.attr("title",la);"placeholder"in A[0]||B()},doDropdown:q}}function xa(){var r=this,da,A,H,t;this.getIsShow=function(){return t};this.setIsShow=function(P){t=P};this.getValue=
function(){return da};this.setValue=function(P){da=P};this.getText=function(){return A};this.setText=function(P){A=P};this.getUserObject=function(){return H};this.setUserObject=function(P){H=P};this.toJsonObject=function(){var P={};P.value=da;P.text=A;return P};this.fromJsonObject=function(P){P&&(P.value&&r.setValue(P.value),P.text&&r.setText(P.text))}}function Xa(r,da,A,H){Q.call(this,r,da,A,H);var t=this.protectedMethod;this.loadSnapGroupTypes=function(P){t.remote("loadSnapGroupTypes",{snapId:P})};
this.loadSnapGroupInfo=function(P){t.remote("loadSnapGroupInfo",{snapId:P})};this.getSnapNameByInputText=function(P){t.remote("getSnapNameByInputText",{inputText:P})};this.saveSnapInfo=function(P){t.remote("saveSnapInfo",P)}}function oa(){}function ta(){var r,da,A,H,t,P,n,T,f,q,c,B,la;this.getSnapId=function(){return r};this.setSnapId=function(g){r=g};this.setOldSnapId=function(g){da=g};this.getOldSnapId=function(){return da};this.getReportId=function(){return A};this.setReportId=function(g){A=g};
this.getPageId=function(){return H};this.setPageId=function(g){H=g};this.getPublishId=function(){return t};this.setPublishId=function(g){t=g};this.getSnapName=function(){return P};this.setSnapName=function(g){P=g};this.isHyperLink=function(){return n};this.setIsHyperLink=function(g){n=g};this.getSaveSnapGroupName=function(){return T};this.setSaveSnapGroupName=function(g){T=g};this.getSaveSnapGroupType=function(){return q};this.setSaveSnapGroupType=function(g){q=g};this.getSaveSnapGroupId=function(){return f};
this.setSaveSnapGroupId=function(g){f=g};this.getSaveSnapGroupPath=function(){return c};this.setSaveSnapGroupPath=function(g){c=g};this.getSaveSnapGroupPathText=function(){return B};this.setSaveSnapGroupPathText=function(g){B=g};this.getForceOverwrite=function(){return la};this.setForceOverwrite=function(g){la=g};this.fromJsonObject=function(g){r=g.snapId;H=g.pageId;t=g.publishId;P=g.snapName;n=g.isHyperLink;T=g.saveSnapGroupName;q=g.saveSnapGroupType;f=g.saveSnapGroupId;c=g.saveSnapGroupPath;B=g.saveSnapGroupPathText;
A=g.reportId;la=g.forceOverwrite};this.toJsonObject=function(){var g={};g.snapId=r;g.oldSnapId=da;g.pageId=H;g.publishId=t;g.snapName=P;g.isHyperLink=n;g.saveSnapGroupName=T;g.saveSnapGroupType=q;g.saveSnapGroupId=f;g.saveSnapGroupPath=c;g.saveSnapGroupPathText=B;g.reportId=A;g.forceOverwrite=la;return g}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport=
{});"undefined"==typeof com.kingdee.bos.extreport.snapcenter&&(com.kingdee.bos.extreport.snapcenter={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter.common&&(com.kingdee.bos.extreport.snapcenter.common={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter.common.ui&&(com.kingdee.bos.extreport.snapcenter.common.ui={});var Pa=com.kingdee.bos.extreport.snapcenter.common.ui,Qa={};Pa.SaveSnapDialog=function(r,da,A){hb.call(this);var H=this,t=this.protectedMethod,P=pa,n=[],T=new w(r,
P,A),f;(function(){t.setTitle(da);H.setSize(T.getWidth(),T.getHeight());f=t.getMessageCurtain();T.setOuterMessageCurtain(t.getMessageCurtain());t.setContentPaneCreator(function(){return T.getJqUi()});t.setClosingChecker(function(g){q(g)},!0);t.setClosingAction(function(){})})();this.addSuccessCallback=function(g){n.push(g)};var q=function(g){var U=T.checkUIInput(function(F){F?B(g):g(F)});U&&(t.getMessageCurtain().showPrompt(U,5E3),g(!1))},c={8099101:ha.get("querySnapCenterPermExp","\u67e5\u8be2\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u5f02\u5e38\u3002"),
8099102:ha.get("noQuerySnapCenterPermExp","\u5f53\u524d\u7528\u6237\u6ca1\u6709\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u3002"),8099103:ha.get("snapNameNotEmpty","\u5feb\u7167\u540d\u79f0\u4e3a\u7a7a\u3002"),8099104:ha.get("snapNameTooLong","\u5feb\u7167\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"),8099105:ha.get("invalidName","\u540d\u79f0\u53ea\u80fd\u7531\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002"),
8099106:ha.get("selectPath","\u76ee\u5f55\u4e3a\u7a7a\u3002"),8099107:ha.get("reportNotFound","\u8be5\u62a5\u8868\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),8099108:ha.get("userNotFound","\u672a\u627e\u5230\u7528\u6237\u3002"),8099109:ha.get("snapGroupNotFound","\u76ee\u5f55\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),8099110:ha.get("sameSnapNameExist","\u76f8\u540c\u5feb\u7167\u540d\u79f0\u5df2\u5b58\u5728\u3002"),8099112:ha.get("checkReportPermExp","\u68c0\u67e5\u7528\u6237\u662f\u5426\u62e5\u6709\u4fdd\u5b58\u5feb\u7167\u6743\u9650\u5f02\u5e38\u3002"),
8099113:ha.get("noReportPerm","\u5f53\u524d\u7528\u6237\u6ca1\u6709\u4fdd\u5b58\u5feb\u7167\u6743\u9650\u3002"),8099115:ha.get("checkSnapCenterModulePermExp","\u68c0\u6d4b\u5feb\u7167\u4e2d\u5fc3\u6a21\u5757\u8bb8\u53ef\u5f02\u5e38\u3002"),8099116:ha.get("noSnapCenterModulePerm","\u5f53\u524d\u7528\u6237\u6ca1\u6709\u5feb\u7167\u4e2d\u5fc3\u6a21\u5757\u8bb8\u53ef\u3002"),8099117:ha.get("isKeywords",'\u65e0\u6cd5\u4f7f\u7528"#1"\u4f5c\u4e3a\u540d\u79f0\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002')},
B=function(g,U){var F=T.getModelFromUI();U&&F.setForceOverwrite(!0);U=P.createFacade(function(na){F.setSnapId(na);if(F.getPublishId()||"A"==F.getSaveSnapGroupType()&&A.snapId){na=com.kingdee.bos.qing.behavior.BehaviorManager;var a=Pb.createUUID();F.getPublishId()?na.initAccessRecordParams(F.getPublishId(),a,na.SourceType.QING_PUBLISH,na.AppType.QING_RPT):na.initAccessRecordParams(A.snapId,a,na.SourceType.QING_SNAPSHOT,na.AppType.QING_RPT);na.recordResourceOperation(na.OperationType.QING_SNAPSHOT_SAVE)}if(!n||
0==n.length)f&&f.showSuccess(ha.get("saveSnapSuccess","\u4fdd\u5b58\u5feb\u7167\u6210\u529f\u3002"));else if(n&&0<n.length)for(na=0;na<n.length;na++)(a=n[na])&&a(F);g(!0)},function(na,a){if(na){if(Qa.RUNTIME==r&&8099110==na)return a=ha.get("sameSnapNameConfirmMessage","\u5feb\u7167\u540d\u79f0\u5df2\u5b58\u5728\uff0c\u786e\u5b9a\u8986\u76d6\u5417\uff1f"),la(a,g),!0;na=c[na];f.showPrompt(na?na:a,5E3);g(!1);return!0}g(!1);return!1});U.setShowBlocking(!1);U.saveSnapInfo(F.toJsonObject())},la=function(g,
U){var F=$(document.body),na=$("<div class='sa-ctrl-common-modallayer'>");na.appendTo(F);var a=new ab(na),e=ha.get("operateConfirm","\u64cd\u4f5c\u786e\u8ba4");a.setTitle(e);e=F.prop("clientWidth");var l=F.prop("clientHeight");a.setBounds(e-300>>1,l-200>>1,300,200);a.setToolbarVisible(!1);e=$("<div>");l=$("<div>");var u=$("<span>");u.text(g);u.attr("title",g);u.css({"text-align":"center",display:"inline-block","margin-top":"5px","line-height":"23px","font-size":"14px","text-overflow":"ellipsis",overflow:"hidden"});
Sa.layoutCtrl(l,null,null,300,200);Sa.layoutCtrl(u,0,25,300,60);u.appendTo(l);l.appendTo(e);a.setContent(e);a.addClosingListener(function(v,E){E?B(U,!0):U(!1);v.destroy();na.remove();return!0});a.showFooterPane();a.show();na.appendTo(F)}};Pa.SnapContentPanel=w;Pa.SaveSnapSourceType=Qa;Pa.ExtReportSnapModel=ta;Pa.StringUtil=oa;Pa.ValueTextPair=xa;Qa.RUNTIME=1;Qa.SNAP_CENTER=2;Qa.SNAP_SCHEDULE=3;var Pb,Sa,hb,ib,Eb,Ia,Kb,Nb,Ob,ab,Q,aa,ha,pa;(function(){var r=com.kingdee.bos.qing.common;Pb=r.Util;Sa=
r.DomUtil;r=com.kingdee.bos.qing.ui.component;hb=r.AbstractModalDialog;ib=r.Tree;Eb=r.List;Ia=r.SwitchButton;Kb=r.Label;Nb=r.TextField;Ob=r.Icons;ab=r.Dialog;r=com.kingdee.bos.qing.framework.common;Q=r.AbstractFacade;aa=r.AbstractRemoteCall;ha=r.MultilanguageManager.createPackageAccessor(Pa);pa=new function(){function da(){aa.call(this);var t;this.getRemoteUrl=function(){return t};this.setRemoteUrl=function(P){t=P}}var A;this.createFacade=function(t,P,n){var T=H();return new Xa(T,t,function(f,q){return P?
P(f,q):!1},n)};var H=function(){if(!A){var t=Pb.decodeParamFromUrl(window.location.search,"path");t=(t?t:"/ierp")+"/qing_rpt/runtime.do";A=new da;A.setRemoteUrl(t)}return A}}})();oa.isValidString=function(r){return/^([\u4E00-\u9FA5a-zA-Z_])[\u4E00-\u9FA5a-zA-Z0-9_]{0,}$/.test(r)};oa.isKeywords=function(r){return/\b(null|true|false)\b/i.test(r)}})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.snapschedule&&(com.kingdee.bos.extreport.snapschedule={});"undefined"==typeof com.kingdee.bos.extreport.snapschedule.common&&(com.kingdee.bos.extreport.snapschedule.common={});var w=com.kingdee.bos.extreport.snapschedule.common;
w.Facade=function(xa,Xa,oa,ta){h.call(this,xa,Xa,oa,ta);var Pa=this.protectedMethod;this.saveScheduleInfo=function(Qa){Qa={model:JSON.stringify(Qa)};Pa.remote("saveScheduleInfo",Qa)};this.deleteSchedule=function(Qa){Qa={scheduleIds:JSON.stringify(Qa)};Pa.remote("deleteSchedule",Qa)};this.operateSchedule=function(Qa,Pb){Qa={scheduleIds:JSON.stringify(Qa),enable:Pb};Pa.remote("operateSchedule",Qa)};this.loadScheduleInfo=function(Qa,Pb,Sa,hb){Pa.remote("loadScheduleInfo",{scheduleId:Qa,targetPage:Pb,
pageSize:Sa,searchText:hb})};this.loadAllScheduleInfoBySearch=function(Qa,Pb){Pa.remote("loadAllScheduleInfoBySearch",{scheduleId:Qa,searchText:Pb})};this.loadCodingRuleInfo=function(Qa){Pa.remote("loadCodingRuleInfo",{scheduleId:Qa})};this.getScheduleNameByInputText=function(Qa){Pa.remote("getScheduleNameByInputText",{inputText:Qa})};this.getAppMenuTreeIncludePermissionForExtreport=function(){Pa.remote("getAppMenuTreeIncludePermissionForExtreport",{publishTargetType:ba.APPMENU})};this.loadAnalysisCenterGroupExtReport=
function(Qa){Pa.remote("loadAnalysisCenterGroupExtReport",{isPresetSnap:Qa})};this.loadAllExtReportInfos=function(Qa){Pa.remote("loadAllExtReportInfos",{isPreset:Qa})};this.getReportFilter=function(Qa,Pb){Pa.remote("getReportFilter",{reportId:Qa,publishId:Pb})};this.loadFilterParam=function(Qa){Pa.remote("loadFilterParam",{scheduleId:Qa})};this.cronExpression=function(Qa){Pa.remote("cronExpression",{cron:Qa})};this.getDelaySuppliedValue=function(Qa){Pa.remote("getDelaySuppliedValue",Qa)};this.cleanReportRuntimeCache=
function(Qa){Qa={pageIds:JSON.stringify(Qa)};Pa.remote("cleanReportRuntimeCache",Qa)};this.convertFilterSchemeParam=function(Qa,Pb,Sa,hb,ib){Pa.remote("convertFilterSchemeParam",{flag:Qa,pageId:Pb,schemeName:Sa,schemeContent:hb,scheduleId:ib})};this.loadSystemDateTypes=function(){Pa.remote("loadSystemDateTypes",{})};this.getCodingRuleResultEg=function(Qa){Qa={model:JSON.stringify(Qa.toJsonObject())};Pa.remote("getCodingRuleResultEg",Qa)};this.getScheduleNotifyUserRoles=function(Qa){Pa.remote("getScheduleNotifyUserRoles",
{scheduleId:Qa})};this.checkPresetPermission=function(){Pa.remote("checkPresetPermission",{})};this.executeSnapSchedule=function(Qa){Pa.remote("executeSnapSchedule",{scheduleId:Qa})};this.getSnapScheduleResourceDetail=function(Qa,Pb,Sa,hb,ib,Eb,Ia,Kb,Nb){Qa={startDateTimeStamp:Qa,endDateTimeStamp:Pb,executeState:Sa,scheduleType:hb,searchText:ib,sortField:Eb,sortOrder:Ia,targetPage:Kb,pageSize:Nb,timeZone:(new Date).getTimezoneOffset()/60};Pa.remote("getSnapScheduleResourceDetail",Qa)};this.loadSnapScheduleExceptionLog=
function(Qa){Pa.remote("loadSnapScheduleExceptionLog",{bizId:Qa})}};w.RemoteImpl=function(){x.call(this);var xa;this.getRemoteUrl=function(){return xa};this.setRemoteUrl=function(Xa){xa=Xa}};var h,x,K,ba;(function(){var xa=com.kingdee.bos.qing.framework.common;h=xa.AbstractFacade;x=xa.AbstractRemoteCall;K=xa.AbstractIcons;xa=com.kingdee.bos.qing.publish.model;ba=xa.PublishTargetType})();var ja=new function(){K.call(this);var xa=this.protectedMethod;this.protectedInit=function(Xa,oa){Xa=com.kingdee.bos.extreport.snapschedule.ComboIcon;
if(!Xa)throw Error("com.kingdee.bos.extreport.snapschedule.ComboIcon not found.");Xa.define(oa,"no-data");xa.registIcon(0,0,"no-data");Xa.define(oa,"icon_open_tips_background");oa.setStartPosition(0,0);oa.setGap(0);oa.setIconSize(264,192);xa.registIcon(0,0,"icon_open_tips_background");Xa.define(oa,"extreport");oa.setGap(1);oa.setStartPosition(207,78);oa.setIconSize(65,78);xa.registIcon(0,0,"icon-question");oa.setFilePath("qingrpt/snapcenter/skin/ierp/res/view_member.png");oa.setGap(1);oa.setStartPosition(0,
117);oa.setIconSize(16,16);xa.registIcon(1,4,"view_member");xa.registIcon(0,4,"view_member_hover");oa.setGap(1);oa.setStartPosition(0,151);oa.setIconSize(170,98);xa.registIcon(0,0,"icon-empty")}};w.Icons=ja;ja=new function(){var xa;this.hookCollector=function(Xa){xa=Xa};this.occur=function(Xa,oa){try{xa&&xa(Xa,oa)}catch(ta){window.console&&console.warn(ta)}}};ja.CREATE_SNAP_SCHEDULE_TYPE="ext-create-snap-schedule-type";ja.UPDATE_SNAP_SCHEDULE_TYPE="ext-update-snap-schedule-type";ja.DELETE_SNAP_SCHEDULE_TYPE=
"ext-delete-snap-schedule-type";ja.ENABLE_SNAP_SCHEDULE_TYPE="ext-enable-snap-schedule-type";ja.DISABLE_SNAP_SCHEDULE_TYPE="ext-disable-snap-schedule-type";w.UserOperationReporter=ja})();(function(){function w(Sa,hb,ib){this.toString=function(){return Xa.get(hb,ib)};this.getValue=function(){return Sa}}function h(Sa,hb,ib){this.toString=function(){return Xa.get(hb,ib)};this.getValue=function(){return Sa};this.isAptoticValue=function(){return 0==Sa};this.isSysVar=function(){return 1==Sa};this.isSysDate=function(){return 2==Sa};this.isSerialNum=function(){return 3==Sa}}function x(){var Sa,hb;this.setScheduleId=function(ib){Sa=ib};this.getScheduleId=function(){return Sa};this.setCodingRuleEntryInfoList=
function(ib){hb=ib};this.getCodingRuleEntryInfoList=function(){return hb};this.copy=function(){var ib=new x;ib.setScheduleId(Sa);if(hb){for(var Eb=[],Ia=0;Ia<hb.length;Ia++)Eb.push(hb[Ia].copy());ib.setCodingRuleEntryInfoList(Eb)}return ib};this.fromJsonObject=function(ib){Sa=ib.scheduleId;hb=[];ib=ib.codingRuleEntryInfoList;for(var Eb=0;Eb<ib.length;Eb++){var Ia=new K;Ia.fromJsonObject(ib[Eb]);hb.push(Ia)}};this.toJsonObject=function(){var ib={};ib.scheduleId=Sa;for(var Eb=[],Ia=0;Ia<hb.length;Ia++){var Kb=
hb[Ia].toJsonObject();Eb.push(Kb)}ib.codingRuleEntryInfoList=Eb;return ib}}function K(){var Sa,hb,ib,Eb,Ia,Kb,Nb,Ob=-1;this.setId=function(ab){Sa=ab};this.getId=function(){return Sa};this.setType=function(ab){hb=ab};this.getType=function(){return hb};this.setIndex=function(ab){ib=ab};this.getIndex=function(){return ib};this.setPrefix=function(ab){Eb=ab};this.getPrefix=function(){return Eb};this.setSuffix=function(ab){Ia=ab};this.getSuffix=function(){return Ia};this.setSeparator=function(ab){Kb=ab};
this.getSeparator=function(){return Kb};this.setAttributeValue=function(ab){Nb=ab};this.getAttributeValue=function(){return Nb};this.setSerialNumber=function(ab){Ob=ab};this.getSerialNumber=function(){return Ob};this.copy=function(){var ab=new K;ab.setId(Sa);ab.setType(hb);ab.setIndex(ib);ab.setAttributeValue(Nb);ab.setPrefix(Eb);ab.setSuffix(Ia);ab.setSeparator(Kb);ab.setSerialNumber(Ob);return ab};this.fromJsonObject=function(ab){Sa=ab.id;hb=ab.type;ib=ab.index;Eb=ab.prefix;Ia=ab.suffix;Kb=ab.separator;
Nb=ab.attributeValue;Ob=ab.serialNumber};this.toJsonObject=function(){var ab={};ab.id=Sa;ab.type=hb;ab.index=ib;ab.prefix=Eb;ab.suffix=Ia;ab.separator=Kb;ab.attributeValue=Nb;ab.serialNumber=Ob;return ab}}function ba(){var Sa,hb,ib,Eb,Ia,Kb,Nb,Ob,ab,Q,aa,ha,pa,r,da,A,H,t,P,n,T,f,q,c,B,la,g,U,F,na;this.setScheduleId=function(a){Sa=a};this.getScheduleId=function(){return Sa};this.setScheduleName=function(a){hb=a};this.getScheduleName=function(){return hb};this.setPublishId=function(a){ib=a};this.getPublishId=
function(){return ib};this.setPublishName=function(a){Eb=a};this.getPublishName=function(){return Eb};this.setPublishCreator=function(a){Ia=a};this.getPublishCreator=function(){return Ia};this.setPublishPath=function(a){Kb=a};this.getPublishPath=function(){return Kb};this.setPublishPathDisplayText=function(a){Nb=a};this.getPublishPathDisplayText=function(){return Nb};this.setPublishAuthType=function(a){Ob=a};this.getPublishAuthType=function(){return Ob};this.setPublishAuthWarningMsg=function(a){ab=
a};this.getPublishAuthWarningMsg=function(){return ab};this.setReportId=function(a){Q=a};this.getReportId=function(){return Q};this.setReportName=function(a){aa=a};this.getReportName=function(){return aa};this.setReportCreator=function(a){ha=a};this.getReportCreator=function(){return ha};this.setReportModifier=function(a){pa=a};this.getReportModifier=function(){return pa};this.setSchedule=function(a){P=a};this.getSchedule=function(){return P};this.setOverwriteSnap=function(a){H=a};this.getOverwriteSnap=
function(){return H};this.setSaveHyperLink=function(a){t=a};this.getSaveHyperLink=function(){return t};this.getSnapGroupType=function(){return r};this.setSnapGroupType=function(a){r=a};this.setSnapGroupId=function(a){da=a};this.getSnapGroupId=function(){return da};this.setSnapGroupName=function(a){A=a};this.getSnapGroupName=function(){return A};this.setPlatformName=function(a){n=a};this.getPlatformName=function(){return n};this.setEnableSchedule=function(a){T=a};this.getEnableSchedule=function(){return T};
this.setNotifyStrategy=function(a){f=a};this.getNotifyStrategy=function(){return f};this.getCreatorId=function(){return q};this.setCreatorId=function(a){q=a};this.setCreateDate=function(a){c=a};this.getCreateDate=function(){return c};this.setCreateFormatDate=function(a){B=a};this.getCreateFormatDate=function(){return B};this.setModifierId=function(a){la=a};this.getModifierId=function(){return la};this.setModifyDate=function(a){g=a};this.getModifyDate=function(){return g};this.setModifyFormatDate=
function(a){U=a};this.getModifyFormatDate=function(){return U};this.setSpaceType=function(a){F=a};this.getSpaceType=function(){return F};this.setSpaceId=function(a){na=a};this.getSpaceId=function(){return na};this.copy=function(){var a=new ba;a.setScheduleId(Sa);a.setScheduleName(hb);a.setPublishId(ib);a.setPublishName(Eb);a.setPublishPath(Kb);a.setPublishPathDisplayText(Nb);a.setPublishCreator(Ia);a.setPublishAuthType(Ob);a.setPublishAuthWarningMsg(ab);a.setReportId(Q);a.setReportName(aa);a.setReportCreator(ha);
a.setReportModifier(pa);a.setSchedule(P.copy());a.setOverwriteSnap(H);a.setSaveHyperLink(t);a.setSnapGroupType(r);a.setSnapGroupId(da);a.setSnapGroupName(A);a.setPlatformName(n);a.setEnableSchedule(T);a.setNotifyStrategy(f);a.setCreatorId(q);a.setCreateDate(c);a.setCreateFormatDate(B);a.setModifierId(la);a.setModifyDate(c);a.setModifyFormatDate(B);a.setSpaceType(F);a.setSpaceId(na);return a};this.fromJsonObject=function(a){Sa=a.scheduleId;hb=a.scheduleName;ib=a.publishId;Eb=a.publishName;Kb=a.publishPath;
Nb=a.publishPathDisplayText;Ia=a.publishCreator;Ob=a.publishAuthType;ab=a.publishAuthWarningMsg;Q=a.reportId;aa=a.reportName;ha=a.reportCreator;pa=a.reportModifier;P=new xa;P.fromJsonObject(a.schedule);H=a.overwriteSnap;t=a.saveHyperLink;r=a.snapGroupType;da=a.snapGroupId;A=a.snapGroupName;n=a.platformName;T=a.enableSchedule;f=a.notifyStrategy;q=a.creatorId;c=a.createDate;B=a.createFormatDate;la=a.modifierId;U=a.modifyFormatDate;F=a.spaceType;na=a.spaceId}}"undefined"==typeof com&&(com={});"undefined"==
typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.snapschedule&&(com.kingdee.bos.extreport.snapschedule={});"undefined"==typeof com.kingdee.bos.extreport.snapschedule.model&&(com.kingdee.bos.extreport.snapschedule.model={});var ja=com.kingdee.bos.extreport.snapschedule.model;ja.ScheduleInfoModel=function(){var Sa,hb,ib,Eb,Ia,Kb,Nb,
Ob,ab,Q,aa,ha,pa,r,da,A=[],H=[],t,P,n,T;this.setId=function(f){Sa=f};this.getId=function(){return Sa};this.setScheduleName=function(f){hb=f};this.getScheduleName=function(){return hb};this.setPublishId=function(f){ib=f};this.getPublishId=function(){return ib};this.setPublishName=function(f){Eb=f};this.getPublishName=function(){return Eb};this.setReportId=function(f){Ia=f};this.getReportId=function(){return Ia};this.setReportName=function(f){Kb=f};this.getReportName=function(){return Kb};this.setFilterParam=
function(f){Nb=f};this.getFilterParam=function(){return Nb};this.setSchedule=function(f){Ob=f};this.getSchedule=function(){return Ob};this.setOverwriteSnap=function(f){ab=f};this.getOverwriteSnap=function(){return ab};this.setSaveHyperLink=function(f){Q=f};this.getSaveHyperLink=function(){return Q};this.setSnapGroupType=function(f){aa=f};this.getSnapGroupType=function(){return aa};this.setSnapGroupId=function(f){ha=f};this.getSnapGroupId=function(){return ha};this.setSnapGroupName=function(f){pa=
f};this.getSnapGroupName=function(){return pa};this.setCodingRuleInfo=function(f){r=f};this.getCodingRuleInfo=function(){return r};this.getNotifyStrategy=function(){return da};this.setNotifyStrategy=function(f){da=f};this.getUsers=function(){return A};this.setUsers=function(f){A=f};this.getRoles=function(){return H};this.setRoles=function(f){H=f};this.setEnableSchedule=function(f){t=f};this.getEnableSchedule=function(){return t};this.setPlatformName=function(f){P=f};this.getPlatformName=function(){return P};
this.setCreatorId=function(f){n=f};this.getCreatorId=function(){return n};this.setCreateDate=function(f){T=f};this.getCreateDate=function(){return T};this.fromJsonObject=function(f){Sa=f.id;hb=f.scheduleName;ib=f.publishId;Eb=f.publishName;Ia=f.reportId;Kb=f.reportName;Nb=f.filterParam;Ob=new xa;Ob.fromJsonObject(f.schedule);ab=f.overwriteSnap;Q=f.saveHyperLink;aa=f.snapGroupType;ha=f.snapGroupId;pa=f.snapGroupName;r=new x;r.fromJsonObject(f.codingRuleInfo);da=f.notifyStrategy;t=f.enableSchedule;
P=f.platformName;n=f.creatorId;T=f.createDate};this.toJsonObject=function(){var f={};f.id=Sa;f.scheduleName=hb;f.publishId=ib;f.publishName=Eb;f.reportId=Ia;f.reportName=Kb;f.filterParam=Nb;f.schedule=Ob.toJsonObject();f.overwriteSnap=ab;f.saveHyperLink=Q;f.snapGroupType=aa;f.snapGroupId=ha;f.snapGroupName=pa;f.codingRuleInfo=r.toJsonObject();f.notifyStrategy=da;for(var q=[],c=0;c<A.length;c++)q.push(A[c].toJsonObject());f.users=q;q=[];for(c=0;c<H.length;c++)q.push(H[c].toJsonObject());f.roles=q;
f.enableSchedule=t;f.platformName=P;f.creatorId=n;f.createDate=T;return f}};ja.CodingRuleInfoModel=x;ja.CodingRuleEntryInfoModel=K;ja.ScheduleVOModel=ba;ja.FilterSchemeModel=function(){var Sa,hb,ib,Eb;this.setCaption=function(Ia){Sa=Ia};this.getCaption=function(){return Sa};this.setValue=function(Ia){hb=Ia};this.getValue=function(){return hb};this.setIsInvalid=function(Ia){ib=Ia};this.getIsInvalid=function(){return ib};this.setShareStrategy=function(Ia){Eb=Ia};this.getShareStrategy=function(){return Eb};
this.fromJsonObject=function(Ia){Sa=Ia.caption;hb=Ia.value;ib=Ia.isInvalid;Eb=Ia.shareStrategy};this.toJsonObject=function(){var Ia={};Ia.caption=Sa;Ia.value=hb;Ia.isInvalid=ib;Ia.shareStrategy=Eb;return Ia}};var xa,Xa,oa={},ta={},Pa={},Qa={},Pb={};oa.TYPE_ALL="1";oa.TYPE_SUCCESS="2";oa.TYPE_FAIL="3";ta.OVERWRITE="1";ta.IGNORE="0";Pa.YES="1";Pa.NO="0";Qa.YES="1";Qa.NO="0";Pb.AUTH="true";Pb.NO_AUTH="false";ja.ScheduleNotifyStrategy=oa;ja.OverwriteSnapType=ta;ja.SaveHyperLinkType=Pa;ja.EnableScheduleType=
Qa;ja.PublishAuthType=Pb;ja.CodingRuleItemModel=h;ja.ScheduleNotifyStrategyModel=w;(function(){Sa=com.kingdee.bos.qing.framework.common;Xa=Sa.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.snapschedule);var Sa=com.kingdee.bos.qing.schedule;xa=Sa.QingSchedule})();w.SUPPORTED_STRATEGY_TYPE=[new w(oa.TYPE_ALL,"notifyAll","\u59cb\u7ec8\u901a\u77e5"),new w(oa.TYPE_SUCCESS,"notifyOnSuccess","\u4ec5\u6210\u529f\u65f6\u901a\u77e5"),new w(oa.TYPE_FAIL,"notifyOnFail","\u4ec5\u5931\u8d25\u65f6\u901a\u77e5")];
w.getScheduleNotifyStrategyModelByType=function(Sa){for(var hb=0;hb<w.SUPPORTED_STRATEGY_TYPE.length;hb++)if(w.SUPPORTED_STRATEGY_TYPE[hb].getValue()==Sa)return w.SUPPORTED_STRATEGY_TYPE[hb];return null};h.SUPPORTED_RULE_TYPE=[new h(0,"aptoticValue","\u56fa\u5b9a\u503c"),new h(1,"sysVarValue","\u7cfb\u7edf\u9884\u8bbe\u53d8\u91cf"),new h(2,"sysDate","\u7cfb\u7edf\u65e5\u671f"),new h(3,"serialNum","\u6d41\u6c34\u53f7")];h.getCodingRuleItemModelByType=function(Sa){for(var hb=0;hb<h.SUPPORTED_RULE_TYPE.length;hb++)if(h.SUPPORTED_RULE_TYPE[hb].getValue()==
Sa)return h.SUPPORTED_RULE_TYPE[hb];return null}})();(function(){function w(){function d(Ba){KTDefaultCellRender.call(this,Ba);var lb=this,ia=this.paintCellUI;this.paintCellUI=function(Aa,Ka){var I=lb.getCurrentRowIdx(),S=lb.getCurrentRow(),ma=lb.getCurrentColIdx(),Ga=S.getUserObject();if(I<f.getHeadRowCount())ia(Aa,Ka),0==ma&&1==I&&(S=L&&L.isChecked()?!0:!1,L=new ub,L.setChecked(S),L.addCheckedListener(function(Ib,Sb){if(Sb){if(Sb=Ib.isChecked())for(var Tb in G)ua[Tb]=1,N[Tb]=G[Tb].getUserObject(),G[Tb].setChecked(Sb);else for(Tb in G)delete ua[Tb],
delete N[Tb],G[Tb].setChecked(Sb);zb(Ib)}}),L.addCheckedListener(zb),Ka=L.getJqUi(),Ka.addClass("extreport-schedule-center-table-checkbox"),Ka.appendTo(Aa));else if(0==ma){Ka=Ga.getScheduleId();I=new ub;S=!1;if(mb){ma=Object.keys(ua);for(var Oa=0;Oa<ma.length;Oa++)if(Ka===ma[Oa]){S=!0;break}}else S=(S=G[Ka])&&S.isChecked();I.setChecked(S);I.setUserObject(Ga);I.addCheckedListener(zb);I.addCheckedListener(function(Ib,Sb){if(Sb){Sb=Ib.isChecked();var Tb=Ib.getUserObject().getScheduleId();G[Tb].setChecked(Sb);
if(Sb){ua[Tb]=1;N[Tb]=Ib.getUserObject();zb(Ib);for(var ac in G)if(!G[ac].isChecked())return}else delete ua[Tb],delete N[Tb],zb(Ib);L.setChecked(Sb)}});G[Ka]=I;Ka=I.getJqUi();Ka.addClass("extreport-schedule-center-table-checkbox");Ka.appendTo(Aa)}else if(2==ma)Ka=new Za,Ka.addStateChangeListener(function(Ib,Sb,Tb){Sb&&Wa&&Wa(Ga.getScheduleId(),Tb?k.YES:k.NO)}),Ka.setOn(k.YES==Ga.getEnableSchedule()?!0:!1),Ka=Ka.getJqUi(),Ka.addClass("extreport-schedule-center-table-checkbox"),Ka.appendTo(Aa);else if(3==
ma){var xb=Ga.getScheduleId();Ka=new vb(c.get("executeImmediately","\u7acb\u5373\u6267\u884c"));Ka.addActionListener(function(Ib){var Sb=Ga.getScheduleName();Ha&&Ha(Ib,xb,Sb)});I=Ka.getJqUi();I.addClass("extreport-schedule-center-execute");I.appendTo(Aa);D[xb]&&(Ka.setEnabled(!1),Ka.setText(c.get("scheduleExecuting","\u6b63\u5728\u6267\u884c...")))}else yb(Aa,ma,Ga)};var sa=function(Aa,Ka){var I=q.createWarning();I.attr("title",Ka);I.addClass("extreport-schedule-center-warning-icon");I.appendTo(Aa)},
yb=function(Aa,Ka,I){var S=!1,ma="";switch(Ka){case 1:var Ga=I.getScheduleName();break;case 4:I.getPublishId()?Ga=I.getPublishPathDisplayText()+I.getPublishName():(S=!0,Ga=ma=c.get("publishNotExist","\u53d1\u5e03\u8bb0\u5f55\u5df2\u88ab\u5220\u9664"));break;case 5:if((Ga=I.getPublishCreator())&&"0"==I.getSpaceType()){var Oa=$("<div>");Oa.attr("title",c.get("viewSpaceMember","\u67e5\u770b\u534f\u4f5c\u7a7a\u95f4\u6210\u5458"));Oa.on("click",{oTableRow:I},Gb);eb.backgroundWithHover(Oa,"view_member");
Oa.addClass("snap-schedule-collaboration-member");Oa.hide();Oa.appendTo(Aa);I=$(Aa);I.on("mouseenter",function(){Oa.show()});I.on("mouseleave",function(){Oa.hide()})}break;case 6:I.getPublishId()&&!I.getReportId()?(S=!0,Ga=ma=c.get("sourceNoExist","\u62a5\u8868\u5df2\u88ab\u5220\u9664")):Ga=I.getReportName();break;case 7:Ga=I.getReportModifier();break;case 8:Ga=I.getPlatformName();break;case 9:Ga=I.getCreateFormatDate();break;case 10:Ga=I.getModifyFormatDate()}S&&sa(Aa,ma);S=$("<div>");S.addClass("extreport-schedule-center-table-cell-text");
1==Ka||6==Ka?tb(S,Y,Ga):(S.attr("title",Ga),S.text(Ga));S.appendTo(Aa)},Gb=function(Aa){var Ka=Aa.data.oTableRow;Aa=Ka.getSpaceId();Ka=Ka.getPublishCreator();-1<Ka.indexOf("\uff1a")&&(Ka=Ka.substring(Ka.indexOf("\uff1a")+1));(new sb(Aa,Ka)).showDialog()}}var b=this,C,p,L,G={},R,Y,ua={},N={},D={},va,Wa,Ha;this.setItemCheckedCallback=function(Ba){va=Ba};this.setSwitchStateChangeCallback=function(Ba){Wa=Ba};this.setScheduleExecuteCallback=function(Ba){Ha=Ba};this.setSelectedScheduleId=function(Ba){ua=
{};N={};if(void 0!==Ba&&null!==Ba&&0<Ba.length)for(var lb=0;lb<Ba.length;lb++)ua[Ba[lb].getScheduleId()]=1,N[Ba[lb].getScheduleId()]=Ba[lb];b.updateUi()};this.getSelectedSchedule=function(){return Object.values(N)};this.getJqUi=function(){if(!C&&!p){p=f.createTable();var Ba=new d(p);Ba.setOutsideVisible(!1);p.setCellRender(Ba);p.setDraggableAdjusting(!0,3,0,new ab);p.setColumnFitVisibleWidth(!0);p.setSyncUIWhenModelChanged(!0);qb();C=$(p.getUI());n.layoutCtrlWithLRTB(C,0,0,null,32,10,null)}return C};
this.setSearchText=function(Ba){Y=Ba};this.setCheckedBox=function(Ba){for(var lb=Object.keys(G),ia=0;ia<lb.length;ia++)Ba==lb[ia]&&G[lb[ia]].setChecked(!0)};var mb=!1;this.updateUi=function(Ba,lb){f.clear(p);mb=!0;G=Ba?$.extend(!0,{},Ba):{};if(R&&0<R.length)for(qb(),Ba=0;Ba<R.length;Ba++){var ia=R[Ba];f.createRow(p).setUserObject(ia)}f.refresh(p);lb&&p.updateUI(!0,lb);lb=0;ia=Object.keys(G);for(Ba=0;Ba<ia.length;Ba++)G[ia[Ba]].isChecked()&&lb++;Ba=Object.keys(ua).length;va&&va(lb,Ba);Ba=0<lb&&lb==
Object.keys(G).length;L&&L.setChecked(Ba);mb=!1};this.keepScrollStatus=function(){return p.keepScrollStatus()};this.resize=function(){var Ba=b.keepScrollStatus(),lb=$.extend(!0,{},G);b.updateUi(lb,Ba)};this.setModel=function(Ba){R=Ba};this.getSelectedRowModel=function(){for(var Ba=[],lb=Object.keys(G),ia=0,sa=lb.length;ia<sa;ia++){var yb=G[lb[ia]];yb.isChecked()&&Ba.push(yb.getUserObject())}return Ba};this.setExecutingScheduleIds=function(Ba){D={};if(Ba&&0<Ba)for(var lb=0;lb<Ba.length;lb++){var ia=
Ba[lb];D[ia]=ia}};var qb=function(){p.addColumns(11);p.getColumn(0).setWidth(26);p.getColumn(1).setWidth(100);p.getColumn(2).setWidth(50);p.getColumn(3).setWidth(50);p.getColumn(4).setWidth(150);p.getColumn(5).setWidth(100);p.getColumn(6).setWidth(100);p.getColumn(7).setWidth(100);p.getColumn(8).setWidth(190);p.getColumn(9).setWidth(80);p.getColumn(10).setWidth(80);var Ba=f.createHeadRow(p);Ba.getCell(1).setValue(c.get("scheduleName","\u8c03\u5ea6\u540d\u79f0"));Ba.getCell(2).setValue(c.get("enableScheduleYesOrNo",
"\u542f\u7528\u72b6\u6001"));Ba.getCell(3).setValue(c.get("operation","\u64cd\u4f5c"));Ba.getCell(4).setValue(c.get("publishPath","\u53d1\u5e03\u8def\u5f84"));Ba.getCell(5).setValue(c.get("publishCreator","\u53d1\u5e03\u8bb0\u5f55\u62e5\u6709\u8005"));Ba.getCell(6).setValue(c.get("reportName","\u62a5\u8868\u540d\u79f0"));Ba.getCell(7).setValue(c.get("reportCreator","\u62a5\u8868\u4fee\u6539\u4eba"));Ba.getCell(8).setValue(c.get("platformName","\u540e\u53f0\u4e8b\u52a1\u540d\u79f0"));Ba.getCell(9).setValue(c.get("createTime",
"\u521b\u5efa\u65f6\u95f4"));Ba.getCell(10).setValue(c.get("modifyTime","\u4fee\u6539\u65f6\u95f4"))},zb=function(Ba){Ba=0;for(var lb=Object.keys(G),ia=0;ia<lb.length;ia++)G[lb[ia]].isChecked()&&Ba++;lb=Object.keys(ua).length;va&&va(Ba,lb)}}function h(d,b){v.call(this);var C=this,p=this.protectedMethod,L,G=new x(d,b),R=new K(d,b),Y=function(va,Wa){Wa instanceof x?G.fireTabChangeEvent():R.fireTabChangeEvent()},ua=new E;(function(){p.setTitle(c.get("scheduleSetting","\u8c03\u5ea6\u8bbe\u7f6e"));var va=
Math.max(G.getWidth(),R.getWidth()),Wa=Math.max(R.getHeight(),R.getHeight());G.setMessageCurtain(p.getMessageCurtain());R.setMessageCurtain(p.getMessageCurtain());ua.setTabLevel(E.SECOND_LEVEL);ua.addTab(G,!0);ua.addTab(R,!1);ua.setCurrentTabPane(R);ua.addTabChangedListener(Y);C.setSize(va,Wa);p.setSelectable(!1);p.setContentPaneCreator(function(){return ua.getJqUi()});p.setClosingChecker2(function(Ha){N(Ha)},function(Ha){D();Ha(!0)},!0);p.setClosingAction(function(Ha){})})();this.setFunSuccessCallback=
function(va){L=va};this.setBasicPanelCurrentTab=function(){ua.setCurrentTabPane(G)};var N=function(va){var Wa=G.checkUIInput(function(Ha){if(Wa=R.checkUIInput(function(mb){mb=G.getModelFromUI();var qb=R.getModelFromUI();mb.setSnapGroupType(qb.getSnapGroupType());mb.setSnapGroupId(qb.getSnapGroupId());mb.setSnapGroupName(qb.getSnapGroupName());mb.setSaveHyperLink(qb.getSaveHyperLink());mb.setNotifyStrategy(qb.getNotifyStrategy());mb.setUsers(qb.getUsers());mb.setRoles(qb.getRoles());b&&b.model&&(mb.setId(b.model.getScheduleId()),
mb.setEnableSchedule(b.model.getEnableSchedule()),mb.setPlatformName(b.model.getPlatformName()),mb.setCreatorId(b.model.getCreatorId()),mb.setCreateDate(b.model.getCreateDate()));qb=d.createFacade(function(zb){d.getMessageCurtain().showSuccess(c.get("saveScheduleSuccess","\u4fdd\u5b58\u8c03\u5ea6\u6210\u529f\u3002"));L&&L();D();va(!0)},function(zb,Ba){if(8088E3<zb)return p.getMessageCurtain().showPrompt(Ba,15<Ba.length?5E3:2E3),va(!1),!0;va(!1);return!1});qb.setShowBlocking(!1);qb.saveScheduleInfo(mb.toJsonObject());
b&&b.model?Na.occur(Na.UPDATE_SNAP_SCHEDULE_TYPE,mb.getScheduleName()):Na.occur(Na.CREATE_SNAP_SCHEDULE_TYPE,mb.getScheduleName())}))p.getMessageCurtain().showPrompt(Wa,2E3),va(!1)});Wa&&(p.getMessageCurtain().showPrompt(Wa,2E3),va(!1))},D=function(){if(0<G.getFilterParamCachedPage().length){var va=d.createFacade(function(){},function(){return!0});va.setShowBlocking(!1);va.cleanReportRuntimeCache(G.getFilterParamCachedPage());G.clearFilterParamCachedPage()}}}function x(d,b){Eb.call(this);var C=this,
p,L,G,R=new V,Y,ua,N,D=[],va,Wa,Ha,mb;this.getTitle=function(){return c.get("basicSetting","\u57fa\u672c\u9009\u9879")};this.fireTabChangeEvent=function(){};this.getFilterParamCachedPage=function(){return D};this.clearFilterParamCachedPage=function(){D=[]};this.checkUIInput=function(ia){var sa=$.trim(G.getText());if(void 0==sa||0==sa.length)return c.get("nameNotEmpty","\u8bf7\u8f93\u5165\u8c03\u5ea6\u540d\u79f0\u3002");if(50<sa.length)return c.get("nameTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002");
if(!Ta.isValidString(sa))return c.get("invalidName","\u540d\u79f0\u53ea\u80fd\u7531\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002");sa=ua.getSelectedReport();if(!sa)return c.get("selectReport","\u8bf7\u9009\u62e9\u62a5\u8868\u6a21\u677f\u3002");if(!sa.reportName)return c.get("reportNotExistReselect","\u62a5\u8868\u6a21\u677f\u5df2\u88ab\u5220\u9664\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002");if(N.isNeedFilterParam()&&
!N.getSelectedFilterParam())return c.get("selectFilterParam","\u8bf7\u8bbe\u7f6e\u8fc7\u6ee4\u53c2\u6570\u3002");if(!va.getSelectedSchedule())return c.get("selectSchedule","\u8bf7\u8bbe\u7f6e\u8c03\u5ea6\u8ba1\u5212\u3002");if(!mb.getSelectedCodingRuleInfo())return c.get("selectCodingRule","\u8bf7\u8bbe\u7f6e\u7f16\u7801\u89c4\u5219\u3002");ia(!0)};this.getModelFromUI=function(){var ia=new X;ia.setScheduleName($.trim(G.getText()));var sa=ua.getSelectedReport();ia.setPublishId(sa.publishId);ia.setPublishName(sa.publishName);
ia.setReportId(sa.reportId);ia.setReportName(sa.reportName);if(sa=N.getSelectedFilterParam())delete sa.pageId,delete sa.isDefaultChange,delete sa.flag,ia.setFilterParam(JSON.stringify(sa));ia.setSchedule(va.getSelectedSchedule());Wa.isChecked()?ia.setOverwriteSnap(bb.OVERWRITE):Ha.isChecked()&&ia.setOverwriteSnap(bb.IGNORE);ia.setCodingRuleInfo(mb.getSelectedCodingRuleInfo());return ia};this.getJqUi=function(){if(!p){p=$("<div>");L=$("<div>");L.addClass("extreport-schedule-center-panel");Ba();var ia=
new Ea;ia.setRequired(!0);var sa=ia.getJqUi();ia.setText(c.get("report","\u62a5\u8868\u6a21\u677f"));sa.attr("title",ia.getText());ua=new Ia(d);ua.setNeedTooltips(!0);ua.setMessageCurtain(C.getMessageCurtain());ua.setFunSelectedItemListener(lb);ia=ua.getJqUi();n.layoutCtrl(sa,15,55,115,23);n.layoutCtrl(ia,130,55,211,23);sa.appendTo(L);ia.appendTo(L);ia=new Ea;ia.setRequired(!1);sa=ia.getJqUi();ia.setText(c.get("filterParam","\u8fc7\u6ee4\u53c2\u6570"));sa.attr("title",ia.getText());N=new Kb(d);N.setMessageCurtain(C.getMessageCurtain());
b&&b.model&&N.setScheduleId(b.model.getScheduleId());ia=N.getJqUi();n.layoutCtrl(sa,15,100,115,23);n.layoutCtrl(ia,130,100,211,23);sa.appendTo(L);ia.appendTo(L);ia=new Ea;ia.setRequired(!0);sa=ia.getJqUi();ia.setText(c.get("scheduleCron","\u8c03\u5ea6\u8ba1\u5212"));sa.attr("title",ia.getText());va=new Nb(d);va.setMessageCurtain(C.getMessageCurtain());ia=va.getJqUi();n.layoutCtrl(sa,15,145,115,23);n.layoutCtrl(ia,130,145,211,23);sa.appendTo(L);ia.appendTo(L);ia=new Ea;ia.setRequired(!1);sa=ia.getJqUi();
ia.setText(c.get("snapOverwriteStrategy","\u540c\u540d\u5feb\u7167\u8986\u76d6\u7b56\u7565"));sa.attr("title",ia.getText());Wa=new y;Ha=new y;Wa.setText(c.get("overwrite","\u8986\u76d6"));Wa.setChecked(!0);Ha.setText(c.get("ignore","\u5ffd\u7565"));ia=Wa.getJqUi();var yb=Ha.getJqUi(),Gb=new O;Gb.addElement(Wa);Gb.addElement(Ha);n.layoutCtrl(sa,15,190,115,23);n.layoutCtrl(ia,130,190,100,23);n.layoutCtrl(yb,240,190,100,23);sa.appendTo(L);ia.appendTo(L);yb.appendTo(L);ia=new Ea;sa=ia.getJqUi();ia.setRequired(!0);
ia.setText(c.get("codingRule","\u7f16\u7801\u89c4\u5219"));sa.attr("title",ia.getText());mb=new Ob(d);mb.setMessageCurtain(C.getMessageCurtain());ia=mb.getJqUi();n.layoutCtrl(sa,15,235,115,23);n.layoutCtrl(ia,130,235,211,23);sa.appendTo(L);ia.appendTo(L);L.appendTo(p);qb()}return p};var qb=function(){if(b){G.setText(b.model.getScheduleName());G.setTooltips(b.model.getScheduleName());var ia={publishId:b.model.getPublishId(),publishName:b.model.getPublishName(),publishCreatorName:b.model.getPublishCreator(),
publishAuthType:b.model.getPublishAuthType(),publishAuthWarningMsg:b.model.getPublishAuthWarningMsg(),path:b.model.getPublishPath(),reportId:b.model.getReportId(),reportName:b.model.getReportName(),reportCreatorName:b.model.getReportCreator(),reportModifierName:b.model.getReportModifier()};ua.setSelectedReport(ia);va.setSelectedSchedule(b.model.getSchedule());b.model.getOverwriteSnap()==bb.OVERWRITE?(Wa.setChecked(!0),Ha.setChecked(!1)):(Wa.setChecked(!1),Ha.setChecked(!0));ia=d.createFacade(function(sa){var yb=
new Ca;yb.fromJsonObject(sa);mb.setSelectedCodingRuleInfo(yb)},function(sa,yb){return 8088E3<sa?(C.getMessageCurtain().showPrompt(yb,2E3),!0):!1});ia.setShowBlocking(!0);ia.loadCodingRuleInfo(b.model.getScheduleId())}},zb=function(ia,sa){N.isNeedFilterParam()?(sa=JSON.parse(sa),sa.pageId=ia,sa.isDefaultChange=!1,sa.flag="1",N.setSelectedFilterParam(sa)):N.setSelectedFilterParam(null)},Ba=function(){var ia=new Ea,sa=ia.getJqUi();ia.setRequired(!0);ia.setText(c.get("scheduleName","\u8c03\u5ea6\u540d\u79f0"));
sa.attr("title",ia.getText());G=new J;var yb=$("<div>");G.addEditedListener(function(Aa){clearTimeout(Y);Y=setTimeout(function(){var Ka=G.getText();if(""!=Ka){var I=d.createFacade(function(S){yb.empty();S=S[G.getText()];if(null!=S&&0<S.length){R.setCustomItemPainter(function(xb,Ib){xb.on("mousedown",function(){G.setText(Ib);G.setTooltips(Ib);yb.remove()});xb.text(Ib);xb.attr("title",Ib)});R.setItemModels(S);R.setSelecteds([S[0]]);S=R.getJqUi();var ma=Gb.width(),Ga=Gb.css("left"),Oa=Gb.position().top+
Gb.height();n.layoutCtrl(yb,Ga,Oa,ma,122);yb.css("z-index","9999");S.css({width:ma+"px",height:"122px"});S.find(".sa-ctrl-list-owner").css("height","100px");ma=$("<div>");ma.css({position:"absolute","z-index":"9999",color:"#c5c5c5"});ma.text(c.get("historyScheduleName","\u5386\u53f2\u8c03\u5ea6\u540d\u79f0"));ma.css({right:"13px",top:"100px"});S.appendTo(yb);ma.appendTo(yb);yb.appendTo(L)}else yb.remove()},function(){return!0});I.setShowBlocking(!1);I.getScheduleNameByInputText(Ka)}else yb.remove()},
1E3)});G.addBlurListener(function(){yb.remove()});G.protectedMethod.getJqInput().css({"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap","font-family":U.getFontName()});var Gb=G.getJqUi();n.layoutCtrl(sa,15,15,115,23);n.layoutCtrl(Gb,130,15,215,23);sa.appendTo(L);Gb.appendTo(L)},lb=function(ia,sa){var yb=ua.getSelectedReport(),Gb=yb.reportId,Aa=yb.publishId,Ka=yb.bRestoreIfGetFilterParamFail;if(Gb&&Aa){var I=function(Ga,Oa){sa&&sa(Ga,Oa);Ka?(N.setSelectedReport(null),N.setNeedFilterParam(!0),
N.setSelectedFilterParam(null)):(N.setSelectedReport(ua.getSelectedReport()),b&&b.model&&b.model.getReportId()==Gb&&b.model.getPublishId()==Aa&&(S=function(xb){xb?(N.setNeedFilterParam(!0),zb(null,xb)):(N.setNeedFilterParam(!1),N.updateUI())},I=function(xb,Ib){return 8088E3<xb?(C.getMessageCurtain().showPrompt(Ib,2E3),!0):!1},ma=d.createFacade(S,I),ma.setShowBlocking(!0),ma.loadFilterParam(b.model.getScheduleId())));return 8088E3<Ga?(C.getMessageCurtain().showPrompt(Oa,2E3),!0):!1},S=function(Ga){ia&&
ia();N.setSelectedReport(ua.getSelectedReport());-1==D.indexOf(Ga.pageId)&&D.push(Ga.pageId);Ga.hasFilter?(N.setNeedFilterParam(!0),N.setFilerInfo(Ga),b&&b.model&&b.model.getReportId()==Gb&&b.model.getPublishId()==Aa?(S=function(Oa){Oa?zb(Ga.pageId,Oa):N.updateUI()},I=function(Oa,xb){return 8088E3<Oa?(C.getMessageCurtain().showPrompt(xb,2E3),!0):!1},ma=d.createFacade(S,I),ma.setShowBlocking(!0),ma.loadFilterParam(b.model.getScheduleId())):N.updateUI()):(N.setNeedFilterParam(!1),N.updateUI())},ma=
d.createFacade(S,I);ma.setShowBlocking(!0);ma.getReportFilter(Gb,Aa)}}}function K(d,b){Eb.call(this);var C=this,p,L,G,R,Y;this.getTitle=function(){return c.get("output","\u8f93\u51fa")};this.fireTabChangeEvent=function(){};this.checkUIInput=function(N){if(!L)return c.get("selectOutputPanel","\u8bf7\u8bbe\u7f6e\u8f93\u51fa\u9762\u677f\u3002");var D=L.checkUIInput(function(va){N(va)});if(D)return D};this.getModelFromUI=function(){var N=L.getModelFromUI(),D=new X;D.setSnapGroupType(N.getSaveSnapGroupType());
D.setSnapGroupId(N.getSaveSnapGroupId());D.setSnapGroupName(N.getSaveSnapGroupName());D.setSaveHyperLink(N.isHyperLink()?m.YES:m.NO);D.setNotifyStrategy(Y.getSelected().getValue());D.setUsers(R.getSelectedValue());D.setRoles(G.getSelectedValue());return D};this.getJqUi=function(){if(!p){p=$("<div>");var N={};b&&(N.snapGroupTypeId=b.model.getSnapGroupType(),N.snapGroupId=b.model.getSnapGroupId(),N.snapGroupName=b.model.getSnapGroupName(),N.isHyperLink=b.model.getSaveHyperLink()==m.YES?!0:!1);L=new qa(wa.SNAP_SCHEDULE,
null,N);L.setOuterMessageCurtain(C.getMessageCurtain());L.getJqUi().appendTo(p);N=new Ea;N.setText(c.get("msgNotify","\u6d88\u606f\u901a\u77e5"));var D=N.getJqUi();D.attr("title",N.getText());G=new jb;var va=G.getJqUi();R=new Ua;var Wa=R.getJqUi();N=145;n.layoutCtrl(D,15,N,115,23);n.layoutCtrl(va,130,N,211,23);n.layoutCtrl(Wa,130,N+45,211,23);D.appendTo(p);va.appendTo(p);Wa.appendTo(p);N+=90;D=new Ea;D.setText(c.get("msgNotifyStrategy","\u6d88\u606f\u901a\u77e5\u7b56\u7565"));va=D.getJqUi();n.layoutCtrl(va,
15,N,115,23);va.appendTo(p);va.attr("title",D.getText());Y=new e;Y.setItemModels(M.SUPPORTED_STRATEGY_TYPE);Y.setSelected(M.SUPPORTED_STRATEGY_TYPE[0]);D=Y.getJqUi();n.layoutCtrl(D,130,N,215,23);D.appendTo(p);ua()}return p};var ua=function(){if(b){d.createFacade(function(D){var va=[],Wa=D[0];if(Wa)for(var Ha=0;Ha<Wa.length;Ha++){var mb=new ea;mb.fromJsonObject(Wa[Ha]);va.push(mb)}Wa=[];if(D=D[1])for(Ha=0;Ha<D.length;Ha++)mb=new ea,mb.fromJsonObject(D[Ha]),Wa.push(mb);R.setSelectedValue(va);G.setSelectedValue(Wa)},
function(D,va){return 8088E3<D?(C.getMessageCurtain().showPrompt(va,2E3),!0):!1}).getScheduleNotifyUserRoles(b.model.getScheduleId());var N=b.model.getNotifyStrategy();N&&Y.setSelected(M.getScheduleNotifyStrategyModelByType(N))}}}function ba(d){var b=this,C,p,L,G,R,Y,ua,N,D,va,Wa,Ha=[],mb,qb={},zb={},Ba,lb=!1;this.getWidth=function(){return 770};this.getHeight=function(){return 450};this.setMessageCurtain=function(ya){G=ya};this.getMessageCurtain=function(){return G};this.getJqUi=function(){C||ia();
return C};this.checkUIInput=function(ya){ya(!0)};this.modelToUI=function(ya){Wa=ya;D&&D.setAutoSelectedData(ya)};this.getModelFromUI=function(){return Wa};this.closedCallback=function(){d.removeWindowResizeListener(Ka)};var ia=function(){C=$("<div>");n.layoutCtrlWithLRTB(C,0,0,null,0,0,null);var ya=$("<div class='sa-ctrl-dialog-toolbar'>");ya.addClass("extreport-schedule-center-dialog-toolbar");var W=sa(Xb.getCardFilterType(),yb).getJqUi();W.appendTo(ya);ya.appendTo(C);W.hide();d.createFacade(function(Da){1==
Da.isPresetManagePermission&&(lb=!0,W.show())}).checkPresetPermission();Gb().appendTo(ya);ya.appendTo(C);ya=$("<div>");ya.addClass("extreport-schedule-center-dialog");n.layoutCtrlWithLRTB(ya,5,0,null,41,0,null);I(ya);ya.appendTo(C)},sa=function(ya,W){var Da=new Wb;Da.setSearchType(ya);Da.setSelectedChangedListener(W);return Da},yb=function(ya,W,Da){ya=Da.getTypeId();D.setLoadItemListener(Tb(Ba,ya));Aa()},Gb=function(){if(p)var ya=p.getJqUi();else{p=new u;p.addSearchListener(Aa);p.setSearchListenerDelay(1E3);
p.setPlaceholder(c.get("searchBoxPlaceholder","\u641c\u7d22\u53d1\u5e03\u540d\u79f0/\u62a5\u8868\u540d\u79f0"));p.setShowSearchIcon(!0);ya=p.getJqUi();ya.addClass("extreport-schedule-center-dialog-toolbar-searchbox");var W="en"==H.getUrlParamValue("language")?"243px":"181px";ya.css({width:W})}return ya},Aa=function(){L=p.getText().trim();va.setSearchText(L);if(0<L.length){var ya={};zb={};for(var W in qb){var Da=xb(W),pb=0,Jb=[],gb=qb[W];if(gb&&0<gb.length)for(var rb=0;rb<gb.length;rb++){var Ab=gb[rb],
nb=-1<Ab.publishName.toUpperCase().indexOf(L.toUpperCase()),Qb=-1<Ab.reportName.toUpperCase().indexOf(L.toUpperCase());if(nb||Qb)Jb.push(Ab),pb++}zb[W]=Jb;ya[Da]=pb}D.setSearchStatus(!0);D.updateTreeUi(mb,ya)}else D.setSearchStatus(!1),D.updateTreeUi(mb)},Ka=function(){D&&D.updateUi()},I=function(ya){N=new Z;N.setHorizontalSplit(!0);N.setEnabled(!0);N.setSplitLineWide(4);N.setResizeMode(Z.RESIZE_MODE_FIRST_FIXED);N.setFirstSize(230,110,320);N.setSecondSize(531);ya.append(N.getJqUi());ua=ma();Y=S();
N.setFirstChild(Z.createChildWrapper(Y,function(){Y&&Y.css({width:N.getNonemptyFirstWide()+"px"});ua&&ua.css({width:N.getNonemptySecondWide()+"px"});clearTimeout(R);R=setTimeout(function(){D&&D.updateUi();va&&va.updateUi(Wa)},100)}));N.setSecondChild(Z.createChildWrapper(ua));d.addWindowResizeListener(Ka)},S=function(){var ya=$("<div>"),W=new xa;W.setTreeItemSelectedListener(Oa);W.setLoadItemListener(Tb);D=W;D.getJqUi().appendTo(ya);return ya},ma=function(){var ya=$("<div>");ya.css({"border-left":"1px solid #E5E5E5"});
va=new Qa;va.setItemSelectedListener(Ga);va.getJqUi().appendTo(ya);return ya},Ga=function(ya){Wa=ya},Oa=function(ya){Ha=[];for(var W in qb)xb(W)==D.getNodePath(ya)&&(Ha=L&&0<L.length?zb[W]:qb[W]);Ha&&Ha.sort(function(Da,pb){return pb.createTime-Da.createTime});va.setModel(Ha);va.updateUi(Wa)},xb=function(ya){try{var W=JSON.parse(ya);if("object"==typeof W){var Da=W.cloudId+W.appId;W.appMenuId&&(Da+=W.appMenuId);W.appMenuId2&&(Da+=W.appMenuId2)}else Da=ya}catch(pb){Da=ya}return Da},Ib=function(ya,W){ya.push(W);
if(W instanceof cb&&(W=W.getChildren()))for(var Da=0;Da<W.length;Da++)Ib(ya,W[Da])},Sb=function(ya,W){-1==ya.indexOf(W)&&ya.push(W);if(W=W.getChildren())for(var Da=0;Da<W.length;Da++)W[Da]instanceof ob?Sb(ya,W[Da]):-1==ya.indexOf(W[Da])&&W[Da].getId()&&ya.push(W[Da])},Tb=function(ya,W){Ba=ya;var Da=function(gb,rb){d.getMessageCurtain().showPrompt(rb,2E3);return!0},pb=function(gb){if(gb){var rb=new cb;rb.setChildren([]);if(gb&&gb.children&&0<gb.children.length){var Ab=new cb;Ab.fromJsonObject(gb);
Ab.setDisplayName(c.get("appMenu","\u5e94\u7528\u83dc\u5355"));Ab.setParentNode(rb);rb.getChildren().push(Ab)}pb=function(nb){if(nb&&0<nb.length){var Qb=new cb;Qb.setDisplayName(c.get("dataCenter","\u6570\u636e\u5de5\u4f5c\u53f0\u9605\u89c8\u5939"));Qb.setParentNode(rb);for(var Mb=[],Vb=0;Vb<nb.length;Vb++){var Ra=new ob;Ra.fromJsonObject(nb[Vb]);Ra.setParentNode(Qb);Mb.push(Ra)}nb=[];for(Vb=0;Vb<Mb.length;Vb++)Sb(nb,Mb[Vb]);Qb.setChildren(nb);rb.getChildren().push(Qb)}Qb=rb.getChildren();mb=[];for(Mb=
0;Mb<Qb.length;Mb++)Ib(mb,Qb[Mb]);ac(ya,W)};Jb=d.createAnalysisCenterFacade(pb,Da);Jb.setShowBlocking(!1);Jb.loadAnalysisCenterGroupExtReport(lb)}};var Jb=d.createPublishFacade(pb,Da);Jb.setShowBlocking(!1);Jb.getAppMenuTreeIncludePermissionForExtreport()},ac=function(ya,W){var Da=d.createFacade(function(pb){qb=pb;ya&&ya(mb)},function(pb,Jb){return 8088E3<pb?(b.getMessageCurtain().showPrompt(Jb,2E3),!0):!1});Da.setShowBlocking(!0);Da.loadAllExtReportInfos(W)}}function ja(d){var b,C,p,L,G,R,Y,ua,N,
D,va,Wa,Ha;this.setScheduleId=function(sa){Y=sa};this.setFilterInfo=function(sa){ua=sa};this.setSelectedFilterParamAndVar=function(sa,yb){N=sa;D=yb};this.setMessageCurtain=function(sa){b=sa};this.getWidth=function(){return 770};this.getHeight=function(){return 450};this.getJqUi=function(){C||(C=$("<div>"),C.addClass("extreport-schedule-center-dialog"),n.layoutCtrlWithLRTB(C,0,0,null,1,0,null),qb(C));return C};var mb=function(sa){N?d.createFacade(function(yb){var Gb=new fb;Gb.fromJsonObject(yb);D||
(D=Ha.restoreSelectedVarByScheme(Gb.getValue()));Ha.setVarF7SelectorModel(D);sa(Gb);Gb.getIsInvalid()&&b.showPrompt(c.get("paramInvalidPrompt","\u6570\u636e\u96c6\u53c2\u6570\u6709\u53d8\u52a8\u4e14\u4e0e\u8bbe\u7f6e\u503c\u4e0d\u517c\u5bb9\uff0c\u8bf7\u786e\u8ba4\u53c2\u6570\u8bbe\u7f6e\u662f\u5426\u6b63\u786e\u3002"),1E4)},function(yb,Gb){sa();return 8088E3<yb?(b.showPrompt(Gb,2E3),!0):!1}).convertFilterSchemeParam(N.flag,N.pageId,N.schemeName,N.schemeContent,Y):sa()};this.checkUIInput=function(sa){Wa=
Ha.getSelectedFilterParam();if(!Wa)return(sa=Ha.getErrorMsg())?sa:"\u5c1a\u672a\u8bbe\u7f6e\u8fc7\u6ee4\u53c2\u6570";sa(!0)};this.getModelFromUI=function(){return[Wa,Ha.getSelectedVarF7SelectorModel()]};var qb=function(sa){G=new Z;G.setHorizontalSplit(!0);G.setEnabled(!0);G.setSplitLineWide(4);G.setResizeMode(Z.RESIZE_MODE_FIRST_FIXED);G.setFirstSize(230,110,320);G.setSecondSize(536);sa.append(G.getJqUi());L=Ba();p=zb();G.setFirstChild(Z.createChildWrapper(p,function(){p&&p.css({width:G.getNonemptyFirstWide()+
"px"});L&&L.css({width:G.getNonemptySecondWide()+"px"})}));G.setSecondChild(Z.createChildWrapper(L))},zb=function(){var sa=$("<div>"),yb=new Xa;yb.setItemSelectedListener(lb);yb.setLoadItemListener(ia);R=yb;R.getJqUi().appendTo(sa);return sa},Ba=function(){var sa=$("<div>");sa.css({"border-left":"1px solid #E5E5E5"});var yb=new Pb(d);yb.setMessageCurtain(b);Ha=yb;Ha.getJqUi().appendTo(sa);return sa},lb=function(sa){va=sa;Ha.setSelectedSchemeModel(va);sa=Ha.restoreSelectedVarByScheme(va.getValue());
Ha.setVarF7SelectorModel(sa);Ha.updateUi()},ia=function(sa){var yb=ua.schemeList,Gb=[];if(yb)for(var Aa=0;Aa<yb.length;Aa++){var Ka=new fb;Ka.fromJsonObject(yb[Aa]);var I=new ta;I.setText(Ka.getCaption());I.setUserObject(Ka);Gb.push(I)}Ha.initFilter(ua);mb(function(S){var ma=kb,Ga=[],Oa=new ta;S?(Oa.setText(S.getCaption()),Oa.setUserObject(S)):(S=new fb,S.setCaption(ma),S.setValue(""),S.setIsInvalid(!1),S.setShareStrategy(0),Oa.setText(S.getCaption()),Oa.setUserObject(S));Ga.push(Oa);Gb=Ga.concat(Gb);
sa&&sa(Gb)})}}function xa(){function d(Aa){KTDefaultCellRender.call(this,Aa);var Ka=this;this.paintCellUI=function(S,ma){var Ga=Ka.getCurrentRow(),Oa=Ga.getUserObject(),xb=Ka.getCell();Ga=I(Ga,Oa,xb);ma?(S=$(ma),Ga.appendTo(S)):(S=$(S),Ga.appendTo(S))};var I=function(S,ma,Ga){var Oa=void 0==ma?"":ma instanceof ob||ma instanceof Hb?ma.getName():ma.getDisplayName();var xb=$("<div>");xb.addClass("sa-qing-publish-menu-item");xb.css({"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"});
n.layoutCtrlWithLRTB(xb,0,0,null,0,0,null);var Ib=$("<span>");Ib.text("!");Ib.addClass("sa-qing-publish-menu-item-promt");Oa==La.CLOUD_HAS_BEEN_DELETED?(Oa=c.get("cloudHasBeenDeleted","\u8be5\u670d\u52a1\u4e91\u5df2\u88ab\u5220\u9664"),xb.append(Ib)):Oa==La.APP_HAS_BEEN_DELETED?(Oa=c.get("appHasBeenDeleted","\u8be5\u5e94\u7528\u5df2\u88ab\u5220\u9664"),xb.append(Ib)):Oa==La.APP_MENU_HAS_BEEN_DELETED&&(Oa=c.get("appMenuHasBeenDeleted","\u8be5\u5e94\u7528\u83dc\u5355\u5df2\u88ab\u5220\u9664"),xb.append(Ib));
xb.attr("title",Oa);Ib=$("<span>");Ib.text(Oa);Ib.css({"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"});if(ma instanceof ob&&0<ma.getSubNodeLevel()||ma instanceof Hb&&0<ma.getSubNodeLevel()||ma instanceof cb&&1<ma.getSubNodeLevel()||ma instanceof Cb&&1<ma.getSubNodeLevel())xb.css("cursor","pointer"),Ga.getUserObject()&&xb.addClass("sa-qing-publish-menu-item-selected"),xb.on("mousedown",function(Sb){sa(S,ma,xb,Ga)}),qb&&Gb(qb,S,ma,xb,Ga);ua&&(ma instanceof ob&&0<ma.getSubNodeLevel()||
ma instanceof Hb&&0<ma.getSubNodeLevel()||ma instanceof cb&&1<ma.getSubNodeLevel()||ma instanceof Cb&&1<ma.getSubNodeLevel())&&yb(Ib,xb,ma,Oa);xb.append(Ib);return xb}}var b=this,C,p,L,G,R,Y,ua=!1,N,D,va=!1,Wa=!1,Ha,mb,qb,zb;this.setSearchStatus=function(Aa){ua=Aa};this.setAutoSelectedData=function(Aa){Wa=!0;if((mb=Aa)&&mb.path)try{qb=JSON.parse(mb.path)}catch(Ka){qb=mb.path}};this.setTreeItemSelectedListener=function(Aa){C=Aa};this.setLoadItemListener=function(Aa){Ha=Aa};this.getJqUi=function(){if(!p){p=
$("<div>");L=Ba();L.text(c.get("loading","\u52a0\u8f7d\u4e2d"));L.appendTo(p);L.show();G=new KTable;R=$(G.getUI());R.children().css("overflow-x","auto");G.setColumnFitVisibleWidth(!0);G.setCellRender(new d(G));G.setSyncUIWhenModelChanged(!1);var Aa=new KTStyle;Aa.setVerticalAlign("middle");G.setStyle(Aa);R.appendTo(p);R.hide();lb()}return p};this.updateUi=function(){D&&0<D.length?ia():va&&(L=Ba(),L.text(c.get("emptyPublish","\u6682\u65e0\u53d1\u5e03\u8bb0\u5f55")),L.appendTo(p),R.hide(),L.show())};
this.updateTreeUi=function(Aa,Ka){ua&&(N=Ka);D&&0<D.length&&(D=Aa,ia())};var Ba=function(){L||(L=$("<div>"),L.addClass("sa-qing-publish-manager-content-emptytip"),L.css({top:"30%"}));return L},lb=function(){D||Ha(function(Aa){D=Aa;va=!0;b.updateUi()},!1)},ia=function(){L.hide();R.show();f.clear(G);G.addColumns(1);G.getColumn(0).setWidth(320);for(var Aa=D,Ka=G,I=0;I<Aa.length;I++){var S=Aa[I],ma=Ka.addRow();ma.setHeight(32);var Ga=ma.getCell(0);ma.setUserObject(S);var Oa=S.getSubNodeLevel();(S instanceof
ob||S instanceof Hb)&&--Oa;S=new KTCellTreeModel(Oa);!ua&&!Wa&&1<S.getLevel()?(S.setExpanded(!0),2<S.getLevel()&&ma.setHide(!1)):S.setExpanded(!0);Ga.setTreeModel(S)}f.refresh(G);zb&&G.scrollCellVisible(G.getRowIndex(zb),0,!1)},sa=function(Aa,Ka,I,S){Y!=S&&(p.find(".sa-qing-publish-menu-item-selected").removeClass("sa-qing-publish-menu-item-selected"),I.addClass("sa-qing-publish-menu-item-selected"),Y&&Y.setUserObject(!1),S.setUserObject(!0),zb=Aa,Y=S,qb=Ka,C&&C(Ka))},yb=function(Aa,Ka,I,S){I=N[b.getNodePath(I)];
void 0==I&&(I=0);var ma="("+I+")",Ga=$("<div>"),Oa="extreport-schedule-center-search-hits-number";Oa=0<I?Oa+"-with-color":Oa;Ga.addClass("sa-qing-publish-menu-item");Ga.addClass(Oa);Ga.text(ma);Aa.append(Ga);Ka.attr("title",S+" "+ma)};this.getNodePath=function(Aa){if(Aa instanceof cb||Aa instanceof Cb){var Ka=Aa.getCloudId();Aa.getAppId()&&(Ka+=Aa.getAppId(),Aa.getAppMenuId()&&(Ka+=Aa.getAppMenuId(),Aa.getAppMenuId2()&&(Ka+=Aa.getAppMenuId2())));return Ka}if(Aa instanceof ob||Aa instanceof Hb)return Ka=
Aa.getCenterId1(),Aa.getCenterId2()&&(Ka+="/"+Aa.getCenterId2(),Aa.getCenterId3()&&(Ka+="/"+Aa.getCenterId3(),Aa.getCenterId4()&&(Ka+="/"+Aa.getCenterId4()))),Ka};var Gb=function(Aa,Ka,I,S,ma){if(I instanceof ob||I instanceof Hb)"object"==typeof Aa||Aa instanceof ob?Aa instanceof ob&&b.getNodePath(Aa)==b.getNodePath(I)&&sa(Ka,I,S,ma):Aa==b.getNodePath(I)&&sa(Ka,I,S,ma);if(I instanceof cb||I instanceof Cb){if(Aa instanceof cb){var Ga=Aa.getAppMenuId2();var Oa=Aa.getAppMenuId();Aa=Aa.getAppId()}else Ga=
Aa.appMenuId2,Oa=Aa.appMenuId,Aa=Aa.appId;Ga?Ga==I.getAppMenuId2()&&sa(Ka,I,S,ma):Oa?Oa!=I.getAppMenuId()||I.getAppMenuId2()||sa(Ka,I,S,ma):Aa&&(Aa!=I.getAppId()||I.getAppMenuId()||sa(Ka,I,S,ma))}}}function Xa(){var d,b,C,p,L,G,R;this.setItemSelectedListener=function(D){d=D};this.setLoadItemListener=function(D){b=D};this.handClickListItem=function(D){var va=p.find('div[id="'+encodeURIComponent(D.getText())+'"]');va&&N(va,D.getUserObject())};this.getJqUi=function(){C||(C=$("<div>"),L=Y(),L.text(c.get("loading",
"\u52a0\u8f7d\u4e2d")),L.appendTo(C),ua());return C};var Y=function(){L||(L=$("<div>"),L.addClass("extreport-schedule-center-content-emptytip"));return L},ua=function(){G||b(function(D){if((G=D)&&0<G.length){C.empty();p=$("<span>");for(D=0;D<G.length;D++){var va=new oa;va.setListModel(G[D]);va.setFunItemClick(N);va.getJqUi().appendTo(p)}p.appendTo(C);(D=p.find('div[id="'+encodeURIComponent(G[0].getText())+'"]'))&&N(D,G[0].getUserObject())}else C.empty(),L=Y(),L.text(c.get("emptyMenuItem","\u6682\u65e0\u83dc\u5355\u9879")),
L.appendTo(C)})},N=function(D,va){p.find(".extreport-schedule-center-menu-item").removeClass("extreport-schedule-center-menu-item-selected");p.find(".extreport-schedule-center-menu-item").removeClass("extreport-schedule-center-menu-item-selected-enabled");D.addClass("extreport-schedule-center-menu-item-selected");D.addClass("extreport-schedule-center-menu-item-selected-enabled");R=va;d(R)}}function oa(){var d,b,C;this.setListModel=function(L){b=L};this.getUserObject=function(){return b&&b.getUserObject()};
this.setFunItemClick=function(L){C=L};this.getJqUi=function(){d||p();return d};var p=function(){var L=$("<div>");L.addClass("extreport-schedule-center-menu-item");L.attr("id",encodeURIComponent(b.getText()));L.text(b.getText());L.on("click",function(G){C&&C($(G.target),b.getUserObject())});L.on("mouseover",function(G){$(G.target).hasClass("extreport-schedule-center-menu-item-selected")&&$(G.target).addClass("extreport-schedule-center-menu-item-selected-enabled")});L.on("mouseout",function(G){$(G.target).removeClass("extreport-schedule-center-menu-item-selected-enabled")});
d=L}}function ta(){var d,b;this.getText=function(){return d};this.setText=function(C){d=C};this.getUserObject=function(){return b};this.setUserObject=function(C){b=C}}function Pa(d,b){this.toString=function(){return b};this.getValue=function(){return d}}function Qa(){function d(zb){KTDefaultCellRender.call(this,zb);var Ba=this,lb=this.paintCellUI;this.paintCellUI=function(ia,sa){var yb=Ba.getCurrentRowIdx(),Gb=Ba.getCurrentRow(),Aa=Ba.getCurrentColIdx();Gb=Gb.getUserObject();if(yb<f.getHeadRowCount())lb(ia,
sa);else if(0==Aa)Aa=new y,ua&&ua.reportId==Gb.reportId&&ua.publishId==Gb.publishId&&Aa.setChecked(!0),Aa.setUserObject(Gb),Wa.addElement(Aa),Aa.addCheckedListener(mb),Aa=Aa.getJqUi(),Aa.addClass("extreport-schedule-center-table-checkbox"),Aa.appendTo(ia);else{sa=$("<div>");switch(Aa){case 1:if(Gb.isPreset){var Ka=$("<div>");Ka.text(c.get("preset","\u9884\u7f6e"));Ka.addClass("extreport-schedule-center-table-name-preset-tag");Ka.appendTo(ia)}Ka=Gb.publishName;break;case 2:Ka=Gb.publishCreatorName;
break;case 3:Ka=Gb.reportName;break;case 4:Ka=Gb.reportModifier}sa.addClass("extreport-schedule-center-table-cell-text");1==Aa||3==Aa?tb(sa,D,Ka):(sa.attr("title",Ka),sa.text(Ka));sa.appendTo(ia)}}}var b=this,C,p,L,G,R,Y,ua,N=!0,D,va,Wa=new O,Ha;this.getJqUi=function(){if(!C){C=$("<div>");L=$("<div>");L.appendTo(C);p=$("<div>");p.addClass("extreport-schedule-center-content-emptytip");p.appendTo(C);R=f.createTable();var zb=new d(R);zb.setOutsideVisible(!1);R.setCellRender(zb);R.setDraggableAdjusting(!0,
3,0,new ab);R.setColumnFitVisibleWidth(!0);R.setSyncUIWhenModelChanged(!0);qb();G=$(R.getUI());n.layoutCtrlWithLRTB(G,0,0,null,0,0,null);G.appendTo(C)}return C};this.setSearchText=function(zb){D=zb};this.updateUi=function(zb){ua=zb;f.clear(R);qb();L.css("transform","scaleX(0.85) scaleY(0.85)");if(N)L.addClass("extreport-schedule-center-no-data-tips"),eb.background(L,"icon_open_tips_background"),p.text(c.get("appMenuClickTips","\u8bf7\u70b9\u51fb\u5de6\u4fa7\u83dc\u5355\u8fdb\u884c\u67e5\u770b")),
L.show(),p.show(),G.hide();else if(!D||va&&0!=va.length)if(va&&0!=va.length){L.hide();p.hide();G.show();for(zb=0;zb<va.length;zb++){var Ba=va[zb];f.createRow(R).setUserObject(Ba)}f.refresh(R)}else L.addClass("extreport-schedule-center-no-data-tips"),eb.background(L,"no-data"),p.text(c.get("emptyReport","\u6682\u65e0\u62a5\u8868\u6a21\u677f")),L.show(),p.show(),G.hide();else L.addClass("extreport-schedule-center-no-data-tips"),eb.background(L,"no-data"),p.text(c.get("nodata","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c")),
L.show(),p.show(),G.hide()};this.resize=function(){b.updateUi()};this.setModel=function(zb){N=!1;va=zb};this.getSelectedRowModel=function(){return Y};this.setItemSelectedListener=function(zb){Ha=zb};var mb=function(zb,Ba){ua=Y=zb.getUserObject();Ha&&Ha(Y)},qb=function(){R.addColumns(5);R.getColumn(0).setWidth(26);R.getColumn(1).setWidth(100);R.getColumn(2).setWidth(100);R.getColumn(3).setWidth(100);R.getColumn(4).setWidth(100);var zb=f.createHeadRow(R);zb.getCell(1).setValue(c.get("publishName","\u53d1\u5e03\u540d\u79f0"));
zb.getCell(2).setValue(c.get("publishCreator","\u53d1\u5e03\u4eba"));zb.getCell(3).setValue(c.get("reportName","\u62a5\u8868\u540d\u79f0"));zb.getCell(4).setValue(c.get("reportCreator","\u62a5\u8868\u521b\u5efa\u4eba"))}}function Pb(d){var b,C,p,L,G,R,Y,ua;this.setMessageCurtain=function(D){b=D};this.setSelectedSchemeModel=function(D){R=D};this.setVarF7SelectorModel=function(D){Y=D};this.restoreSelectedVarByScheme=function(D){return G.restoreSelectedVarByScheme(D)};this.getSelectedVarF7SelectorModel=
function(){return G.getVarF7SelectorModel()};this.getSelectedFilterParam=function(){var D=G.execute(kb,!1);if(!D.success)return ua=D.errMsg,null;ua=null;D=[];var va=[],Wa=[];G.setSchemeParams(D,va,Wa);return{pageId:L.pageId,schemeName:kb,isDefaultChange:!1,flag:"1",schemeContent:KReportUtil.toStr({nameParams:Wa,valParams:D,capParams:va})}};this.getErrorMsg=function(){return ua};this.getJqUi=function(){C||(C=$("<div>"));return C};this.initFilter=function(D){if(!G){var va={};va.oGlobal=d;va.oMessageCurtain=
b;L=D;G=new ca(D.pageId,va,N);G.init(D.paramList,D.schemeList,D.associate);p=$("<div/>");G.render(p);D=$("<div>");n.layoutCtrlWithLRTB(D,0,0,null,1,0,null);D.css("overflow-x","hidden");D.css("overflow-y","auto");D.append(p);C.append(D)}};this.updateUi=function(){G.updateFilterByScheme(R.getValue());N()};var N=function(D){if(D){var va={};va[D]=Y[D];G.updateFilterByF7SelectorModel(va)}else G.updateFilterByF7SelectorModel(Y)}}function Sa(d){var b,C,p;this.getWidth=function(){return 480};this.getHeight=
function(){return 340};this.getJqUi=function(){if(!b){b=$("<div>");p=new Ja;p.isOnlyPeriod(!0);p.setCronAnalysisFacade(L);p.setTimingButtonText(c.get("executeRegularly","\u5b9a\u65f6\u6267\u884c"));var G=p.getJqUi();n.layoutCtrl(G,110,30,null,null);G.appendTo(b)}return b};this.setMessageCurtain=function(G){C=G};this.getMessageCurtain=function(){return C};var L=function(G,R,Y){R=d.createFacade(R,Y);R.setShowBlocking(!0);R.cronExpression(G)};this.updateUi=function(G){p.setSchedule(G.copy())};this.checkUIInput=
function(G){var R=p.getSchedule();if("Custom"==R.getPeriod()){var Y=R.getCron();if("undefined"==typeof Y||""==Y)return c.get("inputExpression","\u8bf7\u8f93\u5165\u8868\u8fbe\u5f0f\u3002");if(R=R.getCronMsg())return R}G(!0)};this.getModelFromUI=function(){return p.getSchedule().copy()}}function hb(d){function b(I){KTDefaultCellRender.call(this,I);var S=this,ma=this.paintCellUI;this.paintCellUI=function(ya,W){var Da=S.getCurrentRowIdx(),pb=S.getCurrentColIdx(),Jb=S.getCurrentRow();if(Da<f.getHeadRowCount()||
!S.getCell())ma(ya,W);else{var gb=S.getCellWidth(),rb=30>S.getCellHeight()?30:S.getCellHeight();if(0==pb)W=S.getCell().getValue(),Ga(ya,W);else if(2==pb)Da=S.getCell().getValue(),W=Jb.getUserObject(),W.setAttributeValue(""),W.setPrefix(""),W.setSuffix(""),W.setSeparator(""),Oa(ya,gb,rb,Da,Jb);else if(3==pb){var Ab=S.getCell().getValue();W=Jb.getUserObject();(W=z.getCodingRuleItemModelByType(W.getType()))&&W.isSysVar()?Sb(ya,gb,rb,Jb,ka.SUPPORTED_VAR_TYPE,Ab):W&&W.isSysDate()?Wa&&0!=Wa.length?Sb(ya,
gb,rb,Jb,Wa,Ab):qb(function(){Sb(ya,gb,rb,Jb,Wa,Ab)}):W&&W.isSerialNum()?ac(ya,gb,rb,Jb,Ab):(W=Jb.getUserObject(),W.setAttributeValue(Ab),Ib(ya,Ab))}else Da=S.getCell().getValue(),W=Jb.getUserObject(),4==pb?W.setPrefix(Da):5==pb?W.setSuffix(Da):6==pb&&W.setSeparator(Da),Ib(ya,Da);!G||3!=pb&&4!=pb&&5!=pb&&6!=pb||lb()}};var Ga=function(ya,W){ya=$(ya);ya.find(".extreport-schedule-center-coding-rule-table-prompt").remove();if(W){var Da=q.createWarning();Da.addClass("extreport-schedule-center-coding-rule-table-prompt");
Da.attr("title",W);Da.appendTo(ya)}},Oa=function(ya,W,Da,pb,Jb){ya=f.createCtrlInCell(ya,W,Da,e);ya.setItemModels(z.SUPPORTED_RULE_TYPE);ya.setUserObject(Jb);ya.addSelectedChangedListener(xb);ya.setSelected(pb?pb:null)},xb=function(ya,W,Da){ya=ya.getUserObject();ya.getUserObject().setType(Da.getValue());ya.getCell(2).setValue(Da);Da=ya.getCell(3);Da.setValue(" ");Da.setValue("")},Ib=function(ya,W){ya=$(ya);var Da=$("<div>");Da.text(W);Da.addClass("extreport-schedule-center-coding-rule-tablecell-editable");
ya.empty();ya.append(Da);ya.css("cursor","pointer")},Sb=function(ya,W,Da,pb,Jb,gb){ya=f.createCtrlInCell(ya,W,Da,e);ya.setItemModels(Jb,function(rb,Ab){return rb&&Ab?rb.getValue()==Ab.getValue():!1});ya.setUserObject(pb);ya.addSelectedChangedListener(Tb);gb instanceof Pa&&(gb=zb(gb));ya.setSelected(gb);(gb instanceof Pa||gb instanceof ka)&&pb.getUserObject().setAttributeValue(gb.getValue())},Tb=function(ya,W,Da){ya=ya.getUserObject();ya.getUserObject().setAttributeValue(Da.getValue());ya.getCell(3).setValue(Da);
lb()},ac=function(ya,W,Da,pb,Jb){var gb=f.createCtrlInCell(ya,W,Da,Ya);gb.setClearable(!0);gb.addActionListener(function(rb){rb=new ib(d);var Ab=new Q(c.get("serialNumSetting","\u6d41\u6c34\u53f7\u8bbe\u7f6e"),d,rb);Ab.setCallback(function(nb){nb&&(pb.getUserObject().setAttributeValue(nb),gb.setModel(nb),lb())});Ab.showDialog();pb.getUserObject()&&pb.getUserObject().getAttributeValue()&&rb.updateUi(pb.getUserObject().getAttributeValue())});gb.addClearListener(function(){pb.getUserObject().setAttributeValue(null);
gb.setModel(null);lb()});gb.setModel(Jb);pb.getUserObject().setAttributeValue(Jb)}}var C=this,p,L,G=!1,R,Y,ua,N=[],D,va,Wa,Ha=!1,mb=!1;this.getWidth=function(){return 770};this.getHeight=function(){return 450};this.getJqUi=function(){if(!p){p=$("<div>");var I=new Ea;I.setRequired(!1);var S=I.getJqUi();I.setText(c.get("codingRuleResultEg","\u7f16\u7801\u89c4\u5219\u7ed3\u679c\u793a\u4f8b"));va=new Ea;I=va.getJqUi();var ma="en"==H.getUrlParamValue("language")?50:0;n.layoutCtrl(S,8,0,120+ma,23);n.layoutCtrl(I,
128+ma,0,500,23);S.appendTo(p);I.appendTo(p);Y=f.createTable();Y.setDraggableAdjusting(!0,3,0,new ab);Y.setColumnFitVisibleWidth(!0);Y.setSyncUIWhenModelChanged(!0);f.bindTextEditor(Y,yb,Gb);f.bindTableListenerForCtrl(Y,Aa);S=new b(Y);S.setOutsideVisible(!1);Y.setCellRender(S);Ka();R=$(Y.getUI());n.layoutCtrlWithLRTB(R,0,0,null,45,0,null);R.addClass("extreport-schedule-center-coding-rule-table");R.appendTo(p);qb()}return p};this.setMessageCurtain=function(I){L=I};this.getMessageCurtain=function(){return L};
this.beforeClosingCheck=function(I){lb(I,I)};this.checkUIInput=function(I){D=Ba();var S=D.getCodingRuleEntryInfoList();if(0==S.length)return c.get("codingRuleNotNull","\u7f16\u7801\u89c4\u5219\u4e0d\u80fd\u4e3a\u7a7a\u3002");if(!Ha)return c.get("codingRuleChecking","\u7f16\u7801\u89c4\u5219\u68c0\u6d4b\u4e2d\u3002");Ha=!1;if(1<S.length){for(var ma=0,Ga=0;Ga<S.length;Ga++)z.getCodingRuleItemModelByType(S[Ga].getType()).isSerialNum()&&(ma+=1);if(1<ma)return c.get("onlyOneSerialNum","\u4e0d\u5141\u8bb8\u6709\u4e00\u4e2a\u4ee5\u4e0a\u7684\u6d41\u6c34\u53f7\u8bbe\u5b9a\u3002")}S=
$.trim(va.getText());if(!S)return c.get("codingRuleNotNull","\u7f16\u7801\u89c4\u5219\u4e0d\u80fd\u4e3a\u7a7a\u3002");if(Ta.isValidString(S)){if(Ta.isKeywords(S))return c.get("isKeywords",'\u65e0\u6cd5\u4f7f\u7528"#1"\u4f5c\u4e3a\u540d\u79f0\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002').replace("#1",S);if(50<S.length)return c.get("nameTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002")}else return c.get("invalidCodingRuleName","\u7f16\u7801\u89c4\u5219\u7ed3\u679c\u53ea\u80fd\u7531\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002");
I(!0)};this.getModelFromUI=function(){return D};this.updateUi=function(I){G=!1;I&&I.getCodingRuleEntryInfoList()&&0<I.getCodingRuleEntryInfoList().length&&(N=I.getCodingRuleEntryInfoList());mb&&N.sort(function(Sb,Tb){return Sb.getIndex()-Tb.getIndex()});for(var S=N.length-1;0<=S&&(!(I=N[S])||void 0==I.getType());S--)N.splice(S,1);f.clear(Y);Ka();S=N.length;for(var ma=Math.max(4,S+1),Ga=0;Ga<ma;Ga++){Ga<S?I=N[Ga]:(I=new Ma,I.setIndex(N.length+1),N.splice(N.length,0,I));I.setIndex(Ga+1);var Oa=f.createRow(Y);
Oa.setUserObject(I);Oa.getCell(0).setValue("");Oa.getCell(1).setValue(I.getIndex());var xb=z.getCodingRuleItemModelByType(I.getType());Oa.getCell(2).setValue(xb);var Ib=I.getAttributeValue()?I.getAttributeValue():"";xb?xb.isSysVar()?Ib instanceof ka?Oa.getCell(3).setValue(Ib):Oa.getCell(3).setValue(ka.getSystemVarTypeById(Ib)):xb.isSysDate()?Ib instanceof Pa?Oa.getCell(3).setValue(Ib):Oa.getCell(3).setValue(new Pa(Ib,"suibian")):Oa.getCell(3).setValue(Ib):Oa.getCell(3).setValue(Ib);xb=I.getPrefix()?
I.getPrefix():"";Oa.getCell(4).setValue(xb);xb=I.getSuffix()?I.getSuffix():"";Oa.getCell(5).setValue(xb);I=I.getSeparator()?I.getSeparator():"";Oa.getCell(6).setValue(I)}f.refresh(Y);G=!0;lb()};this.doInsertRow=function(I){var S=new Ma;S.setIndex(I+1);var ma=N[I];ma?N.splice(I,1,ma,S):N.splice(N.length,0,S);mb=!0;C.updateUi()};this.doDeleteRow=function(I){N.splice(I,1);mb=!0;C.updateUi()};this.doTopRow=function(I){var S=N[I];if(S==N[0])return!1;N.splice(I,1);N.splice(I-1,0,S);mb=!1;C.updateUi();return!0};
var qb=function(I){if(!Wa||0==Wa.length){var S=d.createFacade(function(ma){if(ma){Wa=[];for(var Ga in ma)Wa.push(new Pa(Ga,ma[Ga]))}I&&I();lb()},function(ma,Ga){return 8088E3<ma?(L.showPrompt(Ga,2E3),!0):!1});S.setShowBlocking(!1);S.loadSystemDateTypes()}},zb=function(I){if(Wa&&0<Wa.length)for(var S=0;S<Wa.length;S++)if(Wa[S].getValue()==I.getValue())return Wa[S];return null},Ba=function(){for(var I=new Ca,S=[],ma=Y.getRowsCount(),Ga=0;Ga<ma;Ga++){var Oa=Y.getRow(Ga).getUserObject();Oa&&Oa instanceof
Ma&&void 0!=Oa.getType()&&$.trim(Oa.getAttributeValue())&&S.push(Oa)}I.setCodingRuleEntryInfoList(S);return I},lb=function(I,S){var ma=Ba();if(0<ma.getCodingRuleEntryInfoList().length){var Ga=d.createFacade(function(Oa){Oa?va.setText(Oa):va.setText("");Ha=!0;I&&I()},function(Oa,xb){Ha=!0;if(S)S();else return 8088E3<Oa?(L.showPrompt(xb,2E3),!0):!1});Ga.setShowBlocking(!1);Ga.getCodingRuleResultEg(ma)}else I&&I()},ia=function(I,S,ma){if(sa(ma))return!0;if(I.getCell(3)!=S){if(S=I.getUserObject(),void 0!=
S.getType()&&z.getCodingRuleItemModelByType(S.getType()).isAptoticValue())return sa(I.getCell(3).getValue())}else{if(I.getCell(4)!=S)return sa(I.getCell(4).getValue());if(I.getCell(5)!=S)return sa(I.getCell(5).getValue());if(I.getCell(6)!=S)return sa(I.getCell(6).getValue())}return!1},sa=function(I){return I&&0!=I.length?!/^[\u4E00-\u9FA5a-zA-Z0-9_]{1,}$/.test(I):!1},yb=function(I,S){if(3!=S&&4!=S&&5!=S&&6!=S)return!1;var ma=Y.getRow(I).getUserObject();return void 0==z.getCodingRuleItemModelByType(ma.getType())?
(C.getMessageCurtain().showPrompt(c.get("selectType","\u8bf7\u5148\u9009\u62e9\u7c7b\u578b\u3002"),2E3),!1):4!=S&&5!=S&&6!=S||ma.getAttributeValue()?3!=S||(ma=Y.getRow(I).getUserObject(),void 0!=ma.getType()&&z.getCodingRuleItemModelByType(ma.getType()).isAptoticValue())?!0:!1:(C.getMessageCurtain().showPrompt(c.get("selectAttribute","\u8bf7\u5148\u8bbe\u7f6e\u5c5e\u6027\u503c\u3002"),2E3),!1)},Gb=function(I,S,ma,Ga,Oa){Ha=!1;ia(I,ma,Ga)?(S=c.get("invalidCodingRuleName","\u7f16\u7801\u89c4\u5219\u7ed3\u679c\u53ea\u80fd\u7531\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002"),
I.getCell(0).setValue(S)):I.getCell(0).setValue("");S=I.getUserObject();I.getCell(3)==ma?S.getAttributeValue()!=Ga&&S.setAttributeValue(Ga):I.getCell(4)==ma?S.getPrefix()!=Ga&&S.setPrefix(Ga):I.getCell(5)==ma?S.getSuffix()!=Ga&&S.setSuffix(Ga):I.getCell(6)==ma&&S.getSeparator()!=Ga&&S.setSeparator(Ga);ma.setValue(Ga);return!0},Aa=function(I,S,ma,Ga){I=null;if(S){I=KTableUIAbstractView.createCellId(Y.getRow(ma),Y.getColumn(7));I=C.getJqUi().find("#"+I);var Oa=ma-f.getHeadRowCount();ma=$("<div>");ma.text(c.get("insert",
"\u63d2\u5165"));ma.addClass("extreport-schedule-center-coding-rule-table-op");ma.addClass("extreport-schedule-center-coding-rule-table-op-insert");ma.appendTo(I);ma.on("click",function(xb){C.doInsertRow(Oa)});ma=$("<div>");ma.text(c.get("delete","\u5220\u9664"));ma.addClass("extreport-schedule-center-coding-rule-table-op");ma.addClass("extreport-schedule-center-coding-rule-table-op-delete");ma.appendTo(I);ma.on("click",function(xb){C.doDeleteRow(Oa)});ma=$("<div>");ma.text(c.get("top","\u4e0a\u79fb"));
ma.addClass("extreport-schedule-center-coding-rule-table-op");ma.addClass("extreport-schedule-center-coding-rule-table-op-top");0==Oa&&ma.css("display","none");ma.appendTo(I);ma.on("click",function(xb){C.doTopRow(Oa)})}else ua&&ua.find(".extreport-schedule-center-coding-rule-table-op").remove();ua=I},Ka=function(){Y.addColumns(8);Y.getColumn(0).setWidth(20);Y.getColumn(1).setWidth(50);Y.getColumn(2).setWidth(110);Y.getColumn(3).setWidth(200);Y.getColumn(4).setWidth(80);Y.getColumn(5).setWidth(80);
Y.getColumn(6).setWidth(80);Y.getColumn(7).setWidth(162);var I=f.createHeadRow(Y);I.getCell(1).setValue(c.get("sequence","\u5e8f\u53f7"));I.getCell(2).setValue(c.get("type","\u7c7b\u578b"));I.getCell(3).setValue(c.get("attribute","\u5c5e\u6027\u503c"));I.getCell(4).setValue(c.get("prefix","\u524d\u7f00"));I.getCell(5).setValue(c.get("suffix","\u540e\u7f00"));I.getCell(6).setValue(c.get("separator","\u5206\u9694\u7b26"))}}function ib(d){var b,C,p,L,G;this.getWidth=function(){return 320};this.getHeight=
function(){return 240};this.getJqUi=function(){if(!b){b=$("<div>");var R=new Ea;R.setRequired(!0);var Y=R.getJqUi();R.setText(c.get("length","\u957f\u5ea6"));p=new za;p.setValue(0);p.setConstraint(0,10,1);var ua=p.getJqUi();R=0;n.layoutCtrl(Y,45,R,60,23);n.layoutCtrl(ua,105,R,140,23);Y.appendTo(b);ua.appendTo(b);R=new Ea;R.setRequired(!0);Y=R.getJqUi();R.setText(c.get("initial","\u521d\u59cb\u503c"));L=new za;L.setValue(0);L.setConstraint(0,999999999,1);ua=L.getJqUi();R=45;n.layoutCtrl(Y,45,R,60,
23);n.layoutCtrl(ua,105,R,140,23);Y.appendTo(b);ua.appendTo(b);R=new Ea;R.setRequired(!0);Y=R.getJqUi();R.setText(c.get("step","\u6b65\u957f"));G=new za;G.setValue(0);G.setConstraint(0,999999999,1);ua=G.getJqUi();R=90;n.layoutCtrl(Y,45,R,60,23);n.layoutCtrl(ua,105,R,140,23);Y.appendTo(b);ua.appendTo(b)}return b};this.setMessageCurtain=function(R){C=R};this.getMessageCurtain=function(){return C};this.updateUi=function(R){R=R.split("-");3==R.length&&(p.setValue(parseInt(R[0])),L.setValue(parseInt(R[1])),
G.setValue(parseInt(R[2])))};this.checkUIInput=function(R){var Y=p.getValue(),ua=L.getValue(),N=G.getValue();if(0==Y)return c.get("lengthNotNull","\u957f\u5ea6\u4e0d\u80fd\u4e3a0\u3002");for(var D="",va=0;va<Y;va++)D+="9";Y=parseInt(D);if(0==N)return c.get("stepNotNull","\u6b65\u957f\u4e0d\u80fd\u4e3a0\u3002");if(ua>Y)return c.get("initialExceedMaxValue","\u521d\u59cb\u503c\u4e0d\u80fd\u8d85\u8fc7\u6700\u5927\u503c\u3002");if(N>Y)return c.get("stepExceedMaxValue","\u6b65\u957f\u4e0d\u80fd\u8d85\u8fc7\u6700\u5927\u503c\u3002");
R(!0)};this.getModelFromUI=function(){return p.getValue()+"-"+L.getValue()+"-"+G.getValue()}}function Eb(){E.AbstractTabPane.call(this);var d;this.getWidth=function(){return 394};this.getHeight=function(){return 425};this.setMessageCurtain=function(b){d=b};this.getMessageCurtain=function(){return d}}function Ia(d){aa.call(this);var b=this,C=!1,p,L,G=!1,R=null;this.setSelectedReport=function(N){(p=N)&&p.reportId?L&&L(function(){p.bGetFilterParamOK=!0;b.updateUI(Y)},function(D,va){p.bGetFilterParamOK=
!1;p.sGetFilterParamWarningMsg=va;b.updateUI(Y)}):b.updateUI(Y)};this.setFunSelectedItemListener=function(N){L=N};this.getSelectedReport=function(){return p};this.protectedClickEvent=function(){C||ua()};this.getDisplayText=function(){if(p){var N=p.reportName;if(N){var D=c.get("selected","\u5df2\u9009\u62e9#1");D=D.replace("#1",N);p.publishAuthType==fa.NO_AUTH?(G=!0,R=p.publishAuthWarningMsg):G=!1}else D=c.get("reportNotFound","\u8be5\u62a5\u8868\u6a21\u677f\u5df2\u88ab\u5220\u9664"),G=!0,R=D}else D=
c.get("selectNoReport","\u5c1a\u672a\u9009\u62e9\u62a5\u8868\u6a21\u677f"),G=!1;return D};var Y=function(){if(G){var N=b.getF7SelectorUi();N=N.children(".sa-ctrl-f7selector-textcontainer");var D=N.children(".sa-ctrl-f7selector-text");D.css("left","20px");D=q.createWarning();D.attr("id",R);D.attr("title",R);D.addClass("sa-ctrl-f7selector-text");D.css("margin-top","-8px");D.appendTo(N)}else N=b.getF7SelectorUi(),N=N.children(".sa-ctrl-f7selector-textcontainer"),R&&(N.find("#"+R).remove(),D=N.children(".sa-ctrl-f7selector-text"),
D.css("left","4px"))},ua=function(){C=!0;var N=new ba(d),D=new Q(c.get("selectReport2","\u9009\u62e9\u62a5\u8868\u6a21\u677f"),d,N);D.setFunClosedCallback(function(){N.closedCallback()});D.setCallback(function(va){C=!1;if(!va)return!0;p=va;p.bRestoreIfGetFilterParamFail=!0;L&&L(function(){b.updateUI(Y)},function(Wa,Ha){p=null;b.updateUI(Y)})});D.showDialog();p&&N.modelToUI(p)}}function Kb(d){aa.call(this);var b=this,C,p,L,G,R=!0,Y=null,ua=!1;this.setFilerInfo=function(D){L=D};this.setScheduleId=function(D){G=
D};this.setNeedFilterParam=function(D){R=D};this.isNeedFilterParam=function(){return R};this.setSelectedReport=function(D){Y=D};this.getSelectedFilterParam=function(){return C?$.extend(!0,{},C):null};this.setSelectedFilterParam=function(D){C=D;b.updateUI()};this.protectedClickEvent=function(){if(Y)if(Y.publishAuthType==fa.NO_AUTH){var D=Y.publishAuthWarningMsg;b.getMessageCurtain().showPrompt(D)}else 0==Y.bGetFilterParamOK?(D=Y.sGetFilterParamWarningMsg,b.getMessageCurtain().showPrompt(D)):!ua&&R&&
L&&N();else b.getMessageCurtain().showPrompt(c.get("selectReportFirstly","\u8bf7\u5148\u9009\u62e9\u62a5\u8868\u6a21\u677f\u3002"))};this.getDisplayText=function(){return!C&&R?c.get("setNoFilterParam","\u5c1a\u672a\u8bbe\u7f6e\u8fc7\u6ee4\u53c2\u6570"):R?c.get("set","\u5df2\u8bbe\u7f6e"):c.get("noParam","\u65e0\u53c2\u6570")};var N=function(){ua=!0;var D=new ja(d);D.setFilterInfo(L);D.setScheduleId(G);C&&D.setSelectedFilterParamAndVar(C,p);D=new Q(c.get("setFilterParam","\u8bbe\u7f6e\u8fc7\u6ee4\u53c2\u6570"),
d,D);D.setCallback(function(va){ua=!1;if(!va)return!0;C=va[0];p=va[1];b.updateUI()});D.showDialog()}}function Nb(d){aa.call(this);var b=this,C,p=!1;this.getSelectedSchedule=function(){return C};this.setSelectedSchedule=function(G){C=G;b.updateUI()};this.protectedClickEvent=function(){p||L()};this.getDisplayText=function(){return C?c.get("set","\u5df2\u8bbe\u7f6e"):c.get("setNoSchedulePlan","\u5c1a\u672a\u8bbe\u7f6e\u8c03\u5ea6\u8ba1\u5212")};var L=function(){p=!0;var G=new Sa(d),R=new Q(c.get("setSchedulePlan",
"\u8bbe\u7f6e\u8c03\u5ea6\u8ba1\u5212"),d,G);R.setCallback(function(Y){p=!1;if(!Y)return!0;C=Y;b.updateUI()});R.showDialog();C&&G.updateUi(C)}}function Ob(d){aa.call(this);var b=this,C,p=!1;this.getSelectedCodingRuleInfo=function(){return C};this.setSelectedCodingRuleInfo=function(G){C=G;b.updateUI()};this.protectedClickEvent=function(){p||L()};this.getDisplayText=function(){return C?c.get("set","\u5df2\u8bbe\u7f6e"):c.get("setNoCodingRule","\u5c1a\u672a\u8bbe\u7f6e\u7f16\u7801\u89c4\u5219")};var L=
function(){p=!0;var G=new hb(d),R=new Q(c.get("setCodingRule","\u8bbe\u7f6e\u7f16\u7801\u89c4\u5219"),d,G);R.setCallback(function(Y){p=!1;if(!Y)return!0;C=Y.copy();b.updateUI()});R.setFuncBeforeClosingCheck(function(Y){G.beforeClosingCheck(Y)});R.showDialog();G.updateUi(C&&C.copy())}}function ab(){this.getTailBlankForDragging=function(){return-1};this.isRowDraggable=function(d,b){return!1};this.isColumnDraggable=function(d,b){return d.getColumnsCount()==b+1?!1:!0};this.getMinRowHeightLimited=function(d,
b){return 3};this.getMinColumnWidthLimited=function(d,b){return 4};this.rowDraggedAction=function(d,b,C){var p=d.isSyncUIWhenModelChanged();d.setSyncUIWhenModelChanged(!0);b=d.getRow(b);b.setHeight(b.getHeight()+C);d.setSyncUIWhenModelChanged(p)};this.setMinColumnWidth=function(d){};this.columnDraggedAction=function(d,b,C){var p=d.isSyncUIWhenModelChanged();d.setSyncUIWhenModelChanged(!0);b=d.getColumn(b);b.setWidth(b.getWidth()+C);d.setSyncUIWhenModelChanged(p)}}function Q(d,b,C){v.call(this);var p=
this,L=this.protectedMethod,G,R,Y,ua;(function(){L.setTitle(d);C.setMessageCurtain(L.getMessageCurtain());p.setSize(C.getWidth(),C.getHeight());L.setSelectable(!1);L.setContentPaneCreator(function(){return C.getJqUi()});L.setClosingChecker2(function(D){ua&&ua();Y?Y(function(){N(D)}):N(D)},function(D){ua&&ua();R&&R(G);D(!0)},!0);L.setClosingAction(function(D){})})();this.setCallback=function(D){R=D};this.setFuncBeforeClosingCheck=function(D){Y=D};this.setFunClosedCallback=function(D){ua=D};var N=function(D){var va=
C.checkUIInput(function(Wa){G=C.getModelFromUI();R&&R(G);D(!0)});va&&(L.getMessageCurtain().showPrompt(va,2E3),D(!1))}}function aa(){var d=this,b,C,p,L=!1;this.getJqUi=function(){b||G();return b};this.getF7SelectorUi=function(){return C&&C.getJqUi()};this.setMessageCurtain=function(R){p=R};this.getMessageCurtain=function(){return p};this.setNeedTooltips=function(R){L=R};this.getDisplayText=function(){throw Error("override me");};this.protectedClickEvent=function(){throw Error("override me");};this.updateUI=
function(R){C.setModel(d.getDisplayText());L&&C.setTooltips(d.getDisplayText());R&&R()};var G=function(){b=$("<div>");b.addClass("extreport-schedule-center-dialog-selector-input");C=new Ya;C.addActionListener(function(R){d.protectedClickEvent()});C.getJqUi().appendTo(b);d.updateUI()}}function ha(d){v.call(this);var b=this.protectedMethod,C=this,p;(function(){b.setTitle(c.get("scheduleDetailInfo","\u8c03\u5ea6\u660e\u7ec6\u60c5\u51b5"));C.setSize(977,530);b.setSelectable(!0);b.setContentPaneCreator(function(){p=
new pa;p.setGlobal(d);p.setMessageCurtain(b.getMessageCurtain());return p.getJqUi()});b.setFooterClosingOnly(!0);b.setClosingChecker2(null,function(L){b.destroy();return!0});b.setClosingAction(function(L){})})()}function pa(){function d(W){KTDefaultCellRender.call(this,W);var Da=this,pb=this.paintCellUI;this.paintCellUI=function(rb,Ab){var nb=Da.getCurrentRowIdx(),Qb=Da.getCurrentRow(),Mb=Da.getCurrentColIdx(),Vb=Qb.getUserObject();Da.setPaddingHV(8,1);if(nb<f.getHeadRowCount())pb(rb,Ab),1===nb&&
(ua||3!==Mb||(ac(),ua.addDefaultSortingTips($(rb),Aa[3])),!ua||0!==Mb&&2!==Mb&&3!==Mb&&4!==Mb||ua.addSortingTips($(rb),Aa[Mb]));else if(0===Mb)rb=$(rb),Ab=$("<span>"),Ab.addClass("extreport-schedule-detail-table-cell"),nb=Vb.getScheduleConfigName(),tb(Ab,zb,nb),Ab.appendTo(rb);else if(5===Mb)Ab=Vb.getExecuteState(),1===Ab?(nb="green",Qb=c.get("success","\u6210\u529f")):0===Ab?(nb="blue",Qb=c.get("inProgress","\u8fdb\u884c\u4e2d")):(nb="red",Qb=c.get("fail","\u5931\u8d25")),rb=$(rb),Mb=$("<div>"),
Mb.text(Qb),Mb.addClass("extreport-schedule-detail-state"),Mb.css("color",nb),Mb.appendTo(rb),2===Ab&&(nb=$("<div>"),nb.text(c.get("insufficientScheduleTimes","\u8c03\u5ea6\u6b21\u6570\u4e0d\u8db3")),nb.attr("title",c.get("insufficientScheduleTimes","\u8c03\u5ea6\u6b21\u6570\u4e0d\u8db3")),nb.addClass("extreport-schedule-detail-error-text"),nb.appendTo(rb)),4===Ab&&(nb=$("<div>"),nb.text(c.get("detail","\u8be6\u60c5")),nb.addClass("extreport-schedule-detail-error-detail"),nb.appendTo(rb),nb.on("click",
function(Lb){gb(Vb.getScheduleId())})),9===Ab&&(nb=$("<div>"),nb.text(c.get("scheduleAlreadyExecuting","\u540c\u4e00\u8c03\u5ea6\u6b63\u5728\u6267\u884c")),nb.attr("title",c.get("scheduleAlreadyExecuting","\u540c\u4e00\u8c03\u5ea6\u6b63\u5728\u6267\u884c")),nb.addClass("extreport-schedule-detail-error-text"),nb.appendTo(rb));else if(6===Mb){var Ra=Vb.getReportId(),Va=Vb.getSnapId(),$a=Vb.getSnapName(),Bb=Vb.getSnapGroupType();Ab=Ra&&Va&&$a&&Bb;rb=$(rb);nb=$("<div>");nb.text(c.get("previewSnap","\u67e5\u770b\u5feb\u7167"));
nb.addClass("extreport-schedule-detail-open-link");Ab&&nb.appendTo(rb);nb.on("click",function(Lb){Lb=t.getUrlParamValue();var Rb=C.getParamPathPrefix()+"/qing_rpt/snapPreview.do";Rb=P.appendParamToUrl(Rb,"extReportId",Ra);Rb=P.appendParamToUrl(Rb,"snapId",Va);Rb=P.appendParamToUrl(Rb,"snapName",$a);Rb=P.appendParamToUrl(Rb,"snapGroupType",Bb);Lb&&(Rb=P.appendParamToUrl(Rb,"skin",Lb));la.openNewTab($a,Rb)})}else Jb(rb,Mb,Vb)};var Jb=function(rb,Ab,nb){var Qb=$("<span>");Qb.addClass("extreport-schedule-detail-table-cell");
switch(Ab){case 1:var Mb=nb.getOutput();break;case 2:Ab=nb.getMethodName();"rptSnapSchedule"===Ab?Mb=Gb[1].getTypeName():"rptSnapOnceSchedule"===Ab&&(Mb=Gb[2].getTypeName());break;case 3:Mb=nb.getExecuteFormatTime();break;case 4:Mb=nb.getEndFormatTime()}Qb.text(Mb);Qb.attr("title",Mb);Qb.appendTo(rb)},gb=function(rb){var Ab=C.createFacade(function(nb){if(nb){var Qb=nb.errorCode,Mb=nb.errorMessage,Vb=new Fb;Vb.setOptionType(Fb.OPTION_OK);Qb=Qb&&Mb?c.get("errorCodeMessage","\u9519\u8bef\u4fe1\u606f\uff1a#1\r\n\u9519\u8bef\u7801\uff1a#2").replace("#1",
Mb).replace("#2",Qb):Qb&&!Mb?c.get("errorCode","\u9519\u8bef\u7801\uff1a#1\u3002").replace("#1",Qb):!Qb&&Mb?c.get("errorMessage","\u9519\u8bef\u4fe1\u606f\uff1a#1\u3002").replace("#1",Mb):c.get("noErrorCodeMessage","\u6682\u65e0\u9519\u8bef\u7801\u548c\u9519\u8bef\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b\u8be6\u60c5\u3002");(nb=nb.errorStackTrace)&&Vb.setDetail(nb);Vb.setMessage(Qb);Vb.showDialog()}else p.showPrompt(c.get("notFindExceptionLog","\u672a\u627e\u5230\u5bf9\u5e94\u7684\u65e5\u5fd7\u3002"),
2E3)},function(nb,Qb){return!1});Ab.setShowBlocking(!0);Ab.loadSnapScheduleExceptionLog(rb)}}function b(){KTableUIDraggableAdjustingHandler.CustomExpendor.call(this);this.getTailBlankForDragging=function(){return 0}}var C,p,L,G,R,Y,ua,N,D,va,Wa,Ha,mb,qb,zb,Ba=0,lb=0,ia=new da,sa=new ec,yb=[new r(c.get("allType","\u5168\u90e8\u72b6\u6001"),0),new r(c.get("success","\u6210\u529f"),1),new r(c.get("fail","\u5931\u8d25"),2),new r(c.get("inProgress","\u8fdb\u884c\u4e2d"),3)],Gb=[new r(c.get("scheduleTypeAll",
"\u5168\u90e8\u8c03\u5ea6\u7c7b\u578b"),0),new r(c.get("scheduleTypeTiming","\u5b9a\u65f6\u8c03\u5ea6"),1),new r(c.get("scheduleTypeManual","\u624b\u52a8\u6267\u884c"),2)],Aa="scheduleName output scheduleType executeTime endTime executeState operation".split(" ");this.getJqUi=function(){if(null==va){va=$("<div>");va.css({position:"absolute",width:"945px",height:"436px",top:"0px"});Wa=$("<div>");Wa.addClass("extreport-schedule-detail-filter-area");Wa.appendTo(va);Ha=$("<div>");mb=$("<span>");mb.text(0);
var W=$("<span style='color: #688BF7;'>");W.append(mb);W.append(c.get("times","\u6b21"));D=new db;D.setIconType(db.ICON_TYPE_INFO);D.setTipsSize(250,255);D.setTipsHtml(I());var Da=D.getJqUi();Da.css({position:"relative","margin-left":"2px"});Ha.text(c.get("todayUsedCountForPerson","\u4eca\u65e5\u5df2\u4f7f\u7528\u4e2a\u4eba\u8c03\u5ea6\u6b21\u6570"));Ha.append(Da);Ha.append("\uff1a");Ha.append(W);Wa.prepend(Ha);Ha.addClass("extreport-schedule-detail-text-label");Ha.hide();Y||(Y=new fc,Y.setFunConfirmListener(xb),
W=Y.getJqUi(),W.addClass("extreport-schedule-detail-date-range"),W.appendTo(Wa));G||(G=Ib(yb,xb),W=G.getJqUi(),W.addClass("extreport-schedule-detail-schedule-state-combobox"),W.appendTo(Wa));R||(R=Ib(Gb,xb),W=R.getJqUi(),W.addClass("extreport-schedule-detail-schedule-type-combobox"),W.appendTo(Wa));L||(L=new u,L.setPlaceholder(c.get("searchScheduleName","\u641c\u7d22\u8c03\u5ea6\u540d\u79f0")),L.setSearchListenerDelay(1E3),L.setShowSearchIcon(!0),L.addSearchListener(xb),W=L.getJqUi(),W.attr("title",
c.get("searchScheduleName","\u641c\u7d22\u8c03\u5ea6\u540d\u79f0")),W.css({width:"170px",height:"25px"}),Da=$("<div>"),W.appendTo(Da),n.layoutCtrl(Da,775,3,170,25),Da.appendTo(Wa));Ka()}return va};this.setGlobal=function(W){C=W};this.setMessageCurtain=function(W){p=W};var Ka=function(){var W=$("<div>");W.addClass("extreport-schedule-detail-table-area");W.appendTo(va);sa.setJumpToPageListener(function(pb,Jb,gb){Ga(pb,Jb,gb)});sa.setComboBoxItemModelsAndSelectedItem([5,10,20,50,100,500,1E3],2);sa.getJqUi().appendTo(W);
var Da=new db;Da.setIconType(db.ICON_TYPE_QUESTION);Da.setTipsHtml(c.get("historyTips","\u4ec5\u4fdd\u7559\u6700\u8fd1\u4e00\u5e74\u7684\u8c03\u5ea6\u8be6\u60c5\u3002"));qb=Da.getJqUi();Oa();qb.css("top","8px");qb.appendTo(W);N||(N=f.createTable(),ma(),Da=new d(N),Da.setOutsideVisible(!1),N.setCellRender(Da),N.setDraggableAdjusting(!0,f.getHeadRowCount(),0,new b),N.setCellAcrossListener(function(pb,Jb,gb){ua&&ua.hideLastShowSortTips();1===Jb&&1!==gb&&5!==gb&&6!==gb&&(ua||ac(),ua.showSortingTips(pb,
Aa[gb]))}),Da=$(N.getUI()),n.layoutCtrl(Da,10,32,929,358),Da.appendTo(W));Ga(1,sa.getPageSize(),sa.resetPaginationAndJumpToFirstPage)},I=function(W,Da,pb,Jb){var gb=$("<div>"),rb=$("<div>");rb.addClass("extreport-schedule-count-tips-top");gb.append(rb);S(c.get("personalWithColon","\u4e2a\u4eba\uff1a"),W,Da,rb);S(c.get("publicWithColon","\u516c\u5171\uff1a"),pb,Jb,rb);W=$("<div>");W.html(c.get("scheduleContTips","\u8c03\u5ea6\u6b21\u6570\u8bf4\u660e\uff1a<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u6bcf\u7528\u6237\u6bcf\u5929\u53ef\u514d\u8d39\u4f7f\u752810\u6b21\u8c03\u5ea6\uff0c\u8d85\u8fc710\u6b21\u540e\u7684\u8c03\u5ea6\u4e0d\u6267\u884c\uff1b\u8f7b\u5b58\u50a8\u6269\u5bb9\u540e\u8d60\u900110\u6b21\u8c03\u5ea6/G\uff0c\u8d60\u9001\u90e8\u5206\u5728\u5f53\u524d\u79df\u6237\u5185\u7684\u6240\u6709\u7528\u6237\u95f4\u5171\u4eab\u3002"));
W.addClass("extreport-schedule-count-tips-bottom");gb.append(W);return gb},S=function(W,Da,pb,Jb){var gb=$("<div>");gb.addClass("extreport-schedule-count-tips-top-info");gb.text(W);gb.css("font-weight","bold");Jb.append(gb);gb=$("<div>");gb.addClass("extreport-schedule-count-tips-top-info");gb.text(c.get("todayUsedCount","\u4eca\u65e5\u5df2\u4f7f\u7528\u8c03\u5ea6\u6b21\u6570\uff1a"));W=$("<span style='color: #688BF7;'>");W.text(Da?Da:0);W.append(c.get("times","\u6b21"));gb.append(W);Jb.append(gb);
gb=$("<div>");gb.addClass("extreport-schedule-count-tips-top-info");gb.text(c.get("todayScheduleQuota","\u4eca\u65e5\u8c03\u5ea6\u989d\u5ea6\uff1a"));var rb=$("<span>");rb.text(pb?pb:0);rb.append(c.get("times","\u6b21"));gb.append(rb);Jb.append(gb);Da&&pb&&(Da/=pb,1<Da&&W.text(pb+c.get("times","\u6b21")),.9<=Da&&W.css("color","#F34E4E"))},ma=function(){N.addColumns(7);N.getColumn(0).setWidth(170);N.getColumn(1).setWidth(172);N.getColumn(2).setWidth(100);N.getColumn(3).setWidth(135);N.getColumn(4).setWidth(135);
N.getColumn(5).setWidth(120);N.getColumn(6).setWidth(86);var W=f.createHeadRow(N);W.getCell(0).setValue(c.get("scheduleName","\u8c03\u5ea6\u540d\u79f0"));W.getCell(1).setValue(c.get("output","\u8f93\u51fa"));W.getCell(2).setValue(c.get("scheduleType","\u8c03\u5ea6\u7c7b\u578b"));W.getCell(3).setValue(c.get("executeStartTime","\u6267\u884c\u5f00\u59cb\u65f6\u95f4"));W.getCell(4).setValue(c.get("executeEndTime","\u6267\u884c\u7ed3\u675f\u65f6\u95f4"));W.getCell(5).setValue(c.get("executeState","\u72b6\u6001"));
W.getCell(6).setValue(c.get("operation","\u64cd\u4f5c"))},Ga=function(W,Da,pb){var Jb=C.createFacade(function(Ab){Ab&&ia.fromJsonObject(Ab);pb?pb(ia.getTotalRow()):sa.refreshPagination();Ab=ia.isPublic();var nb=ia.getUserUsedScheduleCount(),Qb=ia.getUserTotalScheduleCount(),Mb=ia.getTenantUsedScheduleCount(),Vb=ia.getTenantTotalScheduleCount();Ab&&(Ha.show(),mb.text(nb),Ab=I(nb,Qb,Mb,Vb),D.setTipsHtml(Ab));Oa();f.clearWithoutHead(N);Ab=ia.getDetails();for(nb=0;nb<Ab.length;nb++)f.createRow(N).setUserObject(Ab[nb]);
f.refresh(N)},function(Ab,nb){return!1}),gb=Tb(),rb=Sb();Jb.setShowBlocking(!0);Jb.setBlockingJqUi(va);Jb.getSnapScheduleResourceDetail(gb[0],gb[1],Ba,lb,zb,rb.getField(),rb.getOrder(),W,Da)},Oa=function(){var W=ia.getTotalRow();W=(-1<H.getUrlParamValue("language").indexOf("en")?74:32)+8*(W+"").length;qb.css("left",W)},xb=function(){zb=L.getText().trim();Ba=G.getSelected().getTypeId();lb=R.getSelected().getTypeId();Ga(1,sa.getPageSize(),sa.resetPaginationAndJumpToFirstPage)},Ib=function(W,Da){var pb=
new e;pb.setItemModels(W);pb.setSelected(W[0]);pb.addSelectedChangedListener(Da);pb.setCustomPainter(function(Jb,gb,rb){gb.text(rb.getTypeName());gb.attr("title",rb.getTypeName())});return pb},Sb=function(){var W;ua&&(W=ua.getShowSortingModel());W||(W=new ra,W.setField(Aa[3]),W.setOrder(ra.ORDER_DESC));return W},Tb=function(){var W=Y.getDateRange();if(null==W){W=(new Date(ya())).getTime();var Da=(new Date(ya())).getTime()+864E5-1;return[W,Da]}return W},ac=function(){ua=new dc;ua.setDefaultField(Aa[3]);
ua.setSortTipsRightMargin(3);ua.setSortTipsBottomMargin(2);ua.setFunSortChangeListener(function(W){Ga(1,sa.getPageSize(),sa.resetPaginationAndJumpToFirstPage)})},ya=function(){var W=new Date,Da=W.getFullYear(),pb=W.getMonth()+1;W=W.getDate();return Da+"/"+pb+"/"+W}}function r(d,b){this.getTypeName=function(){return d};this.getTypeId=function(){return b}}function da(){var d=!0,b=0,C=0,p=0,L=0,G=0,R=[];this.isPublic=function(){return d};this.getTotalRow=function(){return b};this.getUserUsedScheduleCount=
function(){return C};this.getUserTotalScheduleCount=function(){return p};this.getTenantUsedScheduleCount=function(){return L};this.getTenantTotalScheduleCount=function(){return G};this.getDetails=function(){return R};this.fromJsonObject=function(Y){d=Y.isPublic;b=Y.totalRow;C=Y.userUsedScheduleCount;p=Y.userTotalScheduleCount;L=Y.tenantUsedScheduleCount;G=Y.tenantTotalScheduleCount;Y=Y.details;R=[];if(Y)for(var ua=0;ua<Y.length;ua++){var N=new A;N.fromJsonObject(Y[ua]);R.push(N)}};this.toJsonObject=
function(){var Y={};Y.isPublic=d;Y.totalRow=b;Y.userUsedScheduleCount=C;Y.userTotalScheduleCount=p;Y.tenantUsedScheduleCount=L;Y.tenantTotalScheduleCount=G;for(var ua=[],N=0;N<R.length;N++){var D=R[N].toJsonObject();ua.push(D)}Y.details=ua;return Y}}function A(){var d,b,C,p,L,G,R,Y,ua,N,D,va,Wa;this.getScheduleId=function(){return d};this.getSnapId=function(){return b};this.getSnapName=function(){return C};this.getOutput=function(){return p};this.getReportId=function(){return L};this.getScheduleConfigName=
function(){return G};this.getSnapGroupType=function(){return R};this.getMethodName=function(){return Y};this.getExecuteTime=function(){return ua};this.getExecuteFormatTime=function(){return N};this.getEndTime=function(){return D};this.getEndFormatTime=function(){return va};this.getExecuteState=function(){return Wa};this.fromJsonObject=function(Ha){d=Ha.scheduleId;b=Ha.snapId;C=Ha.snapName;p=Ha.output;L=Ha.reportId;G=Ha.scheduleConfigName;R=Ha.snapGroupType;Y=Ha.methodName;ua=Ha.executeTime;N=Ha.executeFormatTime;
D=Ha.endTime;va=Ha.endFormatTime;Wa=Ha.executeState};this.toJsonObject=function(){var Ha={};Ha.scheduleId=d;Ha.snapId=b;Ha.snapName=C;Ha.output=p;Ha.reportId=L;Ha.scheduleConfigName=G;Ha.snapGroupType=R;Ha.methodName=Y;Ha.executeTime=ua;Ha.executeFormatTime=N;Ha.endTime=D;Ha.endFormatTime=va;Ha.executeState=Wa;return Ha}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&
(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.snapschedule&&(com.kingdee.bos.extreport.snapschedule={});"undefined"==typeof com.kingdee.bos.extreport.snapschedule.ui&&(com.kingdee.bos.extreport.snapschedule.ui={});com.kingdee.bos.extreport.snapschedule.ui.Main=function(){var d,b,C,p,L,G,R,Y,ua,N,D,va,Wa,Ha,mb,qb,zb,Ba=new $b,lb,ia=new function(){var Ra,Va,$a,Bb,Lb,Rb=new T;this.addWindowResizeListener=function(Ub){Rb.addListener(Ub)};this.removeWindowResizeListener=
function(Ub){Rb.removeListener(Ub)};this.fireWindowResizeEvent=function(){Rb.fireEvent(function(Ub){Ub()})};this.getMessageCurtain=function(){Ra||(Ra=new a,Ra.getJqUi().appendTo($("body")));return Ra};this.getMacroManageRemoteImpl=function(){Lb||(Lb=Yb("/qing/macroManage.do"));return Lb};var Yb=function(Ub){var Zb=P.decodeParamFromUrl(window.location.search,"path");Ub=(Zb?Zb:"/ierp")+Ub;Zb=new wb;Zb.setRemoteUrl(Ub);return Zb},cc=function(Ub,Zb,bc,gc){return new Fa(Ub,Zb,function(hc,ic){return bc?
bc(hc,ic):!1},gc)};this.createFacade=function(Ub,Zb,bc){Va||(Va=Yb("/qing_rpt/snapschedule.do"));return cc(Va,Ub,Zb,bc)};this.createPublishFacade=function(Ub,Zb,bc){$a||($a=Yb("/qing/publishTo.do"));return cc($a,Ub,Zb,bc)};this.createAnalysisCenterFacade=function(Ub,Zb,bc){Bb||(Bb=Yb("/qing/analysisCenter.do"));return cc(Bb,Ub,Zb,bc)};this.getParamPathPrefix=function(){var Ub=P.decodeParamFromUrl(window.location.search,"path");return Ub?Ub:"/ierp"}};this.start=function(){B.init();Na.hookCollector(function(Va,
$a){F.interestInBehavior(Va,$a)});var Ra=$(document.body);d=$("<div>");d.addClass("extreport-schedule-center");ua=new l;b=ua.getJqUi();b.addClass("extreport-schedule-center-toolbar");N=ua.createButton(b,!1,ac,c.get("add","\u65b0\u589e"),c.get("add","\u65b0\u589e"));D=ua.createButton(b,!1,ya,c.get("edit","\u7f16\u8f91"),c.get("edit","\u7f16\u8f91"));va=ua.createButton(b,!1,W,c.get("remove","\u5220\u9664"),c.get("remove","\u5220\u9664"));Wa=ua.createButton(b,!1,Da,c.get("enable","\u542f\u7528\u8c03\u5ea6"),
c.get("enable","\u542f\u7528\u8c03\u5ea6"));Ha=ua.createButton(b,!1,pb,c.get("disable","\u7981\u7528\u8c03\u5ea6"),c.get("disable","\u7981\u7528\u8c03\u5ea6"));ua.createButton(b,!1,Jb,c.get("scheduleDetail","\u8c03\u5ea6\u660e\u7ec6"),c.get("scheduleDetail","\u8c03\u5ea6\u660e\u7ec6"));ua.createButton(b,!1,gb,c.get("refresh","\u5237\u65b0"),c.get("refresh","\u5237\u65b0"));ua.createButton(b,!1,rb,c.get("close","\u9000\u51fa"),c.get("close","\u9000\u51fa"));b.appendTo(d);Aa();p=$("<div>");p.addClass("extreport-schedule-center-container");
p.appendTo(d);sa();zb||Ka(Oa);S();I();d.appendTo(Ra);F.interestInBehaviorEntrance(F.ENTRANCE_EXTREPORT_SNAP_SCHEDULE_CENTER)};var sa=function(){Ba.setJumpToPageListener(function(Va,$a,Bb){ia.createFacade(function(Lb){yb(Lb,Bb)},function(Lb,Rb){return 8088E3<Lb?(ia.getMessageCurtain().showPrompt(Rb,2E3),!0):!1}).loadScheduleInfo(null,Va,$a,lb)});Ba.setSelectedAllOrNotListener(function(Va,$a){Va?ia.createFacade(function(Bb){for(var Lb=[],Rb=0,Yb=Bb.length;Rb<Yb;Rb++){var cc=new Db;cc.fromJsonObject(Bb[Rb]);
Lb.push(cc)}qb.setSelectedScheduleId(Lb);$a(Bb.length)},function(Bb,Lb){return 8088E3<Bb?(ia.getMessageCurtain().showPrompt(Lb,2E3),!0):!1}).loadAllScheduleInfoBySearch(null,lb):qb.setSelectedScheduleId(null)});Ba.setComboBoxItemModelsAndSelectedItem([5,10,20,50,100,500,1E3],2);var Ra=Ba.getJqUi();Ra.addClass("extreport-schedule-center-pagination");p.append(Ra)},yb=function(Ra,Va,$a){Va?Va(Ra.totalRow):Ba.refreshPagination();Va=Ra.schedules;Ra=Ra.executingScheduleIds;var Bb=Ba.getJqUi();Va&&0<Va.length?
Bb.show():Bb.hide();zb=[];Bb=0;for(var Lb=Va.length;Bb<Lb;Bb++){var Rb=new Db;Rb.fromJsonObject(Va[Bb]);zb.push(Rb)}lb&&0==zb.length?(Ga(null),ma(c.get("nodata","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"))):lb||0!=zb.length?(L&&L.hide(),Ga(zb,Ra)):(Ga(null),ma(c.get("noScheduledata","\u6682\u65e0\u8c03\u5ea6\u8bb0\u5f55\u3002")));$a&&$a(Gb)},Gb=function(){var Ra=ia.createFacade(function($a){for(var Bb=[],Lb=0,Rb=$a.length;Lb<Rb;Lb++){var Yb=new Db;Yb.fromJsonObject($a[Lb]);
Bb.push(Yb)}qb.setSelectedScheduleId(Bb);Ba.refreshSelectedRowTotal($a.length)},function($a,Bb){return 8088E3<$a?(ia.getMessageCurtain().showPrompt(Bb,2E3),!0):!1}),Va=H.getUrlParamValue("scheduleId");Ra.loadAllScheduleInfoBySearch(Va,lb)},Aa=function(Ra){C||(mb=new u,mb.setSearchListenerDelay(1E3),mb.addSearchListener(Tb),mb.setShowSearchIcon(!0),mb.setPlaceholder(c.get("searchContent","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9")),C=mb.getJqUi(),C.addClass("extreport-schedule-center-search-box"),
C.find(":input").on("keydown",function(Va){13==(Va.keyCode||Va.which||Va.charCode)&&Tb()}),C.appendTo(b));C.css("display","block")},Ka=function(Ra){qb=new w;qb.setItemCheckedCallback(function(Va,$a){Ba.refreshSelectedRowTotal($a);N&&D&&va&&Wa&&Ha&&(0>=Va&&0>=$a?(D.setEnabled(!1),va.setEnabled(!1),Wa.setEnabled(!1),Ha.setEnabled(!1)):(1==Va&&1==$a?D.setEnabled(!0):D.setEnabled(!1),va.setEnabled(!0),Wa.setEnabled(!0),Ha.setEnabled(!0)))});qb.setSwitchStateChangeCallback(function(Va,$a){Ab([Va],$a,!0)});
qb.setScheduleExecuteCallback(function(Va,$a,Bb){Vb(Va,$a,Bb)});Y=qb.getJqUi();Y.appendTo(p);xb(Ra)},I=function(){var Ra=new g;Ra.setCallbackImmediately(function(){S();qb.resize();ia.fireWindowResizeEvent()});Ra.setDelay(250);Ra.observe()},S=function(){document.body.style.height=document.documentElement.clientHeight+"px"},ma=function(Ra){L||(L=$("<div>"),L.addClass("extreport-schedule-center-nodata"),L.appendTo(p),G=$("<div>"),n.layoutCtrlCenterAlign(G,220),G.appendTo(L),eb.background(G,"no-data"),
G.addClass("extreport-schedule-center-nodata-icon"),G.css({"margin-top":G.parent().height()/2-110+"px"}),R=$("<div>"),n.layoutCtrlCenterAlign(R,500),R.appendTo(L),R.addClass("extreport-schedule-center-nodata-tip"),R.css({"margin-top":R.parent().height()/2-110+270+"px"}),ia.addWindowResizeListener(function(){var Va=G.parent().height()/2-110;G.css({"margin-top":(0<Va?Va:0)+"px"});Va=R.parent().height()/2-110+270;R.css({"margin-top":(0<Va?Va:0)+"px"})}));R.text(Ra);L.show()},Ga=function(Ra,Va){qb.setModel(Ra);
qb.setExecutingScheduleIds(Va);Ra=qb.keepScrollStatus();qb.updateUi(null,Ra)},Oa=function(Ra){var Va=H.getUrlParamValue("scheduleId");Va&&(qb.setCheckedBox(Va),Ra&&Ra())},xb=function(Ra){var Va=ia.createFacade(function($a){qb.setSelectedScheduleId(null);Ba.refreshSelectedRowTotal(0);yb($a,Ba.resetPaginationAndJumpToFirstPage,Ra)},function($a,Bb){return 8088E3<$a?(ia.getMessageCurtain().showPrompt(Bb,2E3),!0):!1});Va.setShowBlocking(!0);Va.loadScheduleInfo(null,1,Ba.getPageSize(),lb)},Ib=function(){var Ra=
ia.createFacade(function(Va){qb.setSelectedScheduleId(null);Ba.refreshSelectedRowTotal(0);yb(Va,Ba.resetPaginationAndJumpToFirstPage)},function(Va,$a){return 8088E3<Va?(ia.getMessageCurtain().showPrompt($a,2E3),!0):!1});Ra.setShowBlocking(!0);Ra.loadScheduleInfo(null,1,Ba.getPageSize())},Sb=function(Ra,Va){var $a=ia.createFacade(function(Bb){Bb=Bb.schedules;var Lb=new Db;Lb.fromJsonObject(Bb[0]);Va&&Va(Lb)},function(Bb,Lb){return 8088E3<Bb?(ia.getMessageCurtain().showPrompt(Lb,2E3),!0):!1});$a.setShowBlocking(!0);
$a.loadScheduleInfo(Ra,Ba.getCurrentPage(),Ba.getPageSize(),lb)},Tb=function(Ra){lb=mb.getText().trim();qb.setSearchText(lb);xb()},ac=function(){nb(0)},ya=function(){nb(1)},W=function(){for(var Ra=qb.getSelectedSchedule(),Va=[],$a=0;$a<Ra.length;$a++)Va.push(Ra[$a].getScheduleId());Ra=c.get("delConfirmMessage","\u5220\u9664\u9009\u4e2d\u7684#1\u6761\u8c03\u5ea6\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f").replace("#1",Va.length);Mb(Ra,function(){ia.createFacade(function(){ia.getMessageCurtain().showSuccess(c.get("removeScheduleSuccess",
"\u5220\u9664\u8c03\u5ea6\u6210\u529f\u3002"));xb()},function(Bb,Lb){return 8088E3<Bb?(ia.getMessageCurtain().showPrompt(Lb,2E3),!0):!1}).deleteSchedule(Va);Na.occur(Na.DELETE_SNAP_SCHEDULE_TYPE,Va.toString())})},Da=function(){for(var Ra=qb.getSelectedSchedule(),Va=[],$a=0;$a<Ra.length;$a++)k.NO==Ra[$a].getEnableSchedule()&&Va.push(Ra[$a].getScheduleId());0<Va.length?(Ra=c.get("enableConfirmMessage","\u542f\u7528\u9009\u4e2d\u7684#1\u6761\u8c03\u5ea6\uff0c\u786e\u5b9a\u542f\u7528\u5417\uff1f").replace("#1",
Va.length),Mb(Ra,function(){Ab(Va,k.YES)})):ia.getMessageCurtain().showPrompt(c.get("enabledSchedule","\u8be5\u8c03\u5ea6\u5df2\u7ecf\u542f\u7528\u3002"))},pb=function(){for(var Ra=qb.getSelectedSchedule(),Va=[],$a=0;$a<Ra.length;$a++)k.YES==Ra[$a].getEnableSchedule()&&Va.push(Ra[$a].getScheduleId());0<Va.length?(Ra=c.get("disableConfirmMessage","\u7981\u7528\u9009\u4e2d\u7684#1\u6761\u8c03\u5ea6\uff0c\u786e\u5b9a\u7981\u7528\u5417\uff1f").replace("#1",Va.length),Mb(Ra,function(){Ab(Va,k.NO)})):ia.getMessageCurtain().showPrompt(c.get("disabledSchedule",
"\u8be5\u8c03\u5ea6\u5c1a\u672a\u542f\u7528\uff0c\u4e0d\u80fd\u7981\u7528\u3002"))},Jb=function(){(new ha(ia)).showDialog()},gb=function(){var Ra=ia.createFacade(function(Va){qb.setSelectedScheduleId(null);Ba.refreshSelectedRowTotal(0);yb(Va)},function(Va,$a){return 8088E3<Va?(ia.getMessageCurtain().showPrompt($a,2E3),!0):!1});Ra.setShowBlocking(!0);Ra.loadScheduleInfo(null,Ba.getCurrentPage(),Ba.getPageSize(),lb)},rb=function(){la.closeCurrentTab()},Ab=function(Ra,Va,$a){ia.createFacade(function(){var Bb=
k.YES==Va?c.get("enableScheduleSuccess","\u542f\u7528\u8c03\u5ea6\u6210\u529f\u3002"):c.get("disableScheduleSuccess","\u7981\u7528\u8c03\u5ea6\u6210\u529f\u3002");ia.getMessageCurtain().showSuccess(Bb);gb()},function(Bb,Lb){$a&&gb();return 8088E3<Bb?(ia.getMessageCurtain().showPrompt(Lb,2E3),!0):!1}).operateSchedule(Ra,Va);Na.occur(k.YES==Va?Na.ENABLE_SNAP_SCHEDULE_TYPE:Na.DISABLE_SNAP_SCHEDULE_TYPE,Ra.toString())},nb=function(Ra){var Va;if(Ra&&0!=Ra){var $a=Qb();if(!$a&&1!=$a.length){ia.getMessageCurtain().showPrompt(c.get("select",
"\u8bf7\u9009\u62e9\u4e00\u6761\u8bb0\u5f55\u3002"),2E3);return}}$a?Sb($a[0].getScheduleId(),function(Bb){Va={model:Bb};Bb=new h(ia,Va);Bb.setFunSuccessCallback(gb);Bb.showDialog();Bb.setBasicPanelCurrentTab()}):(Ra=new h(ia,Va),Ra.setFunSuccessCallback(Ib),Ra.showDialog(),Ra.setBasicPanelCurrentTab())},Qb=function(){var Ra=qb.getSelectedRowModel();Ra&&0!=Ra.length||ia.getMessageCurtain().showPrompt(c.get("select","\u8bf7\u9009\u62e9\u4e00\u6761\u8bb0\u5f55\u3002"),2E3);return Ra},Mb=function(Ra,
Va){var $a=$(document.body),Bb=$("<div class='sa-ctrl-common-modallayer'>");Bb.appendTo($a);var Lb=new na(Bb),Rb=c.get("operateConfirm","\u64cd\u4f5c\u786e\u8ba4");Lb.setTitle(Rb);Rb=$a.prop("clientWidth");var Yb=$a.prop("clientHeight");Lb.setBounds(Rb-400>>1,Yb-300>>1,400,300);Lb.setToolbarVisible(!1);Rb=$("<div>");Yb=$("<div>");var cc=$("<span>");eb.background(cc,"icon-question");var Ub=$("<span>");Ub.text(Ra);Ub.addClass("extreport-schedule-center-dialog-confirm-msg");Ub.attr("title",Ra);n.layoutCtrl(Yb,
null,null,368,185);n.layoutCtrl(cc,150,10,65,78);n.layoutCtrl(Ub,0,115,370,60);cc.appendTo(Yb);Ub.appendTo(Yb);Yb.appendTo(Rb);Lb.setContent(Rb);Lb.addClosingListener(function(Zb,bc){bc&&Va();Zb.destroy();Bb.remove()});Lb.showFooterPane();Lb.show();Bb.appendTo($a)},Vb=function(Ra,Va,$a){$a=c.get("beginExecution",'\u5f00\u59cb\u6267\u884c"#1"').replace("#1",$a);ia.getMessageCurtain().showSuccess($a);Ra.setEnabled(!1);Ra.setText(c.get("scheduleExecuting","\u6b63\u5728\u6267\u884c..."));$a=ia.createFacade(null,
function(Bb,Lb){return 8088027===Bb?(ia.getMessageCurtain().showError(Lb),!0):8088E3<Bb?(ia.getMessageCurtain().showPrompt(Lb,2E3),!0):!1},function(){Ra.setText(c.get("executeImmediately","\u7acb\u5373\u6267\u884c"));Ra.setEnabled(!0)});$a.setShowBlocking(!1);$a.executeSnapSchedule(Va)}};var H,t,P,n,T,f,q,c,B,la,g,U,F,na,a,e,l,u,v,E,V,Ea,J,y,O,Z,Ya,ub,za,Za,vb,Fb,db,wb,Fa,Na,eb,Ja,X,Ca,Ma,Db,fb,bb,m,k,fa,z,M,ca,ka,qa,wa,Ta,ea,Ua,jb,cb,Cb,La,ob,Hb,sb,Wb,Xb,$b,ec,fc,dc,ra,kb;(function(){var d=com.kingdee.bos.qing;
H=d.Seer;t=d.SkinUtil;d=com.kingdee.bos.qing.common;P=d.Util;n=d.DomUtil;T=d.EventListenerList;d=com.kingdee.bos.qing.common.ui;f=d.TableUtil;q=d.CommonIconUtil;d=com.kingdee.bos.qing.framework.common;c=d.MultilanguageManager.createPackageAccessor(com.kingdee.bos.extreport.snapschedule);B=d.WebPageInitializer;la=d.TabbedUiUtil;g=d.WindowResizeObserver;U=d.GlobalFont;d=com.kingdee.bos.qing.behavior;F=d.BehaviorManager;d=com.kingdee.bos.qing.ui.component;na=d.Dialog;a=d.MessageCurtain;e=d.ComboBox;
l=d.Toolbar;u=d.SearchBox;v=d.AbstractModalDialog;E=d.TabContainer;V=d.List;Ea=d.Label;J=d.TextField;y=d.RadioButton;O=d.RadioButtonGroup;Z=d.SplitPane;Ya=d.F7Selector;ub=d.CheckBox;za=d.Spinner;Za=d.SwitchButton;vb=d.WorkButton;Fb=d.MessageDialog;db=d.HelpIcon;d=com.kingdee.bos.extreport.snapschedule.common;wb=d.RemoteImpl;Fa=d.Facade;Na=d.UserOperationReporter;eb=d.Icons;d=com.kingdee.bos.qing.schedule;Ja=d.ScheduleSelector;d=com.kingdee.bos.extreport.snapschedule.model;X=d.ScheduleInfoModel;Ca=
d.CodingRuleInfoModel;Ma=d.CodingRuleEntryInfoModel;Db=d.ScheduleVOModel;fb=d.FilterSchemeModel;bb=d.OverwriteSnapType;m=d.SaveHyperLinkType;k=d.EnableScheduleType;fa=d.PublishAuthType;z=d.CodingRuleItemModel;M=d.ScheduleNotifyStrategyModel;d=com.kingdee.bos.extreport.snapschedule.filter;ca=d.ScheduleReportFilter;ka=d.SystemVarType;d=com.kingdee.bos.extreport.snapcenter.common.ui;qa=d.SnapContentPanel;wa=d.SaveSnapSourceType;Ta=d.StringUtil;ea=d.ValueTextPair;d=com.kingdee.bos.qing.publish.env;cb=
d.PublishAppMenuFolderNode;Cb=d.PublishAppMenuLeafNode;La=d.AbstractPublishAppMenuNode;d=com.kingdee.bos.qing.publish.model;ob=d.FolderNode;Hb=d.LeafNode;d=com.kingdee.bos.qing.publish.common;Wb=d.FilterModelType;Xb=d.PresetSearchTypeUtil;d=com.kingdee.bos.qing.biz.common;$b=d.ComplexPaginationBar;Ua=d.UserDialogSelector;jb=d.RoleDialogSelector;ec=d.SimplePaginationBar;fc=d.DateRangeSelector;dc=d.SortingHelper;ra=d.SortingModel;d=com.kingdee.bos.qing.collaboration.common.ui;sb=d.ViewCollaborationMemberDialog;
kb=c.get("autoScheduleFilterScheme","\u81ea\u52a8\u8c03\u5ea6\u8fc7\u6ee4\u65b9\u6848")})();var tb=function(d,b,C){if(b&&C){b=b.toUpperCase();var p=C.toUpperCase(),L=p.split(b),G=b.length,R;for(R in L){var Y=p.indexOf(L[R]),ua=C.substr(D,L[R].length);Y+=L[R].length;var N=p.length-Y;p=p.substr(Y,N);C=C.substr(Y,N);Y=$("<span>");Y.text(ua);Y.appendTo(d);if(R!=L.length-1&&1<L.length){var D=p.indexOf(b);ua=C.substr(D,G);Y=D+G;N=p.length-Y;p=p.substr(Y,N);C=C.substr(Y,N);Y=$("<span>");Y.text(ua);Y.css("color",
"red");Y.clone().appendTo(d)}}}else d.text(C);d.attr("title",d.text())}})();
//qingVersionTag: 20250324