var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(Q,fa,V){Q instanceof String&&(Q=String(Q));for(var N=Q.length,da=0;da<N;da++){var ia=Q[da];if(fa.call(V,ia,da,Q))return{i:da,v:ia}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(Q,fa,V){if(Q==Array.prototype||Q==Object.prototype)return Q;Q[fa]=V.value;return Q};$jscomp.getGlobal=function(Q){Q=["object"==typeof globalThis&&globalThis,Q,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var fa=0;fa<Q.length;++fa){var V=Q[fa];if(V&&V.Math==Math)return V}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(Q,fa){var V=$jscomp.propertyToPolyfillSymbol[fa];if(null==V)return Q[fa];V=Q[V];return void 0!==V?V:Q[fa]};
$jscomp.polyfill=function(Q,fa,V,N){fa&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(Q,fa,V,N):$jscomp.polyfillUnisolated(Q,fa,V,N))};$jscomp.polyfillUnisolated=function(Q,fa,V,N){V=$jscomp.global;Q=Q.split(".");for(N=0;N<Q.length-1;N++){var da=Q[N];if(!(da in V))return;V=V[da]}Q=Q[Q.length-1];N=V[Q];fa=fa(N);fa!=N&&null!=fa&&$jscomp.defineProperty(V,Q,{configurable:!0,writable:!0,value:fa})};
$jscomp.polyfillIsolated=function(Q,fa,V,N){var da=Q.split(".");Q=1===da.length;N=da[0];N=!Q&&N in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var ia=0;ia<da.length-1;ia++){var ha=da[ia];if(!(ha in N))return;N=N[ha]}da=da[da.length-1];V=$jscomp.IS_SYMBOL_NATIVE&&"es6"===V?N[da]:null;fa=fa(V);null!=fa&&(Q?$jscomp.defineProperty($jscomp.polyfills,da,{configurable:!0,writable:!0,value:fa}):fa!==V&&(void 0===$jscomp.propertyToPolyfillSymbol[da]&&(V=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[da]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(da):$jscomp.POLYFILL_PREFIX+V+"$"+da),$jscomp.defineProperty(N,$jscomp.propertyToPolyfillSymbol[da],{configurable:!0,writable:!0,value:fa})))};$jscomp.polyfill("Array.prototype.find",function(Q){return Q?Q:function(fa,V){return $jscomp.findInternal(this,fa,V).v}},"es6","es3");
(function(){function Q(E,W,z){var F=W?W:Da,A=l.RUNTIME==E?285:245,G,L,T,qa=new Ha,b,v,K,w,d,p,J;var B=U.get("publicCategory","\u516c\u5171\u76ee\u5f55");var C=U.get("personalCategory","\u4e2a\u4eba\u76ee\u5f55");this.setOuterMessageCurtain=function(n){J=n};this.getWidth=function(){return 392};this.getHeight=function(){return A};this.getJqUi=function(){if(!G){va();var n=function(){if(k())z.snapGroupTypeName="B"==z.snapGroupTypeId?C:B,T.setText(z.snapName),b.doAutoSelected(z.snapGroupTypeName,z.snapGroupTypeId),
K.doAutoSelected(z.snapGroupName,z.snapGroupId),b.setEnable(!1);else if(void 0!=z.snapGroupTypeId&&void 0!=z.snapGroupId&&void 0!=z.snapGroupName&&void 0!=z.isHyperLink)z.snapGroupTypeName="B"==z.snapGroupTypeId?C:B,d.setOn(z.isHyperLink),b.doAutoSelected(z.snapGroupTypeName,z.snapGroupTypeId),K.doAutoSelected(z.snapGroupName,z.snapGroupId),b.setEnable(!0);else{if(v&&1<=v.length){var f=v[0];b.doAutoSelected(f.getName(),f.getId());1==v.length&&b.setEnable(!1)}(f=K.getArrFolderNode())&&1<=f.length&&
(f=f[0],K.doAutoSelected(f.getName(),f.getId()))}};la(b,function(){sa(K,n)})}return G};var k=function(){return z.snapName&&z.snapGroupTypeName&&z.snapGroupTypeId&&z.snapGroupId&&z.snapGroupName},r=function(n){n=new da(n,null);n.setPlaceholder(U.get("selectPathType","\u8bf7\u9009\u62e9\u4fdd\u5b58\u76ee\u5f55\u7c7b\u578b"));n.setMaxHeight(118);n.getJqUi().css("background","white");return n},ca=function(n){n=new da(null,n);n.setPlaceholder(U.get("selectPath","\u8bf7\u9009\u62e9\u4fdd\u5b58\u76ee\u5f55"));
n.setMaxHeight(118);n.getJqUi().css("background","white");return n},H=function(n){var f=[],S=[];if(!n)return S;for(S=0;S<n.length;S++){var h=new V;h.fromJsonObject(n[S]);f.push(h)}return f},la=function(n,f){if(null==v){var S=F.createFacade(function(h){v=H(h);n.setArrFolderNode(v);f&&f()},function(h,a){8099101==h?F.getMessageCurtain().showPrompt(U.get("querySnapCenterPermExp","\u67e5\u8be2\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u5f02\u5e38\u3002"),5E3):8099102==h?F.getMessageCurtain().showPrompt(U.get("noQuerySnapCenterPermExp",
"\u5f53\u524d\u7528\u6237\u6ca1\u6709\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u3002"),5E3):_super.getMessageCurtain().showPrompt(a,5E3);return!0});l.SNAP_SCHEDULE==E?S.setShowBlocking(!1):(S.setShowBlocking(!0),S.setBlockingJqUi(G));S.loadSnapGroupTypes(z.snapId)}else n.setArrFolderNode(v)},sa=function(n,f){if(null==w){var S=F.createFacade(function(h){w=H(h);n.setArrFolderNode(w);f&&f()},function(h,a){8099101==iErrorCode?F.getMessageCurtain().showPrompt(U.get("querySnapCenterPermExp","\u67e5\u8be2\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u5f02\u5e38\u3002"),
5E3):8099102==iErrorCode?F.getMessageCurtain().showPrompt(U.get("noQuerySnapCenterPermExp","\u5f53\u524d\u7528\u6237\u6ca1\u6709\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u3002"),5E3):_super.getMessageCurtain().showPrompt(a,5E3);return!0});l.SNAP_SCHEDULE==E?S.setShowBlocking(!1):(S.setShowBlocking(!0),S.setBlockingJqUi(G));S.loadSnapGroupInfo(z.snapId)}else n.setArrFolderNode(w)},va=function(){var n=0;G=$("<div>");L=$("<div>");L.addClass("publish-manage-left");if(l.RUNTIME==E||l.SNAP_CENTER==E){var f=
new za,S=f.getJqUi();f.setRequired(!0);f.setText(U.get("snapName","\u5feb\u7167\u540d\u79f0"));S.attr("title",f.getText());T=new Ia;var h=$("<div>");T.addEditedListener(function(I){clearTimeout(p);p=setTimeout(function(){var ea=T.getText();if(""!=ea){var m=F.createFacade(function(q){h.empty();q=q[T.getText()];if(null!=q&&0<q.length){qa.setCustomItemPainter(function(ma,ra){ma.on("mousedown",function(Y){T.setText(ra);h.remove();Y.stopPropagation()});ma.text(ra);ma.attr("title",ra)});qa.setItemModels(q);
qa.setSelecteds([q[0]]);q=qa.getJqUi();var t=a.width(),X=a.css("left"),u=a.position().top+a.height();ta.layoutCtrl(h,X,u,t,122);h.css("z-index","9999");q.css({width:t+"px",height:"122px"});q.find(".sa-ctrl-list-owner").css("height","100px");t=$("<div>");t.css({position:"absolute","z-index":"9999",color:"#c5c5c5"});t.text(U.get("HistorySnapName","\u5386\u53f2\u5feb\u7167\u540d\u79f0"));t.css({right:"13px",top:"100px"});q.appendTo(h);t.appendTo(h);h.appendTo(L)}else h.remove()});m.setShowBlocking(!1);
m.getSnapNameByInputText(ea)}else h.remove()},1E3)});T.addBlurListener(function(){h.remove()});var a=T.getJqUi();ta.layoutCtrl(S,15,n,115,23);ta.layoutCtrl(a,130,n,215,23);S.appendTo(L);a.appendTo(L);n+=45}else n+=15;S=new za;f=S.getJqUi();k()||S.setRequired(!0);S.setText(U.get("snapSavePathType","\u76ee\u5f55\u7c7b\u578b"));f.attr("title",S.getText());b=r(function(I){if(I&&I!=b.getLastTimeSelectedTailPathId()){var ea=[];$.extend(!0,ea,w);if(ea&&0<ea.length)if(I&&0==I.indexOf("A")){for(I=0;I<ea.length;I++)"B"==
ea[I].getType()&&(ea.splice(I,1),I--);ea.sort(function(m,q){return q.getOrder()-m.getOrder()});K.setArrFolderNode(ea);K.clearSelectedTreePath()}else if(I&&0==I.indexOf("B")){for(I=0;I<ea.length;I++)"A"==ea[I].getType()&&(ea.splice(I,1),I--);ea.sort(function(m,q){return q.getOrder()-m.getOrder()});K.setArrFolderNode(ea);K.clearSelectedTreePath()}}});S=b.getJqUi();ta.layoutCtrl(f,15,n,115,23);ta.layoutCtrl(S,130,n,215,23);f.appendTo(L);S.appendTo(L);S=new za;f=S.getJqUi();S.setRequired(!0);S.setText(U.get("snapSavePath",
"\u76ee\u5f55"));f.attr("title",S.getText());K=ca(function(I){!b||b.getSelectedTreePath()&&b.getSelectedTreePath().getText()||(I.clearSelectedTreePath(),J.showPrompt(U.get("selectPathType","\u8bf7\u9009\u62e9\u76ee\u5f55\u7c7b\u578b\u3002")))});S=K.getJqUi();n+=45;ta.layoutCtrl(f,15,n,115,23);ta.layoutCtrl(S,130,n,215,23);f.appendTo(L);S.appendTo(L);if(l.RUNTIME==E||l.SNAP_SCHEDULE==E){d=new Fa;d.setOn(!1);f=d.getJqUi();S=new za(U.get("saveSnapHyperLink","\u4fdd\u5b58\u8054\u67e5/\u8054\u52a8\u8bbe\u7f6e"));
var x=S.getJqUi();x.attr("title",S.getText());n+=45;ta.layoutCtrl(x,15,n,115,23);ta.layoutCtrl(f,130,n,31,23);x.appendTo(L);f.appendTo(L)}L.appendTo(G)};this.getModelFromUI=function(){var n=new aa;l.SNAP_SCHEDULE!=E&&n.setSnapName($.trim(T.getText()));var f=K.getSelectedTreePath();n.setSaveSnapGroupPath(f.getValue());n.setSaveSnapGroupPathText(f.getText());n.setSaveSnapGroupName(K.getSelectedTailPathName());n.setSaveSnapGroupId(K.getSelectedTailPathId());n.setSaveSnapGroupType(b.getSelectedTailPathId());
l.RUNTIME==E?(n.setPageId(z.pageId),n.setPublishId(z.urlParams.publishId),f=d.isOn(),n.setIsHyperLink(f),n.setOldSnapId(z.snapId),n.setReportId(z.extReportId)):l.SNAP_CENTER==E?(n.setSnapId(z.snapId),n.setReportId(z.reportId)):l.SNAP_SCHEDULE==E&&(f=d.isOn(),n.setIsHyperLink(f));return n};this.checkUIInput=function(n){if(l.SNAP_SCHEDULE==E)if(b.getSelectedTreePath())if(K.getSelectedTreePath())n(!0);else return U.get("selectPath","\u8bf7\u9009\u62e9\u76ee\u5f55\u3002");else return U.get("selectPathType",
"\u8bf7\u9009\u62e9\u76ee\u5f55\u7c7b\u578b\u3002");else{var f=$.trim(T.getText());if(null==f||0==$.trim(f).length)return U.get("snapNameNotEmpty","\u8bf7\u8f93\u5165\u5feb\u7167\u540d\u79f0\u3002");if(50<f.length)return U.get("snapNameTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002");if(na.isValidString(f)){if(na.isKeywords(f))return U.get("isKeywords",'\u65e0\u6cd5\u4f7f\u7528"#1"\u4f5c\u4e3a\u540d\u79f0\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002').replace("#1",f);if(b.getSelectedTreePath())if(K.getSelectedTreePath())n(!0);
else return U.get("selectPathWithPeriod","\u8bf7\u9009\u62e9\u76ee\u5f55\u3002");else return U.get("selectPathType","\u8bf7\u9009\u62e9\u76ee\u5f55\u7c7b\u578b\u3002")}else return U.get("invalidName","\u540d\u79f0\u53ea\u80fd\u7531\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002")}}}function fa(){var E,W,z,F,A,G;this.setId=function(L){E=L};this.getId=function(){return E};this.setName=function(L){W=L};this.getName=
function(){return W};this.setType=function(L){z=L};this.getType=function(){return z};this.setParentId=function(L){F=L};this.getParentId=function(){return F};this.setParentNode=function(L){A=L};this.getParentNode=function(){return A};this.setOrder=function(L){G=L};this.getOrder=function(){return G}}function V(){fa.call(this);var E=this,W=[],z,F;this.setChildren=function(A){W=A};this.getChildren=function(){return W};this.setIsOpenDir=function(A){z=A};this.getIsOpenDir=function(){return z};this.getIsShow=
function(){return F};this.setIsShow=function(A){F=A};this.toJsonObject=function(){var A={};A.children=W;return A};this.fromJsonObject=function(A){E.setName(A.name);E.setId(A.id);E.setType(A.type);E.setParentId(A.parentId);E.setOrder(A.order);E.setIsOpenDir(!0);if(A=A.children)for(var G=0;G<A.length;G++){var L=A[G];if(!L.children||L.children&&0==L.children.length){var T=new N;T.fromJsonObject(L);T.setParentNode(E);W.push(T)}else T=new V,T.fromJsonObject(L),T.setParentNode(E),W.push(T)}}}function N(){fa.call(this);
var E=this;this.fromJsonObject=function(W){E.setName(W.name);E.setId(W.id);E.setParentId(W.parentId);E.setOrder(W.order)}}function da(E,W){ia.call(this);var z=this,F=this.protectedMethod,A,G=[],L,T,qa,b;this.getDropDownContent=function(){z.updateArrFolderNode();z.initTreeSelector();return A.getJqUi()};this.updateArrFolderNode=function(k){E&&E(k)};this.checkClearSelectedTreePath=function(k){W&&W(k)};this.clearSelectedTreePath=function(){L=null;F.updateText(L?L.getText():"")};this.setSelectedTreePath=
function(k){L=k;F.updateText(L?L.getText():"")};this.getSelectedTreePath=function(){return L};this.getSelectedTailPathName=function(){return T};this.getSelectedTailPathId=function(){return qa};this.getLastTimeSelectedTailPathId=function(){return b};this.initTreeSelector=function(){if(G){A=new Aa;A.setRootVisible(!1);A.setNodePainter(J);var k=A,r=k.setRoot,ca=G,H=new V;H.setParentId(" ");H.setName("\u65b0\u589e\u76ee\u5f55");H.setId(" ");H=v(H);w(H,ca);r.call(k,H);A.hookLoadingHandler(p);A.addSelectingListener(B);
A.getRoot().setExpanded(!0);A.setLineHeight(30);ta.layoutCtrl(A.getJqUi(),0,1,"100%",4<G.length?120:30*G.length+2);A.getJqUi().css("border","1px solid rgba(138, 153, 170, 0.4)");A.getJqUi().css("background","white");A.getJqUi().appendTo($(document.body))}else return null};this.setArrFolderNode=function(k){G=k};this.getArrFolderNode=function(){return G};this.doAutoSelected=function(k,r){T=k;b=qa;qa=r;var ca=new ha;ca.setValue(r);ca.setText(k);L=ca;F.updateText(L?L.getText():"");z.updateArrFolderNode(r);
z.checkClearSelectedTreePath(z)};var v=function(k){var r=new Aa.BranchNode;r.setUserObject(k);return r},K=function(k){var r=new Aa.LeafNode;r.setUserObject(k);return r},w=function(k,r){if(r&&0<r.length)for(var ca=0;ca<r.length;ca++){var H=r[ca];H&&H instanceof V&&0<H.getChildren().length?d(k,H):k.addChild(K(H))}},d=function(k,r){var ca=0<r.getChildren().length?v(r):K(r);k.addChild(ca);k=r.getChildren();if(0!=k.length)for(r=0;r<k.length;r++)k[r]&&k[r]instanceof V&&k[r].getChildren()?d(ca,k[r]):ca.addChild(K(k[r]))},
p=function(k,r){setTimeout(function(){w(k);r()},500)},J=function(k,r){k.css("padding-left","4px");k.css("padding-right","4px");k.text(r.getUserObject().getName())},B=function(k,r){var ca=r.getTreePath();r=k="";for(var H,la=1;la<ca.length;la++)1<la&&(k+="/",r+="/"),H=ca[la],k+=H.getUserObject().getName(),r+=H.getUserObject().getId();T=H.getUserObject().getName();b=qa;qa=H.getUserObject().getId();H=new ha;H.setValue(r);H.setText(k);L=H;F.updateText(L?L.getText():"");F.doDropdown();z.updateArrFolderNode(r);
z.checkClearSelectedTreePath(z)},C=200;this.setMaxHeight=function(k){C=k};this.getPopupHeight=function(){return null==G||0==G.length?22:Math.min(30*G.length+2,C+2)}}function ia(){var E=this,W,z,F,A,G,L=!0;this.setEnable=function(w){L=w;L||(F.hide(),z.css({color:"rgb(192, 192, 192)"}))};this.getDropDownContent=function(){throw Error("orrive me");};this.getPopupHeight=function(){throw Error("orrive me");};this.getJqUi=function(){W||T();return W};this.setPlaceholder=function(w){T();"placeholder"in z[0]?
z.attr("placeholder",w):(G&&G.remove(),G=$("<div>"),G.text(w),G.css({color:"#ccc","font-size":"12px"}),G.on("mousedown",function(d){z.focus()}),G.appendTo(E.getJqUi()),ta.layoutCtrlWithLRTB(G,4,4,null,2,2,null),K())};var T=function(){if(!W){W=$("<div>");W.addClass("sa-ctrl-combobox");if(L)W.on("click",b);W.css("border-bottom","1px solid #ccc");z=$("<input readonly=readonly>");z.addClass("sa-ctrl-textfield-input");z.css({color:"#666","font-size":"12px","text-overflow":"ellipsis",padding:"0px 16px 0px 4px"});
z.appendTo(W);F=$("<div>");F.addClass("sa-ctrl-combobox-arrow sa-ctrl-combobox-arrow_enabled");F.appendTo(W);F.on("mouseenter",function(w){qa(!0)});F.on("mouseleave",function(w){qa(!1)});qa(!1)}},qa=function(w){var d=A?"arrow-up":"arrow-down";w&&(d+="_hover");M.background(F,d)},b=function(){if(L){if(A)$(document.body).off("mousedown",v),A.detach(),A=null;else{var w=$(document.body),d=A=$("<div>"),p=$("<div>");p.addClass("sa-ctrl-common-border");p.appendTo(d);A.addClass("sa-qing-publish-dropdown-selector");
E.getDropDownContent().appendTo(A);var J=E.getPopupHeight();A.css("z-index",999999);A.appendTo(w);var B=w.prop("clientHeight"),C=W.outerHeight();d=W.outerWidth();var k=[0,C-1];k=ta.upwardCoordinate(W[0],k,w[0]);p=k[0];var r=k[1];J=0>J?Math.max(0,(B>>1)-C):J;r+J>B&&(k=[0,0],k=ta.upwardCoordinate(W[0],k,w[0]),w=k[1]-J+1,0<=w&&(r=w));ta.layoutCtrl(A,p,r,d,J);$(document.body).on("mousedown",v)}qa(!1)}},v=function(w){for(var d=$(document.body),p=$(w.target);p[0]!=d[0];){if(p[0]==W[0])return;p=p.parent()}for(p=
$(w.target);p[0]!=d[0];){if(p[0]==A[0])return;p=p.parent()}b()},K=function(){G&&setTimeout(function(){G.css("display",z.val()?"none":"")},0)};this.protectedMethod={updateText:function(w){T();z.val(w?w:"");w&&z.attr("title",w);"placeholder"in z[0]||K()},doDropdown:b}}function ha(){var E=this,W,z,F,A;this.getIsShow=function(){return A};this.setIsShow=function(G){A=G};this.getValue=function(){return W};this.setValue=function(G){W=G};this.getText=function(){return z};this.setText=function(G){z=G};this.getUserObject=
function(){return F};this.setUserObject=function(G){F=G};this.toJsonObject=function(){var G={};G.value=W;G.text=z;return G};this.fromJsonObject=function(G){G&&(G.value&&E.setValue(G.value),G.text&&E.setText(G.text))}}function Z(E,W,z,F){Ja.call(this,E,W,z,F);var A=this.protectedMethod;this.loadSnapGroupTypes=function(G){A.remote("loadSnapGroupTypes",{snapId:G})};this.loadSnapGroupInfo=function(G){A.remote("loadSnapGroupInfo",{snapId:G})};this.getSnapNameByInputText=function(G){A.remote("getSnapNameByInputText",
{inputText:G})};this.saveSnapInfo=function(G){A.remote("saveSnapInfo",G)}}function na(){}function aa(){var E,W,z,F,A,G,L,T,qa,b,v,K,w;this.getSnapId=function(){return E};this.setSnapId=function(d){E=d};this.setOldSnapId=function(d){W=d};this.getOldSnapId=function(){return W};this.getReportId=function(){return z};this.setReportId=function(d){z=d};this.getPageId=function(){return F};this.setPageId=function(d){F=d};this.getPublishId=function(){return A};this.setPublishId=function(d){A=d};this.getSnapName=
function(){return G};this.setSnapName=function(d){G=d};this.isHyperLink=function(){return L};this.setIsHyperLink=function(d){L=d};this.getSaveSnapGroupName=function(){return T};this.setSaveSnapGroupName=function(d){T=d};this.getSaveSnapGroupType=function(){return b};this.setSaveSnapGroupType=function(d){b=d};this.getSaveSnapGroupId=function(){return qa};this.setSaveSnapGroupId=function(d){qa=d};this.getSaveSnapGroupPath=function(){return v};this.setSaveSnapGroupPath=function(d){v=d};this.getSaveSnapGroupPathText=
function(){return K};this.setSaveSnapGroupPathText=function(d){K=d};this.getForceOverwrite=function(){return w};this.setForceOverwrite=function(d){w=d};this.fromJsonObject=function(d){E=d.snapId;F=d.pageId;A=d.publishId;G=d.snapName;L=d.isHyperLink;T=d.saveSnapGroupName;b=d.saveSnapGroupType;qa=d.saveSnapGroupId;v=d.saveSnapGroupPath;K=d.saveSnapGroupPathText;z=d.reportId;w=d.forceOverwrite};this.toJsonObject=function(){var d={};d.snapId=E;d.oldSnapId=W;d.pageId=F;d.publishId=A;d.snapName=G;d.isHyperLink=
L;d.saveSnapGroupName=T;d.saveSnapGroupType=b;d.saveSnapGroupId=qa;d.saveSnapGroupPath=v;d.saveSnapGroupPathText=K;d.reportId=z;d.forceOverwrite=w;return d}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter&&(com.kingdee.bos.extreport.snapcenter={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter.common&&
(com.kingdee.bos.extreport.snapcenter.common={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter.common.ui&&(com.kingdee.bos.extreport.snapcenter.common.ui={});var e=com.kingdee.bos.extreport.snapcenter.common.ui,l={};e.SaveSnapDialog=function(E,W,z){Ba.call(this);var F=this,A=this.protectedMethod,G=Da,L=[],T=new Q(E,G,z),qa;(function(){A.setTitle(W);F.setSize(T.getWidth(),T.getHeight());qa=A.getMessageCurtain();T.setOuterMessageCurtain(A.getMessageCurtain());A.setContentPaneCreator(function(){return T.getJqUi()});
A.setClosingChecker(function(d){b(d)},!0);A.setClosingAction(function(){})})();this.addSuccessCallback=function(d){L.push(d)};var b=function(d){var p=T.checkUIInput(function(J){J?K(d):d(J)});p&&(A.getMessageCurtain().showPrompt(p,5E3),d(!1))},v={8099101:U.get("querySnapCenterPermExp","\u67e5\u8be2\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u5f02\u5e38\u3002"),8099102:U.get("noQuerySnapCenterPermExp","\u5f53\u524d\u7528\u6237\u6ca1\u6709\u5feb\u7167\u4e2d\u5fc3\u6743\u9650\u3002"),8099103:U.get("snapNameNotEmpty",
"\u5feb\u7167\u540d\u79f0\u4e3a\u7a7a\u3002"),8099104:U.get("snapNameTooLong","\u5feb\u7167\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"),8099105:U.get("invalidName","\u540d\u79f0\u53ea\u80fd\u7531\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e14\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002"),8099106:U.get("selectPath","\u76ee\u5f55\u4e3a\u7a7a\u3002"),8099107:U.get("reportNotFound","\u8be5\u62a5\u8868\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),
8099108:U.get("userNotFound","\u672a\u627e\u5230\u7528\u6237\u3002"),8099109:U.get("snapGroupNotFound","\u76ee\u5f55\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),8099110:U.get("sameSnapNameExist","\u76f8\u540c\u5feb\u7167\u540d\u79f0\u5df2\u5b58\u5728\u3002"),8099112:U.get("checkReportPermExp","\u68c0\u67e5\u7528\u6237\u662f\u5426\u62e5\u6709\u4fdd\u5b58\u5feb\u7167\u6743\u9650\u5f02\u5e38\u3002"),8099113:U.get("noReportPerm","\u5f53\u524d\u7528\u6237\u6ca1\u6709\u4fdd\u5b58\u5feb\u7167\u6743\u9650\u3002"),
8099115:U.get("checkSnapCenterModulePermExp","\u68c0\u6d4b\u5feb\u7167\u4e2d\u5fc3\u6a21\u5757\u8bb8\u53ef\u5f02\u5e38\u3002"),8099116:U.get("noSnapCenterModulePerm","\u5f53\u524d\u7528\u6237\u6ca1\u6709\u5feb\u7167\u4e2d\u5fc3\u6a21\u5757\u8bb8\u53ef\u3002"),8099117:U.get("isKeywords",'\u65e0\u6cd5\u4f7f\u7528"#1"\u4f5c\u4e3a\u540d\u79f0\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002')},K=function(d,p){var J=T.getModelFromUI();p&&J.setForceOverwrite(!0);p=G.createFacade(function(B){J.setSnapId(B);if(J.getPublishId()||
"A"==J.getSaveSnapGroupType()&&z.snapId){B=com.kingdee.bos.qing.behavior.BehaviorManager;var C=Ea.createUUID();J.getPublishId()?B.initAccessRecordParams(J.getPublishId(),C,B.SourceType.QING_PUBLISH,B.AppType.QING_RPT):B.initAccessRecordParams(z.snapId,C,B.SourceType.QING_SNAPSHOT,B.AppType.QING_RPT);B.recordResourceOperation(B.OperationType.QING_SNAPSHOT_SAVE)}if(!L||0==L.length)qa&&qa.showSuccess(U.get("saveSnapSuccess","\u4fdd\u5b58\u5feb\u7167\u6210\u529f\u3002"));else if(L&&0<L.length)for(B=0;B<
L.length;B++)(C=L[B])&&C(J);d(!0)},function(B,C){if(B){if(l.RUNTIME==E&&8099110==B)return C=U.get("sameSnapNameConfirmMessage","\u5feb\u7167\u540d\u79f0\u5df2\u5b58\u5728\uff0c\u786e\u5b9a\u8986\u76d6\u5417\uff1f"),w(C,d),!0;B=v[B];qa.showPrompt(B?B:C,5E3);d(!1);return!0}d(!1);return!1});p.setShowBlocking(!1);p.saveSnapInfo(J.toJsonObject())},w=function(d,p){var J=$(document.body),B=$("<div class='sa-ctrl-common-modallayer'>");B.appendTo(J);var C=new La(B),k=U.get("operateConfirm","\u64cd\u4f5c\u786e\u8ba4");
C.setTitle(k);k=J.prop("clientWidth");var r=J.prop("clientHeight");C.setBounds(k-300>>1,r-200>>1,300,200);C.setToolbarVisible(!1);k=$("<div>");r=$("<div>");var ca=$("<span>");ca.text(d);ca.attr("title",d);ca.css({"text-align":"center",display:"inline-block","margin-top":"5px","line-height":"23px","font-size":"14px","text-overflow":"ellipsis",overflow:"hidden"});ta.layoutCtrl(r,null,null,300,200);ta.layoutCtrl(ca,0,25,300,60);ca.appendTo(r);r.appendTo(k);C.setContent(k);C.addClosingListener(function(H,
la){la?K(p,!0):p(!1);H.destroy();B.remove();return!0});C.showFooterPane();C.show();B.appendTo(J)}};e.SnapContentPanel=Q;e.SaveSnapSourceType=l;e.ExtReportSnapModel=aa;e.StringUtil=na;e.ValueTextPair=ha;l.RUNTIME=1;l.SNAP_CENTER=2;l.SNAP_SCHEDULE=3;var Ea,ta,Ba,Aa,Ha,Fa,za,Ia,M,La,Ja,y,U,Da;(function(){var E=com.kingdee.bos.qing.common;Ea=E.Util;ta=E.DomUtil;E=com.kingdee.bos.qing.ui.component;Ba=E.AbstractModalDialog;Aa=E.Tree;Ha=E.List;Fa=E.SwitchButton;za=E.Label;Ia=E.TextField;M=E.Icons;La=E.Dialog;
E=com.kingdee.bos.qing.framework.common;Ja=E.AbstractFacade;y=E.AbstractRemoteCall;U=E.MultilanguageManager.createPackageAccessor(e);Da=new function(){function W(){y.call(this);var A;this.getRemoteUrl=function(){return A};this.setRemoteUrl=function(G){A=G}}var z;this.createFacade=function(A,G,L){var T=F();return new Z(T,A,function(qa,b){return G?G(qa,b):!1},L)};var F=function(){if(!z){var A=Ea.decodeParamFromUrl(window.location.search,"path");A=(A?A:"/ierp")+"/qing_rpt/runtime.do";z=new W;z.setRemoteUrl(A)}return z}}})();
na.isValidString=function(E){return/^([\u4E00-\u9FA5a-zA-Z_])[\u4E00-\u9FA5a-zA-Z0-9_]{0,}$/.test(E)};na.isKeywords=function(E){return/\b(null|true|false)\b/i.test(E)}})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter&&(com.kingdee.bos.extreport.snapcenter={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter.common&&(com.kingdee.bos.extreport.snapcenter.common={});var Q=com.kingdee.bos.extreport.snapcenter.common;Q.Facade=
function(ia,ha,Z,na){fa.call(this,ia,ha,Z,na);var aa=this.protectedMethod;this.saveOrderExtReportGroup=function(e){e={extReportGroupList:JSON.stringify({extReportGroupList:e})};aa.remote("saveOrderExtReportGroup",e)};this.loadSnapGroupList=function(){aa.remote("loadSnapGroupList",{})};this.saveSnapGroup=function(e){e={model:JSON.stringify(e.toJsonObject())};aa.remote("saveOrUpdateSnapGroup",e)};this.deleteSnapGroup=function(e){aa.remote("deleteSnapGroup",{snapGroupID:e})};this.deleteSnapInfo=function(e){e=
{arrSnapID:JSON.stringify(e)};aa.remote("deleteSnapInfo",e)};this.loadSnapInfoListByGroupIDS=function(e){e={arrSnapGroupID:JSON.stringify(e)};aa.remote("loadSnapInfoListByGroupIDS",e)};this.loadSnapInfoListByGroupID=function(e){aa.remote("loadSnapInfoListByGroupID",{snapGroupID:e})};this.saveOrderSnapGroup=function(e){e={snapGroupList:JSON.stringify({snapGroupList:e})};aa.remote("saveOrderSnapGroup",e)};this.loadSnapGroupTypes=function(e){aa.remote("loadSnapGroupTypes",{snapId:e})};this.loadSnapGroupInfo=
function(e){aa.remote("loadSnapGroupInfo",{snapId:e})};this.getSnapNameByInputText=function(e){aa.remote("getSnapNameByInputText",{inputText:e})};this.updateSnapInfo=function(e){e={model:JSON.stringify(e.toJsonObject())};aa.remote("updateSnapInfo",e)};this.checkSnapPermission=function(e,l){aa.remote("checkSnapPermission",{snapId:e,operateCode:l})};this.checkExistsOthersSnapInGroup=function(e){aa.remote("checkExistsOthersSnapInGroup",{snapGroupID:e})}};Q.RemoteImpl=function(){N.call(this);var ia;this.getRemoteUrl=
function(){return ia};this.setRemoteUrl=function(ha){ia=ha}};var fa,V,N;(function(){var ia=com.kingdee.bos.qing.framework.common;fa=ia.AbstractFacade;V=ia.AbstractIcons;N=ia.AbstractRemoteCall})();Q.Icons=new function(){V.call(this);var ia=this.protectedMethod;this.protectedInit=function(aa,e){na(e,"extreport");e.setGap(1);e.setStartPosition(1,1);e.setIconSize(16,16);ha(0,0,"btn-add-classification");ha(0,1,"btn-import");ha(0,2,"btn-export");ha(0,3,"btn-edit");ha(0,4,"btn-delete");ha(0,5,"btn-extreport");
e.setStartPosition(207,78);e.setIconSize(65,78);Z(0,0,"icon-question");e.setGap(0);e.setStartPosition(0,0);na(e,"icon_search");e.setIconSize(17,17);Z(0,0,"icon_search");na(e,"icon_search_hover");e.setIconSize(17,17);Z(0,0,"icon_search_hover");na(e,"btn_orderup");e.setIconSize(17,17);Z(0,0,"btn_orderup");na(e,"btn_orderup_hover");e.setIconSize(17,17);Z(0,0,"btn_orderup_hover");na(e,"btn-add-classification");e.setIconSize(17,17);Z(0,0,"btn-add-classification");na(e,"btn-add-classification_hover");e.setIconSize(17,
17);Z(0,0,"btn-add-classification_hover");na(e,"no-data");Z(0,0,"no-data");e.setFilePath("qingrpt/runtime/skin/ierp/res/extreport-runtime.png");e.setGap(1);e.setStartPosition(1,1);e.setIconSize(16,16);Z(0,2,"arrow-down");Z(1,2,"arrow-down_hover");Z(0,3,"arrow-up");Z(1,3,"arrow-up_hover");e.setFilePath("qingrpt/snapcenter/skin/ierp/res/icon_error_tips.png");e.setIconSize(14,14);e.setStartPosition(0,0);Z(0,0,"error_tips");e.setFilePath("qingrpt/snapcenter/skin/ierp/res/view_member.png");e.setGap(1);
e.setStartPosition(0,117);e.setIconSize(16,16);Z(1,4,"view_member");Z(0,4,"view_member_hover");e.setGap(1);e.setStartPosition(0,151);e.setIconSize(170,98);Z(0,0,"icon-empty")};var ha=function(aa,e,l){Z(aa,e,l+"_hover");Z(aa+1,e,l)},Z=function(aa,e,l){ia.registIcon(aa,e,l)},na=function(aa,e){switch(e){case "extreport":aa.setFilePath("qingrpt/manage/skin/ierp/res/extreport.png");break;case "icon_search":aa.setFilePath("qingrpt/manage/skin/ierp/res/icon_search.png");break;case "icon_search_hover":aa.setFilePath("qingrpt/manage/skin/ierp/res/icon_search_hover.png");
break;case "btn-add-classification":aa.setFilePath("qingrpt/manage/skin/ierp/res/btn-add-classification.png");break;case "btn-add-classification_hover":aa.setFilePath("qingrpt/manage/skin/ierp/res/btn-add-classification_hover.png");break;case "btn_orderup":aa.setFilePath("qingrpt/manage/skin/ierp/res/btn_orderup.png");break;case "btn_orderup_hover":aa.setFilePath("qingrpt/manage/skin/ierp/res/btn_orderup_hover.png");break;case "no-data":aa.setFilePath("qingrpt/manage/skin/ierp/res/no-data.png");break;
default:throw Error("Unknow key: "+e);}}};var da=new function(){var ia;this.hookCollector=function(ha){ia=ha};this.occur=function(ha,Z){try{ia&&ia(ha,Z)}catch(na){window.console&&console.warn(na)}};this.getPublishTargetName=function(ha){if(0==ha)return"Appmenu";if(1==ha)return"Center"}};da.EXT_RPT_SNAP_EDIT="ext-rpt-snap-edit";da.SAVE_SNAP_TO_TYPE="save-snap-to-type";Q.UserOperationReporter=da})();(function(){function Q(){var N=this,da,ia,ha,Z,na,aa,e,l,Ea,ta,Ba,Aa=!0,Ha=!1,Fa,za,Ia;this.getLevel=function(){return 1};this.setChecked=function(M){Ha=M};this.getChecked=function(){return Ha};this.setDisplay=function(M){Aa=M};this.getDisplay=function(){return Aa};this.getSnapId=function(){return da};this.setSnapId=function(M){da=M};this.getSnapName=function(){return ia};this.setSnapName=function(M){ia=M};this.getReportId=function(){return ha};this.setReportId=function(M){ha=M};this.getSnapGroupId=
function(){return Z};this.setSnapGroupId=function(M){Z=M};this.getCreatorName=function(){return na};this.setCreatorName=function(M){na=M};this.getCreateTime=function(){return aa};this.setCreateTime=function(M){aa=M};this.getCreateFormatTime=function(){return e};this.setCreateFormatTime=function(M){e=M};this.getModifierName=function(){return l};this.setModifierName=function(M){l=M};this.getModifyTime=function(){return Ea};this.setModifyTime=function(M){Ea=M};this.getModifyFormatTime=function(){return ta};
this.setModifyFormatTime=function(M){ta=M};this.getSnapGroupType=function(){return Ba};this.setSnapGroupType=function(M){Ba=M};this.setSpaceType=function(M){Fa=M};this.getSpaceType=function(){return Fa};this.setSpaceId=function(M){za=M};this.getSpaceId=function(){return za};this.setSpaceCreatorName=function(M){Ia=M};this.getSpaceCreatorName=function(){return Ia};this.fromJsonObject=function(M){N.setSnapId(M.snapId);N.setSnapName(M.snapName);N.setSnapGroupId(M.snapGroupId);N.setReportId(M.reportId);
N.setCreatorName(M.creatorName);N.setCreateTime(M.createTime);N.setCreateFormatTime(M.createFormatTime);N.setModifierName(M.modifierName);N.setModifyTime(M.modifyTime);N.setModifyFormatTime(M.modifyFormatTime)};this.toJsonObject=function(){var M={};M.snapId=da;M.snapName=ia;M.snapGroupId=Z;M.reportId=ha;M.creatorName=na;M.createTime=aa;M.modifierName=l;M.modifyTime=Ea;M.level=N.getLevel();return M}}function fa(N,da){var ia=N,ha=da;this.getName=function(){return ia};this.setName=function(Z){ia=Z};
this.getValue=function(){return ha};this.setValue=function(Z){ha=Z}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter&&(com.kingdee.bos.extreport.snapcenter={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter.model&&(com.kingdee.bos.extreport.snapcenter.model={});var V=
com.kingdee.bos.extreport.snapcenter.model;V.ExtReportSnapGroupModel=function(){var N=this,da,ia,ha,Z,na=!0,aa=null;this.setExistsOthersSnapInGroup=function(e){aa=e};this.getExistsOthersSnapInGroup=function(){return aa};this.setOrderID=function(e){Z=e};this.getOrderID=function(){return Z};this.setDisplay=function(e){na=e};this.getDisplay=function(){return na};this.setExtReportSnapGroupID=function(e){da=e};this.getExtReportSnapGroupID=function(){return da};this.setExtReportSnapGroupName=function(e){ia=
e};this.getExtReportSnapGroupName=function(){return ia};this.setExtReportSnapGroupType=function(e){ha=e};this.getExtReportSnapGroupType=function(){return ha};this.fromJsonObject=function(e){N.setExtReportSnapGroupID(e.extReportSnapGroupID);N.setExtReportSnapGroupName(e.extReportSnapGroupName);N.setExtReportSnapGroupType(e.extReportSnapGroupType);N.setOrderID(e.orderID)};this.toJsonObject=function(){var e={};e.extReportSnapGroupID=da;e.extReportSnapGroupName=ia;e.extReportSnapGroupType=ha;e.orderID=
Z;return e}};V.ExtReportSnapInfoModel=Q;V.ExtReportSnapGroupType=fa;V.ExtReportTreeNodeModel=function(){var N=this,da,ia,ha,Z,na,aa,e,l,Ea,ta=[],Ba=!0,Aa=!1,Ha=!1,Fa=!1,za=!0,Ia=!1,M,La,Ja;this.getLevel=function(){return 0};this.setChecked=function(y){Ha=y};this.getChecked=function(){return Ha};this.setSearchHit=function(y){Ia=y};this.getSearchHit=function(){return Ia};this.setDisplay=function(y){Ba=y};this.getDisplay=function(){return Ba};this.setExpand=function(y){Aa=y};this.getExpand=function(){return Aa};
this.setDeleted=function(y){Fa=y};this.getDeleted=function(){return Fa};this.getReportId=function(){return da};this.setReportId=function(y){da=y};this.getReportName=function(){return ia};this.setReportName=function(y){ia=y};this.getSnapGroupId=function(){return ha};this.setSnapGroupId=function(y){ha=y};this.getCreatorName=function(){return Z};this.setCreatorName=function(y){Z=y};this.getCreateTime=function(){return na};this.setCreateTime=function(y){na=y};this.getCreateFormatTime=function(){return aa};
this.setCreateFormatTime=function(y){aa=y};this.getModifierName=function(){return e};this.setModifierName=function(y){e=y};this.getModifyTime=function(){return l};this.setModifyTime=function(y){l=y};this.getModifyFormatTime=function(){return Ea};this.setModifyFormatTime=function(y){Ea=y};this.setChildren=function(y){ta=y};this.getChildren=function(){return ta};this.setHasPerm=function(y){za=y};this.getHasPerm=function(){return za};this.setSpaceType=function(y){M=y};this.getSpaceType=function(){return M};
this.setSpaceId=function(y){La=y};this.getSpaceId=function(){return La};this.setSpaceCreatorName=function(y){Ja=y};this.getSpaceCreatorName=function(){return Ja};this.fromJsonObject=function(y){N.setReportId(y.reportId);N.setReportName(y.reportName);N.setSnapGroupId(y.snapGroupId);N.setHasPerm(y.hasPerm);N.setCreatorName(y.creatorName);N.setCreateTime(y.createTime);N.setCreateFormatTime(y.createFormatTime);N.setModifierName(y.modifierName);N.setModifyTime(y.modifyTime);N.setModifyFormatTime(y.modifyFormatTime);
N.setSpaceType(y.spaceType);N.setSpaceId(y.spaceId);N.setSpaceCreatorName(y.spaceCreatorName);if((y=y.snapInfoVOList)&&0<y.length){for(var U=[],Da=0;Da<y.length;Da++){var E=new Q;E.fromJsonObject(y[Da]);U.push(E)}N.setChildren(U)}};this.toJsonObject=function(){var y={};y.snapGroupId=ha;y.reportId=da;y.reportName=ia;y.creatorName=Z;y.createTime=na;y.modifierName=e;y.modifyTime=l;y.spaceType=M;y.spaceId=La;y.spaceCreatorName=Ja;y.snapInfoVOList=[];for(var U=0;U<ta.length;U++){var Da=ta[U].toJsonObject();
y.snapInfoVOList.push(Da)}y.level=N.getLevel();return y}};V.ExtReportSnapOperCode={};V.ExtReportSnapOperCode.SAVE=16;V.ExtReportSnapOperCode.EDIT=32;fa.PUBLIC=new fa("\u516c\u5171","A");fa.PERSONAL=new fa("\u4e2a\u4eba","B")})();(function(){function Q(b,v){var K=this,w,d,p,J,B=v&&v.getExtReportSnapGroupType()&&v.getExtReportSnapGroupType()==F.PUBLIC.getValue(),C=b.getEditPublicSnapGroupPerm(),k=b.getDeletePublicSnapGroupPerm(),r,ca,H,la,sa;this.setSelected=function(m){m&&r&&r(w,v);d=m};this.getSelected=function(){return d};this.setFunMoveUpGroupItemCallBack=function(m){la=m};this.setFunSnapGroupItemClickCallBack=function(m){r=m};this.setFunDeleteSuccessCallBack=function(m){ca=m};this.setFunAddSuccessCallBack=function(m){H=
m};this.setNoDataCallBack=function(m){sa=m};this.getJqUi=function(){w||va();return w};this.getExtReportSnapGroupModel=function(){return v};var va=function(){w=$("<div>");w.addClass("extreport-snap-group-list");p=new Ha;p.setEnabled(!0);p.addBlurListener(h);var m=p.getJqUi();m.addClass("extreport-snap-group-name-edit");m.hide();m.on("click",function(q){q.stopPropagation()});m.on("keydown",function(q){13==(q.keyCode||q.which||q.charCode)&&h()});J=$("<span>");J.addClass("extreport-snap-group-title-span");
w.on("click",function(q){r(w,v)});m.appendTo(w);J.appendTo(w);n()},n=function(){var m=v.getExtReportSnapGroupName();p.setText(m);J.text(m);J.attr("title",m);if(!B||C)m=$("<span>"),m.addClass("moveup-button"),m.attr("title",l.get("moveupExtReportGroup","\u4e0a\u79fb\u76ee\u5f55")),m.on("click",f),Z.backgroundWithHover(m,"btn_orderup"),m.appendTo(w);if(!B||C)m=$("<span>"),m.addClass("edit-button"),m.attr("title",l.get("editExtReportSnapCategory","\u7f16\u8f91\u76ee\u5f55")),m.on("click",K.editGroupName),
Z.backgroundWithHover(m,"btn-edit"),m.appendTo(w);if(!B||k)m=$("<span>"),m.addClass("delete-button"),m.attr("title",l.get("deleteExtReportSnapCategory","\u5220\u9664\u76ee\u5f55")),m.on("click",x),Z.backgroundWithHover(m,"btn-delete"),m.appendTo(w)},f=function(m){la(K)};this.editGroupName=function(m){m&&m.stopPropagation();J.hide();p.getJqUi().show();p.setText(v?v.getExtReportSnapGroupName():"");p.requestFocus()};var S=function(){if(b.isLoadSnapGroup()){var m=b.getSnapGroupModels(v.getExtReportSnapGroupType());
m&&0!=m.length||sa&&sa()}},h=function(){var m=p.getText();m=m.trim();var q=m.length;v.getExtReportSnapGroupID()&&(v.getExtReportSnapGroupName()==m||!m||50<q)?(p.getJqUi().hide(),J.show(),50<q&&(m=l.get("CategoryNameCanNotExceedLimit","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"),b.getMessageCurtain().showPrompt(m,b.getMsgTimeOut()))):m?50<q?(m=l.get("CategoryNameCanNotExceedLimit","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"),b.getMessageCurtain().showPrompt(m,
b.getMsgTimeOut())):a():(w.remove(),S())},a=function(){var m=new E;m.setExtReportSnapGroupID(v.getExtReportSnapGroupID());m.setExtReportSnapGroupName(p.getText().trim());m.setExtReportSnapGroupType(v.getExtReportSnapGroupType());m.setOrderID(v.getOrderID());var q=b.createFacade(function(t){var X=v.getExtReportSnapGroupID(),u=p.getText();u=u.trim();J.text(u);J.attr("title",u);p.setText(u);p.getJqUi().hide();J.show();v.getExtReportSnapGroupID()||v.setExtReportSnapGroupID(t);v.setExtReportSnapGroupName(p.getText().trim());
t=X?l.get("editCategorySuccess","\u4fee\u6539\u76ee\u5f55\u6210\u529f\u3002"):l.get("addCategorySuccess","\u65b0\u589e\u76ee\u5f55\u6210\u529f\u3002");b.getMessageCurtain().showSuccess(t,b.getMsgTimeOut());X||H(K)},function(t,X){return 9010002==t?(t=l.get("extreportGroupNameHasExist","\u8be5\u76ee\u5f55\u540d\u79f0\u5df2\u5b58\u5728\u3002"),b.getMessageCurtain().showPrompt(t,b.getMsgTimeOut()),p.requestFocus(),!0):9010005==t?(t=l.get("noOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u3002"),
b.getMessageCurtain().showPrompt(t,b.getMsgTimeOut()),w.remove(),!0):!1});q.setShowBlocking(!0);q.saveSnapGroup(m)},x=function(m){m&&m.stopPropagation();v.getExtReportSnapGroupID()?I():w.remove()},I=function(){var m=v.getExtReportSnapGroupID(),q=b.createFacade(function(t){(t=t.snapInfoList)&&0<t.length?(t=l.get("deleteSnapInfoBeforeSnapGroup","\u8bf7\u5148\u5220\u9664\u76ee\u5f55\u4e0b\u7684\u5feb\u7167\u518d\u5220\u9664\u76ee\u5f55\u3002"),b.getMessageCurtain().showPrompt(t,b.getMsgTimeOut())):(t=
b.getSnapGroupModels(v.getExtReportSnapGroupType()),F.PERSONAL.getValue()==v.getExtReportSnapGroupType()&&1==t.length?(t=l.get("atLeastNeedOneUserExtReportGroup","\u81f3\u5c11\u9700\u8981\u4fdd\u7559\u4e00\u4e2a\u7528\u6237\u76ee\u5f55\u3002"),b.getMessageCurtain().showPrompt(t,b.getMsgTimeOut())):b.isSnapGroupEmpty(m)&&v.getExtReportSnapGroupType()==F.PUBLIC.getValue()&&null==v.getExistsOthersSnapInGroup()?b.checkExistsOthersSnapInGroup(m,function(X){X?(v.setExistsOthersSnapInGroup(!0),b.getMessageCurtain().showPrompt(l.get("deleteOthersSnapInfoBeforeSnapGroup",
"\u5f53\u524d\u76ee\u5f55\u5b58\u5728\u5176\u4ed6\u7528\u6237\u5df2\u4fdd\u5b58\u7684\u5feb\u7167\uff0c\u65e0\u6cd5\u5220\u9664\u3002"),b.getMsgTimeOut())):(v.setExistsOthersSnapInGroup(!1),X=l.get("confirmToDeleteCategory","\u786e\u5b9a\u8981\u5220\u9664\u76ee\u5f55'#1'\u5417\uff1f").replace("#1",v.getExtReportSnapGroupName()),b.showDeleteConfirmDialog(X,ea))}):v.getExistsOthersSnapInGroup()?b.getMessageCurtain().showPrompt(l.get("deleteOthersSnapInfoBeforeSnapGroup","\u5f53\u524d\u76ee\u5f55\u5b58\u5728\u5176\u4ed6\u7528\u6237\u5df2\u4fdd\u5b58\u7684\u5feb\u7167\uff0c\u65e0\u6cd5\u5220\u9664\u3002"),
b.getMsgTimeOut()):(t=l.get("confirmToDeleteCategory","\u786e\u5b9a\u8981\u5220\u9664\u76ee\u5f55'#1'\u5417\uff1f").replace("#1",v.getExtReportSnapGroupName()),b.showDeleteConfirmDialog(t,ea)))},function(t,X){return!1});q.setShowBlocking(!0);q.loadSnapInfoListByGroupID(m)},ea=function(){var m=v.getExtReportSnapGroupID(),q=b.createFacade(function(t){w&&w.remove();ca(v);S();t=l.get("deleteExtReportGroupSuccess","\u5220\u9664\u76ee\u5f55\u6210\u529f\u3002");b.getMessageCurtain().showSuccess(t,b.getMsgTimeOut())},
function(t,X){return 9010003==t?(t=l.get("deleteSnapInfoBeforeSnapGroup","\u8bf7\u5148\u5220\u9664\u76ee\u5f55\u4e0b\u7684\u5feb\u7167\u518d\u5220\u9664\u76ee\u5f55\u3002"),b.getMessageCurtain().showPrompt(t,b.getMsgTimeOut()),!0):9010008==t?(b.getMessageCurtain().showPrompt(l.get("deleteOthersSnapInfoBeforeSnapGroup","\u5f53\u524d\u76ee\u5f55\u5b58\u5728\u5176\u4ed6\u7528\u6237\u5df2\u4fdd\u5b58\u7684\u5feb\u7167\uff0c\u65e0\u6cd5\u5220\u9664\u3002"),b.getMsgTimeOut()),!0):!1});q.setShowBlocking(!0);
q.deleteSnapGroup(m)}}function fa(b){function v(){this.getTailBlankForDragging=function(){return-1};this.isRowDraggable=function(h,a){return!1};this.isColumnDraggable=function(h,a){return h.getColumnsCount()==a+1?!1:!0};this.getMinRowHeightLimited=function(h,a){return 3};this.getMinColumnWidthLimited=function(h,a){return 4};this.rowDraggedAction=function(h,a,x){var I=h.isSyncUIWhenModelChanged();h.setSyncUIWhenModelChanged(!0);a=h.getRow(a);a.setHeight(a.getHeight()+x);h.setSyncUIWhenModelChanged(I)};
this.setMinColumnWidth=function(h){};this.columnDraggedAction=function(h,a,x){var I=h.isSyncUIWhenModelChanged();h.setSyncUIWhenModelChanged(!0);a=h.getColumn(a);a.setWidth(a.getWidth()+x);h.setSyncUIWhenModelChanged(I)}}function K(h){KTDefaultCellRender.call(this,h);var a=this,x=this.paintCellUI;this.paintCellUI=function(q,t){var X=a.getCurrentRowIdx(),u=a.getCurrentRow(),ma=a.getCurrentColIdx();u=u.getUserObject();var ra=0;u&&(ra=u.getLevel());if(X<T.getHeadRowCount())x(q,t),0==ma&&1==X?(u=B&&B.isChecked()?
!0:!1,B=new Fa,B.setChecked(u),B.addCheckedListener(function(wa,ua){if(ua){wa=wa.isChecked();for(var Ca=ua=0;Ca<C.length;Ca++){var Ma=C[Ca];Ma.setChecked(wa,!1);0<Ma.getLevel()&&wa&&ua++}T.refresh(p);H&&H(ua)}}),u=B.getJqUi(),u.addClass("snap-info-table-checkbox"),u.appendTo(q)):1==ma&&1==X&&m().appendTo(q);else if(0==ma){u.getId();var Y=new Fa;Y.setChecked(u.getChecked());Y.setUserObject(u);Y.addCheckedListener(function(wa,ua){if(ua){var Ca=wa.getUserObject();wa=wa.isChecked();Ca.setChecked(wa,ua)}});
u=Y.getJqUi();u.addClass("snap-info-table-checkbox");u.appendTo(q)}else if(1==ma)$(q).find("span").remove(),t=$("<div>"),X=u.getName(),t.attr("title",X),t.css("line-height","28px"),ma="18px",0<ra&&(ma="28px"),t.css("padding-left",ma),t.css("padding-right","2px"),t.css("overflow","hidden"),t.css("text-overflow","ellipsis"),0==ra&&u.getUserObject().getDeleted()?ea(t,X,X):ea(t,r,X),0!=ra||u.getUserObject().getHasPerm()&&!u.getUserObject().getDeleted()?t.css("margin-left","5px"):(ra=u.getSpaceCreatorName(),
u.getUserObject().getDeleted()&&(Y=X,t.css("padding-left","2px")),u.getUserObject().getHasPerm()||(Y?Y+=l.get("commaSymbol","\uff0c")+l.get("noSnapViewPermission","\u65e0\u6cd5\u67e5\u770b\u7531\u6b64\u62a5\u8868\u751f\u6210\u7684\u5feb\u7167\u3002"):(Y=l.get("noSnapPermission","\u60a8\u6ca1\u6709\u8be5\u62a5\u8868\u7684\u6743\u9650"),ra&&(Y+=l.get("contactCreator","\uff0c\u8bf7\u8054\u7cfb#1\u8fdb\u884c\u6388\u6743\u3002").replace("#1",ra)),t.css("padding-left","2px"))),u=$("<div>"),u.attr("title",
Y),Z.background(u,"error_tips"),u.css({height:"14px",width:"14px","float":"left","margin-left":"23px","margin-top":"8px","margin-right":"3px",cursor:"pointer"}),u.appendTo(q),t.css("margin-left","20px")),(u=$(q).children())&&0<u.length&&$(u[0]).css("left","5px"),t.appendTo(q);else if(2==ma){Y=$("<div>");ra=u.getCreatorName();Y.attr("title",ra);Y.addClass("snap-info-table-cell-text");ea(Y,r,ra);if(ra&&"0"==u.getSpaceType()){var ka=$("<div>");ka.attr("title",l.get("viewSpaceMember","\u67e5\u770b\u534f\u4f5c\u7a7a\u95f4\u6210\u5458"));
ka.on("click",{oTableRow:u},I);Z.backgroundWithHover(ka,"view_member");ka.addClass("snap-view-collaboration-member");ka.hide();ka.appendTo(q);u=$(q);u.on("mouseenter",function(){ka.show()});u.on("mouseleave",function(){ka.hide()})}Y.appendTo(q)}else 3==ma?(Y=$("<div>"),u=u.getCreateFormatTime(),Y.text(u),Y.attr("title",u),Y.addClass("snap-info-table-cell-text"),Y.appendTo(q)):4==ma?(Y=$("<div>"),u=u.getModifierName(),Y.text(u),Y.attr("title",u),Y.addClass("snap-info-table-cell-text"),Y.appendTo(q)):
5==ma&&(Y=$("<div>"),u=u.getModifyFormatTime(),Y.text(u),Y.attr("title",u),Y.addClass("snap-info-table-cell-text"),Y.appendTo(q))};var I=function(q){var t=q.data.oTableRow;q=t.getSpaceId();t=t.getCreatorName();-1<t.indexOf("\uff1a")&&(t=t.substring(t.indexOf("\uff1a")+1));(new L(q,t)).showDialog()},ea=function(q,t,X){if(t&&X){t=t.toUpperCase();var u=X.toUpperCase(),ma=u.split(t),ra=t.length,Y;for(Y in ma){var ka=u.indexOf(ma[Y]),wa=X.substr(Ca,ma[Y].length);ka+=ma[Y].length;var ua=u.length-ka;u=u.substr(ka,
ua);X=X.substr(ka,ua);ka=$("<span>");ka.text(wa);ka.appendTo(q);if(Y!=ma.length-1&&1<ma.length){var Ca=u.indexOf(t);wa=X.substr(Ca,ra);ka=Ca+ra;ua=u.length-ka;u=u.substr(ka,ua);X=X.substr(ka,ua);ka=$("<span>");ka.text(wa);ka.css("color","red");ka.clone().appendTo(q)}}}else q.text(X)},m=function(){var q=sa(),t=$('<div style="overflow: hidden; position: absolute; left: 4px; top: 0px; width: 16px; height: 30px; cursor: pointer; z-index: 2;"></div>'),X=$('<div style="overflow: hidden; position: absolute; left: 2px; top: 7px; width: 9px; height: 9px; border: 1px solid rgb(138, 158, 191); border-radius: 3px; background-color: rgb(255, 255, 255);">\n<div style="overflow: hidden; position: absolute; left: 1px; top: 1px; width: 3px; height: 3px; border-bottom: 1px solid black; border-right: 1px solid black;"></div>\n<div style="overflow: hidden; position: absolute; left: 4px; top: 4px; width: 3px; height: 3px; border-top: 1px solid black; border-left: 1px solid black;"></div>\n</div>'),
u=$('<div style="overflow: hidden; position: absolute; left: 2px; top: 7px; width: 9px; height: 9px; border: 1px solid rgb(138, 158, 191); border-radius: 3px; background-color: rgb(255, 255, 255);">\n<div style="overflow: hidden; position: absolute; left: 1px; top: 1px; width: 7px; height: 3px; border-bottom: 1px solid black;"></div>\n</div>'),ma=null==q||q;ma?u.appendTo(t):X.appendTo(t);t.click(function(){$(this).empty();var ra=!ma;ra?u.appendTo($(this)):X.appendTo($(this));var Y=sa();null!=Y&&(ra=
!Y);for(Y=0;Y<C.length;Y++){var ka=C[Y];ka.getExpand();0==ka.getLevel()?ka.setExpand(ra):ka.setHide(!ra)}d.updateUI()});return t}}function w(h){var a=this,x=h,I,ea,m,q,t,X,u,ma,ra,Y,ka,wa,ua,Ca,Ma,Sa,Ra,Oa,Pa,c;this.fromObject=function(g){m=g.getCreatorName();q=g.getCreateTime();t=g.getCreateFormatTime();X=g.getModifierName();u=g.getModifyTime();ma=g.getModifyFormatTime();Oa=g.getSpaceType();Pa=g.getSpaceId();c=g.getSpaceCreatorName()};this.getLevel=function(){return ra};this.setLevel=function(g){ra=
g};this.getId=function(){return I};this.setId=function(g){I=g};this.getName=function(){return ea};this.setName=function(g){ea=g};this.getCreatorName=function(){return m};this.setCreatorName=function(g){m=g};this.getCreateTime=function(){return q};this.setCreateTime=function(g){q=g};this.getCreateFormatTime=function(){return t};this.setCreateFormatTime=function(g){t=g};this.getModifierName=function(){return X};this.setModifierName=function(g){X=g};this.getModifyTime=function(){return u};this.setModifyTime=
function(g){u=g};this.getModifyFormatTime=function(){return ma};this.setModifyFormatTime=function(g){ma=g};this.getUserObject=function(){return x};this.setUserObject=function(g){x=g};this.setParentId=function(g){Y=g};this.getParentId=function(){return Y};this.setDisplay=function(g){ka=g};this.getDisplay=function(){return ka};this.setHide=function(g){Ma=g};this.getHide=function(){return Ma};this.setChecked=function(g,ba){wa=g;x&&x.setChecked(g);Ra&&Ra(a,ba)};this.getChecked=function(){return wa};this.setRowStyle=
function(g){ua=g};this.getRowStyle=function(){return ua};this.setExpand=function(g){0==ra&&x&&x.setExpand(g);Ca=g};this.getExpand=function(){return Ca};this.setHasPerm=function(g){Sa=g};this.getHasPerm=function(){return Sa};this.setSpaceType=function(g){Oa=g};this.getSpaceType=function(){return Oa};this.setSpaceId=function(g){Pa=g};this.getSpaceId=function(){return Pa};this.setSpaceCreatorName=function(g){c=g};this.getSpaceCreatorName=function(){return c};this.setCheckListener=function(g){Ra=g}}var d=
this,p,J,B,C=[],k,r,ca,H;this.setNoDataUI=function(h){ca=h};this.getFunTableRowCheckedCallback=function(){return H};var la=function(h,a){h=a.isExpanded();if(a=(a=a.getCell())&&a.getValue())if(a.setExpand(h),a=va(a.getId()))for(var x=0;x<a.length;x++)a[x].setHide(!h);T.refresh(p)};this.getJqUi=function(){if(!J){if(!p){p=T.createTable();p.setDraggableAdjusting(!0,3,0,new v);p.setColumnFitVisibleWidth(!0);var h=new K(p);h.setOutsideVisible(!1);p.setCellRender(h);p.addTreeExpandListener(la);p.setSyncUIWhenModelChanged(!1);
f()}J=$(p.getUI());Ja.layoutCtrlWithLRTB(J,0,0,null,0,0,null)}return J};this.resize=function(){T.clear(p);f();d.updateUI()};this.isEmpty=function(){return!C||0==C.length};this.clear=function(){p&&T.clear(p);C=[];r=B=k=null};var sa=function(){for(var h=!0,a=!1,x=0;x<C.length;x++){var I=C[x];0==I.getLevel()&&(h=h&&I.getExpand(),a=a||I.getExpand())}return h?!0:a?null:!1};this.refreshTable=function(){B=null;var h=[];if(k)for(var a=k.getExtReportSnapGroupID(),x=b.getSnapInfoTreeModel(),I=com.kingdee.bos.qing.common,
ea=0;ea<x.length;ea++){var m=x[ea];if(m.getSnapGroupId()==a&&m.getDisplay()){var q=new w(m);q.setLevel(0);q.fromObject(m);q.setId(m.getReportId());q.setHide(!1);q.setName(m.getReportName());q.setCheckListener(n);var t=new KTStyle;t.setBackgroundColor(I.CommonTableSkin.EVEN_ROW_BACKGROUND_COLOR);q.setRowStyle(t);q.setChecked(m.getChecked(),!1);q.setExpand(m.getExpand());q.setParentId("0");h.push(q);m=m.getChildren();for(t=0;t<m.length;t++){var X=m[t];if(X.getDisplay()){var u=new w(X);u.setLevel(1);
u.fromObject(X);u.setId(X.getSnapId());u.setName(X.getSnapName());u.setChecked(X.getChecked(),!1);u.setExpand(!1);u.setHide(!q.getExpand());u.setCheckListener(n);u.setParentId(q.getId());h.push(u)}}}}C=h;d.updateUI()};this.updateUI=function(){T.clear(p);if(!C||0>=C.length){r?ca.setText(l.get("searchNoResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c")):ca.setText(l.get("noSnapInfo","\u6682\u65e0\u62a5\u8868\u5feb\u7167"));J.hide();ca.show();var h=d.getSelectSnapInfoModel().length}else{f();
J.show();ca.hide();for(h=0;h<C.length;h++){var a=C[h],x=T.createRow(p,!1);x.setUserObject(a);var I=x.getCell(1);I.setValue(a);var ea=a.getLevel();ea=new KTCellTreeModel(ea);ea.setExpanded(a.getExpand());x.setHide(a.getHide());x.setStyle(a.getRowStyle());I.setTreeModel(ea)}T.refresh(p);h=d.getSelectSnapInfoModel().length}H&&H(h)};var va=function(h){for(var a=[],x=0;x<C.length;x++){var I=C[x];I.getParentId()==h&&a.push(I)}return a};this.setTableRowCheckedCallback=function(h){H=h};var n=function(h,a){if(a){if(0==
h.getLevel())for(var x=va(h.getId()),I=0;I<x.length;I++)x[I].getChecked()!=h.getChecked()&&x[I].setChecked(h.getChecked(),!1);else{x=va(h.getParentId());a=!0;for(I=0;I<x.length;I++)if(!x[I].getChecked()){a=!1;break}a:{h=h.getParentId();for(x=0;x<C.length;x++)if(I=C[x],I.getId()==h){h=I;break a}h=void 0}h.setChecked(a,!1)}B&&B.setChecked(S());T.refresh(p);a=d.getSelectSnapInfoModel().length;H&&H(a)}};this.getSelectSnapInfoModel=function(){for(var h=[],a=0;a<C.length;a++){var x=C[a];x.getChecked()&&
0<x.getLevel()&&h.push(x.getUserObject())}return h};var f=function(){if(p){p.addColumns(6);p.getColumn(0).setWidth(26);p.getColumn(1).setWidth(100);p.getColumn(2).setWidth(100);p.getColumn(3).setWidth(120);p.getColumn(4).setWidth(100);p.getColumn(5).setWidth(120);var h=T.createHeadRow(p),a=new KTStyle;a.setBackgroundColor(com.kingdee.bos.qing.common.CommonTableSkin.HEAD_ROW_BACKGROUND_COLOR);a.setBold(!0);a.setTextAlign("center");h.setStyle(a);h.getCell(1).setValue(l.get("name","\u540d\u79f0"));h.getCell(2).setValue(l.get("owner",
"\u62e5\u6709\u8005"));h.getCell(3).setValue(l.get("createtime","\u521b\u5efa\u65f6\u95f4"));h.getCell(4).setValue(l.get("modifier","\u4fee\u6539\u4eba"));h.getCell(5).setValue(l.get("modifytime","\u4fee\u6539\u65f6\u95f4"))}},S=function(){if(!C||0>=C.length)return!1;for(var h=0;h<C.length;h++)if(!C[h].getChecked())return!1;return!0};this.setSnapGroupModel=function(h){k=h};this.getSnapGroupModel=function(){return k};this.getSearchText=function(){return r};this.setSearchText=function(h){r=h}}function V(b,
v){var K,w=this,d=v,p=v.getValue()==F.PUBLIC.getValue()?l.get("public","\u516c\u5171"):l.get("personal","\u4e2a\u4eba"),J,B,C,k=[],r,ca,H=b.getNoDataUI(l.get("noSnapGroup","\u6ca1\u6709\u76ee\u5f55\uff0c\u8bf7\u5148\u65b0\u5efa\u76ee\u5f55"));Aa.AbstractTabPane.call(this);this.getJqUi=function(){if(!K){K=$("<div>");var a=$("<div>");a.addClass("extreport-snap-group-container");a.css({width:"100%",height:"100%"});B=$("<div>");B.addClass("extreport-snap-group-op");var x=$("<span>");x.addClass("extreport-snap-group-title");
x.text(l.get("category","\u76ee\u5f55"));(v.getValue()==F.PERSONAL.getValue()||b.getAddPublicSnapGroupPerm())&&sa();x.appendTo(B);B.appendTo(a);J=$("<div class='extreport-snap-group-all-list' />");J.appendTo(a);a.appendTo(K);H.getJqUi().appendTo(a);w.updateUI()}return K};this.setUpdateUIListener=function(a){r=a};var la=function(){H.hide();J.show();var a=new E;a.setExtReportSnapGroupType(d.getValue());a=new Q(b,a);a.setFunSnapGroupItemClickCallBack(va);a.setFunDeleteSuccessCallBack(n);a.setFunAddSuccessCallBack(h);
a.setFunMoveUpGroupItemCallBack(S);a.setNoDataCallBack(w.updateUI);var x=!b.getSearchText()&&0<k.length;f(a,x);a.getJqUi().appendTo(J);a.editGroupName()},sa=function(){var a=$(B).find(".add-extreport-snap-group");a&&0<a.length||(a=$("<span>"),a.addClass("add-extreport-snap-group"),a.attr("title",l.get("addExtReportSnapGroup","\u6dfb\u52a0\u76ee\u5f55")),a.on("click",la),Z.backgroundWithHover(a,"btn-add-classification"),a.appendTo(B))},va=function(a,x){a.hasClass("extreport-snap-group-selected")||
($(J).find(".extreport-snap-group-selected").removeClass("extreport-snap-group-selected"),a.addClass("extreport-snap-group-selected"),ca&&ca(x),C=x)},n=function(a){a=a.getExtReportSnapGroupID();for(var x=0,I=0;I<k.length;I++)if(a==k[I].getExtReportSnapGroupModel().getExtReportSnapGroupID()){k.splice(I,1);x=I;break}b.funRemoveSnapGroupById(d.getValue(),a);C&&C.getExtReportSnapGroupID()!=a||(k&&0<k.length?(x>k.length-1&&(x=k.length-1),k[x].setSelected(!0)):C=null)},f=function(a,x){a=a.getJqUi().children(".moveup-button");
x?a.css("display",""):a.css("display","none")},S=function(a){var x=a.getJqUi(),I=k.indexOf(a);if(-1<I){x.insertBefore(x.prev());x=k[I-1];k.splice(I-1,2,a,x);for(var ea=[],m=[],q=0,t=k.length;q<t;q++){var X=k[q].getExtReportSnapGroupModel();X.setOrderID(t-q);m.push(X);ea.push(X.toJsonObject())}0<ea.length&&(q=b.createFacade(function(u){d.getValue()==F.PUBLIC.getValue()?b.setPublicSnapGroupModel(m):d.getValue()==F.PERSONAL.getValue()&&b.setPersonalSnapGroupModel(m)},function(u,ma){return!0}),q.setShowBlocking(!1),
q.saveOrderSnapGroup(ea));1==I&&(f(x,!0),f(a,!1))}},h=function(a){k.push(a);b.getSnapGroupModels(d.getValue()).push(a.getExtReportSnapGroupModel());a.setSelected(!0)};this.updateUI=function(){var a=b.getSnapGroupModels(d.getValue());v.getValue()==F.PERSONAL.getValue()||b.getAddPublicSnapGroupPerm()?sa():$(B).find(".add-extreport-snap-group").remove();H.hide();J.show();var x;k=[];$(J).empty();for(var I=!1,ea=0;ea<a.length;ea++){var m=a[ea];if(m.getDisplay()){I=!0;var q=new Q(b,m);q.setFunMoveUpGroupItemCallBack(S);
q.setFunSnapGroupItemClickCallBack(va);q.setFunAddSuccessCallBack(h);q.setFunDeleteSuccessCallBack(n);q.setNoDataCallBack(w.updateUI);var t=!b.getSearchText()&&0!=ea;f(q,t);k.push(q);t=q.getJqUi();C&&C.getExtReportSnapGroupID()==m.getExtReportSnapGroupID()&&(x=q);t.appendTo(J)}}b.isLoadSnapGroup()&&(!a||0>=a.length?(H.setText(l.get("noSnapGroup","\u6ca1\u6709\u76ee\u5f55\uff0c\u8bf7\u5148\u65b0\u5efa\u76ee\u5f55"),48),J.hide(),H.show()):I||(H.setText(l.get("searchNoResult","\u641c\u7d22\u7ed3\u675f,\u6ca1\u6709\u5339\u914d\u7684\u7ed3\u679c"),
48),J.hide(),H.show()));!x&&0<k.length&&(x=k[0]);x&&x.setSelected(!0);r&&r(k)};this.setItemClickCallBack=function(a){ca=a};this.into=function(){w.updateUI()};this.getTitle=function(){return p};this.setTitle=function(a){p=a};this.getType=function(){return d};this.setType=function(a){d=a}}function N(b){var v,K,w;this.getJqUi=function(){K||(v=new Ia,v.addSearchListener(d),v.setSearchListenerDelay(1E3),v.setPlaceholder(l.get("searchBoxPlaceholder","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9")),v.setShowSearchIcon(!0),
K=v.getJqUi(),K.addClass("snap-search-box"));return K};this.clear=function(){v.clear()};var d=function(B){b.funLoadSnapInfoListBySnapGroupIds(b.getUnLoadSnapGroupID(),J)};this.getDoSearchCallBack=function(){return w};this.setDoSearchCallBack=function(B){w=B};var p=function(B,C){for(var k=0;k<B.length;k++){var r=B[k];r.setDisplay(C);r.getChildren&&p(r.getChildren(),C)}},J=function(){var B;v&&(B=v.getText());B&&B.trim()&&(B=B.trim(),B=B.toUpperCase());var C=b.getSnapGroupModels(F.PUBLIC.getValue()),
k=b.getSnapGroupModels(F.PERSONAL.getValue()),r=b.getSnapInfoTreeModel();b.resetModelSearchHitStatus();if(B){p(C,!1);p(k,!1);p(r,!1);var ca=b.getSnapGroupModels(F.PUBLIC.getValue());C=b.getSnapGroupModels(F.PERSONAL.getValue());ca=ca.concat(C);r=b.getSnapInfoTreeModel();C=[];if(r&&0<r.length)for(k=0;k<r.length;k++){var H=r[k],la=H.getReportName(),sa=H.getCreatorName(),va=-1,n=-1;la&&(la=la.trim(),la=la.toUpperCase(),va=la.indexOf(B));sa&&(sa=sa.trim(),sa=sa.toUpperCase(),n=sa.indexOf(B));la=H.getChildren();
sa=!1;if(la){for(var f=0;f<la.length;f++){var S=la[f],h=S.getSnapName(),a=S.getCreatorName(),x=-1,I=-1;h&&(h=h.trim(),h=h.toUpperCase(),x=h.indexOf(B));a&&(a=a.trim(),a=a.toUpperCase(),I=a.indexOf(B));if(-1<x||-1<I)sa=!0,S.setDisplay(!0)}if(-1<va||-1<n||sa)if(H.setDisplay(!0),H.setSearchHit(!0),H.setExpand(!0),-1>=C.indexOf(H.getSnapGroupId())&&C.push(H.getSnapGroupId()),!sa)for(f=0;f<la.length;f++)S=la[f],S.setDisplay(!0)}else if(-1<va||-1<n)H.setDisplay(!0),-1>=C.indexOf(H.getSnapGroupId())&&C.push(H.getSnapGroupId())}r=
{};r[F.PUBLIC.getValue()]=0;r[F.PERSONAL.getValue()]=0;if(0<C.length)for(k=0;k<ca.length;k++)H=ca[k],-1<C.indexOf(H.getExtReportSnapGroupID())&&(H.setDisplay(!0),H=H.getExtReportSnapGroupType(),r[H]+=1);ca=r}else p(C,!0),p(k,!0),p(r,!0);w&&w(B,ca)}}function da(b){var v=b,K,w,d;this.getJqUi=function(){if(!K){var p=$("<div>");p.css({color:"#FFFFFF",width:"100%",height:"100%"});p.hide();w=$("<div>");w.text(v);w.appendTo(p);Ja.layoutCtrlCenterAlign(w,500);w.css({height:"20px","line-height":"20px","font-size":"16px",
"text-align":"center",color:"#BBBBBB","margin-top":w.parent().height()/2-110+270+"px"});d=$("<div>");Z.background(d,"no-data");d.appendTo(p);Ja.layoutCtrlCenterAlign(d,220);d.css({height:"220px","margin-top":d.parent().height()/2-110+"px"});K=p}return K};this.show=function(){K.show()};this.hide=function(){K.hide()};this.setText=function(p,J){v=p;w&&w.text(p);J=J?J:0;p=w.parent().height()/2-110+270;w.css({"margin-top":(0<p?p:0)+J+"px"});p=d.parent().height()/2-110;d.css({"margin-top":(0<p?p:0)+J+"px"})}}
"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.extreport&&(com.kingdee.bos.extreport={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter&&(com.kingdee.bos.extreport.snapcenter={});"undefined"==typeof com.kingdee.bos.extreport.snapcenter.ui&&(com.kingdee.bos.extreport.snapcenter.ui={});var ia=com.kingdee.bos.extreport.snapcenter.ui;ia.Main=function(){var b,v,K,
w,d,p=!1,J,B,C,k,r,ca,H,la,sa,va,n,f=new function(){var c=this,g,ba,P=[],oa=[],xa=[],pa=[],Ga,Na=!1,Ta=!1;this.getNoDataUI=function(D){return new da(D)};this.getMsgTimeOut=function(){return 3E3};this.resetModelExpandAndCheckStatus=function(){for(var D=0;D<pa.length;D++){var O=pa[D];O.getSearchHit()||O.setExpand(!1);O.setChecked(!1);O=O.getChildren();for(var R=0;R<O.length;R++)O[R].setChecked(!1)}};this.resetModelSearchHitStatus=function(){for(var D=0;D<pa.length;D++)pa[D].setSearchHit(!1)};this.isLoadSnapGroup=
function(){return Ta};this.funLoadExtReportSnapGroupList=function(D){c.createFacade(function(O){Ta=!0;if(null==O){var R=l.get("createCategoryFirst","\u60a8\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55\u3002");c.getMessageCurtain().showPrompt(R,f.getMsgTimeOut())}else{R=O.snapGroupList;Na=O.editPublicSnapPerm;O=[];var ja=[],ya=[];if(R&&0<R.length){for(var Ka=0;Ka<R.length;Ka++){var Qa=new E;Qa.fromJsonObject(R[Ka]);Qa.getExtReportSnapGroupType()==F.PUBLIC.getValue()?(O.push(Qa.getExtReportSnapGroupID()),
ja.push(Qa)):Qa.getExtReportSnapGroupType()==F.PERSONAL.getValue()&&ya.push(Qa)}c.setPublicSnapGroupModel(ja);c.setPersonalSnapGroupModel(ya)}c.funLoadSnapInfoListBySnapGroupIds(O,D)}},function(O,R){return!1}).loadSnapGroupList()};this.funLoadSnapInfoListBySnapGroupId=function(D,O){var R=c.createFacade(function(ja){c.funMarkSnapGroupIdsLoaded([D]);ja=ja.snapInfoList;Ua(ja);O&&O(ja)},function(ja,ya){return!1});R.setShowBlocking(!0);R.loadSnapInfoListByGroupID(D)};this.funLoadSnapInfoListBySnapGroupIds=
function(D,O){if(!D||0>=D.length)O&&O();else{var R=c.createFacade(function(ja){c.funMarkSnapGroupIdsLoaded(D);Ua(ja.snapInfoList);O&&O()},function(ja,ya){return!1});R.setShowBlocking(!0);R.loadSnapInfoListByGroupIDS(D)}};var Ua=function(D){if(D&&0<D.length)for(var O=0;O<D.length;O++){var R=new W;R.fromJsonObject(D[O]);0>=R.getReportName().length&&(R.setDeleted(!0),R.setReportName(l.get("extReportDeleted","\u8be5\u62a5\u8868\u5df2\u88ab\u5220\u9664")));c.addSnapInfoTreeModel(R)}};this.checkExistsOthersSnapInGroup=
function(D,O){var R=c.createFacade(function(ja){O&&O(ja)},function(ja,ya){return!1});R.setShowBlocking(!0);R.checkExistsOthersSnapInGroup(D)};this.clear=function(){P=[];oa=[];xa=[];pa=[];Na=!1;Ga=null};this.getSnapGroupModels=function(D){if(F.PUBLIC.getValue()==D)return P;if(F.PERSONAL.getValue()==D)return oa};this.getSnapInfoTreeModel=function(){return pa};this.isSnapGroupEmpty=function(D){for(var O=0;O<pa.length;O++)if(pa[O].getSnapGroupId()==D)return!1;return!0};this.getSnapInfoTreeModelBySnapId=
function(D){for(var O=0;O<pa.length;O++)for(var R=pa[O],ja=R.getChildren(),ya=0;ya<ja.length;ya++)if(ja[ya].getSnapId()==D)return R};this.addSnapInfoTreeModel=function(D){a:{var O=D.getSnapGroupId()+"_"+D.getReportId();for(var R=0;R<pa.length;R++){var ja=pa[R];if(ja.getSnapGroupId()+"_"+ja.getReportId()==O){O=!0;break a}}O=!1}O||pa.push(D)};this.funMarkSnapGroupIdsLoaded=function(D){for(var O=0;O<D.length;O++)xa.push(D[O])};this.isUnloadSnapGroupId=function(D){return-1>=xa.indexOf(D)};this.funFindSnapGroupByTypeAndId=
function(D,O){D=c.getSnapGroupModels(D);for(var R=0;R<D.length;R++){var ja=D[R];if(ja.getExtReportSnapGroupID()==O)return ja}};this.funRemoveSnapGroupById=function(D,O){D=c.getSnapGroupModels(D);for(var R=0;R<D.length;R++)D[R].getExtReportSnapGroupID()==O&&D.splice(R,1)};this.funRemoveSnapInfoModelByIds=function(D){for(var O=0;O<D.length;O++)for(var R=D[O],ja=0;ja<pa.length;ja++){for(var ya=pa[ja].getChildren(),Ka=0;Ka<ya.length;Ka++)R==ya[Ka].getSnapId()&&ya.splice(Ka,1);0>=ya.length&&pa.splice(ja,
1)}};this.getSearchText=function(){return Ga};this.setSearchText=function(D){Ga=D};this.setPublicSnapGroupModel=function(D){P=D};this.setPersonalSnapGroupModel=function(D){oa=D};this.getUnLoadSnapGroupID=function(){for(var D=P.concat(oa),O=[],R=0;R<D.length;R++){var ja=D[R];c.isUnloadSnapGroupId(ja.getExtReportSnapGroupID())&&O.push(ja.getExtReportSnapGroupID())}return O};this.getMessageCurtain=function(){g||(g=new ta,g.getJqUi().appendTo($("body")));return g};this.createFacade=function(D,O,R){var ja=
Va();return new ha(ja,D,function(ya,Ka){return O?O(ya,Ka):!1},R)};this.getAddPublicSnapGroupPerm=function(){return c.getEditPublicSnapGroupPerm()};this.getDeletePublicSnapGroupPerm=function(){return c.getEditPublicSnapGroupPerm()};this.getEditPublicSnapGroupPerm=function(){return Na};this.getParamPathPrefix=function(){var D=y.decodeParamFromUrl(window.location.search,"path");return D?D:"/ierp"};var Va=function(D){ba||(D=y.decodeParamFromUrl(window.location.search,"path"),D=(D?D:"/ierp")+"/qing_rpt/snapcenter.do",
ba=new na,ba.setRemoteUrl(D));return ba};this.showDeleteConfirmDialog=function(D,O){var R=Ba.createFeedbackDialog();R.setOptionType(Ba.OPTION_OK_CANCEL);R.setMsgImageType(Ba.MSG_DELETE);R.setMessage(D);R.setClosingChecker(function(ja){ja===Ba.RETURN_OK&&O();return!0});R.showDialog()}};this.start=function(){S().appendTo($(document.body));p=!0;aa.hookCollector(function(c,g){e.interestInBehavior(c,g)});e.interestInBehaviorEntrance(e.ENTRANCE_EXTREPORT_SNAP_CENTER);f.funLoadExtReportSnapGroupList(h)};
var S=function(){b=$("<div>");b.addClass("extreport-snap-manage");x();I();a();var c=new Ea;c.setCallbackImmediately(function(){a();n&&K&&(K.resize(),H&&H.getCurrentTabPane().updateUI(),n.resize())});c.setDelay(250);c.observe();c=$("<div>");c.addClass("extreport-snap-manage-container");Ma(c);c.appendTo(b);return b},h=function(c){if(!f.getEditPublicSnapGroupPerm()){for(var g=[],ba=f.getSnapInfoTreeModel(),P=0;P<ba.length;P++){var oa=ba[P];g.indexOf(-1>=oa.getSnapGroupId())&&g.push(oa.getSnapGroupId())}ba=
f.getSnapGroupModels(F.PUBLIC.getValue());for(P=ba.length-1;0<=P;P--)-1>=g.indexOf(ba[P].getExtReportSnapGroupID())&&ba.splice(P,1)}H.getCurrentTabPane().updateUI();c&&c()},a=function(){document.body.style.height=document.documentElement.clientHeight+"px"},x=function(){v=$("<div>");v.addClass("extreport-snap-manage-toolbar");J=ua(v,!1,X,"",l.get("preview","\u67e5\u770b"),l.get("preview","\u67e5\u770b"));B=ua(v,!1,ma,"",l.get("edit","\u7f16\u8f91"),l.get("edit","\u7f16\u8f91"));k=ua(v,!1,ka,"",l.get("deleteExtReport",
"\u5220\u9664"),l.get("deleteExtReport","\u5220\u9664"));C=ua(v,!1,m,"",l.get("editSnapInfo","\u4fee\u6539\u4fe1\u606f"),l.get("editSnapInfo","\u4fee\u6539\u4fe1\u606f"));J.setEnabled(!1);B.setEnabled(!1);k.setEnabled(!1);C.setEnabled(!1);ua(v,!1,u,"",l.get("scheduleMgr","\u8c03\u5ea6\u7ba1\u7406"),l.get("scheduleMgr","\u8c03\u5ea6\u7ba1\u7406"));ua(v,!1,function(g){q()},"",l.get("refresh","\u5237\u65b0"),l.get("refresh","\u5237\u65b0"));ua(v,!1,wa,"",l.get("quit","\u9000\u51fa"),l.get("quit","\u9000\u51fa"));
v.appendTo(b);var c=$("<div>");c.addClass("extreport-snap-toolbar-right");c.css({position:"relative","float":"right",height:"30px"});c.appendTo(v)},I=function(){la=new N(f);la.setDoSearchCallBack(function(c,g){n.clear();n.setSearchText(c);f.setSearchText(c);n.updateUI();g&&(c=g[F.PUBLIC.getValue()],g=g[F.PERSONAL.getValue()],0<c&&0==g?H.setCurrentTabPane(sa):0<g&&0==c&&H.setCurrentTabPane(va));H.getCurrentTabPane().updateUI()});la.getJqUi().appendTo(v)},ea=function(){var c=(n&&n.getSelectSnapInfoModel())[0],
g=f.funFindSnapGroupByTypeAndId(r.getValue(),c.getSnapGroupId());g.getExtReportSnapGroupType()==F.PUBLIC.getValue()?c.setSnapGroupType(F.PUBLIC):g.getExtReportSnapGroupType()==F.PERSONAL.getValue()&&c.setSnapGroupType(F.PERSONAL);c=new A(G.SNAP_CENTER,l.get("editSnapInfo","\u4fee\u6539\u4fe1\u606f"),{snapId:c.getSnapId(),reportId:c.getReportId(),snapName:c.getSnapName(),snapGroupName:g.getExtReportSnapGroupName(),snapGroupId:g.getExtReportSnapGroupID(),snapGroupTypeName:r.getName(),snapGroupTypeId:r.getValue()});
c.addSuccessCallback(function(ba){aa.occur(aa.SAVE_SNAP_TO_TYPE,ba.getSnapName());q(function(){f.getMessageCurtain().showSuccess(l.get("saveSnapSuccess","\u4fee\u6539\u5feb\u7167\u4fe1\u606f\u6210\u529f\u3002"),f.getMsgTimeOut())})});c.showDialog()},m=function(){var c=n&&n.getSelectSnapInfoModel();c&&0!=c.length?c&&1<c.length?f.getMessageCurtain().showPrompt(l.get("onlyOne","\u53ea\u80fd\u9009\u62e9\u4e00\u6761\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002"),f.getMsgTimeOut()):t(c[0],ea):f.getMessageCurtain().showPrompt(l.get("noData",
"\u8bf7\u5148\u9009\u62e9\u4e00\u6761\u6570\u636e\u3002"),f.getMsgTimeOut())},q=function(c){f.clear();la.clear();n.clear();f.funLoadExtReportSnapGroupList(function(){h(c)})},t=function(c,g,ba){if(c&&c.getSnapId()){var P=c.getSnapId();c=f.getSnapInfoTreeModelBySnapId(P);var oa=c.getSpaceCreatorName(),xa;c.getHasPerm()||(c.getDeleted()&&(xa=c.getReportName()),xa||(xa=l.get("noSnapPermission","\u60a8\u6ca1\u6709\u8be5\u62a5\u8868\u7684\u6743\u9650")),xa+=l.get("commaSymbol","\uff0c")+l.get("noOperationPerm",
"\u65e0\u6cd5\u6267\u884c\u5f53\u524d\u64cd\u4f5c\u3002"));xa?f.getMessageCurtain().showPrompt(xa,f.getMsgTimeOut()):(xa=f.createFacade(function(pa){if(pa&&P==pa)g&&g();else if("notExist"==pa)q(function(){f.getMessageCurtain().showPrompt(l.get("noSnapCurtain","\u5feb\u7167\u4e0d\u5b58\u5728\u3002"),f.getMsgTimeOut())});else if("noPermission"==pa){var Ga=ba==z.EDIT?l.get("noSnapEditPermission","\u60a8\u6ca1\u6709\u8be5\u62a5\u8868\u7684\u5feb\u7167\u7f16\u8f91\u6743\u9650"):l.get("noSnapPermission",
"\u60a8\u6ca1\u6709\u8be5\u62a5\u8868\u7684\u6743\u9650");oa&&(Ga+=l.get("contactCreator","\uff0c\u8bf7\u8054\u7cfb#1\u8fdb\u884c\u6388\u6743\u3002").replace("#1",oa));q(function(){f.getMessageCurtain().showPrompt(Ga,f.getMsgTimeOut())})}},function(pa,Ga){return!1}),xa.setShowBlocking(!0),xa.checkSnapPermission(P,ba))}},X=function(){var c=n&&n.getSelectSnapInfoModel();if(c&&0!=c.length)if(c&&1<c.length)f.getMessageCurtain().showPrompt(l.get("onlyOne","\u53ea\u80fd\u9009\u62e9\u4e00\u6761\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002"),
f.getMsgTimeOut());else{var g=c[0];t(g,function(){if(r.getValue()==F.PUBLIC.getValue()){var ba=g.getSnapId(),P=com.kingdee.bos.qing.behavior.BehaviorManager,oa=y.createUUID();P.initAccessRecordParams(ba,oa,P.SourceType.QING_SNAPSHOT,P.AppType.QING_RPT);P.recordResourceOperation(P.OperationType.QING_VISIT)}ba=Da.getUrlParamValue();P=f.getParamPathPrefix()+"/qing_rpt/snapPreview.do";P=y.appendParamToUrl(P,"extReportId",g.getReportId());P=y.appendParamToUrl(P,"snapId",g.getSnapId());P=y.appendParamToUrl(P,
"snapName",g.getSnapName());P=y.appendParamToUrl(P,"snapGroupType",r.getValue());ba&&(P=y.appendParamToUrl(P,"skin",ba));U.openNewTab(g.getSnapName(),P)})}else f.getMessageCurtain().showPrompt(l.get("noData","\u8bf7\u5148\u9009\u62e9\u4e00\u6761\u6570\u636e\u3002"),f.getMsgTimeOut())},u=function(){var c=Da.getUrlParamValue(),g=f.getParamPathPrefix()+"/qing_rpt/scheduleCenterEntrance.do";c&&(g=y.appendParamToUrl(g,"skin",c));U.openNewTab(l.get("scheduleMgr","\u8c03\u5ea6\u7ba1\u7406"),g)},ma=function(){var c=
n&&n.getSelectSnapInfoModel();if(c&&0!=c.length)if(c&&1<c.length)f.getMessageCurtain().showPrompt(l.get("onlyOne","\u53ea\u80fd\u9009\u62e9\u4e00\u6761\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002"),f.getMsgTimeOut());else{var g=c[0],ba=function(){if(r.getValue()==F.PUBLIC.getValue()){var P=com.kingdee.bos.qing.behavior.BehaviorManager,oa=y.createUUID();P.initAccessRecordParams(g.getSnapId(),oa,P.SourceType.QING_SNAPSHOT,P.AppType.QING_RPT);P.recordResourceOperation(P.OperationType.QING_SNAPSHOT_EDIT)}P=
g.getSnapName();aa.occur(aa.EXT_RPT_SNAP_EDIT,P)};t(g,function(){qa.sendLaunchxletCommandOpenExtReportSnapEditor(g.getReportId(),g.getSnapId(),g.getSnapName(),ba)},z.EDIT)}else f.getMessageCurtain().showPrompt(l.get("noData","\u8bf7\u5148\u9009\u62e9\u4e00\u6761\u6570\u636e\u3002"),f.getMsgTimeOut())},ra=function(){var c=n&&n.getSelectSnapInfoModel(),g=[];if(!c||0==c.length)return g;for(var ba=0;ba<c.length;ba++)g.push(c[ba].getSnapId());return g},Y=function(){var c=n.getSnapGroupModel(),g=ra(),ba=
f.createFacade(function(P){P=l.get("deleteSnapInfoSuccess","\u5220\u9664\u5feb\u7167\u6210\u529f\u3002");f.getMessageCurtain().showSuccess(P,f.getMsgTimeOut());f.funRemoveSnapInfoModelByIds(g);f.isSnapGroupEmpty(c.getExtReportSnapGroupID())&&c.getExtReportSnapGroupType()==F.PUBLIC.getValue()&&null==c.getExistsOthersSnapInGroup()?f.checkExistsOthersSnapInGroup(c.getExtReportSnapGroupID(),function(oa){oa?c.setExistsOthersSnapInGroup(!0):c.setExistsOthersSnapInGroup(!1);n.refreshTable()}):n.refreshTable()},
function(P,oa){return 9010006==P?(q(function(){f.getMessageCurtain().showPrompt(oa+l.get("noOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u3002"),f.getMsgTimeOut())}),!0):!1});ba.setShowBlocking(!0);ba.deleteSnapInfo(g)},ka=function(){var c=ra();c&&0!=c.length?(c=l.get("confirmMessage","\u5220\u9664\u9009\u4e2d\u7684#1\u6761\u6570\u636e\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f").replace("#1",c.length),f.showDeleteConfirmDialog(c,
Y)):f.getMessageCurtain().showPrompt(l.get("noData","\u8bf7\u5148\u9009\u62e9\u4e00\u6761\u6570\u636e\u3002"),f.getMsgTimeOut())},wa=function(){U.closeCurrentTab()},ua=function(c,g,ba,P,oa,xa){var pa=new za;pa.setIconSetter(function(Ga,Na){Z.background(Ga,Na)});pa.setIconName(P);pa.setText(oa);pa.setTooltips(xa);g&&pa.setShowDropdownArrow(!0);pa.addActionListener(function(Ga,Na){g?Ca(Ga.getJqUi(),Na,ba,c):ba(Ga)});pa.getJqUi().appendTo(c);return pa},Ca=function(c,g,ba,P){var oa=c.data("menu");if(oa&&
oa.isShowing())c.data("menu",null),oa.hide();else{oa=new La;oa.setModel(ba());oa.setHideListener(function(){c.data("menu",null)});c.data("menu",oa);ba=c.prop("offsetLeft");var xa=c.prop("offsetHeight")+c.prop("offsetTop");oa.show(P,ba,xa,g,!0)}},Ma=function(c){K=new M;K.setHorizontalSplit(!0);K.setEnabled(!0);K.setSplitLineWide(4);K.setResizeMode(M.RESIZE_MODE_FIRST_FIXED);K.setFirstSize(230,200,640);K.setSecondSize($(document).width()-234,0,-1);K.getJqUi().addClass("sa-qing-publish-manager");c.append(K.getJqUi());
d=Ra();w=Sa();K.setFirstChild(M.createChildWrapper(w,function(){p&&(w&&w.css({width:K.getNonemptyFirstWide()+"px"}),d&&d.css({width:K.getNonemptySecondWide()+"px"}),n&&n.resize())}));K.setSecondChild(M.createChildWrapper(d))},Sa=function(){var c=new Aa,g=c.getJqUi();c.addTabChangedListener(function(ba,P){P&&(r=P.getType())});va=new V(f,F.PERSONAL);va.setItemClickCallBack(Oa);va.setUpdateUIListener(Pa);sa=new V(f,F.PUBLIC);sa.setItemClickCallBack(Oa);sa.setUpdateUIListener(Pa);r||(r=F.PERSONAL);c.addTab(va,
r.getValue()==F.PERSONAL.getValue());c.addTab(sa,r.getValue()==F.PUBLIC.getValue());g.css({"background-color":"#fff"});H=c;return g},Ra=function(){var c=$("<div>");c.addClass("extreport-snap-container");var g=f.getNoDataUI(l.get("noSnapInfo","\u6682\u65e0\u62a5\u8868\u5feb\u7167"));g.getJqUi().appendTo(c);n=new fa(f);n.setTableRowCheckedCallback(function(ba){0>=ba?(J.setEnabled(!1),B.setEnabled(!1),C.setEnabled(!1),k.setEnabled(!1)):(1==ba?(J.setEnabled(!0),B.setEnabled(!0),C.setEnabled(!0)):(J.setEnabled(!1),
B.setEnabled(!1),C.setEnabled(!1)),k.setEnabled(!0))});n.setNoDataUI(g);n.getJqUi().appendTo(c);return c},Oa=function(c){var g=!1;ca!=c&&(g=!0,ca=c);var ba=c.getExtReportSnapGroupID();n.setSnapGroupModel(c);var P=function(oa){oa?c.setExistsOthersSnapInGroup(!0):c.setExistsOthersSnapInGroup(!1);n.refreshTable()};f.isUnloadSnapGroupId(ba)?f.funLoadSnapInfoListBySnapGroupId(ba,n.refreshTable):f.isSnapGroupEmpty(ba)&&c.getExtReportSnapGroupType()==F.PUBLIC.getValue()&&null==c.getExistsOthersSnapInGroup()?
f.checkExistsOthersSnapInGroup(ba,P):(g&&f.resetModelExpandAndCheckStatus(),n.refreshTable())},Pa=function(c){(!c||0>=c.length)&&n&&(c=n.getSearchText(),n.clear(),n.setSearchText(c),n.updateUI())}};var ha,Z,na,aa,e,l,Ea,ta,Ba,Aa,Ha,Fa,za,Ia,M,La,Ja,y,U,Da,E,W,z,F,A,G,L,T,qa;(function(){var b=com.kingdee.bos.qing;Da=b.SkinUtil;b=com.kingdee.bos.qing.common;y=b.Util;Ja=b.DomUtil;b=com.kingdee.bos.extreport.snapcenter.common;ha=b.Facade;na=b.RemoteImpl;Z=b.Icons;aa=b.UserOperationReporter;b=com.kingdee.bos.qing.behavior;
e=b.BehaviorManager;b=com.kingdee.bos.qing.common.ui;T=b.TableUtil;b=com.kingdee.bos.qing.ui.component;ta=b.MessageCurtain;Ba=b.MessageDialog;Fa=b.CheckBox;Aa=b.TabContainer;Ha=b.TextField;za=b.ToolbarButton;Ia=b.SearchBox;M=b.SplitPane;b=com.kingdee.bos.qing.framework.common;l=b.MultilanguageManager.createPackageAccessor(ia);Ea=b.WindowResizeObserver;U=b.TabbedUiUtil;b=com.kingdee.bos.extreport.snapcenter.model;E=b.ExtReportSnapGroupModel;F=b.ExtReportSnapGroupType;W=b.ExtReportTreeNodeModel;z=b.ExtReportSnapOperCode;
b=com.kingdee.bos.extreport.snapcenter.common.ui;A=b.SaveSnapDialog;G=b.SaveSnapSourceType;b=com.kingdee.bos.extreport.launcher;qa=b.Launcher;b=com.kingdee.bos.qing.collaboration.common.ui;L=b.ViewCollaborationMemberDialog})()})();
//qingVersionTag: 20250324