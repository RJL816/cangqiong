(function(){function E(f,e,g,c){R.call(this,f,e,g,c);var k=this.protectedMethod;k.setShowBlocking(!1);this.doExport=function(a){k.remote("doExport",a)};this.loadEnvironmentVO=function(){k.remote("loadEnvironmentVO",{})};this.loadEntranceInfo=function(){k.remote("loadEntranceInfo",{})};this.loadDataSourceInfo=function(){k.remote("loadDataSourceInfo",{})};this.loadFileInfo=function(){k.remote("loadFileInfo",{})};this.loadModel=function(){k.remote("loadModel",{})};this.loadTraceSpanInfo=function(){k.remote("loadTraceSpanInfo",
{})}}function x(){var f;this.show=function(){f||(f=N.createFeedbackDialog(),f.setBounds(380,320),f.setExtendPainter(e),f.setClosingChecker(g));f.showDialog()};var e=function(c,k){k=$("<div>");var a=$("<div>");a.addClass("sa-ctrl-feedback-dialog-text");var d=l.get("holographicSureTips","\u4f60\u786e\u5b9a\u8981\u5bfc\u51fa\u8f7b\u5206\u6790\u5168\u4fe1\u606f\u6a21\u677f\u5417\uff1f");a.text(d);a.attr("title",d);a.appendTo(k);a=$("<div>");y.layoutCtrlWithLRTB(a,26,null,null,50,null,null);a.css("color",
"red");d=l.get("holographicDetail","\u8be5\u529f\u80fd\u4e3a\u5de5\u7a0b\u7279\u6027\uff0c\u5bfc\u51fa\u7684\u6587\u4ef6\u7528\u4e8e\u95ee\u9898\u7684\u8ddf\u8e2a\u548c\u5206\u6790\uff0c\u65e0\u6cd5\u901a\u8fc7\u5e38\u89c4\u65b9\u5f0f\u5bfc\u5165\u67e5\u770b\u3002");a.text(d);a.attr("title",d);a.appendTo(k);k.appendTo(c)},g=function(c){c==N.RETURN_OK&&(c=new com.kingdee.bos.qing.RemoteImpl,c.setRemoteUrl(D.QHFEnvImpl.getQHFRemoteUrl()),c.setTag(O.getTag()),(new E(c,function(k){var a=F.formatDate("yyyyMMdd_HHmmss");
S.downloadFile("Qing-"+a+".qhf",k)},function(k,a){return!1})).doExport(O.getParam()));return!0}}function J(){T.call(this);var f=this,e=this.protectedMethod;(function(){e.setTitle(l.get("publishManage","\u6a21\u677f\u4fe1\u606f"));f.setSize(800,560);e.setSelectable(!0);e.setContentPaneCreator(function(){var g=new G;g.setTabLevel(G.SECOND_LEVEL);var c=D.QHFEnvImpl.getQHFRemoteUrl(),k=F.decodeParamFromUrl(location.search,"tag"),a=new U;a.setRemoteUrl(c);a.setTag(k);c=new H(a);g.addTab(c,!0);c=new ca(a);
g.addTab(c,!1);c=new da(a);g.addTab(c,!1);c=new ea(a);g.addTab(c,!1);a=new fa(a);g.addTab(a,!1);return g.getJqUi()});e.setFooterClosingOnly(!0);e.setClosingChecker2(null,function(g){e.destroy();return!0});e.setClosingAction(function(g){})})()}function H(f){G.AbstractTabPane.call(this);var e,g,c;this.getTitle=function(){return l.get("environmentInfo","\u73af\u5883\u4fe1\u606f")};this.getJqUi=function(){if(!e){var a=$("<div>"),d=$("<div>");y.layoutCtrlWithLRTB(d,16,16,null,16,null,null);g=$("<div>");
g.text(l.get("loading","\u52a0\u8f7d\u4e2d"));g.appendTo(d);c=$("<div>");c.css("color","#828282");y.layoutCtrlWithLRTB(c,0,0,null,0,0,null);c.appendTo(d);d.appendTo(a);k();e=a;e.css("overflow","auto")}return e};var k=function(){(new E(f,function(a){g.hide();c.show();var d=new ha;d.fromJsonObject(a);a=$("<div style='font-weight: 700;'>");a.text(l.get("qhfVersion","\u5168\u4fe1\u606f\u6587\u4ef6\u7248\u672c\uff1a"));var b=$("<font style='font-weight: normal;'>");b.text(d.getQhfVersion());b.appendTo(a);
a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("serialNo","\u5ba2\u6237\u8bb8\u53ef\u53f7 \uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getProduct().getSerialNo());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("productName","\u4ea7\u54c1\u540d\u79f0\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getProduct().getName());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");
a.text(l.get("productVersion","\u4ea7\u54c1\u7248\u672c\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getProduct().getVersion());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("serverOS","\u670d\u52a1\u5668\u7cfb\u7edf\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getServer().getServerOS());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("serverOSVersion","\u670d\u52a1\u5668\u7cfb\u7edf\u7248\u672c\uff1a"));
b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getServer().getServerOSVersion());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("clientOS","\u7528\u6237\u7cfb\u7edf\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getClient().getClientOS());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("browser","\u7528\u6237\u6e38\u89c8\u5668\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getClient().getBrowser());
b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("browserVersion","\u7528\u6237\u6e38\u89c8\u5668\u7248\u672c\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getClient().getBrowserVersion());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("accountId","\u8d26\u5957ID\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getAccount().getId());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");
a.text(l.get("accountName","\u8d26\u5957\u540d\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(d.getEnvironment().getAccount().getName());b.appendTo(a);a.appendTo(c);a=$("<div style='font-weight: 700;'>");a.text(l.get("systemVars","\u7528\u6237\u7cfb\u7edf\u53d8\u91cf\uff1a"));b=$("<font style='font-weight: normal;'>");b.text(JSON.stringify(d.getEnvironment().getUserContext().getSystemVars()));b.appendTo(a);a.appendTo(c)},function(a,d){g.hide();return!1})).loadEnvironmentVO()}}function ca(f){G.AbstractTabPane.call(this);
var e,g,c;this.getTitle=function(){return l.get("entranceInfo","\u5165\u53e3\u4fe1\u606f")};this.getJqUi=function(){if(!e){var a=$("<div>"),d=$("<div>");y.layoutCtrlWithLRTB(d,16,16,null,16,null,null);g=$("<div>");g.text(l.get("loading","\u52a0\u8f7d\u4e2d"));g.appendTo(d);c=$("<div>");c.css("color","#828282");y.layoutCtrlWithLRTB(c,0,0,null,0,0,null);c.appendTo(d);d.appendTo(a);k();e=a;e.css("overflow","auto")}return e};var k=function(){(new E(f,function(a){g.hide();c.show();var d=new C;d.fromJsonObject(a);
a=$("<div style='font-weight: 700;'>");a.text(l.get("entranceName","\u5165\u53e3\u4fe1\u606f\uff1a"));var b=$("<font style='font-weight: normal;'>");b.text(C.getEntranceTypeName(d.getEntranceType()));b.appendTo(a);a.appendTo(c);if(d=d.getPublishInfoVO())a=$("<div style='font-weight: 700;'>"),a.text(l.get("publishVOName","\u53d1\u5e03\u540d\u79f0 \uff1a")),b=$("<font style='font-weight: normal;'>"),b.text(d.getName()),b.appendTo(a),a.appendTo(c),a=$("<div style='font-weight: 700;'>"),a.text(l.get("publishTargetType",
"\u53d1\u5e03\u7c7b\u578b \uff1a")),b=$("<font style='font-weight: normal;'>"),b.text(P.getPublishTargetTypeName(d.getPublishTargetType())),b.appendTo(a),a.appendTo(c),a=$("<div style='font-weight: 700;'>"),a.text(l.get("publishPath","\u53d1\u5e03\u8def\u5f84 \uff1a")),b=$("<font style='font-weight: normal;'>"),b.text(d.getPathName()),b.appendTo(a),a.appendTo(c),a=$("<div style='font-weight: 700;'>"),a.text(l.get("publishCreator","\u53d1\u5e03\u4eba \uff1a")),b=$("<font style='font-weight: normal;'>"),
b.text(d.getCreatorName()+"\uff08"+d.getCreatorId()+"\uff09"),b.appendTo(a),a.appendTo(c),a=$("<div style='font-weight: 700;'>"),a.text(l.get("publishCarryData","\u662f\u5426\u4ee5\u540e\u4e0d\u518d\u66f4\u65b0\u6570\u636e \uff1a")),b=$("<font style='font-weight: normal;'>"),b.text(d.isCarryData()?l.get("notRefreshData","\u4e0d\u518d\u66f4\u65b0\u6570\u636e"):l.get("refreshData","\u66f4\u65b0\u6570\u636e")),b.appendTo(a),a.appendTo(c),a=$("<div style='font-weight: 700;'>"),a.text(l.get("publishPreset",
"\u662f\u5426\u9884\u7f6e \uff1a")),b=$("<font style='font-weight: normal;'>"),b.text(d.isPreset()?l.get("yes","\u662f"):l.get("no","\u5426")),b.appendTo(a),a.appendTo(c)},function(a,d){g.hide();return!1})).loadEntranceInfo()}}function da(f){G.AbstractTabPane.call(this);var e,g,c;this.getTitle=function(){return l.get("dataSourceInfo","\u6570\u636e\u6e90\u4fe1\u606f")};this.getJqUi=function(){if(!e){var b=$("<div>"),p=$("<div>");y.layoutCtrlWithLRTB(p,16,16,null,16,null,null);g=$("<div>");g.text(l.get("loading",
"\u52a0\u8f7d\u4e2d"));g.appendTo(p);c=$("<div>");c.css("color","#828282");y.layoutCtrlWithLRTB(c,0,0,null,0,0,null);c.appendTo(p);p.appendTo(b);k();e=b;e.css("overflow","auto")}return e};var k=function(){(new E(f,function(b){g.hide();c.show();if(b.sourceType==z.TYPE_SUBJECT)a(b);else if(b.sourceType==z.TYPE_EMBEDDED){var p=new V;p.fromJsonObject(b);b=$("<div style='font-weight: 700;'>");b.text(l.get("embeddedName","\u5355\u636e\u540d\u79f0 \uff1a"));var h=$("<font style='font-weight: normal;'>");
h.text(p.getName());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");b.text(l.get("embeddedId","\u5355\u636eID\uff1a"));h=$("<font style='font-weight: normal;'>");h.text(p.getBizTag());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");b.text(l.get("embeddedFilterContent","\u5355\u636e\u8fc7\u6ee4\u6761\u4ef6 \uff1a"));h=$("<font style='font-weight: normal;'>");h.text(p.getFilterContent());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");b.text(l.get("embeddedInfo",
"\u5355\u636e\u5176\u4ed6\u4fe1\u606f\uff1a"));h=$("<font style='font-weight: normal;'>");h.text(p.getOtherInfoStr());h.appendTo(b);b.appendTo(c)}else b.sourceType==z.TYPE_DSB&&d(b)},function(b,p){g.hide();return!1})).loadDataSourceInfo()},a=function(b){var p=new W;p.fromJsonObject(b);b=$("<div style='font-weight: 700;'>");b.text(l.get("subjectName","\u4e3b\u9898\u540d\u79f0\uff1a"));var h=$("<font style='font-weight: normal;'>");h.text(p.getName());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");
b.text(l.get("subjectDescription","\u4e3b\u9898\u63cf\u8ff0 \uff1a"));h=$("<font style='font-weight: normal;'>");h.text(p.getDescription());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");b.text(l.get("groupName","\u5206\u7c7b \uff1a"));h=$("<font style='font-weight: normal;'>");h.text(p.getGroupName());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");b.text(l.get("dm","\u6570\u636e\u51c6\u5907 \uff1a"));h=$("<font style='font-weight: normal;'>");h.on("click",
function(){var n=p.getName(),r=com.kingdee.bos.qing.SkinUtil.getUrlParamValue(),m=F.decodeParamFromUrl(location.search,"tag"),q=D.QHFEnvImpl.getExhibitionQHFDmEntranceRemoteUrl();r&&(q=F.appendParamToUrl(q,"skin",r));q=F.appendParamToUrl(q,"tag",m);com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(l.get("qhfDmTitle","\u6570\u636e\u51c6\u5907-")+n,q,q)});h.text(l.get("viewDataModel","\u67e5\u770b\u5efa\u6a21\u6a21\u578b"));h.addClass("sa-ctrl-workbutton_enabled");h.appendTo(b);b.appendTo(c)},
d=function(b){var p=new ia;p.fromJsonObject(b);b=$("<div style='font-weight: 700;'>");b.text(l.get("dsbName","\u4eea\u8868\u677f\u540d\u79f0\uff1a"));var h=$("<font style='font-weight: normal;'>");h.text(p.getName());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");b.text(l.get("dsbDescription","\u4eea\u8868\u677f\u63cf\u8ff0 \uff1a"));h=$("<font style='font-weight: normal;'>");h.text(p.getDescription());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");b.text(l.get("groupName",
"\u5206\u7c7b \uff1a"));h=$("<font style='font-weight: normal;'>");h.text(p.getGroupName());h.appendTo(b);b.appendTo(c);b=$("<div style='font-weight: 700;'>");b.text(l.get("dsbRefDataSource","\u4eea\u8868\u677f\u7ec4\u4ef6\u6570\u636e\u6e90 \uff1a"));if(p=p.getDsbRefDataSourceInfoVOs())for(h=0;h<p.length;h++){var n=p[h],r=$("<div style='font-weight: 700; padding-left: 20px; padding-bottom: 10px;'>");r.text(l.get("qsFile","\u6570\u636e\u6e90")+(h+1));var m=$("<div style='font-weight: 700; padding-left: 20px;'>");
m.text(l.get("dsbRefNames","\u5e94\u7528\u7ec4\u4ef6 \uff1a"));var q=$("<font style='font-weight: normal;'>");q.text(n.getWidgetDisplayNames().join("\uff0c"));q.appendTo(m);m.appendTo(r);if(q=n.getDataSourceInfoVO())if(q.getSourceType()==z.TYPE_SUBJECT){var t=$("<div style='font-weight: 700;'>");t.text(l.get("sourceSubjectName","\u6765\u6e90\u4e3b\u9898\u540d\u79f0 \uff1a"));var v=$("<font style='font-weight: normal;'>");v.text(q.getName());v.appendTo(t);t.appendTo(m);t=$("<div style='font-weight: 700;'>");
t.text(l.get("sourceSubjectDescription","\u6765\u6e90\u4e3b\u9898\u63cf\u8ff0 \uff1a"));v=$("<font style='font-weight: normal;'>");v.text(q.getDescription());v.appendTo(t);t.appendTo(m);t=$("<div style='font-weight: 700;'>");t.text(l.get("sourceSubjectGroupName","\u6765\u6e90\u4e3b\u9898\u5206\u7c7b \uff1a"));v=$("<font style='font-weight: normal;'>");v.text(q.getGroupName());v.appendTo(t);t.appendTo(m);q=$("<div style='font-weight: 700;'>");q.text(l.get("sourceSubjectDM","\u6765\u6e90\u4e3b\u9898\u5efa\u6a21 \uff1a"));
t=$("<font style='font-weight: normal;'>");t.data("model",n);t.on("click",function(u){var A=$(u.currentTarget).data("model");u=A.getDataSourceInfoVO().getName();A=A.getRefDataSourceTag();var w=com.kingdee.bos.qing.SkinUtil.getUrlParamValue(),B=D.QHFEnvImpl.getExhibitionQHFDmEntranceRemoteUrl();w&&(B=F.appendParamToUrl(B,"skin",w));B=F.appendParamToUrl(B,"tag",A);com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(l.get("qhfDmTitle","\u6570\u636e\u51c6\u5907-")+u,B,B)});t.text(l.get("viewDataModel",
"\u67e5\u770b\u5efa\u6a21\u6a21\u578b"));t.addClass("sa-ctrl-workbutton_enabled");t.appendTo(q);q.appendTo(m)}else q.getSourceType()==z.TYPE_EMBEDDED?(n=$("<div style='font-weight: 700;'>"),n.text(l.get("sourceEmbeddedName","\u6765\u6e90\u5355\u636e\u540d\u79f0 \uff1a")),t=$("<font style='font-weight: normal;'>"),t.text(q.getName()),t.appendTo(n),n.appendTo(m),n=$("<div style='font-weight: 700;'>"),n.text(l.get("sourceEmbeddedId","\u6765\u6e90\u5355\u636eID\uff1a")),t=$("<font style='font-weight: normal;'>"),
t.text(q.getBizTag()),t.appendTo(n),n.appendTo(m),n=$("<div style='font-weight: 700;'>"),n.text(l.get("sourceEmbeddedContent","\u6765\u6e90\u5355\u636e\u8fc7\u6ee4\u6761\u4ef6 \uff1a")),t=$("<font style='font-weight: normal;'>"),t.text(q.getFilterContent()),t.appendTo(n),n.appendTo(m),n=$("<div style='font-weight: 700;'>"),n.text(l.get("sourceEmbeddedInfo","\u6765\u6e90\u5355\u636e\u5176\u4ed6\u4fe1\u606f\uff1a")),t=$("<font style='font-weight: normal;'>"),t.text(q.getOtherInfoStr()),t.appendTo(n),
n.appendTo(m)):(q=$("<div style='font-weight: 700;'>"),q.text(l.get("sourceInfo","\u6765\u6e90\u4fe1\u606f\uff1a")),n=$("<font style='font-weight: normal;'>"),n.text(l.get("sourceInfo","\u672a\u77e5")),n.appendTo(q),q.appendTo(m));else q=$("<div style='font-weight: 700;'>"),q.text(l.get("sourceInfo","\u6765\u6e90\u4fe1\u606f\uff1a")),n=$("<font style='font-weight: normal;'>"),n.text(l.get("sourceInfo","\u672a\u77e5")),n.appendTo(q),q.appendTo(m);r.appendTo(b)}b.appendTo(c)}}function ea(f){G.AbstractTabPane.call(this);
var e,g,c;this.getTitle=function(){return l.get("fileInfo","\u6587\u4ef6\u4fe1\u606f")};this.getJqUi=function(){if(!e){var a=$("<div>"),d=$("<div>");y.layoutCtrlWithLRTB(d,16,16,null,16,null,null);g=$("<div>");g.text(l.get("loading","\u52a0\u8f7d\u4e2d"));g.appendTo(d);c=$("<div>");c.css("color","#828282");y.layoutCtrlWithLRTB(c,0,0,null,0,0,null);c.appendTo(d);d.appendTo(a);k();e=a;e.css("overflow","auto")}return e};var k=function(){(new E(f,function(a){g.hide();c.show();var d=new ja;d.fromJsonObject(a);
if(d.hasContent()){var b=d.getQsFileNames();if(b&&0<b.length){a=$("<div style='font-weight: 700;'>");a.text(l.get("qsFile","qs\u6570\u636e\u6587\u4ef6\uff1a"));for(var p=0;p<b.length;p++){var h=$("<div style='font-weight: normal; padding-left: 20px;'>");h.text(b[p]);h.appendTo(a)}a.appendTo(c)}if((b=d.getDsFileNames())&&0<b.length){a=$("<div style='font-weight: 700; padding-top: 10px;'>");a.text(l.get("dsFile","\u4e3b\u9898\u5efa\u6a21\u6570\u636e\u6587\u4ef6\uff1a"));for(p=0;p<b.length;p++)h=$("<div style='font-weight: normal; padding-left: 20px;'>"),
h.text(b[p]),h.appendTo(a);a.appendTo(c)}if((b=d.getQingMapFileVOs())&&0<b.length){a=$("<div style='font-weight: 700; padding-top: 10px;'>");a.text(l.get("mapFile","\u5730\u56fe\u5e93\u8d44\u6e90\u6587\u4ef6\uff1a"));for(p=0;p<b.length;p++){var n=$("<div style='font-weight: 700; padding-left: 20px;'>");n.text(l.get("map","\u5730\u56fe")+(p+1));h=$("<div style='font-weight: normal; padding-left: 20px;'>");h.text(b[p].modelFileName);h.appendTo(n);h=$("<div style='font-weight: normal; padding-left: 20px;'>");
h.text(b[p].svgFileName);h.appendTo(n);h=$("<div style='font-weight: normal; padding-left: 20px;'>");h.text(b[p].configFileName);h.appendTo(n);h=$("<div style='font-weight: normal; padding-left: 20px;'>");h.text(b[p].thumbnailFileName);h.appendTo(n);h=$("<div style='font-weight: normal; padding-left: 20px;'>");h.text(b[p].backgroundImageFileName);h.appendTo(n);n.appendTo(a)}a.appendTo(c)}if((b=d.getPictureFileNames())&&0<b.length){a=$("<div style='font-weight: 700; padding-top: 10px;'>");a.text(l.get("pictureFile",
"\u56fe\u7247\u8d44\u6e90\u6587\u4ef6\uff1a"));for(p=0;p<b.length;p++)h=$("<div style='font-weight: normal; padding-left: 20px;'>"),h.text(b[p]),h.appendTo(a);a.appendTo(c)}if((b=d.getCardThumbnailFileNames())&&0<b.length){a=$("<div style='font-weight: 700; padding-top: 10px;'>");a.text(l.get("cardThumbnailFile","\u5361\u7247\u7f29\u7565\u56fe\u6570\u636e\u6587\u4ef6\uff1a"));for(p=0;p<b.length;p++)h=$("<div style='font-weight: normal; padding-left: 20px;'>"),h.text(b[p]),h.appendTo(a);a.appendTo(c)}if((d=
d.getLappThumbnailFileNames())&&0<d.length){a=$("<div style='font-weight: 700; padding-top: 10px;'>");a.text(l.get("lappThumbnailFile","\u79fb\u52a8\u8f7b\u5e94\u7528\u7f29\u7565\u56fe\u6570\u636e\u6587\u4ef6\uff1a"));for(p=0;p<d.length;p++)h=$("<div style='font-weight: normal; padding-left: 20px;'>"),h.text(d[p]),h.appendTo(a);a.appendTo(c)}}else d=$("<div>"),d.text(l.get("notData","\u65e0\u6570\u636e")),d.appendTo(c)},function(a,d){g.hide();return!1})).loadFileInfo()}}function fa(f){G.AbstractTabPane.call(this);
var e,g,c;this.getTitle=function(){return l.get("traceSpan","\u6027\u80fd\u8017\u65f6")};this.getJqUi=function(){if(!e){var a=$("<div>");a.css("height","100%");g=$("<div>");g.text(l.get("loading","\u52a0\u8f7d\u4e2d"));g.appendTo(a);c=$("<div>");c.css("color","#828282");y.layoutCtrlWithLRTB(c,0,0,null,0,0,null);c.appendTo(a);k();e=a}return e};var k=function(){(new E(f,function(a){g.hide();c.show();var d=[];if(a)for(var b=0;b<a.length;b++){var p=new I;p.fromJsonObject(a[b]);d.push(p)}(new ka(d)).getJqUi().appendTo(c)},
function(a,d){g.hide();return!1})).loadTraceSpanInfo()}}function ka(f){function e(r){KTDefaultCellRender.call(this,r);var m=this,q=this.paintCellUI;this.paintCellUI=function(t,v){var u=m.getCurrentRowIdx(),A=m.getCurrentColIdx(),w=m.getCurrentRow();if(u<M.getHeadRowCount())q(t,v);else{u=w.getUserObject();v=u.getNodeType()==I.NODETYPE_PRIVATE;t=$(t);w=$("<div>");w.addClass("qhf-trace-table-cell-content");var B=$("<div>");if(0==A){var K=u.getLevel();A=u.getDescription();var X=u.getSeriesNum();X&&(A=
"\u7b2c"+X+"\u6b21-"+A);w.attr("title",A);0<K&&!v&&u.getNodeType()!=I.NODETYPE_LAST?(w.css("margin-left",20*u.getLevel()+15),u=$("<div>"),Q.background(u,"icon-right-low-arrow"),u.addClass("qhf-trace-icon-right-low-arrow"),w.append(u)):v||u.getNodeType()==I.NODETYPE_LAST?(w.css("margin-left",20*u.getLevel()+15),u=$("<div>"),Q.background(u,"icon-timer"),u.addClass("qhf-trace-icon-timer"),w.append(u)):w.css("margin-left",20*u.getLevel());t.addClass("qhf-trace-table-cell-callTree");w.addClass("qhf-trace-table-cell-content-callTree");
B.addClass("qhf-trace-table-cell-callTree-content-text");K=A}else 1==A?(K=u.getCost(),B.addClass("qhf-trace-table-cell-content-text")):2==A&&(K=u.getCostPercent(),B.addClass("qhf-trace-table-cell-content-text"));B.text(K);w.append(B);v&&w.css("color","black");y.layoutCtrlWithLRTB(w,0,0,null,0,0,null);t.append(w)}}}var g=this,c,k,a,d;this.getJqUi=function(){if(!c){c=$("<div>");var r=h();c.append(r.getJqUi())}return c};var b=function(){var r=$("<div>");k=new KTable;k.setDraggableAdjusting(!0,-1,0,new la);
k.setCellRender(new e(k));k.setSyncUIWhenModelChanged(!1);var m=k.getSelectionModel();m.setMode(KTSelectionModel.MODE_SINGLE);m.setPolicy(KTSelectionModel.POLICY_ROW);m.addChangeListener(n);k.addColumn().setWidth(298);k.addColumn().setWidth(100);k.addColumn().setWidth(100);m=M.createHeadRow(k);m.setHeight(23);m.getCell(0).setValue(l.get("callTree","\u8c03\u7528\u6811"));m.getCell(1).setValue(l.get("totalCost","\u603b\u8017\u65f6\uff08ms\uff09"));m.getCell(2).setValue(l.get("percent","\u8017\u65f6\u5360\u6bd4\uff08%\uff09"));
m=k;for(var q=0;q<f.length;q++){var t=f[q],v=m.addRow();v.setHeight(23);v.setUserObject(t);t=t.getLevel();t=new KTCellTreeModel(t);t.setExpanded(!1);0<t.getLevel()&&v.setHide(!0);v.getCell(0).setTreeModel(t)}k.updateUI();m=$(k.getUI());q=$("<div>");q.append(m);r.append(q);return r},p=function(){a=$("<div>");a.css("border-left","1px solid #ccc");a.css("overflow","auto");var r=$("<div>");r.addClass("qhf-trace-right-panel-head");r.text(l.get("attributeValue","\u5c5e\u6027\u503c"));a.append(r);return a},
h=function(){var r=new L;r.setHorizontalSplit(!0);r.setEnabled(!0);r.setFirstSize(500,0,-1);r.setSecondSize(260,0,-1);r.setResizeMode(L.RESIZE_MODE_FIRST_FIXED);r.setFirstChild(L.createChildWrapper(b(),function(){g.funRefreshTable()}));r.setSecondChild(L.createChildWrapper(p(),function(){g.funRefreshTable()}));return r};this.funRefreshTable=function(){k&&M.refresh(k)};var n=function(r,m){if(KTSelectionModel.CHANGE_ADD==r&&0<m.length&&(r=k.getRow(m[0].getRowIdx()).getUserObject())){r=r.getAttributeMap();
d&&d.detach();d=$("<div>");d.addClass("qhf-trace-right-panel-attribute-content");if(r)for(var q in r)m=$("<pre>"),m.text(q+"\uff1a"+r[q]),d.append(m);a.append(d)}}}function la(){this.getTailBlankForDragging=function(){return 1};this.isRowDraggable=function(f,e){return!1};this.isColumnDraggable=function(f,e){return!0};this.getMinRowHeightLimited=function(f,e){return 0};this.getMinColumnWidthLimited=function(f,e){return 0};this.rowDraggedAction=function(f,e,g){var c=f.isSyncUIWhenModelChanged();f.setSyncUIWhenModelChanged(!0);
e=f.getRow(e);e.setHeight(e.getHeight()+g);f.setSyncUIWhenModelChanged(c)};this.setMinColumnWidth=function(f){};this.columnDraggedAction=function(f,e,g){var c=f.isSyncUIWhenModelChanged();f.setSyncUIWhenModelChanged(!0);var k=f.getColumn(e);k.setWidth(k.getWidth()+g);e<f.getColumnsCount()-1&&(e=f.getColumn(e+1),e.setWidth(e.getWidth()-g));f.setSyncUIWhenModelChanged(c)}}function z(){var f;this.getSourceType=function(){return f};this.setSourceType=function(e){f=e};this.protectedMethod={fromJsonObject:function(e){e&&
(f=e.sourceType)}}}function I(){var f,e,g,c,k,a,d;this.getCost=function(){return f};this.setCost=function(b){f=b};this.getDescription=function(){return e};this.setDescription=function(b){e=b};this.getSeriesNum=function(){return g};this.setSeriesNum=function(b){g=b};this.getAttributeMap=function(){return c};this.setAttributeMap=function(b){c=b};this.getLevel=function(){return k};this.setLevel=function(b){k=b};this.getNodeType=function(){return a};this.setNodeType=function(b){a=b};this.getCostPercent=
function(){return d};this.setCostPercent=function(b){d=b};this.fromJsonObject=function(b){b&&(f=b.cost,e=b.description,g=b.seriesNum,c=b.attributeMap,k=b.level,a=b.nodeType,d=b.costPercent)}}function W(){z.call(this);var f=this.protectedMethod,e,g,c;this.getName=function(){return e};this.setName=function(k){e=k};this.getDescription=function(){return g};this.setDescription=function(k){g=k};this.getGroupName=function(){return c};this.setGroupName=function(k){c=k};this.fromJsonObject=function(k){k&&
(f.fromJsonObject(k),e=k.name,k.description&&(g=k.description),c=k.groupName)}}function V(){z.call(this);var f=this.protectedMethod,e;this.getName=function(){return e?e.name:""};this.getBizTag=function(){return e?e.bizTag:""};this.getFilterContent=function(){return e?e.filterContent:""};this.getOtherInfoStr=function(){if(e){var g=JSON.parse(JSON.stringify(e));delete g.name;delete g.bizTag;delete g.filterContent;return JSON.stringify(g)}return""};this.getEmbeddedDataInfo=function(){return e};this.setEmbeddedDataInfo=
function(g){e=g};this.fromJsonObject=function(g){g&&(f.fromJsonObject(g),e=g.embeddedDataInfo)}}function ia(){z.call(this);var f=this.protectedMethod,e,g,c,k=[];this.getName=function(){return e};this.setName=function(a){e=a};this.getDescription=function(){return g};this.setDescription=function(a){g=a};this.getGroupName=function(){return c};this.setGroupName=function(a){c=a};this.getDsbRefDataSourceInfoVOs=function(){return k};this.setDsbRefDataSourceInfoVOs=function(a){k=a};this.fromJsonObject=function(a){if(a&&
(f.fromJsonObject(a),e=a.name,g=a.description,c=a.groupName,a=a.dsbRefDataSourceInfoVOs))for(var d=0;d<a.length;d++){var b=new ma;b.fromJsonObject(a[d]);k.push(b)}}}function ma(){var f,e,g;this.getWidgetDisplayNames=function(){return f};this.setWidgetDisplayNames=function(c){f=c};this.getDataSourceInfoVO=function(){return e};this.setDataSourceInfoVO=function(c){e=c};this.getRefDataSourceTag=function(){return g};this.setRefDataSourceTag=function(c){g=c};this.fromJsonObject=function(c){c&&(f=c.widgetDisplayNames,
g=c.refDataSourceTag,c=c.dataSourceInfoVO)&&(c.sourceType==z.TYPE_EMBEDDED?(e=new V,e.fromJsonObject(c)):c.sourceType==z.TYPE_SUBJECT&&(e=new W,e.fromJsonObject(c)))}}function C(){function f(){var c,k,a,d,b,p,h,n,r;this.getName=function(){return c};this.setName=function(m){c=m};this.getPath=function(){return k};this.setPath=function(m){k=m};this.getPathName=function(){return a};this.setPathName=function(m){a=m};this.getPublishTargetType=function(){return d};this.setPublishTargetType=function(m){d=
m};this.getPublishSourceType=function(){return b};this.setPublishSourceType=function(m){b=m};this.getCreatorId=function(){return p};this.setCreatorId=function(m){p=m};this.getCreatorName=function(){return h};this.setCreatorName=function(m){h=m};this.isCarryData=function(){return n};this.setCarryData=function(m){n=m};this.isPreset=function(){return r};this.setPreset=function(m){r=m};this.fromJsonObject=function(m){m&&(c=m.name,k=m.path,a=m.pathName,d=m.publishTargetType,b=m.publishSourceType,p=m.creatorId,
h=m.creatorName,n=m.isCarryData,r=m.isPreset)}}var e,g;this.getEntranceType=function(){return e};this.setEntranceType=function(c){e=c};this.getPublishInfoVO=function(){return g};this.setPublishInfoVO=function(c){g=c};this.fromJsonObject=function(c){c&&(c.entranceType&&(e=c.entranceType),c.publishInfoVO&&(g=new f,g.fromJsonObject(c.publishInfoVO)))};C.ENTRANCE_TYPE_SUBJECT="subject";C.ENTRANCE_TYPE_EMBEDDED="embedded";C.ENTRANCE_TYPE_PUBLISH="publish";C.ENTRANCE_TYPE_DSB="dsb";C.getEntranceTypeName=
function(c){if(c==C.ENTRANCE_TYPE_SUBJECT)return l.get("subject","\u4e1a\u52a1\u4e3b\u9898");if(c==C.ENTRANCE_TYPE_EMBEDDED)return l.get("embedded","\u5d4c\u5165\u5f0f");if(c==C.ENTRANCE_TYPE_PUBLISH)return l.get("publish","\u53d1\u5e03");if(c==C.ENTRANCE_TYPE_DSB)return l.get("dsb","\u4eea\u8868\u677f")}}function ja(){var f,e,g,c,k,a;this.getQsFileNames=function(){return f};this.setQsFileNames=function(d){f=d};this.getDsFileNames=function(){return e};this.setDsFileNames=function(d){e=d};this.getQingMapFileVOs=
function(){return g};this.setQingMapFileVOs=function(d){g=d};this.getPictureFileNames=function(){return c};this.setPictureFileNames=function(d){c=d};this.getCardThumbnailFileNames=function(){return k};this.setCardThumbnailFileNames=function(d){k=d};this.getLappThumbnailFileNames=function(){return a};this.setLappThumbnailFileNames=function(d){a=d};this.hasContent=function(){return f&&0<f.length||e&&0<e.length||g&&0<g.length||c&&0<c.length||k&&0<k.length||a&&0<a.length?!0:!1};this.fromJsonObject=function(d){d&&
(f=d.qsFileNames,e=d.dsFileNames,g=d.qingMapFileVOs,c=d.pictureFileNames,k=d.cardThumbnailFileNames,a=d.lappThumbnailFileNames)}}function ha(){var f,e;this.getQhfVersion=function(){return f};this.setQhfVersion=function(g){f=g};this.getEnvironment=function(){return e};this.setEnvironment=function(g){e=g};this.fromJsonObject=function(g){g&&(g.qhfVersion&&(f=g.qhfVersion),e=new na,g.environment&&e.fromJsonObject(g.environment))}}function na(){function f(){var n,r;this.getId=function(){return n};this.setId=
function(m){n=m};this.getName=function(){return r};this.setName=function(m){r=m};this.fromJsonObject=function(m){n=m.id;r=m.name}}function e(){var n,r,m;this.getSerialNo=function(){return n};this.setSerialNo=function(q){n=q};this.getName=function(){return r};this.setName=function(q){r=q};this.getVersion=function(){return m};this.setVersion=function(q){m=q};this.fromJsonObject=function(q){n=q.serialNo;r=q.name;m=q.version}}function g(){var n,r,m;this.getBrowser=function(){return n};this.setBrowser=
function(q){n=q};this.getBrowserVersion=function(){return r};this.setBrowserVersion=function(q){r=q};this.getClientOS=function(){return m};this.setClientOS=function(q){m=q};this.fromJsonObject=function(q){n=q.browser;r=q.browserVersion;m=q.clientOS}}function c(){var n,r;this.getServerOS=function(){return n};this.setServerOS=function(m){n=m};this.getServerOSVersion=function(){return r};this.setServerOSVersion=function(m){r=m};this.fromJsonObject=function(m){n=m.serverOS;r=m.serverOSVersion}}function k(){var n;
this.getSystemVars=function(){return n};this.setSystemVars=function(r){n=r};this.fromJsonObject=function(r){n=r.systemVars}}var a,d,b,p,h;this.getAccount=function(){return a};this.getProduct=function(){return d};this.getClient=function(){return b};this.getServer=function(){return p};this.getUserContext=function(){return h};this.fromJsonObject=function(n){n&&(a=new f,n.account&&a.fromJsonObject(n.account),d=new e,n.product&&d.fromJsonObject(n.product),b=new g,n.client&&b.fromJsonObject(n.client),p=
new c,n.server&&p.fromJsonObject(n.server),h=new k,n.userContext&&h.fromJsonObject(n.userContext))}}function P(){this.getPublishTargetTypeName=function(f){if(0==f)return l.get("appMenu","\u5e94\u7528\u83dc\u5355");if(1==f)return l.get("qingCenter","\u6570\u636e\u5de5\u4f5c\u53f0");if(2==f)return l.get("mobile","\u5e94\u7528\u8f7b\u5e94\u7528");if(4==f)return l.get("guiMenu","\u5ba2\u6237\u7aef\u83dc\u5355");if(5==f)return l.get("cardRepository","\u5361\u7247\u5e93");if(6==f)return l.get("email","\u90ae\u4ef6\u63a8\u9001")}}
"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.qhf&&(com.kingdee.bos.qing.qhf={});var D=com.kingdee.bos.qing.qhf;D.QHFExporter=x;D.QHFFacade=E;D.QHFInfoIcon=function(){var f;this.getJqUi=function(){f||(f=e());return f};var e=function(){com.kingdee.bos.qing.framework.common.WebPageInitializer.init();
var g=$("<div>");com.kingdee.bos.qing.scene.common.square.exhibition.Icons.background(g,"icon_qhfInfo");y.layoutCtrlWithLRTB(g,null,12,16,15,null,16);g.css("z-index","1");g.on("click",function(c){(new J).showDialog()});return g}};P=new P;var U,l,Y,N,Z,G,T,L,R,S,F,y,aa,ba,M,Q;(function(){var f=com.kingdee.bos.qing;U=f.RemoteImpl;f=com.kingdee.bos.qing.framework.common;l=f.MultilanguageManager.createPackageAccessor(D);Y=f.FileUploader;R=f.AbstractFacade;S=f.RemoteFramework;f=com.kingdee.bos.qing.ui.component;
N=f.MessageDialog;Z=f.MessageCurtain;G=f.TabContainer;T=f.AbstractModalDialog;L=f.SplitPane;f=com.kingdee.bos.qing.common;F=f.Util;y=f.DomUtil;f=com.kingdee.bos.qing.common.ui;aa=f.EngineeringMenu;ba=f.LocalFileSelector;M=f.TableUtil;f=com.kingdee.bos.qing.qhf;Q=f.MyIcons})();(function(){var f,e,g=function(a){var d=a.getFile();if(d){a=a.getFileName();var b=a.lastIndexOf(".");".qhf"!=a.substring(b,a.length).toLowerCase()?k().showPrompt(l.get("fileTypeIncorrect","\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e\u3002")):
c(d)}},c=function(a){var d,b=new Y;b.setRequestPreparer(function(h){h.append("filename",a)});b.setProgressHandler(function(h){d||(d=$("<div>"),d.addClass("sa-common-loading-modallayer"),h=$("<div>"),h.addClass("sa-common-loading-icon"),h.css("background-image",com.kingdee.bos.qing.framework.common.Resource.getIconUrl("common","loading.gif")),h.appendTo(d),h=$("<div>"),h.text(l.get("uploading","\u6b63\u5728\u4e0a\u4f20")),h.addClass("sa-common-loading-text"),h.appendTo(d),d.appendTo($(document.body)))});
b.setFinishedHandler(function(h,n,r){h&&(3099003==n?k().showError(r):k().showError(l.get("failToUploadImg","\u4e0a\u4f20\u5168\u4fe1\u606f\u6a21\u677f\u6587\u4ef6\u5931\u8d25\u3002")));d&&d.remove();d=null});b.setSuccessHandler(function(h){h=D.QHFEnvImpl.getImportQHFRemoteUrl(h.data);com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(a.name,h)});var p=com.kingdee.bos.qing.framework.common.RemoteFrameworkRegister.getUploadUrl();b.uploadTo(p)},k=function(){f||(f=new Z,f.getJqUi().appendTo($(document.body)));
return f};aa.addMenuItem(l.get("qhfViewer","\u5168\u4fe1\u606f\u6a21\u677f\u67e5\u770b\u5668"),function(){e||(e=new ba,e.appendInvislbelUiTo($(document.body)));e.selectFile(g,[".qhf"])})})();var O=new function(){var f,e,g;this.register=function(k,a,d){f=k;e=a;g=d;$(document).on("keydown",c)};this.getTag=function(){return f};this.getParam=function(){return e()};var c=function(k){k=k?k:window.event?window.event:"";!(k&&k.altKey&&k.shiftKey&&69==k.keyCode)||g&&g()||(new x).show()}};D.QHFSceneExporterRegister=
O;x.SCENE_TYPE_EMBEDDED_LONGER_SQUARE="embeddedLongerSquare";x.SCENE_TYPE_SUBJECT_LONGER="subjectLonger";x.SCENE_TYPE_SUBJECT_SQUARE="subjectSquare";x.SCENE_TYPE_PUBLISH_SUBJECT_LONGER="publishSubjectLonger";x.SCENE_TYPE_PUBLISH_SUBJECT_SQUARE="publishSubjectSquare";x.SCENE_TYPE_PUBLISH_EMBEDDED_LONGER="publishEmbeddedLonger";x.SCENE_TYPE_PUBLISH_EMBEDDED_SQUARE="publishEmbeddedSquare";x.SCENE_TYPE_DSB_DESIGNER="dsbDesigner";x.SCENE_TYPE_PUBLISH_DSB="publishDsb";z.TYPE_SUBJECT="subject";z.TYPE_EMBEDDED=
"embedded";z.TYPE_DSB="dsb";I.NODETYPE_PRIVATE="PRIVATE";I.NODETYPE_LAST="LAST"})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.qhf&&(com.kingdee.bos.qing.qhf={});var E=com.kingdee.bos.qing.qhf;var x=com.kingdee.bos.qing.common.Util;E.QHFEnvImpl=new function(){this.getQHFRemoteUrl=function(){return J()+"/qing/qhf.do"};this.getImportQHFRemoteUrl=function(H){return J()+
"/qing/importQHFEntrance.do?fileName="+H};this.getExhibitionQHFDmEntranceRemoteUrl=function(){return J()+"/qing/exhibitionQHFDmEntrance.do"};var J=function(){var H=x.decodeParamFromUrl(location.search,"path");return H?H:"/ierp"}}})();
//qingVersionTag: 20250324