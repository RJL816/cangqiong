var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(f){var q=0;return function(){return q<f.length?{done:!1,value:f[q++]}:{done:!0}}};$jscomp.arrayIterator=function(f){return{next:$jscomp.arrayIteratorImpl(f)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,q,u){if(f==Array.prototype||f==Object.prototype)return f;f[q]=u.value;return f};$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var q=0;q<f.length;++q){var u=f[q];if(u&&u.Math==Math)return u}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,q){var u=$jscomp.propertyToPolyfillSymbol[q];if(null==u)return f[q];u=f[u];return void 0!==u?u:f[q]};
$jscomp.polyfill=function(f,q,u,B){q&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,q,u,B):$jscomp.polyfillUnisolated(f,q,u,B))};$jscomp.polyfillUnisolated=function(f,q,u,B){u=$jscomp.global;f=f.split(".");for(B=0;B<f.length-1;B++){var C=f[B];if(!(C in u))return;u=u[C]}f=f[f.length-1];B=u[f];q=q(B);q!=B&&null!=q&&$jscomp.defineProperty(u,f,{configurable:!0,writable:!0,value:q})};
$jscomp.polyfillIsolated=function(f,q,u,B){var C=f.split(".");f=1===C.length;B=C[0];B=!f&&B in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var N=0;N<C.length-1;N++){var W=C[N];if(!(W in B))return;B=B[W]}C=C[C.length-1];u=$jscomp.IS_SYMBOL_NATIVE&&"es6"===u?B[C]:null;q=q(u);null!=q&&(f?$jscomp.defineProperty($jscomp.polyfills,C,{configurable:!0,writable:!0,value:q}):q!==u&&(void 0===$jscomp.propertyToPolyfillSymbol[C]&&(u=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[C]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(C):$jscomp.POLYFILL_PREFIX+u+"$"+C),$jscomp.defineProperty(B,$jscomp.propertyToPolyfillSymbol[C],{configurable:!0,writable:!0,value:q})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(f){if(f)return f;var q=function(N,W){this.$jscomp$symbol$id_=N;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:W})};q.prototype.toString=function(){return this.$jscomp$symbol$id_};var u="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",B=0,C=function(N){if(this instanceof C)throw new TypeError("Symbol is not a constructor");return new q(u+(N||"")+"_"+B++,N)};return C},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(f){if(f)return f;f=Symbol("Symbol.iterator");for(var q="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),u=0;u<q.length;u++){var B=$jscomp.global[q[u]];"function"===typeof B&&"function"!=typeof B.prototype[f]&&$jscomp.defineProperty(B.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return f},"es6",
"es3");$jscomp.iteratorPrototype=function(f){f={next:f};f[Symbol.iterator]=function(){return this};return f};$jscomp.iteratorFromArray=function(f,q){f instanceof String&&(f+="");var u=0,B=!1,C={next:function(){if(!B&&u<f.length){var N=u++;return{value:q(N,f[N]),done:!1}}B=!0;return{done:!0,value:void 0}}};C[Symbol.iterator]=function(){return C};return C};$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(q){return q})}},"es6","es3");
$jscomp.findInternal=function(f,q,u){f instanceof String&&(f=String(f));for(var B=f.length,C=0;C<B;C++){var N=f[C];if(q.call(u,N,C,f))return{i:C,v:N}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(q,u){return $jscomp.findInternal(this,q,u).v}},"es6","es3");
(function(){function f(e,k,r,y){aa.call(this,e,k,r,y);var c=this.protectedMethod;this.saveModelerModel=function(b,g,h,l){b={modelId:b,modelName:g,modelDesc:h,modelerModel:JSON.stringify(l)};c.remote("saveModelerModel",b)};this.loadModelerInfo=function(b){c.remote("loadModelerInfo",{modelId:b})};this.lockModel=function(b){c.remote("lockModel",{modelId:b})};this.unLockModel=function(b){c.remote("unLockModel",{modelId:b})};this.getModelerModelVersion=function(b){c.remote("getModelerModelVersion",{modelId:b})};
this.lockAndReloadModelerInfo=function(b){c.remote("lockAndReloadModelerInfo",{modelId:b})};this.loadDeployModelerForUserOperation=function(b){b={modelIds:JSON.stringify(b)};c.remote("loadDeployModelerForUserOperation",b)}}function q(e,k,r,y){aa.call(this,e,k,r,y);var c=this.protectedMethod;this.deploySingleModelForDesigner=function(b,g,h){c.remote("deploySingleModelForDesigner",{modelId:g,modelSetId:b,desc:h})};this.getLatestDeploy=function(b){c.remote("loadCurrentDeployModeler",{modelId:b})};this.needDeployRefModel=
function(b){c.remote("needDeployRefModel",{modelId:b})};this.loadNeedDeployRefModel=function(b){c.remote("loadNeedDeployRefModel",{modelId:b})};this.deployModelForModelSetSource=function(b,g,h,l){b={modelId:g,modelSetId:b,desc:h,needDeployModelIds:JSON.stringify(l)};c.remote("deployModelForModelSetSource",b)}}function u(e,k,r,y){aa.call(this,e,k,r,y);var c=this.protectedMethod;this.designerLoadSources=function(){var b={modelSetId:com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,
"modelSetId")};c.remote("designerLoadSources",b)};this.loadNoAuthRefSourceIds=function(b){b={sourceIds:JSON.stringify(b)};c.remote("loadNoAuthRefSourceIds",b)};this.loadMetricsUseSource=function(b){b={sourceIds:JSON.stringify(b)};c.remote("loadMetricsUseSource",b)}}function B(){ka.call(this);var e=this.protectedMethod,k=this,r,y,c;(function(){e.setTitle(d.get("deploy","\u90e8\u7f72"));k.setSize(400,300);e.setContentPaneCreator(function(){if(!r){r=$("<div>");r.css("display","flex");var b=new la;b.setRequired(!0);
b.setText(d.get("description","\u63cf\u8ff0"));b=b.getJqUi();b.css({position:"relative",top:"9px",width:"auto",height:"20px","margin-right":"10px"});y=new ma;var g=y.getJqUi();g.css({position:"relative",top:"14px",width:"300px",height:"150px"});g.find(".sa-ctrl-textarea-real").css("font-family","MicrosoftYaHei");b.appendTo(r);g.appendTo(r)}return r});e.setClosingChecker2(function(b){b=$.trim(y.getText());var g;""!==b&&500<b.length?g=d.get("deployDescTooLong","\u90e8\u7f72\u63cf\u8ff0\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"):
""===b&&(g=d.get("enterDeployDesc","\u8bf7\u8f93\u5165\u90e8\u7f72\u63cf\u8ff0\u3002"));if(g)return e.getMessageCurtain().showPrompt(g),!1;c&&c(b);return!0});e.setClosingAction(function(b){})})();this.setDescConfirmCallback=function(b){c=b};this.textFieldFocus=function(){y&&y.requestFocus()}}function C(){var e,k,r,y;this.getJqUi=function(){if(!k){k=$("<div>");k.css("position","relative");k.css("top","40px");k.css("left","0px");k.css("height","23px");r=new na;r.setText(d.get("chooseApp","\u8bf7\u9009\u62e9\u4e00\u4e2a\u5e94\u7528"));
r.setReadonly("readonly");var b=r.getJqUi();b.on("click",c);var g=$("<div>");da.background(g,"f7");g.css("z-index","1");g.css("cursor","pointer");g.on("click",c);b.find(":input").css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",padding:"0px 16px 0px 4px","font-size":"12px"});P.layoutCtrlWithLRTB(g,null,10,16,0,null,16);P.layoutCtrlWithLRTB(b,40,8,null,null,null,23);var h=$("<span>");h.text(d.get("app","\u5e94\u7528"));h.css("color","#666");h.css("font-size","12px");P.layoutCtrlWithLRTB(h,
5,null,null,4.5,null,null);b.appendTo(k);g.appendTo(k);h.appendTo(k)}return k};this.getTextField=function(){return r};this.setFunSelectedChangeListener=function(b){y=b};this.getFunSelectedChangeListener=function(){return y};this.getSelectPair=function(){return e};var c=function(){var b=com.kingdee.bos.qing.integration.AppChooseForm;b.setCallBack(function(g){if(g&&g.content){var h=g.content;g=h.appNumber;var l={};l.text=h.appName;l.value=g;e=l;if(r){h=r;l=h.setText;var t=d.get("chooseApp","\u8bf7\u9009\u62e9\u4e00\u4e2a\u5e94\u7528");
e&&(t=e.text);l.call(h,t)}y(g)}});b.openAppChooseForm()}}function N(){var e,k,r,y;this.getJqUi=function(){if(!k){k=$("<div>");k.css("position","relative");k.css("top","0px");k.css("left","0px");k.css("height","23px");r=new na;r.setText(d.get("chooseApp","\u8bf7\u9009\u62e9\u4e00\u4e2a\u5e94\u7528"));r.setReadonly("readonly");var b=r.getJqUi();b.on("click",c);var g=$("<div>");da.background(g,"f7");g.css("z-index","1");g.css("cursor","pointer");g.on("click",c);b.find(":input").css({overflow:"hidden",
"white-space":"nowrap","text-overflow":"ellipsis",padding:"0px 16px 0px 4px","font-size":"12px"});P.layoutCtrlWithLRTB(g,null,10,16,0,null,16);P.layoutCtrlWithLRTB(b,40,8,null,null,null,23);var h=$("<span>");h.text(d.get("app","\u5e94\u7528"));h.css("color","#666");h.css("font-size","12px");P.layoutCtrlWithLRTB(h,5,null,null,4.5,null,null);b.appendTo(k);g.appendTo(k);h.appendTo(k)}return k};this.setFunSelectedChangeListener=function(b){y=b};var c=function(){var b=com.kingdee.bos.qing.integration.AppChooseForm;
b.setCallBack(function(g){if(g&&g.content){var h=g.content;g=h.appNumber;var l={};l.text=h.appName;l.value=g;e=l;if(r){h=r;l=h.setText;var t=d.get("chooseApp","\u8bf7\u9009\u62e9\u4e00\u4e2a\u5e94\u7528");e&&(t=e.text);l.call(h,t)}y(g)}});b.openAppChooseForm()}}function W(){ka.call(this);var e=this,k=this.protectedMethod,r,y,c,b;this.setRootNode=function(l){r=l};this.setDescConfirmCallback=function(l){y=l};this.asyncShowDeployDialog=function(){oa.setCallback(function(){g();e.textFieldFocus()});oa.loadJs("common/qing-table.js")};
this.textFieldFocus=function(){b&&b.requestFocus()};var g=function(){e.setSize(640,480);e.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);k.setTitle(d.get("deploy","\u90e8\u7f72"));k.setContentPaneCreator(h);k.setClosingAction(function(){});k.setClosingChecker2(function(l){l=$.trim(b.getText());var t;""!==l&&500<l.length?t=d.get("deployDescTooLong","\u90e8\u7f72\u63cf\u8ff0\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"):""===l&&(t=d.get("enterDeployDesc","\u8bf7\u8f93\u5165\u90e8\u7f72\u63cf\u8ff0\u3002"));
if(t)return k.getMessageCurtain().showPrompt(t),!1;l=c.getCheckedModelNodes();t=[];for(var n=0;n<l.length;n++){var x=l[n],F=x.getId();x instanceof ea&&t.push(F)}l=$.trim(b.getText());y&&y(l,t);return!0});e.showDialog()},h=function(){var l=$("<div>");c=new R(r);var t=c.getJqUi();l.append(t);t=$("<div>");t.addClass("deploy-dialog-batch-split-bottom");l.append(t);t=l.append;var n=new la;n.setRequired(!0);n.setText(d.get("desc","\u63cf\u8ff0"));n=n.getJqUi();b=new ma;var x=b.getJqUi();x.find(".sa-ctrl-textarea-real").css("font-family",
"MicrosoftYaHei");var F=$("<div>");F.addClass("deploy-dialog-desc-div");n.appendTo(F);x.appendTo(F);P.layoutCtrl(n,0,-8,45,20);P.layoutCtrl(x,35,-5,568,70);P.layoutCtrlCenterAlign(F,600);t.call(l,F);return l}}function R(e){function k(){KTDefaultCellRender.call(this,l);var A=this;this.paintCellUI=function(p,E){var v=A.getCurrentRow().getUserObject(),S=v.getName();p=$("<div>");p.addClass("deploy-dialog-tree-area-list-item");var I=new ta,fa=I.getJqUi(),U=$("<div>");fa.addClass("deploy-dialog-area-list-item-checkbox");
U.addClass("deploy-dialog-area-list-item-text");p.append(fa);p.append(U);I.setChecked(v.isChecked());I.setUserObject(v);I.addCheckedListener(Y);-1!=g.indexOf(v.getId())&&(I.setEnabled(!1),I.setChecked(!0));h[v.getId()]=I;0==v.getSubNodeLevel()?(U.text(S),"ND_0"==v.getId()?(v=d.get("notDeployedHelpIconTips","\u5728\u540c\u4e00\u4e2a\u6a21\u578b\u96c6\u4e0b\uff0c\u6a21\u578b\u8bbe\u8ba1\u65f6\u53ef\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u8bbe\u8ba1\u671f\u7684\u72b6\u6001\uff0c\u4f46\u5728\u6267\u884c\u671f(\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u6267\u884c\u65f6)\u53ea\u80fd\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u7684\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u3002\u56e0\u6b64\u9700\u8981\u5c06\u5f15\u7528\u7684\u201c\u672a\u90e8\u7f72\u201d\u72b6\u6001\u7684\u6a21\u578b\u4e00\u540c\u90e8\u7f72\u3002"),
U.append(z(v,160,70))):"DU_0"==v.getId()&&(v=d.get("deployedUpdateHelpIconTips","\u5728\u540c\u4e00\u4e2a\u6a21\u578b\u96c6\u4e0b\uff0c\u6a21\u578b\u8bbe\u8ba1\u65f6\u53ef\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u8bbe\u8ba1\u671f\u7684\u72b6\u6001\uff0c\u4f46\u5728\u6267\u884c\u671f (\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u6267\u884c\u65f6)\u53ea\u80fd\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u7684\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u3002\u5982\u679c\u9700\u8981\u6267\u884c\u671f\u4e0e\u8bbe\u8ba1\u671f\u7684\u72b6\u6001\u4fdd\u6301\u4e00\u81f4\uff0c\u8bf7\u5c06\u5f15\u7528\u7684\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201c\u72b6\u6001\u7684\u6a21\u578b\u518d\u6b21\u90e8\u7f72\u3002"),
U.append(z(v,185,88)))):(U.text(S),v instanceof ea&&(U.addClass("deploy-dialog-model-name-label"),U=p.append,v=v.getType(),S=$("<span>"),S.addClass("deploy-dialog-model-icon"),I="icon-tablemodel","metrics_model"==v&&(I="icon-metricmodel"),da.background(S,I),U.call(p,S)));E?(E=$(E),E.css("overflow","visible"),p.appendTo(E)):p.appendTo(jqDiv);P.layoutCtrlWithLRTB(p,0,0,null,0,0,null)};var z=function(p,E,v){var S=$("<div>"),I=$("<span>");I.text(p);I.appendTo(S);p=new pa;p.setIconType(pa.ICON_TYPE_QUESTION);
p.setTipsSize(400,v);p.setTipsHtml(S[0]);v=p.getJqUi();v.addClass("dm-notice-icon");P.layoutCtrl(v,E,3,16,16);return v}}var r,y=[],c=[],b=[],g=[],h,l,t;this.getJqUi=function(){if(!r){x();r=$("<div>");r.addClass("deploy-dialog-area");r.addClass("deploy-dialog-tree-selection-area");l=new KTable;var A=$(l.getUI());A.children().css("overflow-x","hidden");var z=new k;l.setCellRender(z);l.setSyncUIWhenModelChanged(!1);l.addTreeExpandListener(F);l.addColumn().setWidth(400);P.layoutCtrlWithLRTB(A,0,0,null,
23,0,null);t=A;r.append(t);h={};for(A=0;A<y.length;A++){var p=y[A];z=ua.createRow(l,!1);var E=z.getCell(0),v=p.getSubNodeLevel();v=new KTCellTreeModel(v);z.setHeight(23);z.setUserObject(p);p instanceof ha?(p=p.isExpanded(),v.setExpanded(p)):(p=p.getParentNode().isExpanded(),z.setHide(!p));E.setTreeModel(v)}l.updateUI();n()}return r};var n=function(){var A=function(v,S){var I=h[v.getId()];I&&(I.setChecked(!0),S||(I.setEnabled(!1),g.push(v.getId())));if(v instanceof ha&&(v=v.getChildren())&&0<v.length)for(I=
0;I<v.length;I++)A(v[I],S)},z=e.getChildren();if(z&&0<z.length)for(var p=0;p<z.length;p++){var E=!0;"ND_0"==z[p].getId()&&(E=!1);A(z[p],E)}};this.getCheckedModelNodes=function(){for(var A=[],z=0;z<b.length;z++){var p=b[z];(h[p.getId()].isChecked()||-1!=g.indexOf(p.getId()))&&A.push(p)}return A};var x=function(){var A=function(E){y.push(E);if(E instanceof ea)b.push(E);else if(c.push(E),(E=E.getChildren())&&0<E.length)for(var v=0;v<E.length;v++)A(E[v])},z=e.getChildren();if(z&&0<z.length)for(var p=
0;p<z.length;p++)A(z[p])},F=function(A,z){(A=l.getRow(z.getRowIdx()).getUserObject())&&A.setExpanded(z.isExpanded())},Y=function(A,z){var p=A.getUserObject();if(-1==g.indexOf(p.getId())&&z)for(p.check(A.isChecked(),ia),A=0;A<y.length;A++)z=y[A],-1==g.indexOf(z.getId())&&(p=h[z.getId()])&&p.setChecked(z.isChecked())},ia=function(A){for(var z=!0,p=A.getChildren(),E=0;E<p.length;E++){var v=p[E];z=z&&v.isChecked()}A.setChecked(z);(A=A.getParentNode())&&ia(A)}}function T(e,k,r){function y(){this.getHandler=
function(n,x){switch(n.getCode()){case M.FAILED_MODEL_LOCK_CHECK:var F=new b;break;case M.FAILED_MODEL_CHECK:F=new g;break;case M.FAILED_LOCK_CHECK:F=new h}F&&(F.setResponse(n),F.setDeployType(x));return F}}function c(){var n,x;this.setResponse=function(F){n=F};this.setDeployType=function(F){x=F};this.getDetail=function(){throw Error("override me");};this.getTitle=function(){throw Error("override me");};this.protectedMethod={getResponse:function(){return n},getDeployType:function(){return x}}}function b(){c.call(this);
this.getDetail=function(){var n=l();return n+=t()};this.getTitle=function(){return d.get("batchDeployModelLockCheckFailedTips","\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\u3001\u4ee5\u53ca\u8bbe\u7f6e\u4e0d\u5b8c\u6574\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}function g(){c.call(this);this.getDetail=function(){return t()};this.getTitle=function(){return d.get("deployModelCheckFailedTips","\u6a21\u578b\u8bbe\u7f6e\u4e0d\u5b8c\u6574\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}
function h(){c.call(this);this.getDetail=function(){var n="";if(r===T.ONE){var x="",F=e.getArrLockCheckPrompts()[0];x+=d.get("deployLockByOtherFailedTips","\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\u4e0d\u5141\u8bb8\u90e8\u7f72\uff0c\u2019#1\u2019\u6a21\u578b\u5df2\u88ab#2\u9501\u5b9a");x=x.replace("#1",F.getModelName()).replace("#2",F.getLockUserName());n+=x+"\uff1b\r\n"}else r===T.BATCH&&(n=l());return n};this.getTitle=function(){return d.get("batchDeployLockCheckFailedTips",
"\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}this.show=function(){if(e.isSuccess())k&&k();else{var n=(new y).getHandler(e,r),x=Q.createFeedbackDialog();x.setMsgImageType(Q.MSG_WARNING);x.setMessage(n.getTitle());x.setDetail(n.getDetail());x.setTitle(d.get("operatingTips","\u64cd\u4f5c\u63d0\u793a"));x.setOptionType(Q.OPTION_OK);x.setButtonText(Q.RETURN_OK,d.get("iSee","\u6211\u77e5\u9053\u4e86"));
x.showDialog()}};var l=function(){for(var n="",x=e.getArrLockCheckPrompts(),F=0;F<x.length;F++){var Y=x[F];n+=d.get("deployLockByOtherFailedTips","\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\u4e0d\u5141\u8bb8\u90e8\u7f72\uff0c\u2019#1\u2019\u6a21\u578b\u5df2\u88ab#2\u9501\u5b9a");n=n.replace("#1",Y.getModelName()).replace("#2",Y.getLockUserName());n+="\uff1b\r\n"}return n},t=function(){var n="",x=e.getArrModelCheckPrompts()[0];n+=d.get("configIncompleteReason","\u8bbe\u7f6e\u4e0d\u5b8c\u6574\u539f\u56e0");
return n=n+"\uff1a\r\n"+x.getPromptStr(!0,!0)}}function M(){var e=this,k,r,y=[],c=[],b=[];this.setSuccess=function(g){k=g};this.isSuccess=function(){return k};this.setCode=function(g){r=g};this.getCode=function(){return r};this.getArrModelCheckPrompts=function(){return y};this.getArrLockCheckPrompts=function(){return c};this.getArrSimplePrompts=function(){return b};this.fromJsonObject=function(g){e.setSuccess(g.success);e.setCode(g.code);if(g.prompts){var h=g.prompts[O.MODEL_CHECK],l=g.prompts[O.LOCK_CHECK];
if(h&&0<h.length)for(var t=0;t<h.length;t++){var n=new O;n.fromJsonObject(h[t]);y.push(n)}if(l&&0<l.length)for(t=0;t<l.length;t++)n=new O,n.fromJsonObject(l[t]),c.push(n)}if(g.simplePrompts&&(g=g.simplePrompts)&&0<g.length)for(t=0;t<g.length;t++)n=new O,n.fromJsonObject(g[t]),b.push(n)}}function O(){var e=this,k,r,y,c,b,g;this.setModelId=function(h){k=h};this.getModelId=function(){return k};this.setModelName=function(h){r=h};this.getModelName=function(){return r};this.setPromptCode=function(h){b=
h};this.getPromptCode=function(){return b};this.setPath=function(h){y=h};this.getPath=function(){return y};this.setLockUserName=function(h){c=h};this.getLockUserName=function(){return c};this.setArrPrompts=function(h){g=h};this.getArrPrompts=function(){return g};this.getPromptStr=function(h,l){var t="";if(g)for(var n=0;n<g.length;n++)l&&(t+=n+1),l&&(t+="\u3001"),t+=g[n],t+="\uff1b",h&&(t+="\r\n");return t};this.fromJsonObject=function(h){e.setModelId(h.modelId);e.setModelName(h.modelName);e.setPath(h.path);
e.setLockUserName(h.lockUserName);e.setPromptCode(h.PromptCode);e.setArrPrompts(h.invalidPrompt)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.scene&&(com.kingdee.bos.qing.modeler.scene={});var V=com.kingdee.bos.qing.modeler.scene;
V.AbstractDesignerScene=function(){var e=this,k,r,y,c,b,g,h,l=(new Date).getTime(),t,n,x,F,Y;this.protectedGetDesigner=function(){throw Error("override me");};this.protectedGetModelTypeName=function(){throw Error("override me");};this.protectedGetBehaviorEntranceType=function(){throw Error("override me");};this.show=function(a){var m=!0;c||ia();S(function(){m&&(b.appendTo(a),c.resize())},function(w,G){if(20003102==w)return w=d.get("modelNotFound","#1\uff0c\u6a21\u578b\u5df2\u88ab\u522a\u9664\u3002").replace("#1",
d.get("loadModelFailed","\u52a0\u8f7d\u5931\u8d25")),c.getMsgCurtain().showPrompt(w),!0;if(20001010==w)return m=!1,com.kingdee.bos.qing.framework.common.RemoteFramework.openErrorPage(w,com.kingdee.bos.qing.common.Base64Util.encode(encodeURIComponent(G))),!0})};var ia=function(){var a=com.kingdee.bos.qing.common.Util;r=a.decodeParamFromUrl(window.location.search,"modelSetId");k=a.decodeParamFromUrl(window.location.search,"modelId");y="true"==a.decodeParamFromUrl(window.location.search,"isPreset");
ba.setModelId(k);c=e.protectedGetDesigner();c.setEditable(!y);c.setMessageResize(Fa);z();ba.setRemoteImpl(v("/qing_modeler/modelSetSourceManageEntrance.do"));A();ba.setModelSetSourceFacade(u);c.setRemoteImpl(v("/qing_modeler/designer.do"));b=c.createJqUi();y?c.getMsgCurtain().showPrompt(d.get("presetModelCannotEdit","\u9884\u7f6e\u7684\u6a21\u578b\u4e0d\u5141\u8bb8\u4fdd\u5b58\u3001\u90e8\u7f72\u7b49\u64cd\u4f5c\uff0c\u5982\u6709\u9700\u8981\uff0c\u53ef\u590d\u5236\u6a21\u578b\u96c6\u540e\u518d\u8fdb\u884c\u64cd\u4f5c\u3002"),
-1):(t=c.insertToolbarBtn(Ga,"btn_save",d.get("save","\u4fdd\u5b58")),n=c.insertToolbarBtn(Ha,"btn_deploy",d.get("deploy","\u90e8\u7f72")),x=c.insertMenuButton(Ia,"btn_rollback",d.get("rollback","\u56de\u9000")),t.setEnabled(!1),n.setEnabled(!1),x.setEnabled(!1));F=c.appendToolbarBtn(fa,"btn_refresh",d.get("refresh","\u5237\u65b0"));c.appendToolbarBtn(Ja,"btn_close",d.get("closeTab","\u9000\u51fa"));c.setLockStateChangeListener(Ka);c.registerLockRequestSender(La);c.setDirtyListener(function(w){ca.setTabStatus(w)});
Y=new va;Y.createMessageUI({position:"absolute","float":"right",bottom:"0",right:"10px"},null,30);var m=com.kingdee.bos.qing.behavior.BehaviorManager;com.kingdee.bos.qing.modeler.designer.UserOperationReporter.hookCollector(function(w,G){m.interestInBehavior(w,G)});m.interestInBehaviorEntrance(e.protectedGetBehaviorEntranceType())},A=function(){var a=ba;a.registerDataCenterSelectorConstructor(C);a.registerMetricDataCenterSelector(N)},z=function(){var a=com.kingdee.bos.qing.common.Util,m=ba,w=a.decodeParamFromUrl(window.location.search,
"path"),G=a.decodeParamFromUrl(location.search,"modelSetId"),H=a.decodeParamFromUrl(location.search,"modelSetName");m.setDataSourceManageEntrance(function(){var D=qa.getUrlParamValue(),J=d.get("sourceManage","\u6570\u636e\u6e90\u7ba1\u7406")+"-"+H,L=w+"/qing_modeler/modelSetSourceManageEntrance.do";L=a.appendParamToUrl(L,"modelSetId",G);L=a.appendParamToUrl(L,"modelSetName",H);L=a.appendParamToUrl(L,"isPreset",y);D&&(L=a.appendParamToUrl(L,"skin",D));ra.openNewTab(J,L,L)})},p=function(){return v("/qing_modeler/modelSetMainPage.do")},
E=function(){return v("/qing_modeler/deployManage.do")},v=function(a){var m=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");a=(m?m:"/ierp")+a;m=new com.kingdee.bos.qing.modeler.designer.RemoteImpl;m.setRemoteUrl(a);return m},S=function(a,m){(new f(p(),function(w){I(w)},m,a)).loadModelerInfo(k)},I=function(a){var m=a.desc,w=a.name,G=a.modelIsValid;ja(a.deployed);var H=a.sourcePermission,D=a.sourceType,J=a.tableException,L=new wa;L.setModelName(w);L.setModelDesc(m);
L.setMapSourcePermission(H);L.setModelIsValid(G);L.setMapSourceType(D);L.setMapTableException(J);c.setIntegration(L);c.setJsonModel(a.modeler);a.modelerCreateTime&&(l=a.modelerCreateTime);a.tryLock?xa(k):(m=a.lockUserName,(a=a.lockByMe)?c.setLockInfo(a,m,!0):c.setLockInfo(a,m))},fa=function(){if(c.isDirty()){var a=new ya;a.setText(d.get("confirmRefresh","\u5237\u65b0\u6a21\u578b\u4f1a\u4e22\u5931\u672a\u4fdd\u5b58\u7684\u4fee\u6539\uff0c\u786e\u5b9a\u8981\u5237\u65b0\u5417\uff1f"));a.setConfirmedListener(function(m){m&&
(U(),K.occur(K.BUTTON_TYPE,K.REFRESH))});a.show(F.getJqUi())}else U(),K.occur(K.BUTTON_TYPE,K.REFRESH)},U=function(){S(function(){},function(a){if(20003102==a)return a=d.get("modelNotFound","#1\uff0c\u6a21\u578b\u5df2\u88ab\u522a\u9664\u3002").replace("#1",d.get("refreshFailed","\u5237\u65b0\u5931\u8d25")),c.getMsgCurtain().showPrompt(a),!0})},Ga=function(){za(!1)},za=function(a){if(c.isDirty()){var m=c.getJsonModel(),w=p();w=new f(w,function(D){0==D.isValid?c.getMsgCurtain().showPrompt(d.get("saveSuccessButInvalid",
"\u4fdd\u5b58\u6210\u529f\u3002\u6a21\u578b\u8bbe\u7f6e\u4e0d\u5b8c\u6574\uff0c\u4e0d\u5141\u8bb8\u90e8\u7f72\u3002")):c.getMsgCurtain().showSuccess(d.get("saveSuccess","\u4fdd\u5b58\u6210\u529f\u3002"));c.clearDirty();ja(D.deployed);l=D.modelerCreateTime;K.occur(K.BUTTON_TYPE,K.SAVE);a&&Aa()},function(D,J){if(20003101===D)return c.getMsgCurtain().showPrompt(d.get("modelDuplicateNameInGroup","#1\uff0c\u8be5\u76ee\u5f55\u4e0b\u5b58\u5728\u540c\u540d\u6570\u636e\u6a21\u578b\u3002").replace("#1",d.get("saveFail",
"\u4fdd\u5b58\u5931\u8d25"))),!0;if(20003102==D)return D=d.get("modelNotFound","#1\uff0c\u6a21\u578b\u5df2\u88ab\u522a\u9664\u3002").replace("#1",d.get("saveFail","\u4fdd\u5b58\u5931\u8d25")),c.getMsgCurtain().showPrompt(D),!0;if(20001009==D)return","==J[J.length-1]&&(J=J.substring(0,J.length-1)),J=J.split(","),D="",1==J.length&&(D=d.get("duplicateMetricNumber","#1\u3002\u6307\u6807\u7f16\u7801\u201c#2\u201d\u5df2\u88ab\u4f7f\u7528\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u6307\u6807\u7f16\u7801\u3002").replace("#1",
d.get("saveFail","\u4fdd\u5b58\u5931\u8d25")).replace("#2",J[0])),1<J.length&&(D=d.get("duplicateMetricNumber2","#1\u3002\u201c#2\u201d\u7b49#3\u4e2a\u6307\u6807\u7f16\u7801\u5df2\u88ab\u4f7f\u7528\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u6307\u6807\u7f16\u7801\u3002").replace("#1",d.get("saveFail","\u4fdd\u5b58\u5931\u8d25")).replace("#2",J[0]).replace("#3",J.length)),c.getMsgCurtain().showPrompt(D),!0});var G=c.getIntegration(),H=G.getModelDesc();G=G.getModelName();w.saveModelerModel(k,G,H,m)}else c.getMsgCurtain().showPrompt(d.get("modelIsClean",
"\u6a21\u578b\u5185\u5bb9\u672a\u4fee\u6539"))},Ha=function(){if(c.isDirty())return za(!0),!0;Aa()},Aa=function(){(new q(E(),function(a){1==a?Ma():Ba()})).needDeployRefModel(k)},Ma=function(){(new q(E(),function(a){var m=new ha;m.fromJsonObject(a);0<m.getChildren().length?(a=new W,a.setRootNode(m),a.setDescConfirmCallback(function(w,G){(new q(E(),function(H){var D=new M;D.fromJsonObject(H);H=T.ONE;0<G.length&&(H=T.BATCH);(new T(D,function(){ja(!0);Ca();Da([k]);c.getMsgCurtain().showSuccess(d.get("deploySuccess",
"\u90e8\u7f72\u6210\u529f"))},H)).show()},function(H){if(20008001==H)return c.getMsgCurtain().showPrompt(d.get("alreadyDeployed","\u6a21\u578b\u5df2\u90e8\u7f72\uff0c\u8bf7\u52ff\u91cd\u590d\u90e8\u7f72")),!0;if(20003102==H)return H=d.get("modelNotFound","#1\uff0c\u6a21\u578b\u5df2\u88ab\u522a\u9664\u3002").replace("#1",d.get("deployFailed","\u90e8\u7f72\u5931\u8d25")),c.getMsgCurtain().showPrompt(H),!0})).deployModelForModelSetSource(r,k,w,G)}),a.asyncShowDeployDialog()):Ba()},function(a,m){c.getMsgCurtain().showPrompt(m)})).loadNeedDeployRefModel(k)},
Ba=function(){var a=new B;a.setDescConfirmCallback(function(m){(new q(E(),function(w){var G=w.validity;if(G){var H=e.protectedGetModelTypeName();c.setJsonValidity(G,d.get("modelerDeployFailed","#1\u8bbe\u7f6e\u4e0d\u5b8c\u6574\uff0c\u90e8\u7f72\u5931\u8d25").replace("#1",H))}w.deployed&&(ja(!0),Ca(),Da([k]))},function(w){switch(w){case 20008001:return c.getMsgCurtain().showPrompt(d.get("alreadyDeployed","\u6a21\u578b\u5df2\u90e8\u7f72\uff0c\u8bf7\u52ff\u91cd\u590d\u90e8\u7f72")),!0;case 20003102:return w=
d.get("modelNotFound","#1\uff0c\u6a21\u578b\u5df2\u88ab\u522a\u9664\u3002").replace("#1",d.get("deployFailed","\u90e8\u7f72\u5931\u8d25")),c.getMsgCurtain().showPrompt(w),!0;case 20004001:return c.getMsgCurtain().showPrompt(d.get("incompleteMaterializedConfig","\u7269\u5316\u5b58\u50a8\u8bbe\u7f6e\u4e0d\u5b8c\u6574\uff0c\u90e8\u7f72\u5931\u8d25\u3002")),!0}})).deploySingleModelForDesigner(r,k,m)});a.showDialog();a.textFieldFocus()},Da=function(a){var m=new f(p(),function(w){if(w){K.occur(K.BUTTON_TYPE,
K.DEPLOY);for(var G=0;G<w.length;G++){var H=w[G],D=Object.keys(H);if(!D||0==D.length)break;D=D[0];"tableModeler"==D?K.occur(K.DATATABLE_MODEL_TRANSFORM_NODE_TYPE,H[D]):"metricModeler"==D&&K.occur(K.METRIC_MODEL_DIMENSION_TYPE,H[D])}}},function(w,G){return!0});m.setShowBlocking(!1);m.loadDeployModelerForUserOperation(a)},Ca=function(){var a=new Q;a.setTitle(d.get("operatorTips","\u64cd\u4f5c\u63d0\u793a"));a.setOptionType(Q.OPTION_OK);a.setButtonText(Q.RETURN_OK,d.get("iSee","\u6211\u77e5\u9053\u4e86"));
a.setCustomPainter(function(m){var w=$("<div>");w.addClass("deploy-feedback-dialog-image");com.kingdee.bos.qing.modeler.designer.Icons.background(w,"msg-success");var G=$("<div>");G.addClass("deploy-feedback-dialog-text");G.text(d.get("deploySucceeded","\u5df2\u6210\u529f\u90e8\u7f72"));var H=$("<div>");H.addClass("deploy-dialog-rolesetting-box");var D=$("<div>");D.addClass("deploy-dialog-rolesetting-text");D.text(d.get("nowGoSetting","\u73b0\u5728\u53bb\u8bbe\u7f6e"));var J=$("<div>");J.addClass("deploy-dialog-rolesetting-text-link");
var L=d.get("dataRole","\u6570\u636e\u6743\u9650");J.text(L);J.attr("title",L);J.css("cursor","pointer");J.css("color","#0E5FD8");J.on("click",function(X){X=com.kingdee.bos.qing.common.Util;var Z=X.decodeParamFromUrl(window.location.search,"path"),sa=X.decodeParamFromUrl(location.search,"modelSetId"),Ea=X.decodeParamFromUrl(location.search,"modelSetName");Z=X.appendParamToUrl(Z+"/qing_modeler/dataAuthEntrance.do","modelSetName",Ea);Z=X.appendParamToUrl(Z,"modelSetId",sa);(sa=qa.getUrlParamValue())&&
(Z=X.appendParamToUrl(Z,"skin",sa));X=d.get("dataRole","\u6570\u636e\u6743\u9650")+"-"+Ea;com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(X,Z,Z);K.occur(K.ENTER_DATA_AUTH_MANAGE,K.ENTER_DATA_AUTH_MANAGE_AFTER_DEPLOY)});H.append(D);H.append(J);m.append(H);m.append(w);m.append(G)});a.showDialog(380,280)},Ia=function(){var a=com.kingdee.bos.qing.ui.component.MenuItemModel,m=new com.kingdee.bos.qing.ui.component.MenuModel;a=new a(Na);a.setText(d.get("rollBackToLatest","\u56de\u9000\u5230\u6700\u65b0\u90e8\u7f72\u72b6\u6001"));
m.addItemModel(a);return m},Na=function(){var a=Q.createFeedbackDialog();a.setOptionType(Q.OPTION_OK_CANCEL);a.setMsgImageType(Q.MSG_CONFIRM);var m=e.protectedGetModelTypeName();m=d.get("rollbackConfirmTips","\u56de\u9000\u5230\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u540e\uff0c\u5f53\u524d#1\u4f1a\u88ab\u6700\u8fd1\u4e00\u6b21\u90e8\u7f72\u72b6\u6001\u8986\u76d6\uff0c\u786e\u5b9a\u56de\u9000\u5417\uff1f").replace("#1",m);a.setMessage(m);a.setClosingChecker(function(w){w==Q.RETURN_OK&&Oa();return!0});
a.showDialog()},Oa=function(){(new q(E(),function(a){a?(c.setUndoAbleJsonModel(a,d.get("rollBackToLatest","\u56de\u9000\u5230\u6700\u65b0\u90e8\u7f72\u72b6\u6001")),c.getMsgCurtain().showSuccess(d.get("rollbackSuccess","\u6a21\u578b\u56de\u9000\u6210\u529f")),K.occur(K.BUTTON_TYPE,K.ROLLBACK_CURRENT_DEPLOY)):c.getMsgCurtain().showPrompt(d.get("noDeployedToRollBack","\u6a21\u578b\u6682\u672a\u90e8\u7f72\uff0c\u65e0\u6cd5\u8fdb\u884c\u56de\u9000"))})).getLatestDeploy(k)},Ja=function(){var a={en:{confirmExit:"Changes detected, exit without saving? These changes will be lost if you do not save.",
sureExit:"Exit",sureReturn:"Return"},zh_CN:{confirmExit:"\u68c0\u6d4b\u5230\u60a8\u6709\u66f4\u6539\u5185\u5bb9\uff0c\u662f\u5426\u4e0d\u4fdd\u5b58\u76f4\u63a5\u9000\u51fa\uff1f\u82e5\u4e0d\u4fdd\u5b58\uff0c\u5c06\u4e22\u5931\u8fd9\u4e9b\u66f4\u6539\u3002",sureExit:"\u76f4\u63a5\u9000\u51fa",sureReturn:"\u8fd4\u56de\u7f16\u8f91"},zh_TW:{confirmExit:"\u6aa2\u6e2c\u5230\u60a8\u6709\u66f4\u6539\u5167\u5bb9\uff0c\u662f\u5426\u4e0d\u4fdd\u5b58\u76f4\u63a5\u9000\u51fa\uff1f\u82e5\u4e0d\u4fdd\u5b58\uff0c\u5c07\u4e1f\u5931\u9019\u4e9b\u66f4\u6539\u3002",
sureExit:"\u76f4\u63a5\u9000\u51fa",sureReturn:"\u8fd4\u56de\u7de8\u8f2f"}};c.isDirty()?(h?ca.setI18n():ca.setI18n(a),ca.showConfirmExitDialog()):ra.closeCurrentTab()},La=function(a){a?Pa():Qa(k)},xa=function(a){(new f(p(),function(m){c.setLockInfo(m.lockByMe,m.lockUserName)},function(m){if(20003102==m)return m=d.get("modelNotFound","#1\uff0c\u6a21\u578b\u5df2\u88ab\u522a\u9664\u3002").replace("#1",d.get("lockFailed","\u9501\u5b9a\u5931\u8d25")),c.getMsgCurtain().showPrompt(m),!0})).lockModel(a)},
Qa=function(a){(new f(p(),function(m){m?c.setLockInfo(!1,null):c.getMsgCurtain().showPrompt(d.get("unlockFailed","\u89e3\u9501\u5931\u8d25"))},function(m){if(20003102==m)return m=d.get("modelNotFound","#1\uff0c\u6a21\u578b\u5df2\u88ab\u522a\u9664\u3002").replace("#1",d.get("unlockFailed","\u89e3\u9501\u5931\u8d25")),c.getMsgCurtain().showPrompt(m),!0})).unLockModel(a)},Ka=function(a){h=a;t&&t.setEnabled(h);n&&n.setEnabled(h);h&&g?x&&x.setEnabled(!0):x&&x.setEnabled(!1)},ja=function(a){g=a;h&&g?x&&
x.setEnabled(!0):x&&x.setEnabled(!1)},Pa=function(){(new f(p(),function(a){l<a?Ra():xa(k)})).getModelerModelVersion(k)},Ra=function(){var a=Q.createFeedbackDialog();a.setMessage(d.get("modelVersionIsNotNew","\u6a21\u578b\u5728\u6253\u5f00\u8bbe\u8ba1\u5668\u540e\u5df2\u88ab\u4ed6\u4eba\u4fee\u6539\uff0c\u5c06\u91cd\u65b0\u52a0\u8f7d\u6700\u65b0\u6a21\u578b\u3002"));a.setMsgImageType(Q.MSG_WARNING);a.setOptionType(Q.OPTION_OK_CANCEL);a.setClosingChecker(function(m){m==Q.RETURN_OK&&(new f(p(),function(w){I(w);
var G=w.lockByMe;G&&c.setLockInfo(G,w.lockUserName)})).lockAndReloadModelerInfo(k);return!0});a.showDialog()},Fa=function(){Y.resize(null,null,10,30)}};var d,P,aa,ka,ma,la,Q,na,da,K,ya,ta,pa,wa,qa,ra,ca,ba,ha,ea,oa,ua,va;(function(){var e=com.kingdee.bos.qing.modeler.designer;wa=e.Integration;ba=e.ModelSetSourceIntegration;da=e.Icons;K=e.UserOperationReporter;e=com.kingdee.bos.qing.ui.component;ka=e.AbstractModalDialog;ma=e.TextArea;la=e.Label;Q=e.MessageDialog;na=e.TextField;ya=e.SimpleConfirmer;
ta=e.CheckBox;pa=e.HelpIcon;e=com.kingdee.bos.qing.framework.common;d=e.MultilanguageManager.createPackageAccessor(V);aa=e.AbstractFacade;ra=e.TabbedUiUtil;e=com.kingdee.bos.qing;qa=e.SkinUtil;oa=e.CodeLoader;e=com.kingdee.bos.qing.common;P=e.DomUtil;e=com.kingdee.bos.qing.integration;ca=e.TabStatusHelper;e=com.kingdee.bos.qing.modeler.designer;ha=e.FolderNode;ea=e.LeafNode;e=com.kingdee.bos.qing.common.ui;ua=e.TableUtil;e=com.kingdee.bos.qing.modeler.message.common;va=e.MessageManageUtil})();T.BATCH=
"0";T.ONE="1";M.FAILED_MODEL_CHECK=1;M.FAILED_LOCK_CHECK=2;M.FAILED_MODEL_LOCK_CHECK=M.FAILED_MODEL_CHECK|M.FAILED_LOCK_CHECK;O.MODEL_CHECK=1;O.LOCK_CHECK=2})();(function(){function f(R){N.call(this);this.isNumberExist=function(M,O,V,d,P){V=new q(T(),V,d,P);V.setShowBlocking(!0);V.isNumberExist(R,O,M)};this.getNumberByPrefix=function(M,O,V,d){O=new q(T(),O,V,d);O.setShowBlocking(!0);O.getNumberByPrefix(M)};var T=function(){var M=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");M=(M?M:"/ierp")+"/qing_modeler/metricExtInfo.do";var O=new com.kingdee.bos.qing.modeler.designer.RemoteImpl;O.setRemoteUrl(M);return O}}function q(R,
T,M,O){com.kingdee.bos.qing.framework.common.AbstractFacade.call(this,R,T,M,O);var V=this.protectedMethod;this.isNumberExist=function(d,P,aa){V.remote("isNumberExist",{modelId:d,number:P,metricId:aa})};this.getNumberByPrefix=function(d){V.remote("getNumberByPrefix",{number:d})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==
typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.scene&&(com.kingdee.bos.qing.modeler.scene={});var u=com.kingdee.bos.qing.modeler.scene;u.MetricDesignerScene=function(){W.call(this);var R;this.protectedGetDesigner=function(){if(!R){var T=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"modelId");R=new C;R.setNumberChecker(new f(T))}return R};this.protectedGetModelTypeName=function(){return B.get("metricModel",
"\u6307\u6807\u6a21\u578b")};this.protectedGetBehaviorEntranceType=function(){return com.kingdee.bos.qing.behavior.BehaviorManager.ENTRANCE_MODELER_METRIC_MODEL_DESIGNER}};var B,C,N,W;(function(){var R=com.kingdee.bos.qing.modeler.designer.metricdesigner;C=R.Designer;N=R.AbstractNumberCheck;R=com.kingdee.bos.qing.framework.common;B=R.MultilanguageManager.createPackageAccessor(u);W=u.AbstractDesignerScene})()})();
//qingVersionTag: 20250324