(function(){function E(b,c,h,l){w.call(this,b,c,h,l);var k=this.protectedMethod;this.loadDeployModelerModel=function(d,f){k.remote("loadDeployModelerModel",{modelId:d,modelDeployId:f})}}function z(b,c,h,l){w.call(this,b,c,h,l);var k=this.protectedMethod;this.designerLoadSources=function(){var d={modelSetId:com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"modelSetId")};k.remote("designerLoadSources",d)};this.loadNoAuthRefSourceIds=function(d){d={sourceIds:JSON.stringify(d)};
k.remote("loadNoAuthRefSourceIds",d)}}function F(){var b,c,h,l;this.getJqUi=function(){if(!c){c=$("<div>");c.css("position","relative");c.css("top","40px");c.css("left","0px");h=new A;h.setText(p.get("chooseApp","\u8bf7\u9009\u62e9\u4e00\u4e2a\u5e94\u7528"));h.setReadonly("readonly");var d=h.getJqUi();d.on("click",k);var f=$("<div>");B.background(f,"f7");f.css("z-index","1");f.css("cursor","pointer");f.on("click",k);u.layoutCtrlWithLRTB(f,175,null,16,0,null,16);u.layoutCtrlWithLRTB(d,40,null,160,
null,null,23);var a=$("<span>");a.text(p.get("app","\u5e94\u7528"));a.css("color","#666");a.css("font-size","13px");u.layoutCtrlWithLRTB(a,5,null,null,5,null,null);d.appendTo(c);f.appendTo(c);a.appendTo(c)}return c};this.getTextField=function(){return h};this.setFunSelectedChangeListener=function(d){l=d};var k=function(){var d=com.kingdee.bos.qing.integration.AppChooseForm;d.setCallBack(function(f){if(f&&f.content){var a=f.content;f=a.appNumber;var e={};e.text=a.appName;e.value=f;b=e;if(h){a=h;e=
a.setText;var q=p.get("chooseApp","\u8bf7\u9009\u62e9\u4e00\u4e2a\u5e94\u7528");b&&(q=b.text);e.call(a,q)}l(f)}});d.openAppChooseForm()}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.scene&&(com.kingdee.bos.qing.modeler.scene=
{});var x=com.kingdee.bos.qing.modeler.scene;x.DeployDesignerScene=function(){var b,c,h;this.show=function(a){c||(c=new b,r.setModelId(com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"modelId")),l(),r.setRemoteImpl(k("/qing_modeler/modelSetSourceManageEntrance.do")),r.registerDataCenterSelectorConstructor(F),r.setModelSetSourceFacade(z),c.setRemoteImpl(k("/qing_modeler/deployDesigner.do")),h=c.createJqUi(),c.appendToolbarBtn(f,"btn_close",p.get("closeTab","\u9000\u51fa")),
d(),c.getMsgCurtain().showPrompt(p.get("deployModelCannotEdit","\u60a8\u5f53\u524d\u6253\u5f00\u7684\u662f\u8be5\u6a21\u578b\u7684\u5bf9\u5e94\u90e8\u7f72\u7248\u672c\uff0c\u4e0d\u5141\u8bb8\u4fdd\u5b58\u3001\u90e8\u7f72\u7b49\u64cd\u4f5c\uff0c\u5982\u6709\u9700\u8981\uff0c\u53ef\u4ece\u6a21\u578b\u96c6\u4e3b\u754c\u9762\u8fdb\u5165\u8be5\u6a21\u578b\u8bbe\u8ba1\u5668\u540e\u518d\u8fdb\u884c\u64cd\u4f5c\u3002")));h.appendTo(a);c.resize()};this.setDesignerConstructor=function(a){b=a};var l=function(){var a=
com.kingdee.bos.qing.common.Util,e=r,q=a.decodeParamFromUrl(window.location.search,"path"),g=a.decodeParamFromUrl(location.search,"modelSetId"),t=a.decodeParamFromUrl(location.search,"modelSetName");e.setDataSourceManageEntrance(function(){var v=C.getUrlParamValue(),m=p.get("sourceManage","\u6570\u636e\u6e90\u7ba1\u7406")+"-"+t,n=q+"/qing_modeler/modelSetSourceManageEntrance.do";n=a.appendParamToUrl(n,"modelSetId",g);n=a.appendParamToUrl(n,"modelSetName",t);v&&(n=a.appendParamToUrl(n,"skin",v));y.openNewTab(m,
n,n)})},k=function(a){var e=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");a=(e?e:"/ierp")+a;e=new com.kingdee.bos.qing.modeler.designer.RemoteImpl;e.setRemoteUrl(a);return e},d=function(){var a=new E(k("/qing_modeler/deployManage.do"),function(g){var t=g.desc,v=g.name,m=new D;m.setModelName(v);m.setModelDesc(t);g.sourcePermission&&m.setMapSourcePermission(g.sourcePermission);g.sourceType&&m.setMapSourceType(g.sourceType);g.tableException&&m.setMapTableException(g.tableException);
c.setIntegration(m);(g=g.modeler)&&c.setJsonModel(g)},function(g,t){if(20001010==g)return com.kingdee.bos.qing.framework.common.RemoteFramework.openErrorPage(g,com.kingdee.bos.qing.common.Base64Util.encode(encodeURIComponent(t))),!0}),e=com.kingdee.bos.qing.common.Util,q=e.decodeParamFromUrl(window.location.search,"modelId");e=e.decodeParamFromUrl(window.location.search,"modelDeployId");a.loadDeployModelerModel(q,e)},f=function(){y.closeCurrentTab()}};x.ModelSetSourceFacade=z;var p,w,D,r,C,y,A,B,
u;(function(){var b=com.kingdee.bos.qing.modeler.designer;D=b.Integration;r=b.ModelSetSourceIntegration;B=b.Icons;b=com.kingdee.bos.qing.framework.common;p=b.MultilanguageManager.createPackageAccessor(x);w=b.AbstractFacade;y=b.TabbedUiUtil;b=com.kingdee.bos.qing;C=b.SkinUtil;b=com.kingdee.bos.qing.ui.component;A=b.TextField;b=com.kingdee.bos.qing.common;u=b.DomUtil})()})();
//qingVersionTag: 20250324