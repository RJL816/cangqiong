(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.scene&&(com.kingdee.bos.qing.modeler.scene={});com.kingdee.bos.qing.modeler.scene.ModelSetDataAuthScene=function(){function w(a,b,g,k){com.kingdee.bos.qing.framework.common.AbstractFacade.call(this,
a,b,g,k);var q=this.protectedMethod;this.loadSingleModelSetInfo=function(c){q.remote("loadSingleModelSetInfo",{modelSetId:c})}}function x(){u.call(this);var a;this.getRemoteUrl=function(){return a};this.setRemoteUrl=function(b){a=b}}function y(a){var b;this.getJqUi=function(){if(!b){b=$("<div class='no-data-bg-container'>");var g=$("<div class='no-data-icon'>");com.kingdee.bos.qing.modeler.modelset.auth.common.Icons.background(g,"icon-empty");var k=$("<div class='no-data-text'>");k.text(a);g.appendTo(b);
k.appendTo(b)}return b};this.hide=function(){b&&b.hide()};this.show=function(){b&&b.show()}}var v,e,r,t,h,u;(function(){var a=com.kingdee.bos.qing;r=a.SkinUtil;a=com.kingdee.bos.qing.common;e=a.Util;a=com.kingdee.bos.qing.framework.common;v=a.WebPageInitializer;h=a.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.modeler.modelset.auth.ui);t=a.TabbedUiUtil;u=a.AbstractRemoteCall})();this.start=function(){v.init();z();var a=com.kingdee.bos.qing.behavior.BehaviorManager;com.kingdee.bos.qing.modeler.modelset.auth.common.UserOperationReporter.hookCollector(function(b,
g){a.interestInBehavior(b,g)});a.interestInBehaviorEntrance(a.ENTRANCE_MODELER_DATA_AUTH)};var z=function(){var a=e.decodeParamFromUrl(location.search,"path"),b=com.kingdee.bos.qing.modeler.modelset.auth.common.Integration;b.setRemoteUrl(a+"/qing_modeler/dataAuthEntrance.do");b.setDataAuthorityManager(function(c,l,m){var n=r.getUrlParamValue(),f=a+"/qing_modeler/modelSetRoleManageEntrance.do";l=h.get("modelSetRoleManagement","\u6a21\u578b\u96c6\u89d2\u8272\u7ba1\u7406")+"-"+l;f=e.appendParamToUrl(f,
"modelSetId",c);f=e.appendParamToUrl(f,"isPreset",m);n&&(f=e.appendParamToUrl(f,"skin",n));t.openNewTab(l,f,f)});b.setModelDesignerEntrance(function(c,l,m,n){var f=r.getUrlParamValue(),p=g(n);p=p?p+"-"+m:m;var d=a+"/qing_modeler/deployDesignerEntrance.do";d=e.appendParamToUrl(d,"modelSetId",c);d=e.appendParamToUrl(d,"modelId",l);d=e.appendParamToUrl(d,"modelName",m);d=e.appendParamToUrl(d,"modelType",k(n));f&&(d=e.appendParamToUrl(d,"skin",f));t.openNewTab(p,d,d)});var g=function(c){switch(c){case "data_table_model":return h.get("tableModel",
"\u6570\u636e\u8868\u6a21\u578b");case "entity_model":return h.get("entityModelType","\u5b9e\u4f53\u6a21\u578b");case "relation_model":return h.get("relationModelType","\u5173\u7cfb\u6a21\u578b");case "metric_model":return h.get("metricModel","\u6307\u6807\u6a21\u578b")}return null},k=function(c){switch(c){case "data_table_model":return"1";case "entity_model":return"2";case "relation_model":return"3";case "metric_model":return"4"}return null};b=new w(A(a),function(c){c?(c=c.isPreset,(new com.kingdee.bos.qing.modeler.modelset.auth.ui.Main).createJqUi(c).appendTo($(document.body))):
(c=(new y(h.get("noPermission","\u6ca1\u6709\u8be5\u6a21\u578b\u96c6\u7684\u67e5\u770b\u6743\u9650"))).getJqUi(),c.attr("title",h.get("noPermission","\u6ca1\u6709\u8be5\u6a21\u578b\u96c6\u7684\u67e5\u770b\u6743\u9650")),c.appendTo($(document.body)))});var q=e.decodeParamFromUrl(window.location.search,"modelSetId");b.loadSingleModelSetInfo(q)},A=function(a){a+="/qingmodeler/modelSetManage.do";var b=new x;b.setRemoteUrl(a);return b}}})();
//qingVersionTag: 20250324