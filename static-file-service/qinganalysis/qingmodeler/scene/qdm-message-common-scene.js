(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.message&&(com.kingdee.bos.qing.modeler.message={});"undefined"==typeof com.kingdee.bos.qing.modeler.message.common&&(com.kingdee.bos.qing.modeler.message.common=
{});com.kingdee.bos.qing.modeler.message.common.MessageManageUtil=function(){var v,c,q,t,m,h,r,y=50;(function(){var g=com.kingdee.bos.qing;q=g.SkinUtil;h=g.CodeLoader;t=g.Seer;g=com.kingdee.bos.qing.common;c=g.Util;g=com.kingdee.bos.qing.framework.common;v=g.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.modeler.scene);m=g.TabbedUiUtil})();this.createMessageUI=function(g,u,w){"en"==t.getUrlParamValue("language")&&(y=80);h.loadJs("biz-common/qing-biz-common.js");h.loadSkinCss("biz-common",
"biz-common");h.loadSkinJs("biz-common","skin");h.loadI18n("biz-common","biz-common");h.loadJs("common/qing-table.js");h.loadJs("common/qing-schedule.js");h.loadI18n("common","qing-schedule");h.loadSkinCss("publish","qing-publish");h.loadSkinJs("publish","skin");h.loadI18n("publish","publish");h.loadJs("schema-manage/schema-manage-initialize.js");h.loadJs("schema-manage/schema-manage-ui.js");h.loadJs("publish/qing-publish.js");h.loadSkinCss("timedpush","qing-timedpush");h.loadSkinJs("timedpush","skin");
h.loadI18n("timedpush","timedpush");h.loadJs("timedpush/qing-timedpush.js");h.loadJs("lightapp/common/qing-lapp-env.js");h.loadJs("timedpush/qing-timedpush-lapp.js");h.setCallback(function(){var l=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");l=l?l:"/ierp";com.kingdee.bos.qing.message.common.Integration.setRemoteUrl(l+"/qing/messageManage.do");z(l);r=new com.kingdee.bos.qing.message.ui.Main;r.setFunOpenMessageDialog(function(){r.setViewSize(null,u,10,w)});r.setMessageWidth(y);
l=r.getJqUi(25);l.css(g);l.appendTo($(document.body))});h.loadSkinCss("message","message");h.loadSkinJs("message","skin");h.loadJs("message/message-manage-ui.js");h.loadI18n("message","message")};this.getMessageWidth=function(){return y};var z=function(g){var u=com.kingdee.bos.qing.message.common.Integration;u.setImportJSCodeForManager(function(){var l=com.kingdee.bos.qing.CodeLoader;l.setCallback(function(){var p=com.kingdee.bos.qing.theme.message.panel.common.Integration;p.setFunPublishRemoteImpl(function(){var d=
new com.kingdee.bos.qing.theme.message.panel.common.RemoteImpl;d.setRemoteUrl(g+"/qing/publishTo.do");return d});p.setFunQingCenterAndMenuEntrance(function(d,a,b,k){a=q.getUrlParamValue();var e=g+"/qing/publishEntrance.do";e=c.appendParamToUrl(e,"publishId",d);"extreport"==k?(e=c.appendParamToUrl(e,"appID","qing_rpt"),a&&(e=c.appendParamToUrl(e,"skin",a)),m.openNewTabInAppId(b,e,e,m.QING_RPT)):(a&&(e=c.appendParamToUrl(e,"skin",a)),m.openNewTabInAppId(b,e,e,m.QING_ANALYSIS))});p.setFunPublishContext(function(){var d=
new com.kingdee.bos.qing.publish.common.PublishContext;d.setParamPathPrefix(g);d.setLappEntranceUrl(g+"/qing/lappEntrance.do");return d});p.setResourceRemoteUrl(g+"/qing/resource.do");p.setDataModelEntrance(function(d,a,b){var k=q.getUrlParamValue();a=v.get("dataModeling","\u6570\u636e\u51c6\u5907")+"-"+a;var e=g+"/qing/dataModelingEntrance.do";e=c.appendParamToUrl(e,"themeID",d);e=c.appendParamToUrl(e,"isPreset",b);k&&(e=c.appendParamToUrl(e,"skin",k));m.openNewTabInAppId(a,e,e,m.QING_ANALYSIS)});
p.setFunTimedPushContentEditEntrance(function(){return function(d){var a=g+"/qing/timedPushContentEditEntrance.do",b=v.get("editTimedPushContent","\u7f16\u8f91\u63a8\u9001\u65b9\u6848");if(d instanceof com.kingdee.bos.qing.timedpush.model.EmailConfig){var k=d.getId(),e=d.getPublishSourceType();f=d.getSchemaSourceType();a=c.appendParamToUrl(a,"configId",k);a=c.appendParamToUrl(a,"publishSourceType",e);a=c.appendParamToUrl(a,"schemaType",f);a=c.appendParamToUrl(a,"pushTarget","email");b=b+"-"+d.getNameRule().getName();
d.isSourceNameNotFound()&&(a=c.appendParamToUrl(a,"errorCode","2301001"))}else{k=d.getId();e=d.getPushTargetType();var f=d.getSchemaType();a=c.appendParamToUrl(a,"configId",k);a=c.appendParamToUrl(a,"pushTargetType",e);a=c.appendParamToUrl(a,"schemaType",f);a=c.appendParamToUrl(a,"pushTarget","lapp");b=b+"-"+d.getName();d.getSourceName()||(a=c.appendParamToUrl(a,"errorCode","2301001"))}d=q.getUrlParamValue();f=t.getUrlParamValue("language");d&&(a=c.appendParamToUrl(a,"skin",d));f&&(a=c.appendParamToUrl(a,
"language",f));m.openNewTabInAppId(b,a,a,m.QING_ANALYSIS)}});p.setFunPublishedEmailAnonymousViewUrl(function(){var d=q.getUrlParamValue(),a=t.getUrlParamValue("language"),b=g+"/index.html?userId=Guest&accountId=(accountId)&appNumber=qing&formId=qing_analysis_pub_email#/dform?appNumber=qing&formId=qing_analysis_pub_email&publishId=(publishId)";d&&(b=c.appendParamToUrl(b,"skin",d));a&&(b=c.appendParamToUrl(b,"language",a));return b});p.setFunPublishedEmailLoginViewUrl(function(){var d=q.getUrlParamValue(),
a=t.getUrlParamValue("language"),b=g+"/qing/publishedEmailEntrance.do?publishId=(publishId)";d&&(b=c.appendParamToUrl(b,"skin",d));a&&(b=c.appendParamToUrl(b,"language",a));return b});p.setFunPublishContentEditEntrance(function(){return function(d,a,b){var k=com.kingdee.bos.qing.publish.model.PublishTargetType;if(b&&k.MOBILE==b){k=d.getPublishId();var e=d.getId()}else k=d.getId();var f=q.getUrlParamValue(),x=t.getUrlParamValue("language");b=g+"/qing/publishContentEditEntrance.do";b=c.appendParamToUrl(b,
"skin",f);b=c.appendParamToUrl(b,"language",x);b=c.appendParamToUrl(b,"publishId",k);e&&(b=c.appendParamToUrl(b,"lappId",e));e=b;a&&(k="editPublishedContent-"+k,f=com.kingdee.bos.qing.publish.common.PublishSubscribeHelper,f.putSubscribe(k,a),b=c.appendParamToUrl(b,"subscribeKey",k),b=c.appendParamToUrl(b,"currentPageClientId",f.getCurrentPageClientId()));m.openNewTabInAppId(v.get("editPublishedContent","\u7f16\u8f91\u53d1\u5e03\u65b9\u6848-")+d.getName(),b,e,m.QING_ANALYSIS)}});p=com.kingdee.bos.qing.modeler.message.panel.common.Integration;
p.setMessageRemoteUrl(g+"/qing_modeler/message.do");p.setFunOpenModelSetPage(function(d,a,b){var k=q.getUrlParamValue(),e=v.get("modelSet","\u6a21\u578b\u96c6-")+a,f=g+"/qing_modeler/modelSetMainPage.do";f=c.appendParamToUrl(f,"modelSetId",d);f=c.appendParamToUrl(f,"modelSetName",a);f=c.appendParamToUrl(f,"isPreset",b);f=c.appendParamToUrl(f,"currentPageClientId",com.kingdee.bos.qing.framework.common.RemoteFramework.getClientID());k&&(f=c.appendParamToUrl(f,"skin",k));m.openNewTabInAppId(e,f,f,m.QING_MODELER)});
p.setFunOpenModelDesign(function(d,a,b,k,e){var f=com.kingdee.bos.qing.modeler.message.panel.common.ModelType,x=q.getUrlParamValue();f=(f=f.getModelTypeText(e))?f+"-"+b:b;var n=g+"/qing_modeler/deployDesignerEntrance.do";n=c.appendParamToUrl(n,"modelSetId",d);n=c.appendParamToUrl(n,"modelId",a);n=c.appendParamToUrl(n,"modelName",b);n=c.appendParamToUrl(n,"modelDeployId",k);n=c.appendParamToUrl(n,"modelType",e);x&&(n=c.appendParamToUrl(n,"skin",x));m.openNewTab(f,n,n)})});l.loadSkinCss("message","messagepanel");
l.loadSkinJs("message","skin");l.loadJs("message/message-content-panel-management.js");l.loadI18n("message","messagepanel");l.loadSkinCss("qingmodeler/message","message-modeler-panel");l.loadSkinJs("qingmodeler/message","skin");l.loadJs("qingmodeler/message/message-content-panel-management.js");l.loadI18n("qingmodeler/message","message-modeler-panel")});com.kingdee.bos.qing.timedpush.LappIntegration.setLappPrivateUrl(g+"/qing/lappPrivateInfo.do");var w=c.decodeParamFromUrl(location.search,"appID");
u.setAppId(w)};this.resize=function(g,u,w,l){r&&r.setMessageDialogBounds(g,u,w,l)}}})();
//qingVersionTag: 20250324