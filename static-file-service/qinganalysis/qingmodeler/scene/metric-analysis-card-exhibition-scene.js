(function(){function K(b,f,g,c){G.call(this,b,f,g,c);var q=this.protectedMethod;this.cardExecute=function(n,r){q.remote("cardExecute",{metricLibId:n,bizTag:r})}}function L(b){var f,g,c,q,n,r,v,x,m,t;this.show=function(d,h,k){f||(f=$("<div>"),f.text("loading..."),f.appendTo(b),f.empty(),f.addClass("metric-card-error-errorprompt"),g=$("<div>"),g.css({position:"absolute",margin:"0px auto",width:"100%",height:"100%"}),g.appendTo(f),c=$("<div>"),c.addClass("metric-card-error-errorprompt-img"),p.Icons.background(c,
"icon_nodata"),c.appendTo(g),r=$("<div>"),r.addClass("metric-card-error-errorprompt-errorinfo"),r.appendTo(g),q=$("<span>"),q.addClass("metric-card-error-errorprompt-text"),q.appendTo(r),n=$("<span>"),n.addClass("metric-card-error-errorprompt-error-btn"),n.text(u.get("showErrorLog","\u663e\u793a\u9519\u8bef\u65e5\u5fd7")),n.appendTo(r));E(d,h,k)};var E=function(d,h,k){var l="",y=!1;20006001==d?(y=!1,l="\u6307\u6807\u5e93\u4e2d\u4e0d\u5b58\u5728\u8be5\u6307\u6807"):20006002==d&&(y=!1,l="\u6307\u6807\u6a21\u578b\u4e0d\u5b58\u5728\u6216\u672a\u90e8\u7f72");
y?(n.show(),n.on("click",function(B){F(d,h,k)})):n.hide();q.text(l)},F=function(d,h,k){if(!v){v=$("<div>");v.addClass("metric-card-error-errorprompt-logdetail-container");var l=$("<div>");l.addClass("metric-card-error-errorprompt-logdetail-container-title");var y=$("<div>");y.addClass("metric-card-error-errorprompt-logdetail-titiletag");var B=$("<div>");B.addClass("metric-card-error-errorprompt-logdetail-title-lable");B.text(u.get("errorLog","\u9519\u8bef\u65e5\u5fd7"));var C=$("<div>");C.addClass("metric-card-error-errorprompt-logdetail-close");
p.Icons.background(C,"icon_errorclose");C.on("click",e);l.append(y);l.append(B);l.append(C);x=$("<div>");x.css("padding","10px");x.text(u.get("errorCode","\u9519\u8bef\u7801\uff1a")+d);m=$("<pre>");m.addClass("metric-card-error-errorprompt-logdetail-content-container-text");m.text("\u9519\u8bef\u4fe1\u606f\uff1a"+h+(null!=k?"\r\n\u9519\u8bef\u6808\uff1a"+k:""));var w=$("<div>");w.addClass("metric-card-error-errorprompt-logdetail-content-container");var z=$("<span>");z.text(u.get("copy","\u590d\u5236"));
z.addClass("metric-card-error-errorprompt-logdetail-content-copybutton");z.click(function(){var M=a("\u9519\u8bef\u7801\uff1a"+d+"\r\n\u9519\u8bef\u4fe1\u606f\uff1a"+h+"\r\n\u9519\u8bef\u6808\uff1a"+k),A=$("<span>");A.addClass("metric-card-error-errorprompt-logdetail-content-copybutton-end");w.append(A);M?A.text(u.get("copy success!","\u590d\u5236\u6210\u529f\uff01")):A.text(u.get("copy error!","\u590d\u5236\u5931\u8d25\uff01"));setTimeout(function(){A.remove()},1500)});w.mouseover(function(){z.css("visibility",
"visible")});w.mouseout(function(){z.css("visibility","hidden")});w.append(x);w.append(m);w.append(z);v.append(l);v.append(w);t=$("<div class='sa-ctrl-common-modallayer'>");v.appendTo(t)}l=$(document.body);t.appendTo(l)},a=function(d){var h=document.createElement("textarea");document.body.appendChild(h);h.value=d;h.select();d=document.execCommand("copy");document.body.removeChild(h);return d},e=function(){t&&t.detach()}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee=
{});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.scene&&(com.kingdee.bos.qing.modeler.scene={});"undefined"==typeof com.kingdee.bos.qing.modeler.scene.metricanalysis&&(com.kingdee.bos.qing.modeler.scene.metricanalysis={});var p=com.kingdee.bos.qing.modeler.scene.metricanalysis;p.CardExhibitionScene=
function(){var b,f,g,c,q;this.show=function(a){if(!b){b=$("<div>");f=$("<div>");if(!g){g=$("<div>");g.addClass("metric-card-fontfamily");g.addClass("metric-card-title");var e=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"name");g.text(e);g.appendTo(f)}c||(c=$("<div>"),D.layoutCtrlWithLRTB(c,0,0,null,30,0,null),c.appendTo(b));D.layoutCtrlWithLRTB(f,0,0,null,0,null,30);f.appendTo(b);v()}D.layoutCtrlWithLRTB(b,0,0,null,0,0,null);n();b.appendTo(a)};var n=function(){var a=
new K(r(),function(h){var k=new H;k.fromJsonObject(h);I.getExhibition(k.getChartType()).draw(c,k.getChartModel())},function(h,k,l){q||(q=new L(c));q.show(h,k,l);return!0}),e=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"metricLibId"),d=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"bizTag");a.cardExecute(e,d)},r=function(){var a=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");a=(a?a:"/ierp")+"/qing_modeler/metricAnalysis.do";
var e=new com.kingdee.bos.qing.modeler.metricanalysis.RemoteImpl;e.setRemoteUrl(a);return e},v=function(){var a=$("<div class='metric-card-icon'>");a.on("click",E);p.Icons.background(a,"btn-edit");a.on("mouseover",function(d){p.Icons.background(a,"btn-edit-on")});a.on("mouseout",function(d){p.Icons.background(a,"btn-edit")});a.attr("title",u.get("enterEdit","\u8fdb\u5165\u8bbe\u8ba1\u5668"));var e=$("<div class ='metric-card-icon'>");e.on("click",x);p.Icons.background(e,"btn-refresh");e.on("mouseover",
function(d){p.Icons.background(e,"btn-refresh-on")});e.on("mouseout",function(d){p.Icons.background(e,"btn-refresh")});e.attr("title",u.get("cardRefresh","\u5237\u65b0"));F([a,e])},x=function(){var a=m("path");a=t((a?a:"/ierp")+"/qing_modeler/metricAnalysisCardExhibitionEntrance.do","name",m("name"));a=t(a,"pageId",m("pageId"));a=t(a,"metricLibId",m("metricLibId"));window.location.href=a},m=function(a){return com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,a)},t=function(a,
e,d){return com.kingdee.bos.qing.common.Util.appendParamToUrl(a,e,d)},E=function(){var a=m("pageId");if(top.window.invokeCustomEvent){var e={metricLibId:m("metricLibId"),cardName:m("name")};top.window.invokeCustomEvent(a,"",["QingMetricCard","openDesigner",JSON.stringify(e)])}},F=function(a){for(var e=5,d=0,h=a.length;d<h;d++)a[d].css({position:"absolute",top:"5px",right:e+"px"}),e+=35,f.append(a[d])}};var D,G,J,H,I,u;(function(){var b=com.kingdee.bos.qing.common;D=b.DomUtil;b=com.kingdee.bos.qing.framework.common;
G=b.AbstractFacade;u=b.MultilanguageManager.createPackageAccessor(p);J=b.AbstractIcons;b=com.kingdee.bos.qing.modeler.metricanalysis;H=b.ExecuteResult;I=b.ChartExhibitionFactory})();p.Icons=new function(){J.call(this);var b=this.protectedMethod,f;this.setComboIconImpl=function(g){f=g};this.protectedInit=function(g,c){if(!f)throw Error("Please setComboIconImpl() first.");f.define(c,"scene-error-image-sprite");c.setStartPosition(1,1);c.setGap(1);c.setIconSize(20,20);b.registIcon(0,1,"icon_errorclose");
f.define(c,"nodata");c.setStartPosition(0,0);c.setGap(0);c.setIconSize(200,200);b.registIcon(0,1,"icon_nodata");f.define(c,"publish-resource-sprite");c.setStartPosition(1,1);c.setGap(1);c.setIconSize(16,16);b.registIcon(0,1,"btn-edit");b.registIcon(1,1,"btn-edit-on");b.registIcon(0,3,"btn-refresh");b.registIcon(1,3,"btn-refresh-on")}}})();
//qingVersionTag: 20250324