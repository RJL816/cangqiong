var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(S,va,ka){S instanceof String&&(S=String(S));for(var wa=S.length,Ca=0;Ca<wa;Ca++){var Pa=S[Ca];if(va.call(ka,Pa,Ca,S))return{i:Ca,v:Pa}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(S,va,ka){if(S==Array.prototype||S==Object.prototype)return S;S[va]=ka.value;return S};$jscomp.getGlobal=function(S){S=["object"==typeof globalThis&&globalThis,S,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var va=0;va<S.length;++va){var ka=S[va];if(ka&&ka.Math==Math)return ka}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(S,va){var ka=$jscomp.propertyToPolyfillSymbol[va];if(null==ka)return S[va];ka=S[ka];return void 0!==ka?ka:S[va]};
$jscomp.polyfill=function(S,va,ka,wa){va&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(S,va,ka,wa):$jscomp.polyfillUnisolated(S,va,ka,wa))};$jscomp.polyfillUnisolated=function(S,va,ka,wa){ka=$jscomp.global;S=S.split(".");for(wa=0;wa<S.length-1;wa++){var Ca=S[wa];if(!(Ca in ka))return;ka=ka[Ca]}S=S[S.length-1];wa=ka[S];va=va(wa);va!=wa&&null!=va&&$jscomp.defineProperty(ka,S,{configurable:!0,writable:!0,value:va})};
$jscomp.polyfillIsolated=function(S,va,ka,wa){var Ca=S.split(".");S=1===Ca.length;wa=Ca[0];wa=!S&&wa in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Pa=0;Pa<Ca.length-1;Pa++){var rb=Ca[Pa];if(!(rb in wa))return;wa=wa[rb]}Ca=Ca[Ca.length-1];ka=$jscomp.IS_SYMBOL_NATIVE&&"es6"===ka?wa[Ca]:null;va=va(ka);null!=va&&(S?$jscomp.defineProperty($jscomp.polyfills,Ca,{configurable:!0,writable:!0,value:va}):va!==ka&&(void 0===$jscomp.propertyToPolyfillSymbol[Ca]&&(ka=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[Ca]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(Ca):$jscomp.POLYFILL_PREFIX+ka+"$"+Ca),$jscomp.defineProperty(wa,$jscomp.propertyToPolyfillSymbol[Ca],{configurable:!0,writable:!0,value:va})))};$jscomp.polyfill("Array.prototype.find",function(S){return S?S:function(va,ka){return $jscomp.findInternal(this,va,ka).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(S){var va=0;return function(){return va<S.length?{done:!1,value:S[va++]}:{done:!0}}};$jscomp.arrayIterator=function(S){return{next:$jscomp.arrayIteratorImpl(S)}};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(S){if(S)return S;var va=function(Pa,rb){this.$jscomp$symbol$id_=Pa;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:rb})};va.prototype.toString=function(){return this.$jscomp$symbol$id_};var ka="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",wa=0,Ca=function(Pa){if(this instanceof Ca)throw new TypeError("Symbol is not a constructor");return new va(ka+(Pa||"")+"_"+wa++,Pa)};return Ca},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(S){if(S)return S;S=Symbol("Symbol.iterator");for(var va="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ka=0;ka<va.length;ka++){var wa=$jscomp.global[va[ka]];"function"===typeof wa&&"function"!=typeof wa.prototype[S]&&$jscomp.defineProperty(wa.prototype,S,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return S},
"es6","es3");$jscomp.iteratorPrototype=function(S){S={next:S};S[Symbol.iterator]=function(){return this};return S};$jscomp.iteratorFromArray=function(S,va){S instanceof String&&(S+="");var ka=0,wa=!1,Ca={next:function(){if(!wa&&ka<S.length){var Pa=ka++;return{value:va(Pa,S[Pa]),done:!1}}wa=!0;return{done:!0,value:void 0}}};Ca[Symbol.iterator]=function(){return Ca};return Ca};
$jscomp.polyfill("Array.prototype.keys",function(S){return S?S:function(){return $jscomp.iteratorFromArray(this,function(va){return va})}},"es6","es3");
(function(){function S(){var O=this,F,K,m,T,ca,aa,ea,ya,mb,pb,fa,cb,hb,c,Nb,sb=!1,na=!1,Ob=[];this.copy=function(){var v=new S;v.setModelId(F);v.setNumber(K);v.setModelSetId(m);v.setGroupId(T);v.setModelName(ca);v.setModelType(aa);v.setLockUserName(ea);v.setDesc(ya);v.setCreator(mb);v.setCreateTime(pb);v.setDisplayCreateTime(fa);v.setModifier(cb);v.setModifyTime(hb);v.setDisplayModifyTime(c);v.setDeployed(Nb);return v};this.getDisplayCreateTime=function(){return fa};this.setDisplayCreateTime=function(v){fa=
v};this.getDisplayModifyTime=function(){return c};this.setDisplayModifyTime=function(v){c=v};this.setModelId=function(v){F=v};this.getModelId=function(){return F};this.setNumber=function(v){K=v};this.getNumber=function(){return K};this.setModelSetId=function(v){m=v};this.getModelSetId=function(){return m};this.setGroupId=function(v){T=v};this.getGroupId=function(){return T};this.setModelName=function(v){ca=v};this.getModelName=function(){return ca};this.setModelType=function(v){aa=v};this.getModelType=
function(){return aa};this.setLockUserName=function(v){ea=v};this.getLockUserName=function(){return ea};this.setDesc=function(v){ya=v};this.getDesc=function(){return ya};this.setCreator=function(v){mb=v};this.getCreator=function(){return mb};this.setCreateTime=function(v){pb=v};this.getCreateTime=function(){return pb};this.setModifier=function(v){cb=v};this.getModifier=function(){return cb};this.setModifyTime=function(v){hb=v};this.getModifyTime=function(){return hb};this.setDeployed=function(v){Nb=
v};this.getDeployed=function(){return Nb};this.setSelected=function(v){sb=v};this.getSelected=function(){return sb};this.setSpreadState=function(v){na=v};this.isSpreadState=function(){return na};this.getMetricItems=function(){return Ob};this.fromJsonObject=function(v){O.setModelId(v.modelId);O.setNumber(v.number);O.setModelSetId(v.modelSetId);O.setGroupId(v.groupId);O.setModelName(v.modelName);O.setModelType(v.modelType);O.setDesc(v.desc);var L=v.creatorId===S.PresetID;O.setCreator(v.creator);O.setCreateTime(v.createTime);
O.setDisplayCreateTime(v.displayCreateTime);O.setModifier(L?"":v.modifier);O.setModifyTime(L?null:v.modifyTime);O.setDisplayModifyTime(L?null:v.displayModifyTime);O.setDeployed(v.deployed);O.setLockUserName(L?"":v.lockUserName);if(v=v.metricsList)for(L=0;L<v.length;L++){var U=v[L],R=new va;R.fromJsonObject(U);U=new ka;U.setMetric(R);U.setModelId(F);U.setModelName(ca);Ob.push(U)}};this.toJsonObject=function(){var v={};v.modelId=F;v.number=K;v.modelSetId=m;v.groupId=T;v.modelName=ca;v.modelType=aa;
v.desc=ya;v.creator=mb;v.createTime=pb;v.displayCreateTime=fa;v.modifier=cb;v.modifyTime=hb;v.displayModifyTime=c;v.deployed=Nb;v.selected=sb;v.lockUserName=ea;return v}}function va(){var O,F,K;this.setId=function(m){O=m};this.getId=function(){return O};this.setName=function(m){F=m};this.getName=function(){return F};this.setDesc=function(m){K=m};this.getDesc=function(){return K};this.fromJsonObject=function(m){O=m.id;F=m.name;K=m.desc}}function ka(){var O,F,K,m,T=!1;this.setMetric=function(ca){O=
ca};this.getMetric=function(){return O};this.getId=function(){return O.getId()};this.setModelId=function(ca){F=ca};this.getModelId=function(){return F};this.setNumber=function(ca){K=ca};this.getNumber=function(){return K};this.setModelName=function(ca){m=ca};this.getModelName=function(){return m};this.getName=function(){return O.getName()};this.getModelType=function(){return null};this.getLockUserName=function(){return null};this.getDesc=function(){return O.getDesc()};this.getCreator=function(){return null};
this.getCreateTime=function(){return null};this.getModifier=function(){return null};this.getModifyTime=function(){return null};this.getDeployed=function(){return null};this.setSpreadState=function(ca){T=ca};this.isSpreadState=function(){return T}}function wa(){var O=this,F,K,m=[],T=[],ca=[],aa=[];this.setSuccess=function(ea){F=ea};this.isSuccess=function(){return F};this.setCode=function(ea){K=ea};this.getCode=function(){return K};this.getArrModelCheckPrompts=function(){return m};this.getArrLockCheckPrompts=
function(){return T};this.getArrModelDeletePrompts=function(){return ca};this.getArrSimplePrompts=function(){return aa};this.fromJsonObject=function(ea){O.setSuccess(ea.success);O.setCode(ea.code);if(ea.prompts){var ya=ea.prompts[Ca.MODEL_CHECK],mb=ea.prompts[Ca.LOCK_CHECK],pb=ea.prompts[Ca.MODEL_DELETE];if(ya&&0<ya.length)for(var fa=0;fa<ya.length;fa++){var cb=new Ca;cb.fromJsonObject(ya[fa]);m.push(cb)}if(mb&&0<mb.length)for(fa=0;fa<mb.length;fa++)cb=new Ca,cb.fromJsonObject(mb[fa]),T.push(cb);
if(pb&&0<pb.length)for(fa=0;fa<pb.length;fa++)cb=new Ca,cb.fromJsonObject(pb[fa]),ca.push(cb)}if(ea.simplePrompts&&(ea=ea.simplePrompts)&&0<ea.length)for(fa=0;fa<ea.length;fa++)cb=new Ca,cb.fromJsonObject(ea[fa]),aa.push(cb)}}function Ca(){var O=this,F,K,m,T,ca,aa;this.setModelId=function(ea){F=ea};this.getModelId=function(){return F};this.setModelName=function(ea){K=ea};this.getModelName=function(){return K};this.setPromptCode=function(ea){ca=ea};this.getPromptCode=function(){return ca};this.setPath=
function(ea){m=ea};this.getPath=function(){return m};this.setLockUserName=function(ea){T=ea};this.getLockUserName=function(){return T};this.setArrPrompts=function(ea){aa=ea};this.getArrPrompts=function(){return aa};this.getPromptStr=function(ea,ya){var mb="";if(aa)for(var pb=0;pb<aa.length;pb++)ya&&(mb+=pb+1),ya&&(mb+="\u3001"),mb+=aa[pb],mb+="\uff1b",ea&&(mb+="\r\n");return mb};this.fromJsonObject=function(ea){O.setModelId(ea.modelId);O.setModelName(ea.modelName);O.setPath(ea.path);O.setLockUserName(ea.lockUserName);
O.setPromptCode(ea.PromptCode);O.setArrPrompts(ea.invalidPrompt)}}function Pa(){var O,F,K,m=!1,T=!1,ca;this.setId=function(aa){ca=aa};this.getId=function(){return ca};this.setMatch=function(aa){m=aa};this.getMatch=function(){return m};this.setName=function(aa){O=aa};this.getName=function(){return O};this.setDisplayName=function(aa){F=aa};this.getDisplayName=function(){return F};this.setParentNode=function(aa){K=aa};this.getParentNode=function(){return K};this.setChecked=function(aa){T=aa};this.isChecked=
function(){return T};this.check=function(aa){};this.getSubNodeLevel=function(){for(var aa=-1,ea=K;ea;)aa++,ea=ea.getParentNode();return aa}}function rb(){Pa.call(this);var O=this,F=[],K=!0;this.setChildren=function(m){F=m};this.getChildren=function(){return F};this.setExpanded=function(m){K=m};this.isExpanded=function(){return K};this.check=function(m,T){if(0!==F.length&&m!==O.isChecked()){O.setChecked(m);for(var ca=0;ca<F.length;ca++)F[ca].check(m,T)}};this.toJsonObject=function(){var m={};m.children=
F;return m};this.fromJsonObject=function(m,T){O.setName(m.name);O.setDisplayName(m.displayName);O.setId(m.id);if(m=m.children)for(var ca=0;ca<m.length;ca++){var aa=m[ca];if(aa.type){var ea=new Ba;ea.fromJsonObject(aa);ea.setParentNode(O);F.push(ea);T&&ea.setCommentInfo(T)}else ea=new rb,ea.fromJsonObject(aa),ea.setParentNode(O),F.push(ea)}}}function Ba(){Pa.call(this);var O=this,F,K,m,T;this.setUserSql=function(ca){T=ca};this.getUserSql=function(){return T};this.setCommentInfo=function(ca){K=ca};
this.getCommentInfo=function(){return K};this.setType=function(ca){F=ca};this.getType=function(){return F};this.setErrorMessage=function(ca){m=ca};this.getErrorMessage=function(){return m};this.fromJsonObject=function(ca){O.setType(ca.type);O.setName(ca.name);O.setDisplayName(ca.displayName);O.setCommentInfo(ca.commentInfo);O.setId(ca.id)};this.check=function(ca,aa){ca!==O.isChecked()&&(O.setChecked(ca),aa&&aa(O.getParentNode()))}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&
(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.mainpage&&(com.kingdee.bos.qing.modeler.mainpage={});"undefined"==typeof com.kingdee.bos.qing.modeler.mainpage.model&&(com.kingdee.bos.qing.modeler.mainpage.model={});var pa=com.kingdee.bos.qing.modeler.mainpage.model;pa.ModelGroup=
function(){var O=this,F,K,m,T,ca;this.setModelGroupId=function(aa){F=aa};this.getModelGroupId=function(){return F};this.setModelSetId=function(aa){K=aa};this.getModelSetId=function(){return K};this.setModelGroupName=function(aa){m=aa};this.getModelGroupName=function(){return m};this.setParentId=function(aa){T=aa};this.getParentId=function(){return T};this.setSeq=function(aa){ca=aa};this.getSeq=function(){return ca};this.fromJsonObject=function(aa){O.setModelGroupId(aa.modelGroupId);O.setModelSetId(aa.modelSetId);
O.setModelGroupName(aa.modelGroupName);O.setParentId(aa.parentId);O.setSeq(aa.seq)};this.toJsonObject=function(){var aa={};aa.modelGroupId=F;aa.modelSetId=K;aa.modelGroupName=m;aa.parentId=T;aa.seq=ca;return aa}};pa.Model=S;pa.DeployResponse=wa;pa.DeployPrompt=Ca;pa.MetricItem=ka;pa.DeployFolderNode=rb;pa.DeployLeafNode=Ba;var Za=com.kingdee.bos.qing.framework.common.MultilanguageManager.createPackageAccessor(pa);S.createInstance=function(O){if(O){var F=new S;F.fromJsonObject(O);return F}};S.PresetID=
"100000";pa.ModelDeployStatus=new function(){this.deployStatusTransformText=function(O){switch(O){case pa.ModelDeployStatus.NONE_DEPLOYED:return Za.get("notDeployed","\u672a\u90e8\u7f72");case pa.ModelDeployStatus.DEPLOYED:return Za.get("deployed","\u5df2\u90e8\u7f72");case pa.ModelDeployStatus.DEPLOYED_UPDATE:return Za.get("deployedUpdate","\u90e8\u7f72\u540e\u66f4\u6539")}return null}};pa.ModelDeployStatus.NONE_DEPLOYED="0";pa.ModelDeployStatus.DEPLOYED="1";pa.ModelDeployStatus.DEPLOYED_UPDATE=
"2";wa.FAILED_MODEL_CHECK=1;wa.FAILED_LOCK_CHECK=2;wa.FAILED_MODEL_LOCK_CHECK=wa.FAILED_MODEL_CHECK|wa.FAILED_LOCK_CHECK;wa.FAILED_MODEL_DELETE=4;wa.FAILED_MODEL_LOCK_DELETE=wa.FAILED_MODEL_DELETE|wa.FAILED_MODEL_CHECK;wa.FAILED_MODEL_DELETE_CHECK=wa.FAILED_MODEL_DELETE|wa.FAILED_LOCK_CHECK;wa.FAILED_MODEL_LOCK_DELETE_CHECK=wa.FAILED_MODEL_CHECK|wa.FAILED_LOCK_CHECK|wa.FAILED_MODEL_DELETE;Ca.MODEL_CHECK=1;Ca.LOCK_CHECK=2;Ca.MODEL_DELETE=4})();(function(){function S(){rb.call(this);var pa;this.getRemoteUrl=function(){return pa};this.setRemoteUrl=function(Za){pa=Za}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.mainpage&&(com.kingdee.bos.qing.modeler.mainpage=
{});"undefined"==typeof com.kingdee.bos.qing.modeler.mainpage.common&&(com.kingdee.bos.qing.modeler.mainpage.common={});var va=com.kingdee.bos.qing.modeler.mainpage.common;va.Facade=function(pa,Za,O,F){wa.call(this,pa,Za,O,F);var K=this.protectedMethod;this.listAllGroupAndModel=function(m){K.remote("listAllGroupAndModel",{modelSetId:m})};this.createModelGroup=function(m){m={modelGroup:JSON.stringify(m.toJsonObject())};K.remote("createModelGroup",m)};this.editModelGroup=function(m){m={modelGroup:JSON.stringify(m.toJsonObject())};
K.remote("editModelGroup",m)};this.deleteModelGroup=function(m,T){K.remote("deleteModelGroup",{modelSetId:m,modelGroupId:T})};this.updateGroupSequence=function(m){m={modelGroupList:JSON.stringify(m)};K.remote("updateGroupSequence",m)};this.listGroupAllModel=function(m,T){K.remote("listGroupAllModel",{modelSetId:m,targetGroupId:T})};this.listAllModels=function(){K.remote("listAllModels",{})};this.createModel=function(m,T){m={fromPageClientId:T,model:JSON.stringify(m.toJsonObject())};K.remote("createModel",
m)};this.editModel=function(m){m={model:JSON.stringify(m.toJsonObject())};K.remote("editModel",m)};this.checkModelReferRelation=function(m,T){m={modelSetId:m,modelList:JSON.stringify(T)};K.remote("checkModelReferRelation",m)};this.deleteModel=function(m,T,ca){m={modelSetId:m,fromPageClientId:ca,modelList:JSON.stringify(T)};K.remote("deleteModel",m)};this.copyModel=function(m,T,ca,aa,ea){K.remote("copyModel",{modelId:m,modelSetId:T,number:ca,copyModelName:aa,targetGroupId:ea})};this.moveModel=function(m,
T,ca){m={modelSetId:m,modelList:JSON.stringify(T),targetGroupId:ca};K.remote("moveModel",m)};this.getAllModelGroupAndModelForExport=function(m){K.remote("getAllModelGroupAndModelForExport",{modelSetId:m})};this.confirmExportModelAndGroup=function(m,T){m={modelSetId:m,modelList:JSON.stringify(T.modelList)};K.remote("confirmExportModelAndGroup",m)};this.getExportedData=function(m){var T=ka.formatDate("yyyyMMdd_HHmmss");Pa.downloadFile("Qing-"+T+".qing-md",m)};this.getEnableImportModelAndGroup=function(m){K.remote("getEnableImportModelAndGroup",
{fileName:m})};this.importSelectedModel=function(m,T,ca,aa,ea,ya,mb){m={modelSetId:m,fileName:ca,modelList:JSON.stringify({importModels:aa}),sourceStrategy:ea,firstTimeImport:ya,cacheIdKey:mb,paramPathPrefix:T};K.remote("importSelectedModel",m)};this.handleConflictForImportModel=function(m,T){m={fileName:m,ModelList:JSON.stringify({exportThemes:T})};K.remote("handleConflictForImportModel",m)};this.isCurrentUserInQingAdminRole=function(){K.remote("isCurrentUserInQingAdminRole",{})};this.firstTimeCreateModel=
function(m,T){m={modelGroup:JSON.stringify(m.toJsonObject()),model:JSON.stringify(T.toJsonObject())};K.remote("firstTimeCreateModel",m)};this.loadDeployModelerForUserOperation=function(m){m={modelIds:JSON.stringify(m)};K.remote("loadDeployModelerForUserOperation",m)};this.listUnDeployGroupAndModel=function(m){K.remote("listUnDeployGroupAndModel",{modelSetId:m})};this.deployModel=function(m,T,ca){m={modelSetId:m,desc:T,modelIds:JSON.stringify(ca)};K.remote("deployModel",m)};this.loadRefDeployModelIds=
function(m){K.remote("loadRefDeployModelIds",{modelId:m})};this.batchLoadRefDeployModelIds=function(m){m={modelIds:JSON.stringify(m)};K.remote("batchLoadRefDeployModelIds",m)};this.needDeployRefModel=function(m){K.remote("needDeployRefModel",{modelId:m})};this.loadNeedDeployRefModel=function(m){K.remote("loadNeedDeployRefModel",{modelId:m})};this.deployModelForModelSetSource=function(m,T,ca,aa){m={modelId:T,modelSetId:m,desc:ca,needDeployModelIds:JSON.stringify(aa)};K.remote("deployModelForModelSetSource",
m)};this.checkModelIsExist=function(m){K.remote("checkModelIsExist",{modelId:m})};this.checkModelSetIsExist=function(m){K.remote("checkModelSetIsExist",{modelSetId:m})};this.loadModelerInfo=function(m){K.remote("loadModelerInfo",{modelId:m})};this.checkModelCycleReference=function(m){K.remote("checkModelCycleReference",{modelId:m})};this.batchCheckModelCycleReference=function(m){m={modelIds:JSON.stringify(m)};K.remote("batchCheckModelCycleReference",m)};this.getDataSysVars=function(){K.remote("getDataSysVars",
{})}};va.RemoteImpl=S;var ka,wa,Ca,Pa,rb;(function(){var pa=com.kingdee.bos.qing.common;ka=pa.Util;pa=com.kingdee.bos.qing.framework.common;wa=pa.AbstractFacade;Ca=pa.AbstractIcons;rb=pa.AbstractRemoteCall;Pa=pa.RemoteFramework;pa.MultilanguageManager.createPackageAccessor(va)})();va.MyIcons=new function(){Ca.call(this);var pa=this.protectedMethod;this.protectedInit=function(K,m){K=com.kingdee.bos.qing.modeler.modelset.ComboIcon;if(!K)throw Error("com.kingdee.bos.qing.modeler.modelset.ComboIcon not found.");
K.define(m,"create-right-arrows.svg");F(0,0,"create-right-arrows");K.define(m,"btn-down-arrows.svg");F(0,0,"btn-down-arrows");K.define(m,"model-common");m.setGap(1);m.setStartPosition(-3,-1);m.setIconSize(64,64);F(0,3,"metric-model-icon");F(0,2,"data-table-model-icon");F(0,1,"entity-model-icon");F(0,0,"relation-model-icon");m.setGap(1);m.setStartPosition(0,116);m.setIconSize(16,16);F(0,0,"add-on");m.setStartPosition(104,285);m.setIconSize(16,16);O(0,0,"add_subDir");O(0,1,"add_dir");O(0,2,"move_up");
O(0,3,"move_down");m.setGap(1);m.setStartPosition(0,117);m.setIconSize(16,16);Za(0,0,"add");Za(0,1,"btn-delete");Za(0,2,"btn-edit");Za(0,5,"preview");m.setGap(1);m.setStartPosition(4,0);m.setIconSize(16,16);F(6,4,"model-group-item-header-expand");m.setStartPosition(4,-3);F(5,4,"model-group-item-header-expand-ed");m.setStartPosition(4,-5);F(5,0,"icon-expanded");F(6,0,"icon-expanded_hover");m.setStartPosition(6,-5);F(5,1,"icon-collapsed");F(6,1,"icon-collapsed_hover");m.setGap(1);m.setStartPosition(9,
-3);m.setIconSize(16,16);F(5,5,"data-table-model-icon-small");m.setStartPosition(12,-3);F(5,6,"relation-model-icon-small");m.setStartPosition(11,-3);F(5,7,"entity-model-icon-small");F(5,8,"metric-model-icon-small");F(5,9,"metric-icon-small");m.setStartPosition(108,105);m.setIconSize(48,48);F(0,2,"data-table-model-icon-medium");F(0,0,"relation-model-icon-medium");F(0,1,"entity-model-icon-medium");F(0,3,"metric-model-icon-medium");m.setStartPosition(170,152);m.setIconSize(36,36);F(0,2,"data-table-model-icon-tips");
F(0,0,"relation-model-icon-tips");F(0,1,"entity-model-icon-tips");F(0,3,"metric-model-icon-tips");m.setStartPosition(171,188);m.setIconSize(24,24);F(0,0,"relation-model-icon-middle");F(0,1,"entity-model-icon-middle");F(0,2,"data-table-model-icon-middle");F(0,3,"metric-model-icon-middle");m.setStartPosition(0,151);m.setIconSize(170,98);F(0,0,"icon-empty");m.setStartPosition(56,337);m.setIconSize(50,50);F(0,0,"icon-preset-big");m.setStartPosition(0,0);m.setIconSize(20,20);K.define(m,"card-view.svg");
F(0,0,"card-view");K.define(m,"card-view-click.svg");F(0,0,"card-view-on");K.define(m,"list-view.svg");F(0,0,"list-view");K.define(m,"list-view-click.svg");F(0,0,"list-view-on");m.setStartPosition(1,1);m.setIconSize(16,16);F(0,0,"icon_search");F(0,1,"icon_search_hover");m.setStartPosition(0,0);m.setIconSize(168,96);K.define(m,"msg-success.png");F(0,0,"msg-success");K.define(m,"deploy");m.setGap(1);m.setStartPosition(1,72);m.setIconSize(14,14);F(0,0,"delete_small")};var Za=function(K,m,T){F(K+1,m,
T);F(K,m,T+"_hover")},O=function(K,m,T){F(K,m,T);F(K+1,m,T+"_hover")},F=function(K,m,T){pa.registIcon(K,m,T)}};va.Integration=new function(){var pa=new S,Za,O,F,K,m,T,ca,aa,ea;this.setParamPathPrefix=function(ya){Za=ya};this.getParamPathPrefix=function(){return Za};this.getRemoteImpl=function(){return pa};this.setRemoteUrl=function(ya){pa.setRemoteUrl(ya)};this.setModelDesignerEntrance=function(ya){O=ya};this.getModelDesignerEntrance=function(){return O};this.setDataSourceManageEntrance=function(ya){F=
ya};this.getDataSourceManageEntrance=function(){return F};this.setDeployEntrance=function(ya){K=ya};this.getDeployEntrance=function(){return K};this.setBatchDeployEntrance=function(ya){m=ya};this.getBatchDeployEntrance=function(){return m};this.setDeployManageEntrance=function(ya){aa=ya};this.getDeployManageEntrance=function(){return aa};this.setDataAuthorityEntrance=function(ya){ea=ya};this.getDataAuthorityEntrance=function(){return ea};this.setFunGetDeployRemoteImpl=function(ya){T=ya};this.getFunGetDeployRemoteImpl=
function(){return T};this.setFunGetDesignerRemoteImpl=function(ya){ca=ya};this.getFunGetDesignerRemoteImpl=function(){return ca()}};var Ba=new function(){var pa;this.hookCollector=function(Za){pa=Za};this.occur=function(Za,O){try{pa&&pa(Za,O)}catch(F){window.console&&console.warn(F)}};this.getModelType=function(Za){var O=com.kingdee.bos.qing.modeler.common.model.ModelType;switch(Za){case O.DATA_TABLE_MODEL:return Ba.MODELTYPE_DATATABLE;case O.ENTITY_MODEL:return Ba.MODELTYPE_ENTIY;case O.RELATION_MODEL:return Ba.MODELTYPE_RELATION;
case O.METRICS_MODEL:return Ba.MODELTYPE_METRICS}};this.getModelShowMethod=function(Za){return Za?Ba.MODEL_SHOW_METHOD_LIST:Ba.MODEL_SHOW_METHOD_CARD};this.getEnterDataAuthManege=function(Za){return Za?Ba.ENTER_DATA_AUTH_MANAGE_MAIN_PAGE:Ba.ENTER_DATA_AUTH_MANAGE_AFTER_DEPLOY};this.getContainChildrenStatus=function(Za){return Za?Ba.CONTAIN:Ba.NOT_CONTAIN}};Ba.MODEL_TYPE="model-type";Ba.MODEL_SHOW_METHOD="model-show-method";Ba.DEPLOY_METHOD="deploy-method";Ba.ENTER_DATA_AUTH_MANAGE="enter-data-auth-manage";
Ba.MODEL_GROUP_LEVEL="model-group-level";Ba.CONTAIN_CHILDREN_MODEL_GROUP="contain-children-model-group";Ba.BUTTON_TYPE="button-type";Ba.DATATABLE_MODEL_TRANSFORM_NODE_TYPE="datatable-model-transform-node-type";Ba.MODELTYPE_DATATABLE="\u6570\u636e\u8868\u6a21\u578b";Ba.MODELTYPE_ENTIY="\u5b9e\u4f53\u6a21\u578b";Ba.MODELTYPE_RELATION="\u5173\u7cfb\u6a21\u578b";Ba.MODELTYPE_METRICS="\u6307\u6807\u6a21\u578b";Ba.MODEL_SHOW_METHOD_LIST="\u5217\u8868";Ba.MODEL_SHOW_METHOD_CARD="\u5361\u7247";Ba.DEPLOY_METHOD_SINGLE=
"\u5355\u4e2a\u90e8\u7f72";Ba.DEPLOY_METHOD_BATCH="\u6279\u91cf\u90e8\u7f72";Ba.ENTER_DATA_AUTH_MANAGE_AFTER_DEPLOY="\u6210\u529f\u90e8\u7f72\u540e\u70b9\u51fb\u8df3\u8f6c\u8fdb\u5165";Ba.ENTER_DATA_AUTH_MANAGE_MAIN_PAGE="\u901a\u8fc7\u4e3b\u754c\u9762\u6570\u636e\u6743\u9650\u6309\u94ae\u8fdb\u5165";Ba.CONTAIN="\u52fe\u9009";Ba.NOT_CONTAIN="\u4e0d\u52fe\u9009";Ba.DELETE="\u5220\u9664";Ba.REFRESH="\u5237\u65b0";Ba.MOVE="\u79fb\u52a8";Ba.COPY="\u590d\u5236";Ba.IMPORT="\u5bfc\u5165";Ba.EXPORT="\u5bfc\u51fa";
Ba.DEPLOY_MANAGE="\u90e8\u7f72\u7ba1\u7406";Ba.SOURCE_MANAGE="\u6570\u636e\u6e90\u7ba1\u7406";va.UserOperationReporter=Ba})();(function(){function S(){pb.call(this);var v=this,L=this.protectedMethod,U,R,V,da,C,ia,N,xa;this.setGlobal=function(ua){U=ua};this.setRootNode=function(ua){V=ua};this.setModelSetId=function(ua){N=ua};this.setSelectModelIds=function(ua){xa=ua};this.setMessageCurtain=function(ua){da=ua};this.showExportDialog=function(){v.setSize(640,480);v.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);L.setTitle(fa.get("exportModel","\u5bfc\u51fa\u6a21\u578b"));L.setContentPaneCreator(ta);L.setClosingChecker(v.isValidToAccepted,
!0);L.setClosingAction(ma);v.showDialog()};var ma=function(ua){if(ua){ua=R.getCheckedModelNodes();var ha={},Ha=[];for(i=0;i<ua.length;i++)Ha.push(ua[i].getId());ha[S.MODEL_LIST]=Ha;za(ha)}},ta=function(){var ua=$("<div>"),ha=ua.append;C=new mb;C.addSearchListener(Qa);C.setSearchListenerDelay(400);C.setPlaceholder(fa.get("searchModelOrNumber","\u641c\u7d22\u6a21\u578b\u540d\u79f0/\u7f16\u7801"));C.setShowSearchIcon(!0);var Ha=C.getJqUi();Ha.addClass("model-imexport-search-box");ha.call(ua,Ha);ha=xa&&
0<xa.length;Ha=ua.append;var Ma=new c;Ma.setChecked(ha);Ma.addCheckedListener(Da);Ma.setText(fa.get("showOnlyChecked","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));Ma=Ma.getJqUi();Ma.addClass("model-export-show-only-checked-box");cb.layoutCtrl(Ma,250,2,200,23);Ha.call(ua,Ma);ab();R=new va(V);Ha=R.getJqUi();ua.append(Ha);ha&&(R.setShowOnlyChecked(!0),R.searchKey(ia));return ua},X=function(){for(var ua=[].concat(xa),ha=function(Ma,xb){if(Ma instanceof pa){var ra=Ma.getChildren();if(ra&&0<ra.length)for(Ma=
0;Ma<ra.length;Ma++)ha(ra[Ma],xb)}else if(Ma.getId()===xb&&(xb=Ma.getRelativeIds())&&0<xb.length)for(Ma=0;Ma<xb.length;Ma++)ra=xb[Ma],-1===ua.indexOf(ra)&&(ua.push(ra),ha(V,ra))},Ha=0;Ha<xa.length;Ha++)ha(V,xa[Ha]);xa=ua},ab=function(){if(xa&&0!==xa.length){X();var ua=function(ha){if(ha instanceof pa){if((ha=ha.getChildren())&&0<ha.length)for(var Ha=0;Ha<ha.length;Ha++)ua(ha[Ha])}else for(Ha=0;Ha<xa.length;Ha++)if(ha.getId()===xa[Ha]){ha.setChecked(!0);break}};ua(V)}},Qa=function(ua){ia=C.getText().trim();
R.searchKey(ia)},Da=function(ua,ha){ha&&(R.setShowOnlyChecked(ua.isChecked()),R.searchKey(ia))};this.isValidToAccepted=function(ua){0===R.getCheckedModelNodes().length?(L.getMessageCurtain().showPrompt(fa.get("selectNone","\u672a\u9009\u4e2d\u6a21\u578b\u3002")),ua(!1)):ua(!0)};var za=function(ua){U.createFacade(function(ha){U.createFacade().getExportedData(ha)},function(ha,Ha){return 20009002===ha?(da.showPrompt(fa.get("publicSourceException","\u5bfc\u51fa\u5931\u8d25\uff0c\u516c\u5171\u6570\u636e\u6e90\u5f02\u5e38\u3002"),
2E3),!0):20009001===ha?(da.showPrompt(fa.get("invalidPermissionException","\u6743\u9650\u68c0\u67e5\u5931\u8d25\u3002"),2E3),!0):20009008===ha?(ha=fa.get("exportModelCorruptionException","\u5bfc\u51fa\u6a21\u578b\u201c#1\u201d\u5931\u8d25\uff0c\u6a21\u578b\u6570\u636e\u635f\u574f\u6216\u6570\u636e\u7248\u672c\u4e0d\u517c\u5bb9\u3002").replace("#1",Ha),da.showPrompt(ha,2E3),!0):!1}).confirmExportModelAndGroup(N,ua)}}function va(v){function L(){KTDefaultCellRender.call(this,ta);var la=this;this.paintCellUI=
function(ja,sa){var B=la.getCurrentRow().getUserObject(),db=B.getName();ja=$("<div>");ja.addClass("model-export-area-list-item");var Na=new c,kb=Na.getJqUi(),Cb=$("<div>");kb.addClass("model-export-area-list-item-checkbox");Cb.addClass("model-export-area-list-item-text");ja.append(kb);ja.append(Cb);Na.setChecked(B.isChecked());Na.setUserObject(B);Na.addCheckedListener(xb);xa[B.getId()]=Na;B instanceof pa?Cb.text(db):(ba(Cb,ma,db),db=$("<span>"),db.css("color","#c0c0c0"),db.text(" ("),Na=$("<span>"),
Na.css("color","#c0c0c0"),Na.text(")"),kb=$("<span>"),ba(kb,ma,B.getNumber(),"#c0c0c0"),db.appendTo(Cb),kb.appendTo(Cb),Na.appendTo(Cb));B instanceof pa||(Cb.addClass("model-export-model-name-label"),ja.append(Ob.createIcon(B.getModelType(),"model-export-model-icon")));sa?(sa=$(sa),sa.css("overflow","visible"),ja.appendTo(sa)):ja.appendTo(jqDiv);cb.layoutCtrlWithLRTB(ja,0,0,null,0,0,null)};var ba=function(ja,sa,B,db){if(sa&&B){sa=sa.toUpperCase();var Na=B.toUpperCase(),kb=Na.split(sa),Cb=sa.length,
Eb;for(Eb in kb){var nb=Na.indexOf(kb[Eb]),Mb=B.substr(tb,kb[Eb].length);nb+=kb[Eb].length;var Ua=Na.length-nb;Na=Na.substr(nb,Ua);B=B.substr(nb,Ua);nb=$("<span>");nb.text(Mb);db&&nb.css("color",db);nb.appendTo(ja);if(Eb!==kb.length-1&&1<kb.length){var tb=Na.indexOf(sa);Mb=B.substr(tb,Cb);nb=tb+Cb;Ua=Na.length-nb;Na=Na.substr(nb,Ua);B=B.substr(nb,Ua);nb=$("<span>");nb.text(Mb);nb.css("color","red");nb.clone().appendTo(ja)}}}else ja.text(B),db&&ja.css("color",db)}}var U=this,R,V=[],da=[],C=[],ia=!1,
N=!1,xa,ma,ta,X,ab,Qa;this.setShowOnlyChecked=function(la){N=la};this.getCheckedModelNodes=function(){var la,ba=[];for(la=0;la<C.length;la++){var ja=C[la];ja.isChecked()&&ba.push(ja)}return ba};this.getJqUi=function(){if(!R){Da();for(var la=0;la<C.length;la++){var ba=C[la],ja=ba.getRelativeIds();if(ja&&0<ja.length){for(var sa=[],B=0;B<ja.length;B++)for(var db=ja[B],Na=0;Na<C.length;Na++){var kb=C[Na];db===kb.getId()&&sa.push(kb)}ba.setRelativeNodes(sa)}}R=$("<div>");R.addClass("model-export-area");
R.addClass("model-export-tree-selection-area");ab=$("<div>");ab.addClass("model-export-tree-selection-area-checked-prompt");ab.css("color","#666");cb.layoutCtrlWithLRTB(ab,0,null,200,0,null,23);ab.prependTo(R);X=za();R.append(X);Ha();Ma()}return R};var Da=function(){var la=function(sa){V.push(sa);if(sa instanceof O||sa instanceof F||sa instanceof K||sa instanceof m)C.push(sa);else if(da.push(sa),(sa=sa.getChildren())&&0<sa.length)for(var B=0;B<sa.length;B++)la(sa[B])},ba=v.getChildren();if(ba&&0<
ba.length)for(var ja=0;ja<ba.length;ja++)la(ba[ja])},za=function(){ta=new KTable;var la=$(ta.getUI());la.children().css("overflow-x","hidden");var ba=new L;ta.setCellRender(ba);ta.setSyncUIWhenModelChanged(!1);ta.addTreeExpandListener(ua);ta.addColumn().setWidth(400);cb.layoutCtrlWithLRTB(la,0,0,null,23,0,null);return la},ua=function(la,ba){(la=ta.getRow(ba.getRowIdx()).getUserObject())&&la.setExpanded(ba.isExpanded())};this.searchKey=function(la){var ba;ma=la;ia=!!ma;for(ba=0;ba<C.length;ba++){var ja=
C[ba];var sa=ja.isChecked();if(la){var B=ja.getName();ja.getNumber&&(B+=ja.getNumber());B=-1<B.toUpperCase().indexOf(ma.toUpperCase());sa=N?B&&sa:B}else sa=N?ja.isChecked():!0;ja.setVisible(sa)}U.updateUi()};var ha=function(){var la=function(ba){var ja=!0,sa=!1;if(ba instanceof pa){var B=ba.getChildren();if(B&&0<B.length)for(var db=0;db<B.length;db++){var Na=B[db];la(Na);Na.isVisible()&&(ja=ja&&Na.isChecked());sa=sa||Na.isVisible()}}else ja=ja&&ba.isChecked(),sa=sa||ba.isVisible();ba.setVisible(sa);
ba.setChecked(ja)};la(v)};this.updateUi=function(){for(var la=!1,ba=0;ba<C.length;ba++)la=la||C[ba].isVisible();la?(Qa&&Qa.hide(),X&&X.remove(),X=za(),R.append(X),Ha()):(Qa||(Qa=$("<div>"),(new na).getJqUi().appendTo(Qa),R.append(Qa)),Qa.show(),X.hide())};var Ha=function(){ha();xa={};for(var la=0;la<V.length;la++){var ba=V[la];if(ba.isVisible()){var ja=hb.createRow(ta,!1),sa=ja.getCell(0),B=ba.getSubNodeLevel();B=new KTCellTreeModel(B);ja.setHeight(23);ja.setUserObject(ba);ba instanceof pa?(ba=ia?
!0:ba.isExpanded(),B.setExpanded(ba)):(ba=ba.getParentNode(),ba=ia?!0:ba.isExpanded(),ja.setHide(!ba));sa.setTreeModel(B)}}ta.updateUI()},Ma=function(){for(var la=0,ba=0;ba<C.length;ba++)C[ba].isChecked()&&la++;la=fa.get("checkedNumberPrompt","(\u5df2\u9009\u62e9 #1 \u9879)").replace("#1",la);ab.text(la)},xb=function(la,ba){if(ba){la.getUserObject().check(la.isChecked(),ra);for(la=0;la<V.length;la++)if(ba=V[la],ba.isVisible()){var ja=xa[ba.getId()];ja&&ja.setChecked(ba.isChecked())}Ma()}},ra=function(la){for(var ba=
!0,ja=la.getChildren(),sa=0;sa<ja.length;sa++){var B=ja[sa];B.isVisible()&&(ba=ba&&B.isChecked())}la.setChecked(ba);(la=la.getParentNode())&&ra(la)}}function ka(){function v(V){KTDefaultCellRender.call(this,V);var da=this,C=this.paintCellUI;this.paintCellUI=function(N,xa){if(da.getCurrentRowIdx()<hb.getHeadRowCount())C(N,xa);else if($(N),2===da.getCurrentColIdx())ia(N,da.getCellWidth(),da.getCellHeight(),da.getCurrentRow());else if(1===da.getCurrentColIdx()){var ma=da.getCurrentRow();xa=$("<div>");
var ta=$("<div>");xa.addClass("model-export-conflict-item-text");ma=ma.getUserObject();xa.addClass("model-export-conflict-model-name-label");xa.text(ma.modelName);ta.append(Ob.createIcon(ma.modelType,"model-export-conflict-model-icon"));ta.append(xa);ta.appendTo(N)}else C(N,xa)};var ia=function(N,xa,ma,ta){N=hb.createCtrlInCell(N,xa,ma,ea);N.setSelected(ta.getUserObject().strategy);N.setItemModels(ka.ALL_CONFLICTTYPE);N.setUserObject(ta);N.setCustomPainter(function(X,ab,Qa){switch(Qa){case ka.ALL_CONFLICTTYPE[0]:X=
fa.get("ignore","\u5ffd\u7565");break;case ka.ALL_CONFLICTTYPE[1]:X=fa.get("overwrite","\u8986\u76d6");break;case ka.ALL_CONFLICTTYPE[2]:X=fa.get("rename","\u91cd\u547d\u540d");break;default:X=""}Qa=$("<div>");Qa.text(X);Qa.appendTo(ab)});N.addSelectedChangedListener(function(X,ab,Qa){X.getUserObject().getUserObject().strategy=Qa})}}var L=this,U,R;this.getConflictModelList=function(){return R};this.getJqUi=function(V){U=hb.createTable();hb.bindTableListenerForCtrl(U);var da=new v(U);da.setOutsideVisible(!1);
U.setCellRender(da);U.addColumns(3);U.getColumn(0).setWidth(100);U.getColumn(1).setWidth(260);U.getColumn(2).setWidth(180);da=hb.createHeadRow(U);da.getCell(0).setValue(fa.get("groupName","\u6a21\u578b\u76ee\u5f55"));da.getCell(1).setValue(fa.get("modelName","\u6a21\u578b\u540d\u79f0"));da.getCell(2).setValue(fa.get("strategy","\u5904\u7406\u7b56\u7565"));R=V;for(var C in V)R[C].strategy=ka.ALL_CONFLICTTYPE[2];L.updateUi(V);hb.refresh(U);V=$(U.getUI());V.addClass("model-import-selection-table");return V};
this.updateUi=function(V){hb.clearWithoutHead(U);hb.refresh(U);for(var da,C=0;C<V.length;C++){var ia=V[C];da=hb.createRow(U);da.setUserObject(ia);da.getCell(0).setValue(ia.groupName);da.getCell(1).setValue(ia.modelName);da.getCell(2).setValue(ia.strategy)}hb.refresh(U)};this.refresh=function(){hb.refresh(U)}}function wa(v){pb.call(this);var L=this,U=this.protectedMethod,R=[],V,da,C,ia,N,xa,ma;this.setGlobal=function(za){V=za};this.setFunRefreshModelGroup=function(za){C=za};this.setModelSetId=function(za){ma=
za};this.addConfirmListener=function(za){R.push(za)};this.createUi=function(za,ua){L.setSize(640,480);L.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);U.setTitle(fa.get("importModel","\u5bfc\u5165\u6a21\u578b"));U.setContentPaneCreator(function(){var ha=$("<div>");ha.append(ta());ha.append(ab());da=new va(ua);var Ha=da.getJqUi();Ha.addClass("model-export-tree-selection-area");ha.append(Ha);Ha=$("<div>");com.kingdee.bos.qing.common.DomUtil.layoutCtrl(Ha,0,335,608,23);ha.append(Ha);
var Ma=fa.get("sourceStrategy","\u8d44\u6e90\u51b2\u7a81\u5904\u7406\u7b56\u7565(\u6a21\u578b\u96c6\u4e2d\u7684\u6570\u636e\u6e90)"),xb=(new Nb(Ma)).getJqUi();xb.attr("title",Ma);xb.addClass("model-export-sourceStrategy-label");xb.css("display","inline-block");Ha.append(xb);ia=new ea;ia.setSelected(ka.ALL_CONFLICTTYPE[2]);ia.setItemModels(ka.ALL_CONFLICTTYPE);ia.setCustomPainter(function(ra,la,ba){switch(ba){case ka.ALL_CONFLICTTYPE[0]:ra=fa.get("ignore","\u5ffd\u7565");break;case ka.ALL_CONFLICTTYPE[1]:ra=
fa.get("overwrite","\u8986\u76d6");break;case ka.ALL_CONFLICTTYPE[2]:ra=fa.get("rename","\u91cd\u547d\u540d");break;default:ra=""}ba=$("<div>");ba.text(ra);ba.appendTo(la)});Ma=ia.getJqUi();Ma.addClass("model-export-sourceStrategy-comboBox");Ha.append(Ma);return ha});U.setClosingChecker(L.isValidToAccepted,!0);U.setClosingAction(function(ha){if(ha&&(ha=da.getCheckedModelNodes(),0!==ha.length)){for(var Ha=[],Ma=0;Ma<ha.length;Ma++)Ha.push(ha[Ma].toJsonObject());Da(za,Ha)}});L.showDialog()};var ta=
function(){N=new mb;N.addSearchListener(X);N.setSearchListenerDelay(400);N.setPlaceholder(fa.get("searchModelOrNumber","\u641c\u7d22\u6a21\u578b\u540d\u79f0/\u7f16\u7801"));N.setShowSearchIcon(!0);var za=N.getJqUi();za.addClass("model-imexport-search-box");return za},X=function(){xa=N.getText().trim();da.searchKey(xa)},ab=function(){var za=new c;za.setChecked(!1);za.addCheckedListener(Qa);za.setText(fa.get("showOnlyChecked","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));za=za.getJqUi();cb.layoutCtrl(za,
250,2,200,23);return za},Qa=function(za,ua){ua&&(da.setShowOnlyChecked(za.isChecked()),da.searchKey(xa))};this.isValidToAccepted=function(za){0===da.getCheckedModelNodes().length?(U.getMessageCurtain().showPrompt(fa.get("selectNone","\u672a\u9009\u4e2d\u6a21\u578b\u3002")),za(!1)):za(!0)};var Da=function(za,ua){V.createFacade(function(ha){var Ha=ha.conflictModel,Ma=ha.numberConflictModel;if(0<Ha.length){var xb=ua.length-Ha.length,ra=new Ca;ra.setSourceStrategy(ia.getSelected());ra.setCacheImportMapIdKey(ha.cacheMapIdKey);
ra.setGlobal(V);ra.setModelSetId(ma);ra.setFunRefreshModelGroup(C);ra.setArrNumberConflictModel(Ma);ra.createUi(za,Ha,xb);ra.repaint()}else 0<Ma.length?(ha=new Pa,ha.setFunRefreshModelGroup(C),ha.createUi(Ma),ha.repaint()):C&&C()},function(ha,Ha){return 1020101===ha||1100021===ha?(v.showPrompt(fa.get("resourceFileLimit","\u5bfc\u5165\u5931\u8d25\uff0c\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3\u3002"),2E3),!0):20009004===ha?(v.showPrompt(fa.get("resourceFileIncomplete","\u5bfc\u5165\u5931\u8d25\uff0c\u6570\u636e\u5305\u4e0d\u5b8c\u6574\u3002"),
2E3),!0):20009008===ha?(v.showPrompt(fa.get("importModelCorruptionException","\u5bfc\u5165\u5931\u8d25\uff0c\u6a21\u578b\u6570\u636e\u635f\u574f\u6216\u6570\u636e\u7248\u672c\u4e0d\u517c\u5bb9\u3002"),2E3),!0):20004001===ha?(v.showPrompt(fa.get("MaterializedExceptionForImport","\u5bfc\u5165\u5931\u8d25\uff0c\u6a21\u578b\u7269\u5316\u5b58\u50a8\u8bbe\u7f6e\u89e3\u6790\u5f02\u5e38\u3002"),2E3),!0):30001001===ha?(v.showPrompt(fa.get("noDataWarehouseConfigForImport","\u5f53\u524d\u73af\u5883\u672a\u914d\u7f6e\u201c\u8f7b\u6570\u4ed3\u6570\u636e\u6e90\u201d\u53c2\u6570\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5728MC\u4e2d\u8fdb\u884c\u914d\u7f6e\u3002"),
2E3),!0):30001002===ha?(v.showPrompt(fa.get("dataWarehouseConfigParseException","\u201c\u8f7b\u6570\u4ed3\u6570\u636e\u6e90\u201d\u53c2\u6570\u89e3\u6790\u5f02\u5e38\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5728MC\u4e2d\u91cd\u65b0\u914d\u7f6e\u3002"),2E3),!0):!1}).importSelectedModel(ma,aa.getParamPathPrefix(),za,ua,ia.getSelected(),!0,"")}}function Ca(){pb.call(this);var v=this,L=this.protectedMethod,U=[],R,V,da,C,ia,N=[],xa,ma,ta,X,ab,Qa,Da;this.setSourceStrategy=function(ra){X=ra};this.setCacheImportMapIdKey=
function(ra){ab=ra};this.setGlobal=function(ra){R=ra};this.setFunRefreshModelGroup=function(ra){ta=ra};this.setArrNumberConflictModel=function(ra){Da=ra};this.setModelSetId=function(ra){Qa=ra};this.addConfirmListener=function(ra){U.push(ra)};this.createUi=function(ra,la,ba){ia=ra;N=la;ma=ba;v.setSize(640,480);v.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);L.setTitle(fa.get("importModel","\u5bfc\u5165\u6a21\u578b"));L.setContentPaneCreator(function(){var ja=$("<div>"),sa=fa.get("importSuccessPrompt",
"\u6210\u529f\u5bfc\u5165#1\u4e2a\u6a21\u578b\u3002\u4ee5\u4e0b\u6a21\u578b\u540d\u79f0\u51b2\u7a81\uff0c\u8bf7\u5904\u7406\u3002").replace("#1",ba);sa=new Nb(sa);V=new ya(fa.get("allIgnore","\u5168\u90e8\u5ffd\u7565"));da=new ya(fa.get("allOverwrite","\u5168\u90e8\u8986\u76d6"));C=new ya(fa.get("allRename","\u5168\u90e8\u91cd\u547d\u540d"));V.addActionListener(ua);da.addActionListener(ha);C.addActionListener(Ha);sa=sa.getJqUi();var B=V.getJqUi(),db=da.getJqUi(),Na=C.getJqUi();sa.addClass("model-import-selection-prompt");
B.addClass("model-import-selection-ignore-btn");db.addClass("model-import-selection-overwrite-btn");Na.addClass("model-import-selection-rename-btn");ja.append(sa);ja.append(B);ja.append(db);ja.append(Na);xa=new ka;ja.append(xa.getJqUi(la));return ja});L.setClosingChecker2(v.isValidToAccepted,za,!0);L.setClosingAction(function(ja){!ja&&Da&&0<Da.length&&xb()});v.showDialog()};var za=function(ra){ra(!0);0<ma&&0==Da.length&&ta&&ta()};this.repaint=function(){xa.refresh()};var ua=function(){for(var ra in N)N[ra].strategy=
ka.ALL_CONFLICTTYPE[0];xa.updateUi(N)},ha=function(){for(var ra in N)N[ra].strategy=ka.ALL_CONFLICTTYPE[1];xa.updateUi(N)},Ha=function(){for(var ra in N)N[ra].strategy=ka.ALL_CONFLICTTYPE[2];xa.updateUi(N)};this.isValidToAccepted=function(ra){Ma(ia,N,ra)};var Ma=function(ra,la,ba){var ja=[],sa;for(sa in la)"ignore"!==la[sa].strategy&&(ja=ja.concat(la[sa]));0===ja.length?ba(!0):R.createFacade(function(B){ba(!0);Da=Da.concat(B.numberConflictModel);0==Da.length?ta&&ta():xb()},function(B,db){return 1020101===
B||1100021===B?(L.getMessageCurtain().showPrompt(fa.get("resourceFileLimit","\u5bfc\u5165\u5931\u8d25\uff0c\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3\u3002"),2E3),!0):20009008===B?(L.getMessageCurtain().showPrompt(fa.get("importModelCorruptionException","\u5bfc\u5165\u5931\u8d25\uff0c\u6a21\u578b\u6570\u636e\u635f\u574f\u6216\u6570\u636e\u7248\u672c\u4e0d\u517c\u5bb9\u3002"),2E3),!0):20004001===B?(L.getMessageCurtain().showPrompt(fa.get("MaterializedExceptionForImport","\u5bfc\u5165\u5931\u8d25\uff0c\u6a21\u578b\u7269\u5316\u5b58\u50a8\u8bbe\u7f6e\u89e3\u6790\u5f02\u5e38\u3002"),
2E3),!0):30001001===B?(L.getMessageCurtain().showPrompt(fa.get("noDataWarehouseConfigForImport","\u5f53\u524d\u73af\u5883\u672a\u914d\u7f6e\u201c\u8f7b\u6570\u4ed3\u6570\u636e\u6e90\u201d\u53c2\u6570\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5728MC\u4e2d\u8fdb\u884c\u914d\u7f6e\u3002"),2E3),!0):30001002===B?(L.getMessageCurtain().showPrompt(fa.get("dataWarehouseConfigParseException","\u201c\u8f7b\u6570\u4ed3\u6570\u636e\u6e90\u201d\u53c2\u6570\u89e3\u6790\u5f02\u5e38\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5728MC\u4e2d\u91cd\u65b0\u914d\u7f6e\u3002"),
2E3),!0):!1}).importSelectedModel(Qa,aa.getParamPathPrefix(),ra,ja,X,!1,ab)},xb=function(){L.destroy();var ra=new Pa;ra.setFunRefreshModelGroup(ta);ra.createUi(Da);ra.repaint()}}function Pa(){pb.call(this);var v=this,L=this.protectedMethod,U,R;this.setFunRefreshModelGroup=function(V){R=V};this.createUi=function(V){v.setSize(640,480);v.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);L.setTitle(fa.get("importModel","\u5bfc\u5165\u6a21\u578b"));L.setContentPaneCreator(function(){var da=
$("<div>"),C=fa.get("modelNumberConflictPrompt","\u4ee5\u4e0b\u6a21\u578b\u4e0e\u5176\u4ed6\u6a21\u578b\u5b58\u5728\u6a21\u578b\u7f16\u7801\u51b2\u7a81\uff0c\u5df2\u5c06\u6a21\u578b\u7f16\u7801\u91cd\u547d\u540d\u3002");C=(new Nb(C)).getJqUi();C.addClass("model-import-selection-prompt");da.append(C);U=new rb;da.append(U.getJqUi(V));return da});L.setFooterPaneCreator(function(da){var C=new sb(fa.get("iSee","\u6211\u77e5\u9053\u4e86"));C.addActionListener(function(ia){L.destroy();R&&R()});C=C.getJqUi();
C.addClass("sa-ctrl-dialog-footer-cancel");C.css("margin-left","-50px");C.appendTo(da)});L.setClosingAction(function(da){L.destroy();R&&R()});v.showDialog()};this.repaint=function(){U.refresh()}}function rb(){function v(R){KTDefaultCellRender.call(this,R);var V=this,da=this.paintCellUI;this.paintCellUI=function(C,ia){if(V.getCurrentRowIdx()<hb.getHeadRowCount())da(C,ia);else if(0===V.getCurrentColIdx()){var N=V.getCurrentRow();ia=$("<div>");var xa=$("<div>");ia.addClass("model-export-conflict-item-text");
N=N.getUserObject();ia.addClass("model-export-conflict-model-name-label");ia.text(N.modelName);xa.append(Ob.createIcon(N.modelType,"model-export-conflict-model-icon"));xa.append(ia);xa.appendTo(C)}else da(C,ia)}}var L=this,U;this.getJqUi=function(R){U=hb.createTable();hb.bindTableListenerForCtrl(U);var V=new v(U);V.setOutsideVisible(!1);U.setCellRender(V);U.addColumns(3);U.getColumn(0).setWidth(180);U.getColumn(1).setWidth(180);U.getColumn(2).setWidth(180);V=hb.createHeadRow(U);V.getCell(0).setValue(fa.get("modelName",
"\u6a21\u578b\u540d\u79f0"));V.getCell(1).setValue(fa.get("modelNumber","\u6a21\u578b\u7f16\u7801"));V.getCell(2).setValue(fa.get("renameModelNumber","\u91cd\u547d\u540d\u540e\u7684\u6a21\u578b\u7f16\u7801"));L.updateUi(R);hb.refresh(U);R=$(U.getUI());R.addClass("model-import-number-table");return R};this.refresh=function(){hb.refresh(U)};this.updateUi=function(R){hb.clearWithoutHead(U);for(var V,da=0;da<R.length;da++){var C=R[da];V=hb.createRow(U);V.getCell(1).setValue(C.oldModelNumber);V.getCell(2).setValue(C.newModelNumber);
V.setUserObject(C)}hb.refresh(U)}}function Ba(){var v,L,U,R,V=!1,da=!0;this.setName=function(C){v=C};this.getName=function(){return v};this.setId=function(C){L=C};this.getId=function(){return L};this.setIsPreset=function(C){U=C};this.isPreset=function(){return U};this.setParentNode=function(C){R=C};this.getParentNode=function(){return R};this.setChecked=function(C){V=C};this.isChecked=function(){return V};this.setVisible=function(C){da=C};this.isVisible=function(){return da};this.getSubNodeLevel=
function(){for(var C=-1,ia=R;ia;)C++,ia=ia.getParentNode();return C};this.check=function(C){};this.protectedMethod={fromJsonObject:function(C){},toJsonObject:function(){return{}}}}function pa(){Ba.call(this);var v=this,L=this.protectedMethod,U=!0,R=[];this.setExpanded=function(V){U=V};this.isExpanded=function(){return U};this.setChildren=function(V){R=V};this.getChildren=function(){return R};this.setParentId=function(V){_sParentId=V};this.getParentId=function(){return _sParentId};this.fromJsonObject=
function(V){L.fromJsonObject(V);v.setName(V.modelGroupName);v.setId(V.modelGroupId);var da=V.modelList;if(da&&0<da.length)for(var C=0;C<da.length;C++){var ia=da[C],N,xa=ia.modelType;"1"===xa&&(N=new O);"2"===xa&&(N=new F);"3"===xa&&(N=new K);"4"===xa&&(N=new m);N||(N=new O);N.fromJsonObject(ia);N.setParentNode(v);R.push(N)}if((V=V.children)&&0<V.length)for(C=0;C<V.length;C++)da=V[C],N=new pa,N.fromJsonObject(da),N.setParentNode(v),R.push(N)};this.toJsonObject=function(){return L.toJsonObject()};this.check=
function(V,da){if(0!==R.length&&V!==v.isChecked()){v.setChecked(V);for(var C=0;C<R.length;C++){var ia=R[C];ia.isVisible()&&ia.check(V,da)}}}}function Za(){Ba.call(this);var v=this,L=this.protectedMethod,U=[],R=[],V,da;this.setModelType=function(C){V=C};this.setRelativeIds=function(C){U=C};this.getRelativeIds=function(){return U};this.setRelativeNodes=function(C){R=C};this.getRelativeNodes=function(){return R};this.getModelType=function(){return V};this.setNumber=function(C){da=C};this.getNumber=function(){return da};
this.protectedMethod={fromJsonObject:function(C){L.fromJsonObject(C);v.setModelType(C.modelType);v.setId(C.modelId);v.setName(C.modelName);v.setRelativeIds(C.refModelIds);v.setNumber(C.number)},toJsonObject:function(){var C=L.toJsonObject(),ia=v.getParentNode();C.modelId=v.getId();C.groupId=ia.getId();C.modelName=v.getName();C.modelType=V;C.number=da;return C}};this.check=function(C,ia){if(C!==v.isChecked()){v.setChecked(C);for(var N=0;N<R.length;N++)R[N].check(C,ia);ia&&ia(v.getParentNode())}}}function O(){Za.call(this);
var v=this.protectedMethod;this.fromJsonObject=function(L){v.fromJsonObject(L)};this.toJsonObject=function(){return v.toJsonObject()}}function F(){Za.call(this);var v=this.protectedMethod;this.fromJsonObject=function(L){v.fromJsonObject(L)};this.toJsonObject=function(){return v.toJsonObject()}}function K(){Za.call(this);var v=this.protectedMethod;this.fromJsonObject=function(L){v.fromJsonObject(L)};this.toJsonObject=function(){return v.toJsonObject()}}function m(){Za.call(this);var v=this.protectedMethod;
this.fromJsonObject=function(L){v.fromJsonObject(L)};this.toJsonObject=function(){return v.toJsonObject()}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.mainpage&&(com.kingdee.bos.qing.modeler.mainpage={});
"undefined"==typeof com.kingdee.bos.qing.modeler.mainpage.imexport&&(com.kingdee.bos.qing.modeler.mainpage.imexport={});var T=com.kingdee.bos.qing.modeler.mainpage.imexport;T.ExportDialog=S;T.UploadPane=function(){var v,L,U;this.createJqUi=function(ia,N,xa,ma){v=ma;ma=$("<div>");ma.addClass("model-importing-exporting-main");var ta=$(document.body),X=$("<div class='sa-ctrl-modallayer'>");X.appendTo(ta);L=$("<progress value='0' max='100'>");L.addClass("model-importing-upload-progress");var ab=$("<div>");
ab.addClass("model-importing-exporting-text");ab.text(fa.get("uploading","\u6b63\u5728\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u5019"));ma.append(L);ma.append(ab);ta.append(ma);R(ia,N,xa,ma,X)};var R=function(ia,N,xa,ma,ta){var X=new FormData;X.append("filename",N);N=com.kingdee.bos.qing.framework.common.RemoteFrameworkRegister.getUploadUrl();var ab=new XMLHttpRequest;ab.upload.addEventListener("progress",V,!1);ab.addEventListener("error",da,!1);ab.open("post",N,!0);ab.onload=function(Qa){200===this.status&&
(Qa=JSON.parse(this.response),"number"==typeof Qa.errorCode&&3099003===Qa.errorCode?v.showError(Qa.errorMessage):C(ia,Qa.data,xa),ma.remove(),ta.remove())};ab.send(X)},V=function(ia){var N=L.get(0);ia.lengthComputable&&(N.max=ia.total,N.value=ia.loaded)},da=function(ia){_funErrorCallbackEvent&&_funErrorCallbackEvent(fa.get("uploadFail","\u4e0a\u4f20\u5931\u8d25"))},C=function(ia,N,xa){xa.createFacade(function(ma){var ta=new pa;ta.fromJsonObject(ma);0!==ta.getChildren().length?(ma=new wa(v),ma.setGlobal(xa),
ma.setModelSetId(ia),ma.setFunRefreshModelGroup(U),ma.createUi(N,ta)):v.showPrompt(fa.get("noModelAndGroup","\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u6a21\u578b\u3002"))},function(ma,ta){return!1}).getEnableImportModelAndGroup(N)};this.setFunRefreshModelGroup=function(ia){U=function(){v.showSuccess(fa.get("importModelSuccess","\u6a21\u578b\u5bfc\u5165\u6210\u529f\u3002"));ia()}}};T.FolderNode=pa;var ca,aa,ea,ya,mb,pb,fa,cb,hb,c,Nb,sb,na;(function(){var v=com.kingdee.bos.qing.modeler.mainpage.common;
ca=v.MyIcons;aa=v.Integration;v=com.kingdee.bos.qing.ui.component;ea=v.ComboBox;ya=v.WorkButton;Nb=v.Label;mb=v.SearchBox;c=v.CheckBox;pb=v.AbstractModalDialog;sb=v.Button;v=com.kingdee.bos.qing.framework.common;fa=v.MultilanguageManager.createPackageAccessor(T);v=com.kingdee.bos.qing.common.ui;hb=v.TableUtil;v=com.kingdee.bos.qing.common;cb=v.DomUtil;v=com.kingdee.bos.qing.modeler.common.ui;na=v.SearchNoDataContainer})();S.MODEL_LIST="modelList";S.MODEL_GROUP_LIST="modelGroupList";ka.ALL_CONFLICTTYPE=
["ignore","overwrite","rename"];ka.ALL_PUBLISHCONFLICTTYPE=["noDisposal","overwrite"];var Ob=new function(){this.createIcon=function(v,L){var U=$("<span>");U.addClass(L);switch(v){case "1":v="data-table-model-icon-small";break;case "2":v="entity-model-icon-small";break;case "3":v="relation-model-icon-small";break;case "4":v="metric-model-icon-small";break;default:v=""}ca.background(U,v);return U}}})();(function(){function S(){cb.call(this);var B=this,db=this.protectedMethod,Na,kb,Cb,Eb;this.destroy=function(){db.destroy()};this.setRootNode=function(Ua){Na=Ua};this.textFieldFocus=function(){Eb&&Eb.requestFocus()};this.asyncShowDeployDialog=function(){ba.setCallback(function(){nb();B.textFieldFocus()});ba.loadJs("common/qing-table.js")};this.setDescConfirmCallback=function(Ua){kb=Ua};var nb=function(){B.setSize(640,480);B.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);db.setTitle(c.get("deploy",
"\u90e8\u7f72"));db.setContentPaneCreator(Mb);db.setClosingAction(function(){});db.setClosingChecker2(function(Ua){Ua=$.trim(Eb.getText());var tb;""!==Ua&&500<Ua.length?tb=c.get("descTooLong","\u90e8\u7f72\u63cf\u8ff0\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"):""===Ua&&(tb=c.get("enterDeployDesc","\u8bf7\u8f93\u5165\u90e8\u7f72\u63cf\u8ff0\u3002"));if(tb)return db.getMessageCurtain().showPrompt(tb),!1;Ua=Cb.getCheckedModelNodes();tb=[];for(var Jb=0;Jb<Ua.length;Jb++){var Sb=Ua[Jb],Pb=Sb.getId();
Sb instanceof sa&&tb.push(Pb)}Ua=$.trim(Eb.getText());kb&&kb(Ua,tb);return!0});B.showDialog()},Mb=function(){var Ua=$("<div>");Cb=new va(Na);var tb=Cb.getJqUi();Ua.append(tb);tb=$("<div>");tb.addClass("deploy-dialog-batch-split-bottom");Ua.append(tb);tb=Ua.append;var Jb=new Pa;Jb.setRequired(!0);Jb.setText(c.get("desc","\u63cf\u8ff0"));Jb=Jb.getJqUi();Eb=new Ba;var Sb=Eb.getJqUi();Sb.find(".sa-ctrl-textarea-real").css("font-family","MicrosoftYaHei");var Pb=$("<div>");Pb.addClass("deploy-dialog-desc-div");
Jb.appendTo(Pb);Sb.appendTo(Pb);na.layoutCtrl(Jb,0,-8,45,20);na.layoutCtrl(Sb,35,-5,568,70);na.layoutCtrlCenterAlign(Pb,600);tb.call(Ua,Pb);return Ua}}function va(B){function db(){KTDefaultCellRender.call(this,Ua);var Xa=this;this.paintCellUI=function(Ea,ib){var Ja=Xa.getCurrentRow().getUserObject(),eb=Ja.getName();Ea=$("<div>");Ea.addClass("deploy-dialog-tree-area-list-item");var ub=new K,Ab=ub.getJqUi(),Qb=$("<div>");Ab.addClass("deploy-dialog-area-list-item-checkbox");Qb.addClass("deploy-dialog-area-list-item-text");
Ea.append(Ab);Ea.append(Qb);ub.setChecked(Ja.isChecked());ub.setUserObject(Ja);ub.addCheckedListener(Xb);-1!=nb.indexOf(Ja.getId())&&(ub.setEnabled(!1),ub.setChecked(!0));Mb[Ja.getId()]=ub;0==Ja.getSubNodeLevel()?(Qb.text(eb),"ND_0"==Ja.getId()?(Ja=c.get("notDeployedHelpIconTips","\u5728\u540c\u4e00\u4e2a\u6a21\u578b\u96c6\u4e0b\uff0c\u6a21\u578b\u8bbe\u8ba1\u65f6\u53ef\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u8bbe\u8ba1\u671f\u7684\u72b6\u6001\uff0c\u4f46\u5728\u6267\u884c\u671f(\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u6267\u884c\u65f6)\u53ea\u80fd\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u7684\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u3002\u56e0\u6b64\u9700\u8981\u5c06\u5f15\u7528\u7684\u201c\u672a\u90e8\u7f72\u201d\u72b6\u6001\u7684\u6a21\u578b\u4e00\u540c\u90e8\u7f72\u3002"),
Qb.append(Va(Ja,160,70))):"DU_0"==Ja.getId()&&(Ja=c.get("deployedUpdateHelpIconTips","\u5728\u540c\u4e00\u4e2a\u6a21\u578b\u96c6\u4e0b\uff0c\u6a21\u578b\u8bbe\u8ba1\u65f6\u53ef\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u8bbe\u8ba1\u671f\u7684\u72b6\u6001\uff0c\u4f46\u5728\u6267\u884c\u671f (\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u6267\u884c\u65f6)\u53ea\u80fd\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u7684\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u3002\u5982\u679c\u9700\u8981\u6267\u884c\u671f\u4e0e\u8bbe\u8ba1\u671f\u7684\u72b6\u6001\u4fdd\u6301\u4e00\u81f4\uff0c\u8bf7\u5c06\u5f15\u7528\u7684\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201c\u72b6\u6001\u7684\u6a21\u578b\u518d\u6b21\u90e8\u7f72\u3002"),
Qb.append(Va(Ja,185,88)))):(Qb.text(eb),Ja instanceof sa&&(Qb.addClass("deploy-dialog-model-name-label"),Qb=Ea.append,Ja=Ja.getType(),eb=$("<span>"),eb.addClass("deploy-dialog-model-icon"),ub=Da.getModelIconByType(Da.DATA_TABLE_MODEL)+"-small","metrics_model"==Ja&&(ub="metric-model-icon-small"),ma.background(eb,ub),Qb.call(Ea,eb)));ib?(ib=$(ib),ib.css("overflow","visible"),Ea.appendTo(ib)):Ea.appendTo(jqDiv);na.layoutCtrlWithLRTB(Ea,0,0,null,0,0,null)};var Va=function(Ea,ib,Ja){var eb=$("<div>"),
ub=$("<span>");ub.text(Ea);ub.appendTo(eb);Ea=new ya;Ea.setIconType(ya.ICON_TYPE_QUESTION);Ea.setTipsSize(400,Ja);Ea.setTipsHtml(eb[0]);Ja=Ea.getJqUi();Ja.addClass("dm-notice-icon");na.layoutCtrl(Ja,ib,3,16,16);return Ja}}var Na,kb=[],Cb=[],Eb=[],nb=[],Mb,Ua,tb;this.getJqUi=function(){if(!Na){Sb();Na=$("<div>");Na.addClass("deploy-dialog-area");Na.addClass("deploy-dialog-tree-selection-area");Ua=new KTable;var Xa=$(Ua.getUI());Xa.children().css("overflow-x","hidden");var Va=new db;Ua.setCellRender(Va);
Ua.setSyncUIWhenModelChanged(!1);Ua.addTreeExpandListener(Pb);Ua.addColumn().setWidth(400);na.layoutCtrlWithLRTB(Xa,0,0,null,23,0,null);tb=Xa;Na.append(tb);Mb={};for(Xa=0;Xa<kb.length;Xa++){var Ea=kb[Xa];Va=sb.createRow(Ua,!1);var ib=Va.getCell(0),Ja=Ea.getSubNodeLevel();Ja=new KTCellTreeModel(Ja);Va.setHeight(23);Va.setUserObject(Ea);Ea instanceof ja?(Ea=Ea.isExpanded(),Ja.setExpanded(Ea)):(Ea=Ea.getParentNode().isExpanded(),Va.setHide(!Ea));ib.setTreeModel(Ja)}Ua.updateUI();Jb()}return Na};var Jb=
function(){var Xa=function(Ja,eb){var ub=Mb[Ja.getId()];ub&&(ub.setChecked(!0),eb||(ub.setEnabled(!1),nb.push(Ja.getId())));if(Ja instanceof ja&&(Ja=Ja.getChildren())&&0<Ja.length)for(ub=0;ub<Ja.length;ub++)Xa(Ja[ub],eb)},Va=B.getChildren();if(Va&&0<Va.length)for(var Ea=0;Ea<Va.length;Ea++){var ib=!0;"ND_0"==Va[Ea].getId()&&(ib=!1);Xa(Va[Ea],ib)}};this.getCheckedModelNodes=function(){for(var Xa=[],Va=0;Va<Eb.length;Va++){var Ea=Eb[Va];(Mb[Ea.getId()].isChecked()||-1!=nb.indexOf(Ea.getId()))&&Xa.push(Ea)}return Xa};
var Sb=function(){var Xa=function(ib){kb.push(ib);if(ib instanceof sa)Eb.push(ib);else if(Cb.push(ib),(ib=ib.getChildren())&&0<ib.length)for(var Ja=0;Ja<ib.length;Ja++)Xa(ib[Ja])},Va=B.getChildren();if(Va&&0<Va.length)for(var Ea=0;Ea<Va.length;Ea++)Xa(Va[Ea])},Pb=function(Xa,Va){(Xa=Ua.getRow(Va.getRowIdx()).getUserObject())&&Xa.setExpanded(Va.isExpanded())},Xb=function(Xa,Va){var Ea=Xa.getUserObject();if(-1==nb.indexOf(Ea.getId())&&Va)for(Ea.check(Xa.isChecked(),Yb),Xa=0;Xa<kb.length;Xa++)Va=kb[Xa],
-1==nb.indexOf(Va.getId())&&(Ea=Mb[Va.getId()])&&Ea.setChecked(Va.isChecked())},Yb=function(Xa){for(var Va=!0,Ea=Xa.getChildren(),ib=0;ib<Ea.length;ib++){var Ja=Ea[ib];Va=Va&&Ja.isChecked()}Xa.setChecked(Va);(Xa=Xa.getParentNode())&&Yb(Xa)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&
(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.mainpage&&(com.kingdee.bos.qing.modeler.mainpage={});"undefined"==typeof com.kingdee.bos.qing.modeler.mainpage.ui&&(com.kingdee.bos.qing.modeler.mainpage.ui={});var ka=com.kingdee.bos.qing.modeler.mainpage.ui;ka.Main=function(){function B(){var d;this.getJqUi=function(){d||(d=a());return d};var a=function(){d=$("<div>");Oa=new db;var g=Oa.getJqUi();P=new Eb;var e=P.getJqUi(),u=new pa;u.setHorizontalSplit(!0);u.setSplitLineWide(8);
u.setResizeMode(pa.RESIZE_MODE_FIRST_FIXED);u.setFirstSize(250,224,400);u.setSecondSize(document.documentElement.clientWidth-250-20,document.documentElement.clientWidth-400-20,document.documentElement.clientWidth-200-20);u.setFirstChild(pa.createChildWrapper(g,function(){g.css({width:u.getNonemptyFirstWide()+"px"});e.css({width:document.documentElement.clientWidth-u.getNonemptyFirstWide()-28+"px"});P.getModelListView().relayoutViews()}));u.setSecondChild(pa.createChildWrapper(e));P.setSplitPane(u);
d=u.getJqUi();d.addClass("model-set-main-page-work-area");return d}}function db(){var d,a,g,e,u,h,q,w;this.getJqUi=function(){d||f();return d};this.getModelGroupTree=function(){e||(e=new ia);return e};this.resetModelGroupTree=function(){e&&e.getJqUi().remove();e=new ia};this.updateUiWhenNoGroup=function(){a.hideAllButton();u&&u.show();h.setContainChildStatus(!1,Bb,!1);e.setRootVisible(!1);e.setModelGroupFolderNode(Fb);e.setFunModelGroupTreeNodeClick(n);e.setSelectedNode([e.getRootGroup()]);q=e.getRootGroup()};
this.updateUiWhenRootGroup=function(p){a.onlyShowAddChildGroupBtn();u&&u.hide();h.setContainChildStatus(!1,!0,!0);p&&(e.setRootVisible(!0),e.setModelGroupFolderNode(Fb),e.setFunModelGroupTreeNodeClick(n),q=e.getRootGroup(),e.setAutoSelectedGroupId(Zb),e.setSelectedNode([e.getRootGroup()]),e.refresh())};this.updateUiWhenNotRootGroup=function(p){a.showAllButton();u&&u.hide();h.setContainChildStatus(!0,Bb,!0);p&&r(e.getSelectedNode(),!0)};this.createGroupOnBranchNode=function(p,l,y){y=y?y:e.getSelectedNode();
p=e.createLeafNode(p);e.addChild(y,p,l);r(p,!0)};this.createGroupOnLeafNode=function(p,l,y){var J=e.getSelectedNode(),M=J.getParent();p=e.createLeafNode(p);l=e.createBranch(l);M.removeChild(J);e.addChild(M,l,y);e.addChild(l,p,0);r(p,!0)};var r=function(p,l){e.setRootVisible(l);e.setSelectedNode([p]);q=p;e.getTree().expandToNode(p,!1);e.refresh()};this.removeGroupLeafNode=function(){var p=e.getSelectedNode(),l=p.getParent();e.removeChild(l,p);if(0!==l.getChildCount())Oa.updateUiWhenRootGroup(!0);else if(p=
l.getUserObject(),p.getModelGroupId()===N.ROOT_NODE_ID)Gb=[],Bb=!1,Oa.updateUiWhenNoGroup();else{for(var y=e.createLeafNode(p),J=l.getParent(),M,G=J.getAllChildren(),z=0;z<G.length;z++)if(G[z].getUserObject().getModelGroupId()===p.getModelGroupId()){M=z;break}J.removeChild(l);e.addChild(J,y,M);Oa.updateUiWhenRootGroup(!0)}};this.resizeAfterObserver=function(){if(!R){var p=document.documentElement.clientHeight-250,l=a.getJqUi().height(),y=u.getJqUi().height(),J=g.getJqUi().height(),M=l+J;p=0<p-M-y?
(d.height()-M-y)/2+l+J:M;u.getJqUi().css("top",p)}};this.clearSearchStatus=function(){g.clear();g.getJqUi().find("input").blur()};var f=function(){d=$("<div class='model-group-container'>");a=new Na;a.getJqUi().appendTo(d);g=new O;g.setSearchListenerDelay(1E3);g.addSearchListener(function(){b($.trim(g.getText()).toLowerCase())});g.setShowSearchIcon(!0);g.setPlaceholder(c.get("searchGroupName","\u8bf7\u8f93\u5165\u76ee\u5f55\u540d\u79f0"));var p=g.getJqUi();p.addClass("model-group-search-box");p.find("input").on("keydown",
function(l){13===(l.keyCode||l.which||l.charCode)&&b($.trim(g.getText()).toLowerCase())});d.append(p);e=new ia;e.addExpandedListener(function(l,y){y.isExpanded()&&b($.trim(g.getText()).toLowerCase())});R||(u=new kb,u.getJqUi().appendTo(d));h=new Cb;h.getUi().appendTo(d)},n=function(p,l){q=l;var y=l.getUserObject();l=y.getModelGroupId();p&&p.getSelecteds()[0]&&p.getSelecteds()[0].getUserObject().getModelGroupId()===l||(P.getToolbar().clearSearchStatus(),P.getToolbar().resetModelType(),Ia=[],P.clearModelSelectedStatus(Kb),
P.clearMetricSpreadStatus(Kb),l===N.ROOT_NODE_ID?(Oa.updateUiWhenRootGroup(!1),p=Kb):(Oa.updateUiWhenNotRootGroup(),p=y.getArrAllModelList(Bb)),!P.getIsListView()&&P.getModelCardView().resizeModelCardView(),P.showModelView(p,!0),Zb=l,e.setAutoSelectedGroupId(l))},b=function(p){if(""===p){if(w){var l=e.getSelectedNode().getUserObject().getModelGroupId();q&&(l=q.getUserObject().getModelGroupId());var y;e.getRootGroup().visiting(function(Q){if(Q.getUserObject().getModelGroupId()===l)return y=Q,!0});
r(y,0<Gb.length);w=!1}}else{w=!0;var J=[],M=[];e.getRootGroup().deepFirstVisiting(function(Q){var qa=Q.getUserObject();-1!==qa.getModelGroupName().toLowerCase().indexOf(p)&&(J.push(Q),M.push(qa.getModelGroupId()))},!1);for(var G=0;G<J.length;G++){var z=J[G];k(z,M);t(z,M);e.getTree().expandToNode(z,!1)}e.getTree().searchAllNodeUi(function(Q,qa){Q=Q.getUserObject();var Aa=Q.getModelGroupId();Aa!==N.ROOT_NODE_ID&&(-1!==Q.getModelGroupName().toLowerCase().indexOf(p)?qa.show():-1===M.indexOf(Aa)?qa.hide():
qa.show())})}},k=function(p,l,y){if(!p.isLeafNode()){p=p.getAllChildren();for(var J=0;J<p.length;J++){var M=p[J].getUserObject();-1!==M.getModelGroupName().toLowerCase().indexOf(y)&&(l.push(M.getModelGroupId()),k(p[J],l))}}},t=function(p,l){p.getUserObject().getModelGroupId()!==N.ROOT_NODE_ID&&(p=p.getParent(),l.push(p.getUserObject().getModelGroupId()),t(p,l))}}function Na(){var d,a,g,e,u,h,q;this.getJqUi=function(){d||w();return d};this.hideAllButton=function(){a&&a.hide();g&&g.hide();e&&e.hide();
u&&u.hide();h&&h.hide();q&&q.hide()};this.showAllButton=function(){a&&a.css("right","140px")&&a.show();g&&g.css("right","116px")&&g.show();e&&e.show();u&&u.show();h&&h.show();q&&q.show()};this.onlyShowAddChildGroupBtn=function(){a&&a.hide();e&&e.hide();u&&u.hide();h&&h.hide();q&&q.hide();g&&g.css("right","20px")&&g.show()};var w=function(){d=$("<div class='model-group-tool-bar'>");var l=$("<div class='model-group-text'>");l.text(c.get("group","\u76ee\u5f55"));l.appendTo(d);R||(a=r("model-group-add-btn",
function(){mc(c.get("addDir","\u65b0\u589e\u540c\u7ea7"))},"add_dir",c.get("addDir","\u65b0\u589e\u540c\u7ea7")),g=r("model-group-add-btn",f,"add_subDir",c.get("addSubDir","\u65b0\u589e\u5b50\u7ea7")),e=r("model-group-edit-btn",n,"btn-edit",c.get("editGroup","\u7f16\u8f91\u76ee\u5f55")),u=r("model-group-del-btn",b,"btn-delete",c.get("deleteGroup","\u5220\u9664\u76ee\u5f55")),h=r("model-group-move-up-btn",t,"move_up",c.get("moveUp","\u4e0a\u79fb")),q=r("model-group-move-down-btn",p,"move_down",c.get("moveDown",
"\u4e0b\u79fb")),a.appendTo(d),g.appendTo(d),e.appendTo(d),u.appendTo(d),h.appendTo(d),q.appendTo(d))},r=function(l,y,J,M){var G=$("<div>");G.addClass(l);G.on("click",y);ma.backgroundWithHover(G,J);G.attr("title",M);G.hide();return G},f=function(){var l=0;Oa&&Oa.getModelGroupTree().getSelectedNode()&&(l=Oa.getModelGroupTree().getSelectedNode().getLevel());4<=l?I.getMessageCurtain().showPrompt(c.get("modelGroupMaxLevel","\u6700\u591a\u53ef\u652f\u63014\u7ea7\u76ee\u5f55\uff0c\u5f53\u524d\u76ee\u5f55\u4e3a\u7b2c4\u7ea7\u76ee\u5f55\uff0c\u65e0\u6cd5\u65b0\u589e\u4e0b\u7ea7\u76ee\u5f55\u3002")):
(l=new Xb(!0),l.setTitle(c.get("addSubDir","\u65b0\u589e\u5b50\u7ea7")),l.setSubDir(!0),l.showDialog(),l.textFieldFocus())},n=function(){var l=new Xb(!1);l.setTitle(c.get("updateModelGroupText","\u7f16\u8f91\u76ee\u5f55"));l.showDialog();l.textFieldFocus()},b=function(){var l=Oa.getModelGroupTree().getSelectedNode();if(l instanceof ea.BranchNode)l=c.get("deleteChildModelGroup","\u8bf7\u5148\u5220\u9664\u76ee\u5f55\u4e0b\u7684\u5b50\u76ee\u5f55\u518d\u5220\u9664\u76ee\u5f55\u3002"),I.getMessageCurtain().showPrompt(l);
else{l=l.getUserObject();var y=l.getArrModelList();y&&0<y.length?(l=c.get("deleteModelBeforeModelGroup","\u8bf7\u5148\u5220\u9664\u76ee\u5f55\u4e0b\u7684\u6a21\u578b\u518d\u5220\u9664\u76ee\u5f55\u3002"),I.getMessageCurtain().showPrompt(l)):(l=l.getModelGroupName(),l=c.get("confirmToDelGroupPrefix","\u5220\u9664\u201c").concat(l).concat(c.get("confirmToDelGroupSuffix","\u201d\u76ee\u5f55\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f")),y=new Yb(!0),y.setConfirmMsg(l),
y.showDialog(),$(".sa-ctrl-dialog-titlebar").removeClass("sa-ctrl-dialog-titlebar"))}},k=function(l,y){var J=Oa.getModelGroupTree().getSelectedNode();if(J){var M=J.getUserObject(),G=J.getParent(),z=G.getUserObject().getChildren();if(l?z[0].getModelGroupId()!==M.getModelGroupId():z[z.length-1].getModelGroupId()!==M.getModelGroupId()){y=z.concat([]);var Q=z.indexOf(M),qa=l?Q-1:Q+1;y[Q]=y.splice(qa,1,y[Q])[0];l=[];M=z.length;for(var Aa=0;Aa<y.length;Aa++){var $a=y[Aa],ob=new ab;ob.setModelGroupId($a.getModelGroupId());
ob.setSeq(M);l.push(ob.toJsonObject());M--}(new xa(ta.getRemoteImpl(),function(fb){z[Q]=z.splice(qa,1,z[Q])[0];G.removeChild(J);G.insertChild(J,qa);Oa.updateUiWhenNotRootGroup(!0)})).updateGroupSequence(l)}else I.getMessageCurtain().showPrompt(y)}},t=function(){k(!0,c.get("unableMoveUp","\u540c\u5c42\u7ea7\u7684\u7b2c\u4e00\u4e2a\u76ee\u5f55\u4e0d\u652f\u6301\u4e0a\u79fb\u3002"))},p=function(){k(!1,c.get("unableMoveDown","\u540c\u5c42\u7ea7\u7684\u6700\u540e\u4e00\u4e2a\u76ee\u5f55\u4e0d\u652f\u6301\u4e0b\u79fb\u3002"))}}
function kb(){var d;this.getJqUi=function(){d||a();return d};this.show=function(){d&&d.show()};this.hide=function(){d&&d.hide()};var a=function(){d=$("<div class='model-group-no-data'>");d.on("click",function(){mc(c.get("addGroup","\u65b0\u5efa\u76ee\u5f55"))});var g=$("<div class='model-group-no-data-add-btn'>");ma.background(g,"add-on");g.appendTo(d);g=$("<div class='model-group-no-data-add-group-text'>");g.text(c.get("addGroup","\u65b0\u5efa\u76ee\u5f55"));g.attr("title",c.get("addGroup","\u65b0\u5efa\u76ee\u5f55"));
g.appendTo(d);d.hide()}}function Cb(){var d,a;this.getUi=function(){if(!d){d=$("<div class='model-group-contain-children'>");a=new K;a.setEnabled(!1);a.setChecked(!0);a.setText(c.get("containChildren","\u5305\u542b\u4e0b\u7ea7"));a.setCustomStyle("font-size","14px");var e=a.getJqUi();na.layoutCtrlWithLRTB(e,25,null,135,8,null);e.on("click",g);e.appendTo(d);d.hide()}return d};this.setContainChildStatus=function(e,u,h){a.setEnabled(e);a.setChecked(u);h?d&&d.show():d&&d.hide()};var g=function(){if(a.isEnabled()){Bb=
!Bb;Ia=[];var e=P.matchModelByType(I.getCurrentGroupModel(Bb,I.getSelectedGroup()));P.clearModelSelectedStatus(e);yb&&(e=Vb(e,P.getToolbar().getSearchText()));P.showModelView(e,!1);X.occur(X.CONTAIN_CHILDREN_MODEL_GROUP,X.getContainChildrenStatus(Bb))}}}function Eb(){var d=this,a,g,e,u,h,q,w;this.getJqUi=function(){a||r();return a};var r=function(){a=$("<div class='model-container'>");g=new nb;g.getJqUi().appendTo(a);e=new Mb;e.getJqUi().appendTo(a);u=new da;var b=u.getJqUi();b.css("max-height","120px");
b.appendTo(a);b.hide();h=new Ua;b=[{width:50},{width:120,text:c.get("number","\u7f16\u7801")},{width:120,text:c.get("modelName","\u540d\u79f0")},{width:150,text:c.get("modelDesc","\u63cf\u8ff0")},{width:100,text:c.get("modelType","\u7c7b\u578b")},{width:100,text:c.get("currentLocker","\u5f53\u524d\u9501\u5b9a\u4eba")},{width:100,text:c.get("deployStatus","\u90e8\u7f72\u72b6\u6001")},{width:100,text:c.get("creator","\u521b\u5efa\u4eba")},{width:100,text:c.get("createTime","\u521b\u5efa\u65f6\u95f4")},
{width:100,text:c.get("modifier","\u6700\u540e\u4fee\u6539\u4eba")},{width:100,text:c.get("modifyTime","\u6700\u540e\u4fee\u6539\u65f6\u95f4")}];h.setArrHeadRowMap(b);h.setFunIsSearch(function(){return yb});h.setFunGetArrSelectedWhenSearchModel(function(){return[]});h.setFunSetArrSelectedWhenSearchModel(function(k){return null});h.setFunGetSearchBox(function(){return P.getToolbar().getSearchBox()});h.setJqModelNoDataView(P.getModelNoDataView());h.setJqSearchNoDataView(P.getSearchNoResultView());h.setDraggableAdjusting(!1);
h.getJqUi().appendTo(a);q=new tb;b=q.getJqUi();b.appendTo(a);b.hide();b=new Nb;b.setCallbackImmediately(function(){document.body.style.height=document.documentElement.clientHeight+"px";d.resizeAfterObserver();Oa.resizeAfterObserver();fc&&fc()});b.setDelay(250);b.observe()};this.matchModelByType=function(b){return g.matchModelByType(b)};this.getToolbar=function(){return g};this.getModelListView=function(){return h};this.getModelCardView=function(){return q};this.getIsListView=function(){return g.getIsListView()};
this.getModelNoDataView=function(){return e.getJqUi()};this.showModelListView=function(){q&&q.hide();h&&h.show()};this.showModelCardView=function(){h&&h.hide();q&&q.show()};this.setSplitPane=function(b){w=b};this.getSearchNoResultView=function(){return u.getJqUi()};this.showModelNoData=function(){e&&(e.show(),f())};this.hideModelNoData=function(){e&&e.hide()};this.showSearchNoResult=function(){u&&(u.show(),n())};this.hideSearchNoResult=function(){u&&u.hide()};this.showModelView=function(b,k){k&&I.sortModelByModifyTime(b);
d.getIsListView()?(d.showModelListView(),h.clearArrAllSelectedModels(),h.setArrAutoSelectedModel(Ia),h.setModels(b)):(d.showModelCardView(),q.setModels(b),q.updateModelCardView())};this.clearModelSelectedStatus=function(b){b.forEach(function(k){k.setSelected(!1)})};this.clearMetricSpreadStatus=function(b){b.forEach(function(k){k.setSpreadState(!1)})};this.getSelectedModels=function(){return d.getIsListView()?P.getModelListView().getSelectedModel():P.getModelCardView().getSelectedModel()};this.resizeAfterObserver=
function(){w.setSecondSize(document.documentElement.clientWidth-w.getNonemptyFirstWide()-28);g.resizeToolbarViewWidth();f();n();h.resizeViewHeight();d.getIsListView()&&h.updateUi(!0)};var f=function(){var b=h.getJqUi().height()-41-10-6;d.getModelNoDataView().css("height",b);var k=e.getJqUi().height();b=b<=k?101:(b-k)/2+101;d.getModelNoDataView().css("top",b)},n=function(){var b=h.getJqUi().height()-41-10-6;d.getSearchNoResultView().css("height",b);var k=u.getJqUi().height();b=b<=k?101:(b-k)/2+101;
d.getSearchNoResultView().css("top",b)}}function nb(){function d(){var Y,oa,Sa=!0;this.getJqUi=function(){Y||A();return Y};this.setClickListener=function(H){oa=H};this.setListView=function(H){Sa=H};this.getIsListView=function(){return Sa};var A=function(){Y=$("<div class='toolbar-model-view-switch'>");var H=$("<div class='model-list-view-icon'>");ma.background(H,"list-view-on");H.attr("title",c.get("listView","\u5217\u8868\u89c6\u56fe"));H.appendTo(Y);var Ka=$("<div class='model-card-view-icon'>");
ma.background(Ka,"card-view");Ka.attr("title",c.get("cardView","\u5361\u7247\u89c6\u56fe"));Ka.appendTo(Y);H.on("click",function(){ma.background(Ka,"card-view");ma.background(H,"list-view-on");oa(!0)});Ka.on("click",function(){ma.background(Ka,"card-view-on");ma.background(H,"list-view");oa(!1)});return Y}}var a=this,g,e,u,h,q,w,r,f,n,b,k,t,p=Da.ALL_TYPE,l=[Da.ALL_TYPE,Da.DATA_TABLE_MODEL,Da.METRICS_MODEL];this.getJqUi=function(){g||y();return g};this.getAllBtnWidth=function(){return R?e.width()+
h.width()+w.width():e.width()+(u.width()+56)+h.width()+r.width()+q.width()+w.width()+(n.width()+40)};this.getSearchBox=function(){return b};this.getUploadBtn=function(){return f};this.getSearchText=function(){return b.getText()};this.getViewSwitch=function(){return k};this.getIsListView=function(){return k&&k.getIsListView()};this.resizeToolbarViewWidth=function(){var Y=a.getAllBtnWidth();Y=a.getJqUi().width()-Y-180-100;b.getJqUi().css("width",Y);k.getJqUi().css("width",Y)};this.clearSearchStatus=
function(){yb=!1;b.clear();b.getJqUi().find("input").blur()};this.resetModelType=function(){t.setSelected(l[0])};var y=function(){g=$("<div class='main-page-toolbar'>");R?M():G();b=new O;b.setSearchListenerDelay(1E3);b.addSearchListener(function(){Db(b.getText())});b.setShowSearchIcon(!0);b.setPlaceholder(c.get("searchContent","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9"));var Y=b.getJqUi();Y.addClass("toolbar-model-search-box");Y.find("input").on("keydown",function(oa){13===(oa.keyCode||oa.which||
oa.charCode)&&Db(b.getText())});g.append(Y);J();k=new d;k.setClickListener(Rb);g.append(k.getJqUi())},J=function(){t=new hb;t.setItemModels(l);t.setCustomPainter(function(oa,Sa,A){if(A){switch(A){case Da.DATA_TABLE_MODEL:oa=c.get("dataTableModelType","\u6570\u636e\u8868\u6a21\u578b");break;case Da.METRICS_MODEL:oa=c.get("metricsModelType","\u6307\u6807\u6a21\u578b");break;default:oa=c.get("allType","\u5168\u90e8\u7c7b\u578b")}Sa.text(oa);Sa.attr("title",oa)}});t.setSelected(l[0]);t.addSelectedChangedListener(function(oa,
Sa,A){p=A;p&&(yb?Db(b.getText()):(oa=I.getCurrentGroupModel(Bb,I.getSelectedGroup()),oa=a.matchModelByType(oa),gc(oa),P.showModelView(oa,!0),nc(null,p)))});var Y=t.getJqUi();Y.css({width:"100px",height:"30px",right:" 80px",position:"absolute",top:"13px"});Y.appendTo(g)},M=function(){e=z("toolbar-btn-data-source-manage",c.get("dataSourceManage","\u6570\u636e\u6e90\u7ba1\u7406"),oc);g.append(e);h=z("toolbar-btn-data-permission-preset",c.get("dataPermission","\u6570\u636e\u6743\u9650"),function(){hc(!0)});
g.append(h);w=z("toolbar-btn-refresh-preset",c.get("refresh","\u5237\u65b0"),function(){X.occur(X.BUTTON_TYPE,X.REFRESH);Wb()},!0);g.append(w)},G=function(){e=z("toolbar-btn-data-source-manage",c.get("dataSourceManage","\u6570\u636e\u6e90\u7ba1\u7406"),oc);g.append(e);u=Q();h=z("toolbar-btn-data-permission",c.get("dataPermission","\u6570\u636e\u6743\u9650"),function(){hc(!0)});g.append(h);r=z("toolbar-btn-model-edit",c.get("editModelBtn","\u7f16\u8f91"),uc);g.append(r);q=z("toolbar-btn-model-delete",
c.get("deleteModelBtn","\u5220\u9664"),vc);g.append(q);w=z("toolbar-btn-refresh",c.get("refresh","\u5237\u65b0"),function(){X.occur(X.BUTTON_TYPE,X.REFRESH);Wb()});g.append(w);qa(n);g.append(n)},z=function(Y,oa,Sa,A){var H=$("<div>");H.addClass(Y);H.on("click",Sa);H.text(oa);H.attr("title",oa);A||(Y=$("<div class='toolbar-btn-split-line'>"),H.append(Y));return H},Q=function(){var Y=$("<div class='toolbar-btn-deploy'>");Y.on("click",wc);Y.text(c.get("deploy","\u90e8\u7f72"));Y.attr("title",c.get("deploy",
"\u90e8\u7f72"));g.append(Y);var oa=new pb;Aa(oa,xc,c.get("batchDeploy","\u6279\u91cf\u90e8\u7f72"));Aa(oa,yc,c.get("deployManager","\u90e8\u7f72\u7ba1\u7406"),!0);var Sa=$("<div class='deploy-btn-down-arrows'>");Sa.on("click",function(H){ob(Y,$(H.target),function(){return oa})});ma.background(Sa,"btn-down-arrows");var A=$("<div class='deploy-button-split-line'>");Sa.appendTo(g);A.appendTo(g);return Y},qa=function(){n=$("<div class='toolbar-btn-more'>");var Y=new pb;Aa(Y,zc,c.get("move","\u79fb\u52a8"));
Aa(Y,Ac,c.get("copy","\u590d\u5236"));Aa(Y,Bc,c.get("export","\u5bfc\u51fa"));f=$("<input type='file' id='uploadBtn'>");f.addClass("import-model-file");f.css("display","none");f.attr("accept",[".qing-md"]);f.on("change",function(A){var H=P.getJqUi();if(A=H.find("#uploadBtn").get(0).files[0]){var Ka=A.name,La=A.size,vb=Ka.lastIndexOf(".");Ka=Ka.substring(vb+1,Ka.length).toLowerCase();H.find("#uploadBtn").val("");"qing-md"!=Ka?I.getMessageCurtain().showPrompt(c.get("fileTypeIncorrect","\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002")):
0==La?I.getMessageCurtain().showPrompt(c.get("uploadFileIsNull","\u4e0a\u4f20\u7684\u6587\u4ef6\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002")):104857600<=La?I.getMessageCurtain().showPrompt(c.get("fileTooLarge","\u6587\u4ef6\u592a\u5927\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002")):(H=new ra,H.createJqUi(L,A,I,I.getMessageCurtain()),H.setFunRefreshModelGroup(Wb))}f.val("")});g.append(f);Aa(Y,function(){f.click()},c.get("import","\u5bfc\u5165"),!0);var oa=c.get("moreButton","\u66f4\u591a");
oa=$a(n,!0,function(){return Y},oa,oa);var Sa=$("<div class='btn-down-arrows'>");ma.background(Sa,"btn-down-arrows");Sa.appendTo(oa.getJqUi())},Aa=function(Y,oa,Sa,A){oa=new fa(oa);A?oa.setText(Sa):oa.setText(Sa+"...");Y.addItemModel(oa)},$a=function(Y,oa,Sa,A,H){var Ka=new Za;Ka.setText(A);Ka.setTooltips(H);Ka.setShowDropdownArrow(!1);Ka.addActionListener(function(La,vb){oa?fb(La.getJqUi(),vb,Sa,Y):Sa(La)});A=Ka.getJqUi();A.css({"background-color":"white"});A.find(".sa-ctrl-tbbtn-text").css({color:"#2b87f3"});
A.appendTo(Y);return Ka},ob=function(Y,oa,Sa){var A=Y.data("menu");if(A&&A.isShowing())Y.data("menu",null),A.hide();else{var H=Y.outerWidth()-20,Ka=Y.outerHeight(),La=Math.min(120,Math.max(H,120));A=new mb;A.setWidth(La);A.setModel(Sa());A.setHideListener(function(){Y.data("menu",null)});Y.data("menu",A);var vb=100<e.outerWidth()?90:110;A.getJqUi().find(".sa-ctrl-menu-item").css("color","#2B87F3");A.getJqUi().find(".sa-ctrl-menu-item-text").css("font-size","14px");Sa=P.getJqUi();H=[La-H-vb,Ka+3];
H=na.upwardCoordinate(Y[0],H,Sa[0]);A.show(Sa,H[0],H[1],oa,!0,[0,-Ka-2])}},fb=function(Y,oa,Sa,A){var H=Y.data("menu");if(H&&H.isShowing())Y.data("menu",null),H.hide();else{H=new mb;H.setModel(Sa());H.setHideListener(function(){Y.data("menu",null)});H.getJqUi().find(".sa-ctrl-menu-item").css("color","#2B87F3");H.getJqUi().find(".sa-ctrl-menu-item-text").css("font-size","14px");Y.data("menu",H);Sa=Y.prop("offsetLeft");var Ka=Y.prop("offsetHeight")+Y.prop("offsetTop");H.show(A,Sa,Ka,oa,!0)}},Db=function(Y){var oa,
Sa=I.getSelectedGroup();Sa&&(oa=a.matchModelByType(I.getCurrentGroupModel(Bb,Sa)));""!==Y?(yb=!0,oa=Vb(oa,Y),gc(oa),P.showModelView(oa,!0),nc(Y,p)):yb&&(yb=!1,gc(oa),P.showModelView(oa,!0),P.getModelCardView().resizeModelCardView())};this.matchModelByType=function(Y){if(p==Da.ALL_TYPE||!p)return Y;for(var oa=[],Sa=0;Sa<Y.length;Sa++){var A=Y[Sa];A.getModelType()==p&&oa.push(A)}return oa};var Rb=function(Y){var oa=P.getIsListView();oa!==Y&&(Ia=P.getSelectedModels(),!oa&&P.getModelCardView().resizeModelCardView(),
P.getToolbar().getViewSwitch().setListView(Y),Y=Oa.getModelGroupTree().getSelectedNode().getUserObject(),Y=a.matchModelByType(I.getCurrentGroupModel(Bb,Y)),yb&&(Y=Vb(Y,P.getToolbar().getSearchText())),P.showModelView(Y,!1),X.occur(X.MODEL_SHOW_METHOD,X.getModelShowMethod(oa)))}}function Mb(){var d;this.getJqUi=function(){if(!d){d=$("<div class='model-no-data-container'>");var a=$("<div class='model-no-data-icon'>");ma.background(a,"icon-empty");var g=$("<div class='model-no-data-text'>"),e=c.get("noModelTips",
"\u6682\u65e0\u6a21\u578b");g.text(e);a.appendTo(d);g.appendTo(d)}return d};this.hide=function(){d&&d.hide()};this.show=function(){d&&d.show()}}function Ua(){function d(A){KTDefaultCellRender.call(this,A);var H=this,Ka=this.paintCellUI;this.paintCellUI=function(La,vb){var W=H.getCurrentRowIdx(),jb=H.getCurrentRow(),Ga=H.getCurrentColIdx(),Wa=jb.getUserObject();(new v).setFormatString("yyyy-MM-dd HH:mm:ss");if(W<sb.getHeadRowCount())Ka(La,vb),0===Ga&&1===W&&(W=r&&r.isChecked(),r=new K,r.setChecked(W),
r.addCheckedListener(function(wb,gb){if(gb){var x=Object.keys(q);if(!Aa&&wb.isChecked())gb=I.createFacade(function(E){var Z=E.deployableModelIds;if((E=E.notDeployableModelIds)&&0<E.length){var Ta=g.getModelNameById(E[0]);E=1==E.length?c.get("selectedModelCycleRef",'"#1"\u6a21\u578b\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u65e0\u6cd5\u9009\u62e9\u3002').replace("#1",Ta):c.get("batchSelectedModelCycleRef",'"#1"\u7b49"#2"\u4e2a\u6a21\u578b\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u65e0\u6cd5\u9009\u62e9\u3002').replace("#1",
Ta).replace("#2",E.length);ob.showPrompt(E,2E3);fb&&fb(Z);wb.setChecked(!1)}else for(Z=0;Z<x.length;Z++)q[x[Z]].setChecked(wb.isChecked())},null,null,ta.getFunGetDeployRemoteImpl()()),gb.setShowBlocking(!0),gb.batchCheckModelCycleReference(x);else for(Ib&&Ib.setAutoSelectedModel([]),gb=0;gb<x.length;gb++)q[x[gb]].setChecked(wb.isChecked());if(k()&&wb.isChecked()){var D=t();for(gb=0;gb<e.length;gb++)D.push(e[gb]);p(D)}}}),W=r.getJqUi(),na.layoutCtrlCenterAlign(W,14),na.layoutCtrlMiddleAlign(W,22),
W.appendTo(La));else if(0===Ga){W=$(La);Aa&&W.css("border-right","1px solid rgb(229, 229, 229)");if(Wa instanceof ha)return;jb=Wa.getModelId();Ga=new K;W=Wa.getSelected();if(k())for(Fa in t()){if(Hb=Wa.getModelId(),Ub=t()[Fa].getModelId(),Hb===Ub){W=!0;break}}else for(var Fa=0,qb=w.length;Fa<qb;Fa++){var Hb=Wa.getModelId(),Ub=w[Fa];if(Hb===Ub){W=!0;break}}Ga.setUserObject(Wa);Aa||J&&Ga.addCheckedListener(J);Ga.setChecked(W);Ga.addCheckedListener(function(wb,gb){gb=wb.isChecked();var x=wb.getUserObject().getModelId();
q[x].setChecked(gb);wb.getUserObject().setSelected(gb);if(k()){var D=t();if(gb)D.push(wb.getUserObject());else for(var E=0;E<D.length;E++)D[E].getModelId()===x&&D.splice(E,1);p(D)}if(gb)0>w.indexOf(x)&&w.push(x);else for(E in w)x===w[E]&&w.splice(E,1);if(gb)for(wb=Object.keys(q),E=0,x=wb.length;E<x;E++)if(!q[wb[E]].isChecked())return;r.setChecked(gb)});q[jb]=Ga;W=Ga.getJqUi();na.layoutCtrlCenterAlign(W,14);na.layoutCtrlWithLRTB(W,null,null,16,10,null,null);W.appendTo(La)}else if(1===Ga)W=$("<div class='list-cell-item'>"),
Fa=Wa.getNumber(),W.attr("title",Fa),k()&&""!=$.trim(y().getText())?Lb(W,Fa,$.trim(y().getText())):W.text(Fa),W.appendTo(La);else if(2===Ga){Fa=$("<div class='model-name-info'>");jb=0;qb=$("<div class='model-cell-item-preset'>");R&&(jb=c.get("preset","\u9884\u7f6e"),qb.text(jb),jb=2!==jb.length?40:28,qb.appendTo(Fa));Ga=$("<div class='list-cell-item-name'>");if(Wa instanceof ha)Hb=Wa.getName();else{Hb=Wa.getModelName();var Tb=Wa.getModelType()}k()&&""!==$.trim(y().getText())?Lb(Ga,Hb,$.trim(y().getText())):
Ga.text(Hb);Ga.attr("title",Hb);Aa?(Hb=Sa(Wa),Da.METRICS_MODEL===Tb&&0<Wa.getMetricItems().length?(qb.css("left",21),qb=$("<div>"),Ub=$("<div>"),na.layoutCtrlWithLRTB(qb,null,null,26,12,null,16),na.layoutCtrlWithLRTB(Ub,null,null,16,0,null,16),ma.backgroundWithHover(Ub,Wa.isSpreadState()?"icon-expanded":"icon-collapsed"),qb.append(Ub),Fa.append(qb),qb.attr("iRowIdx",W),qb.css({cursor:"pointer","z-index":3}),qb.on("click",function(wb){wb.stopPropagation();var gb=$(wb.currentTarget).attr("iRowIdx"),
x=Wa.getMetricItems().length;wb=Wa.isSpreadState();Wa.setSpreadState(!wb);gb=parseInt(gb);x+=gb;for(gb+=1;gb<=x;gb++){var D=u.getRow(gb),E=D.getUserObject();E=wb?!0:!ic(E);D.setHide(E)}u.updateUI();Y()}),Hb.css("left",R?jb+26:"21px"),Ga.css("padding-left",R?jb+42:"37px")):Wa instanceof ha?(qb.css("left",38),Hb.css("left",R?jb+41:"36px"),Ga.css("padding-left",R?jb+58:"53px")):(W=$a?21:5,!$a&&R&&(W=0),qb.css("left",W),Hb.css("left",R?jb+W+5:W),Ga.css("padding-left",R?jb+W+21:W+16)),Ga.css("color","#2B87F3"),
Hb.appendTo(Fa),Fa.on("click",function(wb){Tb=Tb?Tb:Da.METRICS_MODEL;$b(L,Wa.getModelId(),Tb,Wa.getModelName(),U)})):Ga.css("color","#333");Ga.appendTo(Fa);Fa.appendTo(La)}else if(3===Ga)W=$("<div class='list-cell-item'>"),Fa=Wa.getDesc(),W.attr("title",Fa),k()&&""!=$.trim(y().getText())?Lb(W,Fa,$.trim(y().getText())):W.text(Fa),W.appendTo(La);else if(4===Ga)W=$("<div class='list-cell-item'>"),W.appendTo(La),Tb=Da.modelTypeTransformName(Wa.getModelType()),W.text(Tb),W.attr("title",Tb);else if(5===
Ga)W=$("<div class='list-cell-item'>"),Fa=Wa.getLockUserName(),k()&&""!=$.trim(y().getText())?Lb(W,Fa,$.trim(y().getText())):W.text(Fa),W.attr("title",Fa),W.appendTo(La);else if(6===Ga)W=$("<div>"),W.appendTo(La),Fa=Wa.getDeployed(),jb=za.deployStatusTransformText(Fa),qa?qa(W,Fa,jb):(Ga=$("<span>"),qb=$("<span>"),Ga.addClass("list-cell-item-deploy-status-circle"),qb.addClass("list-cell-item-deploy-status-text"),W.addClass("list-cell-item"),qb.text(jb),Fa===za.NONE_DEPLOYED?(Ga.css("background-color",
"#808080"),qb.css("color","#808080")):Fa===za.DEPLOYED?(Ga.css("background-color","#26B175"),qb.css("color","#26B175")):Fa===za.DEPLOYED_UPDATE&&(Ga.css("background-color","#ec7a09"),qb.css("color","#ec7a09")),qb.attr("title",jb),Ga.appendTo(W),qb.appendTo(W));else if(7===Ga)W=$("<div class='list-cell-item'>"),Fa=Wa.getCreator(),k()&&""!=$.trim(y().getText())?Lb(W,Fa,$.trim(y().getText())):W.text(Fa),W.attr("title",Fa),W.appendTo(La);else if(8===Ga){if(Wa instanceof ha)return;W=$("<div class='list-cell-item'>");
Fa=Wa.getDisplayCreateTime();W.text(Fa);W.attr("title",Fa);W.appendTo(La)}else if(9===Ga)W=$("<div class='list-cell-item'>"),Fa=Wa.getModifier(),k()&&""!=$.trim(y().getText())?Lb(W,Fa,$.trim(y().getText())):W.text(Fa),W.attr("title",Fa),W.appendTo(La);else if(10===Ga){if(Wa instanceof ha)return;W=$("<div class='list-cell-item'>");Fa=Wa.getDisplayModifyTime();W.text(Fa);W.attr("title",Fa);W.appendTo(La)}Ka(La,vb)}}function a(){this.getTailBlankForDragging=function(){return-1};this.isRowDraggable=function(A,
H){return!1};this.isColumnDraggable=function(A,H){return A.getColumnsCount()==H+1?!1:!0};this.getMinRowHeightLimited=function(A,H){return 3};this.getMinColumnWidthLimited=function(A,H){return 4};this.rowDraggedAction=function(A,H,Ka){var La=A.isSyncUIWhenModelChanged();A.setSyncUIWhenModelChanged(!0);H=A.getRow(H);H.setHeight(H.getHeight()+Ka);A.setSyncUIWhenModelChanged(La)};this.setMinColumnWidth=function(A){};this.columnDraggedAction=function(A,H,Ka){var La=A.isSyncUIWhenModelChanged();A.setSyncUIWhenModelChanged(!0);
H=A.getColumn(H);H.setWidth(H.getWidth()+Ka);A.setSyncUIWhenModelChanged(La);Y()}}var g=this,e=[],u,h,q={},w=[],r,f,n=!0,b,k,t,p,l,y,J,M=!0,G,z,Q=!0,qa,Aa=!0,$a,ob,fb,Db=[];this.setFunIsSearch=function(A){k=A};this.setFunGetArrSelectedWhenSearchModel=function(A){t=A};this.setFunSetArrSelectedWhenSearchModel=function(A){p=A};this.setArrHeadRowMap=function(A){l=A};this.setFunGetSearchBox=function(A){y=A};this.setFunCheckBoxListener=function(A){J=A};this.setArrAutoSelectedModel=function(A){Db=A;for(A=
0;A<Db.length;A++)w.push(Db[A].getModelId())};this.setGroupChangedClearChecked=function(A){M=A};this.setJqModelNoDataView=function(A){G=A};this.setJqSearchNoDataView=function(A){z=A};this.setDraggableAdjusting=function(A){n=A};this.setColumnFitVisibleWidth=function(A){Q=A};this.setFunDeployStatusCustomStyle=function(A){qa=A};this.setModelNameJumpToDesigner=function(A){Aa=A};this.setDeployMessageCurtain=function(A){ob=A};this.setFunAllSelectCallBack=function(A){fb=A};this.clearArrAllSelectedModels=
function(){w=[]};this.getSelectAllCheckBox=function(){return r};this.addSelectedModel=function(A){A.setSelected(!0);0>w.indexOf(A.getModelId())&&w.push(A.getModelId())};this.removeSelectedModel=function(A){A.setSelected(!1);for(var H in w)A.getModelId()===w[H]&&w.splice(H,1)};this.setModels=function(A){e=A;g.updateUi(!1)};this.refresh=function(){sb.refresh(u);r&&r.setChecked(oa())};this.getJqUi=function(){f||Rb();return f};this.show=function(){f&&f.show()};this.hide=function(){f&&f.hide()};this.resizeViewHeight=
function(){f&&f.css({height:document.documentElement.clientHeight-305+"px"})};this.relayoutViews=function(){u&&u.relayoutViews()};this.updateUi=function(A){h&&h.show();var H;u||Rb();sb.clear(u);b&&b.removeAllSelecteds();var Ka=l.length;u.addColumns(Ka);var La=sb.createHeadRow(u);La.setHeight(28);for(H=0;H<Ka;H++)u.getColumn(H).setWidth(l[H].width),l[H].text&&La.getCell(H).setValue(l[H].text);H=new d(u);H.setOutsideVisible(!1);u.setCellRender(H);A||(q={});M&&(w=[]);A=[];Ka=[];var vb=La=3;for(H=0;H<
e.length;H++){var W=e[H];A.push(W);if(W.getModelType()===Da.METRICS_MODEL&&0<W.getMetricItems().length){for(var jb=W.getMetricItems(),Ga=jb.length,Wa=0;Wa<Ga;Wa++){var Fa=jb[Wa];Fa.setSpreadState(W.isSpreadState());A.push(Fa)}La+=Ga;W=new KTMergeBlock(vb,La,0,0);Ka.push(W);vb+=Ga;$a=!0}La+=1;vb+=1}u.addMergeBlocks(Ka);La=new KTBorderStyle;La.setBottomBorderWidth(1);La.setBottomBorderPen("solid");La.setBottomBorderColor("#e5e5e5");H=0;for(Ka=A.length;H<Ka;H++)Ga=A[H],vb=sb.createRow(u,!1),vb.setBorder(La),
vb.setUserObject(Ga),vb.setHeight(40),Ga instanceof ha&&(Ga=Ga.isSpreadState()?!ic(Ga):!0,vb.setHide(Ga));0<e.length?(G&&G.hide(),z&&z.hide()):(!k()&&G.show()&&z.hide(),k()&&G.hide()&&z.show());sb.refresh(u);r&&r.setChecked(oa())};this.getSelectedModel=function(){for(var A=[],H=Object.keys(q),Ka=0,La=H.length;Ka<La;Ka++){var vb=H[Ka];if(q[vb].isChecked())for(var W=0;W<e.length;W++){var jb=e[W];vb===jb.getModelId()&&A.push(jb)}}return A};this.getCheckBoxMap=function(){return q};this.getModelNameById=
function(A){for(var H=0;H<e.length;H++)if(A==e[H].getModelId())return e[H].getModelName()};var Rb=function(){f=$("<div class='model-list-view'>");u=sb.createTable();u.setColumnFitVisibleWidth(Q);n&&u.setDraggableAdjusting(!0,3,0,new a);sb.setupSingleRowSelection(u);b=u.getSelectionModel();h=$(u.getUI());na.layoutCtrlWithLRTB(h,5,5,null,5,5,null);f.append(h)},Y=function(){if(b&&b.hasSelected()){var A=b.getSelected();A&&b.addSelected(A)}},oa=function(){var A=Object.keys(q);if(0==A.length)return!1;for(var H=
0;H<A.length;H++)if(!q[A[H]].isChecked())return!1;return!0},Sa=function(A){var H=$("<div class='model-icon-info'>");A instanceof ha?(A="metric-icon-small",H.css("left","20px")):A=Da.getModelIconByType(A.getModelType())+"-small";ma.background(H,A);return H}}function tb(){var d=this,a,g=[],e=[],u;this.getJqUi=function(){a||(a=$("<div class='model-card-view'>"));return a};this.setModels=function(h){g=h};this.empty=function(){a&&a.empty()};this.hide=function(){a&&a.hide()};this.show=function(){a&&a.show()};
this.showClickStatus=function(h){Da.METRICS_MODEL!==h.getModelType()&&d.resizeModelCardView();e.forEach(function(q){q.getModel().getModelId()===h.getModelId()?q.setClickStatus(!0):q.setClickStatus(!1)})};this.resizeModelCardView=function(){u&&u.close();a&&a.css("width","100%")};this.getMetricsInfoPanel=function(){return u};this.setMetricsInfoPanel=function(h){u=h};this.updateModelCardView=function(){d.empty();if(0!==g.length){P.hideModelNoData();P.hideSearchNoResult();for(var h=d.getMetricsInfoPanel(),
q=h&&h.getJqUi().is(":visible"),w=$(document.createDocumentFragment()),r=0;r<g.length;r++){var f=g[r];q&&h.getModel().getModelId()===f.getModelId()&&h.setModel(f);f=new Jb(f);e.push(f);f.getJqUi().appendTo(w)}w.appendTo(a);q&&h.update()}else yb?(P.hideModelNoData(),P.showSearchNoResult()):(P.hideSearchNoResult(),P.showModelNoData())};this.getSelectedModel=function(){for(var h=[],q=0;q<g.length;q++){var w=g[q];w.getSelected()&&h.push(w)}return h}}function Jb(d){var a,g;this.getJqUi=function(){a||e(d);
return a};this.getSelected=function(){return g.isChecked()};this.setClickStatus=function(h){h?a.addClass("model-card-item-selected"):a.removeClass("model-card-item-selected")};this.getModel=function(){return d};var e=function(h){var q=P.getToolbar().getSearchText();a=$("<div class='model-card-item'>");a.on("click",function(l){P.getModelCardView().showClickStatus(h)});var w=$("<div class='model-card-item-icon'>");ma.background(w,Da.getModelIconByType(h.getModelType())+"-middle");var r=$("<div class='model-card-item-name'>"),
f=h.getModelName();yb&&""!==$.trim(q)?Lb(r,f,$.trim(q)):r.text(f);r.attr("title",f);r.on("click",function(l){l.stopPropagation();$b(L,h.getModelId(),h.getModelType(),h.getModelName(),U)});var n=0;R&&(f=$("<div class='model-card-item-preset'>"),n=c.get("preset","\u9884\u7f6e"),f.text(c.get("preset","\u9884\u7f6e")),n=2!==n.length?40:28,w.css("left",n+20),r.css("left",n+49),a.append(f));f=new ya;f.setIconType(ya.ICON_TYPE_INFO);f.setTipsSize(310,290);f.setTipsHtml(u(h));f=f.getJqUi();na.layoutCtrlWithLRTB(f,
null,46,null,20,null,null);g=new K;g.setChecked(h.getSelected());n=g.getJqUi();na.layoutCtrlWithLRTB(n,null,15,16,17,null,null);g.addCheckedListener(function(l,y){h.setSelected(l.isChecked())});var b=$("<div class='model-card-item-description'>"),k=h.getDesc();b.attr("title",k);yb&&""!==$.trim(q)?Lb(b,k,$.trim(q)):b.text(k);k=$("<div class='model-card-item-lock-status'>");var t=c.get("tipsModelLocker","\u5f53\u524d\u9501\u5b9a\u4eba")+c.get("colon","\uff1a"),p="";R||(p=h.getLockUserName())&&0!==p.length||
(p=c.get("noLocked","\u6682\u672a\u9501\u5b9a"));yb&&""!==$.trim(q)?(k.text(t),Lb(k,p,$.trim(q))):k.text(t.concat(p));k.attr("title",t.concat(p));q=$("<div class='model-card-item-deploy-status'>");t=h.getDeployed();p=za.deployStatusTransformText(t);q.text(p);t===za.NONE_DEPLOYED?q.css("color","#808080"):t===za.DEPLOYED?q.css("color","#26B175"):t===za.DEPLOYED_UPDATE&&q.css("color","#ec7a09");a.append(w);a.append(r);a.append(f);a.append(n);a.append(b);a.append(k);a.append(q);h.getModelType()===Da.METRICS_MODEL&&
0<h.getMetricItems().length&&(w=$("<div class = 'model-card-preview-metrics'>"),w.text(c.get("previewMetrics","\u67e5\u770b\u6307\u6807")+" >>"),w.on("click",function(){P.getModelCardView().getJqUi().css("width","calc(100% - 300px)");var l=P.getModelCardView().getMetricsInfoPanel();l||(l=new Sb,P.getModelCardView().setMetricsInfoPanel(l));l.setFunCloseMetricsPanel(P.getModelCardView().resizeModelCardView);l.show();l.setModel(h);l.getJqUi().appendTo(P.getJqUi());l.update()}),a.append(w));return a},
u=function(h){var q=P.getToolbar().getSearchText(),w=function(k,t){var p=$("<div class='model-card-item-tips-info'>"),l=$("<span>");l.text(k+c.get("colon","\uff1a"));k=$("<span>");yb&&""!==$.trim(q)?Lb(k,t,$.trim(q)):k.text(t);p.attr("title",t);p.append(l);p.append(k);return p},r=$("<div>");na.layoutCtrl(r,null,null,280,270);var f=Da.getModelIconByType(h.getModelType())+"-tips",n=$("<div>");ma.background(n,f);na.layoutCtrl(n,0,0,36,36);f=$("<div class='model-info-name'>");var b=h.getModelName();yb&&
""!==$.trim(q)?Lb(f,b,$.trim(q)):f.text(b);f.attr("title",h.getModelName());r.append(n);r.append(f);n=$("<div>");na.layoutCtrl(n,null,38,280,234);n.append(w(c.get("tipsModelNumber","\u7f16\u7801"),h.getNumber()));n.append(w(c.get("tipsModelDesc","\u63cf\u8ff0"),h.getDesc()));n.append(w(c.get("tipsModelType","\u7c7b\u578b"),Da.modelTypeTransformName(h.getModelType())));f=R?"":h.getLockUserName()?h.getLockUserName():c.get("noLocked","\u6682\u672a\u9501\u5b9a");n.append(w(c.get("tipsModelLocker","\u5f53\u524d\u9501\u5b9a\u4eba"),
f));n.append(w(c.get("tipsModelDeployStatus","\u90e8\u7f72\u72b6\u6001"),za.deployStatusTransformText(h.getDeployed())));n.append(w(c.get("tipsModelCreator","\u521b\u5efa\u4eba"),h.getCreator()));(new v).setFormatString("yyyy/MM/dd HH:mm:ss");f=h.getDisplayCreateTime();n.append(w(c.get("tipsModelCreateTime","\u521b\u5efa\u65f6\u95f4"),f));n.append(w(c.get("tipsModelModifier","\u6700\u540e\u4fee\u6539\u4eba"),h.getModifier()));h=h.getDisplayModifyTime();n.append(w(c.get("tipsModelModifyTime","\u6700\u540e\u4fee\u6539\u65f6\u95f4"),
h));r.append(n);return r}}function Sb(){function d(f){KTDefaultCellRender.call(this,f);var n=this,b=this.paintCellUI;this.paintCellUI=function(k,t){var p=n.getCurrentRowIdx(),l=n.getCurrentRow(),y=n.getCurrentColIdx(),J=l.getUserObject();l=P.getToolbar().getSearchText();if(p<sb.getHeadRowCount())b(k,t);else if(0===y){p=$("<div class='metric-name-info'>");y=$("<div class='metric-cell-item-name'>");y.on("click",function(){$b(L,u.getModelId(),Da.METRICS_MODEL,u.getModelName(),U)});var M=$("<div class='metric-cell-item-icon'>");
ma.background(M,"metric-icon-small");var G=J.getName();yb&&""!==$.trim(l)?Lb(y,G,$.trim(l)):y.text(G);y.attr("title",G);y.appendTo(p);M.appendTo(p);p.appendTo(k)}else 1===y?(p=$("<div class='metric-cell-item'>"),y=J.getDesc(),yb&&""!==$.trim(l)?Lb(p,y,$.trim(l)):p.text(y),p.attr("title",y),p.appendTo(k)):2===y&&(l=$("<div class='model-metrics-detail-preview'>"),l.on("click",function(){Cc(u,J.getMetric())}),l.attr("title",c.get("metricsPreview","\u6307\u6807\u67e5\u770b")),ma.backgroundWithHover(l,
"preview"),l.appendTo(k));b(k,t)}}var a,g,e,u,h,q=[{width:120,text:c.get("metricsName","\u6307\u6807\u540d\u79f0")},{width:120,text:c.get("metricsDesc","\u6307\u6807\u63cf\u8ff0")},{width:50,text:""}],w;this.getJqUi=function(){a||r();return a};this.setModel=function(f){u=f};this.getModel=function(){return u};this.setFunCloseMetricsPanel=function(f){w=f};this.update=function(){var f=u.getModelName();g.text("");var n=P.getToolbar().getSearchText();yb&&""!==$.trim(n)?Lb(g,f,$.trim(n)):g.text(f);g.attr("title",
f);sb.clear(h);n=q.length;h.addColumns(n);var b=sb.createHeadRow(h);b.setHeight(28);for(f=0;f<n;f++)h.getColumn(f).setWidth(q[f].width),b.getCell(f).setValue(q[f].text);f=new d(h);f.setOutsideVisible(!1);h.setCellRender(f);n=u.getMetricItems();for(f=0;f<n.length;f++){b=n[f];var k=sb.createRow(h,!1),t=new KTBorderStyle;t.setBottomBorderWidth(1);t.setBottomBorderPen("solid");t.setBottomBorderColor("#e5e5e5");k.setBorder(t);k.setUserObject(b);k.setHeight(40);k.setHide(!ic(b))}sb.refresh(h)};var r=function(){a=
$("<div class='model-metrics-panel'>");var f=$("<div class='model-metrics-panel-title'>"),n=$("<div class='model-metrics-panel-model-icon'>");ma.background(n,Da.getModelIconByType(Da.METRICS_MODEL)+"-tips");g=$("<div class='model-metrics-panel-model-name'>");var b=u.getModelName();g.attr("title",b);g.on("click",function(){$b(L,u.getModelId(),Da.METRICS_MODEL,u.getModelName(),U)});if(R){b=$("<div class='model-metric-panel-preset'>");var k=$("<div class='model-metric-preset-text'>");k.text(c.get("preset",
"\u9884\u7f6e"));ma.background(b,"icon-preset-big");k.appendTo(b);f.append(b)}f.append(n);f.append(g);n=$("<div class='model-metrics-panel-table'>");h=sb.createTable();h.setColumnFitVisibleWidth(!0);h.setDraggableAdjusting(!1);e=$(h.getUI());na.layoutCtrlWithLRTB(e,5,5,"calc(100% - 10px)",0,0,"calc(100% - 10px)");n.append(e);b=$("<div class='model-metrics-panel-close-button'>");k=$("<div>");k.text(c.get("close","\u5173\u95ed"));k.appendTo(b);b.on("click",function(){w&&w()});a.append(f);a.append(n);
a.append(b)};this.close=function(){a&&a.hide()};this.show=function(){a&&a.show()}}function Pb(d){cb.call(this);var a=this.protectedMethod,g=this,e,u,h,q;(function(){a.setTitle(d);a.setSelectable(!0);a.setContentPaneCreator(function(){g.setSize(430,350);var f=$("<div>"),n=$("<div>");n.css({"float":"left",width:"auto",position:"relative",left:"0px"});var b=new Pa;b.setRequired(!0);b.setText(c.get("number","\u7f16\u7801"));b=b.getJqUi();b.css({position:"relative",height:"23px","margin-right":"5px","float":"left"});
var k=new ya;k.setIconType(ya.ICON_TYPE_QUESTION);k.setTipsSize(310,40);k.setTipsText(c.get("numberTips","\u6a21\u578b\u7f16\u7801\u662f\u6a21\u578b\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u521b\u5efa\u6a21\u578b\u540e\u65e0\u6cd5\u4fee\u6539\u3002"));k=k.getJqUi();k.css({position:"relative",top:"4px",width:"16px",height:"16px","float":"right"});h=new rb;if(e.getModelId()){var t=e.getNumber()?e.getNumber():"";h.setText(t);h.setEnabled(!1)}var p=c.get("numberPlaceholder","\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934");
h.setPlaceholder(p);t=h.getJqUi();var l=t.find(".sa-ctrl-textfield-input");l.attr("title",p);na.makeTextOmissible(l);p=new Pa;p.setRequired(!0);p.setText(c.get("dataModelName","\u540d\u79f0"));p=p.getJqUi();u=new rb;e&&u.setText(e.getModelName());l=u.getJqUi();var y=new Pa;y.setText(c.get("dataModelDesc","\u63cf\u8ff0"));y=y.getJqUi();q=new Ba;e&&q.setText(e.getDesc());var J=q.getJqUi();J.find(".sa-ctrl-textarea-real").css("font-family","Microsoft YaHei");b.appendTo(n);k.appendTo(n);n.appendTo(f);
t.appendTo(f);p.appendTo(f);l.appendTo(f);y.appendTo(f);J.appendTo(f);na.layoutCtrl(t,84,0,300,23);na.layoutCtrl(p,0,49,70,23);na.layoutCtrl(l,84,49,300,23);na.layoutCtrl(y,0,99,70,23);na.layoutCtrl(J,84,105,300,120);return f});a.setFooterPaneCreator(function(f){var n=new F(c.get("confirm","\u786e\u5b9a"));n.setHighlight(!0);var b=n.getJqUi();b.addClass("sa-ctrl-dialog-footer-ok");b.appendTo(f);n.addActionListener(function(k){k=$.trim(h.getText());var t=$.trim(u.getText()),p=$.trim(q.getText());e.getModelId()?
r(k,t,p):w(k,t,p);return!0});n=new F(c.get("cancel","\u53d6\u6d88"));n.setHighlight(!1);b=n.getJqUi();b.addClass("sa-ctrl-dialog-footer-cancel");b.appendTo(f);n.addActionListener(function(){a.destroy();return!0})});a.setClosingAction(function(f){})})();this.setModel=function(f){e=f};var w=function(f,n,b){var k=I.getSelectedGroup(),t=k.getArrModelList(),p=I.getUrlParam("fromPageClientId"),l=dc(f,"");if(l||(l=ec(n,b)))return a.getMessageCurtain().showPrompt(l),!1;for(var y=0;y<t.length;y++){var J=t[y];
if(J.getModelType()===e.getModelType()&&J.getModelName()===n){l=c.get("groupHasSameDataModel","\u8be5\u76ee\u5f55\u4e0b\u5b58\u5728\u540c\u540d#1\u3002").replace("#1",Da.modelTypeTransformName(e.getModelType()));break}}if(l)return a.getMessageCurtain().showPrompt(l),!1;l=new Qa;l.setNumber(f);l.setModelName(n);l.setDesc(b);l.setModelType(e.getModelType());l.setModelSetId(L);l.setGroupId(k.getModelGroupId());f=I.createFacade(function(M){a.destroy();if(!M)return!1;P.getToolbar().clearSearchStatus();
var G=new Qa;G.fromJsonObject(M);Kb.push(G);t.push(G);M=I.getCurrentGroupModel(Bb,k);P.showModelView(M,!1);M=c.get("addModelSuccess","\u65b0\u5efa\u6a21\u578b\u6210\u529f\u3002");I.getMessageCurtain().showSuccess(M,2E3);X.occur(X.MODEL_TYPE,X.getModelType(G.getModelType()));return!0},function(M,G){return 20003101===M?(M=c.get("groupHasSameDataModel","\u8be5\u76ee\u5f55\u4e0b\u5b58\u5728\u540c\u540d#1\u3002").replace("#1",Da.modelTypeTransformName(e.getModelType())),a.getMessageCurtain().showPrompt(M),
!0):20003003===M?(a.destroy(),M=c.get("modelGroupNotExist","#1\u76ee\u5f55\u4e0d\u5b58\u5728\u3002").replace("#1","\u201c"+k.getModelGroupName()+"\u201d"),I.getMessageCurtain().showPrompt(M),!0):20003109===M?(M=c.get("numberDuplicate","\u7f16\u7801\u5df2\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"),a.getMessageCurtain().showPrompt(M),!0):20003202===M?(M=c.get("withoutOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\u3002"),I.getMessageCurtain().showPrompt(M),!0):!1});f.setShowBlocking(!0);
f.createModel(l,p)},r=function(f,n,b){var k=I.getSelectedGroup(),t=e.getNumber(),p=e.getModelName(),l=e.getDesc();if(f===t&&n===p&&b===l)a.destroy();else{var y;za.NONE_DEPLOYED===e.getDeployed()&&(y=dc(f,e.getModelId()));if(y||(y=ec(n,b)))return a.getMessageCurtain().showPrompt(y),!1;t=!1;p=k.getArrModelList();for(l=0;l<p.length;l++){var J=p[l];if(J.getModelId()!==e.getModelId()&&J.getModelName()===n&&J.getModelType()===e.getModelType()){t=!0;break}}t&&(y=c.get("groupHasSameDataModel","\u8be5\u76ee\u5f55\u4e0b\u5b58\u5728\u540c\u540d#1\u3002").replace("#1",
Da.modelTypeTransformName(e.getModelType())));if(y)return a.getMessageCurtain().showPrompt(y),!1;var M=e.getModelType();y=new Qa;y.setModelId(e.getModelId());y.setNumber(f);y.setModelName(n);y.setDesc(b);y.setModelType(M);y.setModelSetId(L);y.setGroupId(e.getGroupId());t=I.createFacade(function(G){a.destroy();if(!G)return!1;var z=new Qa;z.fromJsonObject(G);e.setModelName(n);e.setNumber(f);e.setDesc(b);e.setModifier(z.getModifier());e.setModifyTime(z.getModifyTime());G=I.getCurrentGroupModel(Bb,k);
P.getToolbar().clearSearchStatus();P.getToolbar().resetModelType();P.showModelView(G,!0);G=c.get("editModelSuccess","\u7f16\u8f91\u6a21\u578b\u6210\u529f\u3002");I.getMessageCurtain().showSuccess(G,2E3);X.occur(X.MODEL_TYPE,X.getModelType(z.getModelType()));return!0},function(G,z){return 20003101===G?(G=c.get("groupHasSameDataModel","\u8be5\u76ee\u5f55\u4e0b\u5b58\u5728\u540c\u540d#1\u3002").replace("#1",Da.modelTypeTransformName(M)),a.getMessageCurtain().showPrompt(G),!0):20003102===G?(a.destroy(),
G=c.get("moveModelNotExist","\u6a21\u578b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),I.getMessageCurtain().showPrompt(G,2E3),!0):20003109===G?(G=c.get("numberDuplicate","\u7f16\u7801\u5df2\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"),a.getMessageCurtain().showPrompt(G),!0):20003202===G?(G=c.get("withoutOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\u3002"),I.getMessageCurtain().showPrompt(G),!0):!1});t.setShowBlocking(!0);t.editModel(y)}}}function Xb(d){cb.call(this);var a=
this.protectedMethod,g=this,e,u;(function(){a.setSelectable(!0);a.setContentPaneCreator(function(){g.setSize(360,270);var r=$("<div>"),f=new Pa;f.setRequired(!0);f.setText(c.get("modelGroupName","\u540d\u79f0"));f=f.getJqUi();e=new rb;if(!d){var n=I.getSelectedGroup();e.setText(n.getModelGroupName())}n=e.getJqUi();f.appendTo(r);n.appendTo(r);na.layoutCtrl(f,34,40,70,23);na.layoutCtrl(n,34,70,260,23);return r});a.setFooterPaneCreator(function(r){var f=new F(c.get("confirm","\u786e\u5b9a"));f.setHighlight(!0);
var n=f.getJqUi();n.addClass("sa-ctrl-dialog-footer-ok");n.appendTo(r);f.addActionListener(function(b){if(!d)return w(),!0;if(u)return h(),!0;q();return!0});f=new F(c.get("cancel","\u53d6\u6d88"));f.setHighlight(!1);n=f.getJqUi();n.addClass("sa-ctrl-dialog-footer-cancel");n.appendTo(r);f.addActionListener(function(b){a.destroy();return!0})});a.setClosingAction(function(r){})})();this.setSubDir=function(r){u=r};this.setModelType=function(r){};this.setTitle=function(r){a.setTitle(r)};this.textFieldFocus=
function(){e&&e.requestFocus()};var h=function(){var r=$.trim(e.getText()),f;""!==r&&50<r.length?f=c.get("groupNameTooLong","\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):""===r?f=c.get("groupNameCannotBeEmpty","\u8bf7\u8f93\u5165\u76ee\u5f55\u540d\u79f0\u3002"):jc(r)&&(f=c.get("groupNameExist","\u540d\u79f0\u91cd\u590d\u3002"));if(f)a.getMessageCurtain().showPrompt(f);else{var n=I.getSelectedGroup();f=new ab;f.setModelSetId(L);f.setModelGroupName(r);f.setParentId(n.getModelGroupId());
r=I.createFacade(function(b){a.destroy();if(!b)return!1;var k=c.get("addGroupSuccess","\u65b0\u5efa\u76ee\u5f55\u6210\u529f\u3002");I.getMessageCurtain().showSuccess(k,2E3);!P.getIsListView()&&P.getModelCardView().resizeModelCardView();k=new N(ac);k.fromJsonObject(b);k.setLevel(n.getLevel()+1);k.setParentNode(n);n.getChildren().push(k);b=Oa.getModelGroupTree().getSelectedNode();if(b instanceof ea.LeafNode){b=b.getParent().getAllChildren();for(var t=0;t<b.length;t++)if(b[t].getUserObject().getModelGroupId()===
n.getModelGroupId()){var p=t;break}Oa.createGroupOnLeafNode(k,n,p)}else Oa.createGroupOnBranchNode(k,b.getAllChildren().length);Gb.push(k);P.showModelView([],!1);Oa.updateUiWhenNotRootGroup();X.occur(X.MODEL_GROUP_LEVEL,k.getLevel())},function(b,k){return 20003001===b?(b=c.get("groupNameExist","\u540d\u79f0\u91cd\u590d\u3002"),a.getMessageCurtain().showPrompt(b),!0):20003003===b?(a.destroy(),b=c.get("modelGroupNotExist","#1\u76ee\u5f55\u4e0d\u5b58\u5728\u3002").replace("#1","\u201c"+n.getModelGroupName()+
"\u201d"),I.getMessageCurtain().showPrompt(b),!0):20003301===b?(a.destroy(),bc(),!0):20003203===b?(b=c.get("withoutOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\u3002"),a.destroy(),I.getMessageCurtain().showPrompt(b),!0):!1});r.setShowBlocking(!0);r.createModelGroup(f)}},q=function(){var r=$.trim(e.getText()),f;""!==r&&50<r.length?f=c.get("groupNameTooLong","\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):""===r?f=c.get("groupNameCannotBeEmpty","\u8bf7\u8f93\u5165\u76ee\u5f55\u540d\u79f0\u3002"):
jc(r)&&(f=c.get("groupNameExist","\u540d\u79f0\u91cd\u590d\u3002"));if(f)a.getMessageCurtain().showPrompt(f);else{var n=Oa.getModelGroupTree().getSelectedNode(),b=n.getUserObject();b.getParentId()?(f=new ab,f.setModelSetId(L),f.setModelGroupName(r),f.setParentId(b.getParentId()),r=I.createFacade(function(k){a.destroy();if(!k)return!1;var t=c.get("addGroupSuccess","\u65b0\u5efa\u76ee\u5f55\u6210\u529f\u3002");!P.getIsListView()&&P.getModelCardView().resizeModelCardView();I.getMessageCurtain().showSuccess(t,
2E3);var p=b.getParentNode();t=new N(ac);t.fromJsonObject(k);t.setLevel(b.getLevel());t.setParentNode(p);p.getChildren().push(t);k=n.getParent().getAllChildren();Gb.push(t);P.showModelView([],!1);p=Oa.getModelGroupTree().getSelectedNode().getParent();Oa.createGroupOnBranchNode(t,k.length,p);Oa.updateUiWhenNotRootGroup()},function(k,t){return 20003001===k?(k=c.get("groupNameExist","\u540d\u79f0\u91cd\u590d\u3002"),a.getMessageCurtain().showPrompt(k),!0):20003003===k?(a.destroy(),k=c.get("modelGroupNotExist",
"#1\u76ee\u5f55\u4e0d\u5b58\u5728\u3002").replace("#1","\u201c"+b.getModelGroupName()+"\u201d"),I.getMessageCurtain().showPrompt(k),!0):20003301===k?(a.destroy(),bc(),!0):20003203===k?(k=c.get("withoutOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\u3002"),a.destroy(),I.getMessageCurtain().showPrompt(k),!0):!1}),r.setShowBlocking(!0),r.createModelGroup(f)):h()}},w=function(){var r=$.trim(e.getText()),f=I.getSelectedGroup();if(r===f.getModelGroupName())a.destroy();else{var n;""!==r&&50<r.length?
n=c.get("groupNameTooLong","\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):""===r?n=c.get("groupNameCannotBeEmpty","\u8bf7\u8f93\u5165\u76ee\u5f55\u540d\u79f0\u3002"):jc(r)&&(n=c.get("groupNameExist","\u540d\u79f0\u91cd\u590d\u3002"));n?a.getMessageCurtain().showPrompt(n):(n=new ab,n.setModelGroupId(f.getModelGroupId()),n.setModelSetId(L),n.setModelGroupName(r),n.setParentId(f.getParentId()),r=I.createFacade(function(b){if(!b)return!1;a.destroy();var k=c.get("editGroupSuccess",
"\u7f16\u8f91\u76ee\u5f55\u6210\u529f\u3002");I.getMessageCurtain().showSuccess(k,2E3);k=new N(ac);k.fromJsonObject(b);f.setModelGroupName(k.getModelGroupName());Oa.getModelGroupTree().refresh()},function(b,k){return 20003001===b?(b=c.get("groupNameExist","\u540d\u79f0\u91cd\u590d\u3002"),a.getMessageCurtain().showPrompt(b),!0):20003003===b?(a.destroy(),b=c.get("modelGroupNotExist","#1\u76ee\u5f55\u4e0d\u5b58\u5728\u3002").replace("#1","\u201c"+f.getModelGroupName()+"\u201d"),I.getMessageCurtain().showPrompt(b),
!0):20003301===b?(a.destroy(),bc(),!0):20003203===b?(b=c.get("withoutOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\u3002"),I.getMessageCurtain().showPrompt(b),!0):!1}),r.setShowBlocking(!0),r.editModelGroup(n))}}}function Yb(d){cb.call(this);var a=this.protectedMethod,g=this,e,u;(function(){a.setTitle(c.get("operateConfirm","\u64cd\u4f5c\u786e\u8ba4"));a.setSelectable(!0);a.setContentPaneCreator(function(){g.setSize(400,300);var w=$("<div>"),r=$("<span>");m.background(r,"msg-delete");var f=$("<span class='model-delete-dialog'>");
f.text(u);f.attr("title",u);r.appendTo(w);f.appendTo(w);na.layoutCtrl(r,140,20,98,80);na.layoutCtrl(f,0,125,370,23);return w});a.setFooterPaneCreator(function(w){var r=new F(c.get("confirm","\u786e\u5b9a"));r.setHighlight(!0);var f=r.getJqUi();f.addClass("sa-ctrl-dialog-footer-ok");f.appendTo(w);r.addActionListener(function(n){d?h():q(e);return!0});r=new F(c.get("cancel","\u53d6\u6d88"));r.setHighlight(!1);f=r.getJqUi();f.addClass("sa-ctrl-dialog-footer-cancel");f.appendTo(w);r.addActionListener(function(n){a.destroy();
return!0})});a.setClosingAction(function(w){})})();this.setConfirmMsg=function(w){u=w};this.setArrDeleteModel=function(w){e=w};var h=function(){var w=Oa.getModelGroupTree().getSelectedNode().getUserObject(),r=w.getModelGroupId(),f=w.getModelGroupName(),n=I.createFacade(function(b){a.destroy();b=c.get("deleteModelGroupSuccess","\u5220\u9664\u76ee\u5f55\u6210\u529f\u3002");I.getMessageCurtain().showSuccess(b,2E3);b=w.getParentNode().getChildren();for(var k=0;k<b.length;k++)if(b[k].getModelGroupId()===
r){b.splice(k,1);break}for(k=0;k<Gb.length;k++)Gb[k].getModelGroupId()===r&&Gb.splice(k,1);Oa.removeGroupLeafNode();P.showModelView(Kb,!0)},function(b,k){a.destroy();var t;20003002===b?t=c.get("deleteModelBeforeModelGroup","\u8bf7\u5148\u5220\u9664\u76ee\u5f55\u4e0b\u7684\u6a21\u578b\u518d\u5220\u9664\u76ee\u5f55\u3002"):20003003===b?t=c.get("modelGroupNotExist","#1\u76ee\u5f55\u4e0d\u5b58\u5728\u3002").replace("#1","\u201c"+f+"\u201d"):20003004===b?t=c.get("deleteChildModelGroup","\u8bf7\u5148\u5220\u9664\u76ee\u5f55\u4e0b\u7684\u5b50\u76ee\u5f55\u518d\u5220\u9664\u76ee\u5f55\u3002"):
20003203===b&&(t=c.get("withoutOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\u3002"));return t?(I.getMessageCurtain().showPrompt(t),!0):!1});n.setShowBlocking(!0);n.deleteModelGroup(L,r)},q=function(w){for(var r=[],f=I.getUrlParam("fromPageClientId"),n=0;n<w.length;n++)r.push(w[n].getModelId());n=I.createFacade(function(b){a.destroy();if(b){b=c.get("deleteModelSuccess","\u5220\u9664\u6a21\u578b\u6210\u529f\u3002");I.getMessageCurtain().showSuccess(b,2E3);Ia=[];var k=[];Oa.getModelGroupTree().getRootGroup().visiting(function(J){k.push(J)});
for(b=0;b<w.length;b++){for(var t=w[b].getModelId(),p=w[b].getGroupId(),l=0;l<k.length;l++)if(k[l].getUserObject().getModelGroupId()===p){p=k[l].getUserObject().getArrModelList();for(var y=0;y<p.length;y++)p[y].getModelId()===t&&p.splice(y,1);k[l].setUserObject(k[l].getUserObject());break}for(l=0;l<Kb.length;l++)Kb[l].getModelId()===t&&Kb.splice(l,1)}b=I.getSelectedGroup();b=P.matchModelByType(I.getCurrentGroupModel(Bb,b));yb&&(b=Vb(b,P.getToolbar().getSearchText()));P.showModelView(b,!1)}X.occur(X.BUTTON_TYPE,
X.DELETE)},function(b,k){a.destroy();var t;20003108===b?t=c.get("deleteArrDeployedModel","\u201c\u5df2\u90e8\u7f72\u201d\u3001\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201d\u72b6\u6001\u7684\u6a21\u578b\u65e0\u6cd5\u5220\u9664\u3002"):20003107===b?t=c.get("deleteDeployedUpdateModel","\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201d\u72b6\u6001\u7684\u6a21\u578b\u65e0\u6cd5\u5220\u9664\u3002"):20003106===b?t=c.get("deleteDeployedModel","\u201c\u5df2\u90e8\u7f72\u201d\u72b6\u6001\u7684\u6a21\u578b\u65e0\u6cd5\u5220\u9664\u3002"):
20003202===b&&(t=c.get("withoutOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\u3002"));return t?(I.getMessageCurtain().showPrompt(t),!0):!1});n.setShowBlocking(!0);n.deleteModel(L,r,f)}}function Xa(){cb.call(this);var d=this.protectedMethod,a=this,g,e,u,h,q=!1;(function(){d.setTitle(c.get("copyDataModel","\u590d\u5236\u6a21\u578b"));d.setSelectable(!0);d.setContentPaneCreator(function(){a.setSize(430,350);return w()});d.setFooterPaneCreator(function(b){var k=new F(c.get("confirm","\u786e\u5b9a"));
k.setHighlight(!0);var t=k.getJqUi();t.addClass("sa-ctrl-dialog-footer-ok");t.appendTo(b);k.addActionListener(function(p){n();return!0});k=new F(c.get("cancel","\u53d6\u6d88"));k.setHighlight(!1);t=k.getJqUi();t.addClass("sa-ctrl-dialog-footer-cancel");t.appendTo(b);k.addActionListener(function(p){d.destroy();return!0})});d.setClosingAction(function(b){})})();this.setCopyModel=function(b){g=b};var w=function(){var b=$("<div>"),k=$("<div>");k.css({"float":"left",width:"auto",position:"relative",left:"0px",
top:"10px"});var t=new Pa;t.setRequired(!0);t.setText(c.get("number","\u7f16\u7801"));t=t.getJqUi();t.css({position:"relative",height:"23px","margin-right":"5px","float":"left"});t.appendTo(k);var p=new ya;p.setIconType(ya.ICON_TYPE_QUESTION);p.setTipsSize(310,40);p.setTipsText(c.get("numberTips","\u6a21\u578b\u7f16\u7801\u662f\u6a21\u578b\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u521b\u5efa\u6a21\u578b\u540e\u65e0\u6cd5\u4fee\u6539\u3002"));p=p.getJqUi();p.css({position:"relative",top:"4px",width:"16px",
height:"16px","float":"right"});p.appendTo(k);u=new rb;u.setPlaceholder(c.get("numberPlaceholder","\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934"));var l=u.getJqUi(),y=new Pa;y.setText(c.get("name","\u540d\u79f0"));y.setRequired(!0);y=y.getJqUi();e=new rb;e.addEditedListener(function(){q=!0});var J=e.getJqUi(),M=new Pa;M.setText(c.get("copyTo","\u590d\u5236\u5230"));M=M.getJqUi();var G=Fb.getChildren(),z=I.getAllModelGroup(),
Q=new Ea(1);Q.setRootChildrenFolderNode(G);Q.setAllFolderNodeCount(G.length);h=new aa;var qa=new ib;G=z[0];for(var Aa="",$a=g.getGroupId(),ob=0;ob<z.length;ob++)if($a===z[ob].getModelGroupId()){G=z[ob];$a=[];for(z=z[ob];z.getModelGroupId()!=N.ROOT_NODE_ID;)$a.push(z.getModelGroupName()),z=z.getParentNode();for(;0!=$a.length;)Aa+=$a.pop(),0!=$a.length&&(Aa+="/");break}qa.setSelectedGroup(G);qa.setPath(Aa);h.setSelectedModel(qa);h.setDropdownCreator(function(fb,Db,Rb){return Q.createJqPopup(fb,Db,Rb)});
h.setCustomPainter(function(fb,Db){Db.text(fb?fb.getPath():"");Db.attr("title",fb?fb.getPath():"")});h.addSelectionListener(function(fb){q||(fb=fb.getSelectedModel().getSelectedGroup().getModelGroupId(),r(L,fb),g.copy().setGroupId(fb))});z=h.getJqUi();z.appendTo(b);na.layoutCtrl(z,100,50,240,23);f();r(L,G.getModelGroupId());b.append(k);b.append(l);b.append(y);b.append(J);b.append(M);b.append(z);a.protectedCustomLayout(b,t,p,l,y,J,M,z);return b};this.protectedCustomLayout=function(b,k,t,p,l,y,J,M){na.layoutCtrl(p,
84,10,300,23);na.layoutCtrl(l,0,65,70,23);na.layoutCtrl(y,84,65,300,23);na.layoutCtrl(J,0,120,70,23);na.layoutCtrl(M,84,120,300,23)};var r=function(b,k){var t=I.createFacade(function(p){for(var l=g.getModelName(),y=g.getModelType(),J=[],M=0,G=p.length;M<G;M++){var z=Qa.createInstance(p[M]),Q=z.getModelName();z=z.getModelType();y===z&&0===Q.indexOf(l)&&J.push(Q)}if(0<J.length){p=1;for(M=!1;!M;){y=!1;for(M=0;M<J.length;M++)if(J[M]===l+"_"+p){p++;y=!0;break}M=!y}l=l+"_"+p}e.setText(l)},function(p,l){return!1});
t.setShowBlocking(!0);t.listGroupAllModel(b,k)},f=function(){var b=I.createFacade(function(k){for(var t=g.getNumber(),p=[],l=0,y=k.length;l<y;l++){var J=Qa.createInstance(k[l]).getNumber();0===J.indexOf(t)&&p.push(J)}if(0<p.length){k=1;for(l=!1;!l;){y=!1;for(l=0;l<p.length;l++)if(p[l]===t+"_"+k){k++;y=!0;break}l=!y}t=t+"_"+k}else t+="_1";u.setText(t)},function(k,t){return!1});b.setShowBlocking(!0);b.listAllModels()},n=function(){var b=h.getSelectedModel().getSelectedGroup(),k=b.getModelGroupId(),
t=b.getModelGroupName();b=$.trim(e.getText());var p=$.trim(u.getText()),l=dc(p,"");if(l||(l=ec(b,null)))return d.getMessageCurtain().showPrompt(l),!1;l=I.createFacade(function(J){if(!J)return!1;J=Qa.createInstance(J);Kb.push(J);var M=[];Oa.getModelGroupTree().getRootGroup().visiting(function(z){M.push(z)});for(var G=0;G<M.length;G++)if(M[G].getUserObject().getModelGroupId()===k){M[G].getUserObject().getArrModelList().push(J);break}J=I.getSelectedGroup();J=P.matchModelByType(I.getCurrentGroupModel(Bb,
J));yb&&(J=Vb(J,P.getToolbar().getSearchText()));P.showModelView(J,!1);J=c.get("copyModelSuccess","\u590d\u5236\u6a21\u578b\u6210\u529f\u3002");I.getMessageCurtain().showSuccess(J,2E3);d.destroy();X.occur(X.BUTTON_TYPE,X.COPY)},function(J,M){var G;20003101===J?G=c.get("groupHasSameDataModel","\u8be5\u76ee\u5f55\u4e0b\u5b58\u5728\u540c\u540d#1\u3002").replace("#1",Da.modelTypeTransformName(g.getModelType())):20003109===J&&(G=c.get("numberDuplicate","\u7f16\u7801\u5df2\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"));
if(G)return d.getMessageCurtain().showPrompt(G),!0;20003102===J?G=c.get("modelNotExist","#1\u6a21\u578b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002").replace("#1","'"+Ia[0].getModelName()+"'"):20003003===J&&(G=c.get("modelGroupNotExist","#1\u76ee\u5f55\u4e0d\u5b58\u5728\u3002").replace("#1","\u201c"+t+"\u201d"));return G?(I.getMessageCurtain().showPrompt(G),d.destroy(),!0):!1});l.setShowBlocking(!0);var y=g.getModelId();l.copyModel(y,L,p,b,k)}}function Va(){cb.call(this);var d=this.protectedMethod,
a=this,g,e,u,h,q;(function(){d.setTitle(c.get("moveTo","\u79fb\u52a8\u5230"));d.setSelectable(!0);d.setContentPaneCreator(function(){a.setSize(400,300);return w()});d.setFooterPaneCreator(function(f){var n=new F(c.get("confirm","\u786e\u5b9a"));n.setHighlight(!0);var b=n.getJqUi();b.addClass("sa-ctrl-dialog-footer-ok");b.appendTo(f);n.addActionListener(function(k){r();return!0});n=new F(c.get("cancel","\u53d6\u6d88"));n.setHighlight(!1);b=n.getJqUi();b.addClass("sa-ctrl-dialog-footer-cancel");b.appendTo(f);
n.addActionListener(function(k){d.destroy();return!0})});d.setClosingAction(function(f){})})();this.setGlobal=function(f){e=f};this.setModelSetId=function(f){u=f};this.setSelectedMoveModel=function(f){g=f};this.setSuccessCallback=function(f){q=f};var w=function(){var f=$("<div>");f.addClass("move-model-panel");var n=new Pa;n.setText(c.get("group","\u76ee\u5f55"));n=n.getJqUi();n.appendTo(f);na.layoutCtrl(n,25,50,70,23);var b=Fb.getChildren();n=e.getAllModelGroup();var k=new Ea(0);k.setRootChildrenFolderNode(b);
k.setAllFolderNodeCount(b.length);h=new aa;b=new ib;b.setSelectedGroup(n[0]);b.setPath(n[0].getModelGroupName());h.setSelectedModel(b);h.setDropdownCreator(function(t,p,l){return k.createJqPopup(t,p,l)});h.setCustomPainter(function(t,p){p.text(t?t.getPath():"");p.attr("title",t?t.getPath():"")});n=h.getJqUi();n.appendTo(f);na.layoutCtrl(n,100,50,240,23);return f},r=function(){for(var f=h.getSelectedModel().getSelectedGroup().getModelGroupId(),n=h.getSelectedModel().getSelectedGroup().getModelGroupName(),
b=[],k=[],t=0;t<g.length;t++){var p=g[t];p.getGroupId()!==f&&(b.push(p.getModelId()),k.push(p))}0===b.length?(b=c.get("modelExistTargetModelGroup","\u6a21\u578b\u5df2\u7ecf\u5728\u76ee\u6807\u76ee\u5f55\u4e0b\u3002"),d.getMessageCurtain().showPrompt(b)):(t=e.createFacade(function(l){l&&(d.destroy(),q&&q(f,k,l),X.occur(X.BUTTON_TYPE,X.MOVE))},function(l,y){if(20003101===l){var J=c.get("sameModelInGroup","\u8be5\u76ee\u5f55\u4e0b\u5b58\u5728\u540c\u540d\u6a21\u578b\u3002");d.getMessageCurtain().showPrompt(J);
return!0}20003003===l?J=c.get("modelGroupNotExist","#1\u76ee\u5f55\u4e0d\u5b58\u5728\u3002").replace("#1","\u201c"+n+"\u201d"):20003102===l&&(J=c.get("moveModelNotExist","\u6a21\u578b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"));return J?(e.getMessageCurtain().showPrompt(J),d.destroy(),!0):!1}),t.setShowBlocking(!0),t.moveModel(u,b,f))}}function Ea(d){var a,g=[],e=0,u,h=[162,150];this.setAllFolderNodeCount=function(k){e=k};this.createJqPopup=function(k,t,p){u=p;return g?(a=new ea,a.setRootVisible(!1),
a.setNodePainter(b),a.setRoot(w(g)),a.hookLoadingHandler(n),a.addSelectingListener(q),a.getRoot().setExpanded(!0),a.getRoot().setSelectable(!1),a.setLineHeight(30),a.getJqUi().css("border","1px solid rgba(138, 153, 170, 0.4)"),a.getJqUi().css("background","white"),a.getJqUi().css("max-height",h[d]+"px"),a.getJqUi().appendTo(k),k=null==g||0==g.length?22:Math.min(30*e,h[d])+2,[-1,k]):null};this.setRootChildrenFolderNode=function(k){g=k};var q=function(k,t){var p=t.getTreePath();k="";for(var l=1;l<p.length;l++)1<
l&&(k+="/"),k+=p[l].getUserObject().getModelGroupName();p=new ib;p.setSelectedGroup(t.getUserObject());p.setPath(k);u(p)},w=function(k){var t=new N(w);t.setParentId(" ");t.setModelGroupName("\u65b0\u589e\u76ee\u5f55");t.setModelGroupId(" ");t=r(t);f(t,k);return t},r=function(k){var t=new ea.BranchNode;t.setUserObject(k);return t},f=function(k,t){if(t)for(var p=0;p<t.length;p++){var l=t[p];if(0<l.getChildren().length){var y=r(l);k.addChild(y)}else{y=k;var J=y.addChild,M=new ea.LeafNode;M.setUserObject(l);
J.call(y,M)}}},n=function(k,t){f(k,k.getUserObject().getChildren());t()},b=function(k,t){t=t.getUserObject().getModelGroupName();k.css("padding-left","4px");k.css("padding-right","4px");k.text(t);k.attr("title",t)}}function ib(){var d,a;this.setSelectedGroup=function(g){d=g};this.getSelectedGroup=function(){return d};this.setPath=function(g){a=g};this.getPath=function(){return a}}function Ja(){cb.call(this);var d=this.protectedMethod,a=this,g,e;(function(){d.setTitle(c.get("deploy","\u90e8\u7f72"));
d.setSelectable(!0);d.setContentPaneCreator(function(){a.setSize(400,300);var h=$("<div>");h.css("display","flex");var q=new Pa;q.setRequired(!0);q.setText(c.get("description","\u63cf\u8ff0"));q=q.getJqUi();q.css({position:"relative",top:"9px",width:"auto",height:"20px","margin-right":"10px"});e=new Ba;var w=e.getJqUi();w.css({position:"relative",top:"14px",width:"300px",height:"150px"});w.find(".sa-ctrl-textarea-real").css("font-family","MicrosoftYaHei");q.appendTo(h);w.appendTo(h);return h});d.setFooterPaneCreator(function(h){var q=
new F(c.get("confirm","\u786e\u5b9a"));q.setHighlight(!0);var w=q.getJqUi();w.addClass("sa-ctrl-dialog-footer-ok");w.appendTo(h);q.addActionListener(function(r){r=$.trim(e.getText());var f;""!==r&&500<r.length?f=c.get("descTooLong","\u90e8\u7f72\u63cf\u8ff0\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"):""===r&&(f=c.get("enterDeployDesc","\u8bf7\u8f93\u5165\u90e8\u7f72\u63cf\u8ff0\u3002"));f?d.getMessageCurtain().showPrompt(f):u(L,r,[g.getModelId()]);return!0});q=new F(c.get("cancel","\u53d6\u6d88"));
q.setHighlight(!1);w=q.getJqUi();w.addClass("sa-ctrl-dialog-footer-cancel");w.appendTo(h);q.addActionListener(function(r){d.destroy();return!0})});d.setClosingAction(function(h){})})();this.setSelectedModel=function(h){g=h};this.textFieldFocus=function(){e&&e.requestFocus()};var u=function(h,q,w){var r=I.createFacade(function(f){if(f){d.destroy();var n=new ua;n.fromJsonObject(f);(new eb(n,null,eb.ONE)).show();kc(!1,w)}},function(f,n){if(20008001<=f&&20009E3>f){switch(f){case 20008001:var b=c.get("duplicateDeployException",
"\u6a21\u578b\u5df2\u90e8\u7f72\uff0c\u8bf7\u52ff\u91cd\u590d\u90e8\u7f72\u3002");break;case 20008009:b=c.get("modelNotExistException","\u6a21\u578b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}return b?(d.destroy(),I.getMessageCurtain().showPrompt(b),Wb(),!0):!1}},null,ta.getFunGetDeployRemoteImpl()());r.setShowBlocking(!0);r.deployModel(h,q,w)}}function eb(d,a,g){function e(){this.getHandler=function(z,Q){switch(z.getCode()){case ua.FAILED_MODEL_LOCK_CHECK:var qa=
new h;break;case ua.FAILED_MODEL_CHECK:qa=new q;break;case ua.FAILED_LOCK_CHECK:qa=new w;break;case ua.FAILED_MODEL_DELETE:qa=new r;break;case ua.FAILED_MODEL_LOCK_DELETE:qa=new f;break;case ua.FAILED_MODEL_DELETE_CHECK:qa=new n;break;case ua.FAILED_MODEL_LOCK_DELETE_CHECK:qa=new b}qa&&(qa.setResponse(z),qa.setDeployType(Q));return qa}}function u(){var z,Q;this.setResponse=function(qa){z=qa};this.setDeployType=function(qa){Q=qa};this.getDetail=function(){throw Error("override me");};this.getTitle=
function(){throw Error("override me");};this.protectedMethod={getResponse:function(){return z},getDeployType:function(){return Q}}}function h(){u.call(this);var z=this.protectedMethod;this.getDetail=function(){var Q="";g===eb.ONE?(Q+=J(),Q+=M()):g===eb.BATCH&&(1==t?(Q=y(),Q+=M()):Q=l());return Q};this.getTitle=function(){var Q=z.getDeployType();if(Q===eb.BATCH)return c.get("batchDeployModelLockCheckFailedTips","\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\u3001\u4ee5\u53ca\u8bbe\u7f6e\u4e0d\u5b8c\u6574\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002");
if(Q===eb.ONE)return c.get("deployModelLockCheckFailedTips","\u6a21\u578b\u5df2\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\uff0c\u5e76\u4e14\u8bbe\u7f6e\u4e0d\u5b8c\u6574\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}function q(){u.call(this);var z=this.protectedMethod;this.getDetail=function(){var Q="";return Q=g===eb.BATCH&&0==t?l():Q+M()};this.getTitle=function(){return z.getDeployType()===eb.BATCH&&0==t?c.get("batchDeployModelCheckFailedTips","\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u8bbe\u7f6e\u4e0d\u5b8c\u6574\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002"):
c.get("deployModelCheckFailedTips","\u6a21\u578b\u8bbe\u7f6e\u4e0d\u5b8c\u6574\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}function w(){u.call(this);var z=this.protectedMethod;this.getDetail=function(){var Q="";g===eb.ONE?Q+=J():g===eb.BATCH&&(Q=1==t?y():l());return Q};this.getTitle=function(){var Q=z.getDeployType();if(Q===eb.BATCH)return c.get("batchDeployLockCheckFailedTips","\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002");
if(Q===eb.ONE)return c.get("deployLockCheckFailedTips","\u6a21\u578b\u5df2\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}function r(){u.call(this);this.getDetail=function(){return G()};this.getTitle=function(){return c.get("deployDeleteCheckFailedTips","\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u5df2\u88ab\u5220\u9664\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}function f(){u.call(this);this.getDetail=function(){var z="";1==t?(z+=G(),z+=M()):
z=l();return z};this.getTitle=function(){return c.get("deployModelDeleteCheckFailedTips","\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u5df2\u88ab\u5220\u9664\u7684\u6a21\u578b\u3001\u4ee5\u53ca\u8bbe\u7f6e\u4e0d\u5b8c\u6574\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}function n(){u.call(this);this.getDetail=function(){var z="";1==t?(z+=G(),z+=J()):z=l();return z};this.getTitle=function(){return c.get("deployModelDeleteLockFailedTips","\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u5df2\u88ab\u5220\u9664\u7684\u6a21\u578b\u3001\u4ee5\u53ca\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}
function b(){u.call(this);this.getDetail=function(){var z="";1==t?(z+=G(),z+=J(),z+=M()):z=l();return z};this.getTitle=function(){return c.get("deployModelDeleteLockCheckFailedTips","\u9009\u4e2d\u7684\u6a21\u578b\u4e2d\u5b58\u5728\u5df2\u88ab\u5220\u9664\u7684\u6a21\u578b\u3001\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\u3001\u4ee5\u53ca\u8bbe\u7f6e\u4e0d\u5b8c\u6574\u7684\u6a21\u578b\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}}var k,t=!1;this.setMapModelName=function(z){k=z};this.setRefModel=
function(z){t=z};this.show=function(){if(d.isSuccess())p();else{var z=(new e).getHandler(d,g),Q=T.createFeedbackDialog();Q.setMsgImageType(T.MSG_WARNING);Q.setMessage(z.getTitle());Q.setDetail(z.getDetail());Q.setTitle(c.get("operatingTips","\u64cd\u4f5c\u63d0\u793a"));Q.setOptionType(T.OPTION_OK);Q.setButtonText(T.RETURN_OK,c.get("iSee","\u6211\u77e5\u9053\u4e86"));Q.showDialog()}};var p=function(){var z=new T;z.setTitle(c.get("operatorTips","\u64cd\u4f5c\u63d0\u793a"));z.setOptionType(T.OPTION_OK);
z.setButtonText(T.RETURN_OK,c.get("iSee","\u6211\u77e5\u9053\u4e86"));z.setCustomPainter(function(Q){var qa=$("<div>");qa.addClass("deploy-feedback-dialog-image");ma.background(qa,"msg-success");var Aa=$("<div>");Aa.addClass("deploy-feedback-dialog-text");Aa.text(c.get("deploySucceeded","\u5df2\u6210\u529f\u90e8\u7f72"));var $a=$("<div>");$a.addClass("deploy-dialog-rolesetting-box");var ob=$("<div>");ob.addClass("deploy-dialog-rolesetting-text");ob.text(c.get("nowGoSetting","\u73b0\u5728\u53bb\u8bbe\u7f6e"));
var fb=$("<div>");fb.addClass("deploy-dialog-rolesetting-text-link");var Db=c.get("dataRole","\u6570\u636e\u6743\u9650");fb.text(Db);fb.attr("title",Db);fb.css("cursor","pointer");fb.css("color","#0E5FD8");fb.on("click",function(Rb){hc(!1)});$a.append(ob);$a.append(fb);Q.append($a);Q.append(qa);Q.append(Aa)});z.setClosingChecker(function(Q){Q===T.RETURN_OK&&(a&&a(),Wb());return!0});z.showDialog(380,280)},l=function(){for(var z=c.get("modelPath","\u6a21\u578b\u8def\u5f84")+"\uff1a\r\n",Q=d.getArrSimplePrompts(),
qa=[],Aa=0;Aa<Q.length;Aa++){var $a=Q[Aa];$a.getModelName()?($a=Q[Aa],z+=$a.getPath(),z+="\uff1a",z+=$a.getModelName(),z+="\uff1b\r\n"):qa.push(k[$a.getModelId()])}if(0<qa.length){z+=c.get("deletedModel","\u5df2\u88ab\u5220\u9664\u7684\u6a21\u578b")+"\uff1a\r\n";for(Aa=0;Aa<qa.length;Aa++)z+=qa[Aa],z+="\uff1b";z+="\r\n"}return z},y=function(){for(var z="",Q=d.getArrLockCheckPrompts(),qa=0;qa<Q.length;qa++){var Aa=Q[qa];z+=c.get("lockedModelCannotDeploy","\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\u4e0d\u5141\u8bb8\u90e8\u7f72\uff0c#1\u6a21\u578b\u5df2\u88ab#2\u9501\u5b9a");
z=z.replace("#1",Aa.getModelName()).replace("#2",Aa.getLockUserName());z+="\uff1b\r\n"}return z},J=function(){var z="",Q=d.getArrLockCheckPrompts()[0];z+=c.get("lockedModelCannotDeploy","\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\u7684\u6a21\u578b\u4e0d\u5141\u8bb8\u90e8\u7f72\uff0c#1\u6a21\u578b\u5df2\u88ab#2\u9501\u5b9a");z=z.replace("#1",Q.getModelName()).replace("#2",Q.getLockUserName());return z+"\uff1b\r\n"},M=function(){var z="",Q=d.getArrModelCheckPrompts()[0];z+=c.get("configIncompleteReason",
"\u8bbe\u7f6e\u4e0d\u5b8c\u6574\u539f\u56e0");return z=z+"\uff1a\r\n"+Q.getPromptStr(!0,!0)},G=function(){for(var z="",Q=d.getArrSimplePrompts(),qa=[],Aa=0;Aa<Q.length;Aa++){var $a=Q[Aa];$a.getModelName()||qa.push(k[$a.getModelId()])}if(0<qa.length){z+=c.get("deletedModel","\u5df2\u88ab\u5220\u9664\u7684\u6a21\u578b")+"\uff1a\r\n";for(Aa=0;Aa<qa.length;Aa++)z+=qa[Aa],z+="\uff1b";z+="\r\n"}return z}}function ub(){var d=[],a,g=[960,560],e,u,h,q,w,r,f,n,b,k,t,p,l,y,J,M=[],G=[],z=!1,Q,qa={},Aa={},$a=
[],ob=!1,fb=!0,Db=!0,Rb=[];this.setGlobal=function(x){e=x};this.setModelSetId=function(x){u=x};this.setAutoSelectedModel=function(x){d=x};this.setAutoSelectedGroup=function(x){a=x};this.setAutoCheckedContainChild=function(x){z=x};this.setMapModelRefJson=function(x){$a=x};this.showNotDeployableModelPrompt=function(x,D){if(x&&0<x.length){for(var E,Z=0;Z<D.length;Z++)x[0]==D[Z].getModelId()&&(E=D[Z].getModelName());x=1==x.length?c.get("selectedModelCycleRef",'"#1"\u6a21\u578b\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u65e0\u6cd5\u9009\u62e9\u3002').replace("#1",
E):c.get("batchSelectedModelCycleRef",'"#1"\u7b49"#2"\u4e2a\u6a21\u578b\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u65e0\u6cd5\u9009\u62e9\u3002').replace("#1",E).replace("#2",x.length);Q.showPrompt(x,2E3)}};this.textFieldFocus=function(){y&&y.requestFocus()};this.createDialog=function(){var x=$(document.body),D=$("<div class='sa-ctrl-common-modallayer'>");D.appendTo(x);var E=new Ca(D),Z=c.get("batchDeploy","\u6279\u91cf\u90e8\u7f72");E.setTitle(Z);Z=g[0];var Ta=g[1],zb=x.prop("clientWidth");x=x.prop("clientHeight");
var Ra=function(){E.destroy();D.remove()};E.setBounds(zb-Z>>1,x-Ta>>1,Z,Ta);E.setToolbarVisible(!1);Q=E.getMessageCurtain();E.setContent(Y());$(".sa-ctrl-dialog-padding").css({position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%"});E.addClosingListener(function(Ya,lb){lb?Ka(Ya.getMessageCurtain(),Ra):Ra()});E.showFooterPane();return E};var Y=function(){var x=$("<div>");oa();Sa();var D=$("<div>");D.css({position:"relative",top:"5px",left:"15px"});w=$("<div>");w.addClass("deploy-batch-split-right");
k=new Pa;k.setText(c.get("selectedModel","\u5df2\u9009\u6a21\u578b")+"("+G.length+")");var E=k.getJqUi();E.addClass("deploy-batch-selected-model-label");var Z=(new Pa(c.get("clearAll","\u5168\u90e8\u6e05\u9664"))).getJqUi();Z.addClass("deploy-batch-clear-all-label");Z.on("mousedown",gb);t=$("<div>");t.addClass("deploy-batch-selected-model-area");E.appendTo(D);E=$("<div>");var Ta=$("<span>");Ta.text(c.get("notDeployedHelpIconTips","\u5728\u540c\u4e00\u4e2a\u6a21\u578b\u96c6\u4e0b\uff0c\u6a21\u578b\u8bbe\u8ba1\u65f6\u53ef\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u8bbe\u8ba1\u671f\u7684\u72b6\u6001\uff0c\u4f46\u5728\u6267\u884c\u671f(\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u6267\u884c\u65f6)\u53ea\u80fd\u4f7f\u7528\u5176\u4ed6\u6a21\u578b\u7684\u6700\u65b0\u90e8\u7f72\u72b6\u6001\u3002\u56e0\u6b64\u9700\u8981\u5c06\u5f15\u7528\u7684\u201c\u672a\u90e8\u7f72\u201d\u72b6\u6001\u7684\u6a21\u578b\u4e00\u540c\u90e8\u7f72\u3002")+
c.get("deployHelpIconTips","\u5982\u679c\u9700\u8981\u6267\u884c\u671f\u4e0e\u8bbe\u8ba1\u671f\u7684\u72b6\u6001\u4fdd\u6301\u4e00\u81f4\uff0c\u8bf7\u5c06\u5f15\u7528\u7684\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201c\u72b6\u6001\u7684\u6a21\u578b\u518d\u6b21\u90e8\u7f72"));Ta.appendTo(E);Ta=new ya;Ta.setIconType(ya.ICON_TYPE_QUESTION);Ta.setTipsSize(420,90);Ta.setTipsHtml(E[0]);E=Ta.getJqUi();E.addClass("dm-notice-icon");E.css({position:"relative",top:"5px",width:"16px",height:"16px","float":"left"});
E.appendTo(D);w.append(D);w.append(Z);w.append(t);r=$("<div>");r.addClass("deploy-batch-split-bottom");D=new Pa;D.setRequired(!0);D.setText(c.get("deployDesc","\u90e8\u7f72\u63cf\u8ff0"));D=D.getJqUi();y=new Ba;Z=y.getJqUi();Z.find(".sa-ctrl-textarea-real").css("font-family","MicrosoftYaHei");E=$("<div>");E.css({position:"absolute",width:"912px",height:"100%"});D.appendTo(E);Z.appendTo(E);na.layoutCtrl(D,0,8,"auto",20);na.layoutCtrl(Z,0,35,912,70);E.appendTo(r);na.layoutCtrlCenterAlign(E,912);D=A().getJqUi();
x.append(D);vb();return x},oa=function(){q=$("<div>");l=new C;l.setFunCustomModelCreator(W);l.setFunCustomModelSort(function(E){E.sort(function(Z,Ta){var zb=(new Date(Ta.getModifyTime())).getTime(),Ra=(new Date(Z.getModifyTime())).getTime();zb===Ra&&(zb=(new Date(Ta.getModifyTime())).getTime(),Ra=(new Date(Z.getModifyTime())).getTime());return zb-Ra})});l.setFunShowModels(jb);l.setFunIsModelSearch(function(){return J});l.setFunDoModelSearch(H);l.setFunClearSearchStatus(Ga);a&&l.setAutoSelectedGroupId(a);
z&&l.setAutoCheckedContainChild(z);l.setModelSetId(u);var x=$("<div>");x.css({position:"relative",left:"22px",top:"10px"});var D=$("<span>");D.addClass("qdm-group-manager-area-text");D.text(c.get("group","\u76ee\u5f55"));x.append(D);D=new ya;D.setIconType(ya.ICON_TYPE_INFO);D.setTipsSize(255,55);D.setTipsText(c.get("batchDeployGroupTips","\u5df2\u4e3a\u60a8\u81ea\u52a8\u9690\u85cf\u53ea\u6709\u201c\u5df2\u90e8\u7f72\u201d\u72b6\u6001\u6a21\u578b\u7684\u76ee\u5f55\u3002"));D=D.getJqUi();D.css({position:"relative",
"float":"left",top:"3px"});D.appendTo(x);l.setTitleContent(x);q.append(l.getJqUi())},Sa=function(){h=$("<div>");h.addClass("deploy-batch-split-center");p=new O;p.setSearchListenerDelay(1E3);p.addSearchListener(function(){H(p.getText())});p.setShowSearchIcon(!0);p.setPlaceholder(c.get("pleaseEnterSearchText","\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9"));var x=p.getJqUi();x.addClass("deploy-batch-search");x.find(":input").on("keydown",function(D){13==(D.keyCode||D.which||D.charCode)&&H(p.getText())});
h.append(x);b=new Ua;x=[{width:50},{width:100,text:c.get("number","\u7f16\u7801")},{width:120,text:c.get("modelName","\u540d\u79f0")},{width:130,text:c.get("modelDesc","\u63cf\u8ff0")},{width:100,text:c.get("modelType","\u7c7b\u578b")},{width:80,text:c.get("currentLocker","\u5f53\u524d\u9501\u5b9a\u4eba")},{width:100,text:c.get("deployStatus","\u90e8\u7f72\u72b6\u6001")},{width:80,text:c.get("creator","\u521b\u5efa\u4eba")},{width:130,text:c.get("createTime","\u521b\u5efa\u65f6\u95f4")},{width:80,
text:c.get("modifier","\u6700\u540e\u4fee\u6539\u4eba")},{width:130,text:c.get("modifyTime","\u6700\u540e\u4fee\u6539\u65f6\u95f4")}];b.setArrHeadRowMap(x);b.setFunIsSearch(function(){return J});b.setFunGetArrSelectedWhenSearchModel(function(){return M});b.setFunSetArrSelectedWhenSearchModel(function(D){M=D});b.setFunGetSearchBox(function(){return p});b.setFunCheckBoxListener(Wa);d&&b.setArrAutoSelectedModel(d);b.setGroupChangedClearChecked(!1);b.setColumnFitVisibleWidth(!1);b.setModelNameJumpToDesigner(!1);
b.setDeployMessageCurtain(Q);b.setFunAllSelectCallBack(function(D){var E=e.createFacade(function(Z){for(var Ta in Z)$a[Ta]=Z[Ta];for(Z=0;Z<D.length;Z++)b.getCheckBoxMap()[D[Z]].setChecked(!0)},null,null,ta.getFunGetDeployRemoteImpl()());E.setShowBlocking(!0);E.batchLoadRefDeployModelIds(D)});f=(new V).getJqUi();f.css("top",35);f.appendTo(h);f.hide();b.setJqModelNoDataView(f);n=(new da).getJqUi();n.appendTo(h);n.hide();b.setJqSearchNoDataView(n);x=b.getJqUi();x.addClass("deploy-batch-model-list");
h.append(x)},A=function(){var x=new pa;x.setHorizontalSplit(!0);x.setEnabled(!0);x.setSplitLineWide(0);x.setFirstSize(220);x.setSecondSize(500);x.setResizeMode(pa.RESIZE_MODE_FIRST_FIXED);x.setFirstChild(pa.createChildWrapper(q));x.setSecondChild(pa.createChildWrapper(h,function(){b.refresh()}));var D=new pa;D.setHorizontalSplit(!0);D.setEnabled(!0);D.setSplitLineWide(0);D.setFirstSize(720);D.setSecondSize(240);D.setResizeMode(pa.RESIZE_MODE_SECOND_FIXED);D.setFirstChild(x);D.setSecondChild(pa.createChildWrapper(w));
x=new pa;x.setHorizontalSplit(!1);x.setEnabled(!1);x.setSplitLineWide(0);x.setFirstSize(347);x.setSecondSize(120);x.setFirstChild(D);x.setSecondChild(pa.createChildWrapper(r));return x},H=function(){var x=p.getText(),D,E=l.getCurrentSelectedGroup(),Z=l.isContainChild();E&&(D=l.getCurrentGroupModels(Z,E));""===x?J&&(J=!1,jb(D)):(J||(M=b.getSelectedModel()),J=!0,x=Vb(D,x),jb(x))},Ka=function(x,D){var E=$.trim(y.getText()),Z;""!==E&&500<E.length?Z=c.get("descTooLong","\u90e8\u7f72\u63cf\u8ff0\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"):
""===E&&(Z=c.get("enterDeployDesc","\u8bf7\u8f93\u5165\u90e8\u7f72\u63cf\u8ff0\u3002"));var Ta=[],zb={};if(G&&0<G.length)for(var Ra=0;Ra<G.length;Ra++){var Ya=G[Ra];Ta.push(Ya.getModelId());zb[Ya.getModelId()]=Ya.getModelName()}else Z=c.get("selectOneModelAtLeast","\u8bf7\u81f3\u5c11\u9009\u4e2d\u4e00\u4e2a\u6a21\u578b\u3002");Z?x.showPrompt(Z):(x=T.createFeedbackDialog(),x.setMsgImageType(T.MSG_CONFIRM),x.setMessage(c.get("confirmDeploy","\u6a21\u578b\u90e8\u7f72\u5e76\u6388\u6743\u540e\u53ef\u88ab\u5176\u4ed6\u7528\u6237\u5f15\u7528\uff0c\u786e\u5b9a\u90e8\u7f72\u5417\uff1f")),
x.showDialog(),x.setClosingChecker(function(lb){lb===T.RETURN_OK&&La(D,u,E,Ta,zb);return!0}))},La=function(x,D,E,Z,Ta){var zb=e.createFacade(function(Ra){if(Ra){var Ya=new ua;Ya.fromJsonObject(Ra);Ra=new eb(Ya,x,eb.BATCH);Ra.setMapModelName(Ta);Ra.show();kc(!0,Z)}},function(Ra,Ya){if(20008001<=Ra&&20009E3>Ra){switch(Ra){case 20008001:var lb=c.get("duplicateDeployException","\u6a21\u578b\u5df2\u90e8\u7f72\uff0c\u8bf7\u52ff\u91cd\u590d\u90e8\u7f72\u3002");break;case 20008009:lb=c.get("modelNotExistException",
"\u6a21\u578b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}return lb?(e.getMessageCurtain().showPrompt(lb),vb(),gb(),!0):!1}},null,ta.getFunGetDeployRemoteImpl()());zb.setShowBlocking(!0);zb.deployModel(D,E,Z)},vb=function(){e.createFacade(function(x){l.setJsonDataAndUpdateUI(x);var D=l.getAllModels();for(x=0;x<D.length;x++){var E=D[x];Rb[E.getModelId()]=E}D=b.getCheckBoxMap();if(d&&0<d.length)for(x=0;x<d.length;x++)E=d[x].getModelId(),D[E]&&D[E].setChecked(!1);
ob=!0;fb=!1;if(d&&0<d.length)for(x=0;x<d.length;x++)E=d[x].getModelId(),D[E]&&D[E].setChecked(!0);return fb=!0},function(x,D){return!1}).listUnDeployGroupAndModel(u)},W=function(){return new Qa},jb=function(x){if(ob){for(var D={},E=0;E<x.length;E++)D[x[E].getModelId()]=x[E];E=e.createFacade(function(Z){Db=ob=!1;b.setModels(x);var Ta=b.getCheckBoxMap();if(x&&0<x.length)for(var zb=0;zb<x.length;zb++){var Ra=x[zb].getModelId();(Ra=Ta[Ra])&&Ra.setChecked(!1)}var Ya=Z.deployableModelIds;Z=e.createFacade(function(lb){for(var bb in lb)$a[bb]=
lb[bb];ob=!0;fb=!1;for(bb=lb=0;bb<Ya.length;bb++){var pc=Ya[bb],qc;for(qc in G)if(Ya[bb]==G[qc].getModelId()){var lc=Ta[pc];lc&&lc.setChecked(!0);0<qa[pc]&&(lc.setEnabled(!1),lb++);break}}0<Ya.length&&Ya.length==lb&&b.getSelectAllCheckBox().setEnabled(!1);Db=fb=!0},null,null,ta.getFunGetDeployRemoteImpl()());Z.setShowBlocking(!0);Z.batchLoadRefDeployModelIds(Ya)},null,null,ta.getFunGetDeployRemoteImpl()());E.setShowBlocking(!0);E.batchCheckModelCycleReference(Object.keys(D))}else b.setModels(x)},
Ga=function(){M=[];J=!1;p.clear();p.getJqUi().find("input").blur()},Wa=function(x,D){if(ob){var E=x.getUserObject(),Z=x.isChecked();fb&&Z&&(D||0<d.length)?(D=e.createFacade(function(Ta){1==Ta?(ob=!1,x.setChecked(!1),ob=!0,Ta=c.get("selectedModelCycleRef",'"#1"\u6a21\u578b\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u65e0\u6cd5\u9009\u62e9\u3002').replace("#1",b.getModelNameById(E.getModelId())),Q.showPrompt(Ta,2E3)):Fa(Z,E)},null,null,ta.getFunGetDeployRemoteImpl()()),D.setShowBlocking(!0),D.checkModelCycleReference(E.getModelId())):
Fa(Z,E)}},Fa=function(x,D){qb(x,D);var E=function(Z){if(Z){$a[D.getModelId()]=Z;for(var Ta=b.getCheckBoxMap(),zb=Z.noDeployModelIds,Ra=0;Ra<zb.length;Ra++){var Ya=zb[Ra];if(Db){var lb=qa[Ya];lb||(lb=0);var bb=Aa[Ya];bb||(bb=[]);x?(qa[Ya]=lb+1,-1==bb.indexOf(D.getModelName())&&bb.push(D.getModelName())):(qa[Ya]=lb-1,lb=bb.indexOf(D.getModelName()),-1<lb&&bb.splice(lb,1));Aa[Ya]=bb}bb=Ta[Ya];bb||(bb=new K,x||bb.setChecked(!0),bb.setUserObject(Rb[Ya]),bb.addCheckedListener(Wa));0<qa[Ya]?(bb.setChecked(!0),
bb.setEnabled(!1)):(bb.setChecked(!1),bb.setEnabled(!0))}Z=Z.deployUpdateModelIds;for(Ra=0;Ra<Z.length;Ra++)bb=Ta[Z[Ra]],bb||(bb=new K,x||bb.setChecked(!0),bb.setUserObject(Rb[Z[Ra]]),bb.addCheckedListener(Wa)),x?bb.setChecked(!0):bb.setChecked(!1)}};$a[D.getModelId()]?E($a[D.getModelId()]):(E=e.createFacade(E,null,null,ta.getFunGetDeployRemoteImpl()()),E.setShowBlocking(!1),E.loadRefDeployModelIds(D.getModelId()))},qb=function(x,D){if(x)0>G.indexOf(D)&&G.push(D);else for(var E in G)D===G[E]&&G.splice(E,
1);for(E in G){var Z=!1;G[E].getModelId==D.getModelId()&&(Z=!0)}Z||Hb()},Hb=function(){t.empty();if(0<G.length){var x=$(document.createDocumentFragment()),D;for(D in G)x.append(Ub(G[D]));t.append(x)}k.setText(c.get("selectedModel","\u5df2\u9009\u6a21\u578b")+"("+G.length+")");100<=G.length&&k.getJqUi().attr("title",c.get("selectedModel","\u5df2\u9009\u6a21\u578b")+"("+G.length+")")},Ub=function(x){var D=$("<div>"),E=x.getModelName(),Z=x.getNumber();D.addClass("deploy-batch-model-selected-list-item");
D.attr("table-name",E);D.data("object",x);D.on("mouseenter",Tb);D.on("mouseleave",wb);D.css("margin-left",20);x=$("<div>");x.addClass("deploy-batch-model-selected-list-item-name");var Ta=$("<span class='deploy-batch-model-selected-list-item-text'>"),zb=E;Ta.text(E);Ta.appendTo(x);Z&&0<Z.length&&(zb=E+"("+Z+")",E=$("<span>"),E.css("color","#c0c0c0"),na.makeTextOmissible(E),Ta=$("<span>"),Ta.text("("+Z+")"),E.append(Ta),x.append(E));x.attr("title",zb);Z=$("<div>");Z.addClass("deploy-batch-model-selected-list-item-icon");
ma.background(Z,"delete_small");Z.on("click",function(Ra){var Ya=$(Ra.currentTarget).parent().data("object");if(0<qa[Ya.getModelId()])Ra=1==qa[Ya.getModelId()]?c.get("deleteSingleRefModelTips",'\u8be5\u6a21\u578b\u88ab"#1"\u6a21\u578b\u5728\u8bbe\u8ba1\u671f\u5f15\u7528\uff0c\u90e8\u7f72"#2"\u6a21\u578b\u9700\u8981\u5c06\u5f15\u7528\u7684"\u672a\u90e8\u7f72\u72b6\u6001\u7684\u6a21\u578b"\u4e00\u540c\u90e8\u7f72\u3002').replace("#1",Aa[Ya.getModelId()][0]).replace("#2",Aa[Ya.getModelId()][0]):c.get("deleteBatchRefModelTips",
'\u8be5\u6a21\u578b\u88ab"#1"\u7b49"#2"\u4e2a\u6a21\u578b\u5728\u8bbe\u8ba1\u671f\u5f15\u7528\uff0c\u90e8\u7f72"#3"\u7b49\u6a21\u578b\u9700\u8981\u5c06\u5f15\u7528\u7684"\u672a\u90e8\u7f72\u72b6\u6001\u7684\u6a21\u578b"\u4e00\u540c\u90e8\u7f72\u3002').replace("#1",Aa[Ya.getModelId()][0]).replace("#2",qa[Ya.getModelId()]).replace("#3",Aa[Ya.getModelId()][0]),Q.showPrompt(Ra);else{Ra=$(Ra.currentTarget).parent().data("object");for(var lb in G)Ra==G[lb]&&G.splice(lb,1);lb=Ra.getModelId();Ya=b.getCheckBoxMap();
Ya[lb]?Ya[lb].setChecked(!1):b.removeSelectedModel(Ra);Hb()}});D.append(Z);D.append(x);return D},Tb=function(x){$(x.currentTarget).find(".deploy-batch-model-selected-list-item-icon").css("display","block")},wb=function(x){$(x.currentTarget).find(".deploy-batch-model-selected-list-item-icon").css("display","none")},gb=function(){G=[];for(var x=b.getCheckBoxMap(),D=Object.keys(x),E=0,Z=D.length;E<Z;E++)x[D[E]].setChecked(!1);b.clearArrAllSelectedModels();x=l.getAllModels();for(E in x)x[E].setSelected(!1);
Hb()}}function Ab(){ca.AbstractWizardStep.call(this);var d=this,a,g,e,u;this.setCallback=function(h){u=h};this.setTitleName=function(h){e=h};this.getSubTitle=function(){return e};this.getJqUi=function(h){g||(a=h,g=d.protectedCreateUi());return g};this.protectedCreateUi=function(){throw Error("override me");};this.protectedCreateIconStyle=function(h,q,w,r){throw Error("override me");};this.protectedMethod={fireFinishEvent:function(h,q){if(u)return u(h,q)},getMessageCurtain:function(){return a.getMessageCurtain()},
createWizardPanel:function(){var h=Ab.WIZARD_PANEL_WIDTH,q=Ab.WIZARD_PANEL_HEIGHT,w=Ab.WIZARD_PANEL_LEFT_MARGIN,r=$("<div>");na.layoutCtrl(r,w,0,h,q);h=$("<div>");h.appendTo(r);na.layoutCtrl(h,35,0,24,24);q=$("<div>");q.appendTo(r);q.addClass("model-first-create-line");q=$("<div>");q.appendTo(r);na.layoutCtrl(q,195,0,24,24);w=$("<div>");w.text(c.get("createGroup","\u521b\u5efa\u76ee\u5f55"));na.layoutCtrl(w,0,40,100,16);w.appendTo(r);var f=$("<div>");f.text(e);na.layoutCtrl(f,135,40,150,16);f.appendTo(r);
d.protectedCreateIconStyle(w,h,f,q);return r}}}function Qb(){Ab.call(this);var d=this.protectedMethod,a=this,g=new rb;this.intoThisStep=function(e,u){};this.outThisStep=function(e,u){e=$.trim(g.getText());var h;""!=e&&50<e.length?h=c.get("groupNameTooLong","\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):""==e&&(h=c.get("groupNameCannotBeEmpty","\u8bf7\u8f93\u5165\u76ee\u5f55\u540d\u79f0\u3002"));h?(d.getMessageCurtain().showPrompt(h),u(a)):(h=d.fireFinishEvent(e),u([h]))};
this.protectedCreateUi=function(){var e=$("<div>");e.append(d.createWizardPanel());var u=new Pa;u.setRequired(!0);u.setText(c.get("name","\u540d\u79f0"));u=u.getJqUi();var h=g.getJqUi();e.append(u);e.append(h);var q=Ab.WIZARD_PANEL_HEIGHT,w=Ab.WIZARD_PANEL_LEFT_MARGIN;na.layoutCtrl(u,w,q,70,23);na.layoutCtrl(h,w,q+25,280,23);return e};this.protectedCreateIconStyle=function(e,u,h,q){e.addClass("model-first-create-name-current");h.addClass("model-first-create-name-wait");u.text("1");q.text("2");u.addClass("model-first-create-current-step");
q.addClass("model-first-create-wait-step")}}function Dc(){Ab.call(this);var d=this.protectedMethod,a=this,g=new rb,e=new rb,u=new rb,h,q,w;this.intoThisStep=function(f,n){};this.outThisStep=function(f,n){f?(a.getJqUi().remove(),n(null)):r(n)};this.isLastStep=function(){return!0};this.setGroupName=function(f){h=f};this.setModelTypeName=function(f){};this.setModelType=function(f){q=f};this.setModelGroupFolderNode=function(f){w=f};this.protectedCreateUi=function(){var f=$("<div>");f.append(d.createWizardPanel());
var n=$("<div>");n.css({"float":"left",width:"auto",position:"relative",left:"15px",top:"80px"});var b=new Pa;b.setRequired(!0);b.setText(c.get("number","\u7f16\u7801"));b=b.getJqUi();b.css({position:"relative",height:"23px","margin-right":"5px","float":"left"});b.appendTo(n);b=new ya;b.setIconType(ya.ICON_TYPE_QUESTION);b.setTipsSize(310,40);b.setTipsText(c.get("numberTips","\u6a21\u578b\u7f16\u7801\u662f\u6a21\u578b\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u521b\u5efa\u6a21\u578b\u540e\u65e0\u6cd5\u4fee\u6539\u3002"));
b=b.getJqUi();b.css({position:"relative",top:"4px",width:"16px",height:"16px","float":"right"});b.appendTo(n);g.setPlaceholder(c.get("numberPlaceholder","\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934"));b=g.getJqUi();var k=new Pa;k.setRequired(!0);k.setText(c.get("name","\u540d\u79f0"));k=k.getJqUi();var t=e.getJqUi(),p=new Pa;p.setText(c.get("desc","\u63cf\u8ff0"));p=p.getJqUi();var l=u.getJqUi();f.append(n);f.append(b);
f.append(k);f.append(t);f.append(p);f.append(l);n=Ab.WIZARD_PANEL_HEIGHT;na.layoutCtrl(b,100,n,300,23);na.layoutCtrl(k,15,n+50,70,23);na.layoutCtrl(t,100,n+50,300,23);na.layoutCtrl(p,15,n+100,70,23);na.layoutCtrl(l,100,n+100,300,23);return f};this.protectedCreateIconStyle=function(f,n,b,k){f.addClass("model-first-create-name-completed");b.addClass("model-first-create-name-current");f=$("<div>");f.addClass("model-first-create-ok");f.appendTo(n);k.text("2");n.addClass("model-first-create-completed-step");
k.addClass("model-first-create-current-step")};var r=function(f){var n=$.trim(g.getText()),b=$.trim(e.getText()),k=$.trim(u.getText()),t=dc(n,"");if(t||(t=ec(b,k)))return d.getMessageCurtain().showPrompt(t),!1;t=new ab;t.setModelSetId(w.getModelSetId());t.setModelGroupName(h);t.setParentId(w.getModelGroupId());var p=new Qa;p.setModelName(b);p.setDesc(k);p.setModelType(q);p.setModelSetId(L);p.setNumber(n);n=I.createFacade(function(l){if(!l)return!1;var y=new Qa;y.fromJsonObject(l);d.fireFinishEvent(h,
y);f(null)},function(l,y){return 20003001===l?(l=c.get("groupNameExist","\u540d\u79f0\u91cd\u590d\u3002"),d.getMessageCurtain().showPrompt(l),!0):20003301===l?(f(null),bc(),!0):20003109===l?(l=c.get("numberDuplicate","\u7f16\u7801\u5df2\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"),d.getMessageCurtain().showPrompt(l),!0):20003203===l?(l=c.get("withoutOperatePermission","\u65e0\u64cd\u4f5c\u6743\u9650\u3002"),d.getMessageCurtain().showPrompt(l),!0):!1});n.setShowBlocking(!0);n.firstTimeCreateModel(t,
p);return!0}}var Oa,Bb=!1,P,yb=!1,Ec=/^([a-zA-Z_])[a-zA-Z0-9_]{0,}$/,Fb,Gb=[],Kb=[],Ia=[],Zb,fc,Ib;this.setMessageResize=function(d){fc=d};var I=new function(){var d;this.getAllModelGroup=function(){for(var a=[],g=0;g<Gb.length;g++)Gb[g].getModelGroupId()!==N.ROOT_NODE_ID&&a.push(Gb[g]);return a};this.getSelectedGroup=function(){return Oa&&Oa.getModelGroupTree().getSelectedNode()?Oa.getModelGroupTree().getSelectedNode().getUserObject():Fb};this.getCurrentGroupModel=function(a,g){a=g.getModelGroupId()===
N.ROOT_NODE_ID?Kb:g.getArrAllModelList(a);I.sortModelByModifyTime(a);return a};this.sortModelByModifyTime=function(a){a.sort(function(g,e){var u=(new Date(e.getModifyTime())).getTime(),h=(new Date(g.getModifyTime())).getTime();u===h&&(u=(new Date(e.getCreateTime())).getTime(),h=(new Date(g.getCreateTime())).getTime());return u-h})};this.getMessageCurtain=function(){d||(d=new wa,d.getJqUi().appendTo($("body")));return d};this.getUrlParam=function(a){return Ob.decodeParamFromUrl(window.location.search,
a)};this.createFacade=function(a,g,e,u){u||(u=ta.getRemoteImpl());return new xa(u,a,function(h,q,w){return g?g(h,q,w):!1},e)};this.getRemoteImpl=function(){return ta.getFunGetDesignerRemoteImpl()}};this.createMainPageJqUi=function(){var d=$("<div class='model-set-main-page'>"),a=$("<div class='model-type-card-container'>");a.append(rc(Da.DATA_TABLE_MODEL,c.get("dataTableModelDesc","\u57fa\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u6570\u636e\u8868\uff0c\u901a\u8fc7\u4e00\u7cfb\u5217\u7684\u5904\u7406\u6b65\u9aa4\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u8868\u6a21\u578b")));
a.append(rc(Da.METRICS_MODEL,c.get("metricsModelDesc","\u57fa\u4e8e\u6570\u636e\u8868\u6216\u6307\u6807\uff0c\u5b9a\u4e49\u8ba1\u7b97\u516c\u5f0f\u53ca\u7edf\u8ba1\u53e3\u5f84\u521b\u5efa\u4e00\u4e2a\u6307\u6807\u6a21\u578b")));a.appendTo(d);(new B).getJqUi().appendTo(d);$("<div class='model-set-main-page-statusbar'>").appendTo(d);sc();return d};var rc=function(d,a){var g=new function(){var e,u,h,q;this.setModelDesc=function(r){h=r};this.setModelType=function(r){u=r};this.setFunCreateModel=function(r){q=
r};this.getJqUi=function(){e||w();return e};var w=function(){e=$("<div class='model-type-card-item'>");var r=$("<div class='model-type-card-title'>"),f=Da.modelTypeTransformName(u);r.text(f);r.attr("title",f);var n=$("<div class='model-type-card-desc'>");n.text(h);n.attr("title",h);var b=$("<div class='model-type-card-icon'>");ma.background(b,Da.getModelIconByType(u));if(R)r.css("top","40px"),b.css("top","45px"),n.css("top","80px");else{var k=$("<div class='model-type-card-create-btn'>");k.on("click",
function(){q&&q(u,f)});var t=$("<div class='model-type-card-create-text'>");t.text(c.get("new","\u65b0\u5efa"));var p=$("<div class='model-type-card-create-icon'>");ma.background(p,"create-right-arrows");t.appendTo(k);p.appendTo(t);k.appendTo(e)}r.appendTo(e);b.appendTo(e);n.appendTo(e)}};g.setModelType(d);g.setModelDesc(a);g.setFunCreateModel(function(e,u){if(0===Oa.getModelGroupTree().getChildCount()){var h=function(n,b){var k=c.get("addModelSuccess","\u65b0\u5efa\u6a21\u578b\u6210\u529f\u3002");
I.getMessageCurtain().showSuccess(k,2E3);k=new N(ac);k.setModelGroupId(b.getGroupId());k.setModelSetId(L);k.setModelGroupName(n);k.setParentId(Fb.getModelGroupId());k.setLevel(Fb.getLevel()+1);k.setArrChildren([]);k.setArrModelList([b]);k.setParentNode(Fb);Fb.setArrChildren([k]);Gb.push(k);Kb.push(b);Oa.createGroupOnBranchNode(k,0);Oa.updateUiWhenNotRootGroup();P.showModelView([b],!1)},q=c.get("createSth","\u65b0\u5efa#1").replace("#1",u),w=new Qb;w.setTitleName(q);var r;w.setCallback(function(n){r=
new Dc;r.setTitleName(q);r.setGroupName(n);r.setModelTypeName(u);r.setModelType(e);r.setModelGroupFolderNode(Fb);r.setCallback(h);return r});var f=new ca;f.setSteps([w]);f.show(Ab.DIALOG_WIDTH,Ab.DIALOG_HEIGHT)}else(w=Oa.getModelGroupTree().getSelectedNode())?w.getUserObject().getModelGroupId()===N.ROOT_NODE_ID?I.getMessageCurtain().showPrompt(c.get("createModelOnRootNode","\u4e0d\u80fd\u5728\u6839\u8282\u70b9\u4e0a\u521b\u5efa\u6a21\u578b\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u76ee\u5f55\u3002")):
(w=c.get("createSth","\u65b0\u5efa#1").replace("#1",u),w=new Pb(w),f=new Qa,f.setModelType(e),w.setModel(f),w.showDialog()):I.getMessageCurtain().showPrompt(c.get("noSelectedModelGroup","\u8bf7\u9009\u62e9\u4e00\u4e2a\u76ee\u5f55\u3002"))});return g.getJqUi()},mc=function(d){var a=new Xb(!0);a.setTitle(d);a.setSubDir(!1);a.showDialog();a.textFieldFocus()},Cc=function(d,a){var g=new Ha;g.setMetric(a);g.setFunLoadModelerInfo(function(e){e=I.createFacade(e);e.setShowBlocking(!0);e.loadModelerInfo(d.getModelId())});
g.setFunEntryDesignerFromMainPage(function(){$b(L,d.getModelId(),d.getModelType(),d.getModelName(),U)});g.setTitle(c.get("metricsPreview","\u6307\u6807\u67e5\u770b"));g.setButtonName(c.get("calculateMetrics","\u8ba1\u7b97"));g.setGlobal(I);g.showDialog()},$b=function(d,a,g,e,u){var h=I.createFacade(function(q){q?ta.getModelDesignerEntrance()(R,d,a,g,e,u):(q=c.get("modelNotExistOrBeDeleted","\u6a21\u578b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),I.getMessageCurtain().showPrompt(q),Wb())});
h.setShowBlocking(!1);h.checkModelIsExist(a)},ac=function(){return new Qa},Lb=function(d,a,g){if(d&&a&&g){g=g.toUpperCase();for(var e=a.toUpperCase(),u=e.split(g),h=g.length,q=0;q<u.length;q++){var w=e.indexOf(u[q]),r=a.substr(0,u[q].length);w+=u[q].length;var f=e.length-w;e=e.substr(w,f);a=a.substr(w,f);w=$("<span>");w.text(r);w.appendTo(d);q!=u.length-1&&1<u.length&&(w=e.indexOf(g),r=a.substr(w,h),w+=h,f=e.length-w,e=e.substr(w,f),a=a.substr(w,f),w=$("<span>"),w.text(r),w.css("color","red"),w.clone().appendTo(d))}}},
dc=function(d,a){var g;d&&""!==d?25<d.length?g=c.get("modelNumberTooLong","\u7f16\u7801\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc725\u4e2a\u5b57\u7b26\u3002"):d.match(Ec)?Ma.isSpecialWord(d)&&(g=c.get("specialWordAsFieldNumber","\u201c#1\u201d\u4e3a\u7279\u6b8a\u5173\u952e\u5b57\uff0c\u4e0d\u80fd\u4f5c\u4e3a\u6a21\u578b\u7f16\u7801\u3002").replace("#1",d)):g=c.get("numberStandard","\u7f16\u7801\u5fc5\u987b\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\u3002"):
g=c.get("modelNumberCannotBeEmpty","\u8bf7\u8f93\u5165\u7f16\u7801\u3002");return g},ec=function(d,a){var g;d&&""!==d?50<d.length?g=c.get("modelNameTooLong","\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):a&&500<a.length&&(g=c.get("descriptionTooLong","\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002")):g=c.get("modelNameCannotBeEmpty","\u8bf7\u8f93\u5165\u540d\u79f0\u3002");return g},jc=function(d){for(var a=!1,g=0;g<Gb.length;g++)if(Gb[g].getModelGroupName()===
d){a=!0;break}return a},kc=function(d,a){var g=I.createFacade(function(e){if(e){d?X.occur(X.DEPLOY_METHOD,X.DEPLOY_METHOD_BATCH):X.occur(X.DEPLOY_METHOD,X.DEPLOY_METHOD_SINGLE);for(var u=0;u<e.length;u++){var h=e[u],q=Object.keys(h);if(!q||0==q.length)break;q=q[0];"tableModeler"==q?X.occur(X.DATATABLE_MODEL_TRANSFORM_NODE_TYPE,h[q]):"metricModeler"==q&&X.occur(X.METRIC_MODEL_DIMENSION_TYPE,h[q])}}},function(e,u){return!0});g.setShowBlocking(!1);g.loadDeployModelerForUserOperation(a)};eb.BATCH="0";
eb.ONE="1";var sc=function(){Fb=new N(ac);var d=function(a){var g=a.getArrModelList();if(g&&0<g.length)for(var e=0;e<g.length;e++)Kb.push(g[e]);Gb.push(a);if((a=a.getChildren())&&0<a.length)for(e=0;e<a.length;e++)d(a[e])};I.createFacade(function(a){var g=[];a?(Fb.fromJsonObject(a),Fb.setModelGroupName(c.get("rootNode","\u5168\u90e8")),Oa.updateUiWhenRootGroup(!0),P.hideModelNoData(),d(Fb),g=Kb):(Fb.setModelGroupName(c.get("rootNode","\u5168\u90e8")),Fb.setModelGroupId(N.ROOT_NODE_ID),Fb.setModelSetId(L),
Fb.setLevel(0),Oa.updateUiWhenNoGroup(),P.showModelNoData());a=Oa.getModelGroupTree().getJqUi();na.layoutCtrlWithLRTB(a,0,0,"100%",65,41,"auto");a.appendTo(Oa.getJqUi());if(Zb)for(a=0;a<Gb.length;a++)if(Zb!==N.ROOT_NODE_ID&&Zb===Gb[a].getModelGroupId()){Oa.updateUiWhenNotRootGroup();g=Gb[a].getArrModelList();break}P.showModelView(g,!0);return!0}).listAllGroupAndModel(L)},gc=function(d){Ia=[];for(var a=0;a<d.length;a++){var g=d[a];g.getSelected()&&Ia.push(g)}},nc=function(d,a){a=a==Da.ALL_TYPE||a==
Da.METRICS_MODEL;var g=P.getModelCardView().getMetricsInfoPanel();!P.getIsListView()&&g&&(a?d&&(a=g.getModel(),0==Vb([a],d).length&&P.getModelCardView().resizeModelCardView()):P.getModelCardView().resizeModelCardView())},Vb=function(d,a){a=$.trim(a).toLowerCase();for(var g=[],e,u=0;u<d.length;u++){var h=d[u];e=h.getModelName().toLowerCase();var q=h.getNumber().toLowerCase(),w=h.getDesc().toLowerCase(),r=h.getLockUserName();r=r?r.toLowerCase():"";var f=h.getCreator().toLowerCase(),n=h.getModifier().toLowerCase();
e=-1!=e.indexOf(a)||-1!=q.indexOf(a)||-1!=w.indexOf(a)||-1!=f.indexOf(a)||-1!=n.indexOf(a)||-1!=r.indexOf(a)?!0:!1;if(!e)a:{e=h;q=a;if((w=e.getMetricItems())&&0!=w.length)for(r=0;r<w.length;r++)if(n=w[r],f=n.getName().toLowerCase(),n=n.getDesc().toLowerCase(),-1!=f.indexOf(q)||-1!=n.indexOf(q)){e.setSpreadState(!0);e=!0;break a}e=!1}e&&g.push(h)}return g},ic=function(d){if(!yb)return!0;var a=$.trim(P.getToolbar().getSearchText()).toLowerCase(),g=d.getName().toLowerCase();d=d.getDesc().toLowerCase();
return-1!=g.indexOf(a)||-1!=d.indexOf(a)},oc=function(){cc(function(){X.occur(X.BUTTON_TYPE,X.SOURCE_MANAGE);ta.getDataSourceManageEntrance()(L,U,R)})},wc=function(){cc(function(){Ia=P.getSelectedModels();0===Ia.length?I.getMessageCurtain().showPrompt(c.get("noDeployTips","\u6682\u65e0\u9700\u8981\u90e8\u7f72\u7684\u6a21\u578b\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u201c\u672a\u90e8\u7f72\u201d\u6216\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201d\u7684\u6a21\u578b\u3002")):1===Ia.length?Fc():tc()})},xc=function(){cc(function(){tc()})},
yc=function(){cc(function(){X.occur(X.BUTTON_TYPE,X.DEPLOY_MANAGE);ta.getDeployManageEntrance()(L,U)})},hc=function(d){cc(function(){X.occur(X.ENTER_DATA_AUTH_MANAGE,X.getEnterDataAuthManege(d));ta.getDataAuthorityEntrance()(L,U)})},cc=function(d){var a=I.createFacade(function(g){g?d():bc()});a.setShowBlocking(!1);a.checkModelSetIsExist(L)},bc=function(){var d=c.get("modelSetNotExist","\u6a21\u578b\u96c6\u5df2\u88ab\u5220\u9664\uff0c\u64cd\u4f5c\u5931\u8d25\u3002");I.getMessageCurtain().showPrompt(d)},
uc=function(){var d;Ia=P.getSelectedModels();0===Ia.length?d=c.get("selectEditModel","\u8bf7\u9009\u62e9\u9700\u8981\u7f16\u8f91\u7684\u6a21\u578b\u3002"):1<Ia.length&&(d=c.get("editSingleModel","\u8bf7\u9009\u62e9\u5355\u4e2a\u6a21\u578b\u8fdb\u884c\u7f16\u8f91\u3002"));d?I.getMessageCurtain().showPrompt(d):(d=new Pb(c.get("editModelProp","\u7f16\u8f91\u6a21\u578b\u5c5e\u6027")),d.setModel(Ia[0]),d.showDialog())},vc=function(){Ia=P.getSelectedModels();var d=Ia.length;if(0===d){var a=c.get("deleteModel",
"\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u6a21\u578b\u3002");I.getMessageCurtain().showPrompt(a)}else{for(var g=[],e=0;e<d;e++)g.push(Ia[e].getDeployed());-1!==g.indexOf(za.DEPLOYED_UPDATE)&&-1!==g.indexOf(za.DEPLOYED)?a=c.get("deleteArrDeployedModel","\u201c\u5df2\u90e8\u7f72\u201d\u3001\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201d\u72b6\u6001\u7684\u6a21\u578b\u65e0\u6cd5\u5220\u9664\u3002"):-1!==g.indexOf(za.DEPLOYED_UPDATE)?a=c.get("deleteDeployedUpdateModel","\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201d\u72b6\u6001\u7684\u6a21\u578b\u65e0\u6cd5\u5220\u9664\u3002"):
-1!==g.indexOf(za.DEPLOYED)&&(a=c.get("deleteDeployedModel","\u201c\u5df2\u90e8\u7f72\u201d\u72b6\u6001\u7684\u6a21\u578b\u65e0\u6cd5\u5220\u9664\u3002"));a?I.getMessageCurtain().showPrompt(a):(g=Ia[0].getModelName(),a=c.get("confirmDeleteModel","\u5220\u9664\u201c#1\u201d\u6a21\u578b\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f").replace("#1",g),1<d&&(a=c.get("confirmDeleteArrModel","\u5220\u9664\u201c#1\u201d\u7b49#2\u4e2a\u6a21\u578b\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u5b9a\u5220\u9664\u5417\uff1f").replace("#1",
g).replace("#2",d)),d=new Yb(!1),d.setConfirmMsg(a),d.setArrDeleteModel(Ia),d.showDialog(),$(".sa-ctrl-dialog-titlebar").removeClass("sa-ctrl-dialog-titlebar"))}},Wb=function(){Gb=[];Kb=[];Ia=[];P.getToolbar().clearSearchStatus();P.getToolbar().resetModelType();P.getModelCardView().empty();Oa.clearSearchStatus();Oa.resetModelGroupTree();sc()},Bc=function(){I.createFacade(function(d){if(d){var a=new la;a.fromJsonObject(d);d=[];for(var g=P.getSelectedModels(),e=0;e<g.length;e++)d.push(g[e].getModelId());
g=new xb;g.setRootNode(a);g.setGlobal(I);g.setModelSetId(L);g.setSelectModelIds(d);g.setMessageCurtain(I.getMessageCurtain());g.showExportDialog()}else I.getMessageCurtain().showPrompt(c.get("noModelForExport","\u6ca1\u6709\u53ef\u4f9b\u5bfc\u51fa\u7684\u6a21\u578b\u3002"))},function(d,a){if(20009001===d)return d=c.get("invalidPermissionForExportModel","\u60a8\u6ca1\u6709\u5bfc\u51fa\u6a21\u578b\u7684\u6743\u9650\u3002"),I.getMessageCurtain().showPrompt(d),!0}).getAllModelGroupAndModelForExport(L)},
zc=function(){Ia=P.getSelectedModels();if(0===Ia.length){var d=c.get("moveModel","\u8bf7\u9009\u62e9\u9700\u8981\u79fb\u52a8\u7684\u6a21\u578b\u3002");I.getMessageCurtain().showPrompt(d)}else d=new Va,d.setGlobal(I),d.setModelSetId(L),d.setSelectedMoveModel(Ia),d.setSuccessCallback(function(a,g,e){var u=new Qa;u.fromJsonObject(e);var h=[];Oa.getModelGroupTree().getRootGroup().visiting(function(k){h.push(k)});for(e=0;e<g.length;e++){var q=g[e];q.setModifier(u.getModifier());q.setModifyTime(u.getModifyTime());
var w=q.getModelId(),r=q.getGroupId();q.setGroupId(a);for(var f=0;f<h.length;f++){if(h[f].getUserObject().getModelGroupId()===r)for(var n=h[f].getUserObject().getArrModelList(),b=0;b<n.length;b++)n[b].getModelId()===w&&n.splice(b,1);h[f].getUserObject().getModelGroupId()===a&&h[f].getUserObject().getArrModelList().push(q)}}a=I.getSelectedGroup();a=P.matchModelByType(I.getCurrentGroupModel(Bb,a));yb&&(a=Vb(a,P.getToolbar().getSearchText()));a.forEach(function(k){k.setSelected(!1)});P.showModelView(a,
!1);a=c.get("moveModelSuccess","\u79fb\u52a8\u6a21\u578b\u6210\u529f\u3002");I.getMessageCurtain().showSuccess(a,2E3)}),d.showDialog()},Ac=function(){Ia=P.getSelectedModels();var d;0===Ia.length?d=c.get("copyModel","\u8bf7\u9009\u62e9\u9700\u8981\u590d\u5236\u7684\u6a21\u578b\u3002"):1<Ia.length&&(d=c.get("copyModelNum","\u8bf7\u9009\u62e9\u5355\u4e2a\u6a21\u578b\u8fdb\u884c\u590d\u5236\u3002"));if(1!==Ia.length)I.getMessageCurtain().showPrompt(d);else{d=Ia[0];var a=new Xa;a.setCopyModel(d);a.showDialog()}},
Fc=function(){Ia=P.getSelectedModels();var d=Ia[0];if(d.getDeployed()===za.DEPLOYED)I.getMessageCurtain().showPrompt(c.get("noDeployTips","\u6682\u65e0\u9700\u8981\u90e8\u7f72\u7684\u6a21\u578b\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u201c\u672a\u90e8\u7f72\u201d\u6216\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201d\u7684\u6a21\u578b\u3002"));else{var a=I.createFacade(function(g){1==g?Gc(d.getModelId()):(g=new Ja,Ia&&1===Ia.length&&g.setSelectedModel(Ia[0]),g.showDialog(),g.textFieldFocus())},null,null,ta.getFunGetDeployRemoteImpl()());
a.setShowBlocking(!0);a.needDeployRefModel(d.getModelId())}},Gc=function(d){I.createFacade(function(a){var g=new ja;g.fromJsonObject(a);if(0<g.getChildren().length){var e=new S;e.setRootNode(g);e.setDescConfirmCallback(function(u,h){I.createFacade(function(q){if(q){var w=eb.ONE;0<h.length&&(w=eb.BATCH);var r=new ua;r.fromJsonObject(q);q=new eb(r,null,w);q.setRefModel(!0);q.show();h.push(d);kc(!1,h)}},function(q,w){if(20008001<=q&&20008E3>q){switch(q){case 20008001:var r=c.get("duplicateDeployException",
"\u6a21\u578b\u5df2\u90e8\u7f72\uff0c\u8bf7\u52ff\u91cd\u590d\u90e8\u7f72\u3002");break;case 20008009:r=c.get("modelNotExistException","\u6a21\u578b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\uff0c\u90e8\u7f72\u5931\u8d25\u3002")}return r?(e.destroy(),I.getMessageCurtain().showPrompt(r,2E3),Wb(),!0):!1}},null,ta.getFunGetDeployRemoteImpl()()).deployModelForModelSetSource(L,d,u,h)});e.asyncShowDeployDialog()}else a=new Ja,Ia&&1===Ia.length&&a.setSelectedModel(Ia[0]),a.showDialog(),a.textFieldFocus();
return(new va(g)).getJqUi()},function(a,g){},null,ta.getFunGetDeployRemoteImpl()()).loadNeedDeployRefModel(d)},tc=function(){Ia=P.getSelectedModels();for(var d=0<Ia.length,a=0;a<Ia.length;a++){var g=Ia[a];if(g.getDeployed()===za.NONE_DEPLOYED||g.getDeployed()===za.DEPLOYED_UPDATE){d=!1;break}}if(d)I.getMessageCurtain().showPrompt(c.get("noDeployTips","\u6682\u65e0\u9700\u8981\u90e8\u7f72\u7684\u6a21\u578b\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u201c\u672a\u90e8\u7f72\u201d\u6216\u201c\u90e8\u7f72\u540e\u66f4\u6539\u201d\u7684\u6a21\u578b\u3002"));
else if(Ib=new ub,Ib.setGlobal(I),Ib.setModelSetId(L),Ia&&0<Ia.length){var e=[],u={};for(a=0;a<Ia.length;a++)u[Ia[a].getModelId()]=Ia[a];d=I.createFacade(function(h){var q=h.deployableModelIds,w=h.notDeployableModelIds;for(h=0;h<q.length;h++)e.push(u[q[h]]);Ib.setAutoSelectedModel(e);h=I.getSelectedGroup();Ib.setAutoSelectedGroup(h.getModelGroupId());var r={};h=I.createFacade(function(f){for(var n in f)r[n]=f[n];Ib.setMapModelRefJson(r);Bb&&Ib.setAutoCheckedContainChild(Bb);Ib.createDialog().show();
Ib.textFieldFocus();Ib.showNotDeployableModelPrompt(w,Ia)},null,null,ta.getFunGetDeployRemoteImpl()());h.setShowBlocking(!0);h.batchLoadRefDeployModelIds(q)},null,null,ta.getFunGetDeployRemoteImpl()());d.setShowBlocking(!0);d.batchCheckModelCycleReference(Object.keys(u))}else Bb&&Ib.setAutoCheckedContainChild(Bb),Ib.createDialog().show(),Ib.textFieldFocus()};Ab.DIALOG_WIDTH=480;Ab.DIALOG_HEIGHT=360;Ab.WIZARD_PANEL_WIDTH=300;Ab.WIZARD_PANEL_HEIGHT=80;Ab.WIZARD_PANEL_LEFT_MARGIN=Ab.DIALOG_WIDTH-Ab.WIZARD_PANEL_WIDTH>>
1};var wa,Ca,Pa,rb,Ba,pa,Za,O,F,K,m,T,ca,aa,ea,ya,mb,pb,fa,cb,hb,c,Nb,sb,na,Ob,v,L,U,R,V,da,C,ia,N,xa,ma,ta,X,ab,Qa,Da,za,ua,ha,Ha,Ma,xb,ra,la,ba,ja,sa;(function(){var B=com.kingdee.bos.qing.ui.component;wa=B.MessageCurtain;Ca=B.Dialog;Pa=B.Label;rb=B.TextField;Ba=B.TextArea;pa=B.SplitPane;Za=B.ToolbarButton;O=B.SearchBox;F=B.Button;K=B.CheckBox;m=B.Icons;T=B.MessageDialog;ca=B.WizardDialog;aa=B.DropdownSelector;ea=B.Tree;ya=B.HelpIcon;mb=B.Menu;pb=B.MenuModel;fa=B.MenuItemModel;cb=B.AbstractModalDialog;
hb=B.ComboBox;B=com.kingdee.bos.qing.modeler.mainpage.imexport;xb=B.ExportDialog;ra=B.UploadPane;la=B.FolderNode;B=com.kingdee.bos.qing.framework.common;c=B.MultilanguageManager.createPackageAccessor(ka);Nb=B.WindowResizeObserver;B=com.kingdee.bos.qing.common.ui;sb=B.TableUtil;B=com.kingdee.bos.qing.common;na=B.DomUtil;Ob=B.Util;v=B.DateFormater;L=Ob.decodeParamFromUrl(location.search,"modelSetId");U=Ob.decodeParamFromUrl(location.search,"modelSetName");R="true"==Ob.decodeParamFromUrl(location.search,
"isPreset");B=com.kingdee.bos.qing.modeler.common.ui;V=B.NoDataContainer;da=B.SearchNoDataContainer;C=B.ModelGroupPanel;ia=B.ModelGroupTree;B=com.kingdee.bos.qing.modeler.common.model;N=B.ModelGroupFolderNode;Da=B.ModelType;B=com.kingdee.bos.qing.modeler.mainpage.common;xa=B.Facade;ma=B.MyIcons;ta=B.Integration;X=B.UserOperationReporter;B=com.kingdee.bos.qing.modeler.mainpage.model;ab=B.ModelGroup;Qa=B.Model;za=B.ModelDeployStatus;ua=B.DeployResponse;ha=B.MetricItem;ja=B.DeployFolderNode;sa=B.DeployLeafNode;
B=com.kingdee.bos.qing.modeler.designer.metricdesigner;Ha=B.MetricsCalculateDialog;B=com.kingdee.bos.qing.modeler;Ma=B.SpecialWordChecker;B=com.kingdee.bos.qing;ba=B.CodeLoader})()})();
//qingVersionTag: 20250324