var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(y){var C=0;return function(){return C<y.length?{done:!1,value:y[C++]}:{done:!0}}};$jscomp.arrayIterator=function(y){return{next:$jscomp.arrayIteratorImpl(y)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(y,C,L){if(y==Array.prototype||y==Object.prototype)return y;y[C]=L.value;return y};$jscomp.getGlobal=function(y){y=["object"==typeof globalThis&&globalThis,y,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var C=0;C<y.length;++C){var L=y[C];if(L&&L.Math==Math)return L}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(y,C){var L=$jscomp.propertyToPolyfillSymbol[C];if(null==L)return y[C];L=y[L];return void 0!==L?L:y[C]};
$jscomp.polyfill=function(y,C,L,da){C&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(y,C,L,da):$jscomp.polyfillUnisolated(y,C,L,da))};$jscomp.polyfillUnisolated=function(y,C,L,da){L=$jscomp.global;y=y.split(".");for(da=0;da<y.length-1;da++){var ea=y[da];if(!(ea in L))return;L=L[ea]}y=y[y.length-1];da=L[y];C=C(da);C!=da&&null!=C&&$jscomp.defineProperty(L,y,{configurable:!0,writable:!0,value:C})};
$jscomp.polyfillIsolated=function(y,C,L,da){var ea=y.split(".");y=1===ea.length;da=ea[0];da=!y&&da in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var H=0;H<ea.length-1;H++){var M=ea[H];if(!(M in da))return;da=da[M]}ea=ea[ea.length-1];L=$jscomp.IS_SYMBOL_NATIVE&&"es6"===L?da[ea]:null;C=C(L);null!=C&&(y?$jscomp.defineProperty($jscomp.polyfills,ea,{configurable:!0,writable:!0,value:C}):C!==L&&(void 0===$jscomp.propertyToPolyfillSymbol[ea]&&(L=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[ea]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(ea):$jscomp.POLYFILL_PREFIX+L+"$"+ea),$jscomp.defineProperty(da,$jscomp.propertyToPolyfillSymbol[ea],{configurable:!0,writable:!0,value:C})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(y){if(y)return y;var C=function(H,M){this.$jscomp$symbol$id_=H;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:M})};C.prototype.toString=function(){return this.$jscomp$symbol$id_};var L="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",da=0,ea=function(H){if(this instanceof ea)throw new TypeError("Symbol is not a constructor");return new C(L+(H||"")+"_"+da++,H)};return ea},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(y){if(y)return y;y=Symbol("Symbol.iterator");for(var C="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),L=0;L<C.length;L++){var da=$jscomp.global[C[L]];"function"===typeof da&&"function"!=typeof da.prototype[y]&&$jscomp.defineProperty(da.prototype,y,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return y},"es6",
"es3");$jscomp.iteratorPrototype=function(y){y={next:y};y[Symbol.iterator]=function(){return this};return y};$jscomp.iteratorFromArray=function(y,C){y instanceof String&&(y+="");var L=0,da=!1,ea={next:function(){if(!da&&L<y.length){var H=L++;return{value:C(H,y[H]),done:!1}}da=!0;return{done:!0,value:void 0}}};ea[Symbol.iterator]=function(){return ea};return ea};
$jscomp.polyfill("Array.prototype.keys",function(y){return y?y:function(){return $jscomp.iteratorFromArray(this,function(C){return C})}},"es6","es3");$jscomp.findInternal=function(y,C,L){y instanceof String&&(y=String(y));for(var da=y.length,ea=0;ea<da;ea++){var H=y[ea];if(C.call(L,H,ea,y))return{i:ea,v:H}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(y){return y?y:function(C,L){return $jscomp.findInternal(this,C,L).v}},"es6","es3");
(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});com.kingdee.bos.qing.modeler.SpecialWordChecker=new function(){var y="! $ & * + , - . / : < << = > @ ABORT ACCESS ACCESSED ACCOUNT ACTIVATE ADD ADMIN ADMINISTER ADMINISTRATOR ADVISE ADVISOR AFTER ALGORITHM ALIAS ALL ALLOCATE ALLOW ALL_ROWS ALTER ALWAYS ANALYZE ANCILLARY AND AND_EQUAL ANTIJOIN ANY APPEND APPLY ARCHIVE ARCHIVELOG ARRAY AS ASC ASSOCIATE AT ATTRIBUTE ATTRIBUTES AUDIT AUTHENTICATED AUTHENTICATION AUTHID AUTHORIZATION AUTO AUTOALLOCATE AUTOEXTEND AUTOMATIC AVAILABILITY BACKUP BECOME BEFORE BEGIN BEHALF BETWEEN BFILE BIGFILE BINARY_DOUBLE BINARY_DOUBLE_INFINITY BINARY_DOUBLE_NAN BINARY_FLOAT BINARY_FLOAT_INFINITY BINARY_FLOAT_NAN BINDING BITMAP BITS BLOB BLOCK BLOCKS BLOCKSIZE BLOCK_RANGE BODY BOTH BOUND BROADCAST BUFFER BUFFER_CACHE BUFFER_POOL BUILD BULK BY BYPASS_RECURSIVE_CHECK BYPASS_UJVC BYTE CACHE CACHE_CB CACHE_INSTANCES CACHE_TEMP_TABLE CALL CANCEL CARDINALITY CASCADE CASE CAST CATEGORY CERTIFICATE CFILE CHAINED CHANGE CHAR CHARACTER CHAR_CS CHECK CHECKPOINT CHILD CHOOSE CHUNK CIV_GB CLASS CLEAR CLOB CLONE CLOSE CLOSE_CACHED_OPEN_CURSORS CLUSTER CLUSTERING_FACTOR COALESCE COARSE COLLECT COLLECTIONS_GET_REFS COLUMN COLUMNS COLUMN_STATS COLUMN_VALUE COMMENT COMMIT COMMITTED COMPACT COMPATIBILITY COMPILE COMPLETE COMPOSITE_LIMIT COMPRESS COMPUTE CONFORMING CONNECT CONNECT_BY_ISCYCLE CONNECT_BY_ISLEAF CONNECT_BY_ROOT CONNECT_TIME CONSIDER CONSISTENT CONSTRAINT CONSTRAINTS CONTAINER CONTENT CONTENTS CONTEXT CONTINUE CONTROLFILE CONVERT CORRUPTION COST CPU_COSTING CPU_PER_CALL CPU_PER_SESSION CREATE CREATE_STORED_OUTLINES CROSS CUBE CUBE_GB CURRENT CURRENT_DATE CURRENT_SCHEMA CURRENT_TIME CURRENT_TIMESTAMP CURRENT_USER CURSOR CURSOR_SHARING_EXACT CURSOR_SPECIFIC_SEGMENT CYCLE DANGLING DATA DATABASE DATAFILE DATAFILES DATAOBJNO DATE DATE_MODE DAY DBA DBA_RECYCLEBIN DBTIMEZONE DDL DEALLOCATE DEBUG DEC DECIMAL DECLARE DECREMENT DEFAULT DEFERRABLE DEFERRED DEFINED DEFINER DEGREE DELAY DELETE DEMAND DENSE_RANK DEREF DEREF_NO_REWRITE DESC DETACHED DETERMINES DICTIONARY DIMENSION DIRECTORY DISABLE DISASSOCIATE DISCONNECT DISK DISKGROUP DISKS DISMOUNT DISTINCT DISTINGUISHED DISTRIBUTED DML DML_UPDATE DOCUMENT DOMAIN_INDEX_NO_SORT DOMAIN_INDEX_SORT DOUBLE DOWNGRADE DRIVING_SITE DROP DUMP DYNAMIC DYNAMIC_SAMPLING DYNAMIC_SAMPLING_EST_CDN EACH ELEMENT ELSE EMPTY ENABLE ENCRYPTED ENCRYPTION END ENFORCE ENFORCED ENTRY ERROR ERROR_ON_OVERLAP_TIME ESCAPE ESTIMATE EVENTS EXCEPT EXCEPTIONS EXCHANGE EXCLUDING EXCLUSIVE EXECUTE EXEMPT EXISTS EXPAND_GSET_TO_UNION EXPIRE EXPLAIN EXPLOSION EXPORT EXPR_CORR_CHECK EXTEND EXTENDS EXTENT EXTENTS EXTERNAL EXTERNALLY EXTRACT FACT FAILED FAILED_LOGIN_ATTEMPTS FAILGROUP FALSE FAST FBTSCAN FIC_CIV FIC_PIV FILE FILTER FINAL FINE FINISH FIRST FIRST_ROWS FLAGGER FLASHBACK FLOAT FLOB FLUSH FOLLOWING FOR FORCE FORCE_XML_QUERY_REWRITE FOREIGN FREELIST FREELISTS FREEPOOLS FRESH FROM FULL FUNCTION FUNCTIONS GATHER_PLAN_STATISTICS GBY_CONC_ROLLUP GENERATED GLOBAL GLOBALLY GLOBAL_NAME GLOBAL_TOPIC_ENABLED GRANT GROUP GROUPING GROUPS GROUP_BY GUARANTEE GUARANTEED GUARD HASH HASHKEYS HASH_AJ HASH_SJ HAVING HEADER HEAP HIERARCHY HIGH HINTSET_BEGIN HINTSET_END HOUR HWM_BROKERED IDENTIFIED IDENTIFIER IDENTITY IDGENERATORS IDLE_TIME IF IGNORE IGNORE_ON_CLAUSE IGNORE_OPTIM_EMBEDDED_HINTS IGNORE_WHERE_CLAUSE IMMEDIATE IMPORT IN INCLUDE_VERSION INCLUDING INCREMENT INCREMENTAL INDEX INDEXED INDEXES INDEXTYPE INDEXTYPES INDEX_ASC INDEX_COMBINE INDEX_DESC INDEX_FFS INDEX_FILTER INDEX_JOIN INDEX_ROWS INDEX_RRS INDEX_SCAN INDEX_SKIP_SCAN INDEX_SS INDEX_SS_ASC INDEX_SS_DESC INDEX_STATS INDICATOR INFINITE INFORMATIONAL INITIAL INITIALIZED INITIALLY INITRANS INLINE INNER INSERT INSTANCE INSTANCES INSTANTIABLE INSTANTLY INSTEAD INT INTEGER INTEGRITY INTERMEDIATE INTERNAL_CONVERT INTERNAL_USE INTERPRETED INTERSECT INTERVAL INTO INVALIDATE IN_MEMORY_METADATA IS ISOLATION ISOLATION_LEVEL ITERATE ITERATION_NUMBER JAVA JOB JOIN KEEP KERBEROS KEY KEYFILE KEYS KEYSIZE KEY_LENGTH KILL LAST LATERAL LAYER LDAP_REGISTRATION LDAP_REGISTRATION_ENABLED LDAP_REG_SYNC_INTERVAL LEADING LEFT LENGTH LESS LEVEL LEVELS LIBRARY LIKE LIKE2 LIKE4 LIKEC LIKE_EXPAND LIMIT LINK LIST LOB LOCAL LOCALTIME LOCALTIMESTAMP LOCAL_INDEXES LOCATION LOCATOR LOCK LOCKED LOG LOGFILE LOGGING LOGICAL LOGICAL_READS_PER_CALL LOGICAL_READS_PER_SESSION LOGOFF LOGON LONG MAIN MANAGE MANAGED MANAGEMENT MANUAL MAPPING MASTER MATCHED MATERIALIZE MATERIALIZED MAX MAXARCHLOGS MAXDATAFILES MAXEXTENTS MAXIMIZE MAXINSTANCES MAXLOGFILES MAXLOGHISTORY MAXLOGMEMBERS MAXSIZE MAXTRANS MAXVALUE MEASURES MEMBER MEMORY MERGE MERGE_AJ MERGE_CONST_ON MERGE_SJ METHOD MIGRATE MIN MINEXTENTS MINIMIZE MINIMUM MINUS MINUTE MINVALUE MIRROR MLSLABEL MODE MODEL MODEL_DONTVERIFY_UNIQUENESS MODEL_MIN_ANALYSIS MODEL_NO_ANALYSIS MODEL_PBY MODEL_PUSH_REF MODIFY MONITORING MONTH MOUNT MOVE MOVEMENT MULTISET MV_MERGE NAME NAMED NAN NATIONAL NATIVE NATURAL NAV NCHAR NCHAR_CS NCLOB NEEDED NESTED NESTED_TABLE_FAST_INSERT NESTED_TABLE_GET_REFS NESTED_TABLE_ID NESTED_TABLE_SET_REFS NESTED_TABLE_SET_SETID NETWORK NEVER NEW NEXT NLS_CALENDAR NLS_CHARACTERSET NLS_COMP NLS_CURRENCY NLS_DATE_FORMAT NLS_DATE_LANGUAGE NLS_ISO_CURRENCY NLS_LANG NLS_LANGUAGE NLS_LENGTH_SEMANTICS NLS_NCHAR_CONV_EXCP NLS_NUMERIC_CHARACTERS NLS_SORT NLS_SPECIAL_CHARS NLS_TERRITORY NL_AJ NL_SJ NO NOAPPEND NOARCHIVELOG NOAUDIT NOCACHE NOCOMPRESS NOCPU_COSTING NOCYCLE NODELAY NOFORCE NOGUARANTEE NOLOGGING NOMAPPING NOMAXVALUE NOMINIMIZE NOMINVALUE NOMONITORING NONE NOORDER NOOVERRIDE NOPARALLEL NOPARALLEL_INDEX NORELY NOREPAIR NORESETLOGS NOREVERSE NOREWRITE NORMAL NOROWDEPENDENCIES NOSEGMENT NOSORT NOSTRICT NOSWITCH NOT NOTHING NOVALIDATE NOWAIT NO_ACCESS NO_BASETABLE_MULTIMV_REWRITE NO_BUFFER NO_CPU_COSTING NO_EXPAND NO_EXPAND_GSET_TO_UNION NO_FACT NO_FILTERING NO_INDEX NO_INDEX_FFS NO_INDEX_SS NO_MERGE NO_MODEL_PUSH_REF NO_MONITORING NO_MULTIMV_REWRITE NO_ORDER_ROLLUPS NO_PARALLEL NO_PARALLEL_INDEX NO_PARTIAL_COMMIT NO_PRUNE_GSETS NO_PUSH_PRED NO_PUSH_SUBQ NO_QKN_BUFF NO_QUERY_TRANSFORMATION NO_REF_CASCADE NO_REWRITE NO_SEMIJOIN NO_SET_TO_JOIN NO_STAR_TRANSFORMATION NO_STATS_GSETS NO_SWAP_JOIN_INPUTS NO_TRIGGER NO_UNNEST NO_USE_HASH NO_USE_MERGE NO_USE_NL NO_XML_QUERY_REWRITE NULL NULLS NUMBER NUMERIC NVARCHAR2 OBJECT OBJNO OBJNO_REUSE OF OFF OFFLINE OID OIDINDEX OLD ON ONLINE ONLY OPAQUE OPAQUE_TRANSFORM OPAQUE_XCANONICAL OPCODE OPEN OPERATOR OPTIMAL OPTIMIZER_FEATURES_ENABLE OPTIMIZER_GOAL OPTION OPT_ESTIMATE OR ORA_ROWSCN ORDER ORDERED ORDERED_PREDICATES ORGANIZATION OR_EXPAND OUTER OUTLINE OUT_OF_LINE OVER OVERFLOW OVERFLOW_NOMOVE OVERLAPS OWN PACKAGE PACKAGES PARALLEL PARALLEL_INDEX PARAMETERS PARENT PARITY PARTIALLY PARTITION PARTITIONS PARTITION_HASH PARTITION_LIST PARTITION_RANGE PASSWORD PASSWORD_GRACE_TIME PASSWORD_LIFE_TIME PASSWORD_LOCK_TIME PASSWORD_REUSE_MAX PASSWORD_REUSE_TIME PASSWORD_VERIFY_FUNCTION PCTFREE PCTINCREASE PCTTHRESHOLD PCTUSED PCTVERSION PERCENT PERFORMANCE PERMANENT PFILE PHYSICAL PIV_GB PIV_SSF PLAN PLSQL_CODE_TYPE PLSQL_DEBUG PLSQL_OPTIMIZE_LEVEL PLSQL_WARNINGS POLICY POST_TRANSACTION POWER PQ_DISTRIBUTE PQ_MAP PQ_NOMAP PREBUILT PRECEDING PRECISION PREPARE PRESENT PRESERVE PRIMARY PRIOR PRIVATE PRIVATE_SGA PRIVILEGE PRIVILEGES PROCEDURE PROFILE PROGRAM PROJECT PROTECTED PROTECTION PUBLIC PURGE PUSH_PRED PUSH_SUBQ PX_GRANULE QB_NAME QUERY QUERY_BLOCK QUEUE QUEUE_CURR QUEUE_ROWP QUIESCE QUOTA RANDOM RANGE RAPIDLY RAW RBA READ READS REAL REBALANCE REBUILD RECORDS_PER_BLOCK RECOVER RECOVERABLE RECOVERY RECYCLE RECYCLEBIN REDUCED REDUNDANCY REF REFERENCE REFERENCED REFERENCES REFERENCING REFRESH REF_CASCADE_CURSOR REGEXP_LIKE REGISTER REJECT REKEY RELATIONAL RELY REMOTE_MAPPED RENAME REPAIR REPLACE REQUIRED RESET RESETLOGS RESIZE RESOLVE RESOLVER RESOURCE RESTORE_AS_INTERVALS RESTRICT RESTRICTED RESTRICT_ALL_REF_CONS RESUMABLE RESUME RETENTION RETURN RETURNING REUSE REVERSE REVOKE REWRITE REWRITE_OR_ERROR RIGHT ROLE ROLES ROLLBACK ROLLUP ROW ROWDEPENDENCIES ROWID ROWNUM ROWS ROW_LENGTH RULE RULES SAMPLE SAVEPOINT SAVE_AS_INTERVALS SB4 SCALE SCALE_ROWS SCAN SCAN_INSTANCES SCHEDULER SCHEMA SCN SCN_ASCENDING SCOPE SD_ALL SD_INHIBIT SD_SHOW SECOND SECURITY SEED SEGMENT SEG_BLOCK SEG_FILE SELECT SELECTIVITY SEMIJOIN SEMIJOIN_DRIVER SEQUENCE SEQUENCED SEQUENTIAL SERIALIZABLE SERVERERROR SESSION SESSIONS_PER_USER SESSIONTIMEZONE SESSIONTZNAME SESSION_CACHED_CURSORS SET SETS SETTINGS SET_TO_JOIN SEVERE SHARE SHARED SHARED_POOL SHRINK SHUTDOWN SIBLINGS SID SIMPLE SINGLE SINGLETASK SIZE SKIP SKIP_EXT_OPTIMIZER SKIP_UNQ_UNUSABLE_IDX SKIP_UNUSABLE_INDEXES SMALLFILE SMALLINT SNAPSHOT SOME SORT SOURCE SPACE SPECIFICATION SPFILE SPLIT SPREADSHEET SQL SQLLDR SQL_TRACE STANDBY STAR START STARTUP STAR_TRANSFORMATION STATEMENT_ID STATIC STATISTICS STOP STORAGE STORE STREAMS STRICT STRIP STRUCTURE SUBMULTISET SUBPARTITION SUBPARTITIONS SUBPARTITION_REL SUBSTITUTABLE SUCCESSFUL SUMMARY SUPPLEMENTAL SUSPEND SWAP_JOIN_INPUTS SWITCH SWITCHOVER SYNONYM SYSAUX SYSDATE SYSDBA SYSOPER SYSTEM SYSTIMESTAMP SYS_DL_CURSOR SYS_FBT_INSDEL SYS_OP_BITVEC SYS_OP_CAST SYS_OP_COL_PRESENT SYS_OP_ENFORCE_NOT_NULL $SYS_OP_MINE_VALUE SYS_OP_NOEXPAND SYS_OP_NTCIMG $SYS_PARALLEL_TXN SYS_RID_ORDER TABLE TABLES TABLESPACE TABLESPACE_NO TABLE_STATS TABNO TEMPFILE TEMPLATE TEMPORARY THAN THE THEN THREAD THROUGH TIME TIMEOUT TIMESTAMP TIMEZONE_ABBR TIMEZONE_HOUR TIMEZONE_MINUTE TIMEZONE_REGION TIME_ZONE TIV_GB TIV_SSF TO TOPLEVEL TRACE TRACING TRACKING TRAILING TRANSACTION TRANSITIONAL TREAT TRIGGER TRIGGERS TRUE TRUNCATE TRUSTED TUNING TX TYPE TYPES TZ_OFFSET UB2 UBA UID UNARCHIVED UNBOUND UNBOUNDED UNDER UNDO UNDROP UNIFORM UNION UNIQUE UNLIMITED UNLOCK UNNEST UNPACKED UNPROTECTED UNQUIESCE UNRECOVERABLE UNTIL UNUSABLE UNUSED UPDATABLE UPDATE UPDATED UPD_INDEXES UPD_JOININDEX UPGRADE UPSERT UROWID USAGE USE USER USER_DEFINED USER_RECYCLEBIN USE_ANTI USE_CONCAT USE_HASH USE_MERGE USE_NL USE_NL_WITH_INDEX USE_PRIVATE_OUTLINES USE_SEMI USE_STORED_OUTLINES USE_TTT_FOR_GSETS USE_WEAK_NAME_RESL USING VALIDATE VALIDATION VALUE VALUES VARCHAR VARCHAR2 VARRAY VARYING VECTOR_READ VECTOR_READ_TRACE VERSION VERSIONS VIEW WAIT WELLFORMED WHEN WHENEVER WHERE WHITESPACE WITH WITHIN WITHOUT WORK WRITE XID XMLATTRIBUTES XMLCOLATTVAL XMLELEMENT XMLFOREST XMLPARSE XMLSCHEMA XMLTYPE X_DYN_PRUNE YEAR ZONE [ ] ^ | ABS ABSENT ABSOLUTE ACCORDING ACTION ADA AGGREGATE ALSO ANALYSE ARE ARRAY_AGG ARRAY_MAX_CARDINALITY ASENSITIVE ASSERTION ASSIGNMENT ASYMMETRIC ATOMIC AVG BACKWARD BASE64 BEGIN_FRAME BEGIN_PARTITION BERNOULLI BIGINT BINARY BIT BIT_LENGTH BLOCKED BOM BOOLEAN BREADTH C CALLED CASCADED CATALOG CATALOG_NAME CEIL CEILING CHAIN CHARACTERISTICS CHARACTERS CHARACTER_LENGTH CHARACTER_SET_CATALOG CHARACTER_SET_NAME CHARACTER_SET_SCHEMA CHAR_LENGTH CLASS_ORIGIN COBOL COLLATE COLLATION COLLATION_CATALOG COLLATION_NAME COLLATION_SCHEMA COLUMN_NAME COMMAND_FUNCTION COMMAND_FUNCTION_CODE COMMENTS CONCURRENTLY CONDITION CONDITION_NUMBER CONFIGURATION CONFLICT CONNECTION CONNECTION_NAME CONSTRAINT_CATALOG CONSTRAINT_NAME CONSTRAINT_SCHEMA CONSTRUCTOR CONTAINS CONTROL CONVERSION COPY CORR CORRESPONDING COUNT COVAR_POP COVAR_SAMP CSV CUME_DIST CURRENT_CATALOG CURRENT_DEFAULT_TRANSFORM_GROUP CURRENT_PATH CURRENT_ROLE CURRENT_ROW CURRENT_TRANSFORM_GROUP_FOR_TYPE CURSOR_NAME DATALINK DATETIME_INTERVAL_CODE DATETIME_INTERVAL_PRECISION DB DEFAULTS DELIMITER DELIMITERS DEPENDS DEPTH DERIVED DESCRIBE DESCRIPTOR DETERMINISTIC DIAGNOSTICS DISCARD DISPATCH DLNEWCOPY DLPREVIOUSCOPY DLURLCOMPLETE DLURLCOMPLETEONLY DLURLCOMPLETEWRITE DLURLPATH DLURLPATHONLY DLURLPATHWRITE DLURLSCHEME DLURLSERVER DLVALUE DO DOMAIN DYNAMIC_FUNCTION DYNAMIC_FUNCTION_CODE ENCODING END-EXEC END_FRAME END_PARTITION ENUM EQUALS EVENT EVERY EXCEPTION EXCLUDE EXEC EXP EXPRESSION EXTENSION FAMILY FETCH FIRST_VALUE FLAG FLOOR FORTRAN FORWARD FOUND FRAME_ROW FREE FREEZE FS FUSION G GENERAL GET GO GOTO GRANTED GREATEST HANDLER HEX HOLD ILIKE IMMEDIATELY IMMUTABLE IMPLEMENTATION IMPLICIT INDENT INHERIT INHERITS INOUT INPUT INSENSITIVE INTERSECTION INVOKER ISNULL K KEY_MEMBER KEY_TYPE LABEL LAG LANGUAGE LARGE LAST_VALUE LEAD LEAKPROOF LEAST LIKE_REGEX LISTEN LN LOAD LOGGED LOWER M MAP MATCH MAX_CARDINALITY MESSAGE_LENGTH MESSAGE_OCTET_LENGTH MESSAGE_TEXT MOD MODIFIES MODULE MORE MUMPS NAMES NAMESPACE NESTING NFC NFD NFKC NFKD NIL NORMALIZE NORMALIZED NOTIFY NOTNULL NTH_VALUE NTILE NULLABLE NULLIF OCCURRENCES_REGEX OCTETS OCTET_LENGTH OFFSET OIDS OPTIONS ORDERING ORDINALITY OTHERS OUT OUTPUT OVERLAY OVERRIDING OWNED OWNER P PAD PARAMETER PARAMETER_MODE PARAMETER_NAME PARAMETER_ORDINAL_POSITION PARAMETER_SPECIFIC_CATALOG PARAMETER_SPECIFIC_NAME PARAMETER_SPECIFIC_SCHEMA PARSER PARTIAL PASCAL PASSING PASSTHROUGH PATH PERCENTILE_CONT PERCENTILE_DISC PERCENT_RANK PERIOD PERMISSION PLACING PLANS PLI PORTION POSITION POSITION_REGEX PRECEDES PREPARED PROCEDURAL QUOTE RANK REASSIGN RECHECK RECURSIVE REGR_AVGX REGR_AVGY REGR_COUNT REGR_INTERCEPT REGR_R2 EXIT PRINT PROC FILLFACTOR RAISERROR FREETEXT READTEXT BREAK FREETEXTTABLE RECONFIGURE BROWSE REPLICATION RESTORE HOLDLOCK CLUSTERED ROWCOUNT IDENTITY_INSERT ROWGUIDCOL IDENTITYCOL SAVE SESSION_USER CONTAINSTABLE SETUSER SYSTEM_USER TEXTSIZE LINENO TOP TRAN NOCHECK DBCC NONCLUSTERED TSEQUAL DENY OFFSETS UPDATETEXT OPENDATASOURCE OPENQUERY OPENROWSET DUMMY OPENXML WAITFOR WHILE ERRLVL WRITETEXT L S RK SEQ MS XXFIELDXX".split(" ");
this.isSpecialWord=function(C){return C&&0!=C.length?-1<y.indexOf(C.trim().toUpperCase()):!0}}})();(function(){function y(){var F=1,O=[];this.zoomIn=function(){var t=y.SUPPORT_SCALES.indexOf(F);t<y.SUPPORT_SCALES.length-1&&(F=y.SUPPORT_SCALES[t+1],A())};this.zoomOut=function(){var t=y.SUPPORT_SCALES.indexOf(F);0<t&&(F=y.SUPPORT_SCALES[t-1],A())};this.isMinScale=function(){return y.SUPPORT_SCALES[0]==F};this.isMaxScale=function(){return y.SUPPORT_SCALES[y.SUPPORT_SCALES.length-1]==F};this.getRatio=function(){return F};this.setCustomRatio=function(t){F=t};this.getScaledSize=function(t){return 1==
F?t:F*t};this.getRawSize=function(t){return 1==F?t:t/F};this.getScaledCoordinate=function(t){return 1==F?t:[F*t[0],F*t[1]]};this.getRawCoordinate=function(t){return 1==F?t:[t[0]/F,t[1]/F]};this.addPropertyChangedListener=function(t){O.push(t)};var A=function(){for(var t=0;t<O.length;t++){var D=O[t];D&&D()}}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing=
{});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.designer&&(com.kingdee.bos.qing.modeler.designer={});var C=com.kingdee.bos.qing.modeler.designer;C.Toolbar=function(){var F=new L,O,A=$("<div>"),t=$("<div>"),D=$("<div>");this.getJqUi=function(){O||(O=F.getJqUi(),O.addClass("modeler-designer-toolbar"),q(A),q(t),q(D));return O};this.addButton=function(u,T,aa,R){return z(t,!1,u,T,aa,R)};this.addButtonForHeadCustom=
function(u,T,aa,R){return z(A,!1,u,T,aa,R)};this.addButtonForTailCustom=function(u,T,aa,R){return z(D,!1,u,T,aa,R)};this.addMenuButton=function(u,T,aa,R){return z(t,!0,u,T,aa,R)};this.addMenuButtonForHeadCustom=function(u,T,aa,R){return z(A,!0,u,T,aa,R)};this.addMenuButtonForTailCustom=function(u,T,aa,R){return z(D,!0,u,T,aa,R)};this.getAllBtnWidth=function(){return A.width()+t.width()+D.width()};var q=function(u){u.css({"float":"left",position:"relative",height:"100%"});u.appendTo(O)},z=function(u,
T,aa,R,oa,I){u=F.createButton(u,T,aa,oa,I);u.setIconSetter(function(sa,ha){C.Icons.background(sa,ha)});u.setIconName(R);return u}};C.RemoteImpl=function(){qa.call(this);var F;this.getRemoteUrl=function(){return F};this.setRemoteUrl=function(O){F=O}};C.Integration=function(){var F,O,A,t,D,q=!0;this.setMapTableException=function(z){D=z};this.getMapTableException=function(){return D};this.setMapSourceType=function(z){t=z};this.getMapSourceType=function(){return t};this.setMapSourcePermission=function(z){A=
z};this.getMapSourcePermission=function(){return A};this.setModelName=function(z){F=z};this.getModelName=function(){return F};this.setModelDesc=function(z){O=z};this.getModelDesc=function(){return O};this.setModelIsValid=function(z){q=z};this.isValidModel=function(){return q}};C.StatusBar=function(){var F,O,A,t,D;this.getJqUi=function(){F||(F=$("<div>"),F.addClass("modeler-designer-statusbar"),O=$("<span>"),O.addClass("modeler-designer-statusbar-name"),O.appendTo(F),A=$("<span>"),A.addClass("modeler-designer-statusbar-dirtystate"),
A.appendTo(F),t=$("<span>"),t.addClass("modeler-designer-statusbar-prompt"),t.appendTo(F));return F};this.setCurrentName=function(z){O.text(z)};this.showDirtyState=function(z){A.text(z?"*":"")};this.showShortPrompt=function(z,u,T){clearTimeout(D);t.text(z);t.css("color",T?T:"");if(u){var aa=0,R=function(){if(6<aa)q();else{if(0==aa%2){t.text(z);var oa=650}else t.text(""),oa=350;D=setTimeout(R,oa);aa++}};R()}else q()};var q=function(){D=setTimeout(function(){t.text("")},5E3)}};C.DesignerFacade=function(F,
O,A,t){H.call(this,F,O,A,t);var D=this.protectedMethod;this.loadTables=function(q){q={source:JSON.stringify(q.toJsonObject()),needFilterMetric:!0};D.remote("loadTables",q)};this.getMeta=function(q,z){q={source:JSON.stringify(q.toJsonObject()),table:JSON.stringify(z.toJsonObject())};D.remote("getMeta",q)};this.getTableField=function(q,z){for(var u=[],T=[],aa=0;aa<q.length;aa++)u.push(q[aa].toJsonObject());for(aa=0;aa<z.length;aa++)T.push(z[aa].toJsonObject());q={sources:JSON.stringify(u),tables:JSON.stringify(T)};
D.remote("getTableField",q)};this.getTableFieldWithCheckModel=function(q){q={model:JSON.stringify(q.toJsonObject())};D.remote("getTableFieldWithCheckModel",q)};this.getDBCenterTables=function(q){D.remote("getDBCenterTables",{appNumber:q})};this.checkConnection=function(q){D.remote("checkConnection",{sourceId:q})};this.checkMetricFormula=function(q,z,u,T){var aa={};if(u)for(var R=Object.keys(u),oa=0;oa<R.length;oa++){for(var I=R[oa],sa=u[I],ha=[],ya=0;ya<sa.length;ya++)ha.push(sa[ya].toJsonObject());
aa[I]=ha}q={expr:q,metricId:T,model:JSON.stringify(z.toJsonObject()),fields:JSON.stringify(aa)};D.remote("checkMetricFormula",q)};this.previewMetrics=function(q,z,u,T){q={modeler:JSON.stringify(q),filters:JSON.stringify(z),previewConfig:JSON.stringify(u),metricId:T};D.remote("previewMetrics",q)};this.getFirstPageMetric=function(q,z){q={model:JSON.stringify(q),previewConfig:JSON.stringify(z.toJsonObject())};D.remote("getFirstPageMetric",q)};this.updateMetricByPage=function(q,z,u,T,aa){q={model:JSON.stringify(q),
jobId:z,jobName:u,startIndex:T,pageSize:aa};D.remote("updateMetricByPage",q)};this.exportMetricData=function(q,z,u,T){q={jobId:q,jobName:z,totalRowCount:u,model:JSON.stringify(T)};D.remote("exportMetricData",q)};this.getTotalRowCount=function(q,z){D.remote("getTotalRowCount",{jobId:q,jobName:z})};this.deleteResultDataFile=function(q,z){D.remote("deleteResultDataFile",{jobId:q,jobName:z})};this.getMetricDimValues=function(q,z,u){q={modeler:JSON.stringify(q),dimensionId:z,metricId:u};D.remote("getMetricDimValues",
q)};this.getTablePreviewData=function(q,z,u,T){q={source:JSON.stringify(q.toJsonObject()),table:JSON.stringify(z.toJsonObject()),filters:JSON.stringify(u),rowCount:T};D.remote("getTablePreviewData",q)};this.getDataRowCount=function(q,z,u){q={source:JSON.stringify(q.toJsonObject()),table:JSON.stringify(z.toJsonObject()),filters:JSON.stringify(u)};D.remote("getDataRowCount",q)};this.cronExpression=function(q){D.remote("cronExpression",{cron:q})};this.checkDataWarehouseConfig=function(){D.remote("checkDataWarehouseConfig",
{})};this.checkReferencedModel=function(q,z,u){q={source:JSON.stringify(q.toJsonObject()),table:JSON.stringify(z.toJsonObject()),modelId:u};D.remote("checkReferencedModel",q)};this.checkModelerValid=function(q){q={model:JSON.stringify(q)};D.remote("checkModelerValid",q)};this.checkMetricTableException=function(q,z,u){q={source:JSON.stringify(q.toJsonObject()),table:JSON.stringify(z.toJsonObject()),modelId:u};D.remote("checkMetricTableException",q)}};C.PageScaleHelper=y;var L,da,ea,H,M,qa,N,V,ba,U;
(function(){var F=com.kingdee.bos.qing.ui.component;L=F.Toolbar;da=F.SimpleConfirmer;N=F.MessageDialog;F=com.kingdee.bos.qing.framework.common;ea=F.AbstractIcons;M=F.MultilanguageManager.createPackageAccessor(C);qa=F.AbstractRemoteCall;H=F.AbstractFacade;F=com.kingdee.bos.qing.common;U=F.RelativePeriodModel;V=C.FilterItem;ba=C.Field})();C.Icons=new function(){ea.call(this);var F=this.protectedMethod,O;this.setComboIconImpl=function(D){O=D};this.protectedInit=function(D,q){if(!O)throw Error("qing modeler comboIcon not found.");
O.define(q,"designer");q.setIconSize(16,16);A(0,0,"edit");A(0,1,"delete");A(0,2,"add");A(0,3,"zoomIn");A(0,4,"zoomOut");A(0,5,"layout");A(0,6,"rightArrow");A(0,7,"leftArrow");A(0,8,"upArrow");A(0,9,"downArrow");t(0,10,"qingWarning");t(0,11,"relation");t(0,12,"qingTable");A(0,13,"expanded");A(0,14,"expand");t(0,15,"btn_edit");A(0,17,"trial_calc");t(1,12,"qingTable_hover");A(0,18,"moveUp");t(0,19,"reset");A(0,20,"createDim");A(0,21,"publicDimension");A(0,22,"metric_filter");A(2,21,"metric_copy");A(2,
22,"new_filter");t(4,22,"exist_filter");q.setStartPosition(84,35);t(0,0,"select_field");t(0,1,"field_setting");t(0,2,"join");t(0,3,"union");t(0,4,"filter");t(0,5,"sort");t(0,6,"group_by");t(0,7,"calculate_field");A(0,8,"metric",!0);q.setStartPosition(84,52);t(0,0,"entity-sub");t(0,1,"entity-entry");t(0,2,"unlock");t(0,3,"lock_by_other");t(0,4,"lock_by_me");t(0,5,"tick");t(0,6,"cross");q.setIconSize(20,20);q.setStartPosition(0,35);t(0,0,"leftJoin");t(0,1,"rightJoin");t(0,2,"innerJoin");t(0,3,"fullJoin");
q.setStartPosition(238,35);q.setIconSize(32,32);t(0,0,"metric_icon");q.setStartPosition(288,35);q.setIconSize(16,16);A(0,0,"table_relation_with_hover");t(1,0,"table_relation");t(0,1,"custom_group");q.setStartPosition(0,55);q.setIconSize(20,20);A(0,0,"setting");t(0,1,"warning");q.setIconSize(60,80);q.setStartPosition(0,98);t(0,0,"no_source");q.setIconSize(138,78);q.setStartPosition(240,240);t(0,0,"no_data_cloud");q.setIconSize(253,140);q.setStartPosition(62,71);t(0,0,"drag_node_prompt");q.setIconSize(210,
170);q.setStartPosition(0,211);t(0,0,"no_node_and_source");O.define(q,"source");q.setStartPosition(0,20);q.setIconSize(16,16);t(0,0,"entity");t(0,1,"data");t(0,2,"modelSet");t(0,3,"file");t(0,4,"data-center");t(0,5,"table");t(0,6,"openapi");q.setStartPosition(85,0);q.setIconSize(16,16);t(0,0,"table_selected");q.setStartPosition(101,0);t(0,0,"f7");q.setStartPosition(0,40);q.setIconSize(20,20);q.setGap(0,1);t(0,0,"modelset-source-icon");t(0,1,"mysql");t(0,2,"datacenter-source-icon");t(0,3,"entity-source-icon");
t(0,4,"oracle");t(0,5,"postgresql");t(0,6,"sqlserver");t(0,7,"greenplum");t(0,8,"access");t(0,9,"db2");t(0,10,"odps");t(0,11,"sparksql");t(1,1,"redshift");t(1,2,"apachedrill");t(1,3,"hive");t(1,4,"impala");t(1,5,"kylin");t(1,6,"dm");t(1,7,"gaussdb");t(1,8,"sybaseiq");t(1,9,"sqlite");t(1,10,"sybase");t(2,2,"doris");t(2,3,"hana");q.setGap(0,0);t(1,0,"excel");t(2,0,"txt");t(2,1,"csv");t(1,11,"xml");t(2,4,"kingbase");t(2,5,"tdsql");t(2,6,"gbase");t(2,7,"vastbase");t(2,8,"yashandb");t(2,9,"openapi-source-icon");
t(2,10,"tidb");q.setStartPosition(120,-1);q.setIconSize(16,16);A(0,0,"refresh");q.setStartPosition(180,-1);q.setIconSize(16,16);A(0,0,"menu");q.setStartPosition(0,110);q.setIconSize(120,93);t(0,0,"no-permission");q.setStartPosition(100,100);q.setIconSize(138,84);t(0,0,"search-no-result");O.define(q,"metatree");q.setGap(1);q.setStartPosition(1,1);q.setIconSize(16,16);A(0,0,"DATE",!0);A(0,1,"STRING",!0);A(0,5,"TABLE",!0);A(0,8,"DATETIME",!0);A(0,9,"BOOLEAN",!0);A(0,10,"NUMBER",!0);A(0,11,"INT",!0);
O.define(q,"metric");q.setStartPosition(0,0);q.setIconSize(260,160);t(0,0,"add_metric");q.setStartPosition(0,164);q.setIconSize(210,170);t(0,0,"no_metric");q.setStartPosition(230,165);q.setIconSize(12,12);t(0,0,"add_metric_plug_sign")};var A=function(D,q,z,u){var T=z+"_hover";u?(t(D,q,z),t(D+1,q,T)):(t(D,q,T),t(D+1,q,z))},t=function(D,q,z){F.registIcon(D,q,z)}};C.LockHelper=new function(){var F,O,A,t,D,q,z,u,T=!1;this.show=function(R){q=$("<div>");q.addClass("modeler-designer-lock-statusbar");z=$("<div>");
u=$("<div>");u.addClass("modeler-designer-lock-text");z.addClass("modeler-designer-lock-icon");q.append(u);q.append(z);q.appendTo(R);q.on("click",aa);T=!0};this.registerLockRequestSender=function(R){t=R};this.setGlobal=function(R){F=R};this.setLockStateChangeListener=function(R){D=R};this.setLockInfo=function(R,oa,I){if(T){A=oa;O=R?C.LockHelper.STATE_LOCK_BY_ME:oa?C.LockHelper.STATE_LOCK_BY_OTHER:C.LockHelper.STATE_UNLOCK;D&&D(O==C.LockHelper.STATE_LOCK_BY_ME);if(!I){if(O==C.LockHelper.STATE_LOCK_BY_OTHER){var sa=
M.get("lockByOtherPrompt","\u5f53\u524d\u6a21\u578b\u5df2\u88ab\u201c#1\u201d\u9501\u5b9a\uff0c\u60a8\u7684\u4fee\u6539\u5c06\u65e0\u6cd5\u4fdd\u5b58\uff0c\u5efa\u8bae\u60a8\u9501\u5b9a\u5f53\u524d\u6a21\u578b\u540e\u518d\u8fdb\u884c\u7f16\u8f91\u3002");sa=sa.replace("#1",A)}else O==C.LockHelper.STATE_UNLOCK&&(sa=M.get("unlockPrompt","\u5f53\u524d\u6a21\u578b\u672a\u9501\u5b9a\uff0c\u4e0d\u53ef\u7f16\u8f91\uff0c\u8bf7\u9501\u5b9a\u6a21\u578b\u540e\u518d\u8fdb\u884c\u64cd\u4f5c"));sa?F.getMessageCurtain().showPrompt(sa,
-1):O==C.LockHelper.STATE_LOCK_BY_ME&&F.getMessageCurtain().showSuccess(M.get("lockSuccess","\u60a8\u5df2\u6210\u529f\u9501\u5b9a\u8be5\u6a21\u578b"))}R="lock_by_other";if(O==C.LockHelper.STATE_UNLOCK){R="unlock";var ha=M.get("unlock","\u672a\u9501\u5b9a")}else O==C.LockHelper.STATE_LOCK_BY_OTHER?ha=M.get("lockedBy","\u5df2\u88ab\u201c#1\u201d\u9501\u5b9a").replace("#1",A):O==C.LockHelper.STATE_LOCK_BY_ME&&(ha=M.get("lockedBy","\u5df2\u88ab\u201c#1\u201d\u9501\u5b9a").replace("#1",M.get("me","\u6211")),
R="lock_by_me");C.Icons.background(z,R);u.text(ha);u.attr("title",ha)}};this.setMaxWidth=function(R){u&&u.css("max-width",Math.max(0,Math.min(R-50,250))+"px")};var aa=function(){if(t){var R=O!=C.LockHelper.STATE_LOCK_BY_ME;if(R)t(R);else{var oa=new da;oa.setText(M.get("confirmUnlock","\u786e\u5b9a\u8981\u89e3\u9501\u5f53\u524d\u6a21\u578b\uff1f"));oa.setConfirmedListener(function(I){I&&t(R)});oa.show(q)}}}};C.LockHelper.STATE_LOCK_BY_ME="lock_by_me";C.LockHelper.STATE_LOCK_BY_OTHER="lock_by_other";
C.LockHelper.STATE_UNLOCK="unlock";C.DppVersionExceptionHandler=new function(){var F=!1;this.handle=function(O){if(20001101!=O)return!1;F||(F=!0,O=N.createFeedbackDialog(),O.setMsgImageType(N.MSG_WARNING),O.setMessage(M.get("dppVersionException","\u8f7b\u5efa\u6a21\u5ba2\u6237\u7aef\u7248\u672c\u4e0e\u6570\u636e\u5904\u7406\u5f15\u64ce\u7248\u672c\u4e0d\u4e00\u81f4\uff0c\u8bf7\u8054\u7cfb\u8fd0\u7ef4\u4eba\u5458\u5347\u7ea7\u5ba2\u6237\u7aef\u6216\u5f15\u64ce\u3002")),O.setOptionType(N.OPTION_OK),
O.setButtonText(N.RETURN_OK,M.get("iSee","\u6211\u77e5\u9053\u4e86")),O.setClosedAction(function(){F=!1}),O.showDialog());return!0}};C.PropDataTypeUtil=new function(){this.getDataTypeDesc=function(F){switch(F){case ba.DT_STRING:F=M.get("text","\u6587\u672c");break;case ba.DT_NUMBER:F=M.get("number","\u6570\u503c");break;case ba.DT_INT:F=M.get("integer","\u6574\u6570");break;case ba.DT_DATE:F=M.get("dataTypeDate","\u65e5\u671f");break;case ba.DT_DATETIME:F=M.get("dateTime","\u65e5\u671f\u65f6\u95f4");
break;case ba.DT_BOOLEAN:F=M.get("bool","\u5e03\u5c14");break;default:F=""}return F}};y.SUPPORT_SCALES=[.5,.6,.7,.8,.9,1,1.1,1.2,1.3,1.4,1.5];C.NodeResultCache=new function(){var F={},O={},A=[];this.cacheOneNodeField=function(t,D,q){if(q){var z=O[t];if(!z||z<q)for(F[t]=D,q=0;q<A.length;q++)(z=A[q])&&z(t,D)}};this.removeNodeCache=function(t){F[t]=void 0;O[t]=void 0};this.getOneNodeField=function(t){return F[t]};this.addCacheChangeListener=function(t){A.push(t)};this.clear=function(){F={};O={}}};C.FilterCheckHelper=
new function(){this.checkFilterField=function(A,t){if(!t)return A=M.get("noFieldToSelect","\u65e0\u53ef\u9009\u5b57\u6bb5"),new V.FiltersCheckingResult(-1,A);for(var D,q=0;q<A.length;q++){var z=A[q];if(!z.isEmpty()){D=F(z,q,t);if(!D)if(D=q,z=O(z)){var u=M.get("incompleteFilter","\u7b2c#1\u884c\u4e0d\u5b8c\u6574\uff0c");u=u.replace("#1",D+1);D=new V.FiltersCheckingResult(D,u+z)}else D=null;if(D)break}}return D};this.checkFilterLogical=function(A){var t=0,D=-1,q,z=0;for(q=0;q<A.length;q++)A[q].isEmpty()||
(z=q);q=z;for(z=0;z<A.length;z++){var u=A[z];if(!u.isEmpty()){t+=u.getLeftBracketCount();t-=u.getRightBracketCount();0>D&&0!=t&&(D=z);if(0>t)return A=M.get("bracketMismatch","\u5de6\u53f3\u62ec\u53f7\u4e0d\u5339\u914d\u3002"),new V.FiltersCheckingResult(D,A);if(z!==q&&!u.getLogicOp())return A=M.get("lackLogicalSymbol","\u7b2c#1\u884c\u7f3a\u5c11\u903b\u8f91\u7b26"),A=A.replace("#1",z+1),new V.FiltersCheckingResult(z,A);if(z==q&&u.getLogicOp())return A=M.get("logicalSymbolUnnecessary","\u5b58\u5728\u591a\u4f59\u7684\u903b\u8f91\u3002"),
new V.FiltersCheckingResult(z,A)}}return 0<t?(A=M.get("bracketMismatch","\u5de6\u53f3\u62ec\u53f7\u4e0d\u5339\u914d\u3002"),new V.FiltersCheckingResult(D,A)):null};this.checkFieldExisted=function(A,t){return F(A,-1,t)?!1:!0};var F=function(A,t,D){A=A.getField();for(var q=0;q<D.length;q++)if(A&&D[q].getFullName()===A.getFullName())return null;D=M.get("lackField","\u7b2c#1\u884c\u5b57\u6bb5\u4e0d\u5b58\u5728\u3002");D=D.replace("#1",t+1);return new V.FiltersCheckingResult(t,D)},O=function(A){var t=
A.getCompareOp(),D=A.getField(),q=A.getValue(),z=D?D.getOutputDataType():null;D=D?D.isEnum():!1;D=V.getSelectableCompares(z,D);A=A.getRelativeDateRange();if(!t)return M.get("lackComparisonOperator","\u7f3a\u5c11\u6bd4\u8f83\u7b26\u3002");for(var u=!1,T=0;T<D.length;T++)if(t===D[T]){u=!0;break}if(!u)return M.get("comparisonMismatch","\u6bd4\u8f83\u7b26\u4e0d\u5339\u914d\u3002");if(!V.isCompareOpWithoutValue(t)){if(!q&&!A)return M.get("lackValue","\u7f3a\u5c11\u503c\u3002");if(z===ba.DT_NUMBER||z===
ba.DT_INT){if(!V.REG_NUMBER.test(q)&&!V.isCompareOpWithinOrNotWithinValue(t))return M.get("valueMustBeNum","\u503c\u5fc5\u987b\u4e3a\u6570\u5b57\u3002")}else if(z===ba.DT_DATE||z===ba.DT_DATETIME)if(V.isCompareOpRelativeDateRangeValue(t)){if(!(A instanceof U))return M.get("invalidRelativeDateValue","\u65e0\u6548\u7684\u76f8\u5bf9\u65e5\u671f\u503c\u3002")}else{if(!V.REG_DATETIME.test(q))return M.get("invalidDateValue","\u65e0\u6548\u7684\u65e5\u671f\u503c\u3002")}else if(z===ba.DT_BOOLEAN&&q!==ba.BOOLEAN_TRUE&&
q!==ba.BOOLEAN_FALSE)return M.get("wrongBoolean","\u9519\u8bef\u7684\u5e03\u5c14\u503c\u3002")}return null}};var fa=new function(){var F;this.hookCollector=function(O){F=O};this.occur=function(O,A){try{F&&F(O,A)}catch(t){window.console&&console.warn(t)}}};fa.BUTTON_TYPE="button-type";fa.FUNCTION="function";fa.DATATABLE_MODEL_TRANSFORM_NODE_TYPE="datatable-model-transform-node-type";fa.METRIC_MODEL_DIMENSION_TYPE="metric-model-dimension-type";fa.ENTER_DATA_AUTH_MANAGE="enter-data-auth-manage";fa.SAVE=
"\u4fdd\u5b58";fa.REFRESH="\u5237\u65b0";fa.DEPLOY="\u90e8\u7f72";fa.ROLLBACK_CURRENT_DEPLOY="\u56de\u9000\u5230\u6700\u65b0\u90e8\u7f72\u72b6\u6001";fa.UNDO="\u64a4\u9500";fa.REDO="\u53cd\u64a4\u9500";fa.CLEAR="\u6e05\u9664";fa.MODEL_CHECK="\u6a21\u578b\u6821\u9a8c";fa.MODEL_PREVIEW="\u6a21\u578b\u9884\u89c8";fa.MODEL_PROPERTY="\u6a21\u578b\u5c5e\u6027";fa.SOURCE_MANAGE="\u6570\u636e\u6e90\u7ba1\u7406";fa.MODEL_PREVIEW_EXPORT_TO_EXCEL="\u9884\u89c8-\u5bfc\u51fa\u5230Excel";fa.METRIC_DELETE="\u5220\u9664";
fa.TRIAL_CALCULATE="\u8bd5\u8ba1\u7b97";fa.TRIAL_CALCULATE_DIMENSION_FILTER="\u8bd5\u8ba1\u7b97-\u7ef4\u5ea6\u8fc7\u6ee4";fa.SOURCE_TABLE_FILTER="\u6e90\u8868\u8fc7\u6ee4";fa.SELECT_FIELD="\u9009\u62e9\u5b57\u6bb5";fa.METRIC_FILTER="\u6307\u6807\u8fc7\u6ee4";fa.NUMBER_FOMMAT="\u6570\u5b57\u683c\u5f0f";fa.ADD_DIMENSION="\u65b0\u589e\u7ef4\u5ea6";fa.PUBLIC_DIMENSION_SETTING="\u516c\u5171\u7ef4\u5ea6\u8bbe\u7f6e";fa.ENTER_DATA_AUTH_MANAGE_AFTER_DEPLOY="\u6210\u529f\u90e8\u7f72\u540e\u70b9\u51fb\u8df3\u8f6c\u8fdb\u5165";
C.UserOperationReporter=fa})();(function(){function y(){var p=this,v,n=[],g=[],k=[],w;this.setType=function(f){v=f};this.getType=function(){return v};this.supportIncrementalMaterialize=function(){return!1};this.protectedIsTableInUse=function(){throw Error("override me");};this.insertSource=function(f,c){for(var b=!1,m=f.getSourceId(),a=0;a<n.length;a++)if(m==n[a].getSourceId()){b=!0;break}b||(n.splice(c,0,f),e(y.KEY_ADD_PREPARED_SOURCE,[f]))};this.batchAddSource=function(f){for(var c=[],b=0;b<f.length;b++){for(var m=!1,a=f[b],
d=a.getSourceId(),x=0;x<n.length;x++)if(d==n[x].getSourceId()){m=!0;break}m||(n.push(a),c.push(a))}e(y.KEY_ADD_PREPARED_SOURCE,c)};this.setSource=function(f,c){n=f;!c&&e(y.KEY_SET_PREPARED_SOURCE,n)};this.removeSource=function(f){var c=n.indexOf(f);return-1<c?(n.splice(c,1),e(y.KEY_REMOVE_PREPARED_SOURCE,[f]),c):-1};this.batchRemoveUserSqlTable=function(f){f=p.getUserSqlTables(f);for(var c=0;c<f.length;c++)p.removeTableIfUseless(f[c])};this.batchRemoveSource=function(f){for(var c=0;c<f.length;c++){var b=
n.indexOf(f[c]);-1<b&&n.splice(b,1)}e(y.KEY_REMOVE_PREPARED_SOURCE,f)};this.getSource=function(f){for(var c=0,b=n.length;c<b;c++)if(n[c].getId()==f)return n[c]};this.getAllSource=function(){return n};this.isSourceUsed=function(f){f=f.getId();for(var c=0,b=g.length;c<b;c++){var m=g[c];if(m.getSourceUid()==f&&p.protectedIsTableInUse(m))return!0}return!1};this.addTable=function(f){for(var c=0,b=g.length;c<b;c++)if(g[c].isSame(f))return;g.push(f);f.addPropertyChangeCallback(e);e(y.KEY_ADD_TABLE,f)};this.updateTable=
function(f,c){for(var b=-1,m=0,a=g.length;m<a;m++)if(g[m].isSame(c)){b=m;break}-1<b&&(g.splice(b,1),g.splice(b,0,f),c.removePropertyChangeCallback(e),f.addPropertyChangeCallback(e))};this.batchAddTable=function(f){for(var c=0;c<f.length;c++)p.addTable(f[c])};this.setTables=function(f){g=f};this.getTable=function(f){for(var c=0,b=g.length;c<b;c++)if(g[c].getUid()==f)return g[c]};this.removeTable=function(f){var c=g.indexOf(f);-1<c&&(g.splice(c,1),f.removePropertyChangeCallback(e),e(y.KEY_REMOVE_TABLE,
f));return c};this.batchRemoveTable=function(f){for(var c=0;c<f.length;c++){var b=f[c];p.removeTable(b);b.removePropertyChangeCallback(e)}};this.insertTable=function(f,c){for(var b=0,m=g.length;b<m;b++)if(g[b].isSame(f))return;g.splice(c,0,f);f.addPropertyChangeCallback(e);e(y.KEY_ADD_TABLE,f)};this.getUserSqlTables=function(f){for(var c=[],b=0,m=g.length;b<m;b++){var a=g[b];a.isUserSql()&&a.getSourceUid()==f&&c.push(a)}return c};this.getAllUserSqlTables=function(){for(var f=[],c=0,b=g.length;c<b;c++)g[c].isUserSql()&&
f.push(g[c]);return f};this.getAllTable=function(f){for(var c=[],b=0,m=g.length;b<m;b++){var a=g[b];f?(p.protectedIsTableInUse(a)||a.isUserSql())&&c.push(a):p.protectedIsTableInUse(a)&&c.push(a)}return c};this.getSameTable=function(f){for(var c=0,b=g.length;c<b;c++)if(g[c].isSame(f))return g[c]};this.isSameTableAndSourceExist=function(f,c,b){for(var m=0;m<g.length;m++){var a=g[m];if(a.getTableName()==c&&a.getNamespace()==b&&p.getSource(a.getSourceUid()).getSourceId()==f)return!0}return!1};this.setMaterializedConfig=
function(f){w=f};this.getMaterializedConfig=function(){return w};this.toJsonObject=function(){var f={};f.type=v;for(var c=[],b=0;b<n.length;b++)c.push(n[b].toJsonObject());f.sources=c;c=[];for(b=0;b<g.length;b++){var m=g[b];(p.protectedIsTableInUse(m)||m.isUserSql())&&c.push(m.toJsonObject())}f.tables=c;w&&(f.materializedConfig=w.toJsonObject());p.protectedToJsonObject(f);return f};this.fromJsonObject=function(f){v=f.type;var c=f.sources;if(c)for(var b=0;b<c.length;b++){var m=c[b],a=new ea;a.fromJsonObject(m);
n.push(a)}if(c=f.tables)for(b=0;b<c.length;b++)m=new L,m.fromJsonObject(c[b]),m.addPropertyChangeCallback(e),g.push(m);(b=f.materializedConfig)?(w=new R,w.fromJsonObject(b)):w=null;p.protectedFromJsonObject(f)};this.isUserSqlTableInUse=function(f){f=p.getSameTable(f);return p.protectedIsTableInUse(f)};this.protectedToJsonObject=function(f){};this.protectedFromJsonObject=function(f){};this.addPropertyChangeCallback=function(f){k.push(f)};this.removePropertyChangeCallback=function(f){f=k.indexOf(f);
-1<f&&k.splice(f,1)};this.clearPropertyChangeCallback=function(){k=[]};var e=function(f,c){for(var b=0,m=k.length;b<m;b++)k[b](f,c)};this.protectedMethod={firePropertyChangeEvt:e,copy:function(f){f.setType(v);for(var c=[],b=0;b<n.length;b++)c.push(n[b].copy());f.setSource(c,!0);c=[];for(b=0;b<g.length;b++)c.push(g[b].clone());f.setTables(c);w&&f.setMaterializedConfig(w.copy())}}}function C(){var p=this,v,n,g,k,w,e,f,c,b=[];this.setId=function(a){v=a};this.getId=function(){return v};this.setAlias=
function(a){n=a;k=void 0;m(y.KEY_NODE_CHANGE_ALIAS,p)};this.getAlias=function(){return n};this.setNameIndex=function(a){k=a};this.getNameIndex=function(){return k};this.getX=function(){return w};this.getY=function(){return e};this.getWidth=function(){return f};this.getHeight=function(){return c};this.setPosition=function(a,d){w=a;e=d};this.changePosition=function(a,d){p.setPosition(a,d);m(y.KEY_NODE_CHANGE_POSITION,p)};this.setSize=function(a,d){f=a;c=d};this.setType=function(a){g=a};this.getType=
function(a){return g};this.addPropertyChangeCallback=function(a){b.push(a)};this.removePropertyChangeCallback=function(a){a=b.indexOf(a);-1<a&&b.splice(a,1)};this.toJsonObject=function(){var a={};a.id=v;a.alias=n;a.x=w;a.y=e;a.type=g;k&&(a.nameIndex=k);p.protectedToJson(a);return a};this.fromJsonObject=function(a){v=a.id;n=a.alias;w=a.x;e=a.y;g=a.type;var d=parseInt(a.nameIndex);isNaN(d)||(k=d);p.protectedFromJson(a)};this.protectedToJson=function(a){};this.protectedFromJson=function(a){};var m=function(a,
d){for(var x=0,K=b.length;x<K;x++)b[x](a,d)};this.protectedMethod={firePropertyChangeEvt:function(a){m(a,p)}}}function L(){var p=this,v,n,g,k,w,e,f,c=[],b=[];this.setUid=function(a){v=a};this.getUid=function(){return v};this.isUserSql=function(){return e?!0:!1};this.getUserSql=function(){return e};this.setUserSql=function(a){e=a};this.setTableName=function(a){n=a};this.getTableName=function(){return n};this.setSourceUid=function(a){g=a};this.getSourceUid=function(){return g};this.setNamespace=function(a){k=
a};this.getNamespace=function(){return k};this.setDisplayName=function(a){w=a};this.getDisplayName=function(){return w};this.setSelectedFields=function(a){f=a;m(y.KEY_TABLE_SELECT_FIELD,p)};this.getSelectedFields=function(){return f};this.setFilterItems=function(a){c=a;m(y.KEY_TABLE_SET_FILTER,p)};this.getFilterItems=function(){return c};this.addPropertyChangeCallback=function(a){b.push(a)};this.removePropertyChangeCallback=function(a){a=b.indexOf(a);-1<a&&b.splice(a,1)};this.isSame=function(a){return g==
a.getSourceUid()&&n==a.getTableName()&&k==a.getNamespace()&&(!p.isUserSql()&&!a.isUserSql()||p.isUserSql()&&a.isUserSql()&&(a=a.getUserSql(),a.getSqlType()==e.getSqlType()&&a.getContent()==e.getContent()))?!0:!1};this.toJsonObject=function(){var a={};a.id=v;a.name=n;a.sourceId=g;a.namespace=k;p.isUserSql()&&(a.userSQL=e.toJsonObject());if(f){for(var d=[],x=0;x<f.length;x++)d.push(f[x].toJsonObject());a.selectedFields=d}if(c){d=[];for(x=0;x<c.length;x++)d.push(c[x].toJsonObject());a.filterItems=d}return a};
this.fromJsonObject=function(a){v=a.id;n=a.name;g=a.sourceId;k=a.namespace;w=a.displayName;a.userSQL&&(e=new da,e.fromJsonObject(a.userSQL));var d=a.selectedFields;if(d){for(var x=[],K=0;K<d.length;K++){var l=new H;l.fromJsonObject(d[K]);x.push(l)}f=x}if(a=a.filterItems){d=[];for(K=0;K<a.length;K++)x=new u,x.fromJsonObject(a[K]),d.push(x);c=d}};this.clone=function(){var a=new L;a.setUid(v);a.setTableName(n);a.setNamespace(k);a.setDisplayName(w);a.setSourceUid(g);e&&a.setUserSql(e.copy());var d=[];
if(f){for(var x=0;x<f.length;x++)d.push(f[x].clone());a.setSelectedFields(d)}d=[];for(x=0;x<c.length;x++)d.push(c[x].copy());a.setFilterItems(d);return a};var m=function(a,d){for(var x=0,K=b.length;x<K;x++)b[x](a,d)}}function da(){var p,v;this.getSqlType=function(){return p};this.setSqlType=function(n){p=n};this.setContent=function(n){v=n};this.getContent=function(){return v};this.fromJsonObject=function(n){p=n.type;v=n.content};this.toJsonObject=function(){var n={};n.type=p;n.content=v;return n};
this.copy=function(){var n=new da;n.setSqlType(p);n.setContent(v);return n}}function ea(){var p,v,n,g,k,w;this.setId=function(e){p=e};this.getId=function(){return p};this.getSourceId=function(){return v};this.setSourceId=function(e){v=e};this.setSourceRefId=function(e){n=sId};this.getSourceRefId=function(){return n};this.getName=function(){return g};this.setName=function(e){g=e};this.setSourceType=function(e){k=e};this.getSourceType=function(){return k};this.setModelId=function(e){w=e};this.getModelId=
function(){return w};this.copy=function(){var e=new ea;e.setId(p);e.setSourceId(v);e.setSourceType(k);e.setName(g);e.setSourceType(k);e.setModelId(w);return e};this.toJsonObject=function(){var e={};e.id=p;e.modelSetSourceId=v;e.modelSetSourceRefId=n;e.modelId=w;e.type=k;return e};this.fromJsonObject=function(e){p=e.id;v=e.modelSetSourceId;n=e.modelSetSourceRefId;k=e.type;g=e.name}}function H(){var p=this,v,n,g,k,w,e,f,c,b,m;this.setTableId=function(d){v=d};this.getTableId=function(){return v};this.setFromNode=
function(d){n=d};this.getSourceNodeId=function(){return n};this.setName=function(d){g=d};this.getName=function(){return g};this.getFullName=function(){return n?n+"_"+g:v+"_"+g};this.setAlias=function(d){k=d};this.getAlias=function(){return k?k:g};this.setDataType=function(d){a(d);w=d};this.getDataType=function(){return w};this.setAppointedDataType=function(d){d&&a(d);e=d==w?null:d};this.getAppointedDataType=function(){return e};this.getOutputDataType=function(){return e?e:w};this.setRoundMode=function(d){c=
d};this.getRoundMode=function(){return c};this.setScale=function(d){f=d};this.getScale=function(){return f};this.getFormat=function(){return b};this.setFormat=function(d){b=d};this.setExtensions=function(d){m=d};this.getEnumValue=function(){return m?m[H.EXTENSION_BIZ_FIELD_ENUM_KEY]:null};this.isMulBaseData=function(){return m?m[H.EXTENSION_IS_MUL_BASE_DATA]:!1};this.isPk=function(){return m?m[H.EXTENSION_IS_PK]:!1};this.isEnum=function(){if(p.isMulBaseData()||p.getOutputDataType()!=H.DT_STRING)return!1;
var d=p.getEnumValue();return 0==(d?Object.keys(d):[]).length?!1:!0};this.fromJsonObject=function(d){g=d.name;k=d.alias;w=d.dataType;e=d.appointedDataType;n=d.fromNode;void 0!=d.scale&&(f=d.scale);d.roundMode&&(c=d.roundMode);m=d.extensions;d.format&&(b=d.format);d.tableId&&(v=d.tableId)};this.toJsonObject=function(){var d={};d.name=g;d.alias=k;d.dataType=w;d.fromNode=n;e&&(d.appointedDataType=e);void 0!=f&&(d.scale=f);c&&(d.roundMode=c);m&&(d.extensions=m);v&&(d.tableId=v);return d};var a=function(d){if(d!==
H.DT_STRING&&d!==H.DT_INT&&d!==H.DT_NUMBER&&d!==H.DT_DATE&&d!==H.DT_DATETIME&&d!==H.DT_BOOLEAN)throw Error("IllegalArgument: "+d);};this.clone=function(){var d=new H;d.setName(g);w&&d.setDataType(w);d.setAlias(k);e&&d.setAppointedDataType(e);d.setFromNode(n);void 0!=f&&d.setScale(f);c&&d.setRoundMode(c);d.setExtensions(m);b&&d.setFormat(b);v&&d.setTableId(v);return d};this.equals=function(d){return g==d.getName()&&k==d.getAlias()&&e==d.getAppointedDataType()&&f==d.getScale()&&c==d.getRoundMode()?
!0:!1}}function M(){var p,v,n,g;this.isExtractAllData=function(){return n};this.isPreviewAllData=function(){return g};this.setExtractPartlyData=function(k,w){p=k;v=w};this.setExtractAllDataAndPreviewCount=function(k){p=M.ALL_DATA_NUMBER;v=k};this.getExtractCount=function(){return p};this.setExtractCount=function(k){p=k};this.getPreviewCount=function(){return v};this.setPreviewCount=function(k){v=k};this.setExtractAllData=function(k){n=k};this.setPreviewAllData=function(k){g=k};this.setPreviewPartlyDataMode=
function(k,w,e){p=w;v=e;n=k};this.setPreviewPartlyDataMode=function(k,w,e,f){p=w;v=e;n=k;g=f};this.setPreviewAllDataMode=function(){g=n=!0};this.backup=function(){var k=new M;k.setExtractCount(p);k.setPreviewCount(v);k.setExtractAllData(n);k.setPreviewAllData(g);return k};this.toJsonObject=function(){var k={};k.extractCount=n?M.ALL_DATA_NUMBER:p;k.previewCount=g?M.ALL_DATA_NUMBER:v;return k}}function qa(){var p=this,v,n;this.setId=function(g){v=g};this.getId=function(){return v};this.toJsonObject=
function(){var g={};g.id=v;g.type=n;p.protectedToJson(g);return g};this.protectedToJson=function(g){};this.protectedMethod={setType:function(g){n=g}}}function N(){var p=[],v,n=[];this.isValid=function(){return v};this.getCases=function(){return n};this.getCheckedNodeIds=function(){return p};this.fromJsonObject=function(g){v=g.valid;p=g.nodeIds;if(g=g.cases){n=[];for(var k=new V,w=0;w<g.length;w++){var e=g[w],f=k.getInvalidityCase(e.type);e&&(f.fromJsonObject(e),n.push(f))}}}}function V(){this.getInvalidityCase=
function(p){switch(p){case ba.TYPE_MULTI_OUTPUT:return new U;case ba.TYPE_LACK_OUTPUT:return new fa;case ba.TYPE_INVALID_CONFIG:return new F;case ba.TYPE_LACK_INPUT:return new A;case ba.TYPE_INVALID_UPWARDNODE:return new t;case ba.TYPE_INVALID_SOURCE:return new D;case ba.TYPE_TABLE_NO_FIELD:return new q;case ba.TYPE_TABLE_NO_AUTHORITY:return new O}}}function ba(){var p,v=this;this.getType=function(){return p};this.fromJsonObject=function(n){p=n.type;v.protectedFromJsonObject(n)};this.protectedFromJsonObject=
function(n){}}function U(){ba.call(this);var p=[];this.protectedFromJsonObject=function(v){p=v.outputNodes};this.getOutputNodeIds=function(){return p}}function fa(){ba.call(this)}function F(){ba.call(this);var p;this.protectedFromJsonObject=function(v){p=v.nodeIds};this.getNodeIds=function(){return p}}function O(){ba.call(this);var p;this.protectedFromJsonObject=function(v){p=v.nodeIds};this.getNodeIds=function(){return p}}function A(){ba.call(this);var p;this.protectedFromJsonObject=function(v){p=
v.nodeIds};this.getNodeIds=function(){return p}}function t(){ba.call(this);var p;this.protectedFromJsonObject=function(v){p=v.nodeIds};this.getNodeIds=function(){return p}}function D(){ba.call(this);var p;this.protectedFromJsonObject=function(v){p=v.nodeIds};this.getNodeIds=function(){return p}}function q(){ba.call(this);var p;this.protectedFromJsonObject=function(v){p=v.nodeIds};this.getNodeIds=function(){return p}}function z(){var p,v=[],n=[];this.getField=function(g){return v[g]};this.getAllField=
function(){return v};this.getColumnCount=function(){return v?v.length:0};this.getOneRow=function(g){return n[g]};this.getRowCount=function(){return n?n.length:0};this.getNodeId=function(){return p};this.fromJsonObject=function(g){for(var k=g.fields,w=0;w<k.length;w++){var e=new H;e.fromJsonObject(k[w]);v.push(e)}n=g.data;p=g.nodeId}}function u(){var p,v,n,g,k=0,w=0,e,f=null;this.setField=function(b){(p=b)&&!b.isMulBaseData()&&v&&n&&(b=b.getOutputDataType(),b!==H.DT_DATE&&b!==H.DT_DATETIME||u.REG_DATETIME.test(n)||
u.isCompareOpWithinOrNotWithinValue(v)||(n=(new Date).getTime()));c()};this.updateNotExistFieldByMyself=function(){var b=new H;b.setFromNode(p.getSourceNodeId());b.setName(p.getName());b.setAlias(p.getAlias());p=b};this.updateNotExistField=function(b){var m=new H;m.setFromNode(b.getSourceNodeId());m.setName(b.getName());m.setAlias(b.getAlias());p=m};this.getField=function(){return p};this.getTargetFieldFullName=function(){return p?p.getFullName():null};this.setCompareOp=function(b){v=b};this.getCompareOp=
function(){return v};this.setValue=function(b){n=b;c()};this.getValue=function(){return n};this.setDisplayValue=function(b){g=b};this.getDisplayValue=function(b){return g?!b&&u.isCompareOpWithinOrNotWithinValue(v)?JSON.parse(g).join(","):u.isCompareOpRelativeDateRangeValue(v)?(b=p.getOutputDataType()===H.DT_DATETIME,ha.modelToDisplayText(f,b)):g:""};this.setLeftBracketCount=function(b){k=b};this.getLeftBracketCount=function(){return k};this.setRightBracketCount=function(b){w=b};this.getRightBracketCount=
function(){return w};this.setLogicOp=function(b){e=b};this.getLogicOp=function(){return e};this.setRelativeDateRange=function(b){f=b};this.getRelativeDateRange=function(){return f};this.isEmpty=function(){return 0===k&&0===w&&!p&&!v&&!n&&!e};var c=function(){if(p&&v){var b=p.getOutputDataType();if(n){var m=p.isEnum(),a=p.isMulBaseData(),d=m?p.getEnumValue():null;if(u.isCompareOpWithinOrNotWithinValue(v))if(m){b=JSON.parse(n);m=[];for(a=0;a<b.length;a++){var x=d[b[a]];x&&m.push(x)}g=JSON.stringify(m)}else g=
n;else a?g=n:b===H.DT_DATE||b===H.DT_DATETIME?(d=new Date,d.setTime(n),m=new com.kingdee.bos.qing.common.DateFormater,a=m.setFormatString,b=b===H.DT_DATE?"yyyy-MM-dd":"yyyy-MM-dd HH:mm:ss",a.call(m,b),g=m.format(d)):b===H.DT_BOOLEAN?(d=com.kingdee.bos.qing.framework.common.MultilanguageManager.createPackageAccessor(I),g=n===H.BOOLEAN_TRUE?d.get("dataTypeTrue","\u771f"):n===H.BOOLEAN_FALSE?d.get("dataTypeFalse","\u5047"):""):g=m?d[n]?d[n]:"":n}else g=u.isCompareOpRelativeDateRangeValue(v)&&null!=f?
ha.modelToDisplayText(f,b===H.DT_DATETIME):null}};this.copy=function(){var b=new u;b.setField(p);b.setCompareOp(v);b.setValue(n);b.setDisplayValue(g);b.setLeftBracketCount(k);b.setRightBracketCount(w);b.setLogicOp(e);b.setRelativeDateRange(f);return b};this.equals=function(b){if(!b)return!1;var m;if(m=p.equals(b.getField())&&v===b.getCompareOp()&&n===b.getValue()&&k===b.getLeftBracketCount()&&w===b.getRightBracketCount()&&e===b.getLogicOp())m=f||b.getRelativeDateRange()?f&&b.getRelativeDateRange()?
JSON.stringify(f.toJsonObject())===JSON.stringify(b.getRelativeDateRange().toJsonObject()):!1:!0;return m?!0:!1};this.toJsonObject=function(){if(!p)return null;var b={};b.field=p.toJsonObject();b.compareOp=v;b.value=n;b.displayValue=g;b.leftBrackets=k;b.rightBrackets=w;b.logicOp=e;f&&(b.relativeDateRange=f.toJsonObject());return b};this.fromJsonObject=function(b){b&&(p=new H,p.fromJsonObject(b.field),v=b.compareOp,n=b.value,g=b.displayValue,k=b.leftBrackets,w=b.rightBrackets,e=b.logicOp,b=b.relativeDateRange)&&
(f=new sa,f.fromJsonObject(b))}}function T(){var p=this,v,n=[];this.getNodeIdInConfig=function(){return[]};this.addPropertyChangeCallback=function(g){n.push(g)};this.toJsonObject=function(){var g={};g.type=v;p.protectedToJsonObject(g);return g};this.fromJsonObject=function(g){v=g.type;p.protectedFromJsonObject(g)};this.protectedToJsonObject=function(g){};this.protectedFromJsonObject=function(g){};this.protectedMethod={firePropertyChangeEvt:function(g){for(var k=0,w=n.length;k<w;k++)n[k](g)},setType:function(g){v=
g}}}function aa(){T.call(this);var p=this,v=this.protectedMethod;v.setType(T.TYPE_FILTER);var n=[];this.getFilterItems=function(){return n};this.setFilterItems=function(g){n=g};this.copyFilterItems=function(){for(var g=[],k=0;k<n.length;k++)g.push(n[k].copy());return g};this.firePropertyChangeEvt=function(){v.firePropertyChangeEvt(TableModeler.KEY_TRANSFORM_FILTER)};this.getNotEmptyFilterItems=function(){for(var g=[],k=0;k<n.length;k++)n[k].isEmpty()||g.push(n[k]);return g};this.protectedToJsonObject=
function(g){for(var k=p.getNotEmptyFilterItems(),w=[],e=0,f=k.length;e<f;e++)w.push(k[e].toJsonObject());g.filterItems=w};this.protectedFromJsonObject=function(g){if(g){g=g.filterItems;for(var k=0;k<g.length;k++){var w=new u;w.fromJsonObject(g[k]);n.push(w)}}};this.clone=function(){var g=new aa;g.setFilterItems(p.getNotEmptyFilterItems());return g}}function R(){var p=R.TYPE_ONCE,v=R.STRATEGY_FULL,n,g;this.setType=function(k){if(k===R.TYPE_ONCE||k===R.TYPE_TIMING)p=k;else throw Error("IllegalArgument: "+
k);};this.getType=function(){return p};this.setStrategy=function(k){if(k===R.STRATEGY_FULL||k===R.STRATEGY_INCREMENTAL)v=k;else throw Error("IllegalArgument: "+k);};this.getStrategy=function(){return v};this.setSchedule=function(k){n=k};this.getSchedule=function(){return n};this.setBasedFields=function(k){g=k};this.getBasedFields=function(){return g};this.copy=function(){var k=new R;k.setType(p);k.setStrategy(v);n&&k.setSchedule(n.copy());if(g){for(var w=[],e=0;e<g.length;e++)w.push(g[e].copy());
k.setBasedFields(w)}return k};this.toJsonObject=function(){var k={};k.type=p;k.strategy=v;n&&(k.schedule=n.toJsonObject());if(g){for(var w=[],e=0;e<g.length;e++)w.push(g[e].toJsonObject());k.basedFields=w}return k};this.fromJsonObject=function(k){p=k.type;v=k.strategy;k.schedule&&(n=new ya,n.fromJsonObject(k.schedule));if(k=k.basedFields){g=[];for(var w=0;w<k.length;w++){var e=new oa;e.fromJsonObject(k[w]);g.push(e)}}};this.equals=function(k){if(k instanceof R){if(p!==k.getType()||v!==k.getStrategy())return!1;
var w=k.getSchedule();if(n&&!w||!n&&w)return!1;if(n&&w){var e=n.toJsonObject();w=w.toJsonObject();for(var f in e)if(e[f]!==w[f])return!1}k=k.getBasedFields();if(!g&&!k)return!0;if(!g||!k||g.length!==k.length)return!1;for(e=0;e<g.length;e++)if(!g[e].equals(k[e]))return!1;return!0}return!1}}function oa(){var p,v,n,g;this.setTableId=function(k){p=k};this.getTableId=function(){return p};this.setTableName=function(k){v=k};this.getTableName=function(){return v};this.setName=function(k){n=k};this.getName=
function(){return n};this.setAlias=function(k){g=k};this.getAlias=function(){return g};this.copy=function(){var k=new oa;k.setTableId(p);k.setTableName(v);k.setName(n);k.setAlias(g);return k};this.toJsonObject=function(){var k={};k.tableId=p;k.tableName=v;k.name=n;k.alias=g;return k};this.fromJsonObject=function(k){p=k.tableId;v=k.tableName;n=k.name;g=k.alias};this.equals=function(k){return k instanceof oa?p===k.getTableId()&&v===k.getTableName()&&n===k.getName()&&g===k.getAlias():!1}}"undefined"==
typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.designer&&(com.kingdee.bos.qing.modeler.designer={});var I=com.kingdee.bos.qing.modeler.designer;I.QingModeler=function(){var p;this.setModelerModel=function(v){p=v};this.getModelerModel=
function(){return p};this.toJsonObject=function(){var v={};v.modelerModel=p.toJsonObject();return v};this.fromJsonObject=function(v){(v=v.modelerModel)&&(p=I.ModelerModerParser.parseToModel(v.type,v))}};I.AbstractModelerModelParser=function(){this.parseToModel=function(p){throw Error("override me");}};I.ModelerModel=y;I.AbstractPage=function(){function p(e,f,c,b){this.getLeftExtension=function(){return e};this.getTopExtension=function(){return f};this.getHorizonExtension=function(){return e+c};this.getVerticalExtension=
function(){return f+b}}var v=this,n=1024,g=768,k=[];this.getWidth=function(){return n};this.getHeight=function(){return g};this.addPropertyChangeCallback=function(e){k.push(e)};this.setExtension=function(e,f,c,b){e=new p(e,f,c,b);n+=e.getHorizonExtension();g+=e.getVerticalExtension();w(y.KEY_PAGE_SIZE,e)};this.toJsonObject=function(){var e={};e.width=n;e.height=g;v.protectedToJsonObject(e);return e};this.fromJsonObject=function(e){n=e.width;g=e.height;v.protectedFromJsonObject(e)};this.protectedToJsonObject=
function(e){};this.protectedFromJsonObject=function(e){};var w=function(e,f){for(var c=0,b=k.length;c<b;c++)k[c](e,f)};this.protectedMethod={firePropertyChangeEvt:w}};I.Node=C;I.Table=L;I.DesignTimeSource=ea;I.Field=H;I.UserSQL=da;I.PreviewConfig=M;I.RuntimeModel=function(){var p,v=[],n=[],g;this.setOutputVertexId=function(k){p=k};this.addEdge=function(k){v.push(k)};this.addVertex=function(k){n.push(k)};this.getVertexes=function(){return n};this.setPreviewConfig=function(k){g=k};this.toJsonObject=
function(){for(var k={},w=[],e=[],f=0,c=v.length;f<c;f++)w.push(v[f].toJsonObject());f=0;for(c=n.length;f<c;f++)e.push(n[f].toJsonObject());k.edges=w;k.vertexes=e;k.outputVertexId=p;k.previewConfig=g?g.toJsonObject():null;return k}};I.Edge=function(p,v){this.toJsonObject=function(){var n={};n.fromId=p;n.toId=v;return n}};I.SourceVertex=function(){qa.call(this);var p,v,n;this.protectedMethod.setType(qa.TYPE_SOURCE);this.setTable=function(g){p=g};this.setSource=function(g){v=g};this.setSelectedFields=
function(g){n=g};this.protectedToJson=function(g){g.table=p.toJsonObject();g.source=v.toJsonObject();if(n){for(var k=[],w=0;w<n.length;w++)k.push(n[w].toJsonObject());g.selectedFields=k}}};I.ExecuteResult=function(){var p,v=[],n,g;this.getNodeId=function(){return p};this.getValidity=function(){return g};this.getPreviewData=function(){return n};this.getFields=function(){return v};this.fromJsonObject=function(k){p=k.nodeId;var w=k.validity;w&&(g=new N,g.fromJsonObject(w));if(w=k.previewData)n=new z,
n.fromJsonObject(w);if(k=k.fields)for(w=0;w<k.length;w++){var e=k[w],f=new H;f.fromJsonObject(e);v.push(f)}}};I.PreviewData=z;I.PreviewResult=function(){var p,v,n,g,k;this.getPreviewData=function(){return p};this.getTotalRowCount=function(){return n};this.getJobId=function(){return g};this.getJobName=function(){return k};this.getModelerValidity=function(){return v};this.fromJsonObject=function(w){w.modelerValidity?v=w.modelerValidity:(p=new z,p.fromJsonObject(w.previewData),g=w.jobId,k=w.jobName,
n=w.totalRowCount)}};I.FilterItem=u;I.MaterializedConfig=R;I.BasedField=oa;I.FilterConfig=aa;var sa,ha,ya;(function(){var p=com.kingdee.bos.qing.common;sa=p.RelativePeriodModel;p=com.kingdee.bos.qing.common.ui;ha=p.RelativePeriodPanel;p=com.kingdee.bos.qing.schedule;ya=p.QingSchedule})();I.ModelerModerParser=new function(){var p={};this.registerParser=function(v,n){p[v]=n};this.parseToModel=function(v,n){return(v=p[v])&&v.parseToModel(n)}};y.TYPE_TABLE_MODELER="table";y.TYPE_RELATION_MODELER="relation";
y.TYPE_METRIC_MODELER="metric";y.KEY_UPDATE_TABLE="update_table";y.KEY_ADD_TABLE="add_table";y.KEY_REMOVE_TABLE="remove_table";y.KEY_TABLE_SELECT_FIELD="table_select_field";y.KEY_TABLE_SET_FILTER="table_set_filter";y.KEY_PAGE_SIZE="page_change_size";y.KEY_ADD_PREPARED_SOURCE="add_prepared_source";y.KEY_REMOVE_PREPARED_SOURCE="remove_prepared_source";y.KEY_SET_PREPARED_SOURCE="set_prepared_source";y.KEY_NODE_CHANGE_ALIAS="node_change_alias";y.KEY_NODE_CHANGE_POSITION="node_change_position";y.KEY_TABLE_NODE_SELECT_FIELD=
"table_node_select_field";C.TYPE_TABLE="table";C.TYPE_TRANSFORM="transform";H.DT_BOOLEAN="BOOLEAN";H.DT_INT="INT";H.DT_NUMBER="NUMBER";H.DT_DATE="DATE";H.DT_DATETIME="DATETIME";H.DT_STRING="STRING";H.ROUND_MODE_UP="ROUND_UP";H.ROUND_MODE_DOWN="ROUND_DOWN";H.ROUND_MODE_HALF_UP="ROUND_HALF_UP";H.BOOLEAN_TRUE="true";H.BOOLEAN_FALSE="false";H.EXTENSION_BIZ_FIELD_ENUM_KEY="bizFieldEnumKey";H.EXTENSION_IS_MUL_BASE_DATA="isMulBaseData";H.EXTENSION_IS_PK="isPK";I.UIDHelper=new function(){var p,v={};this.init=
function(a,d){v={};p=a;d&I.UIDHelper.SUPPORT_TYPE_NODE&&f();d&I.UIDHelper.SUPPORT_TYPE_SOURCE&&c();d&I.UIDHelper.SUPPORT_TYPE_TABLE&&b();d&I.UIDHelper.SUPPORT_TYPE_LINE&&m();d&I.UIDHelper.SUPPORT_TYPE_DIMENSION&&g();d&I.UIDHelper.SUPPORT_TYPE_PUBLIC_DIMENSION&&k();d&I.UIDHelper.SUPPORT_TYPE_METRIC&&w();d&I.UIDHelper.SUPPORT_TYPE_REFERENCE&&e()};this.getUID=function(a){var d=v[a];d||(d=0);d+=1;v[a]=d;return a+d};var n=function(a,d,x){for(var K=0,l=0;l<d.length;l++)for(var h=x(d[l]),r=0;r<h.length;r++){var J=
h[r];K=Math.max(K,parseInt(J.slice(a.length,J.length)))}v[a]=K},g=function(){var a=p.getAllDimension();a&&n(I.UIDHelper.NS_DIMENSION,a,function(d){return[d.getDimensionId()]})},k=function(){var a=p.getPublicDimensions();a&&n(I.UIDHelper.NS_PUBLIC_DIMENSION,a,function(d){return[d.getId()]});(a=p.getAllDimension())&&n(I.UIDHelper.NS_PUBLIC_DIMENSION,a,function(d){return[d.getPublicDimensionId()]})},w=function(){var a=p.getAllMetric();a&&n(I.UIDHelper.NS_METRIC,a,function(d){return[d.getId()]})},e=function(){var a=
p.getExprReferences();a&&n(I.UIDHelper.NS_REFERENCE,a,function(d){return[d.getId()]})},f=function(){var a=p.getAllNodes();a&&n(I.UIDHelper.NS_NODE,a,function(d){var x=[];x.push(d.getId());d.getType()==C.TYPE_TRANSFORM&&(d=d.getNodeIdInConfig(),x=x.concat(d));return x})},c=function(){var a=p.getAllSource();a&&n(I.UIDHelper.NS_SOURCE,a,function(d){return[d.getId()]})},b=function(){var a=p.getAllTable();a&&n(I.UIDHelper.NS_TABLE,a,function(d){return[d.getUid()]})},m=function(){var a=p.getAllLines();
a&&n(I.UIDHelper.NS_LINE,a,function(d){return[d.getId()]})}};I.UIDHelper.NS_NODE="n";I.UIDHelper.NS_LINE="l";I.UIDHelper.NS_TABLE="t";I.UIDHelper.NS_SOURCE="s";I.UIDHelper.NS_DIMENSION="d";I.UIDHelper.NS_PUBLIC_DIMENSION="pd";I.UIDHelper.NS_METRIC="m";I.UIDHelper.NS_REFERENCE="r";I.UIDHelper.SUPPORT_TYPE_NODE=1;I.UIDHelper.SUPPORT_TYPE_LINE=2;I.UIDHelper.SUPPORT_TYPE_TABLE=4;I.UIDHelper.SUPPORT_TYPE_SOURCE=8;I.UIDHelper.SUPPORT_TYPE_DIMENSION=16;I.UIDHelper.SUPPORT_TYPE_PUBLIC_DIMENSION=32;I.UIDHelper.SUPPORT_TYPE_METRIC=
64;I.UIDHelper.SUPPORT_TYPE_REFERENCE=128;I.UIDHelper.METRIC_SCENE=I.UIDHelper.SUPPORT_TYPE_TABLE|I.UIDHelper.SUPPORT_TYPE_SOURCE|I.UIDHelper.SUPPORT_TYPE_DIMENSION|I.UIDHelper.SUPPORT_TYPE_PUBLIC_DIMENSION|I.UIDHelper.SUPPORT_TYPE_METRIC|I.UIDHelper.SUPPORT_TYPE_REFERENCE;M.ALL_DATA_NUMBER=-1;qa.TYPE_SOURCE="source";qa.TYPE_TRANSFORM_FIELD_SELECT="field_select";qa.TYPE_TRANSFORM_FIELD_SETTING="field_setting";qa.TYPE_TRANSFORM_GROUP_BY="group_by";qa.TYPE_TRANSFORM_FILTER="filter";qa.TYPE_TRANSFORM_SORT=
"sort";qa.TYPE_TRANSFORM_JOIN="join";ba.TYPE_MULTI_OUTPUT="multiOutput";ba.TYPE_LACK_OUTPUT="lackOutputNode";ba.TYPE_INVALID_CONFIG="invalidConfig";ba.TYPE_LACK_INPUT="lackInputNode";ba.TYPE_INVALID_UPWARDNODE="invalidUpwardNode";ba.TYPE_INVALID_SOURCE="invalidSource";ba.TYPE_TABLE_NO_FIELD="tableNoField";ba.TYPE_TABLE_NO_AUTHORITY="tableNoAuthority";u.REG_NUMBER=/^-?\d+(\.\d+)?$/;u.REG_DATETIME=/^-?\d+(\.\d+)?$/;u.COMPARE_EQUAL="EQUAL";u.COMPARE_NOT_EQUAL="NOT_EQUAL";u.COMPARE_GREATER="GREATER";
u.COMPARE_GREATER_EQUAL="GREATER_EQUAL";u.COMPARE_LESS="LESS";u.COMPARE_LESS_EQUAL="LESS_EQUAL";u.COMPARE_INCLUDE="INCLUDE";u.COMPARE_NOT_INCLUDE="NOT_INCLUDE";u.COMPARE_START_WITH="START_WITH";u.COMPARE_END_WITH="END_WITH";u.COMPARE_NULL="NULL";u.COMPARE_NOT_NULL="NOT_NULL";u.COMPARE_IN="IN";u.COMPARE_NOT_IN="NOT_IN";u.COMPARE_RELATIVE_DATE_RANGE="RELATIVE_DATE_RANGE";u.LOGIC_AND="AND";u.LOGIC_OR="OR";u.COMPARES_FOR_STRING=[u.COMPARE_EQUAL,u.COMPARE_NOT_EQUAL,u.COMPARE_INCLUDE,u.COMPARE_NOT_INCLUDE,
u.COMPARE_START_WITH,u.COMPARE_END_WITH,u.COMPARE_NULL,u.COMPARE_NOT_NULL,u.COMPARE_IN,u.COMPARE_NOT_IN];u.COMPARES_FOR_ENUM=[u.COMPARE_EQUAL,u.COMPARE_NOT_EQUAL,u.COMPARE_NULL,u.COMPARE_NOT_NULL,u.COMPARE_IN,u.COMPARE_NOT_IN];u.COMPARES_FOR_NUMBER=[u.COMPARE_EQUAL,u.COMPARE_NOT_EQUAL,u.COMPARE_GREATER,u.COMPARE_GREATER_EQUAL,u.COMPARE_LESS,u.COMPARE_LESS_EQUAL,u.COMPARE_NULL,u.COMPARE_NOT_NULL,u.COMPARE_IN,u.COMPARE_NOT_IN];u.COMPARES_FOR_DATETIME=[u.COMPARE_RELATIVE_DATE_RANGE,u.COMPARE_EQUAL,u.COMPARE_NOT_EQUAL,
u.COMPARE_GREATER,u.COMPARE_GREATER_EQUAL,u.COMPARE_LESS,u.COMPARE_LESS_EQUAL,u.COMPARE_NULL,u.COMPARE_NOT_NULL];u.COMPARES_FOR_BOOLEAN=[u.COMPARE_EQUAL,u.COMPARE_NOT_EQUAL,u.COMPARE_NULL,u.COMPARE_NOT_NULL];u.isCompareOpWithoutValue=function(p){return p===u.COMPARE_NULL||p===u.COMPARE_NOT_NULL};u.isCompareOpWithinOrNotWithinValue=function(p){return p===u.COMPARE_IN||p===u.COMPARE_NOT_IN};u.isCompareOpRelativeDateRangeValue=function(p){return p===u.COMPARE_RELATIVE_DATE_RANGE};u.getSelectableCompares=
function(p,v){switch(p){case H.DT_STRING:return v?u.COMPARES_FOR_ENUM:u.COMPARES_FOR_STRING;case H.DT_NUMBER:case H.DT_INT:return u.COMPARES_FOR_NUMBER;case H.DT_DATE:case H.DT_DATETIME:return u.COMPARES_FOR_DATETIME;case H.DT_BOOLEAN:return u.COMPARES_FOR_BOOLEAN;default:throw Error("Unknown DataType");}};u.FiltersCheckingResult=function(p,v){var n=v;this.getFiltersErrorRow=function(){return p};this.getPrompt=function(){return n};this.setPrompt=function(g){n=g}};T.TYPE_FIELD_SELECT="field_select";
T.TYPE_FIELD_SETTING="field_setting";T.TYPE_FILTER="filter";T.TYPE_SORT="sort";T.TYPE_GROUP_BY="group_by";T.TYPE_CALCULATED_FIELD="calculated_field";T.TYPE_CUSTOM_GROUP="custom_group";T.TYPE_JOIN="join";T.TYPE_UNION="union";R.TYPE_ONCE="once";R.TYPE_TIMING="timing";R.STRATEGY_FULL="full";R.STRATEGY_INCREMENTAL="incremental";I.ENTITY_SEPARATOR="@#!&@"})();(function(){function y(){ya.call(this);var e=this,f=this.protectedMethod,c=[],b=[],m=[],a=[],d=[];e.setType(ya.TYPE_METRIC_MODELER);e.setMaterializedConfig(new w);this.protectedIsTableInUse=function(l){return!0};this.isTableReferred=function(l){x();for(var h=0;h<a.length;h++){var r=a[h];if(r instanceof M&&r.getTableId()==l.getUid())return!0}for(h=0;h<c.length;h++){r=c[h].getFilterItems();for(var J=0;J<r.length;J++){var P=r[J].getField();if(P&&P.getTableId()==l.getUid())return!0}}return!1};this.getAllDimension=
function(){return b};this.setDimensions=function(l){b=l};this.addDimension=function(l,h){isNaN(h)?b.push(l):b.splice(h,0,l);f.firePropertyChangeEvt(y.KEY_ADD_DIMENSION,l)};this.removeDimension=function(l){for(var h=0;h<b.length;h++)if(b[h].isSame(l))return b.splice(h,1),f.firePropertyChangeEvt(y.KEY_REMOVE_DIMENSION,[l]),h;return-1};this.updateDimension=function(l,h){if(isNaN(h))return!1;b.splice(h,1);b.splice(h,0,l);f.firePropertyChangeEvt(y.KEY_UPDATE_DIMENSION,b)};this.updateDimensions=function(l){b=
l;f.firePropertyChangeEvt(y.KEY_BATCH_UPDATE_DIMENSION,l)};this.getDimensionById=function(l){for(var h=0;h<b.length;h++)if(b[h].getDimensionId()==l)return b[h]};this.getDimensionByName=function(l){for(var h=0;h<b.length;h++)if(b[h].getName()==l)return b[h]};this.getPublicDimensions=function(){return m};this.getPublicDimensionById=function(l){for(var h=0;h<m.length;h++)if(m[h].getId()==l)return m[h]};this.getSamePublicDimension=function(l){for(var h=0;h<m.length;h++){var r=m[h];if(r.isSame(l))return r}};
this.setPublicDimensions=function(l){m=l};this.removePublicDimensionById=function(l){for(var h=0;h<m.length;h++)if(m[h].getId()==l)return m.splice(h,1),h;return-1};this.addPublicDimension=function(l,h){isNaN(h)?m.push(l):m.splice(h,0,l)};this.checkDimensionRef=function(l,h){var r=e.getAllTable();if(h&&2<=r.length)return!0;for(h=0;h<b.length;h++)if(b[h].getPublicDimensionId()==l)return!0;return!1};this.checkTableExist=function(l){for(var h=e.getAllTable(),r=0;r<h.length;r++)if(l==h[r].getUid())return!0;
return!1};this.setMetrics=function(l){if((c=l)&&0<c.length)for(l=0;l<c.length;l++){var h=c[l];h.removePropertyChangeCallback(f.firePropertyChangeEvt);h.addPropertyChangeCallback(f.firePropertyChangeEvt)}};this.addMetric=function(l,h){isNaN(h)?c.push(l):c.splice(h,0,l);l.addPropertyChangeCallback(f.firePropertyChangeEvt);f.firePropertyChangeEvt(y.KEY_ADD_METRIC,l)};this.removeMetric=function(l){var h=c.indexOf(l);return-1<h?(c.splice(h,1),f.firePropertyChangeEvt(y.KEY_REMOVE_METRIC,l),l.removePropertyChangeCallback(f.firePropertyChangeEvt),
h):-1};this.updateMetric=function(l){var h=e.getMetric(l.getId());h&&(h.update(l),f.firePropertyChangeEvt(y.KEY_UPDATE_METRIC,h))};this.getAllMetric=function(){return c};this.getMetric=function(l){for(var h=0;h<c.length;h++){var r=c[h];if(r.getId()==l)return r}};this.setExprReferences=function(l){a=l};this.setUnreferencedRef=function(l){d=l};this.getExprReferences=function(){return a};this.getExprReference=function(l){for(var h=0;h<a.length;h++){var r=a[h];if(l==r.getId())return r}};this.addExprRefIfNotExist=
function(l){for(var h=0;h<a.length;h++){var r=a[h];if(r.equals(l))return r}for(h=0;h<d.length;h++)if(r=d[h],r.equals(l)){l=r;d.splice(h,1);break}a.push(l);return l};this.protectedToJsonObject=function(l){for(var h=[],r=0;r<c.length;r++)h.push(c[r].toJsonObject());l.metrics=h;x();h=[];for(r=0;r<a.length;r++)h.push(a[r].toJsonObject());l.references=h;h=[];for(r=0;r<d.length;r++)h.push(d[r].toJsonObject());l.unreferencedRef=h;h=[];for(r=0;r<b.length;r++)h.push(b[r].toJsonObject());l.dimensions=h;h=[];
for(r=0;r<m.length;r++)m[r].isEmpty()||h.push(m[r].toJsonObject());l.publicDimensions=h;e.getMaterializedConfig()||(r=new w,l.materializedConfig=r.toJsonObject())};this.protectedFromJsonObject=function(l){var h=l.metrics;if(h)for(var r=0;r<h.length;r++){var J=new C;J.fromJsonObject(h[r]);J.addPropertyChangeCallback(f.firePropertyChangeEvt);c.push(J)}if(h=l.references)for(r=0;r<h.length;r++){J=h[r];switch(J.type){case H.FIELD_TYPE:var P=new M;break;case H.METRIC_TYPE:P=new qa;break;case H.DIMENSION_TYPE:P=
new N;break;default:throw Error("unknown type");}P.fromJsonObject(J);a.push(P)}if(h=l.dimensions)for(r=0;r<h.length;r++)J=new L,J.fromJsonObject(h[r]),b.push(J);if(l=l.publicDimensions)for(r=0;r<l.length;r++)h=new da,h.fromJsonObject(l[r]),m.push(h);h=K();r=[];for(l=0;l<h.length;l++)J=h[l],e.getExprReference(J)||r.push(J);for(l=0;l<r.length;l++)for(h=r[l],J=0;J<c.length;J++){P=c[J];var ia=P.getExpr();P.setExpr(ha.ExprRefHelper.replaceRefText(ia,h,""))}};this.copyMetrics=function(){for(var l=[],h=
0;h<c.length;h++){var r=c[h].clone();l.push(r)}return l};this.copyExprReferences=function(){for(var l=[],h=0;h<a.length;h++){var r=a[h].copy();l.push(r)}return l};this.copy=function(){var l=new y;f.copy(l);for(var h=[],r=0;r<c.length;r++)h.push(c[r].clone());l.setMetrics(h);h=[];for(r=0;r<b.length;r++)h.push(b[r].copy());l.setDimensions(h);h=[];for(r=0;r<m.length;r++)h.push(m[r].copy());l.setPublicDimensions(h);h=[];for(r=0;r<a.length;r++)h.push(a[r].copy());l.setExprReferences(h);h=[];for(r=0;r<
d.length;r++)h.push(d[r].copy());l.setUnreferencedRef(h);return l};var x=function(){for(var l=K(),h=[],r=[],J=0;J<a.length;J++){var P=a[J];-1<l.indexOf(P.getId())?h.push(P):r.push(P)}a=h;d=r},K=function(){for(var l=[],h=0;h<c.length;h++){var r=c[h].getExpr();(r=ha.ExprRefHelper.getRefTextInExpr(r))&&(l=l.concat(r))}return l}}function C(){var e=this,f,c,b,m,a,d="#,##0.00",x=[],K=[];this.addPropertyChangeCallback=function(l){K.push(l)};this.removePropertyChangeCallback=function(l){l=K.indexOf(l);-1<
l&&K.splice(l,1)};this.setNumber=function(l){f=l};this.getNumber=function(){return f};this.setId=function(l){c=l};this.getId=function(){return c};this.setName=function(l){b=l};this.getName=function(){return b};this.setDesc=function(l){m=l};this.getDesc=function(){return m};this.setExpr=function(l){a=l};this.getExpr=function(){return a};this.setFormat=function(l){d=l};this.getFormat=function(){return d};this.setFilterItems=function(l){x=l;l=y.KEY_SET_METRIC_FILTER;for(var h=0,r=K.length;h<r;h++)K[h](l,
e)};this.getFilterItems=function(){return x};this.update=function(l){f=l.getNumber();a=l.getExpr();b=l.getName();m=l.getDesc();l.getFormat()&&(d=l.getFormat());x=l.getFilterItems()};this.clone=function(){var l=new C;l.setNumber(f);l.setId(c);l.setExpr(a);l.setName(b);l.setDesc(m);l.setFormat(d);for(var h=[],r=0;r<x.length;r++){var J=x[r].copy();h.push(J)}l.setFilterItems(h);return l};this.equals=function(l){if(l.getName()!==b||l.getDesc()!==m||l.getExpr()!==a||l.getFormat()!==d||l.getNumber()!==f||
x.length!==l.getFilterItems().length)return!1;l=l.getFilterItems();for(var h=0;h<x.length;h++)if(!x[h].equals(l[h]))return!1;return!0};this.toJsonObject=function(){var l={};l.number=f;l.id=c;l.name=b;l.desc=m;l.expr=a;l.format=d;for(var h=[],r=0;r<x.length;r++)h.push(x[r].toJsonObject());l.filterItems=h;return l};this.fromJsonObject=function(l){c=l.id;f=l.number;b=l.name;m=l.desc;a=l.expr;l.format&&(d=l.format);if(l=l.filterItems)for(var h=0;h<l.length;h++){var r=new k;r.fromJsonObject(l[h]);x.push(r)}}}
function L(){var e,f,c,b=!1,m=!1,a,d,x,K,l=this;this.setDimensionId=function(h){e=h};this.getDimensionId=function(){return e};this.setName=function(h){f=h};this.getName=function(){return f};this.setNumber=function(h){c=h};this.getNumber=function(){return c};this.setNumberModified=function(h){b=h};this.isNumberModified=function(){return b};this.setNameModified=function(h){m=h};this.isNameModified=function(){return m};this.setDimensionType=function(h){a=h};this.getDimensionType=function(){return a};
this.setDateFormat=function(h){d=h};this.getDateFormat=function(){return d};this.setRequired=function(h){x=h};this.isRequired=function(){return x};this.getPublicDimensionId=function(){return K};this.setPublicDimensionId=function(h){K=h};this.copy=function(){var h=new L;h.setDimensionId(e);h.setName(f);h.setNumber(c);h.setNumberModified(b);h.setNameModified(m);h.setDimensionType(a);d?h.setDateFormat(d):a==L.TYPE_DATE&&h.setDateFormat(L.VALUE_YYYY);h.setRequired(x);h.setPublicDimensionId(K);return h};
this.isSame=function(h){return h?f==h.getName()&&c==h.getNumber()&&b==h.isNumberModified()&&m==h.isNameModified()&&a==h.getDimensionType()&&e==h.getDimensionId()&&(d==h.getDateFormat()||null==d&&h.getDateFormat()==L.VALUE_YYYY)&&K==h.getPublicDimensionId()?!0:!1:!1};this.toJsonObject=function(){var h={};h.id=e;h.name=f;h.number=c;h.isNumberModified=b;h.isNameModified=m;h.dimensionType=a;h.dateFormatType=d;h.required=x;h.publicDimensionId=K;return h};this.fromJsonObject=function(h){e=h.id;f=h.name;
c=h.number;b=h.isNumberModified;m=h.isNameModified;a=h.dimensionType;void 0!=h.dateFormatType&&l.setDateFormat(h.dateFormatType);h.required&&l.setRequired(h.required);K=h.publicDimensionId}}function da(){var e,f,c=!1,b=[];this.setId=function(a){e=a};this.getId=function(){return e};this.setName=function(a){f=a};this.getName=function(){return f};this.setNameModified=function(a){c=a};this.isNameModified=function(){return c};this.isSame=function(a){if(!a)return!1;a=a.getFields();if(a.length!=b.length)return!1;
for(var d=0;d<b.length;d++)if(!b[d].isSame(a[d]))return!1;return!0};this.getDataType=function(){return 0==b.length?null:b[0].getDataType()};this.setFields=function(a){b=a};this.addField=function(a){b.push(a)};this.insertField=function(a,d){b.splice(a,0,d)};this.getFields=function(){return b};this.getFieldByIndex=function(a){return b[a]};this.getLastField=function(){return b[b.length-1]};this.removeField=function(a){b.splice(a,1)};this.empty=function(a){f=null;a&&(e=null)};this.isEmpty=function(){return!f};
this.updateFields=function(a){for(var d=0;d<b.length;d++){var x=b[d];if(x&&x.getName()){var K=x.getTableId();K=a[K]?a[K]:[];for(var l=!1,h=0;h<K.length;h++)if(K[h]&&K[h].getName()==x.getName()){l=!0;x.update(K[h]);break}l||x.updateWhenNotExist();x.setExist(l)}}};this.isDataTypeConsistent=function(){if(0==b.length)return!1;var a=b[0];if(!a)return!1;for(var d=1;d<b.length;d++){var x=b[d];if(!x||a.getDataType()!=x.getDataType()||!m(a.getField(),x.getField()))return!1}return!0};this.tryGenerateId=function(a){var d=
!0;if(a){a=a.getFields();for(var x=0;x<b.length;x++){var K=a[x].getField().getFullName(),l=b[x].getField().getFullName();if(K==l){d=!1;break}}}else d=!1;if(!e||d)d=com.kingdee.bos.qing.modeler.designer.UIDHelper,e=d.getUID(d.NS_PUBLIC_DIMENSION)};this.tryGenerateName=function(a){if(0!=b.length){var d=b[0];f=c||!d.getAlias()?f:a()}};this.isFieldsCompleted=function(){for(var a=!1,d=0;d<b.length;d++)b[d].getName()&&(a=!0);if(!a&&!f)return!0;for(d=0;d<b.length;d++)if(a=b[d],!a.getName()||!a.isExist())return!1;
return!0};this.copy=function(){var a=new da;a.setId(e);a.setName(f);for(var d=[],x=0;x<b.length;x++){var K=b[x].copy();d.push(K)}a.setFields(d);a.setNameModified(c);return a};this.toJsonObject=function(){var a={};a.id=e;a.name=f;a.isNameModified=c;for(var d=[],x=0;x<b.length;x++)d.push(b[x].toJsonObject());a.fields=d;return a};this.fromJsonObject=function(a){e=a.id;f=a.name;c=a.isNameModified;if(a=a.fields)for(var d=0;d<a.length;d++){var x=new ea;x.fromJsonObject(a[d]);b.push(x)}};var m=function(a,
d){a=a?a.getEnumValue():null;d=d?d.getEnumValue():null;if(!a&&!d)return!0;if(!a&&d||a&&!d||Object.keys(d).length!=Object.keys(a).length)return!1;for(var x in d){var K=d[x],l=a[x];if(!l||l!=K)return!1}return!0}}function ea(){var e=new n,f=!0;this.getField=function(){return e};this.setField=function(c){e=c};this.setName=function(c){e.setName(c)};this.getName=function(){return e.getName()};this.getTableId=function(){return e.getTableId()};this.setTableId=function(c){e.setTableId(c)};this.getDataType=
function(){return e.getDataType()};this.setDataType=function(c){e.setDataType(c)};this.getAlias=function(){return e.getAlias()};this.setAlias=function(c){e.setAlias(c)};this.setExist=function(c){f=c};this.isExist=function(){return f};this.update=function(c){e=c};this.updateWhenNotExist=function(){var c=new n;c.setName(e.getName());c.setTableId(e.getTableId());c.setAlias(e.getAlias());e=c};this.copy=function(){var c=new ea;c.setField(e);c.setExist(f);return c};this.isSame=function(c){return e.getName()==
c.getName()&&e.getTableId()==c.getTableId()?!0:!1};this.toJsonObject=function(){var c={};c.name=e.getName();c.tableId=e.getTableId();c.alias=e.getAlias();return c};this.fromJsonObject=function(c){e.setName(c.name);e.setTableId(c.tableId);e.setAlias(c.alias)}}function H(){var e=this,f,c;this.setId=function(b){f=b};this.getId=function(){return f};this.setType=function(b){c=b};this.getType=function(){return c};this.getRefDisplayText=function(b){throw Error("override me");};this.isRightDisplayFormat=
function(b,m){throw Error("override me");};this.fromDisplayText=function(b,m,a){throw Error("override me");};this.equals=function(b){throw Error("override me");};this.fromJsonObject=function(b){f=b.id;c=b.type;e.protectedFromJsonObject(b)};this.toJsonObject=function(){var b={};b.id=f;b.type=c;e.protectedToJsonObject(b);return b};this.protectedFromJsonObject=function(b){};this.protectedToJsonObject=function(b){};this.protectedMethod={copy:function(b){b.setId(f);b.setType(c)}}}function M(){H.call(this);
var e=this,f=this.protectedMethod,c,b,m;e.setType(H.FIELD_TYPE);this.setTableId=function(a){c=a};this.getTableId=function(){return c};this.setFieldName=function(a){b=a};this.getFieldName=function(){return b};this.setAlias=function(a){m=a};this.getRefDisplayText=function(a){a=a.getTable(c);var d=m?m:b;return ha.TableNameHelper.getDisplayText(a)+"."+d};this.isRightDisplayFormat=function(a){return-1<a.indexOf(".")};this.fromDisplayText=function(a,d,x){var K=a.split(".")[0];c=K;var l=d.getAllTable();
for(d=0;d<l.length;d++){var h=l[d];if(ha.TableNameHelper.getDisplayText(h)==K){c=h.getUid();break}}b=a=a.substring(K.length+1);x=x?x[c]:[];for(d=0;d<x.length;d++)if(K=x[d],K.getAlias()==a){b=K.getName();m=a;break}};this.equals=function(a){return a.getType()!=e.getType()?!1:a.getTableId()==c&&a.getFieldName()==b?!0:!1};this.copy=function(){var a=new M;f.copy(a);a.setTableId(c);a.setFieldName(b);a.setAlias(m);return a};this.protectedFromJsonObject=function(a){c=a.tableId;b=a.fieldName;m=a.alias};this.protectedToJsonObject=
function(a){a.tableId=c;a.fieldName=b}}function qa(){H.call(this);var e=this,f=this.protectedMethod,c;e.setType(H.METRIC_TYPE);this.setMetricId=function(b){c=b};this.getMetricId=function(){return c};this.getRefDisplayText=function(b){return(b=b.getMetric(c))?b.getName():""};this.isRightDisplayFormat=function(b,m){var a=b.match(/^[\u3000\u4E00-\u9FA5a-zA-Z0-9_]{1,}$/),d=!1;if(a){m=m.getAllMetric();for(var x=0;x<m.length;x++)m[x].getName()==b&&(d=!0)}return a&&d};this.fromDisplayText=function(b,m){m=
m.getAllMetric();for(var a=0;a<m.length;a++){var d=m[a];if(d.getName()==b){c=d.getId();break}}if(!c)throw Error("invalid ref");};this.equals=function(b){return b.getType()!=e.getType()?!1:c==b.getMetricId()};this.copy=function(){var b=new qa;f.copy(b);b.setMetricId(c);return b};this.protectedFromJsonObject=function(b){c=b.metricId};this.protectedToJsonObject=function(b){b.metricId=c}}function N(){H.call(this);var e=this,f=this.protectedMethod,c,b;e.setType(H.DIMENSION_TYPE);this.setDimensionId=function(m){c=
m};this.getDimensionId=function(){return c};this.setDimensionName=function(m){b=m};this.getDimensionName=function(){return b};this.getRefDisplayText=function(m){var a=m.getDimensionById(c);a||(a=m.getDimensionByName(b));return a?a.getName():b};this.isRightDisplayFormat=function(m,a){var d=m.match(/^[\u3000\u4E00-\u9FA5a-zA-Z0-9_()]{1,}$/),x=!1;if(d){a=a.getAllDimension();for(var K=0;K<a.length;K++)a[K].getName()==m&&(x=!0)}return d&&x};this.fromDisplayText=function(m,a){a=a.getAllDimension();for(var d=
0;d<a.length;d++){var x=a[d];if(x.getName()==m){c=x.getDimensionId();b=x.getName();break}}if(!c)throw Error("invalid ref");};this.equals=function(m){return m.getType()!=e.getType()?!1:c==m.getDimensionId()&&b==m.getDimensionName()};this.copy=function(){var m=new N;f.copy(m);m.setDimensionId(c);m.setDimensionName(b);return m};this.protectedFromJsonObject=function(m){c=m.dimensionId;b=m.dimensionName};this.protectedToJsonObject=function(m){m.dimensionId=c;m.dimensionName=b}}function V(){var e,f,c=[];
this.isValid=function(){return e};this.getCases=function(){return c};this.isModelEmpty=function(){return f};this.fromJsonObject=function(b){e=b.valid;f=b.modelIsEmpty;if(b=b.cases){c=[];for(var m=new ba,a=0;a<b.length;a++){var d=b[a],x=m.getInvalidityCase(d.type);d&&(x.fromJsonObject(d),c.push(x))}}}}function ba(){this.getInvalidityCase=function(e){switch(e){case U.TYPE_NO_METRIC:return new F;case U.TYPE_INVALID_FIELD_REF:return new O;case U.TYPE_INVALID_EXPR:return new D;case U.TYPE_INVALID_FIELD_FILTER_REF:return new A;
case U.TYPE_INVALID_DIMENSION_REF:return new u;case U.TYPE_INVALID_DIMENSION_TYPE:return new T;case U.TYPE_INVALID_PUBLIC_DIMENSION:return new R;case U.TYPE_INVALID_TABLE:return new sa;case U.TYPE_INVALID_EXPR_DATA_TYPE:return new q;case U.TYPE_INCOMPLETE_MATERIALIZED_CONFIG:return new oa;case U.TYPE_INVALID_DIMENSION_NOT_EXIST:case U.TYPE_INVALID_DIMENSION_GRANULARITY_NOT_MATCH:case U.TYPE_INVALID_DIMENSION_TYPE_NOT_MATCH:return new t}}}function U(){var e,f=this;this.getType=function(){return e};
this.fromJsonObject=function(c){e=c.type;f.protectedFromJsonObject(c)};this.protectedFromJsonObject=function(c){}}function fa(){U.call(this);var e=[];this.getMetricIds=function(){return e};this.protectedFromJsonObject=function(f){f&&f.metricIds&&(e=f.metricIds)}}function F(){U.call(this)}function O(){fa.call(this)}function A(){fa.call(this)}function t(){fa.call(this)}function D(){fa.call(this);var e;this.getMetricPrompt=function(c){if(!e)return null;for(var b=Object.keys(e),m=0;m<b.length;m++)for(var a=
b[m],d=e[a],x=0;x<d.length;x++)if(c==d[x])return a};var f=this.protectedFromJsonObject;this.protectedFromJsonObject=function(c){f(c);e=c.promptMap}}function q(){fa.call(this);var e=this.protectedFromJsonObject;this.protectedFromJsonObject=function(f){e(f)}}function z(){U.call(this);var e;this.getDimensionIds=function(){return e};this.protectedFromJsonObject=function(f){f.dimensionIds&&(e=f.dimensionIds)}}function u(){z.call(this)}function T(){z.call(this)}function aa(){U.call(this);var e;this.getPublicDimensionIds=
function(){return e};this.protectedFromJsonObject=function(f){f.publicDimensionIds&&(e=f.publicDimensionIds)}}function R(){aa.call(this)}function oa(){U.call(this)}function I(){U.call(this);var e,f;this.getTableIds=function(){return e};this.getInvalidTableMap=function(){return f};this.protectedFromJsonObject=function(c){c.tableIds&&(e=c.tableIds);c.tableException&&(f=c.tableException)}}function sa(){I.call(this)}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==
typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.designer&&(com.kingdee.bos.qing.modeler.designer={});"undefined"==typeof com.kingdee.bos.qing.modeler.designer.metricdesigner&&(com.kingdee.bos.qing.modeler.designer.metricdesigner={});var ha=com.kingdee.bos.qing.modeler.designer.metricdesigner;ha.MetricModeler=
y;ha.Metric=C;ha.ExprValidity=function(){var e,f,c;this.isValid=function(){return e};this.getPrompt=function(){return f};this.getExceptionType=function(){return c};this.fromJsonObject=function(b){e=b.valid;f=b.prompt;c=b.exceptionType}};ha.Dimension=L;ha.PublicDimension=da;ha.MappingField=ea;ha.DimensionFilterItem=function(){var e,f;this.getDimensionKey=function(){return e};this.setDimensionKey=function(c){e=c};this.getValues=function(){return f};this.setValues=function(c){f=c};this.fromJsonObject=
function(c){e=c.dimensionKey;f=c.values};this.toJsonObject=function(){var c={};c.dimensionKey=e;c.values=f;return c}};ha.ModelerValidity=V;ha.MetricModelerInvalidityCase=U;ha.TableFieldMeta=function(){var e={},f;this.getTableFieldMap=function(){return e};this.setTableFieldMap=function(c){e=c};this.getValidity=function(){return f};this.setValidity=function(c){f=c};this.fromJsonObject=function(c){if(c){var b=c.validity;b&&(f=new V,f.fromJsonObject(b));e={};if(c=c.tableFields){b=Object.keys(c);for(var m=
0;m<b.length;m++){var a=b[m],d=e,x=a;a=c[a];for(var K=[],l=0;l<a.length;l++){var h=new n;h.fromJsonObject(a[l]);K.push(h)}d[x]=K}}}}};ha.DimensionExprReference=N;var ya,p,v,n,g,k,w;(function(){var e=com.kingdee.bos.qing.modeler.designer;ya=e.ModelerModel;p=e.AbstractModelerModelParser;v=e.ModelerModerParser;n=e.Field;g=e.UIDHelper;k=e.FilterItem;w=e.MaterializedConfig})();v.registerParser(ya.TYPE_METRIC_MODELER,new function(){p.call(this);this.parseToModel=function(e){var f=new y;f.fromJsonObject(e);
return f}});y.KEY_ADD_METRIC="metric_designer_add_metric";y.KEY_REMOVE_METRIC="metric_designer_remove_metric";y.KEY_UPDATE_METRIC="metric_designer_update_metric";y.KEY_ADD_DIMENSION="metric_designer_add_dimension";y.KEY_REMOVE_DIMENSION="metric_designer_remove_dimension";y.KEY_UPDATE_DIMENSION="metric_designer_update_dimension";y.KEY_BATCH_UPDATE_DIMENSION="metric_designer_batch_update_dimension";y.KEY_SET_METRIC_FILTER="metric_designer_set_metric_filter";L.TYPE_DATE="DATE";L.TYPE_NORMAL="NORMAL";
L.VALUE_YYYY=0;L.VALUE_QUARTER=1;L.VALUE_MONTH=2;L.VALUE_DAY=3;L.VALUE_YEAR_QUARTER=4;L.VALUE_YEAR_MONTH=5;L.VALUE_YEAR_WEEK=6;L.VALUE_WEEK_OF_YEAR=7;L.VALUE_DAY_OF_WEEK=8;L.VALUE_YEAR_MONTH_DAY=9;ha.TableNameHelper=new function(){var e={};this.removeTableName=function(c){c=c.getUid();e[c]&&(e[c]=null)};this.addTableName=function(c,b){c=c.getUid();e[c]=b};this.getDisplayText=function(c){var b=c.getUid(),m=e[b];if(m)return m;for(c=m=(m=c.getDisplayName())?m:c.getTableName();-1<c.indexOf(".");)c=c.replace(".",
"_");c=f(c);return e[b]=c};var f=function(c,b){for(var m=b?c+"_"+b:c,a=!1,d=Object.keys(e),x=0;x<d.length;x++)if(e[d[x]]==m){a=!0;break}return a?f(c,b?b+1:1):m}};ha.ExprRefHelper=new function(){function e(r){m.call(this,r,"#666")}function f(r){m.call(this,r,"#e8893a")}function c(r){m.call(this,r,"#789262")}function b(r){m.call(this,r,"#4071ee")}function m(r,J){this.getText=function(){return r};this.getColor=function(){return J}}var a=this,d,x=[],K=/\[(.+?)\]/g;this.setGlobal=function(r){d=r};this.translateToExeExpr=
function(r,J){for(var P=a.getRefTextInExpr(r),ia=0;ia<P.length;ia++){var ra=P[ia];a:{var Y=ra;for(var wa=J,ta=d.getModelerModel(),xa=ta.getExprReferences(),Ga=0;Ga<xa.length;Ga++){var Ra=xa[Ga];if(Ra.getRefDisplayText(ta)==Y){Y=Ra;break a}}for(Ga=0;Ga<x.length;Ga++)if(xa=new x[Ga],xa.isRightDisplayFormat(Y,ta)){try{xa.fromDisplayText(Y,ta,wa)}catch(Sa){continue}xa=ta.addExprRefIfNotExist(xa);xa.getId()||(Y=xa,wa=g.getUID(g.NS_REFERENCE),Y.setId(wa));Y=xa;break a}Y=void 0}Y&&(r=a.replaceRefText(r,
ra,Y.getId()))}return r};this.translateToTextSegment=function(r){var J=a.getRefTextInExpr(r),P=[],ia=d.getModelerModel();l(r,J,function(ra,Y){ra&&0<ra.length&&(ra=new e(ra),P.push(ra));Y&&(Y=ia.getExprReference(Y),Y=Y instanceof M?new b("["+Y.getRefDisplayText(ia)+"]"):Y instanceof qa?new f("["+Y.getRefDisplayText(ia)+"]"):Y instanceof N?new c("["+Y.getRefDisplayText(ia)+"]"):new e("[]"),P.push(Y))});return P};var l=function(r,J,P){for(var ia,ra,Y=0;Y<J.length;Y++){var wa=J[Y],ta=r.indexOf("["+wa+
"]");-1<ta&&(void 0==ia||ia>ta)&&(ia=ta,ra=wa)}ia||0==ia?(Y=r.substring(0,ia),P(Y,ra,ia),r=r.substring(ia+("["+ra+"]").length),l(r,J,P)):P(r,null,null)};this.translateToDisplayExpr=function(r){for(var J=a.getRefTextInExpr(r),P=d.getModelerModel(),ia=0;ia<J.length;ia++){var ra=J[ia],Y=P.getExprReference(ra);Y=Y instanceof M?Y.getRefDisplayText(P):Y instanceof qa?Y.getRefDisplayText(P):Y instanceof N?Y.getRefDisplayText(P):"";r=a.replaceRefText(r,ra,Y)}return r};this.getRefTextInExpr=function(r){var J=
[];r=r.match(K);if(!r)return J;for(var P=0;P<r.length;P++){var ia=r[P];ia=ia.substring(1,ia.length-1);0>J.indexOf(ia)&&J.push(ia)}return J};this.getRefFullDisplayText=function(r){var J=d.getModelerModel();return"["+r.getRefDisplayText(J)+"]"};this.createFieldReference=function(r,J){var P=new M;P.setTableId(r);P.setFieldName(J.getName());P.setAlias(J.getAlias());return h(P)};this.createMetricReference=function(r){var J=new qa;J.setMetricId(r);return h(J)};this.registReference=function(r){0<x.indexOf(r)||
x.push(r)};this.getMetricReferredInfo=function(r){var J=[];r=r.getId();for(var P=d.getModelerModel(),ia=P.getAllMetric(),ra=0;ra<ia.length;ra++){var Y=ia[ra];if(Y.getId()!=r)for(var wa=a.getRefTextInExpr(Y.getExpr()),ta=0;ta<wa.length;ta++){var xa=P.getExprReference(wa[ta]);xa instanceof qa&&xa.getMetricId()==r&&J.push(Y)}}return J};this.replaceRefText=function(r,J,P){P="["+P+"]";for(J="["+J+"]";-1<r.indexOf(J);)r=r.replace(J,P);return r};var h=function(r){var J=g.getUID(g.NS_REFERENCE);r.setId(J);
return d.getModelerModel().addExprRefIfNotExist(r)}};H.FIELD_TYPE="field";H.METRIC_TYPE="metric";H.DIMENSION_TYPE="dimension";ha.ExprRefHelper.registReference(M);ha.ExprRefHelper.registReference(qa);ha.ExprRefHelper.registReference(N);U.TYPE_NO_METRIC="noMetric";U.TYPE_INVALID_FIELD_REF="invalidFieldRef";U.TYPE_INVALID_EXPR="invalidExpr";U.TYPE_INVALID_EXPR_DATA_TYPE="invalidExprDataType";U.TYPE_INVALID_FIELD_FILTER_REF="invalidFieldFilterRef";U.TYPE_INVALID_DIMENSION_REF="invalidDimensionRef";U.TYPE_INVALID_DIMENSION_TYPE=
"invalidDimensionType";U.TYPE_INVALID_PUBLIC_DIMENSION="invalidPublicDimension";U.TYPE_INVALID_TABLE="invalidTable";U.TYPE_INVALID_TABLE_FILTER="invalidTableFilter";U.TYPE_DB_CONNECTION_FAIL="dbConnectionFail";U.TYPE_USER_NO_DB_CENTER_PERMISSION="userNoDBCenterPermission";U.TYPE_CREATOR_NO_DB_CENTER_PERMISSION="creatorNoDBCenterPermission";U.TYPE_USER_NO_PUBLIC_SOURCE_PERMISSION="userNoPublicSourcePermission";U.TYPE_CREATOR_NO_PUBLIC_SOURCE_PERMISSION="creatorNoPublicSourcePermission";U.TYPE_USER_NO_ENTITY_PERMISSION=
"userNoEntityPermission";U.TYPE_REF_PUBLIC_SOURCE_NOT_EXIST="refPublicSourceNotExist";U.TYPE_TABLE_NOT_EXIST="tableNotExist";U.TYPE_MODEL_NOT_EXIST="modelNotExist";U.TYPE_MODEL_DAMAGE="modelDamage";U.TYPE_MODEL_NO_DATA_PERMISSION="modelNoDataPermission";U.TYPE_MODEL_CYCLE_REFERENCE="modelCycleReference";U.TYPE_INCOMPLETE_MATERIALIZED_CONFIG="incompleteMaterializedConfig";U.TYPE_INVALID_DIMENSION_GRANULARITY_NOT_MATCH="invalidDimensionGranularityNotMatch";U.TYPE_INVALID_DIMENSION_TYPE_NOT_MATCH="invalidDimensionTypeNotMatch";
U.TYPE_INVALID_DIMENSION_NOT_EXIST="invalidDimensionNotExist"})();(function(){function y(){var g=this,k,w,e,f;this.getJqUi=function(){k||(k=$("<div>"),c(k,b().getJqUi()));return k};var c=function(m,a){var d=new u;d.setText(N.get("search","\u641c\u7d22"));var x=g.createAllSearchImpl();g.changeSearchImpl(x[0],!1);var K=new z;K.setItemModels(x);K.setSelected(x[0]);K.setCustomPainter(function(l,h,r){r&&h.text(r.getCaption())});K.addSelectedChangedListener(function(l,h,r){g.changeSearchImpl(r,!0)});d=d.getJqUi();K=K.getJqUi();V.layoutCtrlWithLRTB(d,0,null,40,0,null,
23);V.layoutCtrlWithLRTB(K,40,null,80,0,null,23);V.layoutCtrlWithLRTB(a,130,0,null,0,null,23);m.append(d);m.append(K);m.append(a)};this.setSearchingHandler=function(m){f=m};this.isSearching=function(){return g.getSearchText()?!0:!1};this.check=function(m){return!g.getSearchText()||e.check(m.toLowerCase(),g.getSearchText().toLowerCase())};this.clear=function(){w&&w.clear()};this.createAllSearchImpl=function(){return[new L(!0),new L(!1),new ea(!0),new ea(!1),new H(!0),new H(!1),new da(!0),new da(!1)]};
var b=function(){w=new D;w.setShowSearchIcon(!0);w.setPlaceholder(N.get("searcherTips","\u641c\u7d22\u5185\u5bb9"));w.addSearchListener(function(m){f()});w.setSearchListenerDelay(1E3);return w};this.changeSearchImpl=function(m,a){e=m;a&&f()};this.getSearchText=function(){return w?w.getText():null};this.search=function(m,a){return e.doMatch(m,a)}}function C(g){var k=this;this.getCaption=function(){return k.protectedGetCaption(!g)};this.protectedGetCaption=function(w){throw Error("Override");};this.check=
function(w,e){w=k.protectedCheckImpl(w,e);return g?w:!w};this.protectedCheckImpl=function(w,e){throw Error("Override");};this.doMatch=function(w,e){e+="";return g?k.protectedCheckImpl(e,w):!k.protectedCheckImpl(e,w)}}function L(g){C.call(this,g);this.protectedGetCaption=function(k){return k?N.get("searchNotInclude","\u4e0d\u5305\u542b"):N.get("searchInclude","\u5305\u542b")};this.protectedCheckImpl=function(k,w){return 0<=k.indexOf(w)}}function da(g){C.call(this,g);this.protectedGetCaption=function(k){return k?
N.get("searchNotEqual","\u4e0d\u7b49\u4e8e"):N.get("searchEqual","\u7b49\u4e8e")};this.protectedCheckImpl=function(k,w){return k===w}}function ea(g){C.call(this,g);this.protectedGetCaption=function(k){return k?N.get("searchNotStartOf","\u5f00\u5934\u4e0d\u662f"):N.get("searchStartOf","\u5f00\u5934\u662f")};this.protectedCheckImpl=function(k,w){return 0==k.indexOf(w)}}function H(g){C.call(this,g);this.protectedGetCaption=function(k){return k?N.get("searchNotEndOf","\u7ed3\u5c3e\u4e0d\u662f"):N.get("searchEndOf",
"\u7ed3\u5c3e\u662f")};this.protectedCheckImpl=function(k,w){var e=k.lastIndexOf(w);return 0<=e&&e==k.length-w.length}}function M(){var g,k=M.TYPE_TEXT,w=N.get("noDataTips","\u6682\u65e0\u6570\u636e"),e;this.getJqUi=function(){if(!g)switch(g=$("<div>"),g.addClass("modeler-designer-no-data"),k){case M.TYPE_TEXT:c(w,"modeler-designer-no-data-only-text");break;case M.TYPE_NO_SOURCE:f("no_source","modeler-designer-no-data-icon");c(w,"modeler-designer-no-data-text");break;case M.TYPE_NO_SEARCH_RESULT:f("search-no-result",
"modeler-designer-node-selection-icon");c(w,"modeler-designer-node-selection-tip");break;case M.TYPE_NO_DATA_WITH_CLOUD:f("no_data_cloud","modeler-designer-no-data-cloud-icon");c(w,"modeler-designer-no-data-text");break;default:throw Error("The view type error, please set first.");}return g};this.setType=function(b){k=b};this.setText=function(b){w=b?b:"";e&&e.text(w)};var f=function(b,m){var a=$("<div>");a.addClass(m);oa.background(a,b);a.appendTo(g)},c=function(b,m){e=$("<div>");e.addClass(m);e.text(b);
e.appendTo(g)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.designer&&(com.kingdee.bos.qing.modeler.designer={});"undefined"==typeof com.kingdee.bos.qing.modeler.designer.metricdesigner&&(com.kingdee.bos.qing.modeler.designer.metricdesigner=
{});var qa=com.kingdee.bos.qing.modeler.designer.metricdesigner;qa.MetricsCalculateDialog=function(){function g(G){KTDefaultCellRender.call(this,G);var E=this,B=this.paintCellUI;this.paintCellUI=function(ca,ka){var ua=E.getCurrentRowIdx(),ma=E.getCurrentRow(),Aa=E.getCurrentColIdx(),va=ma.getUserObject();ua<aa.getHeadRowCount()?B(ca,ka):(ka=J.getField(Aa),ua=ka.getOutputDataType(),va=va[Aa],null===va||void 0===va?va="":"DATE"===ua?(ma=new ba,ma.setFormatString("yyyy-MM-dd"),va=ma.format(va)):"DATETIME"===
ua?(ma=new ba,ma.setFormatString("yyyy-MM-dd HH:mm:ss"),va=ma.format(va)):"BOOLEAN"===ua?va=va?"true":"false":"NUMBER"===ua&&(ua=new KTStyle,ua.setTextAlign("right"),ma.getCell(Aa).setStyle(ua),ma=ka.getFormat())&&(Aa=new U,Aa.setFormatString(ma),va=Aa.format(va)),ma=$("<div class='metric-designer-trial-calculate-table-cell'>"),ma.text(va),ma.attr("title",va),ma.appendTo(ca))}}function k(G,E){function B(pa,X,Z){function ja(){var S,W,Q;this.setValue=function(la){S=la};this.getValue=function(){return S};
this.setText=function(la){W=la};this.getText=function(){return W};this.setChecked=function(la){Q=la};this.isChecked=function(){return Q}}function na(S){var W,Q=new q;this.getJqUi=function(){W||(Q.setUserObject(S.getValue()),Q.setText(S.getText()),Q.setChecked(S.isChecked()),Q.addCheckedListener(la),W=Q.getJqUi(),W.css("position","relative"));return W};var la=function(za,Ma){S.setChecked(za.isChecked());eb(za,Ma)}}fa.call(this);var Ba=this,Da=this.protectedMethod,Ka,Ea,Fa=[],Oa=[],Na=!1,Ha,Ta,Ja,La,
Ya=new ba,Ia;(function(){Da.setTitle(pa.getDimensionModel().getName());Da.setSelectable(!0);Da.setContentPaneCreator(function(){var S=X.length,W=Math.max(60,Math.min(parseInt(.9*$(document.body).innerHeight())-180,420));S=Math.min(W,Math.max(60,23*S));S=Math.max(S+180,305);Ba.setSize(600,S);if(!Ka){Ka=$("<div>");fb(Ka);S=Ka;W=$("<div>");V.layoutCtrlWithLRTB(W,0,0,null,0,null,55);Ea=new y;Ea.setSearchingHandler(gb);var Q=Ea.getJqUi();V.layoutCtrlWithLRTB(Q,0,200,null,0,null,23);Q.appendTo(W);Q=new q;
Q.setText(N.get("showOnlySelected","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));Q.setChecked(Na);Q.addCheckedListener(hb);Q=Q.getJqUi();V.layoutCtrlWithLRTB(Q,null,0,120,4,null,21);Q.appendTo(W);Ha=new q;Ha.setText(N.get("selectAll","\u5168\u9009"));Ha.setChecked(0===Z.length?!0:Z.length===X.length);Ha.addCheckedListener(ib);Q=Ha.getJqUi();V.layoutCtrlWithLRTB(Q,0,null,80,30,null,21);Q.appendTo(W);Ta=new u;Q=Ta.getJqUi();V.layoutCtrlWithLRTB(Q,80,0,null,30,null,21);Q.appendTo(W);W.appendTo(S);Ua()}return Ka});
Da.setClosingChecker(function(){return 0===Va().length?(Da.getMessageCurtain().showPrompt(N.get("noSelectValue","\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u7ef4\u5ea6\u503c\u3002"),2E3),!1):!0});Da.setClosingAction(function(S){if(S){S=Va();var W=va(S);Wa(W);pa.updateSelectedDimensionValue(S);n.occur(n.FUNCTION,n.TRIAL_CALCULATE_DIMENSION_FILTER)}})})();var fb=function(S){var W=$("<div>");V.layoutCtrlWithLRTB(W,0,0,null,55,10,null);jb(X,W);Ia=new T;Ia.setItemHeight(23);var Q=Ia.getJqUi();Ia.setItemUiCreator(function(la){var za=
$("<div>");za.css("width","100%");la=new na(Oa[la]);za.append(la.getJqUi());return za});V.layoutCtrlWithLRTB(Q,0,0,null,0,0,null);W.append(Q);Za();S.append(W)},Za=function(){Ia.setItemCount(Oa.length);setTimeout(Ia.repaint,0)},jb=function(S,W){La=new M;La.setType(M.TYPE_NO_SEARCH_RESULT);La.setText(N.get("noSearchResult","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"));var Q=La.getJqUi();Q.hide();Q.appendTo(W);Ja=new M;Ja.setType(M.TYPE_NO_DATA_WITH_CLOUD);Ja.setText(N.get("noDataTips",
"\u6682\u65e0\u6570\u636e"));Q=Ja.getJqUi();Q.appendTo(W);Q.hide();if(S&&0!==S.length){W=pa.getDimensionModel();Q=W.getDimensionType();for(var la=0;la<S.length;la++){var za=S[la],Ma=0===Z.length?!0:-1!==Z.indexOf(za);var Ca=za;if(null===Ca||0===Ca.length)var Pa=N.get("emptyValue","\uff08\u7a7a\uff09");else if(sa.TYPE_DATE===Q){Pa=W.getDateFormat();if(0!==$.trim(Ca).length)switch(Pa){case sa.VALUE_YEAR_MONTH_DAY:Ya.setFormatString("yyyy-MM-dd"),Ca=Ya.format(Ca)}Pa=Ca}else Pa=Ca;Ca=new ja;Ca.setValue(za);
Ca.setChecked(Ma);Ca.setText(Pa);Fa.push(Ca)}Oa=Fa}else Q.show()},ab=function(S,W){if(0===W.length)La.getJqUi().hide(),0===S.length?Ja.getJqUi().show():Ja.getJqUi().hide(),Oa=S,Ha.setChecked(Na?!0:$a(S));else{for(var Q=!0,la=[],za=0;za<S.length;za++){var Ma=S[za];Ea.search(W,Ma.getText())&&(Q=!1,la.push(Ma))}Q?(Ha.setChecked(!1),Ja.getJqUi().hide(),La.getJqUi().show()):(Ha.setChecked(Na?!0:$a(la)),Ja.getJqUi().hide(),La.getJqUi().hide());Oa=la}Za()},Va=function(){for(var S=[],W=0;W<Fa.length;W++){var Q=
Fa[W];Q.isChecked()&&S.push(Q)}return S},gb=function(){for(var S=[],W=$.trim(Ea.getSearchText()),Q=0;Q<Fa.length;Q++){var la=Fa[Q];Na&&!la.isChecked()||S.push(la)}ab(S,W)},hb=function(S,W){if(W){var Q=[];Na=S.isChecked();Fa.forEach(function(la){Na&&!la.isChecked()||Q.push(la)});S=$.trim(Ea.getSearchText());ab(Q,S)}},$a=function(S){for(var W=!0,Q=0;Q<S.length;Q++)if(!S[Q].isChecked()){W=!1;break}return W},ib=function(S,W){if(W){var Q=S.isChecked();bb().forEach(function(la){la.setChecked(Q)});Ua();
Ia.keepState();Ia.repaint();Ia.restoreState()}},Ua=function(){var S=Va().length;S=N.get("selectedCount","\uff08\u5df2\u9009\u62e9#1\u9879\uff09").replace("#1",S);Ta.setText(S)},eb=function(S,W){if(W){S=bb();var Q=0;S.forEach(function(la){la.isChecked()&&Q++});Ha.setChecked(Q===S.length)}Ua()},bb=function(){var S=$.trim(Ea.getSearchText());if(0===S.length)return Fa;for(var W=[],Q=0;Q<Fa.length;Q++){var la=Fa[Q];Ea.search(S,la.getText())&&W.push(la)}return W}}var ca=this,ka,ua,ma=[];this.getJqUi=function(){ka||
Aa();return ka};this.getDimensionFilterItem=function(){if(!ma||0==ma.length)return null;var pa=new p;pa.setDimensionKey(G.getDimensionId());for(var X=[],Z=0;Z<ma.length;Z++)X.push(ma[Z]);pa.setValues(X);return pa};this.getDimensionModel=function(){return G};var Aa=function(){ka=$("<div class='metric-designer-trial-calculate-dimension-item'>");var pa=$("<div class='metric-designer-trial-calculate-dimension-item-name'>");pa.text(G.getName());pa.attr("title",G.getName());var X=$("<div class='metric-designer-trial-calculate-dimension-value-container'>");
ua=$("<div class='metric-designer-trial-calculate-dimension-value-text'>");ua.text(N.get("allWithBracket","\uff08\u5168\u90e8\uff09"));ua.attr("title",N.get("allWithBracket","\uff08\u5168\u90e8\uff09"));var Z=$("<div class='metric-designer-trial-calculate-dimension-value-btn'>");oa.background(Z,"btn_edit");Z.attr("title",N.get("selectDimensionValue","\u9009\u62e9\u7ef4\u5ea6\u503c"));Z.on("click",function(){Qa(ca)});ua.appendTo(X);Z.appendTo(X);ka.append(pa);ka.append(X)};this.updateSelectedDimensionValue=
function(pa){var X=ta[G.getDimensionId()],Z=[],ja=[];pa.forEach(function(na){Z.push(na.getValue());ja.push(na.getText())});ma=Z.slice();pa=pa.length===X.length?N.get("allWithBracket","\uff08\u5168\u90e8\uff09"):ja.join(",");ua.text(pa);ua.attr("title",pa)};var va=function(pa){var X=ta[G.getDimensionId()];if(!ma.length)return pa.length!==X.length;if(ma.length!==pa.length)return!0;for(X=0;X<pa.length;X++)if(-1===ma.indexOf(pa[X].getValue()))return!0;return!1},Qa=function(pa){if(ta[G.getDimensionId()])(new B(pa,
ta[G.getDimensionId()],ma)).showDialog();else{var X=new ha;X.setModelerModel(d);var Z=new R(a.getRemoteImpl(),function(ja){ta[G.getDimensionId()]=ja;ja=new B(pa,ja,ma);c.is(":visible")&&ja.showDialog()},function(ja){});Z.setBlockingJqUi(c);Z.getMetricDimValues(X.toJsonObject(),G.getDimensionId(),E.getId())}}}function w(){fa.call(this);var G=this.protectedMethod,E=this,B,ca,ka,ua,ma=!1,Aa;(function(){G.setTitle(N.get("previewSet","\u9884\u89c8\u8bbe\u7f6e"));G.setSelectable(!0);G.setContentPaneCreator(function(){E.setSize(440,
330);return va()});G.setFooterPaneCreator(function(X){var Z=new F(N.get("confirm","\u786e\u5b9a"));Z.setHighlight(!0);var ja=Z.getJqUi();ja.addClass("sa-ctrl-dialog-footer-ok");ja.appendTo(X);Z.addActionListener(function(na){na=B.getValue();var Ba=ca.getValue();Aa&&Aa(ma,na,Ba);G.destroy();return!0});Z=new F(N.get("cancel","\u53d6\u6d88"));Z.setHighlight(!1);ja=Z.getJqUi();ja.addClass("sa-ctrl-dialog-footer-cancel");ja.appendTo(X);Z.addActionListener(function(na){G.destroy();return!0})});G.setClosingAction(function(X){})})();
this.setOriginExtractCount=function(X){ka=X};this.setOriginPreviewCount=function(X){ua=X};this.setAllData=function(X){ma=X};this.setConfirmCallback=function(X){Aa=X};var va=function(){var X=$("<div>"),Z=$("<div>");Z.text(N.get("extractSet","\u62bd\u53d6\u8bbe\u7f6e"));V.layoutCtrl(Z,30,20,100,24);Z.appendTo(X);Z.css({color:"#333333","line-height":"24px","font-size":"14px"});Z=Qa("extract",N.get("extract","\u62bd\u53d6\u524d"),X);var ja=Z.getJqUi();V.layoutCtrlWithLRTB(ja,60,null,300,60,null,null);
B=new O;var na=B.getJqUi();B.setConstraint(1,1E4,1);B.setValue(ka);V.layoutCtrlWithLRTB(na,122,null,100,49,null,null);na.appendTo(X);na=$("<div>");na.text(N.get("rowDataCalculate","\u884c\u6570\u636e\u8ba1\u7b97"));na.css("color","#666");V.layoutCtrlWithLRTB(na,170,0);V.layoutCtrlMiddleAlign(na,22);na.appendTo(ja);ja=Qa("extractAll",N.get("all","\u5168\u91cf"),X);na=ja.getJqUi();V.layoutCtrlWithLRTB(na,60,null,300,90,null,null);var Ba=$("<div>");oa.background(Ba,"warning");Ba.attr("title",N.get("extractAllWarn",
"\u62bd\u53d6\u5168\u91cf\u6570\u636e\u8ba1\u7b97\u65f6\uff0c\u4f1a\u589e\u52a0\u6570\u636e\u9884\u89c8\u7684\u65f6\u957f\uff0c\u589e\u52a0\u670d\u52a1\u5668\u538b\u529b\uff0c\n\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u5d29\u6e83\uff0c\u56e0\u6b64\u63a8\u8350\u62bd\u53d6\u90e8\u5206\u6570\u636e\u3002"));V.layoutCtrlWithLRTB(Ba,110,null,20,80,null,20);Ba.appendTo(X);na=new A;na.addElement(Z);na.addElement(ja);na.addChangedListener(function(Ka,Ea){Ea&&("extract"==Ka.getUserObject()?(ma=!1,B.setEnabled(!0),
Ba.hide()):(ma=!0,B.setEnabled(!1),Ba.show()))});ma?(pa(na,"extractAll"),B.setEnabled(!1),Ba.show()):(pa(na,"extract"),B.setEnabled(!0),Ba.hide());Z=$("<div>");Z.text(N.get("dataPreview","\u6570\u636e\u9884\u89c8"));V.layoutCtrl(Z,30,115,100,24);Z.appendTo(X);Z.css({color:"#333333","line-height":"24px","font-size":"14px"});var Da=Qa("dataPreview",N.get("previewResult","\u9884\u89c8\u8ba1\u7b97\u7ed3\u679c\u7684\u524d"),X);Da.setChecked(!0);Da.addCheckedListener(function(){Da.setChecked(!0)});Z=Da.getJqUi();
V.layoutCtrlWithLRTB(Z,60,null,300,155,null,null);ca=new O;ja=ca.getJqUi();ca.setConstraint(1,1E3,1);ca.setValue(ua);V.layoutCtrlWithLRTB(ja,180,null,100,144,null,null);ja.appendTo(X);ja=$("<div>");ja.text(N.get("rowData","\u884c\u6570\u636e"));ja.css("color","#666");V.layoutCtrlWithLRTB(ja,230,0);V.layoutCtrlMiddleAlign(ja,22);ja.appendTo(Z);return X},Qa=function(X,Z,ja){var na=new t;na.setUserObject(X);na.setText(Z);X=na.getJqUi();ja.append(X);return na},pa=function(X,Z){X.toCheckTheElement(function(ja){return ja.getUserObject()===
Z})}}fa.call(this);var e=this,f=this.protectedMethod,c,b,m,a,d,x,K,l=[],h,r,J,P,ia=!1,ra=1E3,Y=100,wa,ta=[];(function(){e.setSize(900,675);f.setSelectable(!0);f.getDialogCtrl().setFullScreenEnabled();f.getDialogCtrl().addResizeListener(function(){P&&P.relayoutViews()});f.setContentPaneCreator(function(){f.setTitle(x);c=$("<div>");h?h(function(G){G=G.modeler;var E=new ha;E.fromJsonObject(G);var B=new R(a.getRemoteImpl(),function(ca){var ka=new v;ka.fromJsonObject(ca);ka&&ka.isValid()?(d=E.getModelerModel(),
l=d.getAllDimension(),Sa(c,!0)):kb(c)});B.setShowBlocking(!0);B.checkModelerValid(G)}):Sa(c,!1);return c});f.setFooterPaneCreator(function(G){var E=new F(N.get("close","\u5173\u95ed"));E.setHighlight(!0);var B=E.getJqUi();B.addClass("sa-ctrl-dialog-footer-ok");B.appendTo(G);V.layoutCtrl(B,"calc(50% - 60px)",null,null,null);E.addActionListener(function(ca){f.destroy();return!0})});f.setClosingAction(function(G){})})();this.setMetric=function(G){m=G};this.setTitle=function(G){x=G};this.setGlobal=function(G){a=
G};this.setButtonName=function(G){K=G};this.setFunLoadModelerInfo=function(G){h=G};this.setFunEntryDesignerFromMainPage=function(G){r=G};this.setModeler=function(G){d=G;l=G.getAllDimension()};var xa=function(G){var E=$("<div class='metric-designer-trial-calculate-property-title'>"),B=$("<div>");B.appendTo(E);V.layoutCtrlWithLRTB(B,0,0,null,2,2,null);B.css("border-left","3px solid #5582f3");B=$("<div>");B.text(G);V.layoutCtrl(B,10,null,200,null);V.layoutCtrlMiddleAlign(B,16);B.appendTo(E);B.css({"font-weight":"bold",
color:"#666"});return E},Ga=function(G){wa=[];for(var E=$(document.createDocumentFragment()),B=0;B<l.length;B++){var ca=new k(l[B],m);ca.getJqUi().appendTo(E);wa.push(ca)}E.appendTo(G)},Ra=function(){if(!wa||0==wa.length)return null;for(var G=[],E=0;E<wa.length;E++){var B=wa[E].getDimensionFilterItem();B&&G.push(B.toJsonObject())}return G},Sa=function(G,E){if(!E){var B;E=qa.MetricStateMonitor.getInvalidDimensionMap();var ca=qa.MetricStateMonitor.getInvalidPublicDimensionMap();0!==Object.keys(E).length?
B=N.get("dimensionException","\u7ef4\u5ea6\u5f02\u5e38\uff0c\u65e0\u6cd5\u8fdb\u884c\u6307\u6807\u8bd5\u8ba1\u7b97"):0!==Object.keys(ca).length?B=N.get("publicDimensionException","\u516c\u5171\u7ef4\u5ea6\u8bbe\u7f6e\u4e0d\u5b8c\u6574\uff0c\u65e0\u6cd5\u8fdb\u884c\u8bd5\u8ba1\u7b97"):qa.MetricStateMonitor.getInvalidPrompt(m.getId())?B=N.get("metricException","\u6307\u6807\u5f02\u5e38\uff0c\u65e0\u6cd5\u8fdb\u884c\u6307\u6807\u8bd5\u8ba1\u7b97"):0<lb().length&&(B=N.get("metricException","\u6307\u6807\u5f02\u5e38\uff0c\u65e0\u6cd5\u8fdb\u884c\u6307\u6807\u8bd5\u8ba1\u7b97"));
if(B){E=new M;E.setType(M.TYPE_NO_DATA_WITH_CLOUD);E.setText(B);B=E.getJqUi();G.append(B);return}}B=$("<div class='metric-designer-trial-calculate-metric-icon'>");oa.background(B,"metric_icon");E=$("<div class='metric-designer-trial-calculate-metric-info'>");E.text(m.getName());B.appendTo(G);E.appendTo(G);E=$("<div class='metric-designer-trial-calculate-dimension-filter-container'>");E.appendTo(G);xa(N.get("dimensionFilter","\u7ef4\u5ea6\u8fc7\u6ee4")).appendTo(E);B=0;l&&0<l.length?(B=Math.min(68*
Math.ceil(l.length/3)+44,180),ca=$("<div class='metric-designer-trial-calculate-dimension-list'>"),Ga(ca),ca.appendTo(E)):(B=86,ca=$("<div class='metric-designer-trial-calculate-no-dimension-tips'>"),ca.text(N.get("noDimension","\u6682\u672a\u6dfb\u52a0\u7ef4\u5ea6")),ca.attr("title",N.get("noDimension","\u6682\u672a\u6dfb\u52a0\u7ef4\u5ea6")),ca.appendTo(E));V.layoutCtrlWithLRTB(E,0,0,null,47,null,B);E=$("<div>");V.layoutCtrlWithLRTB(E,0,0,null,B+32+15+2,0,null);B=$("<div class='metric-designer-trial-calculate-button'>");
B.text(K);B.attr("title",K);B.on("click",function(){Wa(!1);Xa();n.occur(n.BUTTON_TYPE,n.TRIAL_CALCULATE)});B.appendTo(E);mb(E);E.appendTo(G)},lb=function(){for(var G=qa.MetricStateMonitor.getInvalidTableMap(),E=[],B=Object.keys(G),ca=0;ca<B.length;ca++){var ka=B[ca];G[B[ca]]&&E.push(ka)}return E},kb=function(G){var E=new M;E.setType(M.TYPE_NO_DATA_WITH_CLOUD);E.setText(N.get("metricError","\u6307\u6807\u5f02\u5e38\uff0c\u65e0\u6cd5\u67e5\u770b\u6307\u6807\u6570\u636e"));E=E.getJqUi();var B=$("<div class='metric-designer-trial-calculate-entry-designer'>");
B.text(N.get("enterDesigner","\u8fdb\u5165\u8bbe\u8ba1\u5668"));B.on("click",function(){r&&r()});var ca=$("<span class='metric-designer-trial-calculate-view-exception-reason'>");ca.text(N.get("viewExceptionReason","\u67e5\u770b\u5f02\u5e38\u539f\u56e0"));B.append(ca);E.append(B);G.append(E)},mb=function(G){var E=xa(N.get("resultPreview","\u7ed3\u679c\u9884\u89c8"));E.css("top","51px");var B=$("<div class='metric-designer-trial-calculate-result-preview-setting'>"),ca=$("<div class='metric-designer-trial-calculate-result-preview-setting-text'>");
cb(ca);var ka=$("<div class='metric-designer-trial-calculate-result-preview-setting-btn'>");ka.attr("title",N.get("previewSet","\u9884\u89c8\u8bbe\u7f6e"));ka.on("click",function(){nb(ca)});oa.backgroundWithHover(ka,"setting");B.append(ka);B.append(ca);G.append(E);G.append(B);ob(G);pb(G)},pb=function(G){var E=$("<div class='metric-data-calculate-preview-mask'>"),B=$("<div>");B.text(N.get("refreshPreviewData","\u7f16\u8f91\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u6b64\u5904\u5237\u65b0\u9884\u89c8\u6570\u636e\u3002"));
B.addClass("metric-data-calculate-mask-text");B.on("click",function(){Wa(!1);Xa()});E.hide();B.appendTo(E);E.appendTo(G)},Wa=function(G){if(J){var E=c.find(".metric-data-calculate-preview-mask");G?E.show():E.hide()}},ob=function(G){var E=$("<div class='metric-designer-trial-calculate-result-table'>");P=aa.createTable();P.setColumnFitVisibleWidth(!1);P.setAutoAdjustRowHeight(!0);var B=$(P.getUI());V.layoutCtrlWithLRTB(B,0,0,"100%",5,1<Math.ceil(l.length/3)?0:5,null);E.append(B);G.append(E)},db=function(){if(J){aa.clear(P);
var G=J.getColumnCount();P.addColumns(G);for(var E=aa.createHeadRow(P),B=0;B<G;B++){var ca=E.getCell(B);P.getColumn(B).setWidth(120);var ka=J.getField(B).getAlias();ca.setValue(ka?ka:J.getField(B).getName())}G=J.getRowCount();b&&b.remove();if(0===G)aa.refresh(P),b=$("<div class='metric-designer-trial-calculate-no-result'>"),b.text(N.get("calculateNoResult","\u6ca1\u6709\u6570\u636e")),$(P.getUI()).append(b);else{B=new g(P);B.setOutsideVisible(!1);P.setCellRender(B);E=new KTBorderStyle;E.setBottomBorderWidth(1);
E.setBottomBorderPen("solid");E.setBottomBorderColor("#e5e5e5");for(B=0;B<G;B++)ca=J.getOneRow(B),ka=aa.createRow(P,!1),ka.setBorder(E),ka.setUserObject(ca);aa.refresh(P)}}},Xa=function(){var G=new I;ia?G.setExtractAllDataAndPreviewCount(Y):G.setExtractPartlyData(ra,Y);var E=new ha;E.setModelerModel(d);var B=new R(a.getRemoteImpl(),function(ca){J=new ya;J.fromJsonObject(ca);db()},function(ca){db()});B.setBlockingJqUi(c);B.previewMetrics(E.toJsonObject(),Ra(),G.toJsonObject(),m.getId())},nb=function(G){var E=
new w;E.setOriginExtractCount(ra);E.setOriginPreviewCount(Y);E.setAllData(ia);E.setConfirmCallback(function(B,ca,ka){ia=B;ra=ca;Y=ka;cb(G);Xa()});E.showDialog()},cb=function(G){var E=ia?N.get("extractAllData","\u62bd\u53d6\u5168\u91cf\u6570\u636e\u8fdb\u884c\u8ba1\u7b97, "):N.get("onlyExtractSomeRows","\u4ec5\u62bd\u53d6\u524d#1\u884c\u8fdb\u884c\u8ba1\u7b97, ").replace("#1",ra);E+=N.get("previewRows","\u663e\u793a\u8ba1\u7b97\u7ed3\u679c\u7684\u524d#1\u884c\u6570\u636e").replace("#1",Y);G.text(E);
G.attr("title",E)}};var N,V,ba,U,fa,F,O,A,t,D,q,z,u,T,aa,R,oa,I,sa,ha,ya,p,v,n;(function(){var g=com.kingdee.bos.qing.framework.common;N=g.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.modeler.designer);g=com.kingdee.bos.qing.common;V=g.DomUtil;ba=g.DateFormater;U=g.NumberFormater;g=com.kingdee.bos.qing.ui.component;fa=g.AbstractModalDialog;F=g.Button;O=g.Spinner;A=g.RadioButtonGroup;t=g.RadioButton;D=g.SearchBox;q=g.CheckBox;z=g.ComboBox;u=g.Label;T=g.DynamicScroller;g=com.kingdee.bos.qing.common.ui;
aa=g.TableUtil;g=com.kingdee.bos.qing.modeler.designer;R=g.DesignerFacade;oa=g.Icons;I=g.PreviewConfig;ha=g.QingModeler;ya=g.PreviewData;n=g.UserOperationReporter;g=com.kingdee.bos.qing.modeler.designer.metricdesigner;v=g.ModelerValidity;p=g.DimensionFilterItem;sa=g.Dimension})();M.TYPE_TEXT="text";M.TYPE_NO_SOURCE="noSource";M.TYPE_NO_SEARCH_RESULT="noSearchResult";M.TYPE_NO_DATA_WITH_CLOUD="noDataWithCloud"})();
//qingVersionTag: 20250324