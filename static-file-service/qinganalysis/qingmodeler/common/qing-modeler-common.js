var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(m,v,n){m instanceof String&&(m=String(m));for(var t=m.length,h=0;h<t;h++){var A=m[h];if(v.call(n,A,h,m))return{i:h,v:A}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(m,v,n){if(m==Array.prototype||m==Object.prototype)return m;m[v]=n.value;return m};$jscomp.getGlobal=function(m){m=["object"==typeof globalThis&&globalThis,m,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var v=0;v<m.length;++v){var n=m[v];if(n&&n.Math==Math)return n}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(m,v){var n=$jscomp.propertyToPolyfillSymbol[v];if(null==n)return m[v];n=m[n];return void 0!==n?n:m[v]};
$jscomp.polyfill=function(m,v,n,t){v&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(m,v,n,t):$jscomp.polyfillUnisolated(m,v,n,t))};$jscomp.polyfillUnisolated=function(m,v,n,t){n=$jscomp.global;m=m.split(".");for(t=0;t<m.length-1;t++){var h=m[t];if(!(h in n))return;n=n[h]}m=m[m.length-1];t=n[m];v=v(t);v!=t&&null!=v&&$jscomp.defineProperty(n,m,{configurable:!0,writable:!0,value:v})};
$jscomp.polyfillIsolated=function(m,v,n,t){var h=m.split(".");m=1===h.length;t=h[0];t=!m&&t in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var A=0;A<h.length-1;A++){var B=h[A];if(!(B in t))return;t=t[B]}h=h[h.length-1];n=$jscomp.IS_SYMBOL_NATIVE&&"es6"===n?t[h]:null;v=v(n);null!=v&&(m?$jscomp.defineProperty($jscomp.polyfills,h,{configurable:!0,writable:!0,value:v}):v!==n&&(void 0===$jscomp.propertyToPolyfillSymbol[h]&&(n=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[h]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(h):$jscomp.POLYFILL_PREFIX+n+"$"+h),$jscomp.defineProperty(t,$jscomp.propertyToPolyfillSymbol[h],{configurable:!0,writable:!0,value:v})))};$jscomp.polyfill("Array.prototype.find",function(m){return m?m:function(v,n){return $jscomp.findInternal(this,v,n).v}},"es6","es3");
(function(){function m(t,h,A){this.getTypeID=function(){return t};this.getI18nKey=function(){return h};this.getDefaultDesc=function(){return A}}function v(t){var h=this,A,B,D,J,L,K,d=[],c=[],a=[],f=[];this.setModelGroupId=function(b){A=b};this.getModelGroupId=function(){return A};this.setModelSetId=function(b){B=b};this.getModelSetId=function(){return B};this.setLevel=function(b){K=b};this.getLevel=function(){return K};this.setModelGroupName=function(b){D=b};this.getModelGroupName=function(){return D};
this.setParentId=function(b){J=b};this.getParentId=function(){return J};this.setParentNode=function(b){L=b};this.getParentNode=function(){return L};this.setArrChildren=function(b){d=b};this.getChildren=function(){return d};this.getArrAllChildren=function(){c=[];var b=h.getChildren();c=c.concat(b);for(var g=0;g<b.length;g++)0<b[g].getChildren().length&&(c=c.concat(b[g].getArrAllChildren()));return c};this.setArrModelList=function(b){a=b};this.getArrModelList=function(){return a};this.getArrAllModelList=
function(b){f=[];b?e(h):f=h.getArrModelList();return f};var e=function(b){var g=b.getArrModelList();g&&0<g.length&&(f=f.concat(g));if((b=b.getChildren())&&0<b.length)for(g=0;g<b.length;g++)e(b[g])};this.fromJsonObject=function(b){h.setModelGroupId(b.modelGroupId);h.setModelSetId(b.modelSetId);h.setModelGroupName(b.modelGroupName);h.setParentId(b.parentId);h.setLevel(b.level);var g=b.modelList;if(g&&0<g.length)for(var l=0;l<g.length;l++){var q=g[l],w=t();w.fromJsonObject(q);a.push(w)}if((b=b.children)&&
0<b.length)for(l=0;l<b.length;l++)if(g=b[l])q=new v(t),q.fromJsonObject(g),q.setParentNode(h),d.push(q)};this.toJsonObject=function(){var b={};b.modelGroupId=A;b.modelSetId=B;b.modelGroupName=D;b.parentId=J;b.parentNode=L;b.level=K;b.children=d;b.modelList=a;return b}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.modeler&&
(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.common&&(com.kingdee.bos.qing.modeler.common={});"undefined"==typeof com.kingdee.bos.qing.modeler.common.model&&(com.kingdee.bos.qing.modeler.common.model={});var n=com.kingdee.bos.qing.modeler.common.model;n.ModelGroupFolderNode=v;n.SystemVarModel=function(){var t,h;this.setName=function(A){t=A};this.setValue=function(A){h=A};this.getName=function(){return t};this.getValue=function(){return h}};n.SystemVarType=m;m.VARIANTTYPEENUM=
[new m("USER_ID","currentUserId","\u5f53\u524d\u7528\u6237ID"),new m("USER_NAME","currentUserName","\u5f53\u524d\u7528\u6237\u540d\u79f0"),new m("ORG_ID","currentGroupID","\u5f53\u524d\u7ec4\u7ec7ID"),new m("ORG_NAME","currentGroupNAME","\u5f53\u524d\u7ec4\u7ec7\u540d\u79f0"),new m("ORG_RANGE_ID","currentGroupRangeID","\u5f53\u524d\u7528\u6237\u4e1a\u52a1\u7ec4\u7ec7\u8303\u56f4(ID)"),new m("DEPARTMENT_IDS","currentDepartmentIds","\u5f53\u524d\u7528\u6237\u6240\u5c5e\u90e8\u95e8(ID)"),new m("DEPARTMENT_AND_SUBORDINATE_IDS",
"currentDeptAndSubIds","\u5f53\u524d\u7528\u6237\u6240\u5c5e\u90e8\u95e8\u53ca\u4e0b\u7ea7(ID)"),new m("CHARGE_DEPARTMENT_IDS","currentChargeDeptId","\u5f53\u524d\u7528\u6237\u8d1f\u8d23\u7684\u90e8\u95e8(ID)"),new m("CHARGE_DEPARTMENT_AND_SUBORDINATE_IDS","currentChargeDeptAndSubIds","\u5f53\u524d\u7528\u6237\u8d1f\u8d23\u7684\u90e8\u95e8\u53ca\u4e0b\u7ea7(ID)"),new m("BIZ_UNIT_ORGRANG_ID","currentBizUnitOrgRangeIds","\u5f53\u524d\u7528\u6237\u4e1a\u52a1\u5355\u5143\u8303\u56f4(ID)"),new m("ADMIN_ORG_RANGE_ID",
"currentAdminGroupRangeID","\u5f53\u524d\u4e1a\u52a1\u884c\u653f\u7ec4\u7ec7\u8303\u56f4(ID)"),new m("I18N","currentSystemLanguage","\u5f53\u524d\u7cfb\u7edf\u8bed\u8a00")];m.SUPPORTED_VAR_TYPE=[];v.ROOT_NODE_ID="0";n.ModelType=new function(){var t=com.kingdee.bos.qing.framework.common.MultilanguageManager.createPackageAccessor(n);this.modelTypeTransformName=function(h){switch(h){case n.ModelType.DATA_TABLE_MODEL:return t.get("dataTableModelType","\u6570\u636e\u8868\u6a21\u578b");case n.ModelType.ENTITY_MODEL:return t.get("entityModelType",
"\u5b9e\u4f53\u6a21\u578b");case n.ModelType.RELATION_MODEL:return t.get("relationModelType","\u5173\u7cfb\u6a21\u578b");case n.ModelType.METRICS_MODEL:return t.get("metricsModelType","\u6307\u6807\u6a21\u578b")}return null};this.getModelIconByType=function(h){switch(h){case n.ModelType.DATA_TABLE_MODEL:return"data-table-model-icon";case n.ModelType.ENTITY_MODEL:return"entity-model-icon";case n.ModelType.RELATION_MODEL:return"relation-model-icon";case n.ModelType.METRICS_MODEL:return"metric-model-icon"}return null}};
n.ModelType.ALL_TYPE="0";n.ModelType.DATA_TABLE_MODEL="1";n.ModelType.ENTITY_MODEL="2";n.ModelType.RELATION_MODEL="3";n.ModelType.METRICS_MODEL="4"})();(function(){function m(d){var c;this.getJqUi=function(){if(!c){c=$("<div class='no-data-bg-container'>");var a=$("<div class='no-data-icon'>");K.background(a,"icon-empty");var f=$("<div class='no-data-text'>");f.text(d?d:B.get("noDataTips","\u6682\u65e0\u6570\u636e"));a.appendTo(c);f.appendTo(c)}return c};this.hide=function(){c&&c.hide()};this.show=function(){c&&c.show()}}function v(){var d=this,c,a,f,e=[],b=!1,g,l,q,w,y=!1,r=[];this.addExpandedListener=function(k){r.push(k)};this.setTree=function(k){c=
k};this.getTree=function(){return c};this.setRootGroup=function(k){a=k};this.getRootGroup=function(){return a};this.setModelGroupFolderNode=function(k){f=k};this.getModelGroupFolderNode=function(){return f};this.setSelectedNode=function(k){c&&c.setSelecteds(k)};this.getSelectedNode=function(){return c&&c.getSelecteds()[0]};this.getChildCount=function(){return a&&a.getChildCount()};this.setRootVisible=function(k){b=k;c&&c.setRootVisible(b)};this.getArrModelGroupFolderNode=function(){return e};this.setFunModelGroupTreeNodeClick=
function(k){l=k};this.setAutoSelectedGroupId=function(k){q=k};this.getJqUi=function(){if(!g){c=new h;c.setRootVisible(0<f.getChildren().length);c.setNodePainter(H);var k=f.getChildren(),z=d.createBranch(f);x(z,k);a=z;c.setRoot(a);a.setExpanded(!0);if(w){for(k=w;k.getParent();)k=k.getParent(),k.setExpanded(!0);c.setSelecteds([w])}else c.setSelecteds([a]);c.setLineHeight(30);L.layoutCtrl(c.getJqUi(),0,0,"100%","100%");g=c.getJqUi();g.css("overflow","hidden auto");c.addSelectingListener(l);for(k=0;k<
r.length;k++)c.addExpandedListener(r[k])}return g};this.destroy=function(){g&&g.detach()};this.refresh=function(){w?(c.expandToNode(w,!1),c.scrollSelectedToVisible(),c.refresh()):c&&c.refresh()};this.removeAllChildren=function(){c&&c.removeAllChildren(a)};this.addChild=function(k,z,G){c&&c.addChild(k,z,G)};this.removeChild=function(k,z){c&&c.removeChild(k,z)};this.createBranch=function(k){var z=new h.BranchNode;z.setUserObject(k);!y&&q&&q===k.getModelGroupId()&&(w=z,y=!0);return z};var x=function(k,
z){if(z&&0!==z.length)for(var G=0;G<z.length;G++){var u=z[G];if(0<u.getChildren().length){var E=d.createBranch(u);k.addChild(E);x(E,u.getChildren())}else k.addChild(d.createLeafNode(u))}};this.createLeafNode=function(k){var z=new h.LeafNode;z.setUserObject(k);!y&&q&&q===k.getModelGroupId()&&(w=z,y=!0);return z};var H=function(k,z){k.css("padding-left","2px");k.css("padding-right","2px");z=z.getUserObject();var G=z.getLevel();k.css("width","calc(100% - "+(20*(G+1)+10)+"px)");k.attr("title",z.getModelGroupName());
k.text(z.getModelGroupName())}}function n(){var d=this,c,a,f,e,b,g,l=!1,q,w=[];this.addExpandedListener=function(r){w.push(r)};this.getTree=function(){return a};this.getRootGroup=function(){return f};this.setDataModel=function(r){e=r};this.setAutoSelectedModelId=function(r){g=r};this.setSelectedNode=function(r){a&&a.setSelecteds(r)};this.getSelectedNode=function(){return a.getSelecteds()[0]};this.getChildCount=function(){return f.getChildCount()};this.setRootVisible=function(r){a.setRootVisible(r)};
this.setFunTreeNodeClick=function(r){q=r};this.getJqUi=function(){if(!c){a=new h;a.setRootVisible(0<e.getChildren().length);var r=e.getChildren(),x=d.createBranch(e);y(x,r);f=x;a.setRoot(f);f.setExpanded(!0);if(b&&g){for(r=b;r.getParent();)r=r.getParent(),r.setExpanded(!0);a.setSelecteds([b])}else g=null,d.protectedInitTree(a,f);a.setLineHeight(30);a.setNodePainter(d.protectedInitCustomPainter);L.layoutCtrl(a.getJqUi(),0,0,"100%","100%");c=a.getJqUi();c.css("overflow","hidden auto");a.addSelectingListener(q);
for(r=0;r<w.length;r++)a.addExpandedListener(w[r])}return c};this.destroy=function(){c&&c.detach()};this.refresh=function(r,x){d.protectedRefresh(a,r,x)};this.removeAllChildren=function(){a&&a.removeAllChildren(f)};this.addChild=function(r,x,H){a.addChild(r,x,H)};this.removeChild=function(r,x){a.removeChild(r,x)};this.createBranch=function(r){var x=new h.BranchNode;!l&&g&&g===r.getId()&&(b=x,l=!0);x.setUserObject(r);d.protectedCreateBranch(r,x);return x};this.createLeafNode=function(r){var x=new h.LeafNode;
x.setUserObject(r);!l&&g&&g===r.getId()&&(b=x,l=!0);d.protectedCreateLeafNode(r,x);return x};var y=function(r,x){if(x&&0!==x.length)for(var H=0;H<x.length;H++){var k=x[H];if(0<k.getChildren().length){var z=d.createBranch(k);r.addChild(z);y(z,k.getChildren())}else r.addChild(d.createLeafNode(k))}}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing=
{});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.common&&(com.kingdee.bos.qing.modeler.common={});"undefined"==typeof com.kingdee.bos.qing.modeler.common.ui&&(com.kingdee.bos.qing.modeler.common.ui={});var t=com.kingdee.bos.qing.modeler.common.ui;t.NoDataContainer=m;t.SearchNoDataContainer=function(){var d,c;this.getJqUi=function(){if(!d){d=$("<div class='search-no-data-bg-container'>");var a=$("<div class='search-no-model-display-icon'>");
K.background(a,"search-no-data-icon");var f=$("<div class='search-no-model-display-text'>"),e=c?B.get("searchNoDataShortTips","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"):B.get("searchNoDataTips","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c");f.text(e);a.appendTo(d);f.appendTo(d)}return d};this.setIsShortTip=function(a){c=a};this.show=function(){d&&d.show()};this.hide=function(){d&&d.hide()}};t.ModelGroupPanel=function(){var d=this,c,a,f,e,b,g,l,q,w,
y,r,x,H,k,z,G,u,E,I=!1,C=!1,M=[],O=[],P,Q;this.getJqUi=function(){if(!c){c=$("<div>");a=$("<div>");a.css("left",0);a.css("top",0);a.css("height",40);a.css("border-bottom","1px solid #CBCBCB");if(!f){f=$("<div>");f.css({position:"relative",left:"22px",top:"10px"});var p=$("<span>");p.addClass("qdm-group-manager-area-text");p.text(B.get("group","\u76ee\u5f55"));f.append(p)}a.append(f);e=$("<div>");e.addClass("qdm-group-all-list");q||(q=(new m).getJqUi());w=$("<div>");w.css({position:"absolute",bottom:"0",
width:"100%","border-top":"1px solid #CBCBCB",height:"40px"});y=new A;y.setText(B.get("containChildren","\u5305\u542b\u4e0b\u7ea7"));y.setChecked(I);y.addCheckedListener(T);p=y.getJqUi();p.css({position:"absolute",left:"22px",top:"50%",transform:"translate(0,-50%)",width:"135px",height:"22px"});p.appendTo(w);q.hide();w.hide();c.append(a);c.append(e);c.append(q);c.append(w)}return c};this.setModelSetId=function(p){Q=p};this.getCurrentSelectedGroup=function(){return b&&b.getSelectedNode()?b.getSelectedNode().getUserObject():
l};this.getCurrentGroupModels=function(p,F){return F.getModelGroupId()===v.ROOT_NODE_ID?M:F.getArrAllModelList(p)};this.getAllModels=function(){return M};this.setTitleContent=function(p){f=p};this.setNoDataContent=function(p){};this.setAutoSelectedGroupId=function(p){E=p};this.setAutoCheckedContainChild=function(p){I=p};this.setFunShowModels=function(p){r=p};this.setFunCustomModelCreator=function(p){H=p};this.setFunCustomModelSort=function(p){x=p};this.setFunIsModelSearch=function(p){k=p};this.setFunDoModelSearch=
function(p){z=p};this.setFunClearSearchStatus=function(p){G=p};this.isContainChild=function(){return y.isChecked()};this.setDoContainChildCallback=function(p){u=p};this.setJsonDataAndUpdateUI=function(p){e.empty();M=[];O=[];P=p;b=new v;l=new J(H);P?(e.show(),q.hide(),l.fromJsonObject(P),l.setModelGroupName(B.get("rootNode","\u5168\u90e8")),R(l),E&&(b.setAutoSelectedGroupId(E),E!==J.ROOT_NODE_ID&&(C=d.isContainChild())),E&&E!==J.ROOT_NODE_ID||(y.setChecked(!0),y.setEnabled(!1)),b.setRootVisible(!0),
b.setModelGroupFolderNode(l),b.setFunModelGroupTreeNodeClick(S),g=b.getJqUi(),p=d.getCurrentGroupModels(d.isContainChild(),d.getCurrentSelectedGroup()),x&&x(p),b.refresh(),r(p),g.appendTo(e),w.show()):(e.hide(),q.show(),l.setModelGroupName(B.get("rootNode","\u5168\u90e8")),l.setModelGroupId(J.ROOT_NODE_ID),l.setModelSetId(Q),l.setLevel(0),l.setArrChildren([]),b.setRootVisible(!1),b.setModelGroupFolderNode(l),b.setFunModelGroupTreeNodeClick(S),g=b.getJqUi(),g.appendTo(e),r([]),y.setChecked(!0),y.setEnabled(!1))};
var T=function(p,F){p=d.getCurrentSelectedGroup();var N=p.getModelGroupId();F&&N!==J.ROOT_NODE_ID&&(C=d.isContainChild());k()?z():(p=d.getCurrentGroupModels(d.isContainChild(),p),F&&r(p));F&&u&&u(d.isContainChild())},R=function(p){var F=p.getArrModelList();if(F&&0<F.length)for(var N=0;N<F.length;N++)M.push(F[N]);O.push(p);if((p=p.getChildren())&&0<p.length)for(N=0;N<p.length;N++)R(p[N])},S=function(p,F){F=F.getUserObject();p&&p.getSelecteds()[0].getUserObject().getModelGroupId()===F.getModelGroupId()||
(G(),F.getModelGroupId()===J.ROOT_NODE_ID?(p=M,y.setChecked(!0),y.setEnabled(!1)):(y.setEnabled(!0),y.setChecked(C),p=F.getArrAllModelList(d.isContainChild())),r(p))}};t.ModelGroupTree=v;t.CatalogTree=function(){n.call(this);this.protectedRefresh=function(d,c,a){d.refresh(c,a)};this.protectedCreateBranch=function(){};this.protectedCreateLeafNode=function(){};this.protectedInitTree=function(d,c){d.setSelecteds([c])};this.protectedInitCustomPainter=function(d,c){d.css("padding-left","0px");d.css("padding-right",
"4px");c=c.getUserObject();var a=c.getLevel();d.css("width","calc(100% - "+(20*(a+1)+10)+"px)");d.attr("title",c.getName());d.text(c.getName())}};var h,A,B,D,J,L;(function(){var d=com.kingdee.bos.qing.ui.component;h=d.Tree;A=d.CheckBox;d=com.kingdee.bos.qing.framework.common;B=d.MultilanguageManager.createPackageAccessor(t);D=d.AbstractIcons;d=com.kingdee.bos.qing.modeler.common.model;J=d.ModelGroupFolderNode;d=com.kingdee.bos.qing.common;L=d.DomUtil})();var K=new function(){D.call(this);var d=this.protectedMethod;
this.protectedInit=function(c,a){c=com.kingdee.bos.qing.modeler.common.ComboIcon;if(!c)throw Error("com.kingdee.bos.qing.modeler.modelset.ComboIcon not found.");c.define(a,"model-common");a.setGap(1);a.setStartPosition(0,151);a.setIconSize(170,98);d.registIcon(0,0,"icon-empty");a.setStartPosition(-15,400);a.setIconSize(166,92);d.registIcon(0,0,"search-no-data-icon");a.setStartPosition(-2,62);a.setIconSize(20,20);d.registIcon(0,2,"warning");a.setStartPosition(4,114);a.setIconSize(19,19);d.registIcon(1,
5,"result-preview-setting");d.registIcon(0,5,"result-preview-setting_hover")}};t.MyIcons=K;v.ROOT_NODE_ID="0";t.HeadImgGenerator=new function(){this.createHeadImg=function(d,c,a){d=null==d?"\u65e0":""==d?"\u65e0":d;var f=null==a?50:a;a=null==a?25:f/2;var e="#31bc9f #33cc70 #4a94db #9b5fb6 #34495e #16a085 #27ae60 #2980b9 #8e44ad #2c3e50 #f1cb1e #e6761b #e7363b #00bcd4 #95a5a6 #f39c12 #d35400 #c0392b #bdc3c7 #7f8c8d".split(" ");if(c)e=c;else{c=Math;var b=c.floor,g=new Uint32Array(1);(window.crypto||
window.webkitCrypto||window.mozCrypto||window.oCrypto||window.msCrypto).getRandomValues(g);e=e[b.call(c,g[0]/4294967296*e.length)]}c=$("<canvas>");c.attr("style","display:none");$("body").append(c);b=c.get(0);b.width=f;b.height=f;f=b.getContext("2d");f.fillStyle=e;f.fillRect(0,0,b.width,b.height);f.fillStyle="#ffffff";f.font="normal "+a+"px Microsoft-YaHei";f.textAlign="center";f.textBaseline="middle";g=/.*[\u4e00-\u9fa5]+.*$/;if(g.test(d))if(/^[0-9a-zA-Z]+$/.test(d.charAt(d.length-1)))for(var l=
0;l<d.length;l++){if(g.test(d[l])){f.fillText(d[l],a,a);break}}else f.fillText(d.charAt(d.length-1),a,a);else f.fillText(d.substring(0,2),a,a);d=[];d.push(b.toDataURL("image/png"));d.push(e);c.remove();return d}}})();(function(){function m(){this.switchSQLToDisplayMode=function(a,f){throw new Exception("override me");};this.switchSQLToPersistentMode=function(a,f){throw new Exception("override me");};this.loadVarModelAdapter=function(a,f){throw new Exception("override me");}}function v(){this.getId=function(){throw new Exception("override me");};this.getDisplayName=function(){throw new Exception("override me");};this.getTextInUserSQL=function(){throw new Exception("override me");};this.getFilterMode=function(){throw new Exception("override me");
};this.getVariateType=function(){throw new Exception("override me");}}function n(a){v.call(this);var f,e;this.getId=function(){return a.getTypeID()};this.getDisplayName=function(){return f?f(a):a.getI18nKey()};this.getTextInUserSQL=function(){return e?e(a):a.getI18nKey()};this.getFilterMode=function(){return FilterItem.MODE_SYS_VAR};this.getVariateType=function(){return v.VAR_TYPE_SYS};this.setDisplayNameFormater=function(b){f=b};this.setUserSQLFormater=function(b){e=b}}function t(){var a,f,e,b,g,
l,q,w;this.getJqUi=function(){a||(r(),y());return a};this.setSelected=function(x){f=x;a&&y()};this.getSelectedModel=function(){return e.isChecked()?g.getSelected():w.getSelectedModel()};var y=function(){if(f){var x=f.getVariateType();x==h.AbstractVariateAdapter.VAR_TYPE_SYS?(e.setChecked(!0),g.setSelected(f)):x==h.AbstractVariateAdapter.VAR_TYPE_MACRO&&(b.setChecked(!0),w&&w.setSelected(f))}},r=function(){a=$("<div>");var x=0,H=new L;e=new K;e.setChecked(!0);e.setText(A.get("systemVar","\u7cfb\u7edf\u53d8\u91cf"));
var k=e.getJqUi();k.appendTo(a);D.layoutCtrl(k,0,x,200,23);H.addElement(e);e.addCheckedListener(function(){q&&q.hide();g.setEnabled(!0)});g=new d;k=h.VariateHelperFactory.getImpl(h.VariateHelperFactory.SYS_VAR_HELPER).createSysVarAdapters(B.SUPPORTED_VAR_TYPE);g.setItemModels(k);g.setSelected(k[0]);g.setCustomPainter(function(z,G,u){z=u.getDisplayName();G.attr("title",z);u=$("<div>");u.text(z);u.appendTo(G)});l=g.getJqUi();D.layoutCtrl(l,0,x+=43,200,23);l.appendTo(a);b=new K;b.setText(A.get("macroVar",
"\u5b8f\u53d8\u91cf"));k=b.getJqUi();k.appendTo(a);D.layoutCtrl(k,0,x+=43,200,23);H.addElement(b);b.addCheckedListener(function(){g.setEnabled(!1);w?q&&q.show():(w=h.MacroVariateSelectorRegister.createSelector(),f&&w.setSelected(f),q=w.getJqUi(),D.layoutCtrl(q,0,x+=33,465,290),q.appendTo(a))})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing=
{});"undefined"==typeof com.kingdee.bos.qing.modeler&&(com.kingdee.bos.qing.modeler={});"undefined"==typeof com.kingdee.bos.qing.modeler.common&&(com.kingdee.bos.qing.modeler.common={});var h=com.kingdee.bos.qing.modeler.common;h.VariateHelperFactory=new function(){var a={};this.getImpl=function(f){return a[f]};this.getAllImpl=function(){var f=[],e;for(e in a)f.push(a[e]);return f};this.registImpl=function(f,e){a[f]=e}};h.VariateHelperFactory.SYS_VAR_HELPER="sysVar";h.VariateHelperFactory.MACRO_VAR_HELPER=
"macroVar";h.SysVarAdapter=n;h.VarSelectDialog=function(){J.call(this);var a=this,f=this.protectedMethod,e,b,g;(function(){f.setTitle(A.get("selectVariate","\u9009\u62e9\u53d8\u91cf"));a.setSize(500,540);f.setSelectable(!0);f.setContentPaneCreator(function(){e||(e=new t,e.setSelected(g));return e.getJqUi()});f.setClosingChecker2(function(l){if(l=e.getSelectedModel())return b(l),f.destroy(),!0;f.getMessageCurtain().showPrompt(A.get("noVarSelected","\u8bf7\u9009\u62e9\u4e00\u4e2a\u53d8\u91cf\u3002"));
return!1},function(l){f.destroy();return!0});f.setClosingAction(function(l){})})();this.setSelectedCallback=function(l){b=l};this.setSelected=function(l){g=l;e&&e.setSelected(g)}};h.DropdownItemListPane=function(){var a=this,f=[],e,b,g,l=[],q,w,y;this.setItemModels=function(u){f=u;w=null};this.setItemsWidth=function(u){b=u};this.setText=function(u){e=u;q&&q.text(e?e:"")};this.setCustomPainter=function(u){g=u;w&&k()};this.addPressedListener=function(u){l.push(u)};this.getJqUi=function(){q||(q=$("<div>"),
q.text(e?e:""),q.addClass("dm-source-dropdownitemlistpane-text"),q.on("click",r));return q};var r=function(){if(y)x();else{w||H();var u=$(document.body),E=q.outerHeight(),I=b?b:q.outerWidth(),C=[0,E];C=D.upwardCoordinate(q[0],C,u[0]);E=C[0];var M=C[1];C=u.prop("clientHeight");var O=Math.min(20*Math.max(1,Math.min(f.length,10))+2,(C>>1)-10);M+O>C&&(C=[0,0],C=D.upwardCoordinate(q[0],C,u[0]),C=C[1]-O,0<=C&&(M=C));y=$("<div>");y.addClass("dm-dropdownitemlist-popup");y.css("position","absolute");y.css("left",
E+"px");y.css("top",M+"px");y.css("width",I+"px");y.css("height",O+"px");y.css("box-shadow","0 0 2px 0 #ccc");y.css("z-index","999999");y.appendTo(u);I=w.getJqUi();I.appendTo(y);I.css("position","absolute");I.css("left","0px");I.css("top","0px");I.css("width","100%");I.css("height","100%");w.scrollSelectedToVisible();u.on("mousedown",G);u.on("mousewheel",z)}},x=function(){if(y){var u=$(document.body);u.off("mousedown",G);u.off("mousewheel",z);y.detach();y=null}},H=function(){w=new c;w.setItemModels(f);
w.addPressedListener(function(u,E){x();for(var I=0;I<l.length;I++)(0,l[I])(a,u.getSelecteds()[0],E);(u=u.getJqUi().find(".sa-ctrl-list-item_selected_enabled"))&&u.removeClass("sa-ctrl-list-item_selected_enabled")});k()},k=function(){g?w.setCustomItemPainter(function(u,E){g(!1,u,E)}):w.setCustomItemPainter(null)},z=function(u){return D.isDescendent(u.target,w.getJqUi()[0])?!0:!1},G=function(u){q.is(":visible")&&(D.isDescendent(u.target,q[0])||D.isDescendent(u.target,y[0]))||x()}};h.VarSelectPanel=
t;var A,B,D,J,L,K,d,c;(function(){var a=com.kingdee.bos.qing.framework.common;A=a.MultilanguageManager.createPackageAccessor(h);a=com.kingdee.bos.qing.modeler.common.model;B=a.SystemVarType;a=com.kingdee.bos.qing.common;D=a.DomUtil;a=com.kingdee.bos.qing.ui.component;J=a.AbstractModalDialog;L=a.RadioButtonGroup;K=a.RadioButton;d=a.ComboBox;c=a.List})();h.VariateHelperFactory.registImpl(h.VariateHelperFactory.SYS_VAR_HELPER,new function(){m.call(this);var a=this;this.switchSQLToDisplayMode=function(e,
b){e=f(e,!0);if(b)b(e);else return e};this.switchSQLToPersistentMode=function(e,b){e=f(e,!1);if(b)b(e);else return e};this.getFormatText=function(e){return"'"+"@%s".replace("%s",A.get(e.getI18nKey(),e.getDefaultDesc()))+"'"};this.loadVarModelAdapter=function(e,b){for(var g,l=0;l<B.SUPPORTED_VAR_TYPE.length;l++){var q=B.SUPPORTED_VAR_TYPE[l];if(q.getTypeID()==e){g=a.createSysVarAdapter(q);break}}if(b)b(g);else return g};this.createSysVarAdapter=function(e){e=new n(e);e.setDisplayNameFormater(function(b){return A.get(b.getI18nKey(),
b.getDefaultDesc())});e.setUserSQLFormater(function(b){return a.getFormatText(b)});return e};this.createSysVarAdapters=function(e){for(var b=[],g=0,l=e.length;g<l;g++){var q=a.createSysVarAdapter(e[g]);b.push(q)}return b};var f=function(e,b){if(e){for(var g=0;g<B.SUPPORTED_VAR_TYPE.length;g++){var l=B.SUPPORTED_VAR_TYPE[g],q=A.get(l.getI18nKey(),l.getDefaultDesc()),w=l.getTypeID();l="@%s".replace("%s",b?w:q);q="@%s".replace("%s",b?q:w);l=new RegExp(l.replace("(","\\(").replace(")","\\)"),"g");e=e.replace(l,
q)}return e}}});v.VAR_TYPE_SYS="sys_var";v.VAR_TYPE_MACRO="macro_var";h.MacroVariateSelectorRegister=new function(){var a;this.registerConstructor=function(f){a=f};this.createSelector=function(){return new a};this.isRegisterComplete=function(){return void 0!=a}}})();
//qingVersionTag: 20250324