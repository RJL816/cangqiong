var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(n,X,Y){n instanceof String&&(n=String(n));for(var ia=n.length,pa=0;pa<ia;pa++){var J=n[pa];if(X.call(Y,J,pa,n))return{i:pa,v:J}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(n,X,Y){if(n==Array.prototype||n==Object.prototype)return n;n[X]=Y.value;return n};$jscomp.getGlobal=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var X=0;X<n.length;++X){var Y=n[X];if(Y&&Y.Math==Math)return Y}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(n,X){var Y=$jscomp.propertyToPolyfillSymbol[X];if(null==Y)return n[X];Y=n[Y];return void 0!==Y?Y:n[X]};
$jscomp.polyfill=function(n,X,Y,ia){X&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(n,X,Y,ia):$jscomp.polyfillUnisolated(n,X,Y,ia))};$jscomp.polyfillUnisolated=function(n,X,Y,ia){Y=$jscomp.global;n=n.split(".");for(ia=0;ia<n.length-1;ia++){var pa=n[ia];if(!(pa in Y))return;Y=Y[pa]}n=n[n.length-1];ia=Y[n];X=X(ia);X!=ia&&null!=X&&$jscomp.defineProperty(Y,n,{configurable:!0,writable:!0,value:X})};
$jscomp.polyfillIsolated=function(n,X,Y,ia){var pa=n.split(".");n=1===pa.length;ia=pa[0];ia=!n&&ia in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var J=0;J<pa.length-1;J++){var wa=pa[J];if(!(wa in ia))return;ia=ia[wa]}pa=pa[pa.length-1];Y=$jscomp.IS_SYMBOL_NATIVE&&"es6"===Y?ia[pa]:null;X=X(Y);null!=X&&(n?$jscomp.defineProperty($jscomp.polyfills,pa,{configurable:!0,writable:!0,value:X}):X!==Y&&(void 0===$jscomp.propertyToPolyfillSymbol[pa]&&(Y=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[pa]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(pa):$jscomp.POLYFILL_PREFIX+Y+"$"+pa),$jscomp.defineProperty(ia,$jscomp.propertyToPolyfillSymbol[pa],{configurable:!0,writable:!0,value:X})))};$jscomp.polyfill("Array.prototype.find",function(n){return n?n:function(X,Y){return $jscomp.findInternal(this,X,Y).v}},"es6","es3");$jscomp.polyfill("Object.is",function(n){return n?n:function(X,Y){return X===Y?0!==X||1/X===1/Y:X!==X&&Y!==Y}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(n){return n?n:function(X,Y){var ia=this;ia instanceof String&&(ia=String(ia));var pa=ia.length;Y=Y||0;for(0>Y&&(Y=Math.max(Y+pa,0));Y<pa;Y++){var J=ia[Y];if(J===X||Object.is(J,X))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(n,X,Y){if(null==n)throw new TypeError("The 'this' value for String.prototype."+Y+" must not be null or undefined");if(X instanceof RegExp)throw new TypeError("First argument to String.prototype."+Y+" must not be a regular expression");return n+""};$jscomp.polyfill("String.prototype.includes",function(n){return n?n:function(X,Y){return-1!==$jscomp.checkStringArgs(this,X,"includes").indexOf(X,Y||0)}},"es6","es3");
$jscomp.arrayIteratorImpl=function(n){var X=0;return function(){return X<n.length?{done:!1,value:n[X++]}:{done:!0}}};$jscomp.arrayIterator=function(n){return{next:$jscomp.arrayIteratorImpl(n)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(n){if(n)return n;var X=function(J,wa){this.$jscomp$symbol$id_=J;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:wa})};X.prototype.toString=function(){return this.$jscomp$symbol$id_};var Y="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",ia=0,pa=function(J){if(this instanceof pa)throw new TypeError("Symbol is not a constructor");return new X(Y+(J||"")+"_"+ia++,J)};return pa},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(n){if(n)return n;n=Symbol("Symbol.iterator");for(var X="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Y=0;Y<X.length;Y++){var ia=$jscomp.global[X[Y]];"function"===typeof ia&&"function"!=typeof ia.prototype[n]&&$jscomp.defineProperty(ia.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return n},"es6",
"es3");$jscomp.iteratorPrototype=function(n){n={next:n};n[Symbol.iterator]=function(){return this};return n};$jscomp.iteratorFromArray=function(n,X){n instanceof String&&(n+="");var Y=0,ia=!1,pa={next:function(){if(!ia&&Y<n.length){var J=Y++;return{value:X(J,n[J]),done:!1}}ia=!0;return{done:!0,value:void 0}}};pa[Symbol.iterator]=function(){return pa};return pa};
$jscomp.polyfill("Array.prototype.keys",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(X){return X})}},"es6","es3");
(function(){function n(){this.setWidgets=function(ma){};this.getWidgets=function(){};this.removeWidget=function(ma){};this.getWidgetCount=function(){};this.setGridEventListener=function(ma){};this.setDroppableEventListener=function(ma){};this.setStaticWidgetPainter=function(ma){};this.setChangingWidgetPainter=function(ma){};this.setWidgetDefaultInfoGetter=function(ma){}}function X(){var ma,ra,T,sa,ya,Fa,Z,za,Ha={};this.setId=function(qa){ma=qa};this.getId=function(){return ma};this.setName=function(qa){ra=
qa};this.getName=function(){return ra};this.setType=function(qa){sa=qa};this.getType=function(){return sa};this.setDisplayName=function(qa){T=qa};this.getDisplayName=function(){return T};this.setX=function(qa){ya=qa};this.getX=function(){return ya};this.setY=function(qa){Fa=qa};this.getY=function(){return Fa};this.setW=function(qa){Z=qa};this.getW=function(){return Z};this.setH=function(qa){za=qa};this.getH=function(){return za};this.getExtInfo=function(){return Ha};this.setExtInfo=function(qa){Ha=
qa};this.addExtInfo=function(qa,La){Ha[qa]=La};this.fromJsonObject=function(qa){this.setId(qa.id);this.setName(qa.name);this.setDisplayName(qa.displayName);this.setType(qa.type);this.setX(qa.x);this.setY(qa.y);this.setW(qa.w);this.setH(qa.h);this.setExtInfo(qa.extInfo)};this.toJsonObject=function(){return{id:ma,name:ra,displayName:T,type:sa,x:ya,y:Fa,w:Z,h:za,extInfo:Ha}}}function Y(ma){function ra(l,B,M,R,Aa,Za,Sa){var Wa=R.id;B=R.type;if("QingReport"!==B&&"Dashboard"!==B&&"Square"!==B)Sa();else{var db=
R.x*Aa,Na=R.y*Za;if(Na>M)Sa();else{R=$(".qing-grid").find("[gs-id='"+Wa+"']");M=R.find(".qing-grid-item-content");R=R.find("iframe");var Ba=window.devicePixelRatio||1,Da=R.width()*Ba,Pa=R.height()*Ba,Ya=0,Ua=0;M.offset()&&R.offset()&&(Ya=Math.abs(M.offset().left-R.offset().left),Ua=Math.abs(M.offset().top-R.offset().top));if(R&&0!=R.length)if("Square"===B){if(Da>Pa&&2<Da/Pa){var Ga=.9*Pa;var Qa=2*Ga}else Qa=.9*Da,Ga=Qa/2;var b=(Da-Qa)/2;var c=(Pa-Ga)/2;var e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAABzCAYAAACMwX5LAAAxuElEQVR42u2d2ZMc15XeGeEX+8njN79NhP8Ehx3hcNh+cDjmwX5w+NXhsF88dngmJrRaGlFD7WPPiNYyQ20cUhIlSrY2AgRIgrvIIUgCJHYQWwPo7upauqtr33PP4/Odc28uVdWNbqABEcS9EaczKyuza8tffuece+7Nh8g111z70LWH3FfgmmsOTNdcc82B6ZprDkzXXHPNgemaaw5M11xzzYHpmmsOTNdcc82B6ZprrjkwXXPNgemaa645MF1zzYHpmmuuOTBdc82B6ZprrjkwXXPNNQema645MF1zzTUHpmuuOTBdc801B6ZrrjkwXTuwlqYJG1GSpGJpquaaaw7Me4Og/E2SRCyOE4qihMIwJj+Iaebzki0IItmG57APLDXHLPt/rrnmwNyXEqbZUhVRIQN0QYClgpmySsZxSqNJSuOp2mSW0Mxj8xPyPAUXx1hQLdxFdXUq68B07RZAwhSiVOBTZUwyFYTLWmxxTAxkwkCmYhbQHFS1KQPrMaCqrHGmrEmclkAFow5UB6YD0YAA4BTEHBoBx0CzU5sHc96WQQpVnRrzfMCaUMCvGUZ6QRAXOE0XlNU1B+ZHWhHtSW/dU1XEWKAoJnL20m4FZhnSZEdFtbDCDRYX2E+NsuZKXXz/dxPW+dexF6/8u9NtrjkwD+Rks+6p70cLMNoTcL9tP2DeSlFz4/9n4tWJUVVYHt/Ge4J1Ea48g2zNxr5F1z134fV7gmliKzEGj0K/T6fmDsw7ANIqo7qoB6k6dwrmUljnXeAMVlZVT23GquqxqiJmjQqud9liscAkoIJCjGvjXOsxFLPJxXi6HP+WTYGOF+Ju1xyYt4QSJ1xsEix3o90NMPemqgV19VKazWJ2hWMDo35eC5jNLB/890uZerrmwNzjSZMncu5muxdg7hXS0SS55xc+23frmgNzX2oJ1+2jBOZuNuL3cS9rF+DCarzuwHRg7uukcWDeCzARr8JDcc2BuQdgNNGBrod7DebUKxtiwI82mInLzjow9woMoIzE7jqYgNFXCFGKt7kV0eZmTI3NiGps3R7qaR2YrjkwDwTMyTChQTumYYetG9Ogk9tklGSxbJefq9ciqjcAZESVSkjrbFiurgdU2Qio1ghpOE4E0DuFdMo2m1PhqXnswHRgfiTBnI1TGjQjGmzH1GHIOgxblxWwy9va/LjNjzubCXX4cZf3abNtAMQ1BnE9pI2NkKqViKobEW1UI1pnKNcZzvUKAyqPI7rJ67eCc+YpwDMvh85CudWJaK0RUGeQyPNwpWst/r+bwR6/G76YjCMHpgPzww1mgAobdjeno5j6cD3Zelu67LJLasEc9RIK2FXtbUcK5lZMrS2AGNDGusIoUBYMIFb4+XWGco3BRZfGdNeYMxH41uqstrWQblZDqjdZbSflOHazzSCyCm/z+661QrrBoF6vB1Rth9Ts7fyZEwao0mYF74XUm8YOTAfmhwNMqWaJtHKly+4n1nt1VkiGbAZXk93XEbuq/WasaslwjtlVDTy4taqgna1EwW0CzJgBDAVMWI0B3KioVXkdKgq1XON9BqPdocRzNQb9Bu+7xlA2WI1Hk3jpMRLPeqqgdh22l4bP3hxE1Ojze2NIZ0HqwHRg/u7AxBCrPitge5WhqsYCps9KNGDAIj65ZgOGk1UzDlMBFLHlpB+boVkpjRjQDkPcahhAGdrWJoBkxVxjCNmqBlBYhW2dwaywm7u2FlB/cOtuFZTZNZA8YlXu83vZRnw72UvsmVB3qEPLZHjZLtU4Hupt+fMMpvweOwENPb7w8P7YvlOQGsb6vB/lEDowHZj7bKnpLimDCXd1yCoE6ADmlEGc9lnFGJgxu6kRK0fIqtNnMLAt4HUopa0FxXLKqjfhY5AYQkJou86KyeBlYFYUzmoBzHXevspg9gZ76++cFuLK6WxvULb5AnK9xq/BMHdHrPLeYr/ilN3wMUO4wTBWu+yCd0JxaWF4DPXcCcz2CBDzfsYFnqKg3gwIcGA6MHdwqbTbIopQu0lyomD41AAn6ETBBHQDBm7SYUVhuLyxnkjeUN1XsRGrAtuwxSc3A9dhRe2xIkY7uHpQUmRoq6sK5oYBEq6tuLcV48ry841Nji/Ht1eIcKuYtNXn+JX//2YnvwgNGZ7hjF1hNlmfJlRn+GoM1ybD1eBj6j01rOvjUNRzMMstMMoLxWwO1f3t8/aZGY4WODAdmOU4SUH0GcSZz4B5vGSbTElGYwxZOdrdSOBE89kd7G0wcDAGZsoKOWZIewyfqCirYLemajpqc4zZ4McNgBlKzDnuaQw6f/5N2RXeYPCqBswaA1nbiMSqG+gyYdVcDaQvc+rtD0ZkZdHFAre2zQCVx2+mMtqkyaq9Wg9otREKpKJuiB8ZwAZ//i3Ax+uAEo9lG0O4mcHI67z/1kCX9T7UM6AaG0Bt8ffX49fpM9wWzC7HvYCzz67wlC10YDow4VUGDON0pjaR4VBUsES2j8YMIJ9YA3bxxhxDDrcYNIYF7umIH/fYle3w4wErIuJOwNljGIdNdWnh2iIp1IU1chv3kx3BhNUr2l1Sg20YN/Z6QO3O3sEEkHVW9zriV7a1akDNVqj9l6YfFOuAtd1PpLsEAFf5GKhnQzKzoUDZxOMuVDISK4JZL4AJa1g4oagweRxmwDb6qrSbZr05DNkj0WFjDswHGMwikNZm1rx8iZN2xO5qj0+oHitKnwHs11Qd+w0GcINPJBNLybY6DCAm8vyAIYah68QbJ6KWHoM+NFlZJIXIRGNT3i5grjKI6wokYs4qXNgbfALz/5766Z4LCzy+KFRZ/So1awpmhVVxvc6P+Tks1xsBrdW1P7PC76nCyn6TY0y4s5sMH8Bs8vuGogKyeTC35hRTIOwZWPuB7gslHcIMkBZgA/b2wIH5QIMZI+kytepozDOPPWPTfClgMlBQzB4qdQAeq+GA4ezXDKTVSAxq2ed4Esop3SaNRLfxstfI40t0qwxbpo8TytpWOOHeVm+yq7hmVJOBBJz1akgesrt8/Dar8er1kNZu7h5nQlE3GMb1jRzKDX5P61VAycaPZVkHlNYQXyqgN/lxk8FsdrQvc4uVssnKtlVwYxVMVdOGsS0DZkPgVYht7KlgRkYtQ7MtFCXddor5YIKJ3xoxpI7cz/vqRB0LReKzOZvy8+j/6w3YneWTFG4r4BMYNwyQ/LhfU+tlFokNjGsLJfUmug43Fn2b6GIZtOJC4imlFseAG6yOG6yalZvqck6tOvL76bS1Ogj9mLagvT9MFuYDqvL/RgnfmpTwAchQCxP4Mfo1VTmx1OIDALtaA6iRxJk32FB4sNkOGMZI1bODeDNgM7GmJH9UEeu8rdbNXVp1YTW+bPTKbm4N23tBvh+rKvpCHZgPGJgxh3K+TwreLDHQ2QmrDJizpNDRnpTgHE+MKwswN6CaiQAqAFZVRbE+qBehjGnEEMZGJZG9RVXQqJ0InHBrpxyzTod5nInytg6rcm1V4dysLknSeAVQjdX59QVadjUlwdOMpK9TSvg2tPAd28SVBZhQTQYSLi3W1wTKUFRzHUsGVFxZji+32pGC2TVqKXBqrClJIauKnbmsbFefEzBlvRx31qVrBTCH6u72nWI+UGDCdc2qWgCcWA7ftFDIPSus58tETpgunzg9Pon6DAvAtAoJV3bQUEXUpa73ePu0W547Fl0igBVu7rCpcIZ+WgBTR5f0GKTtrVguCHtN8DS3IlFSqOcWQ4h623VTAN9iuKD6mStb1VpbiTWhpLVAyvbWM1P13GLwUEvb7NqlAmpjz02TqbXxJgyASZbWuLYW0M2+Jn+2TFyJ/s7uJJJuGGvTmcvKPhBgok8SlSuqhtofObVq6SUmI5kU3Fbd7vk5lPNgDqCMEmNGopADAROmjyXGbGgCCACP2fVMssqZlAJ2M0etWGJO9G/2GEDfTOORjcf00n1lXTEsDDEn4k8kfODmooSvzQqKJbo+tjmm3eD3XDEgYrlR17pbuLQSh0pCiB83LJiRxJnb/LlRNYRaWoEVQHZUSSVb29MEELK220PebxCJSVLIJosMlFsmKwsQiwUIgPEgCgzyGfzUU0qSB+cmEvcFmBJTBga2mULo+Tl8M3FtzS0IrPu6bJunfXw9gNmBYsaijACzVwSzrvFkDiargHkMlZzwiR35WnwAtexLv6Yu+5uJwIkTaD8zGABeDBFbQ0y6rn2ecFtRQidjOBuhjErBmM6Nqq5jWREwAwYzzMGsR7q9EWUJoSbc2LYFM8rAFKXsauy5zfBVmiFdZRf5ArvP51Z1eRku83YoySGronBjEUviMfo048JMBfBsUFl1O2DighYEfBH2c5sZs4/9QPeJYgfm7xTKMCIDmJn42IBZfKzqWN7HQjkrAAqXsj9AFpRdLY75+iaOHBiXVUA1rqwoJ2CT7pRI4WxoP6YPoDradYJ9pG+T/1e3GkkiaDzYfzXPkNVxwMfdXAmpiaFlrJI1ZGClICGQogSsQy2REELMucEAbmRgGgWtGdcW7m7NKGZblXFbXFlWQnSdtEPThcLKx+vnGcL3rgR04opP71726R0sxXjbVU9A3WiF0h1iFRPZ2rrpuwzi26uV1QsvZV7NpJRp137omWe7vOxs9fk6Zqz/qHnMH3owUd6F0f962wC9YqK2U9TSN9s8MpMfk9mWFp7PjxMw0V0CMDkmini/7rpmXHt1k3ltFKFUBUXsORQ1VCWV7pO6wor6WSzh5tpzI0C3DArdb2fqEFPZ0+snOo7TFCZUZOhYIO4soMRQMgy0VpeWH9eNctZM94nAarpRaqqY2xZMqGY3h3KD1fDkJcDo0QmxgNfZrgZ0kg1gvnvFY1AZ3GserTbRJQLFDLP4E10mtkB+r2AmkshLSv3PE5iBEEk+lFLGEbqlENfjID0OahmFuo9Uds30N04SB+Y9UUstq0tVDQ10nlVNz64n2T66NOtWWf081pxMWfUG7JqOwux1Zn2GrRKVsrLintYUQnSjDIxqDux2A7MFFdVDGCIWMlxQzU4VQ7+ifcOJO4ShACErgMdMB+uBGZWipXwVGWytg6zRtyn9m1XN3K4VTJQTWVq2LY5Lmy24swxmS91YxJyVJqshQ/nOJY/eZTsJdWS1PAEIr6oBSgD7Dm9/m/d5b0XhbErGFhZQgyEN9gEm5pzVZJ0WfswESHMBNhn3PnsQeB9PPD+jL/1kTJ/43og+zvZnPx7TY4em9NL7AbV6Whfsm+6y6TQRD8uBeRdbECpUelVMSutIjHi2GyTIu0M8O8J/DkzfV1VVMOHK5mBOe7Hpx0w0C1s3cWdN3da+6T6xStqz/Zx1E1fydsSaMLi3ZFIh49soTMcQMAyaRldLZTVUQ3cJu5GNuk5LAhVVONmN5NizscXqh/GfcGc38hkRtBihAKaJM+HCotgAkJ5dYfA+YLW8xOrIAL7H8B2/6NErp3168X2PXj49o7f48fvXfFHMdwVQdmtvBlL4DuXc3IdiprZ0cj6Lbizg37LL38Gb5wP60k8Zxu8P6bNPjOhzPxzR53+k9jCv/+mTI/rUD0b0P/9mRIeP+/xZErmvi2cARQx6P7u3D32Y1VJjxrQUV+bbDIh+2ey2/LjisbEmf6RkLL+sYoiXVcy+VUxbeFDXiiBkZiU728j7NkVJWTFng7yUr9Rdst/pK/k9r11jmFgxUZBQ5/+/zbAjGYQ5g3qs7OhKETcWVUQMJRJEgLk/jCUxJApaVVWFSws4V6WmNlI4ARMvW6x0NxhacWFFLX2B8vUzHv3g6IS+yAqFk/4RVqe/Ojyh355jNb2q7i7iTri46D7BJaiDgQF8oYuS3cEUKAPKgFQoKYMTF88KX2CePDajzwDGJwHiWBRyJ3uYQf304yN69NcTurAayf/zDPT4ze9XOD+0YEaxKp2tJUVWVlTSPM6WQcEsgEFaOs4PcqhtVrYEZg+xZpwVFkg/pq0AMmCqYub9nLZcD8UG6ZJ7dNwumOsroQwXazBUKNODCiHebLcjGViNWt+amQFhzQy0lkHXKECoaLwJKGVZ1SqhNQMmbBsuLMfDrW5Ml1ZVLeG6nkSy5wOPHnt2Igr18A8VCijUZxjQR381lv3O3AjEpT3LiokB2H6osx4EUVKIHRfBVChtVVbxXivqtuK5Kl+EvvPsVF4Pr7sbkEXD+8R7/vP/O6Fz18Ms7NHE0P0J54cWTBlxXwCvCKZ9PLNxZ+E5PyjDWgYzlft4zIOJmQmQcUVsOGzEJpbMXVdxVTfVAKNCi2FhEUVhumPa/3bA7HZ0VMom///WthYnbGMeoS5GxeiIERQeYHA1gN3aAoih1NJubGhFELpSZFnTbhPAud0KxYVtdbQfs8l2gSGDUp68rNnYY+/NxEWchwInPrYffntGN/n7OMMnP2LPSxuBxJhwaf0w3hVMzawXJhPz80nFAOWAL0JPvrB/KOfh/MtfTmh9M5KkUfb/QwfmwRUTIC4EVL6xAmR2m70N3cJzOxynismgoch6XP61oHr9Wt53mYNpIIRaCphGUXmJAoOdkhu3C2YD2ddVLX7fWFP1BKhwa6emMB8wtttxVtLX7mAeITMAu2rArCqY6EbBesvEmAAT1UNbfFE5t6KJHwvmL387Efd12UkPBf3xy1Na49e+xt/TKT72Emb1kxkLUpnMaxmYkCvxfrLQg8pg+urC/u2FQF57GZRwV/HcJzmm/OT31XX93A8X3dzPm/1+/vpMpl3R31xd5fvtBkcfSjDxQ+rtz1NxlTAaw8tg1G2ZFeJLWTfbisd5BUDh3gyGcAmXX0bhrmq3iUn4QB3NiBNb6N6pAMxkxxkMbhfMGb/fynUdKlZfV6vZuYLWtOgAgGIWhFo1FJdWBl5jWdWM7YaNL5EgqmqfJ1xZFNTDlW1BNdF/ySp8fkW7SQTMSwEdOj6Vk37xhFcwn351KiNWbvB3Apf2Kiv1slvtFcFMkmJ/c5Il8az5JuxATAvYlik1YDv01owVPqQP+Lt48X1fsrSIQ+dBFoj5M9yso1Y3zV4TyzhxYN5R84O4lNDxi1D6cRnEAnieHy+Cmj0fy4+DGs4egzmZLM+pS/Jnw/RtVjVbi8m4SurKNmHXMvIOEEz+XxUGZeMmjEFbi7QAXiwwS1MVZCf1Wgtk/iBsk4TQuhYhQD1RwtfkmA3Z2TXe3mQQm+ji2GZXFn2abOLKXuQYk+NMgHn8gk9ffXpcyICqCuEx7AV2dQHmBX5/Z6/ryJRl/Yb5TYUS/U2CPBmHQoK88EMnMzt5NZTsaxEyC+XXfj7J7lYm08QwbKhTRsb+iWNTcV/njwPIv3zTMzf1pew1gzBxYC5mWfPbges8PDppUxAl2R2IxRKFLAhSM7Ob/giBXc/iR3PDVVFC/dIBIPYtHuebfXQ9V8ydwFQ41WW1YzMtmHhvcZS/T5klL9Ll7YOZSJIHEFZZEWo3ohKY1cwUTpkBYV0n91IwA6mrbbUYQvNYYK1oxlbuPu3l2dKtLYUT7u8KA33yosdgopuEwTzv0V8fHtNXnlYgAQaU8gusTk+9OBUX8RxfOK6zK3sNfb7jZIdQJDUTniUS05ey5qUseSqXuScNYPPK91l+fUwihvPD88sZ9jDUY7/280WlxWNcYKZekoUwNvl3v5TxPXQvgMQXG2J2ukCvoOUujvwL980ty/OkjV5txWW165klGXTl9d2O05u4DoZBKfmz9H1jVvKKFg5obWwqQ7yQAIILO+nqlCTdirq7wTiVffYL5hiTZvH/rDGMGFhdlSW7rGZKktpaAVIzd1DVzIiwwSCiGgiz8KHOVtzZNVOEUNHpS2p1vQWDvCdkeHso9YNLG8s0JafYlT13LaQ3z3n03Dts787olVMe/fCFKX33yJQef25Kxy8GVG8ndJYvHP/vjRm9ed6nywx1vMMdoy2Y6DMWMOcScl4hIYcG8B+egwuq9xt2reMkyRJ6xUQelohfT1zxpD/z83Mu8Me+O6T+OMkuyJ4B9H4pPrh7YKZkXA4zn2mgX5Jacd0+VvML+2ocmYjd6jh77PLjrGLGopio+hndAky8d0zMJUO7KsaqOikXxmJCKVGsjj7QWV/rZtGfeTuuLBI4mxWjmDcVwroBsmqhXNOpSeoVM7FXRWdF0EmlQ+nfRFECpiypmNsyoPgdNxTCONBiNytOUKhsu43JoyN6i8F7/UwgRQUX+eLwPru1p68GdIX/96U1zOYeiUK+zep6lt3f18/6kpVttOMdwZx5kdQjT20xSDG8mAPzE99fjBU/ya7tqatT8aq8uWSeBRMX8WbXpz95rLeQMPrY94ZUa+ldre1rqmub3hdlew/dHZXUBE6mYgaUuwnm7sflbq2CeWvFzE4y/LCshsHEQGrK8eIgH/6FkSZ0JwUGyMYCQBQViFqGAmV9NVdLcV8LYNbNrRZqmYoyZAwQMraILVGMMDJjQOfv9jVlJdveRmY2FHfz5dMeXVpHUieS5QnEnSg84NjzCj9eMa7r2xcApMfqyZ7CKJHnrlV17qJ5MJH9HgJM00fpF7q8/EImHQ1ldgtgfq9HJy8NReXnFdMa3NLtnk//9dEmPfLUIphV/r30PNTXtCFQ/CCCidgL6fMyLItL62KUgCosi/sX48j9HldSUjOv7HDMMeZt3DwHkI62YnFhx3w1hjsLN3e4ycu2Dgfzh8ltJX8GHMfWRTFDo5ihqGbdgmln21tXKOuVfB6hmr0/irl5EVQT4A2Gy8EUcEZaZAC3tI8RN+z2XefjEENCLU9fC+js9VDAA5Swi/w+rlZ4/1GUXZRQ7D7g/7/WjEr/H91RmJFQM68Fd9RkSr0CmI88NSm5snBLP/vEkH56bEvdYntckJQARXv9VJs+9lh3IZsLVxYFEDbDb19zWZwpYz5T+lAN6n7ooJVSEzqapIFiyazcweJSXBEDsG5L9dhw8Ths2+24XCnLx4VRWnhN/R/4YcSVHd9erzNcXMxUMNwyJXlmvKZWCOnMep5xaSf+Pm5Oy/tWryH5Y9xZdJvA8HhVM7HSjVIpgMkxZs3M8F7fyGd6Xzc1tpr8WX5/zCt83GvsujZ7uXzg+8LseWcZTLi0l3mfK6jJZeVZ2Qjku6s1w2xOXjR872NW4Bfe8+X7j2JNyoxHkYKJcZlhkiX0/FCXNomHfb93ZFZK/gCsR56a0n/+8or8fjIKJbQJvzRL7KH90devMMjTcuIICStWUHTDyC0ezHE2oYhtkcnshnMeGLK+kfTLfoTADGObbFELo2IyppyE0efipbZ4XHyHx1mYNcYElOM7vN0crq5jMwH0oJ6Y4vbIFL9rLS0UsNdO9gwnit7XL7PiMVzjWSyxIUrYtmomMbRm+zZDWVbX8wxtjcFRMEOZ5MtO5LUMzHoLwGnpWqn/GIOym+ribjbDLAZsdbTofbf5AwDLG6y+K7VQKkQmk1AugOLKhqlJ+i0a/udrZ3wpHJiPEz/x3Q799/91sRAepAZ8bX/x1HX6H99siOIWj0P10FMvzUxXTVJ6PQuhrAcF2M1zxX2lcOJ3ROiBgRnLqAFVKWsWluWW7Pjc3TzO8yMBczK+/TotXMHh0vardhiYTnspA6xR7F7VmxPVV1i1tvdZZBCUJ+iSxFBVE0OSrV0Ns+IDdKHU2KrmpkWIQbuYQNpfckdp03DbPiRz1reWX5hwcm5u6S3+8H2hP3QTsxe0dFuDTVRzEpupP9KSC3iZFf2Fkz51eurKlpN+i4aLAbp0PvvkYmb2Cz+Z0h99c5P+7cdO09G3tqnR9qjNMeUbpzv0Hx85T//la6uyz3z1DyDH+4jjxdezyp1tC+aem9sX51Qc36dg6m0JykkYgSHU7g9JxBSgyV3NpATO8uOwLb6j40QtZV1dWQFzmtwZmNsGTDtwumbmBqrp0DHMZtBAvAj39GpIfcx6N2I3epjs+/4k29KdYlzatVwxbbZWu1S0b3LZ5NFj81m3+D28DPe1H9+iwCMRxZQ+3xHm4Y2og3ljWwooRqbgZkVQ0To/rjG4Uy/O3FjElc+969HldY4/2TMR9z9KSv3KxRAEz73KqqlVR4twfvbxLv2Hz12lf/HfTtM//8NT9O8+fYk+8Z3WUihRDfTEsRlfjLT/c74rrZiLsO9Bz6F4Lo9RzlPgf93LavgDATNJ7Befg2PVMyiAJB+6oF5BYV977LLj9NjbPc6+ZloAM5Cs4Z1ciNA1IrWzZo4gO7OeKGY9VjBvRGyhLKGeNbb6SrSgaHtR0fa2qmVjjf8vMrDsvjaMcqKrBY+hll6pYF+7SjDgGNsPve3tvfrK16kzcQELTYwI5YQh24rvYMCKKNNiAlDejlswtId6m8DpNJTM7gf8nqHO+O6jaD6zruuYpaI3jOn//GpCf/rkeGm97Bd/OqUvPz2jr/xsxuuzBffVFhZ8+ekJXa2GemOjUua+nJ0PCpl+QFnuels8TpXz3k1h8tBBqmURlgzSsACNKJqFR5fzMC87TtXw9o6zr5mDGatiTu60p5lP/A5DbkecNOzM7lr4DhVF1wfA3ISt6nq3lSzcon1+gmpvodQwkfl0oIoo2Vu7HtJNthVW4qtXA/rgMtuVgK6iz5FfFzWslyro+gjpAoNxgY9ZwTCy2f68BE2U8WccxQJhY1vVEt8jEj6Dke0njaVQAioFtQSA44kmiUKO64+844vr2x7EchEv/z65ImH2BFsGuGwc5udNYmj56BKtVHqe3WjpSpkLefJzMM09rLnn5tcXHofJPesDPRAww+zNz3+ouPCcWn7VzAGKTFC/03GSLdvhuLI66lVNkxQwXU+TNIPY89C/F+65H3MBRi/hE0zvplVnAJEdRTw5LAwTw3LIqtlkKJqrMW0zlNusbFv8GB6RjBIxU2d0+GSFi7nZjmW40jrHrtc2MFNdRBcZtDMrAZ1nsN5436f3LwT0OqveyXMBHX/Po3dO8fpZn46f8unUeZ/OMKTo3jjHwJ7+wKerpm8S/xP3K7nTZgvCddJsvvgMoyw5ot0QegHFbwcw5Y5fYSzfF0aloL4Wt/1bPPkBLG6wG9MPX5yy8gG2Ww+SzmHV0sFvPTOR10HMm3lKJcEonF9R0ZNKFz2spcfhM94b1TwYMKMkh0TK7xRAC0Nk4SvBlGTHReaYnY4r/f/548xr6rCeRPrk3rmS0KF3YDG9eTGlrZ4+J+Vdvp404+n+kj8Ynb+JW9uxQkJ9AIAs+eS/fDmUYgAACQUd8fLypZDOng3oFMdOJxmqNxmet4779CqD9D4D9MY5nVfnFEOEya9Q4gbFuM7/8+KqLm/UFKwaQ3uBwbvO+16+FNAqu8Y32C3GbHqY7hKGWQ8wsx5ulrSJUkE+ZjbL7wB2AIVc1OM4s9vXqUm227FM7tXpRTJ7AgZgY4kyPenHnOhtEqBOUEMMV0MBPD5zb5SUFMx6O6kUtAf05Z/qDApf+Ek+nch8oXqxyB5TkDzCy+dPePL66lUVRCAyXlNccKGta52FSea5Wx13j1TzwFxZXBnxAVCpERv1E3isGylXU93HghgXtu12nN1/2XH2MU6dC2sJ/c2LCX3rWY5XnlH71uGEvnM0oRPX1L0JglhizP2ACSir7TiD8TqrYdEus6KduxhQm5/fWo9F1S5hHh0G8vRpny4woOdPB9RosTuIGxANcVNZvQV7b6hLFIRDQVGtg8ypdHVMy3PibDG8W2scUxqzBQiIPVsm+4sJwODy9rp5N82yfszbaZhbCLf9a7V0hErLTIGJuYOwRA0ufiMpYGAo0WUSBFF2UcZJDXf3Zb5IXa1G8psBJO1TjA3AKf3opZl0eXzxJxP6ytNqX0ARwo9yV/bL8pzGlHBhv/HrqXgFUN6sj9Ik/TSciVUpYwtanPVh2tff6bgwigvPx/ekEP6OwYyNYi50Ywhkc90XsVHU+W6M+BbH7dT9kfVrpRxTpfTY0RzG3GL6xqGY/uJXMZ26nrtZsL02/OAKZUw3WA3hGlYwpIptlddXEM+xQj713IyarKC/fdcX1xaxZWOFY8trrKjXwvx27cXlHm/bjgQQVLnOFwHJ9q6ZKqGbGne2mppUam1qnydmQjgoMLc5tsSQsS2YjOvETAixmM3UigHOfiyjfvD9TvjiF4S5dwM47egc9KMeenvG22PJ2mJ7ZEaMIC7+6s/Kw8++yOr55z/ri335p8MsrlQ3dkyvnPG0PDIuWGgsu6gn+TZbTLBkv4XHYro/zp/oHkjmASim+t3yxSZqchWMCuuFbfP7xYVtOx0HUHc6Dj9yb5TSz9+I6eu/URi//WzZsO2bDOejv0mpw+qEjCHGZe6lQalWN3MokfH760MTKbL+0k9HkuZ/m9Xx5Xc9+hVf6VfYFZs146y7BDbkGAuDoG/ndu7zhe51jlklM7umXShQTNTZtrd1RoM2FLmblDK/BwGmwqmlfqKYMhNCnE3upXMJ6famuLUBf8dlMFVt8uogGEawtJHF9XVQtY5YSehnr01k2FfZbS3aKBuz+Y3fTI3yxiXvKnu9YohVCJtK+xW8uWXHlTy3KLl/XNm4cHWJi1eZqOB+FuJMu19ceG6n4+JdjsOPe6XKankkpm8ugbJo/5tV8+TVmDwvkMTEXtpgnIr7CjBRmvaD5yb0qcfzk+IrHN8cem1Kb57w6fz5kC5+EHCcmWiBwXXciiHZd/fIbnBuCYgAU8v32ltRltW1BfHzlUZ3CmYf9zEBmJgBYVvnD7IxZrZuYMVE0q2ugjmbRWXFNCFIpp4mR7DNKnuUvz+paYUjE7WpunaKvvZ0l1VzsksmdiyFCecvr6HujEIzzjcq5iBM33aW44jmzsNCuLTX48L7BkxzFURyRSBKzHqikFngbDwRm33tcXb/nY9LdjwOV9fT7KJ+/dfxUrUsGhT1ufc4zvTDPYPZZTCRIUUsuclK9MiP8woVO1r+uTc5prwU0NkLIZ05H9BkSyuBEBMO+smBQGmtsWq6YaDGa9p3uXB7v9nBginFCZvqznY6OpxLbwAci1sLMDFdCW67gGTQcKTVVRjFYmPH0sU7KlxczTmBLPd5fLbmgPz2m3w1+DUdfm2FwZvuCOZn+LnvPLNJ1HuGktFlc47Q4usVXtNm/7PXjuw5mex6XFw4LorvCzDtG1eg7BJ+eJLksObAGuiS4nHmcZIsOa7w3JLjcMadvZGym7o3MF88zSeLv3fFxKROGHVxk91YjKT4wo9HZjoLjYHw+KXjHl28yGCyYp7n5RgTdqF/c5Dc3m0SdrEOq7a1fi+5JZQHBSZuLYGEjl8Y4haifJD/NyqOttuaEMJAbBlex98vFDO0YMb62+beT1LyfAABZitYu3mBY/JDFDWP0KTxooQLUM1lavnJxz32Ghji7mFK2i9R7DUJYjb/evOvWYRU1gvn296OS+76XcfuHMwkXQDIAqYf1m43H9p+cBsrLgGzfFyuoMuOw0lyo5HQ915gV/bQ7mD++S8S+mA9lnrZ6R77MdHP+BbHkMfe8+i1s74UXH/9lxP69ONDSef/6o2ZqOQ59COeC6VLY8LQYATKeHawUJZcVW/vI1cOKiu7U0Mms9WJxFBthN8GYE49LUbQi3LREypAENsLLlzYAU02X6XO6mG6fOZZSrYP0fGTZ+njjycLYH76CZ+ePlZjtWQoW0fZeP/B2TyUKp43RUWMk8K2tOCx6T57O+5+ANNU/cdpWoIwgycl8+GWwLiX4xYel49D8olDRjr8LhRxZ9X8BkP7+LFYuiJm01BS+bu6sMNYRvBjOo23PsjHJq5txbIN6nnyckjnYBcChjKg908H1GFlpURHye97+sq7ZHcbTFFPhhN9nIAUXpQm2EIFMymAkuQX4vxCS6p0Xp3S1mGKto/SpH6Uzr7/GvWP/xP62lOr9Lkf+YX5gKb08BPb1Fp5mq+cz1HM+yfbDGbvLYrCsfyv4usVQ6RMJLLn80RjNPc+S6FVkpj3mdwfrmySJubuS5iUKtEJquxSphfJr4qJ6XyWdVi6x+PMscuPU9W83kjp+8diAbDcXaJdJuguubKRZldzjBNcfpkhqT7pseuGiY3RkDG086ki1kR2FoUG1xnUi5dCOs1KevJUQJXVwiTS8YMFpp4LqbnRLIPJFz58x4jZEntxjQvhiTH93c22yXUG7BlRQOoeI79xiOj1h+jC0X9Pf/wEsfs6Efv4k0THfvUwJef/NSXdlyntPE9x6wglnVcY7pYAtKfXs9uKgrDDcfZYu34fuLLalwlARdUyyx8LvNk2XU/S4nHJLY6jXY/TqrCUXjiV0reP5EB++9lYoPzmoZSOntDByFEUydXcK3SXoEQOJ9V3j0zkhq6V7Yjmz2TcqgDdJrbIAHa1EtN5zI/Daon5XUv9uw8gmMVBDZOZxphRFOe/YTz/W8+dL6PLDNghUcC4/SIltccoZTCT3z5Ev/jlj+hTDOSnf0j03Z+9RcNX/j7Re79Pcfc13v85ATPucpzpN/P/uevr5ZZY+PZ63P1Q+aMnobkSJfOWLNmWZsmdxE4BeQDH4cxrdif0g+dj+s5zET12JKLvPR9K0cFfHYlFUaUDGv1VUsgeyZQYGPnwNruqZ64Heyi1SmUKDswlA5d2HcUGazoB9KxbrqF84MGcRHJX6dj+TrHO1p4t7XrBk0pYMVNWzLR9lO0FVs/DFDOUBHvzIdp48R/TjWP/SrcxsOmFP6C48yrv+zy7wEco7b5Kid+S37H0eqXXTPT8KjwfF8+3HY9Ls+Pi5D7pLsmt8EHsPLI7GK5IxePS2z5OFTMJ2kzCMXr1xDo9yh6QVc1Hn0np2LtN8idNAQvu1c0aZn8LxFVd3Qplmv/b9N1o2tZJuuK5//Ggg4kCjgzM7Helhd9Tf2t1DVOvwYA9ywYwn6OUY8b43L+h5DVVTXpDDSoKONPqt9mNfUlBxnG8fxJNjGe15PWSwuulVHp+p/WymePuwdd5IN0lSWJAsVed7EugbH1hiecLx6W7HZfuchz25R8j7R8n6hwhf/sl+u6zQ/rGYeJ4k1hBQ7p+7X2i4Ut0fqUr5XXPv+tRfxhJ1vSOTkBM9DQ099Dk2BOz6TkwzfSVDCZmzVcwk/x3nfOG7DZZhkNWvd+q+rUYzI6qZnrmn1H85t+l2AAav/MPKVn5E1FVMd43wTHD83MQ2tdLFl/PnnOyrrDZ/ZYdl2T73pvpRg4IzPxD2+DfLovrxWXx+WX7ZPtlX+AOx+E9zCqSAEh7bxDd/E/0/oufpK8ylI8+Q/TK8fNUvfwL2r55iM5cvCwj7THqIQgOxh2RmeP5xAeg/iRxYM6BaVWqqFBFLyspeD7IsCfjKwKZdIGwi5qwIkrG9ebDlFz7Q0pX/phjT1ZKxKDtY7zfc7Jv2nlFvKaUqPR62Qz/C6+XLjy3n+Puixgze8PFx0T5j2IydsXn5l3Y3Y5LCv+/fJz+mDT5wMQZHJ+8/XsUs6vz66Ov0i+OvEbt439A05Wv0GTzRd7vBP/vWMZkwu5me+Bd2alVzGRHMJPCPNT2XE/iqXg/4prCncXv2jmm8WPvdV7CXtbtYkfFaHJt7vxYdFXTJa+XLg3JFo+zInnfzGBQjIPtemrcALJXQfOEugKJgS+58+NEPUMmgF0Y/HibP6b4b/+eJAumr/8ejV/7B5S8xY8rf0bUe1V+8DgKBUpM4e/AvNtgRtnA9eWqVM5VZKBEff69XiNqHZZ+SmJvCJaaZWYMLrV+w1/0hcy9vJXy0R7BXFTT+wzMpR+2IPe7rR/EcfJoepV/JHZ/+m9SfOIfSSySIjnwKtuJ3ydq/kzdouFpARtuLFytuxkrPOhg6m344tt3+9KAaPAe0fZvFFD+fQnKKMbr7B1Rm82rlgD7qLSHPhKfImzzFfYVoi67q91XKD37Lyl+4+9QeuqfEm09xc+9ztv5xwy2s0olgIl7ZI5Ggelvy6/sDsyDAjO583iMXVsaf8C/4RsMIv++vZcZ2BMM5AZ9lNtDH5lPwjEGdV5gO8Y/3HGiIV9tB28zkC+pO8TuLgcw2YkjdxXzYnG5hkOfej2fBoNAJoIOzHQYNtb9sIM5LkxTmdlEb++HibSQgfa8UBQMHf62siVPstnPmR4wmLHmAFx7gMFMmYTpClH/DQUU7g7iEKjlhK+4ib9w8sRm3B1OIqimzB4+DATQft9nSAPpiwvDJEti/K7BHBcAHE1imVR5CBtFct9P2HCA4WYBL335PMXP1O/rEtvgMeBCNDETZ+GzAqbQTIamQ6CSQgJnb/DarCz+z4fpfiAOzN9lQ+Jgtsowctw5u8lubmfHk8mebLEZrY6TEpAqqKGACVcXJzWWOIGhsmEYZ9VGdxPMefikWmmYA4j7fA4HgYHPF9AmMg4yB81+HrVYts1m+YVIbv4zUkgtwIOBeg85vIGBN5Tj8B3gu1KIc4BtsiSS2Qi1HM81B+add/ekeZGynWAMJx8gxYmpkAIAX05onKi2E/12wRT4pnrLvJFVvpEBD8o3KMOHJUCB2TGPvtzivghLnA34nS/E1nGFcT6BmngMcXZR0q6kKIMbpXX6evnntypswcV2fT9hBn2ekXXNgXnAkNoKEJxgOIn1xM2VZji0aqMnKEbsYz8oqQ77WpKIgfJN4gw+cS8HQaZQYnKy66TUVgFnM6uAcRa/hWFcGCGRmAqa+Y7z9BbbilUuZhRPlJTAta+1THUBr1XUySTILhQ6ObJzYx2Ydw9VEzclGaRQHJyoVl0UVBvL2SSSzkQOBewzgEguwRDjyT4GwvE4zNzE3P1UCEIzfWKesNEhdssg1IxyetsXo3ySbFoKcg4uFbyKovLmSl2s9nHNgXmPlVXrO+WOUkGUuYHTqSqHjU/VzSvCZxUwzhJLMvdqFGduph2/eD9lNPVCkZQKQFxzYP7O3V8LU2TvnxLEhdgvKSVKbLIkr/9NXfbSNQfm3Y9R83rfOE4W+gsdhK45MF1zzYHpmmuuOTBdc82B6ZprrjkwXXPNgemaa645MF1zzTUHpmuuOTBdc801B6ZrrjkwXXPNNQema645MF1zzbUPTfv/jNDn1ZCehycAAAAASUVORK5CYII=";
e.onload=function(){l.drawImage(e,(db+Ya+5+b)*Ba,(Na+Ua+5+c)*Ba,Qa,Ga);Sa()}}else{var m=["iframe"];html2canvas(R[0].contentDocument.body,{width:Da,height:Pa,allowTaint:!0,useCORS:!0,logging:!1,ignoreElements:function(A){var x=A.getBoundingClientRect();return x&&(x.left>Da||0>x.right||x.top>Pa||0>x.bottom)?!0:T(A,m)}}).then(function(A){l.drawImage(A,(db+Ya+5)*Ba,(Na+Ua+5)*Ba);Sa()})}else Sa()}}}function T(l,B){l=$(l).prop("tagName").toLowerCase();return B.includes(l)}function sa(l){return!0}function ya(l){eb=
$(l.target).attr("gs-id");if(null===eb||void 0===eb)return null;eb=eb+"#"+(new Date).getTime();return D(eb)[0]}function Fa(l,B){l=eb;eb=null;B.setId(l);var M=B.toJsonObject();Ca(M);f(M);B.setType(M.type);B.setName(M.name);B.setMinW(M.minW);B.setMaxW(M.maxW);B.setMinH(M.minH);B.setMaxH(M.maxH);B.setExtInfo(M.extInfo);var R=new X;R.fromJsonObject(M);W(R);B=$(B.getEl());ja?(M=ha(l),M=ja(Oa,l,M,L)):M=void 0;B.removeClass();B.attr("title","");B.find(".qing-grid-item-content").remove();B.addClass("qing-grid-item");
B.attr("gs-id",l);l=$("<div></div>");l.addClass("qing-grid-item-content");l.append(M);B.append(l);B.children().not(".qing-grid-item-content, .ui-resizable-handle, .ui-draggable-handle").remove();u(!0)}function Z(l,B){u(!1);Ja("dropOver")}function za(l,B){u(!0);Ja("dropOut")}function Ha(l,B){hb=$(B).attr("gs-id");l=$(B);B=D(B.getAttribute("gs-id"));B.css("width","100%");B.css("height","100%");l=l.find(".qing-grid-item-content");l.children().hide();l.append(B);u(!1);Ja("resizeStart",hb)}function qa(l,
B){l=$(B);B=D(B.getAttribute("gs-id"));B.css("width","100%");B.css("height","100%");l=l.find(".qing-grid-item-content");l.find("."+B.attr("class")).remove();l.children().show();u(!0);Ja("resizeStop",hb);hb=null}function La(l,B){hb=$(B).attr("gs-id");u(!1);Ja("dragStart",B)}function Ea(l,B){u(!0);hb=null;Ja("dragStop",B)}function Va(l,B,M){ib=B;da=M;Ja("cellResize")}function Ja(l,B){setTimeout(function(){P&&(-1<["added","removed","change","cellResize"].indexOf(l)?P(Oa,l,L):P(Oa,l,B))})}function Ca(l){var B=
l.id;if(B){for(var M,R=0;R<$a.length;R++)if($a[R].getId()===B){M=$a[R].toJsonObject();break}!M&&Xa&&(M=Xa(Oa,B));M&&(!l.minW&&M.minW&&(l.minW=M.minW),!l.minH&&M.minH&&(l.minH=M.minH),!l.maxW&&M.maxW&&(l.maxW=M.maxW),!l.maxH&&M.maxH&&(l.maxH=M.maxH),!l.type&&M.type&&(l.type=M.type),!l.name&&M.name&&(l.name=M.name),!l.displayName&&M.displayName&&(l.displayName=M.displayName))}}function f(l){var B=l.id;if(B){var M;ab&&(M=ab(Oa,B));M&&(l.extInfo=M)}}function u(l){var B=ma.getObject(),M=B.gridItemClass;
$("."+B.gridClass).find("."+M).each(function(){var R=$(this);R.attr("gs-id")!==hb&&(l?R.removeClass("qing-grid-disable-mouse-events"):R.addClass("qing-grid-disable-mouse-events"))})}function D(l){if(ea){var B=ha(l);l=ea(Oa,l,B,L);B=l.attr("gs-w");var M=l.attr("gs-h");ib||da||(ib=F.getCellWidth(),da=F.getCellHeight());B&&M&&ib&&da&&(l.css("width",B*ib+"px"),l.css("height",M*da+"px"));return l}}function ha(l){for(var B=0;B<$a.length;B++)if($a[B].getId()===l)return $a[B]}function W(l){if(Array.isArray(l))for(var B=
0;B<l.length;B++)$a.push(l[B]);else $a.push(l)}var L=this,F,P,ja,ea,Xa,ab,bb,fb,hb,eb,ib,da,$a=[],Oa;n.call(this);(function(){Oa=ma.getBizId();var l={id:ma.getObject().id,gridParentClass:ma.getObject().id,gridClass:ma.getObject().gridClass,widgetItemClass:ma.getObject().gridItemClass,widgetDragCancelClass:[".workbench-div-card-content",".workbench-ctrl-common-modallayer",".sa-extra",".sa-extrafilter-popup"],column:ma.getObject().columns,minRow:ma.getObject().minRows,maxRow:ma.getObject().maxRows,
cellScale:ma.getObject().cellScale,"float":!1,marginTop:5,marginLeft:5,marginBottom:5,marginRight:5,widgetResizeHandles:"se",widgetResizeHandleAutoHide:!0,widgetDragHandleHide:!0,widgetDragHandleAutoHide:!1,funAcceptWidget:sa};F=pa.init(l);F.on("dropped",Fa);F.on("resizeStart",Ha);F.on("resizeStop",qa);F.on("dragStart",La);F.on("dragStop",Ea);F.on("dropOver",Z);F.on("dropOut",za);F.on("cellResize",Va);F.on("added",Ja);F.on("removed",Ja);F.on("change",Ja)})();this.getGridOption=function(){return ma};
this.destroy=function(){F.destroy()};this.setWidgets=function(l){W(l);for(var B=[],M=0;M<l.length;M++){var R=l[M],Aa={id:R.getId(),x:R.getX(),y:R.getY(),w:R.getW(),h:R.getH()};if(R=Xa&&Xa(Oa,R.getId(),R))Aa.name=R.name,Aa.displayName=R.displayName,Aa.type=R.type,Aa.minW=R.minW,Aa.maxW=R.maxW,Aa.minH=R.minH,Aa.maxH=R.maxH;B.push(Aa)}F.load(B,!0);for(M=0;M<l.length;M++)R=l[M],B=R.getId(),R={content:ja&&ja(Oa,B,R,L)},F.updateWidget(B,R)};this.getWidgets=function(){for(var l=[],B=F.save(),M=0;M<B.length;M++){var R=
B[M];if(R.id){Ca(R);f(R);var Aa=new X;Aa.fromJsonObject(R);l.push(Aa)}}return l};this.addWidget=function(l){W(l);var B={id:l.getId(),w:l.getW(),h:l.getH(),name:l.getName(),displayName:l.getDisplayName(),type:l.getType()};B=F.loadOne(B);var M=l.getId();l={content:ja&&ja(Oa,M,l,L)};F.updateWidget(M,l);l=($(B).attr("gs-y")||0)*F.getCellHeight();$("."+ma.getObject().gridClass).parent().scrollTop(l)};this.getWidgetById=function(l){for(var B=F.save(),M=0;M<B.length;M++){var R=B[M];if(R.id===l)return Ca(R),
f(R),l=new X,l.fromJsonObject(R),l}return null};this.removeWidget=function(l){var B=F.removeWidgetById(l);if(B)for(var M=0;M<$a.length;M++)if($a[M].getId()===l){$a.splice(M,1);break}return B};this.getWidgetCount=function(){return F.getWidgetCount()};this.updateWidgetName=function(l,B){F.updateWidget(l,{name:B})};this.updateWidgetDisplayName=function(l,B){F.updateWidget(l,{displayName:B});(l=ha(l))&&l.setDisplayName(B)};this.updateWidgetId=function(l,B){F.updateWidget(l,{id:B});$(".qing-grid").find("[gs-id='"+
l+"']").attr("gs-id",B)};this.setGridEventListener=function(l){P=l};this.setStaticWidgetPainter=function(l){ja=l};this.setChangingWidgetPainter=function(l){ea=l};this.setWidgetDefaultInfoGetter=function(l){Xa=l};this.setWidgetExtInfoGetter=function(l){ab=l};this.setDroppableEventListener=function(l){bb=l};this.setDraggableEventListener=function(l){fb=l};this.setupDragIn=function(l){l=$("."+l);var B=ma.getObject().gridDragInClass,M=new wa;M.setAppendTo("body");M.setShowDragHandle(!1);M.setHelperCreator(ya);
M.setFunDragStart(function(R){fb&&fb(Oa,"dragStart",R.target)});M.setFunDragStop(function(R){fb&&fb(Oa,"dragStop",R.target)});F.setupDragIn(B,M,l[0])};this.setupDragInWithoutEvent=function(l,B,M,R){l=$("."+l).filter(function(){return 0!==$(this).width()&&0!==$(this).height()});B="."+B;var Aa=new wa;Aa.setAppendTo("body");Aa.setShowDragHandle(!1);Aa.setHelperCreator(ya);M&&Aa.setFunDragStart(M);R&&Aa.setFunDragStop(R);F.setupDragIn(B,Aa,l[0])};this.setupDroppable=function(l,B){var M=new J;M.setAccept(function(R){return bb&&
bb(Oa,"dropCheck",R)});M.setFunDropped(function(R,Aa){Aa&&$(Aa).hasClass(ma.getObject().gridItemClass)&&F.removeDraggingHelper();bb&&bb(Oa,"dropped",Aa)});M.setFunDropOver(function(R,Aa){Aa&&$(Aa).hasClass(ma.getObject().gridItemClass)&&F.createDraggingHelper(function(Za,Sa){Za=D(Za);if(Sa){var Wa=$(Sa).css("width");Za.css("width",Wa);Sa=$(Sa).css("height");Za.css("height",Sa)}return Za[0]});bb&&bb(Oa,"dropOver",Aa)});M.setFunDropOut(function(R,Aa){Aa&&$(Aa).hasClass(ma.getObject().gridItemClass)&&
F.resetDraggingHelper();bb&&bb(Oa,"dropOut",Aa)});F.setupDroppable("."+l,M,B)};this.screenShot=function(l){function B(){Pa++;if(Pa>=Ya){var Ga=Wa,Qa=window.devicePixelRatio||1,b=640*Qa;Qa*=360;var c=aa.createCanvas(),e=aa.createContext2d(c,b,Qa),m=Ga.width,A=Ga.height;e.fillStyle="#E2E7EF";e.fillRect(0,0,c.width,c.height);e.drawImage(Ga,0,0,m,A,0,0,b,Qa);Ga=c.toDataURL("image/jpeg",.8);l&&l(Ga)}}var M=ma.getObject(),R=$("."+M.id),Aa=R.find("."+M.gridClass);R=R.width();var Za=R/M.columns,Sa=Za*M.cellScale;
M=window.devicePixelRatio||1;var Wa=aa.createCanvas(),db=R*M,Na=9*R/16*M,Ba=aa.createContext2d(Wa,db,Na),Da=F.save(),Pa=0,Ya=Da.length,Ua=["iframe"];html2canvas(Aa[0],{width:db,height:Na,logging:!1,ignoreElements:function(Ga){return T(Ga,Ua)}}).then(function(Ga){if(Ga&&(0!==Ga.width||0!==Ga.height))for(Ba.drawImage(Ga,0,0),Ga=0;Ga<Da.length;Ga++){var Qa=Da[Ga];try{ra(Ba,db,Na,Qa,Za,Sa,B)}catch(b){console.log(b),B()}}})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee=
{});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.workbench&&(com.kingdee.bos.qing.workbench={});var ia=com.kingdee.bos.qing.workbench;ia.GridOption=function(){var ma,ra,T,sa=15,ya=16,Fa=240,Z=.9,za="qing-grid",Ha="qing-grid-item",qa="qing-grid-item";this.getBizId=function(){return ma};this.setBizId=function(La){ma=La};this.getBizName=function(){return ra};this.setBizName=function(La){ra=
La};this.setGridId=function(La){T=La};this.setGridColumnRowNumber=function(La,Ea,Va){sa=La;ya=Ea;Fa=Va};this.getGridColumns=function(){return sa};this.getGridRows=function(){return Fa};this.setGridCellScale=function(La){Z=La};this.setGridClass=function(La,Ea,Va){za=La;Ha=Ea;qa=Va};this.getObject=function(){return{id:T,bizId:ma,bizName:ra,columns:sa,minRows:ya,maxRows:Fa,cellScale:Z,gridClass:za,gridItemClass:Ha,gridDragInClass:qa}}};ia.GridWidget=X;ia.QingGrid=Y;var pa,J,wa,aa;(function(){var ma=
com.kingdee.bos.qing.ui.grid;pa=ma.QingGridFramework;ma=com.kingdee.bos.qing.ui.grid.model;J=ma.QingGridDroppableOptions;wa=ma.QingGridDraggableOptions;ma=com.kingdee.bos.qing.common;aa=ma.CanvasUtil})();Y.DEFAULT_GRID_CLASS="qing-grid";Y.DEFAULT_GRID_WIDGET_CLASS="qing-grid-item";Y.DEFAULT_GRID_WIDGET_CONTENT_CLASS="qing-grid-item-content";Y.DEFAULT_GRID_DRAG_IN_CLASS="qing-grid-draggable"})();(function(){function n(){var f,u,D,ha,W;this.setParentNode=function(L){f=L};this.getParentNode=function(){return f};this.setDirectoryType=function(L){ha=L};this.getDirectoryType=function(){return ha};this.setHidden=function(L){u=L};this.isHidden=function(){return u};this.setPreset=function(L){D=L};this.isPreset=function(){return D};this.setSearch=function(L){W=L};this.isSearch=function(){return W};this.getSubNodeLevel=function(){for(var L=0,F=f;F;)L++,F=F.getParentNode();return L}}function X(){n.call(this);
var f=this,u,D,ha,W;this.getSource=function(){return u};this.setSource=function(L){u=L};this.getId=function(){return D};this.setId=function(L){D=L};this.getName=function(){return ha};this.setName=function(L){ha=L};this.setRefType=function(L){W=L};this.getRefType=function(){return W};this.fromJsonObject=function(L){f.setSource(L.source);f.setId(L.id);f.setName(L.name);f.setPreset(L.isPreset);f.setRefType(L.refType)};this.toJsonObject=function(){var L={};L.source=u;L.id=D;L.name=ha;L.refType=W;L.type=
f.getDirectoryType();L.isPreset=f.isPreset();return L}}function Y(){n.call(this);var f=this,u,D=[],ha,W=0;this.setGroupName=function(L){u=L};this.getGroupName=function(){return u};this.getChildren=function(){return D};this.setChildren=function(L){D=L};this.setOpenDir=function(L){ha=L};this.isOpenDir=function(){return ha};this.addSearchedNumber=function(){W+=1};this.getSearchedNumber=function(){return W};this.clearSearchNumber=function(){W=0};this.fromJsonObject=function(L){var F=L.groupName;"c81a0135-1157-41a4-8e08-de55179916c1"==
L.groupId&&"\u6211\u7684\u8f7b\u5206\u6790"==F?f.setGroupName(Va.get("myQingCenter",F)):f.setGroupName(F);f.setOpenDir(!0);var P=L.children;if(P)for(F=0;F<P.length;F++){var ja=new Y;ja.setDirectoryType(f.getDirectoryType());ja.fromJsonObject(P[F]);ja.setParentNode(f);D.push(ja)}if(P=L.publishedList)for(F=0;F<P.length;F++)if(L=P[F])ja=Ea.LeafNodeFactory.createLeafNode(f.getDirectoryType()),ja.fromJsonObject(L),ja.setParentNode(f),ja.setDirectoryType(f.getDirectoryType()),D.push(ja)}}function ia(){X.call(this);
var f=this,u;this.getScene=function(){switch(f.getSource()){case Ca.DASHBOARD:var D=aa.WidgetType_Dashboard;break;case Ca.REPORT:case Ca.EXTREPORT:D=aa.WidgetType_QingReport;break;case Ca.BILL:case Ca.SUBJECT:case Ca.CONTROL:D=aa.WidgetType_Square;break;default:throw Error("do not support this type!");}return D};this.getSchemaId=function(){return u};this.setSchemaId=function(D){u=D};this.fromJsonObject=function(D){f.setId(D.id);f.setSource(D.source);f.setName(D.name);f.setSchemaId(D.schemaId);f.setRefType(D.refType);
f.setPreset(D.isPreset)};this.toJsonObject=function(){var D={};D.id=f.getId();D.source=f.getSource();D.name=f.getName();D.schemaId=u;D.refType=f.getRefType();D.type=f.getDirectoryType();D.isPreset=f.isPreset();return D}}function pa(){X.call(this);var f=this;this.getScene=function(){switch(f.getSource()){case Ca.DASHBOARD:var u=aa.WidgetType_Dashboard;break;case Ca.REPORT:case Ca.EXTREPORT:u=aa.WidgetType_QingReport;break;case Ca.BILL:case Ca.SUBJECT:case Ca.CONTROL:u=aa.WidgetType_Longer;break;default:throw Error("do not support this type!");
}return u}}function J(){X.call(this);var f=this,u,D;this.setCatalogId=function(W){u=W};this.getCatalogId=function(){return u};this.setNumber=function(W){D=W};this.getNumber=function(){return D};this.getScene=function(){return aa.WidgetType_Metrics};var ha=f.fromJsonObject;this.fromJsonObject=function(W){ha(W);f.setSource(W.source);f.setId(W.id);f.setName(W.name);f.setPreset(W.isPreset);f.setCatalogId(W.catalogId);f.setNumber(W.number);f.setName(W.metricName)};this.toJsonObject=function(){var W={};
W.id=f.getId();W.catalogId=u;W.number=D;W.metricName=f.getName();W.source=f.getSource();W.type=f.getDirectoryType();return W}}function wa(){var f=this,u,D,ha,W,L;this.getWorkbenchId=function(){return u};this.setWorkbenchId=function(F){u=F};this.getWorkbenchName=function(){return D};this.setWorkbenchName=function(F){D=F};this.getImagePath=function(){return ha};this.setImagePath=function(F){ha=F};this.isPreset=function(){return W};this.setPreset=function(F){W=F};this.isDefault=function(){return L};
this.setDefault=function(F){L=F};this.fromJsonObject=function(F){f.setWorkbenchId(F.workbenchId);f.setWorkbenchName(F.workbenchName);f.setImagePath(F.imagePath);f.setPreset(F.isPreset);f.setDefault(F.isDefault)};this.toJsonObject=function(){var F={};F.workbenchId=u;F.workbenchName=D;F.imagePath=ha;F.isPreset=W;F.isDefault=L;return F};this.toPinBarJsonObject=function(){var F={};F.refId=u;F.publishName=D;F.publishSourceType=wa.Constants.PIN_TAB_SOURCE_WORKBENCH;F.publishTargetType=wa.Constants.PIN_TAB_TYPE_WORKBENCH;
return F};this.fromPinBarJsonObject=function(F){f.setId(F.refId);f.setName(F.publishName);f.setItemOrder(F.itemOrder)}}function aa(){var f;this.getPage=function(){return f};this.setPage=function(u){f=u};this.toJsonObject=function(){var u={};u.page=f.toJsonObject();return u};this.fromJsonObject=function(u){u=u.page;f=new sa;f.fromJsonObject(u)}}function ma(){var f=this,u,D,ha,W,L,F;this.getWidgetTypeName=function(){throw Error("Override me");};this.getName=function(){return u};this.setName=function(P){u=
P};this.getDisplayName=function(){return D};this.setDisplayName=function(P){D=P};this.getX=function(){return ha};this.setX=function(P){ha=P};this.getY=function(){return W};this.setY=function(P){W=P};this.getWidth=function(){return L};this.setWidth=function(P){L=P};this.getHeight=function(){return F};this.setHeight=function(P){F=P};this.toJsonObject=function(){var P={};P.widgetType=f.getWidgetTypeName();P.name=u;P.displayName=D;P.x=ha;P.y=W;P.width=L;P.height=F;f.protectedToJsonObject(P);return P};
this.fromJsonObject=function(P){u=P.name;D=P.displayName;ha=P.x;W=P.y;L=P.width;F=P.height;f.protectedFromJsonObject(P)};this.protectedToJsonObject=function(P){throw Error("Override");};this.protectedFromJsonObject=function(P){throw Error("Override");};this.protectedMethod={}}function ra(){ma.call(this);var f=this,u=[];this.getWidgets=function(){return u};this.addWidget=function(D){u.push(D)};this.removeWidget=function(D){for(var ha=0;ha<u.length;ha++)u[ha]==D&&u.splice(ha,1);return-1};this.protectedMethod.containerToJsonObject=
function(D){for(var ha=[],W=0;W<u.length;W++){var L=u[W].toJsonObject();ha.push(L)}D.widgets=ha};this.protectedMethod.containerFromJsonObject=function(D){D=D.widgets;for(var ha=0;ha<D.length;ha++){var W=D[ha],L=Ea.WorkbenchUtil.createWidgetModel(W.widgetType);L.fromJsonObject(W);f.addWidget(L)}}}function T(){var f;this.setReferenceCustomMap=function(u){f=u};this.getReferenceCustomMap=function(){return f};this.protectedMethod.referableToJsonObject=function(u){u.ref=f};this.protectedMethod.referableFromJsonObject=
function(u){f=u.ref}}function sa(){ra.call(this);var f=this.protectedMethod;this.getWidgetTypeName=function(){return aa.WidgetType_Page};this.protectedToJsonObject=function(u){f.containerToJsonObject(u)};this.protectedFromJsonObject=function(u){f.containerFromJsonObject(u)}}function ya(){ma.call(this);T.call(this);var f=this.protectedMethod;this.getWidgetTypeName=function(){return aa.WidgetType_Square};this.protectedToJsonObject=function(u){f.referableToJsonObject(u)};this.protectedFromJsonObject=
function(u){f.referableFromJsonObject(u)}}function Fa(){ma.call(this);T.call(this);var f=this.protectedMethod;this.getWidgetTypeName=function(){return aa.WidgetType_Longer};this.protectedToJsonObject=function(u){f.referableToJsonObject(u)};this.protectedFromJsonObject=function(u){f.referableFromJsonObject(u)}}function Z(){ma.call(this);T.call(this);var f=this.protectedMethod;this.getWidgetTypeName=function(){return aa.WidgetType_Dashboard};this.protectedToJsonObject=function(u){f.referableToJsonObject(u)};
this.protectedFromJsonObject=function(u){f.referableFromJsonObject(u)}}function za(){ma.call(this);T.call(this);var f=this.protectedMethod;this.getWidgetTypeName=function(){return aa.WidgetType_QingReport};this.protectedToJsonObject=function(u){f.referableToJsonObject(u)};this.protectedFromJsonObject=function(u){f.referableFromJsonObject(u)}}function Ha(){ma.call(this);T.call(this);var f=this.protectedMethod;this.getWidgetTypeName=function(){return aa.WidgetType_Metrics};this.protectedToJsonObject=
function(u){f.referableToJsonObject(u)};this.protectedFromJsonObject=function(u){f.referableFromJsonObject(u)}}function qa(){var f,u,D,ha,W,L;this.setRefId=function(F){f=F};this.getRefId=function(){return f};this.setName=function(F){u=F};this.getName=function(){return u};this.setSourceType=function(F){D=F};this.getSourceType=function(){return D};this.setPathType=function(F){ha=F};this.getPathType=function(){return ha};this.setItemOrder=function(F){W=F};this.getItemOrder=function(){return W};this.getStatus=
function(){return L};this.setStatus=function(F){L=F};this.toJsonObject=function(){var F={};F.refId=f;F.name=u;F.sourceType=D;F.pathType=ha;F.status=L;return F};this.fromJsonObject=function(F){f=F.refId;u=F.name;D=F.sourceType;ha=F.pathType;W=F.itemOrder;L=F.status}}function La(){var f,u,D,ha,W,L={},F,P,ja;this.setWorkbenchId=function(ea){f=ea};this.getWorkbenchId=function(){return f};this.setBizId=function(ea){u=ea};this.getBizId=function(){return u};this.setBizName=function(ea){ha=ea};this.getBizName=
function(){return ha};this.setBizType=function(ea){D=ea};this.getBizType=function(){return D};this.setRef=function(ea){W=ea};this.getRef=function(){return W};this.addInfo=function(ea,Xa){L[ea]=Xa};this.setInfo=function(ea){L=ea};this.getInfo=function(){return L};this.setJsonModelBook=function(ea){F=ea};this.getJsonModelBook=function(){return F};this.setErrorCode=function(ea){P=ea};this.getErrorCode=function(){return P};this.setErrorMessage=function(ea){ja=ea};this.getErrorMessage=function(){return ja};
this.toJsonObject=function(){var ea={};ea.workbenchId=f;ea.bizId=u;ea.bizName=ha;ea.bizType=D;ea.ref=W;ea.info=L;ea.jsonModelBook=F;ea.errorCode=P;ea.errorMessage=ja;return ea};this.clone=function(){var ea=new La;ea.setWorkbenchId(f);ea.setBizId(u);ea.setBizType(D);ea.setBizName(ha);ea.setJsonModelBook(F);ea.setErrorCode(P);ea.setErrorMessage(ja);var Xa={},ab;for(ab in W)Xa[ab]=W[ab];ea.setRef(Xa);Xa={};for(ab in L)Xa[ab]=L[ab];ea.setInfo(Xa);return ea}}"undefined"==typeof com&&(com={});"undefined"==
typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.workbench&&(com.kingdee.bos.qing.workbench={});"undefined"==typeof com.kingdee.bos.qing.workbench.model&&(com.kingdee.bos.qing.workbench.model={});var Ea=com.kingdee.bos.qing.workbench.model,Va;Ea.MenuNode=function(f){var u=[];this.getChildren=function(){return u};this.fromJsonObject=function(D){if(D=
D.children)for(var ha=0;ha<D.length;ha++){var W=new Y;W.setDirectoryType(f);W.fromJsonObject(D[ha]);u.push(W)}}};Ea.MenuFolderNode=Y;Ea.CardLeafNode=ia;Ea.CenterLeafNode=pa;Ea.DropdownOption=function(f,u){this.getDisplayName=function(){return f};this.getValue=function(){return u}};Ea.Workbench=wa;Ea.WorkbenchUtil=new function(){this.convertLeafNodeToPinBarItem=function(f){var u=new qa;u.setRefId(f.getId());u.setName(f.getName());u.setSourceType(f.getSource());u.setPathType(f.getDirectoryType());return u};
this.convertWorkbenchToPinBarItem=function(f){var u=new qa;u.setRefId(f.getWorkbenchId());u.setName(f.getWorkbenchName());u.setSourceType(wa.Constants.PIN_TAB_SOURCE_WORKBENCH);u.setPathType(wa.Constants.PIN_TAB_TYPE_WORKBENCH);return u};this.convertPinBarItemToWorkbench=function(f){var u=new wa;u.setWorkbenchId(f.getRefId());u.setWorkbenchName(f.getName());return u};this.convertPinBarItemToLeafNode=function(f){var u=Ja.QINGCENTER===f.getPathType()||Ja.APPMENU===f.getPathType()?new pa:Ja.METRICLIBRARY===
f.getPathType()?new J:new ia;u.setId(f.getRefId());u.setName(f.getName());u.setSource(f.getSourceType());u.setDirectoryType(f.getPathType());return u};this.createWidgetModel=function(f){if(f===aa.WidgetType_Page)return new sa;if(f===aa.WidgetType_Square)return new ya;if(f===aa.WidgetType_Longer)return new Fa;if(f===aa.WidgetType_Dashboard)return new Z;if(f===aa.WidgetType_QingReport)return new za;if(f===aa.WidgetType_Metrics)return new Ha}};Ea.WorkbenchModel=aa;Ea.Page=sa;Ea.WidgetSquare=ya;Ea.WidgetLonger=
Fa;Ea.WidgetDashboard=Z;Ea.WidgetQingReport=za;Ea.WidgetMetric=Ha;Ea.SchemaContext=function(){var f,u,D,ha;this.setCurrentSchemaId=function(W){f=W};this.getCurrentSchemaId=function(){return f};this.setCurrentSchemaName=function(W){u=W};this.getCurrentSchemaName=function(){return u};this.getCurrentSchemaType=function(){return D};this.setCurrentSchemaType=function(W){D=W};this.setSelectedSchemaName=function(W){ha=W};this.getSelectedSchemaName=function(){return ha}};Ea.PinTabBarItem=qa;Ea.LeafNodeFactory=
new function(){var f={};this.createLeafNode=function(u){if(u=f[u])return new u;throw Error("unknown sScene");};this.register=function(u,D){f[u]=D}};Ea.WorkbenchGptModel=La;Ea.RefType={CARD:"card",SUBJECT:"subject",CARD_DSB:"card_dsb",QINGCENTER_QING:"qingcenter_qing",QINGCENTER_RPT:"qingcenter_rpt",QINGCENTER_DSB:"qingcenter_dsb",APPMENU_QING:"appmenu_qing",APPMENU_RPT:"appmenu_rpt",APPMENU_DSB:"appmenu_dsb",METRIC_LIBRARY:"metric_library"};var Ja={APPMENU:1,CARDLIBRARY:2,QINGCENTER:3,METRICLIBRARY:4,
WORKBENCH:5};Ea.RefPathType=Ja;var Ca={SUBJECT:"subject",BILL:"bill",DASHBOARD:"dashboard",REPORT:"report",CONTROL:"control",EXTREPORT:"extreport"};(function(){var f=com.kingdee.bos.qing.framework.common;console.log("NS:",Ea);Va=f.MultilanguageManager.createPackageAccessor(Ea)})();Ea.LeafNodeFactory.register(Ja.APPMENU,pa);Ea.LeafNodeFactory.register(Ja.CARDLIBRARY,ia);Ea.LeafNodeFactory.register(Ja.QINGCENTER,pa);Ea.LeafNodeFactory.register(Ja.METRICLIBRARY,J);wa.Constants={PIN_TAB_SOURCE_WORKBENCH:"workbench",
PIN_TAB_TYPE_WORKBENCH:5};aa.WidgetType_Page="Page";aa.WidgetType_Square="Square";aa.WidgetType_Longer="LongPainting";aa.WidgetType_Dashboard="Dashboard";aa.WidgetType_QingReport="QingReport";aa.WidgetType_Metrics="Metrics";qa.status={deleted:"deleted",noPermission:"noPermission"}})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.workbench&&(com.kingdee.bos.qing.workbench={});"undefined"==typeof com.kingdee.bos.qing.workbench.common&&(com.kingdee.bos.qing.workbench.common={});var n=com.kingdee.bos.qing.workbench.common;n.Facade=function(J,wa,aa,ma){X.call(this,J,wa,
aa,ma);var ra=this.protectedMethod;this.loadWorkbenchGroupPublished=function(T,sa,ya,Fa){ra.remote("loadWorkbenchGroupPublished",{publishTargetType:T,isPresetPublish:sa,directoryGroup:ya,systemId:Fa})};this.pinTabBarList=function(T){T={pinTabBarList:JSON.stringify(T)};ra.remote("pinTabBarList",T)};this.loadPinTabBarList=function(){ra.remote("loadPinTabBarList",{})};this.loadWorkbenches=function(){ra.remote("loadWorkbenches",{})};this.saveOrUpdateWorkbench=function(T){T={workbench:JSON.stringify(T)};
ra.remote("saveOrUpdateWorkbench",T)};this.deleteWorkbench=function(T){ra.remote("deleteWorkbench",{workbenchID:T})};this.setDefaultWorkbench=function(T){T={workbench:JSON.stringify(T)};ra.remote("setDefaultWorkbench",T)};this.saveWorkbenchModel=function(T,sa){T={workbenchID:T,model:JSON.stringify(sa)};ra.remote("saveWorkbenchModel",T)};this.loadWorkbenchModel=function(T){ra.remote("loadWorkbenchModel",{workbenchID:T})};this.saveSchema=function(T,sa,ya){T={workbenchID:T,ref:JSON.stringify(sa),model:JSON.stringify(ya)};
ra.remote("saveSchema",T)};this.saveOriginalSchema=function(T,sa,ya){T={workbenchID:T,ref:JSON.stringify(sa),model:JSON.stringify(ya)};ra.remote("saveOriginalSchema",T)};this.getPublishSchema=function(T,sa){ra.remote("getPublishSchema",{workbenchID:T,publishId:sa})};this.getPublishReferenceMap=function(T,sa,ya,Fa){ra.remote("getPublishReferenceMap",{refToId:T,schemaId:sa,workbenchID:Fa,publishType:ya})};this.loadSchema=function(T,sa){T={workbenchID:T,ref:JSON.stringify(sa)};ra.remote("loadSchema",
T)};this.updateWorkbenchThumbnail=function(T,sa){ra.remote("updateWorkbenchThumbnail",{workbenchID:T,thumbnailFileName:sa})};this.deleteWorkbenchThumbnail=function(T){ra.remote("deleteWorkbenchThumbnail",{workbenchID:T})};this.resetSchema=function(T,sa){T={workbenchID:T,ref:JSON.stringify(sa)};ra.remote("resetSchema",T)};this.checkLicenseForPublish=function(T){ra.remote("checkLicenseForPublish",{publishId:T})};this.getReferenceMap=function(T,sa){ra.remote("getReferenceMap",{refToId:T,refType:sa})};
this.loadMetricSystems=function(){ra.remote("loadMetricSystems",{})};this.loadWorkbenchCard=function(T,sa){T={workbenchID:T,ref:JSON.stringify(sa)};ra.remote("loadWorkbenchCard",T)};this.checkPermission=function(T){ra.remote("checkPermission",{bizId:T})}};n.RemoteImpl=function(){Y.call(this);var J,wa;this.getRemoteUrl=function(aa){aa.tag=wa;return J};this.setRemoteUrl=function(aa){J=aa};this.setTag=function(aa){wa=aa}};n.AbstractDroppableHandler=function(){this.getDroppableAreaClassName=function(J){throw Error("override me");
};this.dropOverHandler=function(J){throw Error("override me");};this.dropOutHandler=function(J){throw Error("override me");};this.droppedHandler=function(J){throw Error("override me");}};n.AbstractWorkbenchHandler=function(){this.getWorkbenchId=function(){throw Error("override me");};this.addWidgetFromGpt=function(J){throw Error("override me");};this.getWorkbenchGptModelByWidgetId=function(J){throw Error("override me");};this.getWorkbenchGptModelByRefUid=function(){throw Error("override me");};this.setupGptSquareDragIn=
function(J,wa){throw Error("override me");}};n.AbstractMetricHelper=function(){this.getMetricReferenceMap=function(J,wa,aa){throw Error("override me");};this.getMetricSquareEntrance=function(J){throw Error("override me");}};var X,Y,ia,pa;(function(){var J=com.kingdee.bos.qing.framework.common;Y=J.AbstractRemoteCall;X=J.AbstractFacade;ia=J.FileUploader;pa=J.RemoteFrameworkRegister})();n.Integration=new function(){var J={staticWidgetPainter:null,changingWidgetPainter:null,widgetDefaultInfoGetter:null,
widgetExtInfoGetter:null,gridEventListener:null,menuChangeListener:null},wa,aa,ma,ra,T,sa,ya;this.setStaticWidgetPainter=function(Z){J.staticWidgetPainter=Z};this.fireStaticWidgetPainter=function(Z,za,Ha,qa){if(J.staticWidgetPainter)return J.staticWidgetPainter(Z,za,Ha,qa)};this.setChangingWidgetPainter=function(Z){J.changingWidgetPainter=Z};this.fireChangingWidgetPainter=function(Z,za,Ha,qa){if(J.changingWidgetPainter)return J.changingWidgetPainter(Z,za,Ha,qa)};this.setWidgetDefaultInfoGetter=function(Z){J.widgetDefaultInfoGetter=
Z};this.fireWidgetDefaultInfoGetter=function(Z,za,Ha){if(J.widgetDefaultInfoGetter)return J.widgetDefaultInfoGetter(Z,za,Ha)};this.setWidgetExtInfoGetter=function(Z){J.widgetExtInfoGetter=Z};this.fireWidgetExtInfoGetter=function(Z,za,Ha){if(J.widgetExtInfoGetter)return J.widgetExtInfoGetter(Z,za,Ha)};this.setGridEventListener=function(Z){J.gridEventListener=Z};this.fireGridEventListener=function(Z,za,Ha){if(J.gridEventListener)return J.gridEventListener(Z,za,Ha)};this.setMenuChangeListener=function(Z){J.menuChangeListener=
Z};this.fireMenuChangeListener=function(){if(J.menuChangeListener)return J.menuChangeListener()};var Fa={droppableEventListener:null,draggableEventListener:null,getWorkbenchGptModelByWidgetIdHandler:null,getWorkbenchGptModelByRefUidHandler:null,addWidgetFromGptGridListener:null};this.setDroppableEventListener=function(Z){Fa.droppableEventListener=Z};this.fireDroppableEventListener=function(Z,za,Ha){if(Fa.droppableEventListener)return Fa.droppableEventListener(Z,za,Ha)};this.setDraggableEventListener=
function(Z){Fa.draggableEventListener=Z};this.fireDraggableEventListener=function(Z,za,Ha){if(Fa.draggableEventListener)return Fa.draggableEventListener(Z,za,Ha)};this.setGetWorkbenchGptModelByWidgetIdHandler=function(Z){Fa.getWorkbenchGptModelByWidgetIdHandler=Z};this.fireGetWorkbenchGptModelByWidgetIdHandler=function(Z,za){if(Fa.getWorkbenchGptModelByWidgetIdHandler)return Fa.getWorkbenchGptModelByWidgetIdHandler(Z,za)};this.setGetWorkbenchGptModelByRefUidHandler=function(Z){Fa.getWorkbenchGptModelByRefUidHandler=
Z};this.fireGetWorkbenchGptModelByRefUidHandler=function(Z,za){if(Fa.getWorkbenchGptModelByRefUidHandler)return Fa.getWorkbenchGptModelByRefUidHandler(Z,za)};this.setAddWidgetFromGptListener=function(Z){J.addWidgetFromGptListener=Z};this.fireAddWidgetFromGptListener=function(Z,za){if(J.addWidgetFromGptListener)return J.addWidgetFromGptListener(Z,za)};this.setFunMessageBoxPainter=function(Z){wa=Z};this.createMessageBoxUi=function(Z){wa&&wa(Z)};this.setFunGetOpenAnalysisUrl=function(Z){aa=Z};this.getOpenAnalysisUrl=
function(Z,za,Ha,qa,La){return aa&&aa(Z,za,Ha,qa,La)};this.setLinkageRemoteURL=function(Z){ya=Z};this.getLinkageRemoteURL=function(){return ya};this.getWorkbenchRemoteUrl=function(){return ma};this.setWorkbenchRemoteUrl=function(Z){ma=Z};this.getCoreRemoteUrl=function(){return ra};this.setCoreRemoteUrl=function(Z){ra=Z};this.getDsbIFrameUrl=function(Z){return T&&T(Z)};this.setFunGetDsbIFrameUrl=function(Z){T=Z};this.getReportIFrameUrl=function(Z,za,Ha,qa,La){return sa&&sa(Z,za,Ha,qa,La)};this.setFunGetReportIFrameUrl=
function(Z){sa=Z}};n.WorkbenchHelper=new function(){this.uploadBase64Image=function(J,wa,aa){J=atob(J.split(",")[1]);for(var ma=[],ra=0;ra<J.length;ra++)ma.push(J.charCodeAt(ra));J=new Blob([new Uint8Array(ma)],{type:"image/jpeg"});var T=new File([J],(new Date).getTime()+".jpeg");J=new ia;J.setShowBlocking(!1);J.setRequestPreparer(function(sa){sa.append("filename",T)});J.setFinishedHandler(function(sa,ya,Fa){sa&&(3099003==ya?aa&&aa(ya,Fa):aa&&aa(500,"fail to upload thumbnail"))});J.setSuccessHandler(function(sa){wa(sa.data)});
ma=pa.getUploadUrl();J.uploadTo(ma)}};n.MetricIntegration=new function(){var J;this.registerImpl=function(wa){J=wa};this.remoteSchemaContent=function(wa,aa,ma){if(!J)throw Error("no metricHelper impl");J.getMetricReferenceMap(wa,aa,ma)};this.getMetricSquareEntrance=function(wa){if(!J)throw Error("no metricHelper impl");return J.getMetricSquareEntrance(wa)}};n.WorkbenchBehavior=new function(){this.interestInBehavior=function(J,wa){J&&wa&&com.kingdee.bos.qing.behavior.BehaviorManager.interestInBehavior(J,
wa)};this.getMenuDirOperationBehaviorByRefPathType=function(J){if(J===com.kingdee.bos.qing.workbench.model.RefPathType.QINGCENTER)return n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_MYDIR;if(J===com.kingdee.bos.qing.workbench.model.RefPathType.CARDLIBRARY)return n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_MYCARD;if(J===com.kingdee.bos.qing.workbench.model.RefPathType.APPMENU)return n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_MYMENU};this.getMenuDirOperationBehaviorByGroupType=function(J){if("\u6309\u53d1\u5e03\u4eba"===
J)return n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_BY_PUBLISHER;if("\u6309\u76ee\u5f55"===J)return n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_BY_DIRECTORY};this.getMenuDirOperationBehaviorByContentType=function(J){if("\u53d1\u5e03\u5185\u5bb9"===J)return n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_PUBLISH_CONTENT;if("\u9884\u7f6e\u5185\u5bb9"===J)return n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_PRESET_CONTENT};this.getMenuNodeClickOperation=function(J){if(J===com.kingdee.bos.qing.workbench.model.WorkbenchModel.WidgetType_Longer)return n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION_LONGER;
if(J===com.kingdee.bos.qing.workbench.model.WorkbenchModel.WidgetType_Square)return n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION_SQUARE;if(J===com.kingdee.bos.qing.workbench.model.WorkbenchModel.WidgetType_Dashboard)return n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION_DSB;if(J===com.kingdee.bos.qing.workbench.model.WorkbenchModel.WidgetType_QingReport)return n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION_REPORT};this.getMenuNodeDragOperation=function(J){if(J===com.kingdee.bos.qing.workbench.model.WorkbenchModel.WidgetType_Longer)return n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION_LONGER;
if(J===com.kingdee.bos.qing.workbench.model.WorkbenchModel.WidgetType_Square)return n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION_SQUARE;if(J===com.kingdee.bos.qing.workbench.model.WorkbenchModel.WidgetType_Dashboard)return n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION_DSB;if(J===com.kingdee.bos.qing.workbench.model.WorkbenchModel.WidgetType_QingReport)return n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION_REPORT}};n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION="wb-menu-dir-operation";
n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_MYDIR="\u9605\u89c8\u5939";n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_MYCARD="\u5361\u7247\u5e93";n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_MYMENU="\u83dc\u5355\u9879";n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_PUBLISH_CONTENT="\u53d1\u5e03\u5185\u5bb9";n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_PRESET_CONTENT="\u9884\u7f6e\u5185\u5bb9";n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_BY_PUBLISHER="\u6309\u53d1\u5e03\u4eba";
n.WorkbenchBehavior.WORKBENCH_MENU_DIR_OPERTAION_BY_DIRECTORY="\u6309\u76ee\u5f55";n.WorkbenchBehavior.WORKBENCH_MENU_TREE_OPERATION="wb-menu-tree-operation";n.WorkbenchBehavior.WORKBENCH_MENU_TREE_OPERATION_SEARCH="\u641c\u7d22";n.WorkbenchBehavior.WORKBENCH_MENU_TREE_OPERATION_FLODER="\u5c55\u5f00\u6536\u8d77";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION="wb-menu-node-click-operation";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION_LONGER="\u70b9\u51fb\u6570\u636e\u5206\u6790";
n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION_SQUARE="\u70b9\u51fb\u6570\u636e\u6597\u65b9";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION_DSB="\u70b9\u51fb\u4eea\u8868\u677f";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_CLICK_OPERATION_REPORT="\u70b9\u51fb\u62a5\u8868";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION="wb-menu-node-drag-operation";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION_LONGER="\u62d6\u52a8\u6570\u636e\u5206\u6790";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION_SQUARE=
"\u62d6\u52a8\u6570\u636e\u6597\u65b9";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION_DSB="\u62d6\u52a8\u4eea\u8868\u677f";n.WorkbenchBehavior.WORKBENCH_MENU_NODE_DRAG_OPERATION_REPORT="\u62d6\u52a8\u62a5\u8868";n.WorkbenchBehavior.WORKBENCH_SCHEMA_LIST_OPERATION="wb-schema-list-operation";n.WorkbenchBehavior.WORKBENCH_SCHEMA_LIST_OPERATION_NEW="\u65b0\u5efa\u5de5\u4f5c\u53f0";n.WorkbenchBehavior.WORKBENCH_SCHEMA_LIST_OPERATION_MODIFY_NAME="\u4fee\u6539\u5de5\u4f5c\u53f0\u540d\u79f0";n.WorkbenchBehavior.WORKBENCH_SCHEMA_LIST_OPERATION_SET_DEFAULT=
"\u8bbe\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0";n.WorkbenchBehavior.WORKBENCH_SCHEMA_LIST_OPERATION_NEW_TAB="\u5728\u65b0\u9875\u7b7e\u6253\u5f00";n.WorkbenchBehavior.WORKBENCH_SCHEMA_LIST_OPERATION_DELETE="\u5220\u9664\u5de5\u4f5c\u53f0";n.WorkbenchBehavior.WORKBENCH_TAB_OPERATION="wb-tab-operation";n.WorkbenchBehavior.WORKBENCH_TAB_OPERATION_SCHEMA="\u5c55\u5f00\u5de5\u4f5c\u53f0\u5217\u8868";n.WorkbenchBehavior.WORKBENCH_TAB_OPERATION_PIN="\u9489\u4f4f/\u53d6\u6d88\u9489\u4f4f";n.WorkbenchBehavior.WORKBENCH_GRID_CARD_DESIGN_OPERATION=
"wb-grid-design-operation";n.WorkbenchBehavior.WORKBENCH_GRID_CARD_DESIGN_OPERATION_DRAG="\u62d6\u62fd\u5361\u7247(\u8c03\u6574\u4f4d\u7f6e)";n.WorkbenchBehavior.WORKBENCH_GRID_CARD_DESIGN_OPERATION_RESIZE="\u53d8\u66f4\u5927\u5c0f(\u8c03\u6574\u5927\u5c0f)";n.WorkbenchBehavior.WORKBENCH_GRID_LONGER_OPERATION="wb-grid-long-card-operation";n.WorkbenchBehavior.WORKBENCH_GRID_LONGER_OPERATION_DESIGNER="\u8fdb\u5165\u8bbe\u8ba1\u5668";n.WorkbenchBehavior.WORKBENCH_GRID_LONGER_OPERATION_DESIGNER_FINISH=
"\u8fdb\u5165\u8bbe\u8ba1\u5668-\u5b8c\u6210";n.WorkbenchBehavior.WORKBENCH_GRID_LONGER_OPERATION_DESIGNER_RESET="\u8fdb\u5165\u8bbe\u8ba1\u5668-\u91cd\u7f6e";n.WorkbenchBehavior.WORKBENCH_GRID_LONGER_OPERATION_SELECT_SCHEMA="\u9009\u62e9\u5206\u6790\u65b9\u6848";n.WorkbenchBehavior.WORKBENCH_GRID_SQUARE_OPERATION="wb-grid-square-card-operation";n.WorkbenchBehavior.WORKBENCH_GRID_SQUARE_OPERATION_ANALYSIS='\u8fdb\u5165"\u6570\u636e\u5206\u6790"';n.WorkbenchBehavior.WORKBENCH_GRID_SQUARE_OPERATION_ANALYSIS_SAVE=
'\u8fdb\u5165"\u6570\u636e\u5206\u6790"-\u4fdd\u5b58';n.WorkbenchBehavior.WORKBENCH_GRID_SQUARE_OPERATION_ANALYSIS_SAVEAS='\u8fdb\u5165"\u6570\u636e\u5206\u6790"-\u53e6\u5b58\u4e3a';n.WorkbenchBehavior.WORKBENCH_GRID_SQUARE_OPERATION_DESIGNER="\u8fdb\u5165\u8bbe\u8ba1\u5668";n.WorkbenchBehavior.WORKBENCH_GRID_SQUARE_OPERATION_DESIGNER_FINISH="\u8fdb\u5165\u8bbe\u8ba1\u5668-\u5b8c\u6210";n.WorkbenchBehavior.WORKBENCH_GRID_SQUARE_OPERATION_DESIGNER_RESET="\u8fdb\u5165\u8bbe\u8ba1\u5668-\u91cd\u7f6e";
n.WorkbenchBehavior.WORKBENCH_GRID_DSB_OPERATION="wb-grid-dsb-card-operation";n.WorkbenchBehavior.WORKBENCH_GRID_DSB_OPERATION_FULLSCREEN="\u9605\u89c8\u8005\u83dc\u5355-\u5168\u5c4f";n.WorkbenchBehavior.WORKBENCH_GRID_DSB_OPERATION_OTHER="\u9605\u89c8\u8005\u83dc\u5355-\u5176\u4ed6";n.WorkbenchBehavior.WORKBENCH_GRID_REPORT_OPERATION="wb-grid-report-card-operation";n.WorkbenchBehavior.WORKBENCH_GRID_REPORT_OPERATION_FILTRATE="\u8fc7\u6ee4";n.WorkbenchBehavior.WORKBENCH_GRID_REPORT_OPERATION_FULLSCREEN=
"\u5168\u5c4f";n.WorkbenchBehavior.WORKBENCH_AI_ARRIVE_OPERATION="wb-ai-arrive-operation";n.WorkbenchBehavior.WORKBENCH_AI_ARRIVE_OPERATION_COSMIC="\u70b9\u51fbCosmicAI\u52a9\u624b\u5165\u53e3";n.WorkbenchBehavior.WORKBENCH_AI_ARRIVE_OPERATION_RECOMMEND="\u70b9\u51fb\u9ed8\u8ba4\u63a8\u8350\u95ee\u9898";n.WorkbenchBehavior.WORKBENCH_AI_CONTENT_OPERATION="wb-ai-content-operation";n.WorkbenchBehavior.WORKBENCH_AI_CONTENT_OPERATION_DRAG_FROM_MENU="\u62d6\u62fd\u5de6\u4fa7\u6811\u5f62\u83dc\u5355\u5185\u5bb9\u5230\u5bf9\u8bdd\u6846";
n.WorkbenchBehavior.WORKBENCH_AI_CONTENT_OPERATION_DRAG_FROM_GRID="\u62d6\u62fd\u5de5\u4f5c\u53f0\u5185\u5bb9\u5230\u5bf9\u8bdd\u6846";n.WorkbenchBehavior.WORKBENCH_AI_QUESTION_OPERATION="wb-ai-question-operation";n.WorkbenchBehavior.WORKBENCH_AI_QUESTION_OPERATION_USER_INPUT="\u7528\u6237\u8f93\u5165\u95ee\u9898";n.WorkbenchBehavior.WORKBENCH_AI_QUESTION_OPERATION_USER_SELECT="\u7528\u6237\u9009\u62e9\u63a8\u8350\u95ee\u9898";n.WorkbenchBehavior.WORKBENCH_AI_CHART_CLICK_OPERATION="wb-ai-chart-drag-operation";
n.WorkbenchBehavior.WORKBENCH_AI_CHART_CLICK_OPERATION_CHART_INFO="\u67e5\u770b\u56fe\u8868\u4fe1\u606f";n.WorkbenchBehavior.WORKBENCH_AI_CHART_CLICK_OPERATION_CHART_TYPE="\u5207\u6362\u56fe\u8868\u7c7b\u578b";n.WorkbenchBehavior.WORKBENCH_AI_CHART_CLICK_OPERATION_CHART_EDIT="\u7f16\u8f91\u56fe\u8868";n.WorkbenchBehavior.WORKBENCH_AI_CHART_CLICK_OPERATION_ADD_TO_GRID="\u6dfb\u52a0\u81f3\u5de5\u4f5c\u53f0";n.WorkbenchBehavior.WORKBENCH_AI_CHART_DRAG_OPERATION="wb-ai-chart-drag-operation";n.WorkbenchBehavior.WORKBENCH_AI_CHART_DRAG_OPERATION_TO_GRID=
"\u62d6\u62fd\u56fe\u8868\u81f3\u5de5\u4f5c\u53f0";n.WorkbenchBehavior.WORKBENCH_AI_PANEL_OPERATION="wb-ai-panel-operation";n.WorkbenchBehavior.WORKBENCH_AI_PANEL_OPERATION_NEW_DAILOG="\u65b0\u5efa\u5bf9\u8bdd";n.WorkbenchBehavior.WORKBENCH_AI_PANEL_OPERATION_PIN="\u56fa\u5b9a\u81f3\u5f53\u524d\u5de5\u4f5c\u53f0";n.WorkbenchBehavior.WORKBENCH_AI_PANEL_OPERATION_EXPAND="\u6700\u5927\u5316"})();(function(){function n(){var b=this,c,e,m,A,x,t,q=!1,H=!1,z,h;this.getJqUi=function(){if(c)return c;c=$("<div>");c.addClass("workbench-tab-fixed-head");A=$("<div>");A.addClass("workbench-tab-fixed-head-tab-icon");D.background(A,"icon_workbench_fixed");A.on("click",g);A.appendTo(c);x=$("<div class='workbench-tab-fixed-head-area'>");x.on("click",C);e=$("<div>");e.addClass("workbench-tab-fixed-head-text");e.text(t);e.attr("title",t);e.appendTo(x);var p=$("<div class='workbench-tab-fixed-head-arrow-area'>");
m=$("<div>");m.addClass("workbench-tab-fixed-head-arrow-icon-arrow-down");m.appendTo(p);p.appendTo(x);x.appendTo(c);p.on("mouseover",function(){m.addClass(q?"workbench-tab-fixed-head-arrow-icon-selected1":"workbench-tab-fixed-head-arrow-icon-selected2")});p.on("mouseout",function(){m.removeClass("workbench-tab-fixed-head-arrow-icon-selected1");m.removeClass("workbench-tab-fixed-head-arrow-icon-selected2")});return c};this.updateUi=function(){if(e){e.text(t);e.attr("title",t);var p=20,v=e[0].clientWidth;
70>v&&(p=(95-v)/2);v=p+17+8+v+p;u.layoutCtrlWithLRTB(x,p+17+8-2,null,v-p-17-8+2,null,null,null);u.layoutCtrlWithLRTB(A,p-2,null,null,null,null,null);c.css("width",v+"px")}};this.setTitle=function(p){t=p;b.updateUi()};this.setSelected=function(p){(H=p)?c.addClass("workbench-tab-fixed-head_selected"):c.removeClass("workbench-tab-fixed-head_selected")};this.setOpenSchema=function(p){q=p;m.removeClass("workbench-tab-fixed-head-arrow-icon-arrow-down");m.removeClass("workbench-tab-fixed-head-arrow-icon-arrow-up");
m.removeClass("workbench-tab-fixed-head-arrow-icon-selected1");m.removeClass("workbench-tab-fixed-head-arrow-icon-selected2");m.addClass(q?"workbench-tab-fixed-head-arrow-icon-arrow-up":"workbench-tab-fixed-head-arrow-icon-arrow-down")};this.setShowSchemaAreaHandler=function(p){z=p};this.setFixedTabClickHandler=function(p){h=p};var g=function(p){h&&h(p)},C=function(p){H&&(m.removeClass("workbench-tab-fixed-head-arrow-icon-arrow-down"),m.removeClass("workbench-tab-fixed-head-arrow-icon-arrow-up"),
m.removeClass("workbench-tab-fixed-head-arrow-icon-selected1"),m.removeClass("workbench-tab-fixed-head-arrow-icon-selected2"),q=!q,m.addClass(q?"workbench-tab-fixed-head-arrow-icon-arrow-up":"workbench-tab-fixed-head-arrow-icon-arrow-down"),m.addClass(q?"workbench-tab-fixed-head-arrow-icon-selected1":"workbench-tab-fixed-head-arrow-icon-selected2"),z&&z(q));h&&h(p)}}function X(){var b,c,e,m,A=!0;this.setLock=function(x){b=x};this.isLock=function(){return b};this.setFunSwitchLockStateChecker=function(x){c=
x};this.doFunSwitchLockStateChecker=function(){return c?c(m):!0};this.setFunSwitchLockState=function(x){e=x};this.doFunSwitchLockState=function(){e&&e()};this.setUserObject=function(x){m=x};this.getUserObject=function(){return m};this.isLockAble=function(){return A};this.setLockAble=function(x){A=x}}function Y(){ab.AbstractTabPane.call(this);var b,c,e=!1,m,A;this.protectedAskCloseable=function(x){A&&A(x)};this.getAlreadyInit=function(){return e};this.setWorkbench=function(x){b=x};this.getWorkbench=
function(){return b};this.setInitGridAction=function(x){m=x};this.doInitGridAction=function(){m&&m();e=!0};this.setBeforeCloseAction=function(x){A=x};this.setInitGridWidgets=function(x){c=x};this.getInitGridWidgets=function(){return c};this.showWorkbenchGrid=function(){throw Error("Override me");};this.getWorkbenchGrid=function(){throw Error("Override me");};this.getId=function(){return b.getWorkbenchId()};this.getTitle=function(){return b.getWorkbenchName()};this.getIconName=function(){return"icon_workbench"}}
function ia(){Y.call(this);var b=this,c,e,m;this.getJqUi=function(){c||(c=$("<div>"),c.addClass("workbench-rightpane-tab-fixed"));return c};this.getCloseable=function(){return!1};this.setSelected=function(A){A?c.show():c.hide()};this.showWorkbenchGrid=function(){m=new Ya;e=new J;e.setWorkbench(b.getWorkbench());e.setInitGridWidgets(b.getInitGridWidgets());m.setWorkbenchHandler(e);e.setDroppableHandler(m);c.append(e.getJqUi());c.append(m.getJqUi(c))};this.getWorkbenchGrid=function(){return e};this.getDroppableHandler=
function(){return m}}function pa(){Y.call(this);X.call(this);var b=this,c,e,m;this.getJqUi=function(){c||(c=$("<div>"),c.addClass("workbench-rightpane-tab-grid"));return c};this.showWorkbenchGrid=function(){m=new Ya;e=new J;e.setWorkbench(b.getWorkbench());e.setInitGridWidgets(b.getInitGridWidgets());m.setWorkbenchHandler(e);e.setDroppableHandler(m);c.append(e.getJqUi());c.append(m.getJqUi(c))};this.getWorkbenchGrid=function(){return e};this.getDroppableHandler=function(){return m}}function J(){com.kingdee.bos.qing.workbench.common.AbstractWorkbenchHandler.call(this);
var b=this,c,e,m,A,x,t,q;this.getWorkbenchId=function(){return A.getWorkbenchId()};this.addWidgetFromGpt=function(h){var g=h.getWorkbenchId();L.fireAddWidgetFromGptListener(g,h)};this.getWorkbenchGptModelByWidgetId=function(h){return L.fireGetWorkbenchGptModelByWidgetIdHandler(A.getWorkbenchId(),h)};this.getWorkbenchGptModelByRefUid=function(h){return L.fireGetWorkbenchGptModelByRefUidHandler(A.getWorkbenchId(),h)};this.setupGptSquareDragIn=function(h,g){e.setupDragInWithoutEvent(h,g,function(){P.interestInBehavior(P.WORKBENCH_AI_CHART_DRAG_OPERATION,
P.WORKBENCH_AI_CHART_DRAG_OPERATION_TO_GRID)},function(){})};this.setupDragIn=function(h){e&&e.setupDragIn(h)};this.updateWidgetName=function(h,g){e.updateWidgetName(h,g)};this.updateWidgetDisplayName=function(h,g){e.updateWidgetDisplayName(h,g)};this.updateWidgetId=function(h,g){e.updateWidgetId(h,g)};this.setWorkbench=function(h){A=h};this.setInitGridWidgets=function(h){x=h};this.setDroppableHandler=function(h){q=h};this.getJqUi=function(){if(!c){m="qing-grid_"+A.getWorkbenchId()+"_"+eb.createUUID();
c=$("<div>");c.addClass(m);c.css("padding","5px");var h=$("<div>");h.addClass(ha.DEFAULT_GRID_CLASS);c.append(h);h=z();c.append(h);setTimeout(function(){H()})}return c};this.getGrid=function(){return e};this.getGridOption=function(){return e.getGridOption()};this.getWidgets=function(){return e.getWidgets()};this.getWidgetById=function(h){return e.getWidgetById(h)};this.addWidget=function(h){e.addWidget(h)};var H=function(){var h=new W;h.setBizId(A.getWorkbenchId());h.setBizName(A.getWorkbenchName());
h.setGridId(m);h.setGridColumnRowNumber(15,8,240);h.setGridClass(ha.DEFAULT_GRID_CLASS,ha.DEFAULT_GRID_WIDGET_CLASS,ha.DEFAULT_GRID_DRAG_IN_CLASS);h=new ha(h);h.setGridEventListener(function(C,p,v){"dropOver"===p&&b.changeCoverHintStatus(!1);"dropOut"!==p&&"removed"!==p||b.changeCoverHintStatus(!0);L.fireGridEventListener(C,p,v)});h.setStaticWidgetPainter(L.fireStaticWidgetPainter);h.setChangingWidgetPainter(L.fireChangingWidgetPainter);h.setWidgetDefaultInfoGetter(L.fireWidgetDefaultInfoGetter);
h.setWidgetExtInfoGetter(L.fireWidgetExtInfoGetter);h.setDroppableEventListener(L.fireDroppableEventListener);h.setDraggableEventListener(L.fireDraggableEventListener);h.setupDragIn("workbench-leftpane-tree");if(q){var g=q.getDroppableAreaClassName();h.setupDroppable(g,c.parent())}e=h;x&&0<x.length&&(e.setWidgets(x),b.changeCoverHintStatus(!1))},z=function(){if(!t){t=$("<div class='qing-grid-cover'>");var h=$("<div class='qing-grid-cover-background'>");D.background(h,"icon_open_tips_background");
var g=$("<div class='qing-grid-cover-hint'>");g.text(f.get("backgroundTips","\u4ece\u5de6\u4fa7\u62d6\u5165\u6570\u636e\u5185\u5bb9\uff0c\u5f00\u59cb\u4f7f\u7528\u6570\u636e\u5de5\u4f5c\u53f0"));t.append(h);t.append(g);c.append(t)}return t};this.changeCoverHintStatus=function(h){h?h&&0===e.getWidgetCount()&&t&&t.show():t&&t.hide()}}function wa(){var b=this,c=1,e=2,m=3,A=4,x=5,t=6,q=7,H,z,h,g,C,p,v,N,Q,ua,O,K,G,S,ba,y,ca;this.setData=function(V,ka,Ra,ob){H=V;z=Ra;h=ob;ka&&(O=ka.funSchemaDefaultHandler,
K=ka.funSchemaOpenNewHandler,G=ka.funSchemaShareHandler,S=ka.funSchemaDeleteHandler,ba=ka.funSchemaCopyHandler,y=ka.funSchemaNameModifyHandler,ca=ka.funSchemaOpenFixedHandler)};this.setSelected=function(V){V?g.addClass("workbench-schema-item-default"):g.removeClass("workbench-schema-item-default")};this.setDefault=function(V){V?(p.attr("title",f.get("cancelDefaultWorkbench","\u53d6\u6d88\u8bbe\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0")),D.background(p,"icon_default")):(p.attr("title",f.get("setDefaultWorkbench",
"\u8bbe\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0")),D.background(p,"icon_undefault"));z.setDefault(V)};this.setWorkbenchName=function(V){ua.text(V);ua.attr("title",V)};this.setPreviewPic=function(V){var ka=!1;V||(ka=!0,V=hb.getIconUrl("workbench","workbench-background-thumbnail.png"));if(C){var Ra=C.find(".workbench-schema-item-img");Ra.attr("src",V);ka?(Ra.css("width",""),Ra.addClass("workbench-schema-item-img-placeholder")):(Ra.css("width","100%"),Ra.removeClass("workbench-schema-item-img-placeholder"))}};
this.getWorkbenchId=function(){if(z)return z.getWorkbenchId()};this.getJqUi=function(){if(g)return g;g=$("<div/>");g.addClass("workbench-schema-item");na();va();Ka();g.on("click",function(V){U(q)});return g};var na=function(){var V=$("<div/>");V.addClass("workbench-schema-item-upper-bar");H?(v=$("<div/>"),D.background(v,"icon_delete"),h?(v.on("click",function(ka){Va(ka);U(A)}),v.attr("title",f.get("deleteWorkbench","\u5220\u9664\u5de5\u4f5c\u53f0")),v.on("mouseout",function(ka){D.background(v,"icon_delete")}),
v.on("mouseover",function(ka){D.background(v,"icon_delete_hover")})):(v.attr("title",f.get("deleteWorkbenchTip","\u65e0\u6cd5\u5220\u9664\uff0c\u9ed8\u8ba4\u9700\u8981\u4fdd\u7559\u4e00\u4e2a\u5de5\u4f5c\u53f0\u3002\u60a8\u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a\u5de5\u4f5c\u53f0\u540e\u518d\u5220\u9664\u8be5\u5de5\u4f5c\u53f0\u3002")),v.css({opacity:"0.6","z-index":1,cursor:"default"}),v.on("click",function(ka){Va(ka)})),v.addClass("workbench-schema-item-upper-bar-icon"),V.append(v)):(N=$("<div/>"),N.on("click",
function(ka){Va(ka);U(x)}),N.addClass("workbench-schema-item-upper-bar-icon"),D.background(N,"icon_copy"),V.append(N));Q=$("<div/>");Q.on("click",function(ka){Va(ka);U(e)});Q.addClass("workbench-schema-item-upper-bar-icon");Q.css("scale","0.9");Q.attr("title",f.get("openNewTab","\u5728\u65b0\u9875\u7b7e\u6253\u5f00"));Q.on("mouseover",function(ka){D.background(Q,"icon_open_tab_hover")});Q.on("mouseout",function(ka){D.background(Q,"icon_open_tab")});D.background(Q,"icon_open_tab");V.append(Q);p=$("<div/>");
p.on("click",function(ka){Va(ka);U(c)});p.addClass("workbench-schema-item-upper-bar-icon");p.attr("title",z.isDefault()?f.get("cancelDefaultWorkbench","\u53d6\u6d88\u8bbe\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0"):f.get("setDefaultWorkbench","\u8bbe\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0"));p.on("mouseout",function(ka){D.background(p,z.isDefault()?"icon_default":"icon_undefault")});p.on("mouseover",function(ka){D.background(p,"icon_default")});D.background(p,z.isDefault()?"icon_default":"icon_undefault");
V.append(p);g.append(V)},va=function(){C=$("<div/>");C.addClass("workbench-schema-item-pic");var V=$("<img class='workbench-schema-item-img'>");C.append(V);g.append(C);V=(V=z)&&V.getImagePath()?com.kingdee.bos.qing.framework.common.RemoteFramework.getLoadImgUrl(V.getImagePath(),"workbench-thumbnail"):null;b.setPreviewPic(V)},Ka=function(){var V=$("<div/>");V.addClass("workbench-schema-item-lower-bar");ua=$("<div/>");ua.addClass("workbench-schema-item-lower-bar-name");ua.text(z.getWorkbenchName());
ua.attr("title",z.getWorkbenchName());V.append(ua);var ka=$("<span/>");ka.addClass("workbench-schema-item-lower-bar-icon");Aa.backgroundWithHover(ka,"btn-edit");ka.on("click",function(Ra){Va(Ra);U(t)});V.append(ka);ka=$("<div/>");ka.addClass("workbench-schema-item-lower-bar-owner");V.append(ka);g.append(V)},U=function(V){V===c?O&&O(z):V===e?K&&K(z):V===m?G&&G(z):V===A?S&&S(z):V===x?ba&&ba(z):V===t?y&&y(z):V===q&&ca&&ca(z)}}function aa(b){B.call(this);var c=this,e=c.protectedMethod,m,A,x,t=!1,q;(function(){c.setSize(390,
200);var z=b?f.get("modifyWorkbenchName","\u4fee\u6539\u5de5\u4f5c\u53f0\u540d\u79f0"):f.get("newWorkbenchSchema","\u65b0\u5efa\u5de5\u4f5c\u53f0\u65b9\u6848");e.setTitle(z);e.setContentPaneCreator(function(){m||H();return m});e.setClosingChecker(function(h){h=A.getText().trim();var g=!0;if(!h)return e.getMessageCurtain().showPrompt(f.get("workbenchIsBlank","\u8bf7\u8f93\u5165\u5de5\u4f5c\u53f0\u540d\u79f0\u3002")),!1;if(50<h.length)return e.getMessageCurtain().showPrompt(f.get("nameTooLong","\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002")),
!1;b?g=h!==b.getWorkbenchName():(b=new ib,b.setDefault(t));if(g&&q(h))return e.getMessageCurtain().showPrompt(f.get("workbenchNameDuplicate","\u5de5\u4f5c\u53f0\u540d\u79f0\u5df2\u5b58\u5728\u3002")),!1;b.setWorkbenchName(h);g&&x&&x(b);return!0});e.setClosingAction(function(){e.destroy();return!0})})();this.setFunCloseDialogCallBack=function(z){x=z};this.setFunWorkbenchNameCheck=function(z){q=z};var H=function(){m=$("<div>");var z=new ja;z.setRequired(!0);z.setText(f.get("newWorkbenchSchemaName",
"\u5de5\u4f5c\u53f0\u540d\u79f0"));z=z.getJqUi();z.attr("title",f.get("newWorkbenchSchemaName","\u5de5\u4f5c\u53f0\u540d\u79f0"));m.append(z);u.layoutCtrl(z,18,15,70,23);A=new ea;b&&A.setText(b.getWorkbenchName());z=A.getJqUi();m.append(z);u.layoutCtrl(z,96,15,210,23);if(!b){var h=$("<div>");D.background(h,"icon_undefault");h.attr("title",f.get("setDefaultWorkbench","\u8bbe\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0"));h.css("cursor","pointer");h.on("click",function(g){t=!t;D.background(h,t?"icon_default":
"icon_undefault")});m.append(h);u.layoutCtrl(h,310,22,18,18)}}}function ma(){var b=this,c=$("<div>"),e,m=$("<div>"),A=$("<div>"),x=$("<div>"),t=[],q=[],H,z,h,g,C,p=[],v;this.resize=function(){H?O(H):na(0);K();ba()};this.setWorkbenchFixedTabHead=function(E){v=E};this.getJqUi=function(){if(!e){c.addClass("workbench-dynamictab");e=$("<div>");e.addClass("workbench-dynamictab-container");e.appendTo(c);if(v){v.getJqUi().appendTo(c);var E=$("<div>");E.addClass("workbench-dynamictab-header-split");E.appendTo(c)}A.addClass("workbench-dynamictab-arrow-left");
A.appendTo(c);A.hide();A.on("click",function(fa){ca();fa=ua();var la=105,oa=null;if(null!=g){for(var ta=g;0<=ta;ta--)if(la+=U(q[ta]),la+50>fa){oa=ta+1;break}Q(q[null==oa?0:oa],!1)}});x.addClass("workbench-dynamictab-arrow-right");x.appendTo(c);x.hide();x.on("click",function(fa){null!=C&&(fa=C,Q(q[null==fa?q.length-1:fa],!1))});m.addClass("workbench-dynamictab-hide-fold");m.appendTo(c);m.hide();m.text("\u25b2");m.on("click",function(fa){var la=[];if(null!=g)for(var oa=0;oa<=g;oa++)la.push(q[oa]);if(null!=
C)for(oa=C;oa<q.length;oa++)la.push(q[oa]);la&&0<la.length&&(oa=$(fa.target),fa=$(fa.currentTarget),(h=fa.data("oDropdownSelectorMenu"))?ba():(h=new bb,h.setCustomItemPainter(G),h.addSelectedChangedListener(y),h.setUserObject(la),h.setItemModels(la),fa.data("oDropdownSelectorMenu",h),fa=h.getJqUi(),fa.data("whoCallMe",oa[0]),fa.appendTo(c),fa.addClass("workbench-dynamic-tab-hide-fold-drop"),fa.css("height",28*la.length+6+"px"),fa.css("z-index",65535),$(document.body).on("mousedown",S)))});H&&Ra(H)}c.resize(Ka);
return c};this.updateAllTabTitle=function(){if(q&&0<q.length)for(var E=0;E<q.length;E++)b.updateTabTitle(q[E])};this.updateTabTitle=function(E){var fa=c.children("#"+E.getId()),la=$(fa).find(".workbench-dynamictab-head-icon").first(),oa=$(fa).find(".workbench-dynamictab-head-text").first();la&&0<la.length&&oa&&0<oa.length&&(oa.attr("title",E.getTitle()),oa.text(E.getTitle()),pb(fa,la,oa))};var N=function(E){function fa(qb){b.setSelectedTabPane(E);Ra(E)}var la=E.getId(),oa=E.getCloseable(),ta=E.isLockAble(),
Ma=$("<div>");Ma.addClass("workbench-dynamictab-head");var lb=$("<div>");lb.addClass("workbench-dynamictab-head-text");Ma.attr("id",la);Ma.appendTo(b.getJqUi());lb.text(E.getTitle());lb.attr("title",E.getTitle());if(E.getIconName()){var mb=$("<div>");mb.addClass("workbench-dynamictab-head-icon");D.background(mb,E.getIconName());mb.on("click",fa);mb.appendTo(Ma)}lb.appendTo(Ma);lb.on("click",fa);if(oa){Ma.css("width",lb[0].clientWidth+45+"px");E.setCloseCallback(function(qb){b.removeTab(qb);for(var rb=
0;rb<p.length;rb++)(0,p[rb])(b,qb)});var cb=$("<div class='workbench-container-head-right-icon'>");D.background(cb,"icon_close");cb.addClass("workbench-container-head-right-close-icon");cb.on("mouseover",function(){D.background(cb,"icon_close_hover")});cb.on("mouseout",function(){D.background(cb,"icon_close")});cb.on("click",function(){E.onClose()});cb.hide();cb.appendTo(Ma);var jb=$("<div class='workbench-container-head-right-icon'>"),nb=$("<div class='workbench-container-lock-icon'>");nb.appendTo(jb);
jb.addClass("workbench-container-head-right-lock-icon");D.background(nb,"icon_unlock");jb.on("mouseover",function(){D.background(nb,E.isLock()?"icon_lock_hover":"icon_unlock_hover")});jb.on("mouseout",function(){D.background(nb,E.isLock()?"icon_lock":"icon_unlock")});jb.on("click",function(){E.doFunSwitchLockStateChecker()&&(E.setLock(!E.isLock()),E.isLock()?cb.hide():cb.show(),D.background(nb,E.isLock()?"icon_lock_hover":"icon_unlock_hover"),E.doFunSwitchLockState())});Ma.on("mouseover",function(){E.isLock()||
cb.show();jb.show()});Ma.on("mouseout",function(){cb.hide();jb.hide()});jb.hide();pb(Ma,mb,lb);ta&&jb.appendTo(Ma)}};this.addTab=function(E,fa){if(!E)throw Error("Add Tab Error: Tab cannot be null!");for(var la=null,oa=E.getId(),ta=null,Ma=0;Ma<q.length;Ma++)if(oa===q[Ma].getId()){la=q[Ma];(oa=V(la))&&"none"===oa[0].style.display&&(ta=Ma);break}if(fa){if(null!=ta){Q(la,!0);return}if(la){H&&la.getId()===H.getId()||(b.setSelectedTabPane(E),Ra(la));return}}else if(null!=ta||la)return;q.push(E);N(E);
Ka(E);fa&&(b.setSelectedTabPane(E),Ra(E))};var Q=function(E,fa){fa&&b.setSelectedTabPane(E);e&&E&&(O(E),K(),fa&&Ra(E))};this.setSelectedTabPane=function(E){z=H;H=E};this.getDynamicTabPanes=function(){return q};this.removeTab=function(E){if(!E)throw Error("Close Tab Error: Tab cannot be null!");var fa=E.getId(),la=va(fa),oa=H;if(H){va(H.getId());var ta=q[q.length-1];fa===H.getId()&&(oa=fa===ta.getId()?Number(la)-1:Number(la)+1,oa=q[oa])}q.splice(la,1);la=E.getJqUi();$(la[0]).remove();(E=V(E))&&E.remove();
Q(oa,!0);K()};this.addTabSelectedListener=function(E){t.push(E)};this.removeSelected=function(E){c.children(".workbench-dynamictab-head").removeClass("workbench-dynamictab-head_selected");E=E.getJqUi();for(var fa=e.children(),la=0;la<fa.length;la++)fa[la]==E[0]&&$(fa[la]).hide()};var ua=function(){return v?c.prop("clientWidth")-v.getJqUi().prop("clientWidth"):c.prop("clientWidth")};this.addTabCloseListener=function(E){p.push(E)};var O=function(E){E&&(E=va(E.getId()))&&na(E)},K=function(){g=0>g?null:
g;null==g&&null==C?(m.hide(),x.hide(),A.hide()):(m.show(),x.show(),A.show(),null==g&&null!=C?A.hide():null!=g&&null==C&&x.hide())},G=function(E,fa){E.addClass("workbench-dropdown-lists");var la=$("<div>");la.text(fa.getTitle());la.addClass("workbench-dropdown-lists-text");E.append(la)},S=function(E){E=E.target;if(E!==h.getJqUi().data("whoCallMe")){for(;E&&E!==document.body;){if(E===h.getJqUi()[0])return;E=$(E).parent()[0]}ba()}},ba=function(){$(document.body).off("mousedown",S);h&&(m.data("oDropdownSelectorMenu",
null),h.getJqUi().remove())},y=function(E,fa,la){E=la[0].getId();if(E=va(E))Q(q[E],!0),ba()},ca=function(){for(var E=0;E<q.length;E++)c.children("#"+q[E].getId()).show()},na=function(E){ca();for(var fa=ua(),la=105,oa=null,ta=E;ta<q.length;ta++)if(la+=U(q[ta]),la+50>fa){oa=ta-1;break}if(null==oa)for(ta=E-1;0<=ta;ta--){la+=U(q[ta]);if(la+50>fa){E=ta+1;break}0==ta&&(E=null)}fa=null==oa?q.length-1:oa;for(ta=null==E?0:E;ta<=fa;ta++)c.children("#"+q[ta].getId()).show();if(null!=E){for(ta=0;ta<E;ta++)ka(q[ta]);
g=E-1}else g=null;if(null!=oa){for(ta=oa+1;ta<q.length;ta++)ka(q[ta]);C=oa+1}else C=null},va=function(E){var fa=null;if(E)for(var la in q)if(E==q[la].getId()){fa=la;break}return fa},Ka=function(E){var fa=ua();if(q&&0<q.length){E=105+U(E);for(var la=null,oa=q.length-2;0<=oa;oa--)if(E+=U(q[oa]),E+50>fa){la=oa;break}if(null!=la){for(oa=0;oa<=la;oa++)ka(q[oa]);g=la;K()}}},U=function(E){return V(E).prop("offsetWidth")},V=function(E){return c.children("#"+E.getId())},ka=function(E){c.children("#"+E.getId()).hide()},
Ra=function(E){var fa=V(E);c.children(".workbench-dynamictab-head").removeClass("workbench-dynamictab-head_selected");fa.addClass("workbench-dynamictab-head_selected");fa=E.getJqUi();for(var la=e.children(),oa=!1,ta=0;ta<la.length;ta++)la[ta]==fa[0]?(oa=!0,$(la[ta]).show(),sb(E)):$(la[ta]).hide();oa||(u.layoutCtrlWithLRTB(fa,0,0,null,0,0,null),fa.appendTo(e),sb(E))},ob=function(E){for(var fa=0;fa<t.length;fa++)(0,t[fa])(b,E,z)},sb=function(E){u.isInDomTree(E.getJqUi()[0])?ob(E):setTimeout(function(){ob(E)},
10)},pb=function(E,fa,la){var oa=12,ta=17,Ma=la[0].clientWidth;70>Ma&&(oa=(115-ta-6-Ma)/2);Ma=oa+ta+6+Ma+oa;fa?u.layoutCtrlWithLRTB(fa,oa-2,null,null,null,null,null):ta=0;u.layoutCtrlWithLRTB(la,oa+ta+6-2,null,null,null,null,null);E.css("width",Ma+"px")}}function ra(){var b=this,c,e,m,A,x,t,q,H,z,h,g,C,p,v,N,Q,ua,O,K,G,S,ba=!1,y,ca;this.getScene=function(){throw Error("override me");};this.getCardId=function(){return c+h};this.setMenuItemInfo=function(U){p=U};this.setWorkbenchId=function(U){c=U};
this.setFunRemoveSelf=function(U){H=U};this.setFunRefChangeCallback=function(U){N=U};this.setFunCardTitleChangeCallback=function(U){Q=U};this.setFunUpdateWidgetIdCallback=function(U){O=U};this.show=function(U){e=U;na().appendTo(U);q||(q=$("<div>"),u.layoutCtrlWithLRTB(q,0,0,null,0,0,null),q.css({"z-index":"-1",background:"#fff"}));q.appendTo(U)};var na=function(){m||(m=$("<div class='workbench-card-main'>"),x=$("<div class='workbench-card-head'>"),t=$("<div>"),t.addClass(b.getContentStyleClass()),
b.protectedCustomHead(m),b.protectedCustomContent(t),x.appendTo(m),t.appendTo(m));return m};this.protectedCustomContent=function(U){throw Error("override me");};this.initHeadTitle=function(){m.addClass("workbench-div-card-main");y=$("<div class='workbench-card-title-area-showall'>");$(e).on("mouseover",function(){y.addClass("workbench-card-title-area")});$(e).on("mouseout",function(){y.removeClass("workbench-card-title-area")});A=$("<div class='workbench-card-title sa-qing-publish-fontfamily'>");
A.text(z);A.attr("title",z);var U=$("<div>");D.background(U,b.getScene());U.addClass("workbench-card-icon");var V=$("<div/>");V.addClass("workbench-card-title-edit-icon");D.backgroundWithHover(V,"card_edit");V.on("click",Ka);var ka=$("<div class='workbench-card-drag-cover'>");y.on("mouseover",function(Ra){ba&&V.show()});y.on("mouseout",function(Ra){V.hide()});V.hide();ka.appendTo(x);U.appendTo(y);A.appendTo(y);V.appendTo(y);y.appendTo(x)};this.protectedCustomHead=function(U){throw Error("override me");
};this.redraw=function(){throw Error("override me");};this.getContentStyleClass=function(){return"workbench-div-card-content"};this.setJsonReferenceMap=function(U){C=U;N&&N()};this.getJsonReferenceMap=function(){return C};this.protectedRemoveSelf=function(){H&&H()};this.changeTitle=function(U){z=U;A&&A.text(U);A&&A.attr("title",U)};this.isNeedShowOptBtn=function(){return ba};this.setNeedShowOptBtn=function(U){ba=U};this.setTitle=function(U){z=U};this.setWidgetId=function(U){h=U};this.getWidgetId=
function(){return h};this.setWidgetBizId=function(U){g=U};var va=function(){if(!v){v=new M;var U=L.getWorkbenchRemoteUrl();v.setRemoteUrl(U)}return v};this.setExecutedCallback=function(U){ua=U};this.getExecutedStatus=function(){return K};this.setFunOpenNewTab=function(U){G=U};this.getFunOpenNewTab=function(){return G};this.fireOpenNewTab=function(U,V){G&&G(U,V)};var Ka=function(){var U=new Ja(z);U.setFunCloseDialogCallBack(function(V){b.changeTitle(V);Q&&Q(V)});U.showDialog()};this.customHandleError=
function(){};this.refreshCardTitle=function(U){(new da(va(),function(V){var ka=Pa.createWidgetModel(V.widgetType);ka.fromJsonObject(V);b.changeTitle(ka.getDisplayName()?ka.getDisplayName():ka.getName());U&&U()},function(V,ka,Ra){U&&U();return!0})).loadWorkbenchCard(c,C)};this.destroy=function(){};this.getErrorCode=function(){return ca};this.protectedMethod={getContentUi:function(){return t},getRefType:function(){var U=b.getJsonReferenceMap();return U?U.refType:p.getRefType()},getMainUi:na,getWidgetBizId:function(){return g},
getRefMapUid:function(){var U=b.getJsonReferenceMap();if(U)return U.uid},getTitle:function(){return z},appendOperateBtnUI:function(U){for(var V=5,ka=0,Ra=U.length;ka<Ra;ka++)U[ka].css({position:"absolute",top:"2px",right:V+"px"}),V+=25,x.append(U[ka])},getWorkbenchId:function(){return c},getMenuItemInfo:function(){return p},getWorkbenchRemoteImpl:va,getJqHead:function(){return x},getJqOwner:function(){return e},setExecutedStatus:function(U){K=U},getExecutedCallback:function(){return ua},createEditTitleDialog:Ka,
handleError:function(U,V,ka,Ra){ca=U;!1!==Ra&&(ba=!1,S||(S=new com.kingdee.bos.qing.scene.common.square.exhibition.CardErrorUi(t)),S.show(U,V,ka),b.customHandleError())},getFunUpdateWidgetIdCallback:function(){return O}}}function T(){ra.call(this);var b=this,c=this.protectedMethod,e,m=eb.createUUID(),A,x,t=T.SCHEMA_BIZ_VERSION;this.getCardExhibition=function(){throw Error("override me");};this.remoteReferenceMap=function(p,v){if(b.getJsonReferenceMap())p&&p();else{var N=c.getContentUi(),Q=c.getWidgetBizId(),
ua=c.getMenuItemInfo().getRefType();v=new da(c.getWorkbenchRemoteImpl(),function(O){b.setJsonReferenceMap(O.ref);p&&p()},v);v.setBlockingJqUi(N);v.getReferenceMap(Q,ua)}};this.remoteSchemaContent=function(p,v){throw Error("override me");};this.resetSchema=function(p,v,N){(new da(c.getWorkbenchRemoteImpl(),v,N)).resetSchema(c.getWorkbenchId(),p)};this.setJsonModelBook=function(p){A=p};this.getJsonModelBook=function(){return A};this.setModelBookVersion=function(p){t=p};this.getModelBookVersion=function(){return t};
this.setJsonOperation=function(p){x=p};this.protectedCustomContent=function(p){p.empty();c.setExecutedStatus(!1);var v=function(N,Q,ua){c.handleError(N,Q,ua);return!0};b.remoteReferenceMap(function(){z(p,function(N){b.remoteSchemaContent(function(){h(N,b.getJsonModelBook())},v)})},function(N,Q,ua){c.handleError(N,Q,ua);return!0})};this.protectedRefreshChart=function(p,v){p.empty();var N=$("<div>");N.appendTo(p);u.layoutCtrlWithLRTB(N,0,0,null,0,0,null);h(p,v);c.setExecutedStatus(!1)};this.protectedOpenDesigner=
function(p,v,N){var Q=new za,ua=function(O){Q.hide();O&&(b.setModelBookVersion(T.SCHEMA_MODIFIED_VERSION),N(O))};Q.setIsSquare(v);Q.setRemoteUrl(L.getCoreRemoteUrl());Q.setRemoteTag(m);Q.setTag(m);Q.setSquareOrLonger(v);Q.setClosable(!0);Q.setDesignerOperationJudger(e.getDesignerOperationJudger());Q.setFunOpenNewTab(b.getFunOpenNewTab());Q.setSchemaLoader(function(O,K){O.setJsonModelBook(A);K(!0)});Q.setSchemaSaver(function(O){O.getConductor().isDirty()?(b.getScene()===Ba.WidgetType_Square?P.interestInBehavior(P.WORKBENCH_GRID_SQUARE_OPERATION,
P.WORKBENCH_GRID_SQUARE_OPERATION_DESIGNER_FINISH):b.getScene()===Ba.WidgetType_Longer&&P.interestInBehavior(P.WORKBENCH_GRID_LONGER_OPERATION,P.WORKBENCH_GRID_LONGER_OPERATION_DESIGNER_FINISH),q(O,ua)):ua()});Q.setSchemaReseter(function(O){b.getScene()===Ba.WidgetType_Square?P.interestInBehavior(P.WORKBENCH_GRID_SQUARE_OPERATION,P.WORKBENCH_GRID_SQUARE_OPERATION_DESIGNER_RESET):b.getScene()===Ba.WidgetType_Longer&&P.interestInBehavior(P.WORKBENCH_GRID_LONGER_OPERATION,P.WORKBENCH_GRID_LONGER_OPERATION_DESIGNER_RESET);
H(ua)});Q.show(p,function(){ua(null)});c.setExecutedStatus(!1)};this.saveSchema=function(p,v,N,Q){(new da(c.getWorkbenchRemoteImpl(),N,Q)).saveSchema(c.getWorkbenchId(),p,v)};this.getExhibition=function(){return e};this.redraw=function(){g();e&&e.redraw()};var q=function(p,v){var N=p.getJsonModelBook();b.saveSchema(b.getJsonReferenceMap(),N,function(Q){v(N);b.setJsonReferenceMap(b.getJsonReferenceMap())},function(Q,ua){if(909002===Q)return Q=R.createFeedbackDialog(),Q.setMessage(f.get("noSelectMapTemplate",
"\u8bf7\u9009\u62e9\u5730\u56fe\u6a21\u677f")),Q.setMsgImageType(R.MSG_WARNING),Q.setOptionType(R.OPTION_OK),Q.setButtonText(R.OPTION_OK,f.get("iknow","\u6211\u77e5\u9053\u4e86")),Q.showDialog(),!0;v();return!0})},H=function(p){b.resetSchema(b.getJsonReferenceMap(),function(v){p(v);b.setJsonReferenceMap(b.getJsonReferenceMap())},function(v,N){p();return!0})},z=function(p,v){var N=$("<div>");N.appendTo(p);u.layoutCtrlWithLRTB(N,0,0,null,0,0,null);var Q=new com.kingdee.bos.qing.prepare.WorkbenchCardDataExtractor;
Q.setTag(m);Q.setWidgetBizId(c.getWidgetBizId());Q.setJsonReferenceMap(b.getJsonReferenceMap());Q.setRefType(c.getRefType());Q.setWidgetScene(b.getScene());Q.getJqUi().appendTo(p);Q.start();Q.setErrorCallback(function(ua,O,K){b.setNeedShowOptBtn(!1);C(!1);c.handleError(ua,O,K,!1)});Q.setExtractDataFinishedSuccessCallback(function(){b.setNeedShowOptBtn(!0);v(N)})},h=function(p,v){g();var N=L.getCoreRemoteUrl();e=b.getCardExhibition();e.setRemoteUrl(N);e.setRemoteTag(m);e.setExecutedListener(C);e.setSchemaContent(v);
x&&x.operation&&e.setNoOperValue(x.operation["2"]|x.operation["1"]);e.show(p)};this.getTag=function(){return m};var g=function(){var p=c.getMainUi(),v=c.getContentUi(),N=p.width(),Q=p.height();p=parseInt(v.css("left").replace("px",""));var ua=parseInt(v.css("top").replace("px","")),O=parseInt(v.css("right").replace("px","")),K=parseInt(v.css("bottom").replace("px",""));Q=Math.floor(Q-ua-K);v.css("width",Math.floor(N-p-O));v.css("height",Q)},C=function(p){c.setExecutedStatus(!0);var v=c.getExecutedCallback();
v&&v(p)}}function sa(){ra.call(this);var b=this,c=this.protectedMethod,e,m;this.redraw=function(){};this.protectedCustomContent=function(t){A(t);c.setExecutedStatus(!1);setTimeout(function(){c.setExecutedStatus(!0);var q=c.getExecutedCallback();q&&q()},5E3)};this.loadContent=function(t){throw Error("override me");};var A=function(t){if(b.getJsonReferenceMap())b.setNeedShowOptBtn(!0),b.loadContent(t);else{var q=new da(c.getWorkbenchRemoteImpl(),function(H){H=H.ref;var z=c.getFunUpdateWidgetIdCallback();
z&&H.refToId&&H.uid&&z(H.refToId+"#"+H.uid);b.setNeedShowOptBtn(!0);b.setJsonReferenceMap(H);b.loadContent(t)},function(H,z,h){c.handleError(H,z,h);return!0});q.setBlockingJqUi(t);q.getReferenceMap(c.getWidgetBizId(),b.getPublishType())}};this.addOperateIcon=function(t){e=$("<div class = 'sa-qing-publish-card-icon'>");m=$("<div class = 'sa-qing-publish-card-icon'>");e.on("click",x);l.background(e,"btn-refresh");e.on("mouseover",function(q){l.background(e,"btn-refresh-on")});e.on("mouseout",function(q){l.background(e,
"btn-refresh")});e.attr("title",Da.get("cardRefresh","\u5237\u65b0"));$(c.getJqOwner()).on("mouseenter",function(){e.show();m.show()});$(c.getJqOwner()).on("mouseleave",function(){e.hide();m.hide()});m.on("click",b.protectedRemoveSelf);D.background(m,"icon_delete");m.on("mouseover",function(q){D.background(m,"icon_delete_hover")});m.on("mouseout",function(q){D.background(m,"icon_delete")});m.attr("title",f.get("delete","\u5220\u9664"));e.appendTo(t);e.hide();m.appendTo(t);m.hide();c.appendOperateBtnUI([m,
e])};var x=function(){b.refreshCardTitle();b.protectedCustomContent(c.getContentUi())}}function ya(){var b=this,c;this.setNoOperValue=function(e){c=e};this.getNoOperValue=function(){return c};this.checkOperatePermAndPrompt=function(e,m){if(!c)return!0;var A=!0;if(m===ya.PERM_TYPE_ENTER_ANALYSIS){if(0!==(c&1)){A=!1;var x=f.get("enterAnalysis","\u8fdb\u5165\u201c\u6570\u636e\u5206\u6790\u201d")}}else if(m===ya.PERM_TYPE_ENTER_SQUARE)0!==(c&128)&&(A=!1,x=f.get("enterEdit","\u8fdb\u5165\u8bbe\u8ba1\u5668"));
else throw Error("unknown permType");A||(m=f.get("cardEditUnaccessable","\u60a8\u6ca1\u6709#1\u7684\u6743\u9650").replace("#1",x),b.displayPrompt(e,m));return A};this.displayPrompt=function(e,m){throw Error("override me.");};this.getDesignerOperationJudger=function(){throw Error("override me.");}}function Fa(){com.kingdee.bos.qing.AbstractSquareDivScene.call(this);ya.call(this);var b=this,c;this.setSchemaContent=function(e){c=e};this.protectedLoadingImpl=function(e){e(c)};this.displayPrompt=function(e,
m){b.displayActionPrompt(e,m)};this.protectedCustomInitEnv=function(){var e=L.getLinkageRemoteURL(),m=new com.kingdee.bos.qing.linkage.LinkageManage;m.setCurrentLinkageTag(b.protectedGetRemoteTag());m.initRuntime(e,com.kingdee.bos.qing.integration.LinkageJumper.jump)};this.getDesignerOperationJudger=function(){}}function Z(){com.kingdee.bos.qing.AbstractLongerDivScene.call(this);ya.call(this);var b=this,c,e;this.setSchemaContent=function(m){c=m};this.protectedLoadingImpl=function(m){m(c)};this.displayPrompt=
function(m,A){b.displayActionPrompt(m,A)};this.protectedCustomInitEnv=function(){var m=L.getLinkageRemoteURL(),A=new com.kingdee.bos.qing.linkage.LinkageManage;A.setCurrentLinkageTag(b.protectedGetRemoteTag());A.initRuntime(m,com.kingdee.bos.qing.integration.LinkageJumper.jump)};this.protectedLoadDesignerOperationJudger=function(m){e||(e=new com.kingdee.bos.qing.publish.model.LongerDesignerOperationJudgerModel(b.getNoOperValue()));m(e)};this.getDesignerOperationJudger=function(){e||(e=new com.kingdee.bos.qing.publish.model.LongerDesignerOperationJudgerModel(b.getNoOperValue()));
return e}}function za(){com.kingdee.bos.qing.AbstractModalDesignerScene.call(this);var b,c,e,m,A=!0,x,t=!0,q,H,z=!0;this.setIsSquare=function(g){A=g};this.protectedIsSquare=function(){return A};this.setTag=function(g){q=g};this.setFunOpenNewTab=function(g){H=g};this.hideResetBtn=function(){z=!1};this.protectedInitDesigner=function(g){h();var C=Da.get("finish","\u5b8c\u6210");g.getConductor().insertToolbarButton(function(v){c(g)},"btn_save",C,null);if(z){C=new Za;var p=new Sa(function(v){v=new Wa;
v.setText(Da.get("resetConfirmTips","\u60a8\u786e\u5b9a\u8981\u91cd\u7f6e\u5230\u53d1\u5e03\u6700\u521d\u59cb\u7684\u72b6\u6001\uff0c\u5e76\u9000\u51fa\u5417\uff1f"));v.setConfirmedListener(function(Q){Q&&e(g)});var N=m.getJqUi();v.show(N)});p.setText(Da.get("resetAndBack","\u91cd\u7f6e\u5e76\u8fd4\u56de"));C.addItemModel(p);m=g.getConductor().insertToolbarMenu(C,"btn_reset",Da.get("reset","\u91cd\u7f6e"),null)}g.setDesignerOperationJudger(t?null:x,t?x:null);(C=window.com.kingdee.bos.qing.AnalysisSceneOuterApi)&&
C.setFunOpenNewTab&&C.setFunOpenNewTab(H)};this.protectedLoading=function(g,C){b(g,C)};this.setSchemaLoader=function(g){b=g};this.setSchemaSaver=function(g){c=g};this.setSchemaReseter=function(g){e=g};this.setDesignerOperationJudger=function(g){x=g};this.setSquareOrLonger=function(g){t=g};this.protectedIsSquare=function(){return t};var h=function(){var g=L.getLinkageRemoteURL(),C=new com.kingdee.bos.qing.linkage.LinkageManage;C.setCurrentLinkageTag(q);C.initDesigntime(g,com.kingdee.bos.qing.integration.LinkageJumper.jump)}}
function Ha(b,c,e,m){var A=this,x,t,q,H,z,h,g;this.setJsonReferenceMap=function(N){g=N};this.setChangeSchemaListener=function(N){z=N};this.setChangeSchemaChecker=function(N){h=N};this.setRemoteImpl=function(N){t=N};this.getJqUi=function(){x||(q||(q=new qa),q.addActionListeners(p),x=q.getJqUi());return x};this.resize=function(){q.initSchemaList();H&&H.setAnimateHeight(A.getHeight(),C)};this.loadAttrs=function(N){q||(q=new qa);N=new da(t,function(Q){if(Q){for(var ua=[],O=0;O<Q.length;O++){var K=new db;
K.fromJsonObject(Q[O]);ua.push(K)}q.setAllSchemas(ua);q.setSchemas(ua);q.initSchemaList();H&&H.setAnimateHeight(A.getHeight(),C)}},function(Q){return!0});N.setBlockingJqUi(m);N.getPublishSchema(c,b)};this.getHeight=function(){return x.prop("offsetHeight")+1};var C=function(){var N=H.getMaxHeight();null!=N&&q.setMaxHeight(N-25)},p={itemClickListener:function(N){h?h(v,N):v()},selectedChangedListener:function(N){N=N.getSelected();q.setSelectedSchema(N)}},v=function(){var N=q.getSelectedSchema();N&&null!=
N.getFId()&&g&&(g.schemaId=N.getFId(),(new da(t,function(Q){Q&&H&&(H.setAnimateHeight(0),z&&z(Q.model,g,Q.version))},function(Q){return!0})).loadSchema(c,g))};this.setParameterPassToUI=function(N){H=N}}function qa(){var b,c,e;this.setAllSchemas=function(x){e=x};this.getAllSchemas=function(){return e};this.setSchemas=function(x){c.getJqUi().css("top","0");c.setItemModels(x)};this.setMaxHeight=function(x){var t=b.find(".schema-frequentlyused").css("marginTop"),q=0;null!=t&&2<t.length&&(q=t.substring(0,
t.length-2));b.css("max-height",x+"px");c.getJqUi().css("max-height",x-c.getJqUi().parent().prop("offsetTop")-c.getJqUi().prop("offsetTop")-q-2+"px")};this.setSelectedSchema=function(x){c.setSelected(x)};this.getSelectedSchema=function(){return c.getSelected()};this.getSchemas=function(){return c.getItemModels()};this.addActionListeners=function(x){c.addItemClickListener(function(t,q){x.itemClickListener(t)});c.addSelectedChangedListener(function(t){x.selectedChangedListener(t)})};this.getJqUi=function(){return b};
this.initSchemaList=function(){var x=c.getJqUi();0<x.length&&(c.getJqUi().css("height","30px"),c.getJqUi().css("height",x.prop("scrollHeight")))};var m=function(x,t,q){q.text(t.getSchemaName());q.prop("title",t.getSchemaName());t&&t.IsDefault()&&(q.text(f.get("def","(\u9ed8\u8ba4)")+t.getSchemaName()),q.prop("title",f.get("def","(\u9ed8\u8ba4)")+t.getSchemaName()),q.css("font-weight","bold"));x.append(q)},A=function(){c=new Na;c.setCustomItemPainter(m);var x=$("<div>");x.addClass("schema-content-div");
x.append(c.getJqUi());var t=$("<div>");t.addClass("schema-frequentlyused");t.addClass("schema-default");t.append(x);return t};(function(){b=$("<div>");b.on("click",function(x){Va(x)});b.addClass("schema-mainPan");b.append(A())})()}function La(b){this.getMaxHeight=function(){var c=b.getJqContainer().parent().css("maxHeight");return null!=c&&2<c.length?c.substring(0,c.length-2):null};this.setAnimateHeight=function(c,e){b.animateHeight(c,e)}}function Ea(b){var c,e,m,A;(function(){c=$("<div>");c.addClass("workbench-ctrl-common-modallayer");
c.appendTo(b);c.on("click",function(q){x()});e=$("<div>");e.addClass("workbench-toolbar-dropdown-area");e.appendTo(c);e.css("max-height",Math.floor(c.prop("clientHeight")-e.prop("offsetTop")-30));m=$("<div>");m.addClass("workbench-toolbar-dropdown-container");m.appendTo(e);A=$("<div>");A.addClass("workbench-toolbar-dropdown-collapse");A.appendTo(e);var t=$("<div>");t.text("<<");t.addClass("workbench-toolbar-dropdown-collapse-text");t.appendTo(A)})();this.getJqContainer=function(){return m};this.animateHeight=
function(t,q){0===t?x():(t+=A.prop("offsetHeight"),e&&e.animate({height:t},{duration:100,queue:!1,complete:function(){q&&q()}}))};var x=function(){e&&(e.animate({height:0},function(){c.remove()}),e=null)}}function Va(b){b&&b.stopPropagation?b.stopPropagation():window.event&&(window.event.cancelBubble=!0)}function Ja(b){B.call(this);var c=this,e=c.protectedMethod,m,A,x;(function(){c.setSize(390,200);var t=f.get("modifyCardTitle","\u4fee\u6539\u5361\u7247\u540d\u79f0");e.setTitle(t);e.setContentPaneCreator(function(){if(!m){m=
$("<div>");var q=new ja;q.setRequired(!0);q.setText(f.get("cardName","\u5361\u7247\u540d\u79f0"));q=q.getJqUi();q.attr("title",f.get("cardName","\u5361\u7247\u540d\u79f0"));m.append(q);u.layoutCtrl(q,25,15,70,23);A=new ea;A.setText(b);q=A.getJqUi();m.append(q);u.layoutCtrl(q,103,15,217,23)}return m});e.setClosingChecker(function(q){q=A.getText().trim();if(!q)return e.getMessageCurtain().showPrompt(f.get("cardNameIsBlank","\u5361\u7247\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\u3002")),!1;if(50<q.length)return e.getMessageCurtain().showPrompt(f.get("nameTooLong",
"\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002")),!1;q!==b&&x&&x(q);return!0});e.setClosingAction(function(){e.destroy();return!0})})();this.setFunCloseDialogCallBack=function(t){x=t}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.workbench&&(com.kingdee.bos.qing.workbench=
{});var Ca=com.kingdee.bos.qing.workbench;Ca.WorkbenchTabContainer=function(){var b=this,c,e,m,A,x,t,q,H=[],z;this.setMessageCurtain=function(G){z=G};this.getJqUi=function(){c||(c=$("<div>"),e=new ma,e.addTabSelectedListener(g),e.addTabCloseListener(C),A=new n,A.setShowSchemaAreaHandler(p),A.setFixedTabClickHandler(function(G){v(!0)}),e.setWorkbenchFixedTabHead(A),L.createMessageBoxUi(e.getJqUi()),c.append(e.getJqUi()),h());return c};var h=function(){com.kingdee.bos.qing.assistant.common.Integration.setOpenQingGPTListener(function(ba){if(com.kingdee.bos.qing.assistant.common.Integration.isShowAssistantPanel()){var y=
b.getSelectedTab();y instanceof pa||y instanceof ia?y.getDroppableHandler().openQingGPT(ba):"click"==ba.triggerEvent&&z&&z.showPrompt(f.get("unSupportCosmicTips","\u5f53\u524d\u9875\u7b7e\u6682\u4e0d\u652f\u6301\u201cCosmic \u667a\u80fd\u6570\u636e\u5206\u6790\u201d\u529f\u80fd\uff0c\u8bf7\u524d\u5f80\u201c\u5de5\u4f5c\u53f0\u201d\u7c7b\u578b\u7684\u9875\u7b7e\u4e2d\u4f7f\u7528\u3002"))}else"click"==ba.triggerEvent&&(ba=com.kingdee.bos.qing.ui.component.MessageDialog,y=ba.createFeedbackDialog(),y.setTitle(f.get("operationTips",
"\u64cd\u4f5c\u63d0\u9192")),y.setMsgImageType(ba.MSG_CONFIRM),y.setOptionType(ba.OPTION_OK),y.setButtonText(ba.RETURN_OK,f.get("close","\u5173\u95ed")),y.setMessage(f.get("cosmicComingTips","\u667a\u80fd\u5206\u6790\u52a9\u624b\u5373\u5c06\u4e0a\u7ebf\uff0c\u656c\u8bf7\u671f\u5f85\uff01")),y.showDialog())});if(-1!=location.href.indexOf("devtest.kingdee.com")){var G=$(top.document.querySelector("#gpt_gai_panel")),S=$(top.document.querySelector(".gptDragBox--fWxAX"));S&&S.remove();G.off("click");G.on("click",
function(){for(var ba={type:"openQingGPT",data:{triggerEvent:"click",switchSide:"true"}},y=top.window.frames,ca=0;ca<y.length;ca++)y[ca].postMessage(JSON.stringify(ba),"*")})}};this.getFixedTabHeadUi=function(){return A.getJqUi()};this.updateTabHeadUi=function(){A.updateUi();e&&e.updateAllTabTitle()};this.getSelectedTab=function(){return t?m:x};var g=function(G,S,ba){x=S;v(!1);K(S)},C=function(G,S){0===G.getDynamicTabPanes().length&&v(!0);Q(S)};this.checkNeedLoadWorkbenchGrid=function(G,S,ba){var y=
ua(G.getWorkbenchId());if(!y)return p(!1),!0;S?y instanceof ia?(p(!1),b.setFixedTab(y,!0)):(p(!1),b.addGridTab(y,!0)):y instanceof pa?(p(!1),b.addGridTab(y,!0)):ba(G,S);return!1};this.updateWorkbenchGridTabPaneTitle=function(G){if(G&&G.getWorkbenchId()&&G.getWorkbenchName()){var S=G.getWorkbenchId(),ba=G.getWorkbenchName();if(S=ua(S))S.setWorkbench(G),S instanceof pa?e.updateTabTitle(S,ba):S instanceof ia&&A.setTitle(ba)}};this.addTab=function(G,S){e.addTab(G,S)};this.addGridTab=function(G,S){N(G);
e.addTab(G,S);S&&K(G)};this.setFixedTab=function(G,S){m===G?v(!0):m?m&&(m.setCloseCallback(function(){v(!0);Q(m);m.getJqUi().remove();m.getWorkbenchGrid().getGrid().destroy();O(G);K(G)}),m.onClose()):(O(G),K(G),v(!0))};this.getWorkbenchGridTabPane=function(G){return ua(G)};this.removeWorkbenchGridTabPane=function(G){G=ua(G);if(G instanceof pa)e.removeTab(G);else if(G instanceof ia)G.onClose()};this.setShowSchemaArea=function(G){q=G};this.onSchemaAreaOpended=function(G){A.setOpenSchema(G)};var p=function(G){q&&
q(G)},v=function(G){(t=G)?(A.setSelected(!0),m.setSelected(!0),x&&e.removeSelected(x),e.setSelectedTabPane(null)):(A.setSelected(!1),m.setSelected(!1));L.fireMenuChangeListener()};this.getDynamicTabPanes=function(){return e.getDynamicTabPanes()};this.resize=function(){e.resize()};var N=function(G){if(ua(G.getId()))return!1;H.push(G);return!0},Q=function(G){for(var S=0;S<H.length;S++)if(H[S].getId()===G.getId())return H.splice(S,1),!0;return!1},ua=function(G){for(var S=0;S<H.length;S++)if(H[S].getId()===
G)return H[S]},O=function(G){m=G;N(G);e.getJqUi().find(".workbench-dynamictab-container").append(m.getJqUi());G=m.getTitle();A.setTitle(G)},K=function(G){(G instanceof ia||G instanceof pa)&&!G.getAlreadyInit()&&G.doInitGridAction()}};Ca.WorkbenchIFrameTabPane=function(b,c){ab.AbstractTabPane.call(this);X.call(this);var e,m=this,A,x,t,q,H;this.setIconName=function(g){e=g};this.getIconName=function(){return e};this.setFunOpenNewTab=function(g){H=g};this.getId=function(){return b};this.setTitle=function(g){A=
g};this.getTitle=function(){return A};this.getJqUi=function(){x||(x=$("<div>"),t=$("<iframe>"),t.on("load",function(){try{var g=t[0].contentWindow;if(g&&g.com&&g.com.kingdee&&g.com.kingdee.bos&&g.com.kingdee.bos.qing){var C=g.com.kingdee.bos.qing.AnalysisSceneOuterApi;C&&(C.setClosingRequestListener(m.onClose),C.setFunOpenNewTab&&C.setFunOpenNewTab(H))}}catch(p){}}),t.attr("src",c),t.attr("name","QING_CONTEXT_TAB"),t.attr("allowFullscreen",!0),t.attr("allowtransparency",!0),t.attr("loading","lazy"),
t.addClass("workbench-rightpane-tab-iframe ."+b),x.addClass("workbench-rightpane-tab-iframe"),x.append(t));return x};this.protectedAskCloseable=function(g){try{if(t){var C=t[0].contentWindow;if(C&&C.com&&C.com.kingdee&&C.com.kingdee.bos&&C.com.kingdee.bos.qing)var p=C.com.kingdee.bos.qing.AnalysisSceneOuterApi;p&&p.isDirtyToForbidClosing()?h(g):g(!0)}else g(!0)}catch(v){g(!0)}};this.toggleMask=function(g){if(!q){var C=$("<div>"),p=$("<div>");p.addClass("sa-ctrl-msgct");p.addClass("sa-ctrl-msgct_prompt");
var v=$("<div>");v.addClass("sa-ctrl-msgct-icon");Xa.background(v,"msg-prompt");v.appendTo(p);v=$("<div>");v.addClass("sa-ctrl-msgct-title");v.text(f.get("workbenchIframeDragHintTitle","\u63d0\u793a"));v.appendTo(p);v=$("<div>");v.addClass("sa-ctrl-msgct-text");v.text(f.get("workbenchIframeDragHintText","\u5f53\u524d\u6253\u5f00\u7684\u9875\u7b7e\u4e0d\u662f\u5de5\u4f5c\u53f0\u9875\u7b7e\uff0c\u65e0\u6cd5\u5c06\u5de6\u4fa7\u5185\u5bb9\u62d6\u62fd\u5230\u5f53\u524d\u9875\u7b7e\u3002"));v.appendTo(p);
p.appendTo(C);p=$("<div>");u.layoutCtrlWithLRTB(p,0,0,null,0,0);p.css("background-color","#3737377f");p.appendTo(C);u.layoutCtrlWithLRTB(C,0,0,null,0,0);C.appendTo(x);q=C}g?q.show():q.hide()};var z=!0,h=function(g){if(z){var C=com.kingdee.bos.qing.ui.component.MessageDialog,p=C.createFeedbackDialog();p.setMsgImageType(C.MSG_CONFIRM);p.setButtonText(C.RETURN_OK,f.get("sureExit","\u76f4\u63a5\u9000\u51fa"));p.setButtonText(C.RETURN_CANCEL,f.get("sureReturn","\u8fd4\u56de\u7f16\u8f91"));var v=A;v&&25<
v.length&&(v=v.substring(0,25)+"...");p.setMessage(f.get("confirmExit","\u201c#1\u201d \u68c0\u6d4b\u5230\u60a8\u6709\u66f4\u6539\u5185\u5bb9\uff0c\u662f\u5426\u4e0d\u4fdd\u5b58\u76f4\u63a5\u9000\u51fa\uff1f\u82e5\u4e0d\u4fdd\u5b58\uff0c\u5c06\u4e22\u5931\u8fd9\u4e9b\u66f4\u6539\u3002").replace("#1",v));p.showDialog();p.setClosingChecker(function(N){N==C.RETURN_OK?((N=t[0].contentWindow.com.kingdee.bos.qing.AnalysisSceneOuterApi)&&N.doBeforeClosing(),g(!0)):g(!1);return!0});p.setClosedAction(function(N){z=
!0});z=!1}}};Ca.WorkbenchFixedTabPane=ia;Ca.WorkbenchGridTabPane=pa;Ca.WorkBenchMenuPane=function(){var b,c=[],e,m,A,x,t,q,H,z=!1,h=new Qa;this.getJqUi=function(){if(!b){b=$("<div>");b.addClass("workbench-menu-lists");g();var O=e.getJqUi(),K=O.find(".sa-ctrl-common-border");K&&K.css("border","0px solid #dbdbdb");b.append(O)}return b};this.setSearchText=function(O){t=O};this.getCurrentSelectedNode=function(){return x};this.setSelected=function(O){z=!0;e.setSelecteds(O)};var g=function(){e||(e=new bb,
e.setCustomItemPainter(N),e.addSelectedChangedListener(C),e.setUserObject(c),e.setItemModels(c),setTimeout(function(){L.fireMenuChangeListener()},500))},C=function(O,K,G){x=G=G&&0<G.length?G[0]:K[0]?K[0]:A;z||(G instanceof fb?(G.setOpenDir(!G.isOpenDir()),v(G,!1),ua(O.getUserObject())):m&&m(G));K=(K=(K=K[0])?K:A)?K:G;var S=O.getJqUi().find(".workbench-menu-lists-item-selected");S&&S.removeClass("workbench-menu-lists-item-selected");(S=O.getJqUi().find(".workbench-lower-triangle-selected"))&&S.removeClass("workbench-lower-triangle-selected");
(S=O.getJqUi().find(".workbench-right-triangle-selected"))&&S.removeClass("workbench-right-triangle-selected");S=O.getItemUiByModel(G);S.addClass("sa-ctrl-list-item_selected_enabled");var ba=S.find(".workbench-menu-lists-dir-text");ba&&ba.addClass("workbench-menu-lists-item-selected");K instanceof fb||(ba=O.getItemUiByModel(K).find(".workbench-menu-lists-item-icon"),D.background(ba,K.getScene()),K.isPreset()&&(O=O.getJqUi().find(".workbench-menu-lists-item-preset-selected"))&&O.removeClass("workbench-menu-lists-item-preset-selected"));
G instanceof fb?(O=S.find(".workbench-menu-lists-dir-icon"),p(G.isOpenDir(),O,!0)):((O=S.find(".workbench-menu-lists-item-icon"))&&D.background(O,G.getScene()+"-selected"),G.isPreset()&&(G=S.find(".workbench-menu-lists-item-preset-tag"))&&G.addClass("workbench-menu-lists-item-preset-selected"));z=!1},p=function(O,K,G){O?(K.addClass("workbench-lower-triangle"),G&&K.addClass("workbench-lower-triangle-selected"),K.removeClass("workbench-right-triangle"),K.removeClass("workbench-right-triangle-selected")):
(K.addClass("workbench-right-triangle"),G&&K.addClass("workbench-right-triangle-selected"),K.removeClass("workbench-lower-triangle"),K.removeClass("workbench-lower-triangle-selected"))},v=function(O,K){O.setHidden(K);K=O.getChildren();if(O.getChildren())for(O=0;O<K.length;O++)K[O]instanceof fb?K[O].getParentNode().isOpenDir()&&!K[O].getParentNode().isHidden()?v(K[O],!K[O].isHidden()):v(K[O],!0):K[O].getParentNode().isHidden()||!K[O].getParentNode().isOpenDir()?K[O].setHidden(!0):K[O].setHidden(!K[O].isHidden())},
N=function(O,K){if(K){if(K instanceof fb){O.addClass("workbench-menu-lists-dir");var G=$("<div>"),S=$("<span>"),ba=K.getGroupName(),y=Ga.createWarning();u.layoutCtrl(y,0,10);ba===Ua.CLOUD_HAS_BEEN_DELETED?(ba=f.get("cloudHasBeenDeleted","\u8be5\u670d\u52a1\u4e91\u5df2\u88ab\u5220\u9664"),S.css({"margin-left":"16px"}),G.append(y)):ba===Ua.APP_HAS_BEEN_DELETED?(ba=f.get("appHasBeenDeleted","\u8be5\u5e94\u7528\u5df2\u88ab\u5220\u9664"),S.css({"margin-left":"16px"}),G.append(y)):ba===Ua.APP_MENU_HAS_BEEN_DELETED&&
(ba=f.get("appMenuHasBeenDeleted","\u8be5\u5e94\u7528\u83dc\u5355\u5df2\u88ab\u5220\u9664"),S.css({"margin-left":"16px"}),G.append(y));t?S.text(ba+" ("+K.getSearchedNumber()+")"):S.text(ba);y.attr("title",ba);G.append(S);G.addClass("workbench-menu-lists-dir-text");G.css("margin-left",22*(K.getSubNodeLevel()+1)+"px");O.attr("title",ba);S=$("<div>");S.addClass("workbench-menu-lists-dir-icon");S.css("margin-left",22*K.getSubNodeLevel()+"px");p(K.isOpenDir(),S,!1);O.append(G);O.append(S);O.on("click",
function(na){P.interestInBehavior(P.WORKBENCH_MENU_DIR_OPERTAION,P.WORKBENCH_MENU_TREE_OPERATION_FLODER);A=e.getSelecteds()[0];e.setSelecteds([])})}else{O.addClass("workbench-menu-lists-dir");O.addClass(ha.DEFAULT_GRID_DRAG_IN_CLASS);G=$("<div>");t?Q(G,K.getName(),K.getId()):G.text(K.getName());G.addClass("workbench-menu-lists-dir-text");G.css({"margin-left":22*K.getSubNodeLevel()+23+"px"});G.attr("gs-id",K.getId());O.attr("title",K.getName());O.attr("gs-id",K.getId());S=$("<span>");S.addClass("workbench-menu-lists-item-icon");
S.attr("gs-id",K.getId());S.css("margin-left",22*K.getSubNodeLevel()+"px");D.background(S,K.getScene());O.append(G);O.append(S);if(K.isPreset()){ba=$("<div>");y=f.get("preset","\u9884\u7f6e");var ca=h.measureWidth(y)+14;ba.text(y);ba.addClass("workbench-menu-lists-item-preset-tag");ba.css("margin-left",22*K.getSubNodeLevel()+"px");S.css("margin-left",22*K.getSubNodeLevel()+ca+"px");G.css("margin-left",22*K.getSubNodeLevel()+ca+24+"px");O.append(ba)}O.on("mousedown",function(na){q=na.offsetX;H=na.offsetY});
O.on("mouseup",function(na){q===na.offsetX&&H===na.offsetY&&(A=e.getSelecteds()[0],e.setSelecteds([]))})}K.isHidden()&&O.hide()}},Q=function(O,K,G){var S=t.toUpperCase(),ba=K.toUpperCase(),y=ba.split(S),ca=S.length,na=$("<div>");na.attr("gs-id",G);for(var va in y){var Ka=ba.indexOf(y[va]),U=K.substr(0,y[va].length);Ka+=y[va].length;var V=ba.length-Ka;ba=ba.substr(Ka,V);K=K.substr(Ka,V);Ka=$("<span>");Ka.attr("gs-id",G);Ka.text(U);Ka.appendTo(na);if(1<y.length){V=ba.indexOf(S);U=K.substr(V,ca);V+=
ca;var ka=ba.length-V;ba=ba.substr(V,ka);K=K.substr(V,ka);V=$("<span>");V.text(U);V.css("color","#FF0000");V.attr("gs-id",G);V.appendTo(Ka)}}na.appendTo(O);na.attr("title",na.text())},ua=function(O){var K=b.find(".sa-ctrl-list-owner");K.empty();for(var G=$(document.createDocumentFragment()),S=0;S<O.length;S++){var ba=$("<div>");ba.addClass("sa-ctrl-list-item");ba.addClass("sa-ctrl-list-item_enabled");ba.addClass("sa-ctrl-list-item-defaultlayout");ba.css("height","32px");ba.css("line-height","32px");
var y=O[S];ba.data("model",y);N(ba,y);G.append(ba)}K.append(G);setTimeout(function(){L.fireMenuChangeListener()},500)};this.setItemModels=function(O){c=O};this.setSubItemSelectedListener=function(O){m=O}};Ca.WorkbenchSchemaArea=function(){var b=this,c,e,m,A,x,t,q=[],H,z,h,g,C,p,v=[];this.setRemoteImpl=function(y){x=y};this.setLoadWorkbenchFinishHandler=function(y){g=y};this.setModifyNameFinishHandler=function(y){C=y};this.setOpenInNewTabHandler=function(y){H=y};this.setOpenInFixedTabHandler=function(y){z=
y};this.setDeletedWorkbenchHandler=function(y){h=y};this.setMessageCurtain=function(y){t=y};this.getJqUi=function(){if(c)return c;c=$("<div/>");c.addClass("workbench-schema-area");O();c.append(e);t||(t=new $a,t.getJqUi().appendTo(c));return c};this.loadWorkbench=function(y){var ca=new da(x,function(na){if(na.myWorkbenches){for(var va=[],Ka=0;Ka<na.myWorkbenches.length;Ka++){var U=new ib;U.fromJsonObject(na.myWorkbenches[Ka]);va.push(U)}A=va}if(na=q)for(var V in na)na[V].getJqUi().remove();V=A;q=[];
for(na=0;na<V.length;na++){Ka=V[na];U=K();var ka=new wa;ka.setData(!0,U,Ka,1<A.length);m.append(ka.getJqUi());u.layoutCtrl(ka.getJqUi(),418*na,0,400,256);q.push(ka)}0===va.length?(va=new ib,va.setWorkbenchName(f.get("defaultWorkbenchName","\u6211\u7684\u5de5\u4f5c\u53f0")),va.setDefault(!0),N(va)):(p=b.getSelectedWorkbench(y),b.selectWorkbench(p),g&&g())},function(na,va){return!1});ca.setShowBlocking(!1);ca.loadWorkbenches()};var N=function(y){var ca=new da(x,function(na){y.getWorkbenchId()?(t.showSuccess(f.get("modifyWBNameSuc",
"\u4fee\u6539\u5de5\u4f5c\u53f0\u540d\u79f0\u6210\u529f\u3002")),S(y.getWorkbenchId()).setWorkbenchName(y.getWorkbenchName()),C&&C(y)):(t.showSuccess(f.get("createWorkbenchSuccess","\u65b0\u5efa\u5de5\u4f5c\u53f0\u65b9\u6848\u6210\u529f\u3002")),b.loadWorkbench(na))},function(na,va){return 1011003===na?(t.showPrompt(f.get("workbenchNameDuplicate","\u5de5\u4f5c\u53f0\u540d\u79f0\u5df2\u5b58\u5728\u3002")),!0):1011015===na?(t.showPrompt(f.get("workbenchNumLimit","\u5f53\u524d\u5de5\u4f5c\u53f0\u6570\u91cf\u5df2\u8fbe\u5230\u6700\u5927\u9650\u5236\uff0c\u4e0d\u80fd\u65b0\u5efa\u66f4\u591a\u7684\u5de5\u4f5c\u53f0\u3002")),
!0):!1});ca.setShowBlocking(!1);ca.saveOrUpdateWorkbench(y.toJsonObject())},Q=function(y,ca,na){var va=!y.isDefault();va&&v&&-1!==v.indexOf(y.getWorkbenchId())?(va=f.get("setDefaultWorkbenchWarning",'\u5de5\u4f5c\u53f0"#1"\u5df2\u7ecf\u56fa\u5b9a\u5728\u9875\u7b7e\u680f\u4e2d\uff0c\u4e0d\u80fd\u8bbe\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0\u3002'),va=va.replace("#1",y.getWorkbenchName()),t.showPrompt(va)):(y.setDefault(va),va&&P.interestInBehavior(P.WORKBENCH_SCHEMA_LIST_OPERATION,P.WORKBENCH_SCHEMA_LIST_OPERATION_SET_DEFAULT),
va=new da(x,function(Ka){ca?b.loadWorkbench(na):(y.isDefault()?t.showSuccess(f.get("setDefaultWorkbenchSuc","\u8bbe\u7f6e\u9ed8\u8ba4\u5de5\u4f5c\u53f0\u6210\u529f\u3002")):t.showSuccess(f.get("cancelDefaultWorkbenchSuc","\u53d6\u6d88\u8bbe\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0\u6210\u529f\u3002")),b.setDefaultWorkbench(y))},function(Ka,U){return!1}),va.setShowBlocking(!1),va.setDefaultWorkbench(y.toJsonObject()))};this.setDefaultWorkbench=function(y){for(var ca=0;ca<q.length;ca++)y.getWorkbenchId()===
q[ca].getWorkbenchId()?q[ca].setDefault(y.isDefault()):q[ca].setDefault(!1)};var ua=function(y){if(p&&y.getWorkbenchId()===p.getWorkbenchId()){var ca=f.get("closeInCurTabBeforeDelete","\u5de5\u4f5c\u53f0 \"'#1'\" \u5df2\u7ecf\u5728\u5f53\u524d\u9875\u7b7e\u4e2d\u6253\u5f00\uff0c\u8bf7\u5173\u95ed\u540e\u518d\u5220\u9664\u3002");ca=ca.replace("#1",y.getWorkbenchName());b.showHint(!1,ca)}else{ca=f.get("deleteWorkbenchWarning",'\u786e\u5b9a\u8981\u5220\u9664\u5de5\u4f5c\u53f0"#1"\u5417\uff1f');v&&-1!==
v.indexOf(y.getWorkbenchId())&&(ca=f.get("deleteWorkbenchPinWarning",'\u5de5\u4f5c\u53f0"#1"\u5df2\u7ecf\u5728\u9875\u7b7e\u680f\u4e2d\u56fa\u5b9a\uff0c\u786e\u8ba4\u5220\u9664\u8be5\u5de5\u4f5c\u53f0\u5417\uff1f'));ca=ca.replace("#1",y.getWorkbenchName());var na=R.createFeedbackDialog();na.setOptionType(R.OPTION_OK_CANCEL);na.setMsgImageType(R.MSG_DELETE);na.setMessage(ca);na.setClosingChecker(function(va){va===R.RETURN_OK&&(p&&p.getWorkbenchId()===y.getWorkbenchId()&&(p=null),va=new da(x,function(Ka){b.showHint(!0,
f.get("deleteSuccess","\u5220\u9664\u6210\u529f\u3002"));b.loadWorkbench();h&&h(y)},function(Ka,U){return 1011014===Ka?(t.showError(f.get("deleteWorkbenchTip","\u65e0\u6cd5\u5220\u9664\uff0c\u9ed8\u8ba4\u9700\u8981\u4fdd\u7559\u4e00\u4e2a\u5de5\u4f5c\u53f0\u3002")),!0):!1}),va.setShowBlocking(!1),va.deleteWorkbench(y.getWorkbenchId()));return!0});na.showDialog()}};this.selectWorkbench=function(y){p=y;for(var ca=0;ca<q.length;ca++)q[ca].setSelected(!1);S(y.getWorkbenchId()).setSelected(!0)};this.getSelectedWorkbench=
function(y){if(y){a:{for(var ca=A,na=0;na<ca.length;na++)if(ca[na].getWorkbenchId()===y){y=ca[na];break a}y=null}return y}return p?p:(y=ba(A))?y:A[0]};this.setWorkbenchPreviewPic=function(y,ca){(y=S(y))&&y.setPreviewPic(ca)};this.showHint=function(y,ca){y?t.showSuccess(ca):t.showPrompt(ca)};this.setPinTabIdList=function(y){v=y};this.getDefaultWorkbench=function(){return ba(A)};this.checkWorkbenchExist=function(y){return S(y)?!0:!1};this.updateScrollToSelected=function(){var y=p.getWorkbenchId();if(y=
S(y))y=y.getJqUi().position().left,e.scrollLeft(y)};var O=function(){e=$("<div class='workbench-schema-area-part'/>");var y=$("<div class='workbench-schema-area-part-label'/>"),ca=$("<div class='workbench-schema-area-part-new-scheme'/>"),na=$("<div class='workbench-schema-area-part-new-schema-icon'/>");D.background(na,"icon_add_on");na.appendTo(y);var va=$("<div/>");va.text(f.get("createSchema","\u65b0\u5efa\u5de5\u4f5c\u53f0"));va.css("float","left");ca.append(na);ca.append(va);ca.on("click",function(){P.interestInBehavior(P.WORKBENCH_SCHEMA_LIST_OPERATION,
P.WORKBENCH_SCHEMA_LIST_OPERATION_NEW);var Ka=q&&10<=q.length?!1:!0;Ka?G(null):t.showPrompt(f.get("workbenchNumLimit","\u5f53\u524d\u5de5\u4f5c\u53f0\u6570\u91cf\u5df2\u8fbe\u5230\u6700\u5927\u9650\u5236\uff0c\u4e0d\u80fd\u65b0\u5efa\u66f4\u591a\u7684\u5de5\u4f5c\u53f0\u3002"))});ca.appendTo(y);y.appendTo(e);m=$("<div class='workbench-schema-area-part-content'/>");m.appendTo(e)},K=function(){return{funSchemaDeleteHandler:function(y){P.interestInBehavior(P.WORKBENCH_SCHEMA_LIST_OPERATION,P.WORKBENCH_SCHEMA_LIST_OPERATION_DELETE);
ua(y)},funSchemaDefaultHandler:function(y){Q(y)},funSchemaNameModifyHandler:function(y){P.interestInBehavior(P.WORKBENCH_SCHEMA_LIST_OPERATION,P.WORKBENCH_SCHEMA_LIST_OPERATION_MODIFY_NAME);G(y)},funSchemaOpenNewHandler:function(y){P.interestInBehavior(P.WORKBENCH_SCHEMA_LIST_OPERATION,P.WORKBENCH_SCHEMA_LIST_OPERATION_NEW_TAB);H&&H(y)},funSchemaOpenFixedHandler:function(y){z&&z(y)}}},G=function(y){y=new aa(y);y.setFunCloseDialogCallBack(N);y.setFunWorkbenchNameCheck(function(ca){if(A)for(var na=
0;na<A.length;na++)if(A[na].getWorkbenchName()===ca)return!0;return!1});y.showDialog()},S=function(y){for(var ca=0;ca<q.length;ca++)if(y===q[ca].getWorkbenchId())return q[ca]},ba=function(y){for(var ca=0;ca<y.length;ca++)if(y[ca].isDefault())return y[ca];return null}};Ca.DesignerScene=za;Ca.WorkbenchCardContainerFactory=new function(){var b={};this.getCardContainer=function(c){if(c=b[c])return new c};this.register=function(c,e){b[c]=e}};var f,u,D,ha,W,L,F,P,ja,ea,Xa,ab,bb,fb,hb,eb,ib,da,$a,Oa,l,B,
M,R,Aa,Za,Sa,Wa,db,Na,Ba,Da,Pa,Ya,Ua,Ga,Qa;(function(){var b=com.kingdee.bos.qing;hb=b.CodeLoader;b=com.kingdee.bos.qing.common;eb=b.Util;u=b.DomUtil;Qa=b.TextMeasurer;b=com.kingdee.bos.qing.framework.common;f=b.MultilanguageManager.createPackageAccessor(Ca);Da=b.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);b=com.kingdee.bos.qing.ui.component;Xa=b.Icons;bb=b.List;ja=b.Label;ea=b.TextField;ab=b.DynamicTabContainer;B=b.AbstractModalDialog;$a=b.MessageCurtain;R=b.MessageDialog;
Za=b.MenuModel;Sa=b.MenuItemModel;Wa=b.SimpleConfirmer;b=com.kingdee.bos.qing.workbench;D=b.MyIcons;ha=b.QingGrid;W=b.GridOption;b=com.kingdee.bos.qing.workbench.common;L=b.Integration;da=b.Facade;M=b.RemoteImpl;F=b.MetricIntegration;P=b.WorkbenchBehavior;b=com.kingdee.bos.qing.workbench.model;fb=b.MenuFolderNode;ib=b.Workbench;Ba=b.WorkbenchModel;Pa=b.WorkbenchUtil;b=com.kingdee.bos.qing.scene.cardExhibition;Oa=b.IconContainer;l=b.Icons;b=com.kingdee.bos.qing.theme.common;Aa=b.Icons;b=com.kingdee.bos.qing.schemamanage.model;
db=b.SchemaAttrModel;b=com.kingdee.bos.qing.schemamanage.ui;Na=b.List;b=com.kingdee.bos.qing.assistant;Ya=b.AssistantPanel;b=com.kingdee.bos.qing.publish.env;Ua=b.AbstractPublishAppMenuNode;b=com.kingdee.bos.qing.common.ui;Ga=b.CommonIconUtil})();T.SCHEMA_BIZ_VERSION=-1;T.SCHEMA_MODIFIED_VERSION=1;Ca.WorkbenchCardContainerFactory.register(Ba.WidgetType_Square,function(){T.call(this);var b=this,c=this.protectedMethod,e=new Oa;this.getCardExhibition=function(){return new Fa};this.protectedCustomHead=
function(q){b.initHeadTitle();m(q)};var m=function(q){var H=$("<div class='sa-qing-publish-card-icon'>"),z=$("<div class='sa-qing-publish-card-icon'>"),h=$("<div class = 'sa-qing-publish-card-icon'>"),g=$("<div class= 'sa-qing-publish-card-icon'>"),C=$("<div class= 'sa-qing-publish-card-icon'>");z.on("click",function(){P.interestInBehavior(P.WORKBENCH_GRID_SQUARE_OPERATION,P.WORKBENCH_GRID_SQUARE_OPERATION_DESIGNER);var v=c.getMainUi(),N=ya.PERM_TYPE_ENTER_SQUARE;b.getExhibition().checkOperatePermAndPrompt(v,
N)&&(v=f.get("modifyWorkbenchSquareWidget","\u7f16\u8f91\u6570\u636e\u6597\u65b9\uff1a#1").replace("#1",c.getTitle()),b.protectedOpenDesigner(v,!0,x))});l.background(z,"btn-edit");z.on("mouseover",function(v){l.background(z,"btn-edit-on")});z.on("mouseout",function(v){l.background(z,"btn-edit")});z.attr("title",Da.get("squareIntoDesigner","\u8fdb\u5165\u8bbe\u8ba1\u5668\u4e2a\u6027\u5316\u4fee\u6539"));H.on("click",function(){P.interestInBehavior(P.WORKBENCH_GRID_SQUARE_OPERATION,P.WORKBENCH_GRID_SQUARE_OPERATION_ANALYSIS);
var v=c.getMainUi(),N=ya.PERM_TYPE_ENTER_ANALYSIS;b.getExhibition().checkOperatePermAndPrompt(v,N)&&(v=L.getOpenAnalysisUrl(b.getTag(),c.getWidgetBizId(),c.getWorkbenchId(),c.getRefType(),c.getRefMapUid()),N=f.get("widgetTypeLonger","\u6570\u636e\u5206\u6790")+"-"+c.getTitle(),b.fireOpenNewTab(N,v))});l.background(H,"btn-analysis");H.on("mouseover",function(v){l.background(H,"btn-analysis-on")});H.on("mouseout",function(v){l.background(H,"btn-analysis")});H.attr("title",Da.get("squareOpenAnalysis",
"\u6253\u5f00\u201c\u6570\u636e\u5206\u6790\u201d\u5de5\u5177"));h.on("click",A);l.background(h,"btn-refresh");h.on("mouseover",function(v){l.background(h,"btn-refresh-on")});h.on("mouseout",function(v){l.background(h,"btn-refresh")});h.attr("title",Da.get("cardRefresh","\u5237\u65b0"));g.on("click",function(){b.getExhibition().showExtraFilter(c.getMainUi())});l.background(g,"btn-filter");g.on("mouseover",function(v){l.background(g,"btn-filter-on")});g.on("mouseout",function(v){l.background(g,"btn-filter")});
g.attr("title",Da.get("cardFilter","\u8fc7\u6ee4\u6761\u4ef6"));g.hide();C.on("click",b.protectedRemoveSelf);D.background(C,"icon_delete");C.on("mouseover",function(v){D.background(C,"icon_delete_hover")});C.on("mouseout",function(v){D.background(C,"icon_delete")});C.attr("title",f.get("delete","\u5220\u9664"));C.hide();e.addIconUi(z);e.addIconUi(H);e.addIconUi(h);var p=e.getJqUi();e.setParent(q);e.hide();$(c.getJqOwner()).on("mouseenter",function(){b.isNeedShowOptBtn()&&(g.show(),e.show());C.show()});
$(c.getJqOwner()).on("mouseleave",function(){g.hide();e.hide();C.hide()});c.appendOperateBtnUI([C,p,g])},A=function(){b.refreshCardTitle();b.protectedCustomContent(c.getContentUi())},x=function(q){q&&b.setJsonModelBook(q);b.protectedRefreshChart(c.getContentUi(),q)};this.getScene=function(){return Ba.WidgetType_Square};this.remoteSchemaContent=function(q,H){t(q,H)};var t=function(q,H){var z=c.getContentUi();b.getJsonReferenceMap().tag=b.getTag();H=new da(c.getWorkbenchRemoteImpl(),function(h){var g=
h.operation;b.setJsonModelBook(h.model);b.setJsonOperation(g);q&&q(h)},H);H.setBlockingJqUi(z);H.loadSchema(c.getWorkbenchId(),b.getJsonReferenceMap())}});Ca.WorkbenchCardContainerFactory.register(Ba.WidgetType_Longer,function(){T.call(this);var b=this,c=this.protectedMethod,e=new Oa;this.getCardExhibition=function(){return new Z};this.protectedCustomHead=function(H){b.initHeadTitle();m(H)};var m=function(H){var z=$("<div class='sa-qing-publish-card-icon'>"),h=$("<div class = 'sa-qing-publish-card-icon'>"),
g=$("<div class= 'sa-qing-publish-card-icon'>"),C=$("<div class= 'sa-qing-publish-card-icon'>");z.on("click",function(){P.interestInBehavior(P.WORKBENCH_GRID_LONGER_OPERATION,P.WORKBENCH_GRID_LONGER_OPERATION_DESIGNER);var p=c.getMainUi(),v=ya.PERM_TYPE_ENTER_SQUARE;b.getExhibition().checkOperatePermAndPrompt(p,v)&&(p=f.get("modifyWorkbenchLongerWidget","\u7f16\u8f91\u6570\u636e\u5206\u6790\uff1a#1").replace("#1",c.getTitle()),b.protectedOpenDesigner(p,!1,x))});l.background(z,"btn-edit");z.on("mouseover",
function(p){l.background(z,"btn-edit-on")});z.on("mouseout",function(p){l.background(z,"btn-edit")});z.attr("title",Da.get("analysisIntoDesigner","\u8fdb\u5165\u201c\u6570\u636e\u5206\u6790\u201d\u5de5\u5177\u4e2a\u6027\u5316\u4fee\u6539"));h.on("click",A);l.background(h,"btn-refresh");h.on("mouseover",function(p){l.background(h,"btn-refresh-on")});h.on("mouseout",function(p){l.background(h,"btn-refresh")});h.attr("title",Da.get("cardRefresh","\u5237\u65b0"));C.on("click",t);D.backgroundWithHover(C,
"icon_schema_list");C.attr("title",f.get("switchScheme","\u9009\u62e9\u5206\u6790\u65b9\u6848"));g.on("click",b.protectedRemoveSelf);D.background(g,"icon_delete");g.on("mouseover",function(p){D.background(g,"icon_delete_hover")});g.on("mouseout",function(p){D.background(g,"icon_delete")});g.attr("title",f.get("delete","\u5220\u9664"));g.hide();e.addIconUi(C);e.addIconUi(z);e.addIconUi(h);C=e.getJqUi();e.setParent(H);e.hide();$(c.getJqOwner()).on("mouseenter",function(){b.isNeedShowOptBtn()&&e.show();
g.show()});$(c.getJqOwner()).on("mouseleave",function(){e.hide();g.hide()});c.appendOperateBtnUI([g,C])},A=function(){b.refreshCardTitle();b.protectedCustomContent(c.getContentUi())};this.getScene=function(){return Ba.WidgetType_Longer};var x=function(H,z,h){z&&b.setJsonReferenceMap(z);H&&b.setJsonModelBook(H);h&&b.setModelBookVersion(h);b.protectedRefreshChart(c.getContentUi(),H)},t=function(){var H=new Ea(c.getMainUi()),z=new Ha(c.getWidgetBizId(),c.getWorkbenchId(),c.getMenuItemInfo(),c.getMainUi());
z.setRemoteImpl(c.getWorkbenchRemoteImpl());z.setChangeSchemaChecker(q);z.setChangeSchemaListener(function(g,C,p){P.interestInBehavior(P.WORKBENCH_GRID_LONGER_OPERATION,P.WORKBENCH_GRID_LONGER_OPERATION_SELECT_SCHEMA);x(g,C,p)});z.setJsonReferenceMap(b.getJsonReferenceMap());var h=new La(H);z.setParameterPassToUI(h);H.getJqContainer().append(z.getJqUi());z.loadAttrs(H)};this.remoteSchemaContent=function(H,z){var h=c.getContentUi();z=new da(c.getWorkbenchRemoteImpl(),function(g){var C=g.operation,
p=g.version;b.setJsonModelBook(g.model);b.setJsonOperation(C);b.setModelBookVersion(p);H&&H(g)},z);z.setBlockingJqUi(h);z.loadSchema(c.getWorkbenchId(),b.getJsonReferenceMap())};var q=function(H,z){z=z.getFId()===b.getJsonReferenceMap().schemaId;var h=b.getModelBookVersion()===T.SCHEMA_MODIFIED_VERSION;!z&&h?(z=R.createFeedbackDialog(),z.setOptionType(R.OPTION_OK_CANCEL),z.setMsgImageType(R.MSG_DELETE),z.setMessage(f.get("switchSchemaPrompt","\u5f53\u524d\u663e\u793a\u7684\u65b9\u6848\u4e3a\u4fee\u6539\u540e\u7684\u4e2a\u6027\u5316\u65b9\u6848\uff0c\u5207\u6362\u540e\u8be5\u65b9\u6848\u5c06\u4e0d\u4f1a\u4fdd\u5b58\u3002\u786e\u8ba4\u8981\u5207\u6362\u65b9\u6848\u5417\uff1f")),
z.setClosingChecker(function(g){g===R.RETURN_OK&&H();return!0}),z.showDialog()):H()}});Ca.WorkbenchCardContainerFactory.register(Ba.WidgetType_Dashboard,function(){sa.call(this);var b=this.protectedMethod,c=this,e;this.getPublishType=function(){return b.getMenuItemInfo().getRefType()};this.protectedCustomHead=function(m){c.initHeadTitle();c.addOperateIcon(m)};this.loadContent=function(m){m.empty();var A=L.getDsbIFrameUrl(b.getWidgetBizId());e=$("<iframe>");e.addClass("workbench-iframe-card");e.attr("src",
A);e.attr("allowfullscreen","true");e.on("load",function(){var x=e[0].contentWindow.com.kingdee.bos.qing.AnalysisSceneOuterApi;x&&x.setFunOpenNewTab&&x.setFunOpenNewTab(c.getFunOpenNewTab())});e.appendTo(m)};this.getScene=function(){return Ba.WidgetType_Dashboard}});Ca.WorkbenchCardContainerFactory.register(Ba.WidgetType_QingReport,function(){function b(g){try{var C=g.data;if(C.targetWidgetId===m.attr("id"))if("remove"===C.operation?e.protectedRemoveSelf():"QingRpt"===C.messageFrom?e.getJsonReferenceMap().filterValues=
C.filterValues:"showEditTitleDialog"===C.operation&&c.createEditTitleDialog(),"getCardEditIconPosition"===C.operation){c.getJqHead().empty();z();var p=C.value;A.css("width",p+10+"px");x.css("left",p+27+"px")}else"refreshCardTitle"===C.operation?h():"loadCompleted"===C.operation&&(c.getJqHead().empty(),z())}catch(v){}}sa.call(this);var c=this.protectedMethod,e=this,m,A,x,t;window.addEventListener("message",b);this.protectedCustomHead=function(g){q(g);z()};this.getContentStyleClass=function(){return"workbench-iframe-card-content"};
this.getPublishType=function(){return c.getMenuItemInfo().getRefType()};this.loadContent=function(g){var C="workbench-"+e.getCardId().replace("#",""),p=L.getReportIFrameUrl(c.getWidgetBizId(),"workbench-card",H(),C,c.getTitle());m=$("<iframe>");m.css({position:"absolute",left:0,top:0,height:"100%",width:"100%",border:"none",background:"#FFF"});m.attr("allowfullscreen","true");m.attr("id",C);m.attr("src",p);C={cardName:c.getTitle(),isDesignTime:!1,exhibitionScene:"workbench-card",iFrameId:C,isRequireDecorateCard:!1,
isRequireOpacity:!1,isInWidgetPanel:!1,affectedParams:!1};m.data("extreportWidgetInfo",C);m.on("load",function(){try{var v=m[0].contentWindow.com.kingdee.bos.qing.AnalysisSceneOuterApi;v&&v.setFunOpenNewTab&&v.setFunOpenNewTab(e.getFunOpenNewTab())}catch(N){}});m.appendTo(g)};this.changeTitle=function(g){e.setTitle(g);m&&m[0].contentWindow.postMessage({workbenchExtReportCardMsg:"updateCardTitle",param:g},"*")};var q=function(g){t=$("<div class = 'sa-qing-publish-card-icon'>");$(c.getJqOwner()).on("mouseenter",
function(){t.show()});$(c.getJqOwner()).on("mouseleave",function(){t.hide()});t.on("click",e.protectedRemoveSelf);D.background(t,"icon_delete");t.addClass("workbench-exeport-delete-icon");t.on("mouseover",function(C){D.background(t,"icon_delete_hover")});t.on("mouseout",function(C){D.background(t,"icon_delete")});t.attr("title",f.get("delete","\u5220\u9664"));t.appendTo(g);t.hide();c.getJqHead().append(t)},H=function(){var g=e.getJsonReferenceMap().refType,C;g&&0===g.indexOf("appmenu")?C=0:g&&0===
g.indexOf("qingcenter")&&(C=1);return C},z=function(){A=$("<div class='workbench-card-drag-cover'>");A.css("height","12px");A.appendTo(c.getJqHead());x=$("<div class='workbench-card-drag-cover'>");x.appendTo(c.getJqHead())},h=function(){e.refreshCardTitle(function(){m&&m[0].contentWindow.postMessage({workbenchExtReportCardMsg:"refreshCard"},"*")})};this.getScene=function(){return Ba.WidgetType_QingReport};this.customHandleError=function(){A.css("width",0);x.css("width",0);c.getMainUi().removeClass("workbench-div-card-main");
c.getContentUi().removeClass(e.getContentStyleClass());c.getJqHead().empty();e.initHeadTitle();e.addOperateIcon(c.getContentUi())};this.destroy=function(){window.removeEventListener("message",b)}});Ca.WorkbenchCardContainerFactory.register(Ba.WidgetType_Metrics,function(){T.call(this);var b=this,c=this.protectedMethod,e=new Oa;this.getScene=function(){return Ba.WidgetType_Metrics};this.getCardExhibition=function(){return new Fa};this.protectedCustomHead=function(t){b.initHeadTitle();m(t)};this.getScene=
function(){return Ba.WidgetType_Metrics};this.remoteSchemaContent=function(t,q){var H=c.getContentUi();if(b.getJsonReferenceMap()){var z=c.getWorkbenchRemoteImpl();z=new da(z,function(h){var g=h.operation;b.setJsonModelBook(h.model);b.setJsonOperation(g);t&&t(h)},function(h,g,C){q&&q(h,g,C)});z.setBlockingJqUi(H);b.getJsonReferenceMap().tag=b.getTag();z.loadSchema(c.getWorkbenchId(),b.getJsonReferenceMap())}else F.remoteSchemaContent(c.getWorkbenchId(),c.getWidgetBizId(),function(h){var g=h.model;
b.setJsonReferenceMap(h.ref);b.setJsonModelBook(g);t&&t(h)})};var m=function(t){var q=$("<div class='sa-qing-publish-card-icon'>"),H=$("<div class='sa-qing-publish-card-icon'>"),z=$("<div class = 'sa-qing-publish-card-icon'>"),h=$("<div class= 'sa-qing-publish-card-icon'>"),g=$("<div class= 'sa-qing-publish-card-icon'>");H.on("click",function(){var p=f.get("modifyWorkbenchSquareWidget","\u7f16\u8f91\u6570\u636e\u6597\u65b9\uff1a#1").replace("#1",c.getTitle());b.protectedOpenDesigner(p,!0,A)});l.background(H,
"btn-edit");H.on("mouseover",function(p){l.background(H,"btn-edit-on")});H.on("mouseout",function(p){l.background(H,"btn-edit")});H.attr("title",Da.get("enterEdit","\u8fdb\u5165\u8bbe\u8ba1\u5668"));q.on("click",function(){var p=L.getOpenAnalysisUrl(b.getTag(),c.getWidgetBizId(),c.getWorkbenchId(),c.getRefType(),c.getRefMapUid()),v=f.get("widgetTypeLonger","\u6570\u636e\u5206\u6790")+"-"+c.getTitle();b.fireOpenNewTab(v,p)});l.background(q,"btn-analysis");q.on("mouseover",function(p){l.background(q,
"btn-analysis-on")});q.on("mouseout",function(p){l.background(q,"btn-analysis")});q.attr("title",Da.get("enterAnalysis","\u8fdb\u5165\u201c\u6570\u636e\u5206\u6790\u201d"));z.on("click",x);l.background(z,"btn-refresh");z.on("mouseover",function(p){l.background(z,"btn-refresh-on")});z.on("mouseout",function(p){l.background(z,"btn-refresh")});z.attr("title",Da.get("cardRefresh","\u5237\u65b0"));h.on("click",function(){b.getExhibition().showExtraFilter(c.getMainUi())});l.background(h,"btn-filter");h.on("mouseover",
function(p){l.background(h,"btn-filter-on")});h.on("mouseout",function(p){l.background(h,"btn-filter")});h.attr("title",Da.get("cardFilter","\u8fc7\u6ee4\u6761\u4ef6"));h.hide();g.on("click",b.protectedRemoveSelf);D.background(g,"icon_delete");g.on("mouseover",function(p){D.background(g,"icon_delete_hover")});g.on("mouseout",function(p){D.background(g,"icon_delete")});g.attr("title",f.get("delete","\u5220\u9664"));g.hide();e.addIconUi(H);e.addIconUi(q);e.addIconUi(z);var C=e.getJqUi();e.setParent(t);
e.hide();$(c.getJqOwner()).on("mouseenter",function(){b.isNeedShowOptBtn()&&(h.show(),e.show());g.show()});$(c.getJqOwner()).on("mouseleave",function(){h.hide();e.hide();g.hide()});c.appendOperateBtnUI([g,C,h])},A=function(t){t&&b.setJsonModelBook(t);b.protectedRefreshChart(c.getContentUi(),t)},x=function(){b.refreshCardTitle();b.protectedCustomContent(c.getContentUi())}});ya.PERM_TYPE_ENTER_ANALYSIS="enter_analysis";ya.PERM_TYPE_ENTER_SQUARE="enter_square"})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.workbench&&(com.kingdee.bos.qing.workbench={});var n=com.kingdee.bos.qing.workbench;n.WorkbenchEntrance=function(){function da(a){var d=h.getWorkbenchGridTabPane(a).getWorkbenchGrid().getGrid();a=d.getGridOption();d=d.getWidgets();d=Cb(a,
d);$a(a.getBizId(),d.toJsonObject())}function $a(a,d,k){var r=new f(B.getRemoteImpl(),function(){console.log("save workbench model success");k&&k(a);return!0},function(w,I){console.log("save workbench model fail");return!0});r.setShowBlocking(!1);r.saveWorkbenchModel(a,d)}function Oa(a,d,k){var r=new f(B.getRemoteImpl(),function(w){console.log("load workbench model success");d&&d(w);return!0},function(w,I){console.log("load workbench model fail");k&&k();return!1});r.setShowBlocking(!0);r.loadWorkbenchModel(a)}
function l(a,d){var k=h.getSelectedTab(),r=h.getWorkbenchGridTabPane(a);if(r&&k===r)if((k=r.getWorkbenchGrid().getGrid())&&0<k.getWidgetCount())try{k.screenShot(function(w){g.setWorkbenchPreviewPic(a,w);Gb(a,w);d&&d()})}catch(w){console.log(w)}else g.setWorkbenchPreviewPic(a,null),Hb(a),d&&d();else d&&d()}var B=this,M=[new Ja(aa.get("myDirectory","\u9605\u89c8\u5939"),Ca.QINGCENTER),new Ja(aa.get("myCard","\u5361\u7247\u5e93"),Ca.CARDLIBRARY),new Ja(aa.get("myMenu","\u83dc\u5355\u9879"),Ca.APPMENU)],
R=[new Ja(aa.get("publishContent","\u53d1\u5e03\u5185\u5bb9"),!1),new Ja(aa.get("presetContent","\u9884\u7f6e\u5185\u5bb9"),!0)],Aa=[new Ja(aa.get("byPublisher","\u6309\u53d1\u5e03\u4eba"),"by_publisher"),new Ja(aa.get("byDirectory","\u6309\u76ee\u5f55"),"by_directory")],Za=new Ja(aa.get("all","\u5168\u90e8"),""),Sa,Wa,db,Na,Ba,Da,Pa,Ya,Ua,Ga,Qa,b,c,e,m,A,x,t=Ca.QINGCENTER,q=R[0],H=Aa[0],z=Za,h,g,C=[],p=[],v,N,Q={},ua=!1,O=[78,34],K;this.getJqUi=function(a){db=a;G();db.append(Wa);return Wa};var G=
function(){if(!Wa){B.protectedCustomInitEnv();Wa=$("<div>");Wa.addClass("workbench-body");var a=new wa;a.setCallbackImmediately(function(){document.body.style.height=document.documentElement.clientHeight+"px";b&&b.resize();h&&h.updateTabHeadUi()});a.setDelay(250);a.observe();y();na();W.setGridEventListener(qb);W.setStaticWidgetPainter(Ib);W.setChangingWidgetPainter(Jb);W.setWidgetDefaultInfoGetter(Kb);W.setWidgetExtInfoGetter(Lb);W.setDroppableEventListener(Mb);W.setDraggableEventListener(Nb);W.setGetWorkbenchGptModelByWidgetIdHandler(vb);
W.setGetWorkbenchGptModelByRefUidHandler(Ob);W.setAddWidgetFromGptListener(Pb);W.setMenuChangeListener(Qb)}};this.loadWorkbenchGroupPublished=function(){var a=new f(B.getRemoteImpl(),function(d){if(d){var k=new ma(t);k.fromJsonObject(d);d=k.getChildren();k=[];for(var r=0;r<d.length;r++)ba(k,d[r]);C=k;0<C.length?(va(C),v&&cb()):S()}else S()},function(d,k){S();return!0});a.setShowBlocking(!0);a.setBlockingJqUi(Ga);a.loadWorkbenchGroupPublished(t,q.getValue(),H.getValue(),z.getValue())};var S=function(){C=
[];Ga&&Ga.remove();Qa&&Qa.remove();Qa=$("<div>");var a=$("<div>"),d=aa.get("emptyTips","\u6682\u65e0\u53d1\u5e03\u8bb0\u5f55");X.background(a,"icon_empty_background");a.addClass("workbench-empty-background");a.css("background-position","center");var k=$("<div>");k.addClass("workbench-message-text");k.text(d);Qa.append(a);Qa.append(k);Ua.append(Qa)},ba=function(a,d){-1===a.indexOf(d)&&a.push(d);if(d=d.getChildren())for(var k=0;k<d.length;k++)1<d[k].getSubNodeLevel()&&d[k].setHidden(!0),d[k]instanceof
ra?(0<d[k].getSubNodeLevel()&&d[k].setOpenDir(!1),ba(a,d[k])):-1===a.indexOf(d[k])&&a.push(d[k])},y=function(){b=new Y;b.setHorizontalSplit(!0);b.setSplitLineWide(5);b.setResizeMode(Y.RESIZE_MODE_FIRST_FIXED);b.setFirstSize(220,220,640);b.setSecondSize(db.width()-220-5,0,-1);b.getJqUi().addClass("workbench-pane");Ua=$("<div>");Ua.addClass("workbench-leftpane");ob();b.setFirstChild(Y.createChildWrapper(Ua,U));B.loadWorkbenchGroupPublished();var a=$("<div>");a.addClass("workbench-rightpane");K=new ib;
K.getJqUi().appendTo(a);var d=V();a.append(d);b.setSecondChild(Y.createChildWrapper(a));Wa.append(b.getJqUi())},ca=function(a){a.ctrlKey&&3===M.length&&M.push(new Ja(aa.get("myMetric","\u6307\u6807\u5e93"),Ca.METRICLIBRARY))},na=function(){Na||(Na=$("<div>"),Na.addClass("workbench-tool-bar"),Na.on("mousedown",ca),Ra().appendTo(Na),b.getJqUi().append(Na));Da||(Da=$("<div>"),Da.addClass("workbench-search-icon"),Da.attr("title",aa.get("search","\u641c\u7d22")),X.background(Da,"icon_search"),Da.on("mouseover",
function(d){X.background(Da,"icon_search_on")}),Da.on("mouseout",function(d){X.background(Da,"icon_search")}),Da.on("click",E),Na.append(Da));Pa||(Pa=$("<div>"),Pa.addClass("workbench-refresh-icon"),X.background(Pa,"icon_refresh"),Pa.on("mouseover",function(d){X.background(Pa,"icon_refresh_on")}),Pa.on("mouseout",function(d){X.background(Pa,"icon_refresh")}),Pa.attr("title",aa.get("refresh","\u5237\u65b0")),Pa.on("click",B.loadWorkbenchGroupPublished),Na.append(Pa));if(!Ba){Ba=$("<div>");Ba.addClass("workbench-collapse");
Ba.attr("title",aa.get("collapse","\u6536\u8d77"));var a=$("<div>");a.addClass("workbench-collapse-icon");X.background(a,"icon_left");a.on("mouseover",function(d){X.background(a,"icon_left_on")});a.on("mouseout",function(d){X.background(a,"icon_left")});Ba.append(a);Ba.on("click",Ka);Na.append(Ba)}},va=function(a){Ga&&Ga.remove();Qa&&Qa.remove();var d=$("<div>");d.addClass("workbench-leftpane-tree");Ya=new za;Ya.setItemModels(a);v&&v.getText().trim()&&Ya.setSearchText(v.getText().trim());Ya.setSubItemSelectedListener(fa);
a=Ya.getJqUi();d.append(a);Ga=d;Ua.append(Ga);N&&"block"===N.css("display")&&Ua.css("margin-top",O[0]+"px")},Ka=function(a){a&&a.stopPropagation();b.getNonemptyFirstWide()?(c=b.getNonemptyFirstWide(),b.setFirstSize(0,220,640),b.setSecondSize(db.width()-13,0,-1)):(a=13<c?c:220,b.setFirstSize(a,220,640),b.setSecondSize(db.width()-a-5,0,-1))},U=function(){if(Ba){Ba.css({left:b.getNonemptyFirstWide()+"px"});if(b.getNonemptyFirstWide()){var a=Ba.find(".workbench-collapse-icon");a&&a.removeClass("workbench-collapse-icon-right");
e&&e.getJqUi().show();b.getJqUi().css({left:"0px",background:"#fff"});Na&&Na.css({width:b.getNonemptyFirstWide()+5+"px"});Ba.attr("title",aa.get("collapse","\u6536\u8d77"));N&&N.removeClass("workbench-leftpane-searchbox-none")}else(a=Ba.find(".workbench-collapse-icon"))&&a.addClass("workbench-collapse-icon-right"),e&&e.getJqUi().hide(),b.getJqUi().css({left:"10px",background:"#e2e7ef"}),Na&&Na.css({width:b.getNonemptyFirstWide()+"px"}),Ba.attr("title",aa.get("expand","\u5c55\u5f00")),N&&N.addClass("workbench-leftpane-searchbox-none");
N&&N.css({width:b.getNonemptyFirstWide()-13+"px"})}h&&h.resize()},V=function(){var a=$("<div>");a.addClass("workbench-rightpane-tab");var d=$("<div>");d.addClass("workbench-schema-area-background");d.hide();a.append(d);g=new Ha;g.setRemoteImpl(B.getRemoteImpl());g.setOpenInFixedTabHandler(Db);g.setOpenInNewTabHandler(Rb);g.setLoadWorkbenchFinishHandler(function(){var r=g.getSelectedWorkbench();Db(r,function(){ka()})});g.setDeletedWorkbenchHandler(function(r){h.removeWorkbenchGridTabPane(r.getWorkbenchId())});
g.setModifyNameFinishHandler(function(r){h.updateWorkbenchGridTabPaneTitle(r);h.resize()});g.setMessageCurtain(K);g.loadWorkbench();g.getJqUi().hide();d.append(g.getJqUi());h=new sa;h.setShowSchemaArea(function(r){r?(ja.interestInBehavior(ja.WORKBENCH_TAB_OPERATION,ja.WORKBENCH_TAB_OPERATION_SCHEMA),h.onSchemaAreaOpended(!0),g.getJqUi().show(),d.show(),g.updateScrollToSelected(),$(document.body).on("mousedown",k)):(h.onSchemaAreaOpended(!1),g.getJqUi().hide(),d.hide(),$(document.body).off("mousedown",
k))});h.setMessageCurtain(K);a.append(h.getJqUi());var k=function(r){pa.isDescendent(r.target,g.getJqUi()[0])||pa.isDescendent(r.target,h.getFixedTabHeadUi()[0])||0<$(".sa-ctrl-dialog").length||(g.getJqUi().hide(),h.onSchemaAreaOpended(!1),d.hide(),$(document.body).off("mousedown",k))};return a},ka=function(){if(!ua){var a=new f(B.getRemoteImpl(),function(d){ua=!0;if(null!=d){for(var k=[],r=[],w=0;w<d.length;w++){var I=new F;I.fromJsonObject(d[w]);k.push(I)}k.sort(function(xa,Ia){return xa.getItemOrder()-
Ia.getItemOrder()});for(w=0;w<k.length;w++)k[w].getPathType()===L.Constants.PIN_TAB_TYPE_WORKBENCH?(d=P.convertPinBarItemToWorkbench(k[w]),la(d)):(d=P.convertPinBarItemToLeafNode(k[w]),oa(d,!0,!1)),r.push(k[w].getRefId());g.setPinTabIdList(r)}},function(d,k){return!1});a.setShowBlocking(!1);a.loadPinTabBarList()}},Ra=function(){e=new T;e.setItemModels(M);e.setSelected(M[0]);e.setDropdownAsLongAsPossible(!0);e.setCustomPainter(function(d,k,r){k.text(r.getDisplayName());k.attr("title",r.getDisplayName())});
e.addSelectedChangedListener(function(d,k,r){t=r.getValue();ob();ja.interestInBehavior(ja.WORKBENCH_MENU_DIR_OPERTAION,ja.getMenuDirOperationBehaviorByRefPathType(t));B.loadWorkbenchGroupPublished()});var a=e.getJqUi();pa.layoutCtrl(a,0,0,100,32);a.addClass("workbench-message-searchtype-combobox");return a},ob=function(){m&&m.remove();A&&A.remove();x&&x.remove();if(t===Ca.CARDLIBRARY){var a=pb();m=a.getJqUi();m.addClass("workbench-filter-type-combobox-left");a=new T;a.setItemModels(Aa);a.setSelected(H);
a.setCustomPainter(function(k,r,w){r.text(w.getDisplayName());r.attr("title",w.getDisplayName())});a.addSelectedChangedListener(function(k,r,w){H=w;ja.interestInBehavior(ja.WORKBENCH_MENU_DIR_OPERTAION,ja.getMenuDirOperationBehaviorByGroupType(H.getDisplayName()));B.loadWorkbenchGroupPublished()});A=a.getJqUi();A.addClass("workbench-filter-type-combobox-right");Ua.append(m);Ua.append(A)}else if(t===Ca.METRICLIBRARY){var d=[];d.push(Za);a=new f(B.getRemoteImpl(),function(k){if(k)for(var r=0;r<k.length;r++){var w=
k[r];w=new Ja(w.name,w.id);d.push(w)}sb(d)},function(k,r){sb(d);return!0});a.setShowBlocking(!0);a.setBlockingJqUi(Ga);a.loadMetricSystems()}else a=pb(),m=a.getJqUi(),m.addClass("workbench-filter-type-combobox"),Ua.append(m)},sb=function(a){var d=new T;d.setItemModels(a);d.setSelected(Za);d.setCustomPainter(function(k,r,w){r.text(w.getDisplayName());r.attr("title",w.getDisplayName())});d.addSelectedChangedListener(function(k,r,w){z=w;B.loadWorkbenchGroupPublished()});x=d.getJqUi();x.addClass("workbench-filter-type-combobox");
Ua.append(x)},pb=function(){var a=new T;a.setItemModels(R);a.setSelected(q);a.setCustomPainter(function(d,k,r){k.text(r.getDisplayName());k.attr("title",r.getDisplayName())});a.addSelectedChangedListener(function(d,k,r){q=r;B.loadWorkbenchGroupPublished();ja.interestInBehavior(ja.WORKBENCH_MENU_DIR_OPERTAION,ja.getMenuDirOperationBehaviorByContentType(q.getDisplayName()))});return a},E=function(){if(v)"none"===N.css("display")?(N.css("display","block"),a=Wa.find(".workbench-leftpane"),a.css("margin-top",
O[0]+"px")):(N.css("display","none"),a=Wa.find(".workbench-leftpane"),a.css("margin-top",O[1]+"px"));else{v=new D;v.addSearchListener(cb);v.setSearchListenerDelay(1E3);v.setShowSearchIcon(!0);v.setPlaceholder(aa.get("searchPublishName","\u641c\u7d22\u53d1\u5e03\u5185\u5bb9\u7684\u540d\u79f0"));N=v.getJqUi();N.addClass("workbench-leftpane-searchbox");b&&N.css({width:b.getNonemptyFirstWide()-13+"px"});N.insertAfter(Na);var a=Wa.find(".workbench-leftpane");a.css("margin-top",O[0]+"px")}};this.getUrlParam=
function(a){return ia.decodeParamFromUrl(window.location.search,a)};this.appendUrlParam=function(a,d,k){return ia.appendParamToUrl(a,d,k)};this.getRemoteImpl=function(){if(null==Sa){Sa=new u;Sa.setRemoteUrl(B.protectedGetRemoteUrl());var a=B.getUrlParam("tag");Sa.setTag(a)}return Sa};this.protectedGetRemoteUrl=function(){throw Error("override me");};this.protectedGetPublishEntranceUrl=function(a){throw Error("override me");};this.protectedCustomInitEnv=function(){throw Error("Override me.");};var fa=
function(a){event&&"mousedown"===event.type||(ja.interestInBehavior(ja.WORKBENCH_MENU_NODE_CLICK_OPERATION,ja.getMenuNodeClickOperation(a.getScene())),oa(a,!1,!0))},la=function(a){function d(I){var xa=[];I&&(xa=new ea,xa.fromJsonObject(I),xa=wb(xa));w.setInitGridWidgets(xa);w.showWorkbenchGrid()}function k(){w.setInitGridWidgets([]);w.showWorkbenchGrid()}var r=a.getWorkbenchId();if(h.checkNeedLoadWorkbenchGrid(a,!1,xb)){var w=new Z;w.setWorkbench(a);w.setUserObject(P.convertWorkbenchToPinBarItem(a));
w.setFunSwitchLockStateChecker(lb);w.setFunSwitchLockState(mb);w.setLock(!0);w.setInitGridAction(function(){Oa(r,d,k)});w.setBeforeCloseAction(function(I){l(r,function(){I&&I(!0)});yb(r)});h.addGridTab(w,!1)}},oa=function(a,d,k){var r=a.getId(),w=J.getUrlParamValue();if(a.getScene()===ea.WidgetType_Square)K.showPrompt(aa.get("openSquareFailedTip","\u6570\u636e\u6597\u65b9\u4e0d\u80fd\u76f4\u63a5\u6253\u5f00\u9875\u7b7e\uff0c\u60a8\u53ef\u4ee5\u62d6\u52a8\u8be5\u6570\u636e\u6597\u65b9\u5230\u5de5\u4f5c\u53f0\u4e2d\u67e5\u770b\u3002"));
else{var I=a.getScene()===ea.WidgetType_Metrics?La.getMetricSquareEntrance(a.getId()):B.protectedGetPublishEntranceUrl(a.getId());I=ia.appendParamToUrl(I,"skin",w);(w=a.getSource())&&"extreport"===w&&(I=ia.appendParamToUrl(I,"appID","qing_rpt"),I=ia.appendParamToUrl(I,"isPreset",a.isPreset()));I=ia.appendParamToUrl(I,"publishSourceType",a.getScene());ta(r)&&(r=new ya(r,I),I=P.convertLeafNodeToPinBarItem(a),r.setTitle(I.getName()),r.setIconName(a.getScene()),r.setUserObject(I),r.setFunSwitchLockState(mb),
r.setFunOpenNewTab(Ma),r.setLock(d),h.addTab(r,k))}},ta=function(a){var d=!0,k=h.getDynamicTabPanes(),r=k.length;if(10<=r){d=!1;for(var w=0;w<r;w++)if(a===k[w].getId()){d=!0;break}d||(a=aa.get("maxTabCountError","\u9875\u7b7e\u6700\u591a\u53ef\u540c\u65f6\u6253\u5f0010\u4e2a\uff0c\u8bf7\u5173\u95ed\u90e8\u5206\u9875\u7b7e\u540e\u518d\u8bd5"),k=new ha,k.setBounds(760,200,320,200),k.setOptionType(ha.OPTION_OK),k.setMessage(a),k.showDialog())}return d},Ma=function(a,d,k,r){k||(k=ia.createUUID());ta(k)&&
(d=new ya(k,d),d.setFunOpenNewTab(Ma),d.setTitle(a),d.setLockAble(!1),d.setIconName(r),h.addTab(d,!0))},lb=function(a){var d=g.getDefaultWorkbench();if(d&&a instanceof F){var k=d.getWorkbenchId();a=a.getRefId();if(k===a)return k=aa.get("defaultWorkbenchPinWarning",'\u5de5\u4f5c\u53f0"#1"\u4e3a\u9ed8\u8ba4\u5de5\u4f5c\u53f0\uff0c\u4e0d\u80fd\u56fa\u5b9a\u5728\u9875\u7b7e\u680f\u4e2d\u3002'),k=k.replace("#1",d.getWorkbenchName()),K.showPrompt(k),!1}return!0},mb=function(){ja.interestInBehavior(ja.WORKBENCH_TAB_OPERATION,
ja.WORKBENCH_TAB_OPERATION_PIN);var a=h.getDynamicTabPanes();if(a){for(var d=[],k=[],r=0;r<a.length;r++){var w=a[r];w.isLock()&&(d.push(w.getUserObject().toJsonObject()),k.push(w.getId()))}a=new f(B.getRemoteImpl(),function(I){g.setPinTabIdList(k)},function(I,xa){return!1});a.setShowBlocking(!1);a.pinTabBarList(d)}},cb=function(){if(C&&0!==C.length){var a=v.getText().trim();if(a){ja.interestInBehavior(ja.WORKBENCH_MENU_TREE_OPERATION,ja.WORKBENCH_MENU_TREE_OPERATION_SEARCH);p=[];var d=C,k=new ra,
r=[],w;for(w in d)d[w]instanceof ra&&d[w].clearSearchNumber(),d[w].getParentNode()||r.push(d[w]);k.setChildren(r);a=jb([],k,a.toUpperCase());if(0===a.length){Ya.getJqUi().remove();Ga.empty();var I=$("<div>");X.background(I,"icon_search_no_data_background");I.addClass("workbench-empty-background");I.css("background-position","center");a=aa.get("nothingSearched","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c");d=$("<div>");d.addClass("workbench-message-text");d.text(a);Ga.append(I);
Ga.append(d)}else{d=[];for(k=a.length-1;0<=k;k--)a[k]instanceof ra?a[k].setOpenDir(!0):a[k].setHidden(!1),-1===d.indexOf(a[k])&&d.push(a[k]);for(I in d)d[I].setHidden(!1),d[I]instanceof ra&&d[I].setOpenDir(!0);p=d;va(p)}}else{I=Ya.getCurrentSelectedNode();d=p;a=[];if(d)for(k=0;k<=d.length;k++)d[k]instanceof ra&&a.push(d[k]);d=p=C;if(a)for(k=0;k<a.length;k++)for(r=0;r<d.length;r++)d[r].getParentNode()===a[k]&&d[r].setHidden(!1);va(p);I&&Ya.setSelected([I])}}},jb=function(a,d,k){if(d=d.getChildren())for(var r=
d.length-1;0<=r;r--){var w=d[r];if(w instanceof ra){jb(a,w,k);a:{var I=void 0;var xa=w.getChildren();for(I in xa)if(xa[I].isSearch()){I=!0;break a}I=!1}I&&-1===a.indexOf(w)?(w.setSearch(!0),a.push(w)):w.setSearch(!1)}else-1<w.getName().toUpperCase().indexOf(k)?(w.setSearch(!0),a.push(w),nb(w)):w.setSearch(!1)}return a},nb=function(a){if(a=a.getParentNode())a.addSearchedNumber(),a.getParentNode()&&nb(a)},qb=function(a,d,k){if("dragStart"===d||"dragStop"===d){var r=h.getWorkbenchGridTabPane(a).getDroppableHandler();
r&&r.toggleDropMask("dragStart"===d);"dragStop"===d&&(ja.interestInBehavior(ja.WORKBENCH_GRID_CARD_DESIGN_OPERATION,ja.WORKBENCH_GRID_CARD_DESIGN_OPERATION_DRAG),l(a))}else"resizeStart"===d||"resizeStop"===d?"resizeStop"===d&&(ja.interestInBehavior(ja.WORKBENCH_GRID_CARD_DESIGN_OPERATION,ja.WORKBENCH_GRID_CARD_DESIGN_OPERATION_RESIZE),setTimeout(function(){Q[a+k].redraw();l(a)},300)):"dropOver"!==d&&"dropOut"!==d&&("cellResize"===d?setTimeout(function(){Object.keys(Q).forEach(function(w){-1!==w.indexOf(a)&&
Q[w].redraw()})}):("removed"===d&&l(a),d=k.getGridOption(),r=k.getWidgets(),rb(r)&&(r=Cb(d,r),$a(d.getBizId(),r.toJsonObject()))))},rb=function(a){for(var d=!0,k=0;k<a.length;k++)if(!a[k].getExtInfo().oRef){d=!1;break}return d},Ib=function(a,d,k,r){var w=!1;if(k&&k.getExtInfo()&&k.getExtInfo().oWorkbenchGptModel){w=k.getExtInfo().oWorkbenchGptModel;var I=w.getRef();var xa=w.getJsonModelBook();var Ia=w.getBizId();var kb=w.getBizName();var zb=ea.WidgetType_Square;w=!0}else{k&&k.getExtInfo()&&(I=k.getExtInfo().oRef);
Ia=d.split("#")[0];var Eb=Ab(a,Ia,k);kb=Eb.name;zb=Eb.scene}var tb=$("<div>");tb.addClass("workbench-grid-widget");var Ta=com.kingdee.bos.qing.workbench.WorkbenchCardContainerFactory.getCardContainer(zb);Ta.setWidgetId(d);Ta.setWidgetBizId(Ia);Ta.setTitle(kb);Ta.setMenuItemInfo(ub(Ia));Ta.setWorkbenchId(a);Ta.setJsonReferenceMap(I);Ta.setFunOpenNewTab(Ma);xa&&Ta.setJsonModelBook(xa);Ta.setFunRemoveSelf(function(){var gb=aa.get("confirmToDelete","\u786e\u5b9a\u5220\u9664#1 \u201c#2\u201d \u5417?");
gb=gb.replace("#1",aa.get(zb));gb=gb.replace("#2",kb);Sb(gb,function(){r&&r.removeWidget(Ta.getWidgetId());delete Q[a+Ta.getWidgetId()]},null)});Ta.setFunRefChangeCallback(function(){da(a)});Ta.setFunCardTitleChangeCallback(function(gb){K&&K.showSuccess(aa.get("modifyCardNameSuc","\u4fee\u6539\u5361\u7247\u540d\u79f0\u6210\u529f\u3002"));h.getWorkbenchGridTabPane(a).getWorkbenchGrid().updateWidgetDisplayName(Ta.getWidgetId(),gb);da(a)});Ta.setFunUpdateWidgetIdCallback(function(gb){delete Q[a+Ta.getWidgetId()];
Q[a+gb]=Ta;Ta.setWidgetId(gb);k.setId(gb);h.getWorkbenchGridTabPane(a).getWorkbenchGrid().updateWidgetId(d,gb)});Ta.setExecutedCallback(function(){var gb=!0;Object.keys(Q).forEach(function(Bb){-1!==Bb.indexOf(a)&&Q[Bb]&&!Q[Bb].getExecutedStatus()&&(gb=!1)});gb&&setTimeout(function(){l(a)},1300)});Q[a+d]=Ta;w?Tb(a,I,xa,function(){Ta.show(tb)}):Ta.show(tb);return tb},Jb=function(a,d,k){d=d.split("#")[0];a=Ab(a,d,k);var r=a.scene,w=a.name,I=a.displayName;a=5;k=4;if(r===ea.WidgetType_Square||r===ea.WidgetType_Metrics)a=
k=3;d=$("<div>");d.addClass("workbench-grid-changing-icon");X.background(d,"icon_"+r);var xa=$("<div>");xa.addClass("workbench-grid-changing-widget-icon");X.background(xa,r);w=I?I:w;r=$("<div>");r.addClass("workbench-grid-changing-widget-title");r.text(w);w=$("<div>");w.addClass("workbench-grid-changing");w.attr("gs-w",a);w.attr("gs-h",k);w.append(xa);w.append(r);w.append(d);return w},Kb=function(a,d,k){d=d.split("#")[0];a=Ab(a,d,k);return{type:a.scene,name:a.name,displayName:a.displayName,minW:2,
minH:2,maxW:15,maxH:15}},Lb=function(a,d){var k=d.split("#")[0];d=(d=Q[a+d])?d.getJsonReferenceMap():null;a=Fb(a,k);k={};k.oRef=d;k.oWorkbenchGptModel=a;return k},Ab=function(a,d,k){var r=ub(d);a=Fb(a,d);if(k){var w=k.getName();var I=k.getType();var xa=k.getDisplayName()}else r?(w=r.getName(),I=r.getScene()):a&&(w=a.getBizName(),I=ea.WidgetType_Square);return{scene:I,name:w,displayName:xa}},ub=function(a){for(var d,k=0;k<C.length;k++){var r=C[k];if("function"===typeof r.getId&&r.getId()===a){d=C[k];
break}}return d},Fb=function(a,d){if(a=h.getWorkbenchGridTabPane(a).getDroppableHandler().createWorkbenchGptModel(d))return d=a.getRef(),d.fileKey=ia.createUUID(),delete d.schemaId,a},Nb=function(a,d,k){a=h.getWorkbenchGridTabPane(a);(a=a.getDroppableHandler())&&a.toggleDropMask("dragStart"===d);a=h.getSelectedTab();if(a instanceof ya){var r=!1;"dragStart"===d&&(r=!0);a.toggleMask(r)}"dragStart"===d&&k&&(d=$(k).attr("gs-id"))&&(d=ub(d),ja.interestInBehavior(ja.WORKBENCH_MENU_NODE_DRAG_OPERATION,ja.getMenuNodeDragOperation(d.getScene())))},
Mb=function(a,d,k){if(k=Ub(k)){var r=h.getWorkbenchGridTabPane(a).getDroppableHandler();if("dropCheck"===d)return!0;"dropOver"===d?r.dropOverHandler(null):"dropOut"===d?r.dropOutHandler(null):"dropped"===d&&(d=function(w){r.droppedHandler(w)},0<k.indexOf("#")?(ja.interestInBehavior(ja.WORKBENCH_AI_CONTENT_OPERATION,ja.WORKBENCH_AI_CONTENT_OPERATION_DRAG_FROM_GRID),Vb(a,k,d)):(ja.interestInBehavior(ja.WORKBENCH_AI_CONTENT_OPERATION,ja.WORKBENCH_AI_CONTENT_OPERATION_DRAG_FROM_MENU),Wb(a,k,d)))}},Ub=
function(a){if($(a).hasClass(Va.DEFAULT_GRID_WIDGET_CLASS)||$(a).hasClass(Va.DEFAULT_GRID_DRAG_IN_CLASS))return $(a).attr("gs-id")},Qb=function(){var a=h.getSelectedTab();(a instanceof Z||a instanceof Fa)&&a.getWorkbenchGrid()&&a.getWorkbenchGrid().setupDragIn("workbench-leftpane-tree")},Ob=function(a,d){for(var k=h.getWorkbenchGridTabPane(a).getWorkbenchGrid().getGrid().getWidgets(),r=0;r<k.length;r++){var w=k[r],I=w.getExtInfo();if(I&&I.oRef&&I.oRef.uid===d)return vb(a,w.getId())}},vb=function(a,
d){var k=h.getWorkbenchGridTabPane(a).getWorkbenchGrid().getGrid().getWidgetById(d),r=Q[a+d];d=d.split("#")[0];var w=k.getType(),I=k.getName(),xa=k.getDisplayName();if((k=k.getExtInfo())&&k.oRef){k&&k.oWorkbenchGptModel&&(d=k.oWorkbenchGptModel.getBizId());k=k.oRef;if(r){var Ia=r.getErrorCode();"function"===typeof r.getTag&&(k.tag=r.getTag())}r=new qa;r.setWorkbenchId(a);r.setBizId(d);r.setBizType(w);r.setBizName(xa?xa:I);r.setRef(k);Ia&&r.setErrorCode(Ia);return r}},Vb=function(a,d,k){a=vb(a,d);
k(a)},Wb=function(a,d,k){var r=ub(d),w=r.getRefType(),I=new f(B.getRemoteImpl(),function(xa){var Ia=new qa;Ia.setWorkbenchId(a);Ia.setBizId(d);Ia.setBizType(r.getScene());Ia.setBizName(r.getName());Ia.setRef(xa.ref);k(Ia);return!0},function(xa,Ia){var kb=new qa;kb.setWorkbenchId(a);kb.setBizId(d);kb.setBizType(r.getScene());kb.setBizName(r.getName());kb.setErrorCode(xa);kb.setErrorMessage(Ia);k(kb);return!0});I.setShowBlocking(!1);I.getReferenceMap(d,w)},Pb=function(a,d){var k=d.getBizId()+"#"+(new Date).getTime(),
r=new com.kingdee.bos.qing.workbench.GridWidget;r.setId(k);r.setType(ea.WidgetType_Square);r.setName(d.getBizName());r.setDisplayName(d.getBizName());r.setW(3);r.setH(3);r.addExtInfo("oRef",d.getRef());r.addExtInfo("oWorkbenchGptModel",d);a=h.getWorkbenchGridTabPane(a);a.getWorkbenchGrid().getGrid().addWidget(r);a.getWorkbenchGrid().changeCoverHintStatus(!1)},Tb=function(a,d,k,r,w){var I=new f(B.getRemoteImpl(),function(){console.log("save schema success, oRef:",d);r&&r()},function(){console.log("save schema error");
w&&w()});I.setShowBlocking(!1);I.saveOriginalSchema(a,d,k)},Rb=function(a,d){function k(xa){var Ia=[];xa&&(Ia=new ea,Ia.fromJsonObject(xa),Ia=wb(Ia));I.setInitGridWidgets(Ia);I.showWorkbenchGrid();Ia&&0!==Ia.length||g.setWorkbenchPreviewPic(w,null);d&&d()}function r(){I.setInitGridWidgets([]);I.showWorkbenchGrid()}var w=a.getWorkbenchId();if(h.checkNeedLoadWorkbenchGrid(a,!1,xb)&&ta(w)){var I=new Z;I.setWorkbench(a);I.setInitGridAction(function(){Oa(w,k,r)});I.setBeforeCloseAction(function(xa){g.checkWorkbenchExist(w)||
xa(!0);l(w,function(){xa&&xa(!0)});yb(w)});I.setUserObject(P.convertWorkbenchToPinBarItem(a));I.setFunSwitchLockStateChecker(lb);I.setFunSwitchLockState(mb);h.addGridTab(I,!0)}},Db=function(a,d){function k(xa){var Ia=[];xa&&(Ia=new ea,Ia.fromJsonObject(xa),Ia=wb(Ia));I.setInitGridWidgets(Ia);I.showWorkbenchGrid();Ia&&0!==Ia.length||g.setWorkbenchPreviewPic(w,null);d&&d();h.resize()}function r(){I.setInitGridWidgets([]);I.showWorkbenchGrid()}var w=a.getWorkbenchId();if(h.checkNeedLoadWorkbenchGrid(a,
!0,xb)){g.selectWorkbench(a);var I=new Fa;I.setWorkbench(a);I.setInitGridAction(function(){Oa(w,k,r)});I.setBeforeCloseAction(function(xa){g.checkWorkbenchExist(w)||xa(!0);l(w,function(){xa&&xa(!0)});yb(w)});h.setFixedTab(I,!0)}},yb=function(a){for(var d in Q)-1<d.indexOf(a)&&(Q[d].destroy(),delete Q[d])},Cb=function(a,d){var k=new ea,r=new Xa;r.setName(a.getBizId());r.setDisplayName(a.getBizName());r.setX(0);r.setY(0);r.setWidth(a.getGridColumns());r.setHeight(a.getGridRows());for(a=0;a<d.length;a++){var w,
I=d[a];I.getType()===ea.WidgetType_Square?w=new ab:I.getType()===ea.WidgetType_Longer?w=new bb:I.getType()===ea.WidgetType_Dashboard?w=new fb:I.getType()===ea.WidgetType_QingReport?w=new hb:I.getType()===ea.WidgetType_Metrics&&(w=new eb);w.setName(I.getName());w.setDisplayName(I.getDisplayName());w.setX(I.getX());w.setY(I.getY());w.setWidth(I.getW());w.setHeight(I.getH());w.setReferenceCustomMap(I.getExtInfo().oRef);r.addWidget(w)}k.setPage(r);return k},wb=function(a){var d=[];a=a.getPage().getWidgets();
for(var k=0;k<a.length;k++){var r=a[k],w=r.getReferenceCustomMap(),I=new com.kingdee.bos.qing.workbench.GridWidget;I.setId(w.refToId+"#"+w.uid);I.setType(r.getWidgetTypeName());I.setDisplayName(r.getDisplayName());I.setName(I.getDisplayName()?I.getDisplayName():r.getName());I.setX(r.getX());I.setY(r.getY());I.setW(r.getWidth());I.setH(r.getHeight());I.addExtInfo("oRef",w);d.push(I)}return d},xb=function(a,d){d=d?aa.get("alreadyBeenOpenedInRightTab","\u5de5\u4f5c\u53f0 \"'#1'\" \u5df2\u7ecf\u5728\u53f3\u4fa7\u9875\u7b7e\u4e2d\u6253\u5f00\u3002"):
aa.get("alreadyBeenOpenedInCurTab","\u5de5\u4f5c\u53f0 \"'#1'\" \u5df2\u7ecf\u5728\u53f3\u4fa7\u9875\u7b7e\u4e2d\u6253\u5f00\u3002");d=d.replace("#1",a.getWorkbenchName());g.showHint(!1,d)},Gb=function(a,d){Ea.uploadBase64Image(d,function(k){Xb(a,k)},function(){})},Xb=function(a,d){var k=new f(B.getRemoteImpl(),function(r){},function(r,w){});k.setShowBlocking(!1);k.updateWorkbenchThumbnail(a,d)},Hb=function(a){var d=new f(B.getRemoteImpl(),function(k){},function(k,r){});d.setShowBlocking(!1);d.deleteWorkbenchThumbnail(a)},
Sb=function(a,d,k){var r=com.kingdee.bos.qing.ui.component.MessageDialog,w=r.createFeedbackDialog();w.setMsgImageType(r.MSG_DELETE);w.setMessage(a);w.showDialog();w.setClosingChecker(function(I){I==r.RETURN_OK?d&&d():k&&k();return!0})}};var X,Y,ia,pa,J,wa,aa,ma,ra,T,sa,ya,Fa,Z,za,Ha,qa,La,Ea,Va,Ja,Ca,f,u,D,ha,W,L,F,P,ja,ea,Xa,ab,bb,fb,hb,eb,ib;(function(){var da=com.kingdee.bos.qing;J=da.SkinUtil;da=com.kingdee.bos.qing.framework.common;wa=da.WindowResizeObserver;aa=da.MultilanguageManager.createPackageAccessor(n);
da=com.kingdee.bos.qing.ui.component;Y=da.SplitPane;T=da.ComboBox;D=da.SearchBox;ha=da.MessageDialog;ib=da.MessageCurtain;da=com.kingdee.bos.qing.common;ia=da.Util;pa=da.DomUtil;da=com.kingdee.bos.qing.workbench;X=da.MyIcons;sa=da.WorkbenchTabContainer;ya=da.WorkbenchIFrameTabPane;Z=da.WorkbenchGridTabPane;Fa=da.WorkbenchFixedTabPane;za=da.WorkBenchMenuPane;Ha=da.WorkbenchSchemaArea;Va=da.QingGrid;da=com.kingdee.bos.qing.workbench.model;ma=da.MenuNode;ra=da.MenuFolderNode;Ja=da.DropdownOption;L=da.Workbench;
F=da.PinTabBarItem;P=da.WorkbenchUtil;Ca=da.RefPathType;ea=da.WorkbenchModel;Xa=da.Page;ab=da.WidgetSquare;bb=da.WidgetLonger;fb=da.WidgetDashboard;hb=da.WidgetQingReport;eb=da.WidgetMetric;qa=da.WorkbenchGptModel;da=com.kingdee.bos.qing.workbench.common;La=da.MetricIntegration;Ea=da.WorkbenchHelper;W=da.Integration;f=da.Facade;u=da.RemoteImpl;ja=da.WorkbenchBehavior})()})();
//qingVersionTag: 20250324